<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä»£ç å®æˆ˜ä¹‹çŸ¥è¯†è’¸é¦</title>
      <link href="/2022/03/09/zhi-shi-zheng-liu-pytorch-dai-ma-shi-zhan/"/>
      <url>/2022/03/09/zhi-shi-zheng-liu-pytorch-dai-ma-shi-zhan/</url>
      
        <content type="html"><![CDATA[<h1 id="çŸ¥è¯†è’¸é¦pytorchä»£ç å®æˆ˜"><a href="#çŸ¥è¯†è’¸é¦pytorchä»£ç å®æˆ˜" class="headerlink" title="çŸ¥è¯†è’¸é¦pytorchä»£ç å®æˆ˜"></a>çŸ¥è¯†è’¸é¦pytorchä»£ç å®æˆ˜</h1><h2 id="æœ¬æ–‡æ¦‚è¿°"><a href="#æœ¬æ–‡æ¦‚è¿°" class="headerlink" title="æœ¬æ–‡æ¦‚è¿°"></a>æœ¬æ–‡æ¦‚è¿°</h2><ol><li>ä½¿ç”¨pytorchåœ¨MNISTæ•°æ®é›†ä¸Šï¼Œä»å¤´è®­ç»ƒæ•™å¸ˆç½‘ç»œã€å­¦ç”Ÿç½‘ç»œã€çŸ¥è¯†è’¸é¦è®­ç»ƒå­¦ç”Ÿç½‘ç»œï¼Œæ¯”è¾ƒæ€§èƒ½</li><li>æœ¬æ–‡å‚è€ƒ<a href="https://www.bilibili.com/video/BV1zP4y1F7g4/?spm_id_from=333.788" target="_blank" rel="noopener">åŒæµå­è±ªå…„bç«™è§†é¢‘</a></li></ol><h2 id="å¯¼å…¥module"><a href="#å¯¼å…¥module" class="headerlink" title="å¯¼å…¥module"></a>å¯¼å…¥module</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import torchfrom torch import nnimport torch.nn.functional as Fimport torchvisionfrom torchvision import transformsfrom torch.utils.data import DataLoaderfrom torchinfo import summaryfrom tqdm import tqdm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‚æ•°è®¾ç½®"><a href="#å‚æ•°è®¾ç½®" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python"># è®¾ç½®éšæœºæ•°ï¼Œä¾¿äºå¤ç°my_seed = 2030torch.manual_seed(my_seed)# gpu or cpudevice = torch.device('cuda' if torch.cuda.is_available() else 'cpu')# æ˜¯å¦åŠ é€Ÿå·ç§¯è¿ç®—torch.backends.cudnn.benchmark = Falsebatch_size = 32lr = 1e-4  # learning rateepochs = 6temp = 10  # è’¸é¦æ¸©åº¦ï¼Œæ ¹æ®ç»éªŒè®¾ç½®ï¼Œè¶Šå¤§soft labelè¶Šå¹³alpha = 0.3  # hard lossæƒé‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">device<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>device(type=&#39;cuda&#39;)</code></pre><h2 id="åŠ è½½æ•°æ®é›†"><a href="#åŠ è½½æ•°æ®é›†" class="headerlink" title="åŠ è½½æ•°æ®é›†"></a>åŠ è½½æ•°æ®é›†</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_dataset = torchvision.datasets.MNIST(root='./datasets/',                                           train=True,                                           transform=transforms.ToTensor(),                                           download=True)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>D:\meiyunhe\softwares\Miniconda3\envs\env_pytorch\lib\site-packages\torchvision\datasets\mnist.py:498: UserWarning: The given NumPy array is not writeable, and PyTorch does not support non-writeable tensors. This means you can write to the underlying (supposedly non-writeable) NumPy array using the tensor. You may want to copy the array to protect its data or make it writeable before converting it to a tensor. This type of warning will be suppressed for the rest of this program. (Triggered internally at  ..\torch\csrc\utils\tensor_numpy.cpp:180.)  return torch.from_numpy(parsed.astype(m[2], copy=False)).view(*s)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">test_dataset = torchvision.datasets.MNIST(root='./datasets/',                                          train=False,                                          transform=transforms.ToTensor(),                                          download=True)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_loader = DataLoader(dataset=train_dataset, batch_size=batch_size, shuffle=True)test_loader = DataLoader(dataset=test_dataset, batch_size=batch_size, shuffle=False)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="æ•™å¸ˆæ¨¡å‹"><a href="#æ•™å¸ˆæ¨¡å‹" class="headerlink" title="æ•™å¸ˆæ¨¡å‹"></a>æ•™å¸ˆæ¨¡å‹</h2><h3 id="æ„å»ºæ•™å¸ˆæ¨¡å‹"><a href="#æ„å»ºæ•™å¸ˆæ¨¡å‹" class="headerlink" title="æ„å»ºæ•™å¸ˆæ¨¡å‹"></a>æ„å»ºæ•™å¸ˆæ¨¡å‹</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">class TeacherModel(nn.Module):    def __init__(self, in_channels=1, num_classes=10):        super(TeacherModel, self).__init__()        self.relu = nn.ReLU()        self.fc1 = nn.Linear(784, 1200)        self.fc2 = nn.Linear(1200, 1200)        self.fc3 = nn.Linear(1200, num_classes)        self.dropout = nn.Dropout(p=0.5)    def forward(self, x):        x = x.view(-1, 784)        x = self.fc1(x)        x = self.dropout(x)        x = self.relu(x)        x = self.fc2(x)        x = self.dropout(x)        x = self.relu(x)        x = self.fc3(x)        return x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">teacher_model = TeacherModel()teacher_model = teacher_model.to(device)summary(teacher_model)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>=================================================================Layer (type:depth-idx)                   Param #=================================================================TeacherModel                             --â”œâ”€ReLU: 1-1                              --â”œâ”€Linear: 1-2                            942,000â”œâ”€Linear: 1-3                            1,441,200â”œâ”€Linear: 1-4                            12,010â”œâ”€Dropout: 1-5                           --=================================================================Total params: 2,395,210Trainable params: 2,395,210Non-trainable params: 0=================================================================</code></pre><h3 id="è®­ç»ƒæ•™å¸ˆæ¨¡å‹"><a href="#è®­ç»ƒæ•™å¸ˆæ¨¡å‹" class="headerlink" title="è®­ç»ƒæ•™å¸ˆæ¨¡å‹"></a>è®­ç»ƒæ•™å¸ˆæ¨¡å‹</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">criterion = nn.CrossEntropyLoss()optimizer = torch.optim.Adam(teacher_model.parameters(), lr=lr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for epoch in range(epochs):    teacher_model.train()    # è®­ç»ƒé›†ä¸Šè®­ç»ƒæƒé‡    for data, targets in tqdm(train_loader):        data = data.to(device)        targets = targets.to(device)        # å‰å‘æ¨æ–­        preds = teacher_model(data)        loss = criterion(preds, targets)        # åå‘ä¼ æ’­        optimizer.zero_grad()        loss.backward()        optimizer.step()    # æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹    teacher_model.eval()    num_correct = 0    num_samples = 0    with torch.no_grad():        for data, targets in test_loader:            data = data.to(device)            targets = targets.to(device)            preds = teacher_model(data)            predictions = preds.max(1).indices            num_correct += (predictions == targets).sum()            num_samples += predictions.size(0)        acc = (num_correct / num_samples).item()    teacher_model.train()    print('epoch: {} \t acc: {:.5f}'.format(epoch+1, acc))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:12&lt;00:00, 150.31it/s]epoch: 1      acc: 0.94270100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:11&lt;00:00, 161.99it/s]epoch: 2      acc: 0.96180100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:11&lt;00:00, 159.42it/s]epoch: 3      acc: 0.97000100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:11&lt;00:00, 162.90it/s]epoch: 4      acc: 0.97400100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:12&lt;00:00, 156.18it/s]epoch: 5      acc: 0.97800100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:11&lt;00:00, 162.00it/s]epoch: 6      acc: 0.97810</code></pre><h2 id="å­¦ç”Ÿæ¨¡å‹"><a href="#å­¦ç”Ÿæ¨¡å‹" class="headerlink" title="å­¦ç”Ÿæ¨¡å‹"></a>å­¦ç”Ÿæ¨¡å‹</h2><h3 id="æ„å»ºå­¦ç”Ÿæ¨¡å‹"><a href="#æ„å»ºå­¦ç”Ÿæ¨¡å‹" class="headerlink" title="æ„å»ºå­¦ç”Ÿæ¨¡å‹"></a>æ„å»ºå­¦ç”Ÿæ¨¡å‹</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">class StudentModel(nn.Module):    def __init__(self, in_channels=1, num_classes=10):        super(StudentModel, self).__init__()        self.relu = nn.ReLU()        self.fc1 = nn.Linear(784, 20)        self.fc2 = nn.Linear(20, 20)        self.fc3 = nn.Linear(20, num_classes)    def forward(self, x):        x = x.view(-1, 784)        x = self.fc1(x)        x = self.relu(x)        x = self.fc2(x)        x = self.relu(x)        x = self.fc3(x)        return x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">student_model = StudentModel()student_model = student_model.to(device)summary(student_model)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>=================================================================Layer (type:depth-idx)                   Param #=================================================================StudentModel                             --â”œâ”€ReLU: 1-1                              --â”œâ”€Linear: 1-2                            15,700â”œâ”€Linear: 1-3                            420â”œâ”€Linear: 1-4                            210=================================================================Total params: 16,330Trainable params: 16,330Non-trainable params: 0=================================================================</code></pre><h3 id="è®­ç»ƒå­¦ç”Ÿæ¨¡å‹"><a href="#è®­ç»ƒå­¦ç”Ÿæ¨¡å‹" class="headerlink" title="è®­ç»ƒå­¦ç”Ÿæ¨¡å‹"></a>è®­ç»ƒå­¦ç”Ÿæ¨¡å‹</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">criterion = nn.CrossEntropyLoss()optimizer = torch.optim.Adam(student_model.parameters(), lr=lr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">epochs = 3for epoch in range(epochs):    student_model.train()    # è®­ç»ƒé›†ä¸Šè®­ç»ƒæƒé‡    for data, targets in tqdm(train_loader):        data = data.to(device)        targets = targets.to(device)        # å‰å‘æ¨æ–­        preds = student_model(data)        loss = criterion(preds, targets)        # åå‘ä¼ æ’­        optimizer.zero_grad()        loss.backward()        optimizer.step()    # æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹    student_model.eval()    num_correct = 0    num_samples = 0    with torch.no_grad():        for data, targets in test_loader:            data = data.to(device)            targets = targets.to(device)            preds = student_model(data)            predictions = preds.max(1).indices            num_correct += (predictions == targets).sum()            num_samples += predictions.size(0)        acc = (num_correct / num_samples).item()    student_model.train()    print('epoch: {} \t acc: {:.5f}'.format(epoch+1, acc))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:11&lt;00:00, 159.62it/s]epoch: 1      acc: 0.83810100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:11&lt;00:00, 157.98it/s]epoch: 2      acc: 0.88360100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:13&lt;00:00, 135.53it/s]epoch: 3      acc: 0.89970</code></pre><h2 id="çŸ¥è¯†è’¸é¦è®­ç»ƒå­¦ç”Ÿæ¨¡å‹"><a href="#çŸ¥è¯†è’¸é¦è®­ç»ƒå­¦ç”Ÿæ¨¡å‹" class="headerlink" title="çŸ¥è¯†è’¸é¦è®­ç»ƒå­¦ç”Ÿæ¨¡å‹"></a>çŸ¥è¯†è’¸é¦è®­ç»ƒå­¦ç”Ÿæ¨¡å‹</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ•™å¸ˆæ¨¡å‹å¼€å¯é¢„æµ‹æ¨¡å¼teacher_model.eval()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>TeacherModel(  (relu): ReLU()  (fc1): Linear(in_features=784, out_features=1200, bias=True)  (fc2): Linear(in_features=1200, out_features=1200, bias=True)  (fc3): Linear(in_features=1200, out_features=10, bias=True)  (dropout): Dropout(p=0.5, inplace=False))</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># è®­ç»ƒå­¦ç”Ÿæ¨¡å‹å‚æ•°student_model = StudentModel()student_model = student_model.to(device)# student_model.train()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># hard losshard_loss = nn.CrossEntropyLoss()# soft losssoft_loss = nn.KLDivLoss(reduction='batchmean')  # KLæ•£åº¦optimizer = torch.optim.Adam(student_model.parameters(), lr=lr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">epochs = 3for epoch in range(epochs):    student_model.train()    # è®­ç»ƒé›†ä¸Šè®­ç»ƒæƒé‡    for data, targets in tqdm(train_loader):        data = data.to(device)        targets = targets.to(device)        # æ•™å¸ˆæ¨¡å‹å‰å‘æ¨æ–­        with torch.no_grad():            teacher_preds = teacher_model(data)        # å­¦ç”Ÿæ¨¡å‹å‰å‘æ¨æ–­        student_preds = student_model(data)        student_loss = hard_loss(student_preds, targets)        # è®¡ç®—è’¸é¦åçš„é¢„æµ‹ç»“æœåŠsoft_loss        ditillation_loss = soft_loss(F.softmax(student_preds / temp, dim=1),                                     F.softmax(teacher_preds / temp, dim=1))        # å°†hard_losså’Œsoft_lossåŠ æƒæ±‚å’Œ        loss = alpha * student_loss + (1 - alpha) * ditillation_loss        # åå‘ä¼ æ’­        optimizer.zero_grad()        loss.backward()        optimizer.step()    # æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹    student_model.eval()    num_correct = 0    num_samples = 0    with torch.no_grad():        for data, targets in test_loader:            data = data.to(device)            targets = targets.to(device)            preds = student_model(data)            predictions = preds.max(1).indices            num_correct += (predictions == targets).sum()            num_samples += predictions.size(0)        acc = (num_correct / num_samples).item()    student_model.train()    print('epoch: {} \t acc: {:.5f}'.format(epoch+1, acc))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:13&lt;00:00, 138.17it/s]epoch: 1      acc: 0.84210100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:13&lt;00:00, 141.64it/s]epoch: 2      acc: 0.88100100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:12&lt;00:00, 145.44it/s]epoch: 3      acc: 0.89420</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®æˆ˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> ä»£ç å®æˆ˜ </tag>
            
            <tag> çŸ¥è¯†è’¸é¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹äººè„¸æ£€æµ‹</title>
      <link href="/2022/02/14/shen-du-xue-xi-zhi-ren-lian-jian-ce/"/>
      <url>/2022/02/14/shen-du-xue-xi-zhi-ren-lian-jian-ce/</url>
      
        <content type="html"><![CDATA[<h1 id="äººè„¸æ£€æµ‹"><a href="#äººè„¸æ£€æµ‹" class="headerlink" title="äººè„¸æ£€æµ‹"></a>äººè„¸æ£€æµ‹</h1><ul><li><a href="https://github.com/topics/face-detection?o=desc&amp;s=stars" target="_blank" rel="noopener">github topics</a></li><li><a href="https://github.com/ageitgey/face_recognition" target="_blank" rel="noopener">face_recognition</a>: æœ¬é¡¹ç›®æ˜¯ä¸–ç•Œä¸Šæœ€ç®€æ´çš„äººè„¸è¯†åˆ«åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨Pythonå’Œå‘½ä»¤è¡Œå·¥å…·æå–ã€è¯†åˆ«ã€æ“ä½œäººè„¸ã€‚æœ¬é¡¹ç›®çš„äººè„¸è¯†åˆ«æ˜¯åŸºäºä¸šå†…é¢†å…ˆçš„C++å¼€æºåº“ dlibä¸­çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œç”¨Labeled Faces in the Wildäººè„¸æ•°æ®é›†è¿›è¡Œæµ‹è¯•ï¼Œæœ‰é«˜è¾¾99.38%çš„å‡†ç¡®ç‡ã€‚ä½†å¯¹å°å­©å’Œäºšæ´²äººè„¸çš„è¯†åˆ«å‡†ç¡®ç‡å°šå¾…æå‡ã€‚</li><li><a href="https://github.com/serengil/deepface" target="_blank" rel="noopener">deepface</a>: <font color="red">ä¸€å¼ å›¾ç‰‡ä¸€å¼ è„¸</font> Deepface is a lightweight face recognition and facial attribute analysis (age, gender, emotion and race) framework for python. It is a hybrid face recognition framework wrapping state-of-the-art models: VGG-Face, Google FaceNet, OpenFace, Facebook DeepFace, DeepID, ArcFace and Dlib.</li><li><a href="https://github.com/ultralytics/yolov5" target="_blank" rel="noopener">yolov5</a>: YOLOv5 ğŸš€ is a family of object detection architectures and models pretrained on the COCO dataset, and represents Ultralytics open-source research into future vision AI methods, incorporating lessons learned and best practices evolved over thousands of hours of research and development.</li></ul><h1 id="äººè„¸æ£€æµ‹å’Œå±æ€§åˆ†æByç™¾åº¦äº‘"><a href="#äººè„¸æ£€æµ‹å’Œå±æ€§åˆ†æByç™¾åº¦äº‘" class="headerlink" title="äººè„¸æ£€æµ‹å’Œå±æ€§åˆ†æByç™¾åº¦äº‘"></a>äººè„¸æ£€æµ‹å’Œå±æ€§åˆ†æByç™¾åº¦äº‘</h1><ul><li><a href="https://cloud.baidu.com/product/face/detect" target="_blank" rel="noopener">ç™¾åº¦äº‘å…¥å£</a></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">import requestsimport base64from PIL import Imageimport matplotlib.pyplot as pltimage_path = './datasets/image/face_detection.jpg'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·å–access-tokenå‡½æ•°"><a href="#è·å–access-tokenå‡½æ•°" class="headerlink" title="è·å–access_tokenå‡½æ•°"></a>è·å–access_tokenå‡½æ•°</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_face_get_baidu_access_token():    """    è·å–baiduçš„access_token    :return access_token    """    # encoding:utf-8    api_key = 'you_api_key'    secret_key = 'you_secret_key'    # client_id ä¸ºå®˜ç½‘è·å–çš„AKï¼Œ client_secret ä¸ºå®˜ç½‘è·å–çš„SK    # host = 'https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=ã€å®˜ç½‘è·å–çš„AKã€‘&client_secret=ã€å®˜ç½‘è·å–çš„SKã€‘'    host = 'https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=%s&client_secret=%s' % (api_key, secret_key)    response = requests.get(host)    access_token = ''    if response:        res = response.json()        print(res)        access_token = res.get('access_token', '')    return access_token<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">access_token = func_face_get_baidu_access_token()print(access_token)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>{&#39;refresh_token&#39;: &#39;25.6fc065b464989fce6cbd41d4e6ae1b0a.315360000.1959759303.282335-25143866&#39;, &#39;expires_in&#39;: 2592000, &#39;session_key&#39;: &#39;9mzdA5Pj7ZKeP5jo0GEKduVWm7i9fwTHWSpG06S/723YxM+caN9pBehP4cuPHZ3duhWbbqJ27F7p1oAVdqi/11rl5aG07g==&#39;, &#39;access_token&#39;: &#39;24.896a37769e0b9eb3ee4548f4c8259ec7.2592000.1646991303.282335-25143866&#39;, &#39;scope&#39;: &#39;public vis-classify_dishes vis-classify_car brain_all_scope vis-classify_animal vis-classify_plant brain_object_detect brain_realtime_logo brain_dish_detect brain_car_detect brain_animal_classify brain_plant_classify brain_ingredient brain_advanced_general_classify brain_custom_dish vis-faceverify_FACE_V3 brain_poi_recognize brain_vehicle_detect brain_redwine brain_currency brain_vehicle_damage brain_multi_ object_detect wise_adapt lebo_resource_base lightservice_public hetu_basic lightcms_map_poi kaidian_kaidian ApsMisTest_Testæƒé™ vis-classify_flower lpq_å¼€æ”¾ cop_helloScope ApsMis_fangdi_permission smartapp_snsapi_base smartapp_mapp_dev_manage iop_autocar oauth_tp_app smartapp_smart_game_openapi oauth_sessionkey smartapp_swanid_verify smartapp_opensource_openapi smartapp_opensource_recapi fake_face_detect_å¼€æ”¾Scope vis-ocr_è™šæ‹Ÿäººç‰©åŠ©ç† idl-video_è™šæ‹Ÿäººç‰©åŠ©ç† smartapp_component smartapp_search_plugin avatar_video_test b2b_tp_openapi b2b_tp_openapi_online&#39;, &#39;session_secret&#39;: &#39;35e5528d67d5a4f50022fa47ad1c590e&#39;}24.896a37769e0b9eb3ee4548f4c8259ec7.2592000.1646991303.282335-25143866</code></pre><h2 id="è·å–è¯†åˆ«ç»“æœå‡½æ•°"><a href="#è·å–è¯†åˆ«ç»“æœå‡½æ•°" class="headerlink" title="è·å–è¯†åˆ«ç»“æœå‡½æ•°"></a>è·å–è¯†åˆ«ç»“æœå‡½æ•°</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_face_get_face_detection_result(image_path, access_token):    """    äººè„¸æ£€æµ‹    :param image_path: å›¾ç‰‡åœ°å€    :param access_token: é‰´æƒ    :return res: æ£€æµ‹ç»“æœ    """    request_url = "https://aip.baidubce.com/rest/2.0/face/v3/detect"    # äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€å›¾ç‰‡æ–‡ä»¶    f = open(image_path, 'rb')    img = base64.b64encode(f.read())    params = {"image":img, "image_type": "BASE64", "max_face_num": 5, "face_field": "age,gender"}    # params = "{\"image\":\"027d8308a2ec665acb1bdf63e513bcb9\",\"image_type\":\"FACE_TOKEN\",\"face_field\":\"faceshape,facetype\"}"    request_url = request_url + "?access_token=" + access_token    headers = {'content-type': 'application/json'}    response = requests.post(request_url, data=params, headers=headers)    res = {}    if response:        res = response.json()    response.close()    return res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(func_face_get_face_detection_result(image_path, access_token=access_token))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;error_code&#39;: 0, &#39;error_msg&#39;: &#39;SUCCESS&#39;, &#39;log_id&#39;: 2103952089, &#39;timestamp&#39;: 1644399303, &#39;cached&#39;: 0, &#39;result&#39;: {&#39;face_num&#39;: 3, &#39;face_list&#39;: [{&#39;face_token&#39;: &#39;8e645a3f8b54fbf6b139e021c55dc7f0&#39;, &#39;location&#39;: {&#39;left&#39;: 561.41, &#39;top&#39;: 221.47, &#39;width&#39;: 65, &#39;height&#39;: 68, &#39;rotation&#39;: 1}, &#39;face_probability&#39;: 1, &#39;angle&#39;: {&#39;yaw&#39;: 77, &#39;pitch&#39;: 15, &#39;roll&#39;: -11.89}, &#39;age&#39;: 24, &#39;gender&#39;: {&#39;type&#39;: &#39;male&#39;, &#39;probability&#39;: 1}}, {&#39;face_token&#39;: &#39;6db2d69550c91ed03b2b408ca15dd591&#39;, &#39;location&#39;: {&#39;left&#39;: 756.48, &#39;top&#39;: 251.15, &#39;width&#39;: 65, &#39;height&#39;: 68, &#39;rotation&#39;: 14}, &#39;face_probability&#39;: 1, &#39;angle&#39;: {&#39;yaw&#39;: 76.54, &#39;pitch&#39;: 18.85, &#39;roll&#39;: -1.31}, &#39;age&#39;: 22, &#39;gender&#39;: {&#39;type&#39;: &#39;female&#39;, &#39;probability&#39;: 0.98}}, {&#39;face_token&#39;: &#39;e66641016cc327aa7e7fb8543ee7116a&#39;, &#39;location&#39;: {&#39;left&#39;: 400.68, &#39;top&#39;: 249.63, &#39;width&#39;: 62, &#39;height&#39;: 58, &#39;rotation&#39;: -6}, &#39;face_probability&#39;: 1, &#39;angle&#39;: {&#39;yaw&#39;: -33.15, &#39;pitch&#39;: 12.93, &#39;roll&#39;: -0.94}, &#39;age&#39;: 22, &#39;gender&#39;: {&#39;type&#39;: &#39;female&#39;, &#39;probability&#39;: 1}}]}}</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">image = Image.open(image_path)plt.imshow(image)plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>â€‹    <img src="/2022/02/14/shen-du-xue-xi-zhi-ren-lian-jian-ce/output_9_0.png" alt="output_9_0"></p><p>â€‹    </p><h2 id="æ‰¹é‡è¯†åˆ«ç»“æœå‡½æ•°"><a href="#æ‰¹é‡è¯†åˆ«ç»“æœå‡½æ•°" class="headerlink" title="æ‰¹é‡è¯†åˆ«ç»“æœå‡½æ•°"></a>æ‰¹é‡è¯†åˆ«ç»“æœå‡½æ•°</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python"># def func_face_batch_detection():#     """#     æ‰¹é‡è¯†åˆ«#     """#     image_path_list = sorted(os.listdir(image_file_path), key=lambda x: int(x.split('.')[0]))#     print(image_path_list)#     print('\n')#     with open(image_face_detection_result_path, mode='a+', encoding='utf-8') as f_w:#         for image_name in image_path_list:#             image_id = image_name.split('.')[0]#             image_path = os.path.join(image_file_path, image_name)#             print('image_id: {}, image_path: {}'.format(image_id, image_path))#             try:#                 image_res = func_face_get_face_detection_result(image_path, access_token)#             except Exception as e:#                 print(type(e).__name__)#                 image_res = {}#             print('image_res: {}'.format(image_res))#             f_w.write(image_id + '\t' + json.dumps(image_res) + '\n')#             print('\n')#             time.sleep(5)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># func_face_batch_detection()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="è¯†åˆ«ç»“æœå¯è§†åŒ–"><a href="#è¯†åˆ«ç»“æœå¯è§†åŒ–" class="headerlink" title="è¯†åˆ«ç»“æœå¯è§†åŒ–"></a>è¯†åˆ«ç»“æœå¯è§†åŒ–</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python"># with open(image_face_detection_result_path, mode='r', encoding='utf-8') as f:#     for line in f:#         line = line.strip()#         image_id, image_res = line.split('\t')#         image_res = json.loads(image_res)#         image_path = os.path.join(image_file_path, image_id+'.jpg')#         print('image_path: {} \n'.format(image_path))#         # if image_id == '5':#         #     break#         # # å›¾ç‰‡å¯è§†åŒ–#         try:#             image = np.array(plt.imread(image_path))#             # print(image_id, image.shape)#             # plt.figure(figsize=(9, 9))#             # plt.imshow(image)#             result = image_res.get('result', {})#             face_list = result.get('face_list', [])#             location_list = []#             for i in face_list:#                 location_list.append(i.get('location', {}))#             # print(location_list)#             # print(len(location_list))#             # ç”»å‡ºæ£€æµ‹åˆ°çš„æ–‡æœ¬æ¡†#             plt.figure(figsize=(9, 9))#             plt.imshow(image)#             for box in location_list:#                 top = box.get('top', 0)  # è¡¨ç¤ºå®šä½ä½ç½®çš„é•¿æ–¹å½¢å·¦ä¸Šé¡¶ç‚¹çš„å‚ç›´åæ ‡#                 left = box.get('left', 0)  # è¡¨ç¤ºå®šä½ä½ç½®çš„é•¿æ–¹å½¢å·¦ä¸Šé¡¶ç‚¹çš„æ°´å¹³åæ ‡#                 width = box.get('width', 0)  # è¡¨ç¤ºå®šä½ä½ç½®çš„é•¿æ–¹å½¢çš„å®½åº¦#                 height = box.get('height', 0)  # è¡¨ç¤ºå®šä½ä½ç½®çš„é•¿æ–¹å½¢çš„é«˜åº¦#                 rotation = box.get('rotation', 0)  # äººè„¸æ¡†ç›¸å¯¹äºç«–ç›´æ–¹å‘çš„é¡ºæ—¶é’ˆæ—‹è½¬è§’ï¼Œ[-180,180]#                 plt.plot([left, left+width], [top, top], 'r', linewidth=1.5)#                 plt.plot([left+width, left+width], [top, top+height], 'r', linewidth=1.5)#                 plt.plot([left+width, left], [top+height, top+height], 'r', linewidth=1.5)#                 plt.plot([left, left], [top+height, top], 'r', linewidth=1.5)#             plt.savefig(os.path.join(image_face_detection_dir_result_path, image_id+'.jpg'))#             plt.show()#         except Exception as e:#             print(type(e).__name__)#             command = 'cp %s %s' % (os.path.join(image_file_path, image_id+'.jpg'), os.path.join(image_face_detection_dir_result_path, image_id+'.jpg'))#             if os.system(command) != 0:#                 print('cp error!')#         # break<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="äººè„¸æ£€æµ‹By-face-recognition"><a href="#äººè„¸æ£€æµ‹By-face-recognition" class="headerlink" title="äººè„¸æ£€æµ‹By face_recognition"></a>äººè„¸æ£€æµ‹By <a href="https://github.com/ageitgey/face_recognition" target="_blank" rel="noopener">face_recognition</a></h1><h2 id="ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®"><a href="#ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®" class="headerlink" title="ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®"></a>ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">from PIL import Imageimport face_recognition%matplotlib inline<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">image_path = './datasets/image/biden.jpg'image = face_recognition.load_image_file(image_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%time# face_locations = face_recognition.face_locations(image)face_locations = face_recognition.face_locations(image, number_of_times_to_upsample=0, model='cnn')print('found {} face(s) in this photograph.'.format(len(face_locations)))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>found 1 face(s) in this photograph.CPU times: user 1.06 s, sys: 786 ms, total: 1.85 sWall time: 8.09 s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for face_location in face_locations:    top, right, bottom, left = face_location    print('a face is located at pixel location Top:{}, Left:{}, Bottom:{}, Right:{}'.format(top, left, bottom, right))    face_image = image[top:bottom, left:right]    pil_image = Image.fromarray(face_image)    pil_image.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>a face is located at pixel location Top:235, Left:428, Bottom:518, Right:712</code></pre><p><img src="/2022/02/14/shen-du-xue-xi-zhi-ren-lian-jian-ce/output_20_1.png" alt="output_20_1"></p><h2 id="ä»è§†é¢‘ä¸­è¯†åˆ«å‡ºäººè„¸ä½ç½®å’Œå…¶åå­—"><a href="#ä»è§†é¢‘ä¸­è¯†åˆ«å‡ºäººè„¸ä½ç½®å’Œå…¶åå­—" class="headerlink" title="ä»è§†é¢‘ä¸­è¯†åˆ«å‡ºäººè„¸ä½ç½®å’Œå…¶åå­—"></a>ä»è§†é¢‘ä¸­è¯†åˆ«å‡ºäººè„¸ä½ç½®å’Œå…¶åå­—</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import cv2import face_recognition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ‰“å¼€è§†é¢‘# input_video_path = './datasets/video/hamilton_clip.mp4'# input_video_path = './datasets/video/song.mp4'input_video_path = './datasets/video/laowang.mp4'output_video_path = './datasets/video/%s_output.avi' % input_video_path.rsplit('/', 1)[1].split('.')[0]output_video_path<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>&#39;./datasets/video/laowang_output.avi&#39;</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">input_video = cv2.VideoCapture(input_video_path)frame_count = int(input_video.get(cv2.CAP_PROP_FRAME_COUNT))  # è§†é¢‘å¸§æ•°frame_count<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>1456</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">frame_height = int(input_video.get(cv2.CAP_PROP_FRAME_HEIGHT))  # è§†é¢‘é«˜åº¦frame_width = int(input_video.get(cv2.CAP_PROP_FRAME_WIDTH))  # è§†é¢‘å®½åº¦frame_rate = input_video.get(cv2.CAP_PROP_FPS)  # å¸§é€Ÿç‡frame_height, frame_width, frame_rate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(1280, 720, 25.0)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆ›å»ºè¾“å‡ºç”µå½±æ–‡ä»¶ï¼ˆç¡®ä¿åˆ†è¾¨ç‡/å¸§é€Ÿç‡åŒ¹é…è¾“å…¥è§†é¢‘ï¼ï¼‰# VideoWriter_fourccä¸ºè§†é¢‘ç¼–è§£ç å™¨# fourcc = cv2.VideoWriter_fourcc(*'XVID')fourcc = cv2.VideoWriter_fourcc('X', 'V', 'I', 'D')  # ,è¯¥å‚æ•°æ˜¯MPEG-4ç¼–ç ç±»å‹ï¼Œæ–‡ä»¶ååç¼€ä¸º.avi# 29.97ä¸ºå¸§æ’­æ”¾é€Ÿç‡ï¼Œï¼ˆ640ï¼Œ360ï¼‰ä¸ºè§†é¢‘å¸§å¤§å°# output_video = cv2.VideoWriter(output_video_path, fourcc, 29.97, (640, 360))output_video = cv2.VideoWriter(output_video_path, fourcc, frame_rate, (frame_width, frame_height))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åŠ è½½ä¸€äº›ç¤ºä¾‹å›¾ç‰‡å¹¶å­¦ä¹ å¦‚ä½•è¯†åˆ«å®ƒä»¬lmm_image = face_recognition.load_image_file('./datasets/image/lin-manuel-miranda.png')lmm_face_encodings = face_recognition.face_encodings(lmm_image)[0]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">al_image = face_recognition.load_image_file('./datasets/image/alex-lacamoire.png')al_face_encodings = face_recognition.face_encodings(al_image)[0]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">known_faces = [lmm_face_encodings, al_face_encodings]known_names = ['Lin-Manuel Miranda', 'Alex Lacamoire']<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆå§‹åŒ–ä¸€äº›å˜é‡face_locations = []face_encodings = []face_names = []frame_number = 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timewhile True:    # Grab a single frame of video    ret, frame = input_video.read()    frame_number += 1    # quit when the input video file ends    if not ret:        break    # å°†å›¾åƒä»BGRé¢œè‰²(OpenCVä½¿ç”¨çš„)è½¬æ¢ä¸ºRGBé¢œè‰²(äººè„¸è¯†åˆ«ä½¿ç”¨çš„)    rgb_frame = frame[:, :, ::-1]    # æ‰¾å‡ºå½“å‰è§†é¢‘å¸§ä¸­æ‰€æœ‰çš„äººè„¸å’Œäººè„¸ç¼–ç     face_locations = face_recognition.face_locations(rgb_frame)    face_encodings = face_recognition.face_encodings(rgb_frame, face_locations)    face_names = []    for face_encoding in face_encodings:        # çœ‹çœ‹è¿™å¼ è„¸å’Œå·²çŸ¥çš„è„¸æ˜¯å¦åŒ¹é…        match = face_recognition.compare_faces(known_faces, face_encoding, tolerance=0.50)        name = 'unknown'        if match[0]:            name = known_names[0]        elif match[1]:            name = known_names[1]        face_names.append(name)    # label the results    for (top, right, bottom, left), name in zip(face_locations, face_names):        # draw a box around the face        # (0,0,255)å¯¹åº”é¢œè‰²(BGR)ï¼Œ2å¯¹åº”çº¿ç²—ç»†        cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)        font = cv2.FONT_HERSHEY_DUPLEX  # æ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“        cv2.putText(frame, name, (left + 6, bottom - 6), font, 0.5, (255, 255, 255), 1)    if frame_number % 100 == 0:        print('writing frame {} / {}'.format(frame_number, frame_count))    output_video.write(frame)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>writing frame 100 / 1456writing frame 200 / 1456writing frame 300 / 1456writing frame 400 / 1456writing frame 500 / 1456writing frame 600 / 1456writing frame 700 / 1456writing frame 800 / 1456writing frame 900 / 1456writing frame 1000 / 1456writing frame 1100 / 1456writing frame 1200 / 1456writing frame 1300 / 1456writing frame 1400 / 1456CPU times: user 13min 21s, sys: 2.47 s, total: 13min 23sWall time: 13min 13s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># all doneinput_video.release()  # é‡Šæ”¾è§†é¢‘æµcv2.destroyAllWindows()  # å…³é—­æ‰€æœ‰çª—å£<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="ä»æ‰¹é‡frameä¸­è¯†åˆ«äººè„¸ä½ç½®"><a href="#ä»æ‰¹é‡frameä¸­è¯†åˆ«äººè„¸ä½ç½®" class="headerlink" title="ä»æ‰¹é‡frameä¸­è¯†åˆ«äººè„¸ä½ç½®"></a>ä»æ‰¹é‡frameä¸­è¯†åˆ«äººè„¸ä½ç½®</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python"># import cv2# import face_recognition# input_video_path = './datasets/video/hamilton_clip.mp4'# input_video = cv2.VideoCapture(input_video_path)# frames = []# frame_number = 0# batch_size = 64# while input_video.isOpened():#     ret, frame = input_video.read()#     if not ret:#         break#     frame = frame[:, :, ::-1]#     frame_number += 1#     frames.append(frame)#     if len(frames) == batch_size:#         batch_of_face_locations = face_recognition.batch_face_locations(frames, number_of_times_to_upsample=1, batch_size=batch_size)#         for frame_number_in_batch, face_locations in enumerate(batch_of_face_locations):#             number_of_faces_in_frame = len(face_locations)#             if number_of_faces_in_frame > 0:#                 frame_idx = frame_number - batch_size + frame_number_in_batch#                 print('found {} face(s) in frame #{}.'.format(number_of_faces_in_frame, frame_idx))#                 for face_location in face_locations:#                     top, right, bottom, left = face_location#                     print('- a face is located at pixel location top:{}, left:{}, bottom:{}, right:{}'.format(top, left, bottom, right))#         frames = []<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®å¹¶ç”»å‡ºæ¡†"><a href="#ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®å¹¶ç”»å‡ºæ¡†" class="headerlink" title="ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®å¹¶ç”»å‡ºæ¡†"></a>ä»å›¾ç‰‡ä¸­è¯†åˆ«äººè„¸ä½ç½®å¹¶ç”»å‡ºæ¡†</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import face_recognitionfrom PIL import Image, ImageDrawimport numpy as np<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">obama_image = face_recognition.load_image_file('./datasets/image/obama.jpg')obama_face_encoding = face_recognition.face_encodings(obama_image)[0]# è¿™é‡Œæœ‰å¯èƒ½ä¼šå‡ºç°æŠ¥é”™ï¼Œå¯èƒ½æ˜¯ä½ tensorflowçš„è¿›ç¨‹å ç”¨äº†GPUï¼Œå¯¼è‡´è¿™è¾¹è°ƒç”¨ä¸äº†ï¼Œ# å°†æ‰€æœ‰kernelé‡ç½®å†è¿è¡Œè¯¥ä»£ç å°±å¥½äº†<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">biden_image = face_recognition.load_image_file('./datasets/image/biden.jpg')biden_face_encoding = face_recognition.face_encodings(biden_image)[0]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">known_face_encodings = [    obama_face_encoding,    biden_face_encoding]known_face_names = [    "Barack Obama",    "Joe Biden"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">unknown_image = face_recognition.load_image_file('./datasets/image/two_people.jpg')face_locations = face_recognition.face_locations(unknown_image, number_of_times_to_upsample=1, model='cnn')face_encodings = face_recognition.face_encodings(unknown_image, known_face_locations=face_locations, num_jitters=1, model='small')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">pil_image = Image.fromarray(unknown_image)draw = ImageDraw.Draw(pil_image)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for (top, right, bottom, left), face_encoding in zip(face_locations, face_encodings):    matches = face_recognition.compare_faces(known_face_encodings=known_face_encodings, face_encoding_to_check=face_encoding, tolerance=0.6)    name = 'unknown'    face_distances = face_recognition.face_distance(face_encodings=known_face_encodings, face_to_compare=face_encoding)    best_match_index = np.argmin(face_distances)    if matches[best_match_index]:        name = known_face_names[best_match_index]    draw.rectangle(((left, top), (right, bottom)), outline=(0, 0, 255))    text_width, text_height = draw.textsize(name)    draw.rectangle(((left, bottom - text_height - 10), (right, bottom)), fill=(0, 0, 255), outline=(0, 0, 255))    draw.text((left + 6, bottom - text_height - 5), name, fill=(255, 255, 255, 255))del drawpil_image.show()# pil_image.save(output_image_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2022/02/14/shen-du-xue-xi-zhi-ren-lian-jian-ce/output_42_0.png" alt="output_42_0"></p><h1 id="äººè„¸æ€§åˆ«å¹´é¾„è¯†åˆ«"><a href="#äººè„¸æ€§åˆ«å¹´é¾„è¯†åˆ«" class="headerlink" title="äººè„¸æ€§åˆ«å¹´é¾„è¯†åˆ«"></a>äººè„¸æ€§åˆ«å¹´é¾„è¯†åˆ«</h1><ul><li><a href="https://github.com/yu4u/age-gender-estimation" target="_blank" rel="noopener">age-gender-estimation</a></li><li><a href="https://github.com/mowshon/age-and-gender" target="_blank" rel="noopener">age-and-gender</a></li><li><a href="https://arxiv.org/abs/2010.03791" target="_blank" rel="noopener">Age and Gender Prediction From Face Images Using Attentional Convolutional Network</a></li></ul><h2 id="è¯†åˆ«ç¤ºä¾‹-By-age-and-gender"><a href="#è¯†åˆ«ç¤ºä¾‹-By-age-and-gender" class="headerlink" title="è¯†åˆ«ç¤ºä¾‹ By  age-and-gender"></a>è¯†åˆ«ç¤ºä¾‹ By  <a href="https://github.com/mowshon/age-and-gender" target="_blank" rel="noopener">age-and-gender</a></h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">from age_and_gender import *from PIL import Image, ImageDraw, ImageFont<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">landmarks_model_path = './datasets/model/age_and_gender/shape_predictor_5_face_landmarks.dat'gender_model_path = './datasets/model/age_and_gender/dnn_gender_classifier_v1.dat'age_model_path = './datasets/model/age_and_gender/dnn_age_predictor_v1.dat'input_image_path = './datasets/image/face_detection.jpg'input_image_path = './datasets/image/two_people.jpg'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">age_gender_model = AgeAndGender()age_gender_model.load_shape_predictor(landmarks_model_path)age_gender_model.load_dnn_age_predictor(age_model_path)age_gender_model.load_dnn_gender_classifier(gender_model_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">image = Image.open(input_image_path).convert('RGB')rec_result = age_gender_model.predict(image)rec_result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>[{&#39;gender&#39;: {&#39;value&#39;: &#39;male&#39;, &#39;confidence&#39;: 99},  &#39;age&#39;: {&#39;value&#39;: 55, &#39;confidence&#39;: 60},  &#39;face&#39;: [244, 62, 394, 211]}, {&#39;gender&#39;: {&#39;value&#39;: &#39;male&#39;, &#39;confidence&#39;: 99},  &#39;age&#39;: {&#39;value&#39;: 70, &#39;confidence&#39;: 72},  &#39;face&#39;: [792, 95, 941, 244]}]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">draw = ImageDraw.Draw(image)for info in rec_result:    gender = info.get('gender', {}).get('value', 'unknown')    gender_confidence = info.get('gender', {}).get('confidence', 100)    age = info.get('age', {}).get('value', 999)    age_confidence = info.get('age', {}).get('confidence', 100)    face_location = info.get('face', [])    left, top, right, bottom = face_location[0], face_location[1], face_location[2], face_location[3]    draw.rectangle(((left, top), (right, bottom)), outline=(0, 0, 255))    draw.text((left - 10, bottom + 10), f"{gender} (~{gender_confidence}%)\n{age} (~{age_confidence}%).", fill=(255, 255, 255, 255), align='center')del drawimage.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â€‹<br><img src="/2022/02/14/shen-du-xue-xi-zhi-ren-lian-jian-ce/output_49_0.png" alt="output_49_0"><br>â€‹    </p><h2 id="è¯†åˆ«ç¤ºä¾‹-By-face-recognition-å’Œ-age-and-gender"><a href="#è¯†åˆ«ç¤ºä¾‹-By-face-recognition-å’Œ-age-and-gender" class="headerlink" title="è¯†åˆ«ç¤ºä¾‹ By face_recognition å’Œ age-and-gender"></a>è¯†åˆ«ç¤ºä¾‹ By <a href="https://github.com/ageitgey/face_recognition" target="_blank" rel="noopener">face_recognition</a> å’Œ <a href="https://github.com/mowshon/age-and-gender" target="_blank" rel="noopener">age-and-gender</a></h2><h3 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">from age_and_gender import *from PIL import Image, ImageDraw, ImageFontimport numpy as npimport face_recognition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">landmarks_model_path = './datasets/model/age_and_gender/shape_predictor_5_face_landmarks.dat'gender_model_path = './datasets/model/age_and_gender/dnn_gender_classifier_v1.dat'age_model_path = './datasets/model/age_and_gender/dnn_age_predictor_v1.dat'input_image_path = './datasets/image/face_detection.jpg'input_image_path = './datasets/image/two_people.jpg'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">age_gender_model = AgeAndGender()age_gender_model.load_shape_predictor(landmarks_model_path)age_gender_model.load_dnn_age_predictor(age_model_path)age_gender_model.load_dnn_gender_classifier(gender_model_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">image = Image.open(input_image_path).convert('RGB')face_locations = face_recognition.face_locations(np.asarray(image), model='hog')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">rec_result = age_gender_model.predict(image, face_locations)rec_result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>[{&#39;gender&#39;: {&#39;value&#39;: &#39;male&#39;, &#39;confidence&#39;: 99},  &#39;age&#39;: {&#39;value&#39;: 71, &#39;confidence&#39;: 61},  &#39;face&#39;: [778, 57, 964, 242]}, {&#39;gender&#39;: {&#39;value&#39;: &#39;male&#39;, &#39;confidence&#39;: 99},  &#39;age&#39;: {&#39;value&#39;: 55, &#39;confidence&#39;: 51},  &#39;face&#39;: [253, 47, 408, 202]}]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">draw = ImageDraw.Draw(image)for info in rec_result:    gender = info.get('gender', {}).get('value', 'unknown')    gender_confidence = info.get('gender', {}).get('confidence', 100)    age = info.get('age', {}).get('value', 999)    age_confidence = info.get('age', {}).get('confidence', 100)    face_location = info.get('face', [])    left, top, right, bottom = face_location[0], face_location[1], face_location[2], face_location[3]    draw.rectangle(((left, top), (right, bottom)), outline=(0, 0, 255))    draw.text((left - 10, bottom + 10), f"{gender} (~{gender_confidence}%)\n{age} (~{age_confidence}%).", fill=(255, 255, 255, 255), align='center')del drawimage.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2022/02/14/shen-du-xue-xi-zhi-ren-lian-jian-ce/output_57_0.png" alt="output_57_0"></p><h3 id="è§†é¢‘"><a href="#è§†é¢‘" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">import cv2from age_and_gender import *from PIL import Image, ImageDraw, ImageFontimport numpy as npimport face_recognition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">landmarks_model_path = './datasets/model/age_and_gender/shape_predictor_5_face_landmarks.dat'gender_model_path = './datasets/model/age_and_gender/dnn_gender_classifier_v1.dat'age_model_path = './datasets/model/age_and_gender/dnn_age_predictor_v1.dat'# input_video_path = './datasets/video/hamilton_clip.mp4'# input_video_path = './datasets/video/song.mp4'input_video_path = './datasets/video/laowang.mp4'output_video_path = './datasets/video/%s_output.avi' % input_video_path.rsplit('/', 1)[1].split('.')[0]output_video_path<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>&#39;./datasets/video/laowang_output.avi&#39;</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ‰“å¼€æ€§åˆ«å¹´é¾„æ¨¡å‹age_gender_model = AgeAndGender()age_gender_model.load_shape_predictor(landmarks_model_path)age_gender_model.load_dnn_age_predictor(age_model_path)age_gender_model.load_dnn_gender_classifier(gender_model_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ‰“å¼€è§†é¢‘input_video = cv2.VideoCapture(input_video_path)frame_count = int(input_video.get(cv2.CAP_PROP_FRAME_COUNT))  # è§†é¢‘å¸§æ•°frame_count<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>1456</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">frame_height = int(input_video.get(cv2.CAP_PROP_FRAME_HEIGHT))  # è§†é¢‘é«˜åº¦frame_width = int(input_video.get(cv2.CAP_PROP_FRAME_WIDTH))  # è§†é¢‘å®½åº¦frame_rate = input_video.get(cv2.CAP_PROP_FPS)  # å¸§é€Ÿç‡frame_height, frame_width, frame_rate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(1280, 720, 25.0)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆ›å»ºè¾“å‡ºç”µå½±æ–‡ä»¶ï¼ˆç¡®ä¿åˆ†è¾¨ç‡/å¸§é€Ÿç‡åŒ¹é…è¾“å…¥è§†é¢‘ï¼ï¼‰# VideoWriter_fourccä¸ºè§†é¢‘ç¼–è§£ç å™¨# fourcc = cv2.VideoWriter_fourcc(*'XVID')fourcc = cv2.VideoWriter_fourcc('X', 'V', 'I', 'D')  # ,è¯¥å‚æ•°æ˜¯MPEG-4ç¼–ç ç±»å‹ï¼Œæ–‡ä»¶ååç¼€ä¸º.avi# 29.97ä¸ºå¸§æ’­æ”¾é€Ÿç‡ï¼Œï¼ˆ640ï¼Œ360ï¼‰ä¸ºè§†é¢‘å¸§å¤§å°# output_video = cv2.VideoWriter(output_video_path, fourcc, 29.97, (640, 360))output_video = cv2.VideoWriter(output_video_path, fourcc, frame_rate, (frame_width, frame_height))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆå§‹åŒ–ä¸€äº›å˜é‡frame_number = 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timewhile True:    # Grab a single frame of video    ret, frame = input_video.read()    frame_number += 1    # quit when the input video file ends    if not ret:        break    # å°†å›¾åƒä»BGRé¢œè‰²(OpenCVä½¿ç”¨çš„)è½¬æ¢ä¸ºRGBé¢œè‰²(äººè„¸è¯†åˆ«ä½¿ç”¨çš„)    rgb_frame = frame[:, :, ::-1]    # æ‰¾å‡ºå½“å‰è§†é¢‘å¸§ä¸­æ‰€æœ‰çš„äººè„¸å’Œäººè„¸ç¼–ç     face_locations = face_recognition.face_locations(rgb_frame, model='cnn')    rec_result = age_gender_model.predict(rgb_frame, face_locations)    for info in rec_result:        gender = info.get('gender', {}).get('value', 'unknown')        gender_confidence = info.get('gender', {}).get('confidence', 100)        age = info.get('age', {}).get('value', 999)        age_confidence = info.get('age', {}).get('confidence', 100)        face_location = info.get('face', [])        left, top, right, bottom = face_location[0], face_location[1], face_location[2], face_location[3]        # draw a box around the face        # (0,0,255)å¯¹åº”é¢œè‰²(BGR)ï¼Œ2å¯¹åº”çº¿ç²—ç»†        cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)        font = cv2.FONT_HERSHEY_DUPLEX  # æ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“        name = f"{gender} (~{gender_confidence}%)\n {age} (~{age_confidence}%)."        cv2.putText(frame, name, (left - 6, bottom + 10), font, 0.5, (255, 255, 255), 1)    if frame_number % 100 == 0:        print('writing frame {} / {}'.format(frame_number, frame_count))    output_video.write(frame)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>writing frame 100 / 1456writing frame 200 / 1456writing frame 300 / 1456writing frame 400 / 1456writing frame 500 / 1456writing frame 600 / 1456writing frame 700 / 1456writing frame 800 / 1456writing frame 900 / 1456writing frame 1000 / 1456writing frame 1100 / 1456writing frame 1200 / 1456writing frame 1300 / 1456writing frame 1400 / 1456CPU times: user 7min 54s, sys: 25.1 s, total: 8min 19sWall time: 8min 8s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># all doneinput_video.release()  # é‡Šæ”¾è§†é¢‘æµcv2.destroyAllWindows()  # å…³é—­æ‰€æœ‰çª—å£<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="è¯†åˆ«ç¤ºä¾‹-By-deepface-æ¨è"><a href="#è¯†åˆ«ç¤ºä¾‹-By-deepface-æ¨è" class="headerlink" title="è¯†åˆ«ç¤ºä¾‹ By deepface æ¨è"></a>è¯†åˆ«ç¤ºä¾‹ By <a href="https://github.com/serengil/deepface" target="_blank" rel="noopener">deepface</a> <font color="red">æ¨è</font></h2><h3 id="è§†é¢‘-1"><a href="#è§†é¢‘-1" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h3><ul><li>å…ˆface_recoginition</li><li>å†deepface</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">import cv2from age_and_gender import *from PIL import Image, ImageDraw, ImageFontimport numpy as npimport face_recognitionfrom deepface import DeepFace<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># input_video_path = './datasets/video/hamilton_clip.mp4'# input_video_path = './datasets/video/song.mp4'input_video_path = './datasets/video/laowang.mp4'output_video_path = './datasets/video/%s_output.avi' % input_video_path.rsplit('/', 1)[1].split('.')[0]output_video_path<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>&#39;./datasets/video/laowang_output.avi&#39;</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ‰“å¼€è§†é¢‘input_video = cv2.VideoCapture(input_video_path)frame_count = int(input_video.get(cv2.CAP_PROP_FRAME_COUNT))  # è§†é¢‘å¸§æ•°frame_count<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>1456</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">frame_height = int(input_video.get(cv2.CAP_PROP_FRAME_HEIGHT))  # è§†é¢‘é«˜åº¦frame_width = int(input_video.get(cv2.CAP_PROP_FRAME_WIDTH))  # è§†é¢‘å®½åº¦frame_rate = input_video.get(cv2.CAP_PROP_FPS)  # å¸§é€Ÿç‡frame_height, frame_width, frame_rate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(1280, 720, 25.0)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆ›å»ºè¾“å‡ºç”µå½±æ–‡ä»¶ï¼ˆç¡®ä¿åˆ†è¾¨ç‡/å¸§é€Ÿç‡åŒ¹é…è¾“å…¥è§†é¢‘ï¼ï¼‰# VideoWriter_fourccä¸ºè§†é¢‘ç¼–è§£ç å™¨# fourcc = cv2.VideoWriter_fourcc(*'XVID')fourcc = cv2.VideoWriter_fourcc('X', 'V', 'I', 'D')  # ,è¯¥å‚æ•°æ˜¯MPEG-4ç¼–ç ç±»å‹ï¼Œæ–‡ä»¶ååç¼€ä¸º.avi# 29.97ä¸ºå¸§æ’­æ”¾é€Ÿç‡ï¼Œï¼ˆ640ï¼Œ360ï¼‰ä¸ºè§†é¢‘å¸§å¤§å°# output_video = cv2.VideoWriter(output_video_path, fourcc, 29.97, (640, 360))output_video = cv2.VideoWriter(output_video_path, fourcc, frame_rate, (frame_width, frame_height))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆå§‹åŒ–ä¸€äº›å˜é‡frame_number = -1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timewhile True:    # Grab a single frame of video    ret, frame = input_video.read()    frame_number += 1    # quit when the input video file ends    if not ret:        break    # å°†å›¾åƒä»BGRé¢œè‰²(OpenCVä½¿ç”¨çš„)è½¬æ¢ä¸ºRGBé¢œè‰²(äººè„¸è¯†åˆ«ä½¿ç”¨çš„)    rgb_frame = frame[:, :, ::-1]    # æ‰¾å‡ºå½“å‰è§†é¢‘å¸§ä¸­æ‰€æœ‰çš„äººè„¸å’Œäººè„¸ç¼–ç     face_locations = face_recognition.face_locations(rgb_frame, model='cnn')    for top, right, bottom, left in face_locations:        image = rgb_frame[left:right, top:bottom]        try:            obj = DeepFace.analyze(img_path = image,                                   actions = ['age', 'gender'],#, 'race', 'emotion'],                                    enforce_detection=False,                                   detector_backend='dlib',                                   prog_bar=False)        except:            obj = {}        age = obj.get('age', 'unknown')        gender = obj.get('gender', 'unknown')        # draw a box around the face        # (0,0,255)å¯¹åº”é¢œè‰²(BGR)ï¼Œ2å¯¹åº”çº¿ç²—ç»†        cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)        font = cv2.FONT_HERSHEY_DUPLEX  # æ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“        name = f"gender: {gender}, age: {age}."        cv2.putText(frame, name, (left - 6, bottom + 10), font, 0.5, (255, 255, 255), 1)    if frame_number % 100 == 0:        print('writing frame {} / {}'.format(frame_number, frame_count))    output_video.write(frame)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>writing frame 0 / 1456writing frame 100 / 1456writing frame 200 / 1456writing frame 300 / 1456writing frame 400 / 1456writing frame 500 / 1456writing frame 600 / 1456writing frame 700 / 1456writing frame 800 / 1456writing frame 900 / 1456writing frame 1000 / 1456writing frame 1100 / 1456writing frame 1200 / 1456writing frame 1300 / 1456writing frame 1400 / 1456CPU times: user 10min 32s, sys: 2min 19s, total: 12min 51sWall time: 11min 21s</code></pre><h3 id="è§†é¢‘-2"><a href="#è§†é¢‘-2" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h3><ul><li>ä¸ç”¨å…ˆface_recoginition</li><li>ç›´æ¥æ£€æµ‹+age_genderä¸€èµ·ä¸Š</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python"># import cv2# from age_and_gender import *# from PIL import Image, ImageDraw, ImageFont# import numpy as np# import face_recognition# from deepface import DeepFace<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># # input_video_path = './datasets/video/hamilton_clip.mp4'# # input_video_path = './datasets/video/song.mp4'# input_video_path = './datasets/video/laowang.mp4'# output_video_path = './datasets/video/%s_output.avi' % input_video_path.rsplit('/', 1)[1].split('.')[0]# output_video_path<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># # æ‰“å¼€è§†é¢‘# input_video = cv2.VideoCapture(input_video_path)# frame_count = int(input_video.get(cv2.CAP_PROP_FRAME_COUNT))  # è§†é¢‘å¸§æ•°# frame_count<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># frame_height = int(input_video.get(cv2.CAP_PROP_FRAME_HEIGHT))  # è§†é¢‘é«˜åº¦# frame_width = int(input_video.get(cv2.CAP_PROP_FRAME_WIDTH))  # è§†é¢‘å®½åº¦# frame_rate = input_video.get(cv2.CAP_PROP_FPS)  # å¸§é€Ÿç‡# frame_height, frame_width, frame_rate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># # åˆ›å»ºè¾“å‡ºç”µå½±æ–‡ä»¶ï¼ˆç¡®ä¿åˆ†è¾¨ç‡/å¸§é€Ÿç‡åŒ¹é…è¾“å…¥è§†é¢‘ï¼ï¼‰# # VideoWriter_fourccä¸ºè§†é¢‘ç¼–è§£ç å™¨# # fourcc = cv2.VideoWriter_fourcc(*'XVID')# fourcc = cv2.VideoWriter_fourcc('X', 'V', 'I', 'D')  # ,è¯¥å‚æ•°æ˜¯MPEG-4ç¼–ç ç±»å‹ï¼Œæ–‡ä»¶ååç¼€ä¸º.avi# # 29.97ä¸ºå¸§æ’­æ”¾é€Ÿç‡ï¼Œï¼ˆ640ï¼Œ360ï¼‰ä¸ºè§†é¢‘å¸§å¤§å°# # output_video = cv2.VideoWriter(output_video_path, fourcc, 29.97, (640, 360))# output_video = cv2.VideoWriter(output_video_path, fourcc, frame_rate, (frame_width, frame_height))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># # åˆå§‹åŒ–ä¸€äº›å˜é‡# frame_number = -1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># %%time# while True:#     # Grab a single frame of video#     ret, frame = input_video.read()#     frame_number += 1#     # quit when the input video file ends#     if not ret:#         break#     # å°†å›¾åƒä»BGRé¢œè‰²(OpenCVä½¿ç”¨çš„)è½¬æ¢ä¸ºRGBé¢œè‰²(äººè„¸è¯†åˆ«ä½¿ç”¨çš„)#     rgb_frame = frame[:, :, ::-1]#     # æ‰¾å‡ºå½“å‰è§†é¢‘å¸§ä¸­æ‰€æœ‰çš„äººè„¸å’Œäººè„¸ç¼–ç #     obj = DeepFace.analyze(img_path = rgb_frame, actions = ['age', 'gender'], enforce_detection=False, detector_backend='dlib', prog_bar=False)#     age = obj.get('age', 'unknown')#     gender = obj.get('gender', 'unknown')#     region = obj.get('region', {})#     if region:#         x = region.get('x', 0)#         y = region.get('y', 0)#         w = region.get('w', 0)#         h = region.get('h', 0)#         # draw a box around the face#         # (0,0,255)å¯¹åº”é¢œè‰²(BGR)ï¼Œ2å¯¹åº”çº¿ç²—ç»†#         cv2.rectangle(frame, (x, y), (x+w, y+h), (0, 0, 255), 2)#         font = cv2.FONT_HERSHEY_DUPLEX  # æ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“#         name = f"gender: {gender}, age: {age}."#         cv2.putText(frame, name, (x - 6, y + h + 10), font, 0.5, (255, 255, 255), 1)#     if frame_number % 100 == 0:#         print('writing frame {} / {}'.format(frame_number, frame_count))#     output_video.write(frame)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="äººæ•°è¯†åˆ«"><a href="#äººæ•°è¯†åˆ«" class="headerlink" title="äººæ•°è¯†åˆ«"></a>äººæ•°è¯†åˆ«</h1><pre class="line-numbers language-lang-python"><code class="language-lang-python">import cv2import face_recognition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ‰“å¼€è§†é¢‘input_video_path = './datasets/video/hamilton_clip.mp4'# input_video_path = './datasets/video/song.mp4'# input_video_path = './datasets/video/laowang.mp4'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">input_video = cv2.VideoCapture(input_video_path)frame_count = int(input_video.get(cv2.CAP_PROP_FRAME_COUNT))  # è§†é¢‘å¸§æ•°frame_count<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>2356</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">frame_height = int(input_video.get(cv2.CAP_PROP_FRAME_HEIGHT))  # è§†é¢‘é«˜åº¦frame_width = int(input_video.get(cv2.CAP_PROP_FRAME_WIDTH))  # è§†é¢‘å®½åº¦frame_rate = input_video.get(cv2.CAP_PROP_FPS)  # å¸§é€Ÿç‡frame_height, frame_width, frame_rate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(360, 640, 29.97)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">known_faces = []<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆå§‹åŒ–ä¸€äº›å˜é‡face_locations = []face_encodings = []frame_number = 0face_count = 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timewhile True:    # Grab a single frame of video    ret, frame = input_video.read()    frame_number += 1    # quit when the input video file ends    if not ret:        break    # å°†å›¾åƒä»BGRé¢œè‰²(OpenCVä½¿ç”¨çš„)è½¬æ¢ä¸ºRGBé¢œè‰²(äººè„¸è¯†åˆ«ä½¿ç”¨çš„)    rgb_frame = frame[:, :, ::-1]    # æ‰¾å‡ºå½“å‰è§†é¢‘å¸§ä¸­æ‰€æœ‰çš„äººè„¸å’Œäººè„¸ç¼–ç     face_locations = face_recognition.face_locations(rgb_frame, model='cnn')    face_encodings = face_recognition.face_encodings(rgb_frame, face_locations)    for face_encoding in face_encodings:        # çœ‹çœ‹è¿™å¼ è„¸å’Œå·²çŸ¥çš„è„¸æ˜¯å¦åŒ¹é…        match = face_recognition.compare_faces(known_faces, face_encoding, tolerance=0.6)        if any(match) :            pass        else:            face_count += 1        known_faces.append(face_encoding)    if frame_number % 100 == 0:        # print(match)        print('processing frame {} / {}'.format(frame_number, frame_count))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>processing frame 100 / 2356processing frame 200 / 2356processing frame 300 / 2356processing frame 400 / 2356processing frame 500 / 2356processing frame 600 / 2356processing frame 700 / 2356processing frame 800 / 2356processing frame 900 / 2356processing frame 1000 / 2356processing frame 1100 / 2356processing frame 1200 / 2356processing frame 1300 / 2356processing frame 1400 / 2356processing frame 1500 / 2356processing frame 1600 / 2356processing frame 1700 / 2356processing frame 1800 / 2356processing frame 1900 / 2356processing frame 2000 / 2356processing frame 2100 / 2356processing frame 2200 / 2356processing frame 2300 / 2356CPU times: user 1min 57s, sys: 17 s, total: 2min 14sWall time: 2min 11s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">face_count<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>2</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">from IPython.display import Video<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">Video(input_video_path)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><video src="./datasets/video/hamilton_clip.mp4" controls>      Your browser does not support the <code>video</code> element.    </video><h1 id="æ•´åˆï¼šäººæ•°-æ€§åˆ«-å¹´é¾„è¯†åˆ«"><a href="#æ•´åˆï¼šäººæ•°-æ€§åˆ«-å¹´é¾„è¯†åˆ«" class="headerlink" title="æ•´åˆï¼šäººæ•°+æ€§åˆ«+å¹´é¾„è¯†åˆ«"></a>æ•´åˆï¼šäººæ•°+æ€§åˆ«+å¹´é¾„è¯†åˆ«</h1><pre class="line-numbers language-lang-python"><code class="language-lang-python">import cv2from age_and_gender import *from PIL import Image, ImageDraw, ImageFontimport numpy as npimport face_recognition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">landmarks_model_path = './datasets/model/age_and_gender/shape_predictor_5_face_landmarks.dat'gender_model_path = './datasets/model/age_and_gender/dnn_gender_classifier_v1.dat'age_model_path = './datasets/model/age_and_gender/dnn_age_predictor_v1.dat'input_video_path = './datasets/video/hamilton_clip.mp4'# input_video_path = './datasets/video/song.mp4'# input_video_path = './datasets/video/laowang.mp4'output_video_path = './datasets/video/%s_output.avi' % input_video_path.rsplit('/', 1)[1].split('.')[0]output_video_path<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>&#39;./datasets/video/hamilton_clip_output.avi&#39;</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ‰“å¼€æ€§åˆ«å¹´é¾„æ¨¡å‹age_gender_model = AgeAndGender()age_gender_model.load_shape_predictor(landmarks_model_path)age_gender_model.load_dnn_age_predictor(age_model_path)age_gender_model.load_dnn_gender_classifier(gender_model_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ‰“å¼€è§†é¢‘input_video = cv2.VideoCapture(input_video_path)frame_count = int(input_video.get(cv2.CAP_PROP_FRAME_COUNT))  # è§†é¢‘å¸§æ•°frame_count<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2356</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">frame_height = int(input_video.get(cv2.CAP_PROP_FRAME_HEIGHT))  # è§†é¢‘é«˜åº¦frame_width = int(input_video.get(cv2.CAP_PROP_FRAME_WIDTH))  # è§†é¢‘å®½åº¦frame_rate = input_video.get(cv2.CAP_PROP_FPS)  # å¸§é€Ÿç‡frame_height, frame_width, frame_rate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(360, 640, 29.97)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆ›å»ºè¾“å‡ºç”µå½±æ–‡ä»¶ï¼ˆç¡®ä¿åˆ†è¾¨ç‡/å¸§é€Ÿç‡åŒ¹é…è¾“å…¥è§†é¢‘ï¼ï¼‰# VideoWriter_fourccä¸ºè§†é¢‘ç¼–è§£ç å™¨# fourcc = cv2.VideoWriter_fourcc(*'XVID')fourcc = cv2.VideoWriter_fourcc('X', 'V', 'I', 'D')  # ,è¯¥å‚æ•°æ˜¯MPEG-4ç¼–ç ç±»å‹ï¼Œæ–‡ä»¶ååç¼€ä¸º.avi# 29.97ä¸ºå¸§æ’­æ”¾é€Ÿç‡ï¼Œï¼ˆ640ï¼Œ360ï¼‰ä¸ºè§†é¢‘å¸§å¤§å°# output_video = cv2.VideoWriter(output_video_path, fourcc, 29.97, (640, 360))output_video = cv2.VideoWriter(output_video_path, fourcc, frame_rate, (frame_width, frame_height))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆå§‹åŒ–ä¸€äº›å˜é‡frame_number = 0known_faces = []face_count = 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timewhile True:    # Grab a single frame of video    ret, frame = input_video.read()    frame_number += 1    # quit when the input video file ends    if not ret:        break    # å°†å›¾åƒä»BGRé¢œè‰²(OpenCVä½¿ç”¨çš„)è½¬æ¢ä¸ºRGBé¢œè‰²(äººè„¸è¯†åˆ«ä½¿ç”¨çš„)    rgb_frame = frame[:, :, ::-1]    # æ‰¾å‡ºå½“å‰è§†é¢‘å¸§ä¸­æ‰€æœ‰çš„äººè„¸å’Œäººè„¸ç¼–ç     face_locations = face_recognition.face_locations(rgb_frame, model='cnn')    face_encodings = face_recognition.face_encodings(rgb_frame, face_locations)    # äººæ•°è¯†åˆ«    for face_encoding in face_encodings:        # çœ‹çœ‹è¿™å¼ è„¸å’Œå·²çŸ¥çš„è„¸æ˜¯å¦åŒ¹é…        match = face_recognition.compare_faces(known_faces, face_encoding, tolerance=0.6)        if any(match) :            pass        else:            face_count += 1        known_faces.append(face_encoding)    # å¹´é¾„æ€§åˆ«è¯†åˆ«    rec_result = age_gender_model.predict(rgb_frame, face_locations)    # ç”»å‡ºæ¡†åŠå±æ€§    for info in rec_result:        gender = info.get('gender', {}).get('value', 'unknown')        gender_confidence = info.get('gender', {}).get('confidence', 100)        age = info.get('age', {}).get('value', 999)        age_confidence = info.get('age', {}).get('confidence', 100)        face_location = info.get('face', [])        left, top, right, bottom = face_location[0], face_location[1], face_location[2], face_location[3]        # draw a box around the face        # (0,0,255)å¯¹åº”é¢œè‰²(BGR)ï¼Œ2å¯¹åº”çº¿ç²—ç»†        cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)        font = cv2.FONT_HERSHEY_DUPLEX  # æ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“        name = f"gender: {gender} (~{gender_confidence}%)."        cv2.putText(frame, name, (left - 6, bottom + 50), font, 0.5, (255, 255, 255), 1)        name = f"age: {age} (~{age_confidence}%)."        cv2.putText(frame, name, (left - 6, bottom + 30), font, 0.5, (255, 255, 255), 1)        name = f"face_count: {face_count}."        cv2.putText(frame, name, (left - 6, bottom + 10), font, 0.5, (255, 255, 255), 1)    if frame_number % 100 == 0:        print('writing frame {} / {}'.format(frame_number, frame_count))    output_video.write(frame)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>writing frame 100 / 2356writing frame 200 / 2356writing frame 300 / 2356writing frame 400 / 2356writing frame 500 / 2356writing frame 600 / 2356writing frame 700 / 2356writing frame 800 / 2356writing frame 900 / 2356writing frame 1000 / 2356writing frame 1100 / 2356writing frame 1200 / 2356writing frame 1300 / 2356writing frame 1400 / 2356writing frame 1500 / 2356writing frame 1600 / 2356writing frame 1700 / 2356writing frame 1800 / 2356writing frame 1900 / 2356writing frame 2000 / 2356writing frame 2100 / 2356writing frame 2200 / 2356writing frame 2300 / 2356CPU times: user 7min 34s, sys: 19.3 s, total: 7min 53sWall time: 7min 49s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># all doneinput_video.release()  # é‡Šæ”¾è§†é¢‘æµcv2.destroyAllWindows()  # å…³é—­æ‰€æœ‰çª—å£<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººè„¸æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š5</title>
      <link href="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/"/>
      <url>/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W6"><a href="#å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W6" class="headerlink" title="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W6"></a>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W6</h1><ul><li>Improving Deep Neural Networks</li><li>åŠ å¼ºæ·±åº¦ç½‘ç»œæ€§èƒ½çš„ä¸€äº›æŠ€å·§</li><li>å‚æ•°æ±‚è§£ä¼˜åŒ–æ–¹æ³•</li></ul><h2 id="HWå‚è€ƒ"><a href="#HWå‚è€ƒ" class="headerlink" title="HWå‚è€ƒ"></a>HWå‚è€ƒ</h2><ol><li><a href="https://mooc.study.163.com/university/deeplearning_ai#/c" target="_blank" rel="noopener">è§†é¢‘é“¾æ¥</a></li><li><a href="https://github.com/suqi/deeplearning_andrewng/tree/master/Course2-DL-tuning/week6" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥</a></li></ol><h2 id="ä¼˜åŒ–æ–¹æ³•ç®€ä»‹"><a href="#ä¼˜åŒ–æ–¹æ³•ç®€ä»‹" class="headerlink" title="ä¼˜åŒ–æ–¹æ³•ç®€ä»‹"></a>ä¼˜åŒ–æ–¹æ³•ç®€ä»‹</h2><p>Gradient descent goes â€œdownhillâ€ on a cost function $J$. Think of it as trying to do this:<br><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/cost.jpg" style="width:650px;height:300px;"></p><caption><center> <u> **Figure 1** </u>: **Minimizing the cost is like finding the lowest point in a hilly landscape**<br> At each step of the training, you update your parameters following a certain direction to try to get to the lowest possible point. </center></caption><p><strong>Notations</strong>: As usual, $\frac{\partial J}{\partial a } = $ <code>da</code> for any variable <code>a</code>.</p><h2 id="å¯¼å…¥æ¨¡å—"><a href="#å¯¼å…¥æ¨¡å—" class="headerlink" title="å¯¼å…¥æ¨¡å—"></a>å¯¼å…¥æ¨¡å—</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import numpy as npimport matplotlib.pyplot as pltimport scipy.ioimport mathimport sklearnimport sklearn.datasets%matplotlib inlineplt.rcParams['figure.figsize'] = (7.0, 4.0) # set default size of plotsplt.rcParams['image.interpolation'] = 'nearest'plt.rcParams['image.cmap'] = 'gray'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°æ®ç”Ÿæˆæ¨¡æ‹Ÿå‡½æ•°"><a href="#æ•°æ®ç”Ÿæˆæ¨¡æ‹Ÿå‡½æ•°" class="headerlink" title="æ•°æ®ç”Ÿæˆæ¨¡æ‹Ÿå‡½æ•°"></a>æ•°æ®ç”Ÿæˆæ¨¡æ‹Ÿå‡½æ•°</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">def update_parameters_with_gd_test_case():    np.random.seed(1)    learning_rate = 0.01    W1 = np.random.randn(2,3)    b1 = np.random.randn(2,1)    W2 = np.random.randn(3,3)    b2 = np.random.randn(3,1)    dW1 = np.random.randn(2,3)    db1 = np.random.randn(2,1)    dW2 = np.random.randn(3,3)    db2 = np.random.randn(3,1)    parameters = {"W1": W1, "b1": b1, "W2": W2, "b2": b2}    grads = {"dW1": dW1, "db1": db1, "dW2": dW2, "db2": db2}    return parameters, grads, learning_rate"""def update_parameters_with_sgd_checker(function, inputs, outputs):    if function(inputs) == outputs:        print("Correct")    else:        print("Incorrect")"""def random_mini_batches_test_case():    np.random.seed(1)    mini_batch_size = 64    X = np.random.randn(12288, 148)    Y = np.random.randn(1, 148) < 0.5    return X, Y, mini_batch_sizedef initialize_velocity_test_case():    np.random.seed(1)    W1 = np.random.randn(2,3)    b1 = np.random.randn(2,1)    W2 = np.random.randn(3,3)    b2 = np.random.randn(3,1)    parameters = {"W1": W1, "b1": b1, "W2": W2, "b2": b2}    return parametersdef update_parameters_with_momentum_test_case():    np.random.seed(1)    W1 = np.random.randn(2,3)    b1 = np.random.randn(2,1)    W2 = np.random.randn(3,3)    b2 = np.random.randn(3,1)    dW1 = np.random.randn(2,3)    db1 = np.random.randn(2,1)    dW2 = np.random.randn(3,3)    db2 = np.random.randn(3,1)    parameters = {"W1": W1, "b1": b1, "W2": W2, "b2": b2}    grads = {"dW1": dW1, "db1": db1, "dW2": dW2, "db2": db2}    v = {'dW1': np.array([[ 0.,  0.,  0.],        [ 0.,  0.,  0.]]), 'dW2': np.array([[ 0.,  0.,  0.],        [ 0.,  0.,  0.],        [ 0.,  0.,  0.]]), 'db1': np.array([[ 0.],        [ 0.]]), 'db2': np.array([[ 0.],        [ 0.],        [ 0.]])}    return parameters, grads, vdef initialize_adam_test_case():    np.random.seed(1)    W1 = np.random.randn(2,3)    b1 = np.random.randn(2,1)    W2 = np.random.randn(3,3)    b2 = np.random.randn(3,1)    parameters = {"W1": W1, "b1": b1, "W2": W2, "b2": b2}    return parametersdef update_parameters_with_adam_test_case():    np.random.seed(1)    v, s = ({'dW1': np.array([[ 0.,  0.,  0.],         [ 0.,  0.,  0.]]), 'dW2': np.array([[ 0.,  0.,  0.],         [ 0.,  0.,  0.],         [ 0.,  0.,  0.]]), 'db1': np.array([[ 0.],         [ 0.]]), 'db2': np.array([[ 0.],         [ 0.],         [ 0.]])}, {'dW1': np.array([[ 0.,  0.,  0.],         [ 0.,  0.,  0.]]), 'dW2': np.array([[ 0.,  0.,  0.],         [ 0.,  0.,  0.],         [ 0.,  0.,  0.]]), 'db1': np.array([[ 0.],         [ 0.]]), 'db2': np.array([[ 0.],         [ 0.],         [ 0.]])})    W1 = np.random.randn(2,3)    b1 = np.random.randn(2,1)    W2 = np.random.randn(3,3)    b2 = np.random.randn(3,1)    dW1 = np.random.randn(2,3)    db1 = np.random.randn(2,1)    dW2 = np.random.randn(3,3)    db2 = np.random.randn(3,1)    parameters = {"W1": W1, "b1": b1, "W2": W2, "b2": b2}    grads = {"dW1": dW1, "db1": db1, "dW2": dW2, "db2": db2}    return parameters, grads, v, s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¥ç»ç½‘ç»œç»“æ„å°è£…"><a href="#ç¥ç»ç½‘ç»œç»“æ„å°è£…" class="headerlink" title="ç¥ç»ç½‘ç»œç»“æ„å°è£…"></a>ç¥ç»ç½‘ç»œç»“æ„å°è£…</h2><h3 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_sigmoid(Z):    """    Implements the sigmoid activation in numpy    Arguments:    Z -- numpy array of any shape    Returns:    A -- output of sigmoid(z), same shape as Z    cache -- returns Z as well, useful during backpropagation    """    A = 1/(1+np.exp(-Z))    cache = Z    return A, cachedef func_relu(Z):    """    Implement the RELU function.    Arguments:    Z -- Output of the linear layer, of any shape    Returns:    A -- Post-activation parameter, of the same shape as Z    cache -- a python dictionary containing "A" ; stored for computing the backward pass efficiently    """    A = np.maximum(0,Z)    assert(A.shape == Z.shape)    cache = Z     return A, cachedef func_relu_backward(dA, cache):    """    Implement the backward propagation for a single RELU unit.    Arguments:    dA -- post-activation gradient, of any shape    cache -- 'Z' where we store for computing backward propagation efficiently    Returns:    dZ -- Gradient of the cost with respect to Z    """    Z = cache    dZ = np.array(dA, copy=True) # just converting dz to a correct object.    # When z <= 0, you should set dz to 0 as well.     dZ[Z <= 0] = 0    assert (dZ.shape == Z.shape)    return dZdef func_sigmoid_backward(dA, cache):    """    Implement the backward propagation for a single SIGMOID unit.    Arguments:    dA -- post-activation gradient, of any shape    cache -- 'Z' where we store for computing backward propagation efficiently    Returns:    dZ -- Gradient of the cost with respect to Z    """    Z = cache    s = 1/(1+np.exp(-Z))    dZ = dA * s * (1-s)    assert (dZ.shape == Z.shape)    return dZ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‚æ•°åˆå§‹åŒ–"><a href="#å‚æ•°åˆå§‹åŒ–" class="headerlink" title="å‚æ•°åˆå§‹åŒ–"></a>å‚æ•°åˆå§‹åŒ–</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layers_initialize_parameters(layer_dims, seed=1):    """    Lå±‚ç¥ç»ç½‘ç»œå‚æ•°åˆå§‹åŒ–    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param seed: éšæœºç§å­    :return:         parameters -- python dictionary containing your parameters "W1", "b1", ..., "WL", "bL":        Wl -- weight matrix of shape (layer_dims[l], layer_dims[l-1])        bl -- bias vector of shape (layer_dims[l], 1)    """    np.random.seed(seed)    parameters = {}    L = len(layer_dims)    # è¿™é‡Œ/ np.sqrt(layer_dims[layer-1])å¾ˆé‡è¦ï¼Œå¦‚æœè¿˜æ˜¯*0.01ï¼Œä¼šå¯¼è‡´æ¨¡å‹costé™ä¸ä¸‹å»    for layer in range(1, L):#         parameters['W' + str(layer)] = np.random.randn(layer_dims[layer], layer_dims[layer-1]) / np.sqrt(layer_dims[layer-1]) # * 0.01        # todo he initialize        parameters['W' + str(layer)] = np.random.randn(layer_dims[layer], layer_dims[layer-1]) * np.sqrt(2 / layer_dims[layer-1]) # * 0.01        parameters['b' + str(layer)] = np.zeros((layer_dims[layer], 1))        assert(parameters['W' + str(layer)].shape == (layer_dims[layer], layer_dims[layer-1]))        assert(parameters['b' + str(layer)].shape == (layer_dims[layer], 1))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_forward(A, W, b):    """    linear forward    :param A:    :param W:    :param b:    :return Z,chche:        Z -- the input of the activation function, also called pre-activation parameter         cache -- a python dictionary containing "A", "W" and "b" ; stored for computing the backward pass efficiently    """    Z = np.dot(W, A) + b    assert(Z.shape == (W.shape[0], A.shape[1]))    cache = (A, W, b)    return Z, cachedef func_linear_activation_forward(A_prev, W, b, activation):    """    Implement the forward propagation for the LINEAR->ACTIVATION layer    :param A_prev: activations from previous layer (or input data): (size of previous layer, number of examples)    :param W: weights matrix: numpy array of shape (size of current layer, size of previous layer)    :param b: bias vector, numpy array of shape (size of the current layer, 1)    :param activation: the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :return:        A -- the output of the activation function, also called the post-activation value         cache -- a python dictionary containing "linear_cache" and "activation_cache";                 stored for computing the backward pass efficiently    """    Z, linear_cache = func_linear_forward(A_prev, W, b)    if activation == 'sigmoid':        A, activation_cache = func_sigmoid(Z)    elif activation == 'relu':        A, activation_cache = func_relu(Z)    else:        raise ValueError('activation param')    assert(A.shape == (W.shape[0], A_prev.shape[1]))    cache = (linear_cache, activation_cache)    return A, cachedef func_L_model_forward(X, parameters):    """    Implement forward propagation for the [LINEAR->RELU]*(L-1)->LINEAR->SIGMOID computation    :param X -- data, numpy array of shape (input size, number of examples)    :param parameters -- output of initialize_parameters_deep()    :return:        AL -- last post-activation value        caches -- list of caches containing:                    every cache of linear_relu_forward() (there are L-1 of them, indexed from 0 to L-2)                    the cache of linear_sigmoid_forward() (there is one, indexed L-1)    """    caches = []    A = X    L = len(parameters) // 2    for layer in range(1, L):        A_prev = A        W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]        A, cache = func_linear_activation_forward(A_prev, W, b, 'relu')        caches.append(cache)    A_prev = A    layer = L    W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]    A, cache = func_linear_activation_forward(A_prev, W, b, 'sigmoid')    caches.append(cache)    assert(A.shape == (1, X.shape[1]))    return A, caches<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="compute-cost"><a href="#compute-cost" class="headerlink" title="compute cost"></a>compute cost</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_compute_cost(AL, Y):    """    Implement the cost function defined by equation (7).    :param AL -- probability vector corresponding to your label predictions, shape (1, number of examples)    :param Y -- true "label" vector (for example: containing 0 if non-cat, 1 if cat), shape (1, number of examples)    :return:        cost -- cross-entropy cost    """    m = Y.shape[1]    # todo RuntimeWarning: divide by zero encountered in log    AL = np.clip(AL, 1e-10, 1-1e-10)#     Compute loss from aL and y.#     logprobs = np.multiply(-np.log(AL), Y) + np.multiply(-np.log(1 - AL), 1 - Y)#     cost = 1./m * np.nansum(logprobs)#     cost = -1 / m * np.sum(np.multiply(Y, np.log(AL))+np.multiply(1-Y, np.log(1-AL)))    cost = (1./m) * (-np.dot(Y,np.log(AL).T) - np.dot(1-Y, np.log(1-AL).T))    cost = np.squeeze(cost)      # To make sure your cost's shape is what we expect (e.g. this turns [[17]] into 17).    assert(cost.shape == ())    return cost<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="backward"><a href="#backward" class="headerlink" title="backward"></a>backward</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_backward(dZ, cache):    """    Implement the linear portion of backward propagation for a single layer (layer l)    :param dZ -- Gradient of the cost with respect to the linear output (of current layer l)    :param cache -- tuple of values (A_prev, W, b) coming from the forward propagation in the current layer    :return:        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    A_prev, W, b = cache    m = A_prev.shape[1]    dW = 1. / m * np.dot(dZ, A_prev.T)    db = 1. / m * np.sum(dZ, axis=1, keepdims=True)  # axis=1æ˜¯è¡Œè®°å½•æ±‚å’Œ    dA_prev = np.dot(W.T, dZ)    assert(dW.shape == W.shape)    assert(db.shape == b.shape)    assert(dA_prev.shape == A_prev.shape)    return dA_prev, dW, dbdef func_linear_activation_backward(dA, cache, activation):    """    Implement the backward propagation for the LINEAR->ACTIVATION layer.    :param dA -- post-activation gradient for current layer l     :param cache -- tuple of values (linear_cache, activation_cache) we store for computing backward propagation efficiently    :param activation -- the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :returns        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    linear_cache, activation_cache = cache    if activation == 'relu':        dZ = func_relu_backward(dA, activation_cache)    elif activation == 'sigmoid':        dZ = func_sigmoid_backward(dA, activation_cache)    else:        raise ValueError('activation param')    dA_prev, dW, db = func_linear_backward(dZ, linear_cache)    return dA_prev, dW, dbdef func_L_model_backward(AL, Y, caches):    """    Implement the backward propagation for the [LINEAR->RELU] * (L-1) -> LINEAR -> SIGMOID group    :param AL -- probability vector, output of the forward propagation (L_model_forward())    :param Y -- true "label" vector (containing 0 if non-cat, 1 if cat)    :param caches -- list of caches containing:                    every cache of linear_activation_forward() with "relu" (it's caches[l], for l in range(L-1) i.e l = 0...L-2)                    the cache of linear_activation_forward() with "sigmoid" (it's caches[L-1])    :return:        grads -- A dictionary with the gradients                 grads["dA" + str(l)] = ...                  grads["dW" + str(l)] = ...                 grads["db" + str(l)] = ...     """    grads = {}    L = len(caches)    m = AL.shape[1]    Y = Y.reshape(AL.shape)    # todo divide by zero encountered in true_divide    dAL = - (np.divide(Y, AL, where=AL!=0) - np.divide(1-Y, 1-AL, where=(1-AL)!=0))#     dAL = - (np.divide(Y, AL) - np.divide(1-Y, 1-AL))    cur_cache = caches[L-1]    grads['dA' + str(L-1)], grads['dW'+str(L)], grads['db'+str(L)] = func_linear_activation_backward(dAL, cur_cache, activation='sigmoid')    for layer in reversed(range(L-1)):        cur_cache = caches[layer]        dA_prev_tmp, dW_tmp, db_tmp = func_linear_activation_backward(grads["dA"+str(layer+1)], cur_cache, activation='relu')        grads['dA'+str(layer)] = dA_prev_tmp        grads['dW'+str(layer+1)] = dW_tmp        grads['db'+str(layer+1)] = db_tmp#     current_cache = caches[L-1]#     grads["dA" + str(L)], grads["dW" + str(L)], grads["db" + str(L)] = func_linear_activation_backward(dAL, current_cache, activation = "sigmoid")#     for l in reversed(range(L-1)):#         # lth layer: (RELU -> LINEAR) gradients.#         current_cache = caches[l]#         dA_prev_temp, dW_temp, db_temp = func_linear_activation_backward(grads["dA" + str(l + 2)], current_cache, activation = "relu")#         grads["dA" + str(l + 1)] = dA_prev_temp#         grads["dW" + str(l + 1)] = dW_temp#         grads["db" + str(l + 1)] = db_temp    return grads<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="update-parameters"><a href="#update-parameters" class="headerlink" title="update parameters"></a>update parameters</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_update_parameters(parameters, grads, lr):    """    Update parameters using gradient descent    :param parameters -- python dictionary containing your parameters     :param grads -- python dictionary containing your gradients, output of L_model_backward    :param lr: learning rate    :return:        parameters -- python dictionary containing your updated parameters                       parameters["W" + str(l)] = ...                       parameters["b" + str(l)] = ...    """    L = len(parameters) // 2    for layer in range(1, L+1):        parameters['W'+str(layer)] = parameters['W'+str(layer)] - lr * grads['dW' + str(layer)]        parameters['b'+str(layer)] = parameters['b'+str(layer)] - lr * grads['db' + str(layer)]    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="predict"><a href="#predict" class="headerlink" title="predict"></a>predict</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_predict(X, y, parameters):    """    This function is used to predict the results of a  L-layer neural network.    :param X -- data set of examples you would like to label    :param parameters -- parameters of the trained model    :return:        p -- predictions for the given dataset X    """    m = X.shape[1]    L = len(parameters) // 2    p = np.zeros((1, m))    probas, caches = func_L_model_forward(X, parameters)    for i in range(probas.shape[1]):        if probas[0, i] > 0.5:            p[0, i] = 1        else:            p[0, i] = 0    print('acc: {}'.format(np.sum(p==y)/m))    return p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="dnn-model"><a href="#dnn-model" class="headerlink" title="dnn model"></a>dnn model</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layer_dnn_model(X, Y, layer_dims, lr=0.001, num_epochs=10000, print_cost=False):    """    å¤šå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    :param X:    :param Y:    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param lr: learning rate    :param num_epochs:    :param print_cost:    :return params    """    np.random.seed(1)    costs = []#     m = X.shape[1]    # å‚æ•°åˆå§‹åŒ–    parameters = func_L_layers_initialize_parameters(layer_dims)    # loop    for epoch in range(num_epochs):        # å‰å‘ä¼ æ’­        AL, caches = func_L_model_forward(X, parameters)        # è®¡ç®—æŸå¤±        cost = func_compute_cost(AL, Y)        # åå‘ä¼ æ’­        grads = func_L_model_backward(AL, Y, caches)        # æ›´æ–°å‚æ•°        parameters = func_update_parameters(parameters, grads, lr)        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 100 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))        if epoch % 100 == 0:            costs.append(cost)    return parameters, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…¶ä»–é€šç”¨å‡½æ•°"><a href="#å…¶ä»–é€šç”¨å‡½æ•°" class="headerlink" title="å…¶ä»–é€šç”¨å‡½æ•°"></a>å…¶ä»–é€šç”¨å‡½æ•°</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_load_params_and_grads(seed=1):    np.random.seed(seed)    W1 = np.random.randn(2,3)    b1 = np.random.randn(2,1)    W2 = np.random.randn(3,3)    b2 = np.random.randn(3,1)    dW1 = np.random.randn(2,3)    db1 = np.random.randn(2,1)    dW2 = np.random.randn(3,3)    db2 = np.random.randn(3,1)    return W1, b1, W2, b2, dW1, db1, dW2, db2def func_load_2D_dataset():    data = scipy.io.loadmat('./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š5/data.mat')    train_X = data['X'].T    train_Y = data['y'].T    test_X = data['Xval'].T    test_Y = data['yval'].T    plt.scatter(train_X[0, :], train_X[1, :], c=train_Y, s=40, cmap=plt.cm.Spectral);    return train_X, train_Y, test_X, test_Ydef func_plot_decision_boundary(model, X, y):    # Set min and max values and give it some padding    x_min, x_max = X[0, :].min() - 1, X[0, :].max() + 1    y_min, y_max = X[1, :].min() - 1, X[1, :].max() + 1    h = 0.01    # Generate a grid of points with distance h between them    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))    # Predict the function value for the whole grid    Z = model(np.c_[xx.ravel(), yy.ravel()])    Z = Z.reshape(xx.shape)    # Plot the contour and training examples    plt.contourf(xx, yy, Z, cmap=plt.cm.Spectral)    plt.ylabel('x2')    plt.xlabel('x1')    plt.scatter(X[0, :], X[1, :], c=y, cmap=plt.cm.Spectral)    plt.show()def func_predict_dec(parameters, X):    """    Used for plotting decision boundary.    Arguments:    parameters -- python dictionary containing your parameters     X -- input data of size (m, K)    Returns    predictions -- vector of predictions of our model (red: 0 / blue: 1)    """    # Predict using forward propagation and a classification threshold of 0.5    AL, cache = func_L_model_forward(X, parameters)    predictions = (AL>0.5)    return predictionsdef func_load_dataset():    np.random.seed(3)    train_X, train_Y = sklearn.datasets.make_moons(n_samples=300, noise=.2) #300 #0.2     # Visualize the data    plt.scatter(train_X[:, 0], train_X[:, 1], c=train_Y, s=40, cmap=plt.cm.Spectral);    train_X = train_X.T    train_Y = train_Y.reshape((1, train_Y.shape[0]))    return train_X, train_Ydef func_plot_cost(costs, lr):    """    plot cost    :param costs:     """    # plot the cost    plt.plot(costs)    plt.ylabel('cost')    plt.xlabel('epochs (per 100)')    plt.title("Learning rate = " + str(lr))    plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¢¯åº¦ä¸‹é™"><a href="#æ¢¯åº¦ä¸‹é™" class="headerlink" title="æ¢¯åº¦ä¸‹é™"></a>æ¢¯åº¦ä¸‹é™</h2><h3 id="batch-gradient-descent-å…¨é‡æ¢¯åº¦ä¸‹é™"><a href="#batch-gradient-descent-å…¨é‡æ¢¯åº¦ä¸‹é™" class="headerlink" title="batch gradient descent=å…¨é‡æ¢¯åº¦ä¸‹é™"></a>batch gradient descent=å…¨é‡æ¢¯åº¦ä¸‹é™</h3><ul><li>When you take gradient steps with respect to all <code>m</code> examples on each step, it is also called <code>Batch Gradient Descent</code></li><li>å‚æ•°æ›´æ–°å…¬å¼<script type="math/tex; mode=display">W^{[l]} = W^{[l]} - \alpha \text{ } dW^{[l]} \\b^{[l]} = b^{[l]} - \alpha \text{ } db^{[l]}</script></li></ul><h4 id="overwrite-update-parameters"><a href="#overwrite-update-parameters" class="headerlink" title="overwrite update parameters"></a>overwrite update parameters</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_update_parameters_with_gd(parameters, grads, lr):    """    Update parameters using one step of gradient descent    :param parameters -- python dictionary containing your parameters     :param grads -- python dictionary containing your gradients, output of L_model_backward    :param lr: learning rate    :return:        parameters -- python dictionary containing your updated parameters                       parameters["W" + str(l)] = ...                       parameters["b" + str(l)] = ...    """    L = len(parameters) // 2    for layer in range(1, L+1):        parameters['W'+str(layer)] = parameters['W'+str(layer)] - lr * grads['dW' + str(layer)]        parameters['b'+str(layer)] = parameters['b'+str(layer)] - lr * grads['db' + str(layer)]    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, grads, lr = update_parameters_with_gd_test_case()parameters, grads, lr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>({&#39;W1&#39;: array([[ 1.62434536, -0.61175641, -0.52817175],         [-1.07296862,  0.86540763, -2.3015387 ]]),  &#39;b1&#39;: array([[ 1.74481176],         [-0.7612069 ]]),  &#39;W2&#39;: array([[ 0.3190391 , -0.24937038,  1.46210794],         [-2.06014071, -0.3224172 , -0.38405435],         [ 1.13376944, -1.09989127, -0.17242821]]),  &#39;b2&#39;: array([[-0.87785842],         [ 0.04221375],         [ 0.58281521]])}, {&#39;dW1&#39;: array([[-1.10061918,  1.14472371,  0.90159072],         [ 0.50249434,  0.90085595, -0.68372786]]),  &#39;db1&#39;: array([[-0.12289023],         [-0.93576943]]),  &#39;dW2&#39;: array([[-0.26788808,  0.53035547, -0.69166075],         [-0.39675353, -0.6871727 , -0.84520564],         [-0.67124613, -0.0126646 , -1.11731035]]),  &#39;db2&#39;: array([[0.2344157 ],         [1.65980218],         [0.74204416]])}, 0.01)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_update_parameters_with_gd(parameters, grads, lr)parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[ 1.63535156, -0.62320365, -0.53718766],        [-1.07799357,  0.85639907, -2.29470142]]), &#39;b1&#39;: array([[ 1.74604067],        [-0.75184921]]), &#39;W2&#39;: array([[ 0.32171798, -0.25467393,  1.46902454],        [-2.05617317, -0.31554548, -0.3756023 ],        [ 1.1404819 , -1.09976462, -0.1612551 ]]), &#39;b2&#39;: array([[-0.88020257],        [ 0.02561572],        [ 0.57539477]])}</code></pre><h3 id="mini-batch-gradient-descent-å°æ‰¹é‡æ¢¯åº¦ä¸‹é™"><a href="#mini-batch-gradient-descent-å°æ‰¹é‡æ¢¯åº¦ä¸‹é™" class="headerlink" title="mini batch gradient descent=å°æ‰¹é‡æ¢¯åº¦ä¸‹é™"></a>mini batch gradient descent=å°æ‰¹é‡æ¢¯åº¦ä¸‹é™</h3><ul><li><p>æ­¥éª¤</p><ol><li><p><strong>Shuffle</strong>: Create a shuffled version of the training set (X, Y) as shown below. Each column of X and Y represents a training example. Note that the random shuffling is done synchronously between X and Y. Such that after the shuffling the $i^{th}$ column of X is the example corresponding to the $i^{th}$ label in Y. The shuffling step ensures that examples will be split randomly into different mini-batches. </p><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/kiank_shuffle.png" style="width:550px;height:300px;"></p></li><li><p><strong>Partition</strong>: Partition the shuffled (X, Y) into mini-batches of size <code>mini_batch_size</code> (here 64). Note that the number of training examples is not always divisible by <code>mini_batch_size</code>. The last mini batch might be smaller, but you donâ€™t need to worry about this. When the final mini-batch is smaller than the full <code>mini_batch_size</code>, it will look like this: </p><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/kiank_partition.png" style="width:550px;height:300px;"></p></li></ol></li><li><p>æ³¨æ„ï¼šæœ€åä¸€ä¸ªbatchå¯èƒ½ä¸æ»¡batch_size</p></li></ul><h4 id="æ„å»º-random-mini-batcheså‡½æ•°"><a href="#æ„å»º-random-mini-batcheså‡½æ•°" class="headerlink" title="æ„å»º random_mini_batcheså‡½æ•°"></a>æ„å»º random_mini_batcheså‡½æ•°</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_random_mini_batches(X, Y, batch_size=64, seed=0):    """    Creates a list of random minibatches from (X, Y)    :param X -- input data, of shape (input size, number of examples)    :param Y -- true "label" vector (1 for blue dot / 0 for red dot), of shape (1, number of examples)    :param batch_size -- size of the mini-batches, integer    :return mini_batches -- list of synchronous (mini_batch_X, mini_batch_Y)    """    np.random.seed(seed)    m = X.shape[1]    mini_batches = []    # step 1: shuffle    permutation = list(np.random.permutation(m))    shuffled_X = X[:, permutation]    shuffled_Y = Y[:, permutation].reshape((1, m))    # step 2: partition    num_complete_minibatches = math.floor(m / batch_size)    for k in range(0, num_complete_minibatches):        mini_batch_X = shuffled_X[:, k*batch_size: (k+1)*batch_size]        mini_batch_Y = shuffled_Y[:, k*batch_size: (k+1)*batch_size]        mini_batch = (mini_batch_X, mini_batch_Y)        mini_batches.append(mini_batch)    if m % batch_size != 0:        mini_batch_X = shuffled_X[:, num_complete_minibatches*batch_size:]        mini_batch_Y = shuffled_Y[:, num_complete_minibatches*batch_size:]        mini_batch = (mini_batch_X, mini_batch_Y)        mini_batches.append(mini_batch)    return mini_batches<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X_assess, Y_assess, mini_batch_size = random_mini_batches_test_case()mini_batches = func_random_mini_batches(X_assess, Y_assess, mini_batch_size)print ("shape of the 1st mini_batch_X: " + str(mini_batches[0][0].shape))print ("shape of the 2nd mini_batch_X: " + str(mini_batches[1][0].shape))print ("shape of the 3rd mini_batch_X: " + str(mini_batches[2][0].shape))print ("shape of the 1st mini_batch_Y: " + str(mini_batches[0][1].shape))print ("shape of the 2nd mini_batch_Y: " + str(mini_batches[1][1].shape)) print ("shape of the 3rd mini_batch_Y: " + str(mini_batches[2][1].shape))print ("mini batch sanity check: " + str(mini_batches[0][0][0][0:3]))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>shape of the 1st mini_batch_X: (12288, 64)shape of the 2nd mini_batch_X: (12288, 64)shape of the 3rd mini_batch_X: (12288, 20)shape of the 1st mini_batch_Y: (1, 64)shape of the 2nd mini_batch_Y: (1, 64)shape of the 3rd mini_batch_Y: (1, 20)mini batch sanity check: [ 0.90085595 -0.7612069   0.2344157 ]</code></pre><h3 id="Stochastic-Gradient-Descent-éšæœºæ¢¯åº¦ä¸‹é™"><a href="#Stochastic-Gradient-Descent-éšæœºæ¢¯åº¦ä¸‹é™" class="headerlink" title="Stochastic Gradient Descent=éšæœºæ¢¯åº¦ä¸‹é™"></a>Stochastic Gradient Descent=éšæœºæ¢¯åº¦ä¸‹é™</h3><p>A variant of this is Stochastic Gradient Descent (SGD), which is equivalent to mini-batch gradient descent where each mini-batch has just 1 example. The update rule that you have just implemented does not change. What changes is that you would be computing gradients on just one training example at a time, rather than on the whole training set. The code examples below illustrate the difference between stochastic gradient descent and (batch) gradient descent.</p><ul><li>å…·ä½“è¿‡ç¨‹</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">X = data_inputY = labelsparameters = func_initialize_parameters(layer_dims)m = X.shape[1]for i in range(epochs):    for j in range(m):        a, caches = func_forward_propagation(X[:, j], parameters)  # æ¯æ¬¡åªç”¨ä¸€ä¸ªæ ·æœ¬        cost = func_compute_cost(a, Y[:, j])        grads = func_backward_propagation(a, caches, parameters)        parameters = func_update_parameters(parameters, grads)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>In Stochastic Gradient Descent, you use only 1 training example before updating the gradients. When the training set is large, SGD can be faster. But the parameters will â€œoscillateâ€(æŒ¯è¡) toward the minimum rather than converge smoothly. Here is an illustration of this:</p><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/kiank_sgd.png" style="width:750px;height:250px;"></p><caption><center> <u> <font color="purple"> **Figure 1** </font></u><font color="purple">  : **SGD vs GD**<br> "+" denotes a minimum of the cost. SGD leads to many oscillations to reach convergence. But each step is a lot faster to compute for SGD than for GD, as it uses only one training example (vs. the whole batch for GD). </font></center></caption><p><strong>Note</strong> also that implementing SGD requires 3 for-loops in total:</p><ol><li>Over the number of iterations</li><li>Over the $m$ training examples</li><li>Over the layers (to update all parameters, from $(W^{[1]},b^{[1]})$ to $(W^{[L]},b^{[L]})$)</li></ol><p>In practice, youâ€™ll often get faster results if you do not use neither the whole training set, nor only one training example, to perform each update. Mini-batch gradient descent uses an intermediate number of examples for each step. With mini-batch gradient descent, you loop over the mini-batches instead of looping over individual training examples.</p><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/kiank_minibatch.png" style="width:750px;height:250px;"></p><caption><center> <u> <font color="purple"> **Figure 2** </font></u>: <font color="purple">  **SGD vs Mini-Batch GD**<br> "+" denotes a minimum of the cost. Using mini-batches in your optimization algorithm often leads to faster optimization. </font></center></caption><font color="blue">**What you should remember**:- The difference between gradient descent, mini-batch gradient descent and stochastic gradient descent is the number of examples you use to perform one update step.- You have to tune a learning rate hyperparameter $\alpha$.- With a well-turned mini-batch size, usually it outperforms either gradient descent or stochastic gradient descent (particularly when the training set is large).é€‰å®šä¸€ä¸ªè‰¯å¥½çš„æ‰¹é‡å€¼ï¼Œé€šå¸¸ç”±äºæ¢¯åº¦ä¸‹é™å’Œéšæœºæ¢¯åº¦ä¸‹é™## æ¢¯åº¦ä¸‹é™with MomentumBecause mini-batch gradient descent makes a parameter update after seeing just a subset of examples, the direction of the update has some variance, and so the path taken by mini-batch gradient descent will "oscillate" toward convergence. Using momentum can reduce these oscillations.(ç”¨Momentumå¯ä»¥å‡å°è¿™æ ·çš„æŒ¯è¡)Momentum takes into account the past gradients to smooth out the update. We will store the 'direction' of the previous gradients in the variable $v$ (ä¼šè€ƒè™‘å‰é¢çš„æ¢¯åº¦å€¼). Formally, this will be the exponentially weighted average of the gradient on previous steps. You can also think of $v$ as the "velocity" of a ball rolling downhill, building up speed (and momentum) according to the direction of the gradient/slope of the hill. <img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/opt_momentum.png" style="width:400px;height:250px;"><caption><center> <u><font color="purple">**Figure 3**</font></u><font color="purple">: The red arrows shows the direction taken by one step of mini-batch gradient descent with momentum. The blue points show the direction of the gradient (with respect to the current mini-batch) on each step. Rather than just following the gradient, we let the gradient influence $v$ and then take a step in the direction of $v$.<br> <font color="black"> </font></font></center>è®¡ç®—å…¬å¼å¦‚ä¸‹The momentum update rule is, for $l = 1, ..., L$: $$ \begin{cases}v_{dW^{[l]}} = \beta v_{dW^{[l]}} + (1 - \beta) dW^{[l]} \\W^{[l]} = W^{[l]} - \alpha v_{dW^{[l]}}\end{cases}\tag{3}$$$$\begin{cases}v_{db^{[l]}} = \beta v_{db^{[l]}} + (1 - \beta) db^{[l]} \\b^{[l]} = b^{[l]} - \alpha v_{db^{[l]}} \end{cases}\tag{4}$$where L is the number of layers, $\beta$ is the momentum and $\alpha$ is the learning rate. All parameters should be stored in the `parameters` dictionary.**Note** that:- The velocity is initialized with zeros. So the algorithm will take a few iterations to "build up" velocity and start to take bigger steps.- If $\beta = 0$, then this just becomes standard gradient descent without momentum. **How do you choose $\beta$?**- The larger the momentum $\beta$ is, the smoother the update because the more we take the past gradients into account. But if $\beta$ is too big, it could also smooth out the updates too much. - <font size="3" color="red">Common values for $\beta$ range from 0.8 to 0.999. If you don't feel inclined to tune this, $\beta = 0.9$ is often a reasonable default. </font>- Tuning the optimal $\beta$ for your model might need trying several values to see what works best in term of reducing the value of the cost function $J$. <font color="blue">**What you should remember**:- Momentum takes past gradients into account to smooth out the steps of gradient descent. It can be applied with batch gradient descent, mini-batch gradient descent or stochastic gradient descent.- You have to tune a momentum hyperparameter $\beta$ and a learning rate $\alpha$.### initialize velocity```pythondef func_initialize_velocity(parameters):    """    initialize velocity    :param parameters:    :return v: python dictionary containing the current velocity.                v['dW' + str(l)] = velocity of dWl                v['db' + str(l)] = velocity of dbl    """    L = len(parameters) // 2    v = {}    for layer in range(1, L+1):        # Return an array of zeros with the same shape and type as a given array        v['dW' + str(layer)] = np.zeros_like(parameters['W' + str(layer)])        v['db' + str(layer)] = np.zeros_like(parameters['b' + str(layer)])    return v``````pythonparameters = initialize_velocity_test_case()parameters```    {'W1': array([[ 1.62434536, -0.61175641, -0.52817175],            [-1.07296862,  0.86540763, -2.3015387 ]]),     'b1': array([[ 1.74481176],            [-0.7612069 ]]),     'W2': array([[ 0.3190391 , -0.24937038,  1.46210794],            [-2.06014071, -0.3224172 , -0.38405435],            [ 1.13376944, -1.09989127, -0.17242821]]),     'b2': array([[-0.87785842],            [ 0.04221375],            [ 0.58281521]])}```pythonv = func_initialize_velocity(parameters)v```    {'dW1': array([[0., 0., 0.],            [0., 0., 0.]]),     'db1': array([[0.],            [0.]]),     'dW2': array([[0., 0., 0.],            [0., 0., 0.],            [0., 0., 0.]]),     'db2': array([[0.],            [0.],            [0.]])}### overwrite update parameters```pythondef func_update_parameters_with_momentum(parameters, grads, v, beta, lr):    """    Update parameters using gradient descent    :param parameters -- python dictionary containing your parameters     :param grads -- python dictionary containing your gradients, output of L_model_backward    :param v -- python dictionary containing the current velocity    :param beta -- the momentum hyperparameter, scalar    :param lr: learning rate    :return:        parameters -- python dictionary containing your updated parameters                       parameters["W" + str(l)] = ...                       parameters["b" + str(l)] = ...    """    L = len(parameters) // 2    for layer in range(1, L+1):        v['dW' + str(layer)] = beta * v['dW' + str(layer)] + (1-beta) * grads['dW' + str(layer)]        v['db' + str(layer)] = beta * v['db' + str(layer)] + (1-beta) * grads['db' + str(layer)]        parameters['W'+str(layer)] = parameters['W'+str(layer)] - lr * v['dW' + str(layer)]        parameters['b'+str(layer)] = parameters['b'+str(layer)] - lr * v['db' + str(layer)]    return parameters, v``````pythonparameters, grads, v = update_parameters_with_momentum_test_case()parameters, grads, v```    ({'W1': array([[ 1.62434536, -0.61175641, -0.52817175],             [-1.07296862,  0.86540763, -2.3015387 ]]),      'b1': array([[ 1.74481176],             [-0.7612069 ]]),      'W2': array([[ 0.3190391 , -0.24937038,  1.46210794],             [-2.06014071, -0.3224172 , -0.38405435],             [ 1.13376944, -1.09989127, -0.17242821]]),      'b2': array([[-0.87785842],             [ 0.04221375],             [ 0.58281521]])},     {'dW1': array([[-1.10061918,  1.14472371,  0.90159072],             [ 0.50249434,  0.90085595, -0.68372786]]),      'db1': array([[-0.12289023],             [-0.93576943]]),      'dW2': array([[-0.26788808,  0.53035547, -0.69166075],             [-0.39675353, -0.6871727 , -0.84520564],             [-0.67124613, -0.0126646 , -1.11731035]]),      'db2': array([[0.2344157 ],             [1.65980218],             [0.74204416]])},     {'dW1': array([[0., 0., 0.],             [0., 0., 0.]]),      'dW2': array([[0., 0., 0.],             [0., 0., 0.],             [0., 0., 0.]]),      'db1': array([[0.],             [0.]]),      'db2': array([[0.],             [0.],             [0.]])})```pythonbeta = 0.9lr = 0.01parameters, v = func_update_parameters_with_momentum(parameters, grads, v, beta, lr)parameters```    {'W1': array([[ 1.62544598, -0.61290114, -0.52907334],            [-1.07347112,  0.86450677, -2.30085497]]),     'b1': array([[ 1.74493465],            [-0.76027113]]),     'W2': array([[ 0.31930698, -0.24990073,  1.4627996 ],            [-2.05974396, -0.32173003, -0.38320915],            [ 1.13444069, -1.0998786 , -0.1713109 ]]),     'b2': array([[-0.87809283],            [ 0.04055394],            [ 0.58207317]])}## æ¢¯åº¦ä¸‹é™ with adamAdamç®—æ³•æ˜¯è®­ç»ƒç¥ç»ç½‘ç»œæœ€æœ‰æ•ˆçš„ä¼˜åŒ–ç®—æ³•ä¹‹ä¸€ã€‚å®ƒç»“åˆäº†RMSPropå’ŒMomentumçš„æƒ³æ³•è®¡ç®—æ­¥éª¤å¦‚ä¸‹ï¼š1. It calculates an exponentially weighted average of past gradients, and stores it in variables $v$ (before bias correction) and $v^{corrected}$ (with bias correction). 2. It calculates an exponentially weighted average of the squares of the past gradients, and  stores it in variables $s$ (before bias correction) and $s^{corrected}$ (with bias correction). 3. It updates parameters in a direction based on combining information from "1" and "2".è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š$$\begin{cases}v_{dW^{[l]}} = \beta_1 v_{dW^{[l]}} + (1 - \beta_1) \frac{\partial \mathcal{J} }{ \partial W^{[l]} } \\v^{corrected}_{dW^{[l]}} = \frac{v_{dW^{[l]}}}{1 - (\beta_1)^t} \\s_{dW^{[l]}} = \beta_2 s_{dW^{[l]}} + (1 - \beta_2) (\frac{\partial \mathcal{J} }{\partial W^{[l]} })^2 \\s^{corrected}_{dW^{[l]}} = \frac{s_{dW^{[l]}}}{1 - (\beta_1)^t} \\W^{[l]} = W^{[l]} - \alpha \frac{v^{corrected}_{dW^{[l]}}}{\sqrt{s^{corrected}_{dW^{[l]}}} + \varepsilon}\end{cases}$$where:- t counts the number of steps taken of Adam - L is the number of layers- $\beta_1$ and $\beta_2$ are hyperparameters that control the two exponentially weighted averages. - $\alpha$ is the learning rate- $\varepsilon$ is a very small number to avoid dividing by zero<font color="blue" size="3">è¶…å‚æ•°ä¸€èˆ¬è®¾å®šï¼š1. $\beta_1$=0.92. $\beta_2$=0.9993. $\varepsilon = 1e-10$</font><h3 id="initialize-adam"><a href="#initialize-adam" class="headerlink" title="initialize adam"></a>initialize adam</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_initialize_adam(parameters):    """    Initializes v and s as two python dictionaries with:                - keys: "dW1", "db1", ..., "dWL", "dbL"                 - values: numpy arrays of zeros of the same shape as the corresponding gradients/parameters.    Arguments:    parameters -- python dictionary containing your parameters.                    parameters["W" + str(l)] = Wl                    parameters["b" + str(l)] = bl    Returns:     v -- python dictionary that will contain the exponentially weighted average of the gradient.                    v["dW" + str(l)] = ...                    v["db" + str(l)] = ...    s -- python dictionary that will contain the exponentially weighted average of the squared gradient.                    s["dW" + str(l)] = ...                    s["db" + str(l)] = ...    """    L = len(parameters) // 2    v = {}    s = {}    for layer in range(1, L+1):        v['dW'+str(layer)] = np.zeros_like(parameters['W'+str(layer)])        v['db'+str(layer)] = np.zeros_like(parameters['b'+str(layer)])        s['dW'+str(layer)] = np.zeros_like(parameters['W'+str(layer)])        s['db'+str(layer)] = np.zeros_like(parameters['b'+str(layer)])    return v, s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = initialize_adam_test_case()parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[ 1.62434536, -0.61175641, -0.52817175],        [-1.07296862,  0.86540763, -2.3015387 ]]), &#39;b1&#39;: array([[ 1.74481176],        [-0.7612069 ]]), &#39;W2&#39;: array([[ 0.3190391 , -0.24937038,  1.46210794],        [-2.06014071, -0.3224172 , -0.38405435],        [ 1.13376944, -1.09989127, -0.17242821]]), &#39;b2&#39;: array([[-0.87785842],        [ 0.04221375],        [ 0.58281521]])}</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">v, s = func_initialize_adam(parameters)v, s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>({&#39;dW1&#39;: array([[0., 0., 0.],         [0., 0., 0.]]),  &#39;db1&#39;: array([[0.],         [0.]]),  &#39;dW2&#39;: array([[0., 0., 0.],         [0., 0., 0.],         [0., 0., 0.]]),  &#39;db2&#39;: array([[0.],         [0.],         [0.]])}, {&#39;dW1&#39;: array([[0., 0., 0.],         [0., 0., 0.]]),  &#39;db1&#39;: array([[0.],         [0.]]),  &#39;dW2&#39;: array([[0., 0., 0.],         [0., 0., 0.],         [0., 0., 0.]]),  &#39;db2&#39;: array([[0.],         [0.],         [0.]])})</code></pre><h3 id="overwrite-update-parameters-1"><a href="#overwrite-update-parameters-1" class="headerlink" title="overwrite update parameters"></a>overwrite update parameters</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_update_parameters_with_adam(parameters, grads, v, s, t, lr=0.01, beta1=0.9, beta2=0.999, epsilon=1e-8):    """    Update parameters using Adam    Arguments:    parameters -- python dictionary containing your parameters:                    parameters['W' + str(l)] = Wl                    parameters['b' + str(l)] = bl    grads -- python dictionary containing your gradients for each parameters:                    grads['dW' + str(l)] = dWl                    grads['db' + str(l)] = dbl    v -- Adam variable, moving average of the first gradient, python dictionary    s -- Adam variable, moving average of the squared gradient, python dictionary    t -- epoch    learning_rate -- the learning rate, scalar.    beta1 -- Exponential decay hyperparameter for the first moment estimates     beta2 -- Exponential decay hyperparameter for the second moment estimates     epsilon -- hyperparameter preventing division by zero in Adam updates    Returns:    parameters -- python dictionary containing your updated parameters     v -- Adam variable, moving average of the first gradient, python dictionary    s -- Adam variable, moving average of the squared gradient, python dictionary    """    L = len(parameters) // 2    v_corrected = {}    s_corrected = {}    for layer in range(1, L+1):        v['dW'+str(layer)] = beta1 * v['dW'+str(layer)] + (1-beta1)*grads['dW'+str(layer)]        v['db'+str(layer)] = beta1 * v['db'+str(layer)] + (1-beta1)*grads['db'+str(layer)]        s['dW'+str(layer)] = beta2 * s['dW'+str(layer)] + (1-beta2)*np.square(grads['dW'+str(layer)])        s['db'+str(layer)] = beta2 * s['db'+str(layer)] + (1-beta2)*np.square(grads['db'+str(layer)])        v_corrected['dW'+str(layer)] = v['dW'+str(layer)] / (1-pow(beta1, t))        v_corrected['db'+str(layer)] = v['db'+str(layer)] / (1-pow(beta1, t))        s_corrected['dW'+str(layer)] = s['dW'+str(layer)] / (1-pow(beta2, t))        s_corrected['db'+str(layer)] = s['db'+str(layer)] / (1-pow(beta2, t))        parameters['W'+str(layer)] = parameters['W'+str(layer)] - lr * v_corrected['dW'+str(layer)] / (np.sqrt(s_corrected['dW'+str(layer)]) + epsilon)        parameters['b'+str(layer)] = parameters['b'+str(layer)] - lr * v_corrected['db'+str(layer)] / (np.sqrt(s_corrected['db'+str(layer)]) + epsilon)    return parameters, v, s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, grads, v, s = update_parameters_with_adam_test_case()parameters, grads, v, s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>({&#39;W1&#39;: array([[ 1.62434536, -0.61175641, -0.52817175],         [-1.07296862,  0.86540763, -2.3015387 ]]),  &#39;b1&#39;: array([[ 1.74481176],         [-0.7612069 ]]),  &#39;W2&#39;: array([[ 0.3190391 , -0.24937038,  1.46210794],         [-2.06014071, -0.3224172 , -0.38405435],         [ 1.13376944, -1.09989127, -0.17242821]]),  &#39;b2&#39;: array([[-0.87785842],         [ 0.04221375],         [ 0.58281521]])}, {&#39;dW1&#39;: array([[-1.10061918,  1.14472371,  0.90159072],         [ 0.50249434,  0.90085595, -0.68372786]]),  &#39;db1&#39;: array([[-0.12289023],         [-0.93576943]]),  &#39;dW2&#39;: array([[-0.26788808,  0.53035547, -0.69166075],         [-0.39675353, -0.6871727 , -0.84520564],         [-0.67124613, -0.0126646 , -1.11731035]]),  &#39;db2&#39;: array([[0.2344157 ],         [1.65980218],         [0.74204416]])}, {&#39;dW1&#39;: array([[0., 0., 0.],         [0., 0., 0.]]),  &#39;dW2&#39;: array([[0., 0., 0.],         [0., 0., 0.],         [0., 0., 0.]]),  &#39;db1&#39;: array([[0.],         [0.]]),  &#39;db2&#39;: array([[0.],         [0.],         [0.]])}, {&#39;dW1&#39;: array([[0., 0., 0.],         [0., 0., 0.]]),  &#39;dW2&#39;: array([[0., 0., 0.],         [0., 0., 0.],         [0., 0., 0.]]),  &#39;db1&#39;: array([[0.],         [0.]]),  &#39;db2&#39;: array([[0.],         [0.],         [0.]])})</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, v, s = func_update_parameters_with_adam(parameters, grads, v, s, t=2, lr=0.01, beta1=0.9, beta2=0.999, epsilon=1e-8)parameters, v, s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>({&#39;W1&#39;: array([[ 1.63178673, -0.61919778, -0.53561312],         [-1.08040999,  0.85796626, -2.29409733]]),  &#39;b1&#39;: array([[ 1.75225313],         [-0.75376553]]),  &#39;W2&#39;: array([[ 0.32648046, -0.25681174,  1.46954931],         [-2.05269934, -0.31497584, -0.37661299],         [ 1.14121081, -1.09244991, -0.16498684]]),  &#39;b2&#39;: array([[-0.88529979],         [ 0.03477238],         [ 0.57537385]])}, {&#39;dW1&#39;: array([[-0.11006192,  0.11447237,  0.09015907],         [ 0.05024943,  0.09008559, -0.06837279]]),  &#39;dW2&#39;: array([[-0.02678881,  0.05303555, -0.06916608],         [-0.03967535, -0.06871727, -0.08452056],         [-0.06712461, -0.00126646, -0.11173103]]),  &#39;db1&#39;: array([[-0.01228902],         [-0.09357694]]),  &#39;db2&#39;: array([[0.02344157],         [0.16598022],         [0.07420442]])}, {&#39;dW1&#39;: array([[0.00121136, 0.00131039, 0.00081287],         [0.0002525 , 0.00081154, 0.00046748]]),  &#39;dW2&#39;: array([[7.17640232e-05, 2.81276921e-04, 4.78394595e-04],         [1.57413361e-04, 4.72206320e-04, 7.14372576e-04],         [4.50571368e-04, 1.60392066e-07, 1.24838242e-03]]),  &#39;db1&#39;: array([[1.51020075e-05],         [8.75664434e-04]]),  &#39;db2&#39;: array([[5.49507194e-05],         [2.75494327e-03],         [5.50629536e-04]])})</code></pre><h2 id="model-with-different-optimization-algorithms-ä½¿ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ¨¡å‹"><a href="#model-with-different-optimization-algorithms-ä½¿ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ¨¡å‹" class="headerlink" title="model with different optimization algorithms=ä½¿ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ¨¡å‹"></a>model with different optimization algorithms=ä½¿ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ¨¡å‹</h2><h3 id="load-moon-dataset"><a href="#load-moon-dataset" class="headerlink" title="load moon dataset"></a>load moon dataset</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_X, train_Y = func_load_dataset()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/output_53_0.png" alt="output_53_0"></p><h3 id="overwrite-dnn-model"><a href="#overwrite-dnn-model" class="headerlink" title="overwrite dnn model"></a>overwrite dnn model</h3><p>ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>Mini-batch <strong>Gradient Descent</strong>: it will call your function:<ul><li><code>update_parameters_with_gd()</code></li></ul></li><li>Mini-batch <strong>Momentum</strong>: it will call your functions:<ul><li><code>initialize_velocity()</code> and <code>update_parameters_with_momentum()</code></li></ul></li><li>Mini-batch <strong>Adam</strong>: it will call your functions:<ul><li><code>initialize_adam()</code> and <code>update_parameters_with_adam()</code></li></ul></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layer_dnn_model(X, Y, layer_dims, optimizer, lr=0.0007, mini_batch_size=64, beta=0.9,                           beta1=0.9, beta2=0.999, epsilon=1e-8, num_epochs=10000, print_cost=True):    """    å¤šå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    Arguments:    X -- input data, of shape (2, number of examples)    Y -- true "label" vector (1 for blue dot / 0 for red dot), of shape (1, number of examples)    layers_dims -- python list, containing the size of each layer    learning_rate -- the learning rate, scalar.    mini_batch_size -- the size of a mini batch    beta -- Momentum hyperparameter    beta1 -- Exponential decay hyperparameter for the past gradients estimates     beta2 -- Exponential decay hyperparameter for the past squared gradients estimates     epsilon -- hyperparameter preventing division by zero in Adam updates    num_epochs -- number of epochs    print_cost -- True to print the cost every 1000 epochs    Returns:    parameters -- python dictionary containing your updated parameters     """    seed = 10#     np.random.seed(seed)    L = len(layer_dims)    t = 0    costs = []#     m = X.shape[1]    # å‚æ•°åˆå§‹åŒ–    parameters = func_L_layers_initialize_parameters(layer_dims, seed=3)    # initialize the optimizer    if optimizer == 'gd':        pass    elif optimizer == 'momentum':        v = func_initialize_velocity(parameters)    elif optimizer == 'adam':        v, s = func_initialize_adam(parameters)    else:        raise ValueError('error optimizer setting!')    # loop    for epoch in range(num_epochs):        # æ¯ä¸ªepochéšæœºç”Ÿæˆminibatch        seed += 1        mini_batches = func_random_mini_batches(X, Y, mini_batch_size, seed)        for mini_batch in mini_batches:            (mini_batch_X, mini_batch_Y) = mini_batch            # å‰å‘ä¼ æ’­            AL, caches = func_L_model_forward(mini_batch_X, parameters)            # è®¡ç®—æŸå¤±            cost = func_compute_cost(AL, mini_batch_Y)            # åå‘ä¼ æ’­            grads = func_L_model_backward(AL, mini_batch_Y, caches)            # æ›´æ–°å‚æ•°            if optimizer == 'gd':                parameters = func_update_parameters(parameters, grads, lr)            elif optimizer == 'momentum':                parameters, v = func_update_parameters_with_momentum(parameters, grads, v, beta, lr)            elif optimizer == 'adam':                t += 1                parameters, v, s = func_update_parameters_with_adam(parameters, grads, v, s, t, lr, beta1, beta2, epsilon)        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 1000 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))        if epoch % 100 == 0:            costs.append(cost)    return parameters, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="mini-batch-gradient-descent"><a href="#mini-batch-gradient-descent" class="headerlink" title="mini-batch gradient descent"></a>mini-batch gradient descent</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">layer_dims = [train_X.shape[0], 5, 2, 1]lr=0.0007<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, optimizer='gd', lr=lr)func_plot_cost(costs, lr=lr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>cost after epoch 0: 0.6907355122911127cost after epoch 1000: 0.6852725328458241cost after epoch 2000: 0.6470722240719001cost after epoch 3000: 0.6195245549970403cost after epoch 4000: 0.5765844355950943cost after epoch 5000: 0.6072426395968578cost after epoch 6000: 0.5294033317684573cost after epoch 7000: 0.4607682398593011cost after epoch 8000: 0.465586082399045cost after epoch 9000: 0.46451797221676827</code></pre><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/output_58_1.png" alt="output_58_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred = func_predict(train_X, train_Y, parameters)# Plot decision boundaryplt.title("Model with Gradient Descent optimization")axes = plt.gca()axes.set_xlim([-1.5,2.5])axes.set_ylim([-1,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>acc: 0.7966666666666666</code></pre><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/output_59_1.png" alt="output_59_1"></p><h3 id="mini-batch-gradient-descent-with-momentum"><a href="#mini-batch-gradient-descent-with-momentum" class="headerlink" title="mini-batch gradient descent with momentum"></a>mini-batch gradient descent with momentum</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">layer_dims = [train_X.shape[0], 5, 2, 1]lr=0.0007<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, optimizer='momentum', lr=lr)func_plot_cost(costs, lr=lr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>cost after epoch 0: 0.6907412988351506cost after epoch 1000: 0.6853405261267576cost after epoch 2000: 0.6471448370095255cost after epoch 3000: 0.6195943032076023cost after epoch 4000: 0.576665034407302cost after epoch 5000: 0.607323821900647cost after epoch 6000: 0.5294761758786997cost after epoch 7000: 0.46093619004872377cost after epoch 8000: 0.4657800937012721cost after epoch 9000: 0.4647395967922749</code></pre><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/output_62_1.png" alt="output_62_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred = func_predict(train_X, train_Y, parameters)# Plot decision boundaryplt.title("Model with momentum")axes = plt.gca()axes.set_xlim([-1.5,2.5])axes.set_ylim([-1,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>acc: 0.7966666666666666</code></pre><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/output_63_1.png" alt="output_63_1"></p><h3 id="mini-batch-with-adam"><a href="#mini-batch-with-adam" class="headerlink" title="mini-batch with adam"></a>mini-batch with adam</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">layer_dims = [train_X.shape[0], 5, 2, 1]lr=0.0007<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, optimizer='adam', lr=lr)func_plot_cost(costs, lr=lr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>cost after epoch 0: 0.6905522282919487cost after epoch 1000: 0.1855671862856554cost after epoch 2000: 0.15085206145242497cost after epoch 3000: 0.0744535775981412cost after epoch 4000: 0.1259357502178564cost after epoch 5000: 0.10423511812705896cost after epoch 6000: 0.10055245705694958cost after epoch 7000: 0.031601421955873635cost after epoch 8000: 0.11170898323416338cost after epoch 9000: 0.19764808192436198</code></pre><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/output_66_1.png" alt="output_66_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred = func_predict(train_X, train_Y, parameters)# Plot decision boundaryplt.title("Model with adam")axes = plt.gca()axes.set_xlim([-1.5,2.5])axes.set_ylim([-1,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>acc: 0.94</code></pre><p><img src="/2021/11/08/shen-du-xue-xi-ng-zhi-you-hua-fang-fa-shi-jian/output_67_1.png" alt="output_67_1"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li>momentumæ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯å¯¹è¾ƒå°çš„lrå’Œå°æ•°æ®é›†ï¼Œå½±å“ç”šå¾®</li><li>adamæ”¶æ•›æ›´å¿«ï¼Œé€šå¸¸è¡¨ç°å¾ˆå¥½ï¼ˆä¸æ€ä¹ˆè°ƒå‚ï¼ˆé™¤äº†lrï¼‰çš„æƒ…å†µä¸‹ï¼‰</li></ol><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></font></caption></font>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š4</title>
      <link href="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/"/>
      <url>/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/</url>
      
        <content type="html"><![CDATA[<h1 id="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W5"><a href="#å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W5" class="headerlink" title="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W5"></a>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL2W5</h1><ul><li>Improving Deep Neural Networks</li><li>åŠ å¼ºæ·±åº¦ç½‘ç»œæ€§èƒ½çš„ä¸€äº›æŠ€å·§</li><li>å‚æ•°åˆå§‹åŒ–æŠ€å·§</li><li>æ­£åˆ™åŒ–æŠ€å·§ï¼Œl2, dropout</li><li>æ¢¯åº¦æ£€éªŒ</li></ul><h2 id="HWå‚è€ƒ"><a href="#HWå‚è€ƒ" class="headerlink" title="HWå‚è€ƒ"></a>HWå‚è€ƒ</h2><ol><li><a href="https://mooc.study.163.com/university/deeplearning_ai#/c" target="_blank" rel="noopener">è§†é¢‘é“¾æ¥</a></li><li><a href="https://github.com/suqi/deeplearning_andrewng/tree/master/Course2-DL-tuning/week5" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥</a></li></ol><h2 id="æ³¨æ„ä½¿ç”¨numpyçš„é—®é¢˜ï¼š"><a href="#æ³¨æ„ä½¿ç”¨numpyçš„é—®é¢˜ï¼š" class="headerlink" title="æ³¨æ„ä½¿ç”¨numpyçš„é—®é¢˜ï¼š"></a>æ³¨æ„ä½¿ç”¨numpyçš„é—®é¢˜ï¼š</h2><ol><li><a href="https://stackoverflow.com/questions/21610198/runtimewarning-divide-by-zero-encountered-in-log" target="_blank" rel="noopener">RuntimeWarning: divide by zero encountered in log</a></li><li><a href="https://stackoverflow.com/questions/27842884/numpy-invalid-value-encountered-in-true-divide" target="_blank" rel="noopener">numpy: Invalid value encountered in true_divide</a></li></ol><h2 id="å¯¼å…¥æ¨¡å—"><a href="#å¯¼å…¥æ¨¡å—" class="headerlink" title="å¯¼å…¥æ¨¡å—"></a>å¯¼å…¥æ¨¡å—</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import numpy as npimport matplotlib.pyplot as pltimport h5pyimport scipyimport sklearnimport sklearn.datasetsimport copy%matplotlib inlineplt.rcParams['figure.figsize'] = (7.0, 4.0)plt.rcParams['image.interpolation'] = 'nearest'plt.rcParams['image.cmap'] = 'gray'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¥ç»ç½‘ç»œç»“æ„å°è£…"><a href="#ç¥ç»ç½‘ç»œç»“æ„å°è£…" class="headerlink" title="ç¥ç»ç½‘ç»œç»“æ„å°è£…"></a>ç¥ç»ç½‘ç»œç»“æ„å°è£…</h2><h3 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_sigmoid(Z):    """    Implements the sigmoid activation in numpy    Arguments:    Z -- numpy array of any shape    Returns:    A -- output of sigmoid(z), same shape as Z    cache -- returns Z as well, useful during backpropagation    """    A = 1/(1+np.exp(-Z))    cache = Z    return A, cachedef func_relu(Z):    """    Implement the RELU function.    Arguments:    Z -- Output of the linear layer, of any shape    Returns:    A -- Post-activation parameter, of the same shape as Z    cache -- a python dictionary containing "A" ; stored for computing the backward pass efficiently    """    A = np.maximum(0,Z)    assert(A.shape == Z.shape)    cache = Z     return A, cachedef func_relu_backward(dA, cache):    """    Implement the backward propagation for a single RELU unit.    Arguments:    dA -- post-activation gradient, of any shape    cache -- 'Z' where we store for computing backward propagation efficiently    Returns:    dZ -- Gradient of the cost with respect to Z    """    Z = cache    dZ = np.array(dA, copy=True) # just converting dz to a correct object.    # When z <= 0, you should set dz to 0 as well.     dZ[Z <= 0] = 0    assert (dZ.shape == Z.shape)    return dZdef func_sigmoid_backward(dA, cache):    """    Implement the backward propagation for a single SIGMOID unit.    Arguments:    dA -- post-activation gradient, of any shape    cache -- 'Z' where we store for computing backward propagation efficiently    Returns:    dZ -- Gradient of the cost with respect to Z    """    Z = cache    s = 1/(1+np.exp(-Z))    dZ = dA * s * (1-s)    assert (dZ.shape == Z.shape)    return dZ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‚æ•°åˆå§‹åŒ–"><a href="#å‚æ•°åˆå§‹åŒ–" class="headerlink" title="å‚æ•°åˆå§‹åŒ–"></a>å‚æ•°åˆå§‹åŒ–</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layers_initialize_parameters(layer_dims, seed=1):    """    Lå±‚ç¥ç»ç½‘ç»œå‚æ•°åˆå§‹åŒ–    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param seed: éšæœºç§å­    :return:         parameters -- python dictionary containing your parameters "W1", "b1", ..., "WL", "bL":        Wl -- weight matrix of shape (layer_dims[l], layer_dims[l-1])        bl -- bias vector of shape (layer_dims[l], 1)    """    np.random.seed(seed)    parameters = {}    L = len(layer_dims)    # è¿™é‡Œ/ np.sqrt(layer_dims[layer-1])å¾ˆé‡è¦ï¼Œå¦‚æœè¿˜æ˜¯*0.01ï¼Œä¼šå¯¼è‡´æ¨¡å‹costé™ä¸ä¸‹å»    for layer in range(1, L):        parameters['W' + str(layer)] = np.random.randn(layer_dims[layer], layer_dims[layer-1]) / np.sqrt(layer_dims[layer-1]) # * 0.01        parameters['b' + str(layer)] = np.zeros((layer_dims[layer], 1))        assert(parameters['W' + str(layer)].shape == (layer_dims[layer], layer_dims[layer-1]))        assert(parameters['b' + str(layer)].shape == (layer_dims[layer], 1))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_forward(A, W, b):    """    linear forward    :param A:    :param W:    :param b:    :return Z,chche:        Z -- the input of the activation function, also called pre-activation parameter         cache -- a python dictionary containing "A", "W" and "b" ; stored for computing the backward pass efficiently    """    Z = np.dot(W, A) + b    assert(Z.shape == (W.shape[0], A.shape[1]))    cache = (A, W, b)    return Z, cachedef func_linear_activation_forward(A_prev, W, b, activation):    """    Implement the forward propagation for the LINEAR->ACTIVATION layer    :param A_prev: activations from previous layer (or input data): (size of previous layer, number of examples)    :param W: weights matrix: numpy array of shape (size of current layer, size of previous layer)    :param b: bias vector, numpy array of shape (size of the current layer, 1)    :param activation: the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :return:        A -- the output of the activation function, also called the post-activation value         cache -- a python dictionary containing "linear_cache" and "activation_cache";                 stored for computing the backward pass efficiently    """    Z, linear_cache = func_linear_forward(A_prev, W, b)    if activation == 'sigmoid':        A, activation_cache = func_sigmoid(Z)    elif activation == 'relu':        A, activation_cache = func_relu(Z)    else:        raise ValueError('activation param')    assert(A.shape == (W.shape[0], A_prev.shape[1]))    cache = (linear_cache, activation_cache)    return A, cachedef func_L_model_forward(X, parameters):    """    Implement forward propagation for the [LINEAR->RELU]*(L-1)->LINEAR->SIGMOID computation    :param X -- data, numpy array of shape (input size, number of examples)    :param parameters -- output of initialize_parameters_deep()    :return:        AL -- last post-activation value        caches -- list of caches containing:                    every cache of linear_relu_forward() (there are L-1 of them, indexed from 0 to L-2)                    the cache of linear_sigmoid_forward() (there is one, indexed L-1)    """    caches = []    A = X    L = len(parameters) // 2    for layer in range(1, L):        A_prev = A        W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]        A, cache = func_linear_activation_forward(A_prev, W, b, 'relu')        caches.append(cache)    A_prev = A    layer = L    W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]    A, cache = func_linear_activation_forward(A_prev, W, b, 'sigmoid')    caches.append(cache)    assert(A.shape == (1, X.shape[1]))    return A, caches<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="compute-cost"><a href="#compute-cost" class="headerlink" title="compute cost"></a>compute cost</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_compute_cost(AL, Y):    """    Implement the cost function defined by equation (7).    :param AL -- probability vector corresponding to your label predictions, shape (1, number of examples)    :param Y -- true "label" vector (for example: containing 0 if non-cat, 1 if cat), shape (1, number of examples)    :return:        cost -- cross-entropy cost    """    m = Y.shape[1]    # todo RuntimeWarning: divide by zero encountered in log    AL = np.clip(AL, 1e-10, 1-1e-10)#     Compute loss from aL and y.#     logprobs = np.multiply(-np.log(AL), Y) + np.multiply(-np.log(1 - AL), 1 - Y)#     cost = 1./m * np.nansum(logprobs)#     cost = -1 / m * np.sum(np.multiply(Y, np.log(AL))+np.multiply(1-Y, np.log(1-AL)))    cost = (1./m) * (-np.dot(Y,np.log(AL).T) - np.dot(1-Y, np.log(1-AL).T))    cost = np.squeeze(cost)      # To make sure your cost's shape is what we expect (e.g. this turns [[17]] into 17).    assert(cost.shape == ())    return cost<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="backward"><a href="#backward" class="headerlink" title="backward"></a>backward</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_backward(dZ, cache):    """    Implement the linear portion of backward propagation for a single layer (layer l)    :param dZ -- Gradient of the cost with respect to the linear output (of current layer l)    :param cache -- tuple of values (A_prev, W, b) coming from the forward propagation in the current layer    :return:        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    A_prev, W, b = cache    m = A_prev.shape[1]    dW = 1. / m * np.dot(dZ, A_prev.T)    db = 1. / m * np.sum(dZ, axis=1, keepdims=True)  # axis=1æ˜¯è¡Œè®°å½•æ±‚å’Œ    dA_prev = np.dot(W.T, dZ)    assert(dW.shape == W.shape)    assert(db.shape == b.shape)    assert(dA_prev.shape == A_prev.shape)    return dA_prev, dW, dbdef func_linear_activation_backward(dA, cache, activation):    """    Implement the backward propagation for the LINEAR->ACTIVATION layer.    :param dA -- post-activation gradient for current layer l     :param cache -- tuple of values (linear_cache, activation_cache) we store for computing backward propagation efficiently    :param activation -- the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :returns        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    linear_cache, activation_cache = cache    if activation == 'relu':        dZ = func_relu_backward(dA, activation_cache)    elif activation == 'sigmoid':        dZ = func_sigmoid_backward(dA, activation_cache)    else:        raise ValueError('activation param')    dA_prev, dW, db = func_linear_backward(dZ, linear_cache)    return dA_prev, dW, dbdef func_L_model_backward(AL, Y, caches):    """    Implement the backward propagation for the [LINEAR->RELU] * (L-1) -> LINEAR -> SIGMOID group    :param AL -- probability vector, output of the forward propagation (L_model_forward())    :param Y -- true "label" vector (containing 0 if non-cat, 1 if cat)    :param caches -- list of caches containing:                    every cache of linear_activation_forward() with "relu" (it's caches[l], for l in range(L-1) i.e l = 0...L-2)                    the cache of linear_activation_forward() with "sigmoid" (it's caches[L-1])    :return:        grads -- A dictionary with the gradients                 grads["dA" + str(l)] = ...                  grads["dW" + str(l)] = ...                 grads["db" + str(l)] = ...     """    grads = {}    L = len(caches)    m = AL.shape[1]    Y = Y.reshape(AL.shape)    # todo divide by zero encountered in true_divide    dAL = - (np.divide(Y, AL, where=AL!=0) - np.divide(1-Y, 1-AL, where=(1-AL)!=0))#     dAL = - (np.divide(Y, AL) - np.divide(1-Y, 1-AL))    cur_cache = caches[L-1]    grads['dA' + str(L-1)], grads['dW'+str(L)], grads['db'+str(L)] = func_linear_activation_backward(dAL, cur_cache, activation='sigmoid')    for layer in reversed(range(L-1)):        cur_cache = caches[layer]        dA_prev_tmp, dW_tmp, db_tmp = func_linear_activation_backward(grads["dA"+str(layer+1)], cur_cache, activation='relu')        grads['dA'+str(layer)] = dA_prev_tmp        grads['dW'+str(layer+1)] = dW_tmp        grads['db'+str(layer+1)] = db_tmp#     current_cache = caches[L-1]#     grads["dA" + str(L)], grads["dW" + str(L)], grads["db" + str(L)] = func_linear_activation_backward(dAL, current_cache, activation = "sigmoid")#     for l in reversed(range(L-1)):#         # lth layer: (RELU -> LINEAR) gradients.#         current_cache = caches[l]#         dA_prev_temp, dW_temp, db_temp = func_linear_activation_backward(grads["dA" + str(l + 2)], current_cache, activation = "relu")#         grads["dA" + str(l + 1)] = dA_prev_temp#         grads["dW" + str(l + 1)] = dW_temp#         grads["db" + str(l + 1)] = db_temp    return grads<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="update-parameters"><a href="#update-parameters" class="headerlink" title="update parameters"></a>update parameters</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_update_parameters(parameters, grads, lr):    """    Update parameters using gradient descent    :param parameters -- python dictionary containing your parameters     :param grads -- python dictionary containing your gradients, output of L_model_backward    :param lr: learning rate    :return:        parameters -- python dictionary containing your updated parameters                       parameters["W" + str(l)] = ...                       parameters["b" + str(l)] = ...    """    L = len(parameters) // 2    for layer in range(1, L+1):        parameters['W'+str(layer)] = parameters['W'+str(layer)] - lr * grads['dW' + str(layer)]        parameters['b'+str(layer)] = parameters['b'+str(layer)] - lr * grads['db' + str(layer)]    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="predict"><a href="#predict" class="headerlink" title="predict"></a>predict</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_predict(X, y, parameters):    """    This function is used to predict the results of a  L-layer neural network.    :param X -- data set of examples you would like to label    :param parameters -- parameters of the trained model    :return:        p -- predictions for the given dataset X    """    m = X.shape[1]    L = len(parameters) // 2    p = np.zeros((1, m))    probas, caches = func_L_model_forward(X, parameters)    for i in range(probas.shape[1]):        if probas[0, i] > 0.5:            p[0, i] = 1        else:            p[0, i] = 0    print('acc: {}'.format(np.sum(p==y)/m))    return p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="dnn-model"><a href="#dnn-model" class="headerlink" title="dnn model"></a>dnn model</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layer_dnn_model(X, Y, layer_dims, lr=0.001, num_epochs=10000, print_cost=False):    """    å¤šå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    :param X:    :param Y:    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param lr: learning rate    :param num_epochs:    :param print_cost:    :return params    """    np.random.seed(1)    costs = []#     m = X.shape[1]    # å‚æ•°åˆå§‹åŒ–    parameters = func_L_layers_initialize_parameters(layer_dims)    # loop    for epoch in range(num_epochs):        # å‰å‘ä¼ æ’­        AL, caches = func_L_model_forward(X, parameters)        # è®¡ç®—æŸå¤±        cost = func_compute_cost(AL, Y)        # åå‘ä¼ æ’­        grads = func_L_model_backward(AL, Y, caches)        # æ›´æ–°å‚æ•°        parameters = func_update_parameters(parameters, grads, lr)        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 100 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))        if epoch % 100 == 0:            costs.append(cost)    return parameters, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…¶ä»–é€šç”¨å‡½æ•°"><a href="#å…¶ä»–é€šç”¨å‡½æ•°" class="headerlink" title="å…¶ä»–é€šç”¨å‡½æ•°"></a>å…¶ä»–é€šç”¨å‡½æ•°</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">def load_cat_dataset():    train_dataset = h5py.File('./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š1/train_catvnoncat.h5', "r")    train_set_x_orig = np.array(train_dataset["train_set_x"][:]) # your train set features    train_set_y_orig = np.array(train_dataset["train_set_y"][:]) # your train set labels    test_dataset = h5py.File('./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š1/test_catvnoncat.h5', "r")    test_set_x_orig = np.array(test_dataset["test_set_x"][:]) # your test set features    test_set_y_orig = np.array(test_dataset["test_set_y"][:]) # your test set labels    classes = np.array(test_dataset["list_classes"][:]) # the list of classes    train_set_y = train_set_y_orig.reshape((1, train_set_y_orig.shape[0]))    test_set_y = test_set_y_orig.reshape((1, test_set_y_orig.shape[0]))    train_set_x_orig = train_set_x_orig.reshape(train_set_x_orig.shape[0], -1).T    test_set_x_orig = test_set_x_orig.reshape(test_set_x_orig.shape[0], -1).T    train_set_x = train_set_x_orig/255    test_set_x = test_set_x_orig/255    return train_set_x, train_set_y, test_set_x, test_set_y, classes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def load_dataset():    np.random.seed(1)    train_X, train_Y = sklearn.datasets.make_circles(n_samples=300, noise=.05)    np.random.seed(2)    test_X, test_Y = sklearn.datasets.make_circles(n_samples=100, noise=.05)    # Visualize the data    plt.scatter(train_X[:, 0], train_X[:, 1], c=train_Y, s=40, cmap=plt.cm.Spectral);    train_X = train_X.T    train_Y = train_Y.reshape((1, train_Y.shape[0]))    test_X = test_X.T    test_Y = test_Y.reshape((1, test_Y.shape[0]))    return train_X, train_Y, test_X, test_Y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def load_planar_dataset(seed):    np.random.seed(seed)    m = 400 # number of examples    N = int(m/2) # number of points per class    D = 2 # dimensionality    X = np.zeros((m,D)) # data matrix where each row is a single example    Y = np.zeros((m,1), dtype='uint8') # labels vector (0 for red, 1 for blue)    a = 4 # maximum ray of the flower    for j in range(2):        ix = range(N*j,N*(j+1))        t = np.linspace(j*3.12,(j+1)*3.12,N) + np.random.randn(N)*0.2 # theta        r = a*np.sin(4*t) + np.random.randn(N)*0.2 # radius        X[ix] = np.c_[r*np.sin(t), r*np.cos(t)]        Y[ix] = j    X = X.T    Y = Y.T    return X, Y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def load_planar_dataset(randomness, seed):    np.random.seed(seed)    m = 50    N = int(m/2) # number of points per class    D = 2 # dimensionality    X = np.zeros((m,D)) # data matrix where each row is a single example    Y = np.zeros((m,1), dtype='uint8') # labels vector (0 for red, 1 for blue)    a = 2 # maximum ray of the flower    for j in range(2):        ix = range(N*j,N*(j+1))        if j == 0:            t = np.linspace(j, 4*3.1415*(j+1),N) #+ np.random.randn(N)*randomness # theta            r = 0.3*np.square(t) + np.random.randn(N)*randomness # radius        if j == 1:            t = np.linspace(j, 2*3.1415*(j+1),N) #+ np.random.randn(N)*randomness # theta            r = 0.2*np.square(t) + np.random.randn(N)*randomness # radius        X[ix] = np.c_[r*np.cos(t), r*np.sin(t)]        Y[ix] = j    X = X.T    Y = Y.T    return X, Y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_predict_dec(parameters, X):    """    Used for plotting decision boundary.    Arguments:    parameters -- python dictionary containing your parameters     X -- input data of size (m, K)    Returns    predictions -- vector of predictions of our model (red: 0 / blue: 1)    """    # Predict using forward propagation and a classification threshold of 0.5    AL, cache = func_L_model_forward(X, parameters)    predictions = (AL>0.5)    return predictions<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_plot_decision_boundary(model, X, y):    # Set min and max values and give it some padding    x_min, x_max = X[0, :].min() - 1, X[0, :].max() + 1    y_min, y_max = X[1, :].min() - 1, X[1, :].max() + 1    h = 0.01    # Generate a grid of points with distance h between them    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))    # Predict the function value for the whole grid    Z = model(np.c_[xx.ravel(), yy.ravel()])    Z = Z.reshape(xx.shape)    # Plot the contour and training examples    plt.contourf(xx, yy, Z, cmap=plt.cm.Spectral)    plt.ylabel('x2')    plt.xlabel('x1')    plt.scatter(X[0, :], X[1, :], c=y, cmap=plt.cm.Spectral)    plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€šè¿‡å‚æ•°åˆå§‹åŒ–æŠ€å·§æå‡dnn"><a href="#é€šè¿‡å‚æ•°åˆå§‹åŒ–æŠ€å·§æå‡dnn" class="headerlink" title="é€šè¿‡å‚æ•°åˆå§‹åŒ–æŠ€å·§æå‡dnn"></a>é€šè¿‡<code>å‚æ•°åˆå§‹åŒ–</code>æŠ€å·§æå‡dnn</h2><ul><li>ä¸€ä¸ªå¥½çš„å‚æ•°åˆå§‹åŒ–é€‰æ‹©èƒ½å¤Ÿï¼š<ol><li>Speed up the convergence of gradient descent</li><li>Increase the odds of gradient descent converging to a lower training (and generalization) error</li></ol></li></ul><h3 id="1-zero-initialization"><a href="#1-zero-initialization" class="headerlink" title="1-zero initialization"></a>1-zero initialization</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_initialize_parameters_zeros(layer_dims):    """    zero initialization    :param layer_dims -- python array (list) containing the size of each layer.    :return:        parameters -- python dictionary containing your parameters "W1", "b1", ..., "WL", "bL":            W1 -- weight matrix of shape (layers_dims[1], layers_dims[0])            b1 -- bias vector of shape (layers_dims[1], 1)            ...            WL -- weight matrix of shape (layers_dims[L], layers_dims[L-1])            bL -- bias vector of shape (layers_dims[L], 1)    """    parameters = {}    L = len(layer_dims)    for layer in range(1, L):        parameters['W'+str(layer)] = np.zeros((layer_dims[layer], layer_dims[layer-1]))        parameters['b'+str(layer)] = np.zeros((layer_dims[layer], 1))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_initialize_parameters_zeros([3,2,1])print(parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[0., 0., 0.],       [0., 0., 0.]]), &#39;b1&#39;: array([[0.],       [0.]]), &#39;W2&#39;: array([[0., 0.]]), &#39;b2&#39;: array([[0.]])}</code></pre><h3 id="2-random-initialization"><a href="#2-random-initialization" class="headerlink" title="2-random initialization"></a>2-random initialization</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_initialize_parameters_random(layer_dims):    """    random initialization    :param layer_dims -- python array (list) containing the size of each layer.    :return:        parameters -- python dictionary containing your parameters "W1", "b1", ..., "WL", "bL":            W1 -- weight matrix of shape (layers_dims[1], layers_dims[0])            b1 -- bias vector of shape (layers_dims[1], 1)            ...            WL -- weight matrix of shape (layers_dims[L], layers_dims[L-1])            bL -- bias vector of shape (layers_dims[L], 1)    """    np.random.seed(3)    parameters = {}    L = len(layer_dims)    for layer in range(1, L):        parameters['W'+str(layer)] = np.random.randn(layer_dims[layer], layer_dims[layer-1]) * 10        parameters['b'+str(layer)] = np.zeros((layer_dims[layer], 1))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_initialize_parameters_random([3,2,1])print(parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[ 17.88628473,   4.36509851,   0.96497468],       [-18.63492703,  -2.77388203,  -3.54758979]]), &#39;b1&#39;: array([[0.],       [0.]]), &#39;W2&#39;: array([[-0.82741481, -6.27000677]]), &#39;b2&#39;: array([[0.]])}</code></pre><h3 id="3-He-initialization"><a href="#3-He-initialization" class="headerlink" title="3-He initialization"></a>3-He initialization</h3><p>This function is similar to the previous <code>initialize_parameters_random(...)</code>. The only difference is that instead of multiplying <code>np.random.randn(..,..)</code> by 10, you will multiply it by $\sqrt{\frac{2}{\text{dimension of the previous layer}}}$, which is what He initialization recommends for layers with a ReLU activation. </p><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_initialize_parameters_he(layer_dims):    """    he initialization    :param layer_dims -- python array (list) containing the size of each layer.    :return:        parameters -- python dictionary containing your parameters "W1", "b1", ..., "WL", "bL":            W1 -- weight matrix of shape (layers_dims[1], layers_dims[0])            b1 -- bias vector of shape (layers_dims[1], 1)            ...            WL -- weight matrix of shape (layers_dims[L], layers_dims[L-1])            bL -- bias vector of shape (layers_dims[L], 1)    """    np.random.seed(3)    parameters = {}    L = len(layer_dims)    for layer in range(1, L):        parameters['W'+str(layer)] = np.random.randn(layer_dims[layer], layer_dims[layer-1]) * np.sqrt(2/layer_dims[layer-1])        parameters['b'+str(layer)] = np.zeros((layer_dims[layer], 1))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_initialize_parameters_he([2,4,1])print(parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[ 1.78862847,  0.43650985],       [ 0.09649747, -1.8634927 ],       [-0.2773882 , -0.35475898],       [-0.08274148, -0.62700068]]), &#39;b1&#39;: array([[0.],       [0.],       [0.],       [0.]]), &#39;W2&#39;: array([[-0.03098412, -0.33744411, -0.92904268,  0.62552248]]), &#39;b2&#39;: array([[0.]])}</code></pre><h3 id="overwrite-dnn-model"><a href="#overwrite-dnn-model" class="headerlink" title="overwrite dnn model"></a>overwrite dnn model</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layer_dnn_model(X, Y, layer_dims, lr=0.01, num_epochs=15000, print_cost=True, initialization=None):    """    å¤šå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    :param X:    :param Y:    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param lr: learning rate    :param num_epochs:    :param print_cost:    :param initialization : flag to choose which initialization to use ("zeros","random" or "he")    :return params    """#     np.random.seed(1)    costs = []#     m = X.shape[1]    # å‚æ•°åˆå§‹åŒ–    if initialization == 'zeros':        parameters = func_initialize_parameters_zeros(layer_dims)    elif initialization == 'random':        parameters = func_initialize_parameters_random(layer_dims)    elif initialization == 'he':        parameters = func_initialize_parameters_he(layer_dims)    else:        parameters = func_L_layers_initialize_parameters(layer_dims)#         raise ValueError('error initialization set!')    print('parameters: \n', parameters)    # loop    for epoch in range(num_epochs):        # å‰å‘ä¼ æ’­        AL, caches = func_L_model_forward(X, parameters)        # è®¡ç®—æŸå¤±        cost = func_compute_cost(AL, Y)        # åå‘ä¼ æ’­        grads = func_L_model_backward(AL, Y, caches)        # æ›´æ–°å‚æ•°        parameters = func_update_parameters(parameters, grads, lr)        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 1000 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))#             print('AL:', AL)        if epoch % 1000 == 0:            costs.append(cost)    return parameters, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ"><a href="#åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ" class="headerlink" title="åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ"></a>åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ</h3><h4 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_X, train_Y, test_X, test_Y = load_dataset()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_39_0.png" alt="png"></p><p>â€‹    <img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_39_0.png" alt="output_39_0"></p><h4 id="è®¾ç½®å‚æ•°"><a href="#è®¾ç½®å‚æ•°" class="headerlink" title="è®¾ç½®å‚æ•°"></a>è®¾ç½®å‚æ•°</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">layer_dims = [train_X.shape[0], 10, 5, 1]print(layer_dims)lr = 0.01num_epochs = 15000print_cost=True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[2, 10, 5, 1]</code></pre><h4 id="æ­£å¸¸åˆå§‹åŒ–"><a href="#æ­£å¸¸åˆå§‹åŒ–" class="headerlink" title="æ­£å¸¸åˆå§‹åŒ–"></a>æ­£å¸¸åˆå§‹åŒ–</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost)print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>parameters:  {&#39;W1&#39;: array([[ 1.14858562, -0.43257711],       [-0.37347383, -0.75870339],       [ 0.6119356 , -1.62743362],       [ 1.23376823, -0.53825456],       [ 0.22559471, -0.17633148],       [ 1.03386644, -1.45673947],       [-0.22798339, -0.27156744],       [ 0.80169606, -0.77774057],       [-0.12192515, -0.62073964],       [ 0.02984963,  0.41211259]]), &#39;b1&#39;: array([[0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.]]), &#39;W2&#39;: array([[-0.34804634,  0.36199342,  0.28510802,  0.15890266,  0.28487566,        -0.21621373, -0.0388613 , -0.29591628, -0.08471365,  0.16771312],       [-0.21872233, -0.12546448, -0.21730309, -0.26727749, -0.21226666,        -0.0040049 , -0.35332456,  0.07412875,  0.52487553,  0.23465497],       [-0.06066373, -0.28069292, -0.2362722 ,  0.53520114,  0.01606682,        -0.20143571,  0.06037278,  0.66415899,  0.0379976 ,  0.19517676],       [ 0.09492219, -0.11139118, -0.36129598, -0.11047187, -0.06605816,         0.18550654,  0.26530985,  0.29444033,  0.09031064,  0.27990621],       [-0.23856158,  0.3961917 ,  0.16220265, -0.09426523,  0.154483  ,        -0.02389787,  0.35785263,  0.48060828,  0.69113963, -0.44161092]]), &#39;b2&#39;: array([[0.],       [0.],       [0.],       [0.],       [0.]]), &#39;W3&#39;: array([[-0.64582733, -0.22560399,  0.07157075,  0.39183465,  0.14115624]]), &#39;b3&#39;: array([[0.]])}cost after epoch 0: 0.6960659020466242cost after epoch 1000: 0.6892005439078841cost after epoch 2000: 0.6850049132576146cost after epoch 3000: 0.6798306324866793cost after epoch 4000: 0.6729361200642482cost after epoch 5000: 0.6578134850604765cost after epoch 6000: 0.6308733720773914cost after epoch 7000: 0.5847718750117528cost after epoch 8000: 0.512240914977723cost after epoch 9000: 0.41737297954575764cost after epoch 10000: 0.32777046260752574cost after epoch 11000: 0.25687394311562106cost after epoch 12000: 0.20428449077110009cost after epoch 13000: 0.16602627481234417cost after epoch 14000: 0.13073861742391021on the train set:acc: 0.99on the test set:acc: 0.94</code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_43_1.png" alt="output_43_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.title("Model with np.sqrt(layer_dims[layer-1]) initialization")axes = plt.gca()axes.set_xlim([-1.5,1.5])axes.set_ylim([-1.5,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_44_0.png" alt="output_44_0"></p><h4 id="zero-åˆå§‹åŒ–"><a href="#zero-åˆå§‹åŒ–" class="headerlink" title="zero åˆå§‹åŒ–"></a>zero åˆå§‹åŒ–</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost, initialization='zeros')print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>parameters:  {&#39;W1&#39;: array([[0., 0.],       [0., 0.],       [0., 0.],       [0., 0.],       [0., 0.],       [0., 0.],       [0., 0.],       [0., 0.],       [0., 0.],       [0., 0.]]), &#39;b1&#39;: array([[0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.]]), &#39;W2&#39;: array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]]), &#39;b2&#39;: array([[0.],       [0.],       [0.],       [0.],       [0.]]), &#39;W3&#39;: array([[0., 0., 0., 0., 0.]]), &#39;b3&#39;: array([[0.]])}cost after epoch 0: 0.6931471805599453cost after epoch 1000: 0.6931471805599453cost after epoch 2000: 0.6931471805599453cost after epoch 3000: 0.6931471805599453cost after epoch 4000: 0.6931471805599453cost after epoch 5000: 0.6931471805599453cost after epoch 6000: 0.6931471805599453cost after epoch 7000: 0.6931471805599453cost after epoch 8000: 0.6931471805599453cost after epoch 9000: 0.6931471805599453cost after epoch 10000: 0.6931471805599453cost after epoch 11000: 0.6931471805599453cost after epoch 12000: 0.6931471805599453cost after epoch 13000: 0.6931471805599453cost after epoch 14000: 0.6931471805599453on the train set:acc: 0.5on the test set:acc: 0.5</code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_46_1.png" alt="output_46_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.title("Model with Zeros initialization")axes = plt.gca()axes.set_xlim([-1.5,1.5])axes.set_ylim([-1.5,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_47_0.png" alt="output_47_0"></p><h4 id="random-åˆå§‹åŒ–"><a href="#random-åˆå§‹åŒ–" class="headerlink" title="random åˆå§‹åŒ–"></a>random åˆå§‹åŒ–</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost, initialization='random')# print(parameters)print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>parameters:  {&#39;W1&#39;: array([[ 17.88628473,   4.36509851],       [  0.96497468, -18.63492703],       [ -2.77388203,  -3.54758979],       [ -0.82741481,  -6.27000677],       [ -0.43818169,  -4.7721803 ],       [-13.13864753,   8.8462238 ],       [  8.81318042,  17.09573064],       [  0.50033642,  -4.04677415],       [ -5.45359948, -15.46477316],       [  9.82367434, -11.0106763 ]]), &#39;b1&#39;: array([[0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.],       [0.]]), &#39;W2&#39;: array([[-11.85046527,  -2.05649899,  14.86148355,   2.36716267,        -10.2378514 ,  -7.129932  ,   6.25244966,  -1.60513363,         -7.6883635 ,  -2.30030722],       [  7.45056266,  19.76110783, -12.44123329,  -6.26416911,         -8.03766095, -24.19083173,  -9.23792022, -10.23875761,         11.23977959,  -1.31914233],       [-16.23285446,   6.46675452,  -3.56270759, -17.43141037,         -5.96649642,  -5.8859438 ,  -8.73882298,   0.29713815,        -22.48257768,  -2.67761865],       [ 10.13183442,   8.52797841,  11.081875  ,  11.19390655,         14.87543132, -11.18300684,   8.45833407, -18.60889529,         -6.02885104, -19.14472043],       [ 10.48147512,  13.33737819,  -1.97414679,  17.74645031,         -6.7472751 ,   1.50616865,   1.52945703, -10.64195274,          4.37946611,  19.3897846 ]]), &#39;b2&#39;: array([[0.],       [0.],       [0.],       [0.],       [0.]]), &#39;W3&#39;: array([[-10.24930875,   8.99338446,  -1.54506852,  17.69627303,          4.83788348]]), &#39;b3&#39;: array([[0.]])}cost after epoch 0: 11.512925423650048cost after epoch 1000: 11.512925423650048cost after epoch 2000: 11.512925423650048cost after epoch 3000: 11.512925423650048cost after epoch 4000: 11.512925423650048cost after epoch 5000: 11.512925423650048cost after epoch 6000: 11.512925423650048cost after epoch 7000: 11.512925423650048cost after epoch 8000: 11.512925423650048cost after epoch 9000: 11.512925423650048cost after epoch 10000: 11.512925423650048cost after epoch 11000: 11.512925423650048cost after epoch 12000: 11.512925423650048cost after epoch 13000: 11.512925423650048cost after epoch 14000: 11.512925423650048on the train set:acc: 0.5on the test set:acc: 0.5</code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_49_1.png" alt="output_49_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.title("Model with random initialization")axes = plt.gca()axes.set_xlim([-1.5,1.5])axes.set_ylim([-1.5,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_50_0.png" alt="output_50_0"></p><font color="red" size="5">æ³¨æ„ï¼š</font>* è¿™é‡Œè®­ç»ƒä¸èµ·æ¥æ˜¯å› ä¸ºå‚æ•°éšæœºåˆå§‹åŒ–æ—¶ï¼Œå‚æ•°å¤ªå¤§ï¼Œå¯¼è‡´wx+bå¾ˆå¤§æˆ–å¾ˆå°‘ï¼Œåœ¨sigmoidè®¡ç®—æ—¶ï¼Œå¤„äºæ¢¯åº¦ä¸º0çš„æƒ…å†µä¸‹ï¼Œå¯¼è‡´å‚æ•°æ²¡æ³•æ›´æ–°ï¼Œå³æ¢¯åº¦æ¶ˆå¤±æƒ…å†µ#### heåˆå§‹åŒ–```pythonparameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost, initialization='he')print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()```    parameters:      {'W1': array([[ 1.78862847,  0.43650985],           [ 0.09649747, -1.8634927 ],           [-0.2773882 , -0.35475898],           [-0.08274148, -0.62700068],           [-0.04381817, -0.47721803],           [-1.31386475,  0.88462238],           [ 0.88131804,  1.70957306],           [ 0.05003364, -0.40467741],           [-0.54535995, -1.54647732],           [ 0.98236743, -1.10106763]]), 'b1': array([[0.],           [0.],           [0.],           [0.],           [0.],           [0.],           [0.],           [0.],           [0.],           [0.]]), 'W2': array([[-0.52996892, -0.09196943,  0.66462575,  0.10586273, -0.45785063,            -0.31886025,  0.27961805, -0.07178376, -0.34383407, -0.10287287],           [ 0.33319929,  0.88374361, -0.55638887, -0.28014216, -0.35945513,            -1.08184688, -0.41313235, -0.45789116,  0.50265822, -0.05899384],           [-0.72595532,  0.28920205, -0.15932913, -0.77955637, -0.26682983,            -0.26322741, -0.39081204,  0.01328842, -1.00545144, -0.11974675],           [ 0.45310941,  0.38138279,  0.49559652,  0.50060672,  0.66524951,            -0.50011927,  0.3782682 , -0.8322151 , -0.26961842, -0.85617793],           [ 0.46874582,  0.59646569, -0.08828653,  0.79364539, -0.30174732,             0.06735791,  0.0683994 , -0.47592259,  0.19585568,  0.86713753]]), 'b2': array([[0.],           [0.],           [0.],           [0.],           [0.]]), 'W3': array([[-0.6482232 ,  0.56879158, -0.09771871,  1.11921058,  0.30597462]]), 'b3': array([[0.]])}    cost after epoch 0: 0.8830537463419762    cost after epoch 1000: 0.6879825919728063    cost after epoch 2000: 0.6751286264523371    cost after epoch 3000: 0.6526117768893805    cost after epoch 4000: 0.6082958970572938    cost after epoch 5000: 0.5304944491717493    cost after epoch 6000: 0.41386458170717944    cost after epoch 7000: 0.3117803464844441    cost after epoch 8000: 0.23696215330322565    cost after epoch 9000: 0.18597287209206842    cost after epoch 10000: 0.15015556280371814    cost after epoch 11000: 0.12325079292273551    cost after epoch 12000: 0.09917746546525927    cost after epoch 13000: 0.0845705595402428    cost after epoch 14000: 0.07357895962677369    on the train set:    acc: 0.9933333333333333    on the test set:    acc: 0.96![output_53_1](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_53_1.png)```pythonplt.title("Model with he initialization")axes = plt.gca()axes.set_xlim([-1.5,1.5])axes.set_ylim([-1.5,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)```![output_54_0](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_54_0.png)### <font color="red" size="5">æ€»ç»“</font><ol><li>ä¸åŒçš„å‚æ•°åˆå§‹åŒ–å¯¼è‡´ä¸åŒçš„ç»“æœ</li><li>éšæœºå‚æ•°åˆå§‹åŒ–æ˜¯ä¸ºäº†æ‰“ç ´å¯¹ç§°æ€§ä»¥åŠç¡®ä¿å„éšè—unitså¯ä»¥å­¦ä¹ ä¸åŒçš„ç‰¹å¾</li><li>ä¸è¦åˆå§‹åŒ–å¤ªå¤§çš„å€¼ï¼Œä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±æˆ–è€…çˆ†ç‚¸</li><li>å¯¹äºreluæ¿€æ´»å‡½æ•°æ¥è¯´ï¼Œheåˆå§‹åŒ–æ–¹å¼èƒ½è¡¨ç°å¾ˆå¥½</li></ol><h2 id="é€šè¿‡æ­£åˆ™åŒ–æŠ€å·§æå‡dnn"><a href="#é€šè¿‡æ­£åˆ™åŒ–æŠ€å·§æå‡dnn" class="headerlink" title="é€šè¿‡æ­£åˆ™åŒ–æŠ€å·§æå‡dnn"></a>é€šè¿‡<code>æ­£åˆ™åŒ–</code>æŠ€å·§æå‡dnn</h2><p>Deep Learning models have so much flexibility and capacity that <strong>overfitting can be a serious problem</strong>, if the training dataset is not big enough. Sure it does well on the training set, but the learned network <strong>doesnâ€™t generalize to new examples</strong> that it has never seen!</p><h3 id="1-L2-Regularization"><a href="#1-L2-Regularization" class="headerlink" title="1-L2 Regularization"></a>1-L2 Regularization</h3><p>The standard way to avoid overfitting is called <strong>L2 regularization</strong>. It consists of appropriately modifying your cost function, from:</p><script type="math/tex; mode=display">J = -\frac{1}{m} \sum\limits_{i = 1}^{m} \large{(}\small  y^{(i)}\log\left(a^{[L](i)}\right) + (1-y^{(i)})\log\left(1- a^{[L](i)}\right) \large{)} \tag{1}</script><p>To:</p><script type="math/tex; mode=display">J_{regularized} = \small \underbrace{-\frac{1}{m} \sum\limits_{i = 1}^{m} \large{(}\small y^{(i)}\log\left(a^{[L](i)}\right) + (1-y^{(i)})\log\left(1- a^{[L](i)}\right) \large{)} }_\text{cross-entropy cost} + \underbrace{\frac{1}{m} \frac{\lambda}{2} \sum\limits_l\sum\limits_k\sum\limits_j W_{k,j}^{[l]2} }_\text{L2 regularization cost} \tag{2}</script><h4 id="1-1-overwrite-compute-cost"><a href="#1-1-overwrite-compute-cost" class="headerlink" title="1.1 overwrite compute cost"></a>1.1 overwrite compute cost</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_compute_cost_with_regularization(AL, Y, parameters, lambd):    """    Implement the cost function with L2 regularization. See formula (2) above.    :param AL -- post-activation, output of forward propagation, of shape (output size, number of examples)    :param Y -- "true" labels vector, of shape (output size, number of examples)    :param parameters -- python dictionary containing parameters of the model    :param lambd -- æ­£åˆ™ç³»æ•°    :return:        cost - value of the regularized loss function (formula (2))    """    cross_entropy_cost = func_compute_cost(AL, Y)    m = Y.shape[1]    L = len(parameters) // 2    tmp = [parameters['W'+str(layer)] for layer in range(1, L+1)]    L2_regularization_cost = sum([np.sum(np.square(w)) for w in tmp]) * lambd / 2 / m    cost = cross_entropy_cost + L2_regularization_cost    return cost<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_compute_cost_with_regularization_test_case():    np.random.seed(1)    Y_assess = np.array([[1, 1, 0, 1, 0]])    W1 = np.random.randn(2, 3)    b1 = np.random.randn(2, 1)    W2 = np.random.randn(3, 2)    b2 = np.random.randn(3, 1)    W3 = np.random.randn(1, 3)    b3 = np.random.randn(1, 1)    parameters = {"W1": W1, "b1": b1, "W2": W2, "b2": b2, "W3": W3, "b3": b3}    a3 = np.array([[ 0.40682402,  0.01629284,  0.16722898,  0.10118111,  0.40682402]])    return a3, Y_assess, parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A3, Y_assess, parameters = func_compute_cost_with_regularization_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A3, Y_assess, parameters<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(array([[0.40682402, 0.01629284, 0.16722898, 0.10118111, 0.40682402]]), array([[1, 1, 0, 1, 0]]), {&#39;W1&#39;: array([[ 1.62434536, -0.61175641, -0.52817175],         [-1.07296862,  0.86540763, -2.3015387 ]]),  &#39;b1&#39;: array([[ 1.74481176],         [-0.7612069 ]]),  &#39;W2&#39;: array([[ 0.3190391 , -0.24937038],         [ 1.46210794, -2.06014071],         [-0.3224172 , -0.38405435]]),  &#39;b2&#39;: array([[ 1.13376944],         [-1.09989127],         [-0.17242821]]),  &#39;W3&#39;: array([[-0.87785842,  0.04221375,  0.58281521]]),  &#39;b3&#39;: array([[-1.10061918]])})</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_compute_cost_with_regularization(A3, Y_assess, parameters, lambd=0.1)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>1.7864859451590758</code></pre><h4 id="1-2-overwrite-backward-propagation"><a href="#1-2-overwrite-backward-propagation" class="headerlink" title="1.2 overwrite backward propagation"></a>1.2 overwrite backward propagation</h4><script type="math/tex; mode=display">\frac{d}{dW} ( \frac{1}{2}\frac{\lambda}{m}  W^2) = \frac{\lambda}{m} W</script><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_backward_with_regularization(dZ, cache, lambd):    """    Implement the linear portion of backward propagation for a single layer (layer l)    :param dZ -- Gradient of the cost with respect to the linear output (of current layer l)    :param cache -- tuple of values (A_prev, W, b) coming from the forward propagation in the current layer    :param lambd -- æ­£åˆ™ç³»æ•°    :return:        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    A_prev, W, b = cache    m = A_prev.shape[1]    dW = 1 / m * np.dot(dZ, A_prev.T) + lambd / m * W    db = 1 / m * np.sum(dZ, axis=1, keepdims=True)  # axis=1æ˜¯è¡Œè®°å½•æ±‚å’Œ    dA_prev = np.dot(W.T, dZ)    assert(dW.shape == W.shape)    assert(db.shape == b.shape)    assert(dA_prev.shape == A_prev.shape)    return dA_prev, dW, dbdef func_linear_activation_backward_with_regularization(dA, cache, lambd, activation):    """    Implement the backward propagation for the LINEAR->ACTIVATION layer.    :param dA -- post-activation gradient for current layer l     :param cache -- tuple of values (linear_cache, activation_cache) we store for computing backward propagation efficiently    :param lambd -- æ­£åˆ™ç³»æ•°    :param activation -- the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :returns        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    linear_cache, activation_cache = cache    if activation == 'relu':        dZ = func_relu_backward(dA, activation_cache)    elif activation == 'sigmoid':        dZ = func_sigmoid_backward(dA, activation_cache)    else:        raise ValueError('activation param')    dA_prev, dW, db = func_linear_backward_with_regularization(dZ, linear_cache, lambd)    return dA_prev, dW, dbdef func_L_model_backward_with_regularization(AL, Y, caches, lambd):    """    Implement the backward propagation for the [LINEAR->RELU] * (L-1) -> LINEAR -> SIGMOID group    :param AL -- probability vector, output of the forward propagation (L_model_forward())    :param Y -- true "label" vector (containing 0 if non-cat, 1 if cat)    :param caches -- list of caches containing:                    every cache of linear_activation_forward() with "relu" (it's caches[l], for l in range(L-1) i.e l = 0...L-2)                    the cache of linear_activation_forward() with "sigmoid" (it's caches[L-1])    :param lambd -- æ­£åˆ™ç³»æ•°    :return:        grads -- A dictionary with the gradients                 grads["dA" + str(l)] = ...                  grads["dW" + str(l)] = ...                 grads["db" + str(l)] = ...     """    grads = {}    L = len(caches)    m = AL.shape[1]    Y = Y.reshape(AL.shape)    dAL = - (np.divide(Y, AL) - np.divide(1-Y, 1-AL))    cur_cache = caches[L-1]    grads['dA' + str(L-1)], grads['dW'+str(L)], grads['db'+str(L)] = func_linear_activation_backward_with_regularization(dAL, cur_cache, lambd, activation='sigmoid')    for layer in reversed(range(L-1)):        cur_cache = caches[layer]        dA_prev_tmp, dW_tmp, db_tmp = func_linear_activation_backward_with_regularization(grads["dA"+str(layer+1)], cur_cache, lambd, activation='relu')        grads['dA'+str(layer)] = dA_prev_tmp        grads['dW'+str(layer+1)] = dW_tmp        grads['db'+str(layer+1)] = db_tmp#     current_cache = caches[L-1]#     grads["dA" + str(L)], grads["dW" + str(L)], grads["db" + str(L)] = func_linear_activation_backward(dAL, current_cache, activation = "sigmoid")#     for l in reversed(range(L-1)):#         # lth layer: (RELU -> LINEAR) gradients.#         current_cache = caches[l]#         dA_prev_temp, dW_temp, db_temp = func_linear_activation_backward(grads["dA" + str(l + 2)], current_cache, activation = "relu")#         grads["dA" + str(l + 1)] = dA_prev_temp#         grads["dW" + str(l + 1)] = dW_temp#         grads["db" + str(l + 1)] = db_temp    return grads<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_backward_propagation_with_regularization_test_case():    np.random.seed(1)    X_assess = np.random.randn(3, 5)    Y_assess = np.array([[1, 1, 0, 1, 0]])    cache = (np.array([[-1.52855314,  3.32524635,  2.13994541,  2.60700654, -0.75942115],         [-1.98043538,  4.1600994 ,  0.79051021,  1.46493512, -0.45506242]]),  np.array([[ 0.        ,  3.32524635,  2.13994541,  2.60700654,  0.        ],         [ 0.        ,  4.1600994 ,  0.79051021,  1.46493512,  0.        ]]),  np.array([[-1.09989127, -0.17242821, -0.87785842],         [ 0.04221375,  0.58281521, -1.10061918]]),  np.array([[ 1.14472371],         [ 0.90159072]]),  np.array([[ 0.53035547,  5.94892323,  2.31780174,  3.16005701,  0.53035547],         [-0.69166075, -3.47645987, -2.25194702, -2.65416996, -0.69166075],         [-0.39675353, -4.62285846, -2.61101729, -3.22874921, -0.39675353]]),  np.array([[ 0.53035547,  5.94892323,  2.31780174,  3.16005701,  0.53035547],         [ 0.        ,  0.        ,  0.        ,  0.        ,  0.        ],         [ 0.        ,  0.        ,  0.        ,  0.        ,  0.        ]]),  np.array([[ 0.50249434,  0.90085595],         [-0.68372786, -0.12289023],         [-0.93576943, -0.26788808]]),  np.array([[ 0.53035547],         [-0.69166075],         [-0.39675353]]),  np.array([[-0.3771104 , -4.10060224, -1.60539468, -2.18416951, -0.3771104 ]]),  np.array([[ 0.40682402,  0.01629284,  0.16722898,  0.10118111,  0.40682402]]),  np.array([[-0.6871727 , -0.84520564, -0.67124613]]),  np.array([[-0.0126646]]))    return X_assess, Y_assess, cache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X_assess, Y_assess, cache = func_backward_propagation_with_regularization_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X_assess, Y_assess, cache<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(array([[ 1.62434536, -0.61175641, -0.52817175, -1.07296862,  0.86540763],        [-2.3015387 ,  1.74481176, -0.7612069 ,  0.3190391 , -0.24937038],        [ 1.46210794, -2.06014071, -0.3224172 , -0.38405435,  1.13376944]]), array([[1, 1, 0, 1, 0]]), (array([[-1.52855314,  3.32524635,  2.13994541,  2.60700654, -0.75942115],         [-1.98043538,  4.1600994 ,  0.79051021,  1.46493512, -0.45506242]]),  array([[0.        , 3.32524635, 2.13994541, 2.60700654, 0.        ],         [0.        , 4.1600994 , 0.79051021, 1.46493512, 0.        ]]),  array([[-1.09989127, -0.17242821, -0.87785842],         [ 0.04221375,  0.58281521, -1.10061918]]),  array([[1.14472371],         [0.90159072]]),  array([[ 0.53035547,  5.94892323,  2.31780174,  3.16005701,  0.53035547],         [-0.69166075, -3.47645987, -2.25194702, -2.65416996, -0.69166075],         [-0.39675353, -4.62285846, -2.61101729, -3.22874921, -0.39675353]]),  array([[0.53035547, 5.94892323, 2.31780174, 3.16005701, 0.53035547],         [0.        , 0.        , 0.        , 0.        , 0.        ],         [0.        , 0.        , 0.        , 0.        , 0.        ]]),  array([[ 0.50249434,  0.90085595],         [-0.68372786, -0.12289023],         [-0.93576943, -0.26788808]]),  array([[ 0.53035547],         [-0.69166075],         [-0.39675353]]),  array([[-0.3771104 , -4.10060224, -1.60539468, -2.18416951, -0.3771104 ]]),  array([[0.40682402, 0.01629284, 0.16722898, 0.10118111, 0.40682402]]),  array([[-0.6871727 , -0.84520564, -0.67124613]]),  array([[-0.0126646]])))</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">(Z1, A1, W1, b1, Z2, A2, W2, b2, Z3, A3, W3, b3) = cache<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">caches = [((X_assess, W1, b1), Z1),           ((A1, W2, b2), Z2),           ((A2, W3, b3), Z3)]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">caches<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>[((array([[ 1.62434536, -0.61175641, -0.52817175, -1.07296862,  0.86540763],          [-2.3015387 ,  1.74481176, -0.7612069 ,  0.3190391 , -0.24937038],          [ 1.46210794, -2.06014071, -0.3224172 , -0.38405435,  1.13376944]]),   array([[-1.09989127, -0.17242821, -0.87785842],          [ 0.04221375,  0.58281521, -1.10061918]]),   array([[1.14472371],          [0.90159072]])),  array([[-1.52855314,  3.32524635,  2.13994541,  2.60700654, -0.75942115],         [-1.98043538,  4.1600994 ,  0.79051021,  1.46493512, -0.45506242]])), ((array([[0.        , 3.32524635, 2.13994541, 2.60700654, 0.        ],          [0.        , 4.1600994 , 0.79051021, 1.46493512, 0.        ]]),   array([[ 0.50249434,  0.90085595],          [-0.68372786, -0.12289023],          [-0.93576943, -0.26788808]]),   array([[ 0.53035547],          [-0.69166075],          [-0.39675353]])),  array([[ 0.53035547,  5.94892323,  2.31780174,  3.16005701,  0.53035547],         [-0.69166075, -3.47645987, -2.25194702, -2.65416996, -0.69166075],         [-0.39675353, -4.62285846, -2.61101729, -3.22874921, -0.39675353]])), ((array([[0.53035547, 5.94892323, 2.31780174, 3.16005701, 0.53035547],          [0.        , 0.        , 0.        , 0.        , 0.        ],          [0.        , 0.        , 0.        , 0.        , 0.        ]]),   array([[-0.6871727 , -0.84520564, -0.67124613]]),   array([[-0.0126646]])),  array([[-0.3771104 , -4.10060224, -1.60539468, -2.18416951, -0.3771104 ]]))]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">grads = func_L_model_backward_with_regularization(A3, Y_assess, caches, lambd=0.7)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">grads<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;dA2&#39;: array([[ 0.40761434,  0.67597688, -0.11491519,  0.61764379, -0.27955836],        [ 0.50135568,  0.83143505, -0.14134288,  0.75968678, -0.34384996],        [ 0.39816708,  0.66030979, -0.11225181,  0.60332869, -0.27307905]]), &#39;dW3&#39;: array([[-1.77691375, -0.11832879, -0.09397446]]), &#39;db3&#39;: array([[-0.38032985]]), &#39;dA1&#39;: array([[ 0.2048239 ,  0.33967455, -0.05774423,  0.31036251, -0.14047649],        [ 0.3672018 ,  0.60895779, -0.10352203,  0.55640808, -0.25184181]]), &#39;dW2&#39;: array([[ 0.79276497,  0.85133932],        [-0.0957219 , -0.01720463],        [-0.13100772, -0.03750433]]), &#39;db2&#39;: array([[0.26135229],        [0.        ],        [0.        ]]), &#39;dA0&#39;: array([[ 0.        , -0.34789869,  0.05914233, -0.31787694,  0.        ],        [ 0.        ,  0.29634039, -0.05037748,  0.27076784,  0.        ],        [ 0.        , -0.96841679,  0.1646296 , -0.88484775,  0.        ]]), &#39;dW1&#39;: array([[-0.25604647,  0.1229883 , -0.28297132],        [-0.17706304,  0.345361  , -0.44105717]]), &#39;db1&#39;: array([[0.11845857],        [0.21236877]])}</code></pre><h3 id="2-dropout"><a href="#2-dropout" class="headerlink" title="2-dropout"></a>2-dropout</h3><p>è¯¦æƒ…å¦‚ä»¥ä¸‹è§†é¢‘</p><center><video width="620" height="440" src="./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š4/dropout1_kiank.mp4" type="video/mp4" controls></video></center><br><caption><center> <u> Figure 2 </u>: Drop-out on the second hidden layer. <br> At each iteration, you shut down (= set to zero) each neuron of a layer with probability $1 - keep\_prob$ or keep it with probability $keep\_prob$ (50% here). The dropped neurons don't contribute to the training in both the forward and backward propagations of the iteration. </center></caption><center><video width="620" height="440" src="./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š4/dropout2_kiank.mp4" type="video/mp4" controls></video></center><caption><center> <u> Figure 3 </u>: Drop-out on the first and third hidden layers. <br> $1^{st}$ layer: we shut down on average 40% of the neurons.  $3^{rd}$ layer: we shut down on average 20% of the neurons. </center></caption><font color="red" size="5">æ³¨æ„ï¼š</font>1. ä»¥`1-keep_prob`å€¼ä¸¢å¼ƒunitsï¼Œåˆ™è¦å°† Divide $A^{[1]}$ by `keep_prob`. By doing this you are assuring that the result of the cost will still have the same expected value as without drop-out. (This technique is also called inverted dropout.)#### 2.1-overwrite forward propagation```pythondef func_linear_forward(A, W, b):    """    linear forward    :param A:    :param W:    :param b:    :return Z,chche:        Z -- the input of the activation function, also called pre-activation parameter         cache -- a python dictionary containing "A", "W" and "b" ; stored for computing the backward pass efficiently    """    Z = np.dot(W, A) + b    assert(Z.shape == (W.shape[0], A.shape[1]))    cache = (A, W, b)    return Z, cachedef func_linear_activation_forward_with_dropout(A_prev, W, b, activation, keep_prob=None):    """    Implement the forward propagation for the LINEAR->ACTIVATION layer    :param A_prev: activations from previous layer (or input data): (size of previous layer, number of examples)    :param W: weights matrix: numpy array of shape (size of current layer, size of previous layer)    :param b: bias vector, numpy array of shape (size of the current layer, 1)    :param activation: the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :param keep_prob -- probability of keeping a neuron active during drop-out, scalar    :return:        A -- the output of the activation function, also called the post-activation value         cache -- a python dictionary containing "linear_cache" and "activation_cache";                 stored for computing the backward pass efficiently    """    Z, linear_cache = func_linear_forward(A_prev, W, b)    D = None    if activation == 'sigmoid':        A, activation_cache = func_sigmoid(Z)    elif activation == 'relu':        A, activation_cache = func_relu(Z)        if keep_prob:            D = np.random.rand(*A.shape)  # Step 1: initialize matrix D1 = np.random.rand(..., ...)            D = D < keep_prob  # convert entries of D1 to 0 or 1 (using keep_prob as the threshold)            A = A * D  # shut down some neurons of A            A = A / keep_prob  # scale the value of neurons that haven't been shut down    else:        raise ValueError('activation param')    assert(A.shape == (W.shape[0], A_prev.shape[1]))    cache = (linear_cache, activation_cache, D)    return A, cachedef func_L_model_forward_with_dropout(X, parameters, keep_prob=0.5):    """    Implement forward propagation for the [LINEAR->RELU]*(L-1)->LINEAR->SIGMOID computation    :param X -- data, numpy array of shape (input size, number of examples)    :param parameters -- output of initialize_parameters_deep()    :param keep_prob -- probability of keeping a neuron active during drop-out, scalar    :return:        AL -- last post-activation value        caches -- list of caches containing:                    every cache of linear_relu_forward() (there are L-1 of them, indexed from 0 to L-2)                    the cache of linear_sigmoid_forward() (there is one, indexed L-1)    """    np.random.seed(1)    caches = []    A = X    L = len(parameters) // 2    for layer in range(1, L):        A_prev = A        W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]        A, cache = func_linear_activation_forward_with_dropout(A_prev, W, b, 'relu', keep_prob)        caches.append(cache)    A_prev = A    layer = L    W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]    A, cache = func_linear_activation_forward_with_dropout(A_prev, W, b, 'sigmoid')    caches.append(cache)    assert(A.shape == (1, X.shape[1]))    return A, caches``````pythondef func_forward_propagation_with_dropout_test_case():    np.random.seed(1)    X_assess = np.random.randn(3, 5)    W1 = np.random.randn(2, 3)    b1 = np.random.randn(2, 1)    W2 = np.random.randn(3, 2)    b2 = np.random.randn(3, 1)    W3 = np.random.randn(1, 3)    b3 = np.random.randn(1, 1)    parameters = {"W1": W1, "b1": b1, "W2": W2, "b2": b2, "W3": W3, "b3": b3}    return X_assess, parameters``````pythonX_assess, parameters = func_forward_propagation_with_dropout_test_case()``````pythonX_assess, parameters```    (array([[ 1.62434536, -0.61175641, -0.52817175, -1.07296862,  0.86540763],            [-2.3015387 ,  1.74481176, -0.7612069 ,  0.3190391 , -0.24937038],            [ 1.46210794, -2.06014071, -0.3224172 , -0.38405435,  1.13376944]]),     {'W1': array([[-1.09989127, -0.17242821, -0.87785842],             [ 0.04221375,  0.58281521, -1.10061918]]),      'b1': array([[1.14472371],             [0.90159072]]),      'W2': array([[ 0.50249434,  0.90085595],             [-0.68372786, -0.12289023],             [-0.93576943, -0.26788808]]),      'b2': array([[ 0.53035547],             [-0.69166075],             [-0.39675353]]),      'W3': array([[-0.6871727 , -0.84520564, -0.67124613]]),      'b3': array([[-0.0126646]])})```pythonAL, caches = func_L_model_forward_with_dropout(X_assess, parameters, keep_prob=0.7)``````pythonAL, caches```    (array([[0.36974721, 0.00305176, 0.04565099, 0.49683389, 0.36974721]]),     [((array([[ 1.62434536, -0.61175641, -0.52817175, -1.07296862,  0.86540763],               [-2.3015387 ,  1.74481176, -0.7612069 ,  0.3190391 , -0.24937038],               [ 1.46210794, -2.06014071, -0.3224172 , -0.38405435,  1.13376944]]),        array([[-1.09989127, -0.17242821, -0.87785842],               [ 0.04221375,  0.58281521, -1.10061918]]),        array([[1.14472371],               [0.90159072]])),       array([[-1.52855314,  3.32524635,  2.13994541,  2.60700654, -0.75942115],              [-1.98043538,  4.1600994 ,  0.79051021,  1.46493512, -0.45506242]]),       array([[ True, False,  True,  True,  True],              [ True,  True,  True,  True,  True]])),      ((array([[0.        , 0.        , 3.05706487, 3.72429505, 0.        ],               [0.        , 5.94299915, 1.1293003 , 2.09276446, 0.        ]]),        array([[ 0.50249434,  0.90085595],               [-0.68372786, -0.12289023],               [-0.93576943, -0.26788808]]),        array([[ 0.53035547],               [-0.69166075],               [-0.39675353]])),       array([[ 0.53035547,  5.88414161,  3.08385015,  4.28707196,  0.53035547],              [-0.69166075, -1.42199726, -2.92064114, -3.49524533, -0.69166075],              [-0.39675353, -1.98881216, -3.55998747, -4.44246165, -0.39675353]]),       array([[ True,  True,  True, False,  True],              [ True,  True,  True,  True,  True],              [False, False,  True,  True, False]])),      ((array([[0.75765067, 8.40591658, 4.40550021, 0.        , 0.75765067],               [0.        , 0.        , 0.        , 0.        , 0.        ],               [0.        , 0.        , 0.        , 0.        , 0.        ]]),        array([[-0.6871727 , -0.84520564, -0.67124613]]),        array([[-0.0126646]])),       array([[-0.53330145, -5.78898099, -3.04000407, -0.0126646 , -0.53330145]]),       None)])#### 2.2 overwrite backward propagation1. You had previously shut down some neurons during forward propagation, by applying a mask $D^{[1]}$ to `A1`. In backpropagation, you will have to shut down the same neurons, by reapplying the same mask $D^{[1]}$ to `dA1`. 2. During forward propagation, you had divided `A1` by `keep_prob`. In backpropagation, you'll therefore have to divide `dA1` by `keep_prob` again (the calculus interpretation is that if $A^{[1]}$ is scaled by `keep_prob`, then its derivative $dA^{[1]}$ is also scaled by the same `keep_prob`).```pythondef func_linear_backward(dZ, cache):    """    Implement the linear portion of backward propagation for a single layer (layer l)    :param dZ -- Gradient of the cost with respect to the linear output (of current layer l)    :param cache -- tuple of values (A_prev, W, b) coming from the forward propagation in the current layer    :return:        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    A_prev, W, b = cache    m = A_prev.shape[1]    dW = 1 / m * np.dot(dZ, A_prev.T)    db = 1 / m * np.sum(dZ, axis=1, keepdims=True)  # axis=1æ˜¯è¡Œè®°å½•æ±‚å’Œ    dA_prev = np.dot(W.T, dZ)    assert(dW.shape == W.shape)    assert(db.shape == b.shape)    assert(dA_prev.shape == A_prev.shape)    return dA_prev, dW, dbdef func_linear_activation_backward_with_dropout(dA, cache, activation, keep_prob=None):    """    Implement the backward propagation for the LINEAR->ACTIVATION layer.    :param dA -- post-activation gradient for current layer l     :param cache -- tuple of values (linear_cache, activation_cache) we store for computing backward propagation efficiently    :param activation -- the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :param keep_prob -- ä¿ç•™neuronçš„æ¯”ä¾‹    :returns        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    linear_cache, activation_cache, D = cache    if activation == 'relu':        if keep_prob and D is not None:            dA = dA * D  # shut down some neurons of A            dA = dA / keep_prob  # scale the value of neurons that haven't been shut down        dZ = func_relu_backward(dA, activation_cache)    elif activation == 'sigmoid':        dZ = func_sigmoid_backward(dA, activation_cache)    else:        raise ValueError('activation param')    dA_prev, dW, db = func_linear_backward(dZ, linear_cache)    return dA_prev, dW, dbdef func_L_model_backward_with_dropout(AL, Y, caches, keep_prob):    """    Implement the backward propagation for the [LINEAR->RELU] * (L-1) -> LINEAR -> SIGMOID group    :param AL -- probability vector, output of the forward propagation (L_model_forward())    :param Y -- true "label" vector (containing 0 if non-cat, 1 if cat)    :param caches -- list of caches containing:                    every cache of linear_activation_forward() with "relu" (it's caches[l], for l in range(L-1) i.e l = 0...L-2)                    the cache of linear_activation_forward() with "sigmoid" (it's caches[L-1])    :param keep_prob -- ä¿ç•™neuronçš„æ¯”ä¾‹    :return:        grads -- A dictionary with the gradients                 grads["dA" + str(l)] = ...                  grads["dW" + str(l)] = ...                 grads["db" + str(l)] = ...     """    grads = {}    L = len(caches)    m = AL.shape[1]    Y = Y.reshape(AL.shape)    # todo divide by zero encountered in true_divide    dAL = - (np.divide(Y, AL, where=AL!=0) - np.divide(1-Y, 1-AL, where=(1-AL)!=0))    cur_cache = caches[L-1]    grads['dA' + str(L-1)], grads['dW'+str(L)], grads['db'+str(L)] = func_linear_activation_backward_with_dropout(dAL, cur_cache, activation='sigmoid')    for layer in reversed(range(L-1)):        cur_cache = caches[layer]        dA_prev_tmp, dW_tmp, db_tmp = func_linear_activation_backward_with_dropout(grads["dA"+str(layer+1)], cur_cache, activation='relu', keep_prob=keep_prob)        grads['dA'+str(layer)] = dA_prev_tmp        grads['dW'+str(layer+1)] = dW_tmp        grads['db'+str(layer+1)] = db_tmp#     current_cache = caches[L-1]#     grads["dA" + str(L)], grads["dW" + str(L)], grads["db" + str(L)] = func_linear_activation_backward(dAL, current_cache, activation = "sigmoid")#     for l in reversed(range(L-1)):#         # lth layer: (RELU -> LINEAR) gradients.#         current_cache = caches[l]#         dA_prev_temp, dW_temp, db_temp = func_linear_activation_backward(grads["dA" + str(l + 2)], current_cache, activation = "relu")#         grads["dA" + str(l + 1)] = dA_prev_temp#         grads["dW" + str(l + 1)] = dW_temp#         grads["db" + str(l + 1)] = db_temp    return grads``````pythondef func_backward_propagation_with_dropout_test_case():    np.random.seed(1)    X_assess = np.random.randn(3, 5)    Y_assess = np.array([[1, 1, 0, 1, 0]])    cache = (np.array([[-1.52855314,  3.32524635,  2.13994541,  2.60700654, -0.75942115],           [-1.98043538,  4.1600994 ,  0.79051021,  1.46493512, -0.45506242]]), np.array([[ True, False,  True,  True,  True],           [ True,  True,  True,  True, False]], dtype=bool), np.array([[ 0.        ,  0.        ,  4.27989081,  5.21401307,  0.        ],           [ 0.        ,  8.32019881,  1.58102041,  2.92987024,  0.        ]]), np.array([[-1.09989127, -0.17242821, -0.87785842],           [ 0.04221375,  0.58281521, -1.10061918]]), np.array([[ 1.14472371],           [ 0.90159072]]), np.array([[ 0.53035547,  8.02565606,  4.10524802,  5.78975856,  0.53035547],           [-0.69166075, -1.71413186, -3.81223329, -4.61667916, -0.69166075],           [-0.39675353, -2.62563561, -4.82528105, -6.0607449 , -0.39675353]]), np.array([[ True, False,  True, False,  True],           [False,  True, False,  True,  True],           [False, False,  True, False, False]], dtype=bool), np.array([[ 1.06071093,  0.        ,  8.21049603,  0.        ,  1.06071093],           [ 0.        ,  0.        ,  0.        ,  0.        ,  0.        ],           [ 0.        ,  0.        ,  0.        ,  0.        ,  0.        ]]), np.array([[ 0.50249434,  0.90085595],           [-0.68372786, -0.12289023],           [-0.93576943, -0.26788808]]), np.array([[ 0.53035547],           [-0.69166075],           [-0.39675353]]), np.array([[-0.7415562 , -0.0126646 , -5.65469333, -0.0126646 , -0.7415562 ]]), np.array([[ 0.32266394,  0.49683389,  0.00348883,  0.49683389,  0.32266394]]), np.array([[-0.6871727 , -0.84520564, -0.67124613]]), np.array([[-0.0126646]]))    return X_assess, Y_assess, cache``````pythonX_assess, Y_assess, cache = func_backward_propagation_with_dropout_test_case()``````python(Z1, D1, A1, W1, b1, Z2, D2, A2, W2, b2, Z3, A3, W3, b3) = cache``````pythoncaches = [((X_assess, W1, b1), Z1, D1),           ((A1, W2, b2), Z2, D2),           ((A2, W3, b3), Z3, None)]``````pythongrads = func_L_model_backward_with_dropout(A3, Y_assess, caches, keep_prob=0.8)``````pythongrads```    {'dA2': array([[ 0.46544685,  0.34576201, -0.00239743,  0.34576201, -0.22172585],            [ 0.57248826,  0.42527883, -0.00294878,  0.42527883, -0.27271738],            [ 0.45465921,  0.3377483 , -0.00234186,  0.3377483 , -0.21658692]]),     'dW3': array([[-0.06951191,  0.        ,  0.        ]]),     'db3': array([[-0.2715031]]),     'dA1': array([[ 0.29235551,  0.        , -0.00150587,  0.        , -0.13926998],            [ 0.5241257 ,  0.        , -0.00269967,  0.        , -0.24967881]]),     'dW2': array([[-0.00256518, -0.0009476 ],            [ 0.        ,  0.        ],            [ 0.        ,  0.        ]]),     'db2': array([[0.06033089],            [0.        ],            [0.        ]]),     'dA0': array([[ 0.        ,  0.        ,  0.00192791,  0.        ,  0.        ],            [ 0.        ,  0.        , -0.0016422 ,  0.        ,  0.        ],            [ 0.        ,  0.        ,  0.00536657,  0.        ,  0.        ]]),     'dW1': array([[0.00019884, 0.00028657, 0.00012138],            [0.00035647, 0.00051375, 0.00021761]]),     'db1': array([[-0.00037647],            [-0.00067492]])}```pythongrads['dA2'] * D2 / 0.8```    array([[ 0.58180856,  0.        , -0.00299679,  0.        , -0.27715731],           [ 0.        ,  0.53159854, -0.        ,  0.53159854, -0.34089673],           [ 0.        ,  0.        , -0.00292733,  0.        , -0.        ]])```pythongrads['dA1'] * D1 / 0.8```    array([[ 0.36544439,  0.        , -0.00188234,  0.        , -0.17408748],           [ 0.65515713,  0.        , -0.00337459,  0.        , -0.        ]])### overwrite dnn model```pythondef func_L_layer_dnn_model(X, Y, layer_dims, lr=0.3, num_epochs=30000, print_cost=True, lambd=0, keep_prob=1):    """    å¤šå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    :param X:    :param Y:    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param lr: learning rate    :param num_epochs:    :param print_cost:    :param lambd: regularilization parameters    :param keep_prob: dropout keep prob    :return params    """#     np.random.seed(1)    costs = []    grads = {}#     m = X.shape[1]    # å‚æ•°åˆå§‹åŒ–    parameters = func_L_layers_initialize_parameters(layer_dims, seed=3)    # loop    for epoch in range(num_epochs):        # å‰å‘ä¼ æ’­        if keep_prob == 1:            AL, caches = func_L_model_forward(X, parameters)        elif keep_prob < 1:            AL, caches = func_L_model_forward_with_dropout(X, parameters, keep_prob)        # è®¡ç®—æŸå¤±        if lambd == 0:            cost = func_compute_cost(AL, Y)        else:            cost = func_compute_cost_with_regularization(AL, Y, parameters, lambd)        # åå‘ä¼ æ’­        assert(lambd==0 or keep_prob==1)    # it is possible to use both L2 regularization and dropout,                                             # but this assignment will only explore one at a time        if lambd == 0 and keep_prob == 1:            grads = func_L_model_backward(AL, Y, caches)        elif lambd != 0:            grads = func_L_model_backward_with_regularization(AL, Y, caches, lambd)        elif keep_prob < 1:            grads = func_L_model_backward_with_dropout(AL, Y, caches, keep_prob)        # æ›´æ–°å‚æ•°        parameters = func_update_parameters(parameters, grads, lr)        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 1000 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))        if epoch % 1000 == 0:            costs.append(cost)    return parameters, costs```### åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ#### å¯¼å…¥æ•°æ®```pythondef load_2D_dataset():    data = scipy.io.loadmat('./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š4/data.mat')    train_X = data['X'].T    train_Y = data['y'].T    test_X = data['Xval'].T    test_Y = data['yval'].T    plt.scatter(train_X[0, :], train_X[1, :], c=train_Y, s=40, cmap=plt.cm.Spectral);    return train_X, train_Y, test_X, test_Y``````pythontrain_X, train_Y, test_X, test_Y = load_2D_dataset()```![output_96_0](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_96_0.png)#### è®¾ç½®å‚æ•°```pythonlayer_dims = [train_X.shape[0], 20, 3, 1]print(layer_dims)lr = 0.3num_epochs = 30000print_cost=Truelambd = 0keep_prob=1```    [2, 20, 3, 1]#### baseline model: æ²¡æœ‰ä»»ä½•æ­£åˆ™åŒ–æ‰‹æ®µçš„æ¨¡å‹```pythonparameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost, lambd=lambd, keep_prob=keep_prob)print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()```    cost after epoch 0: 0.6557412523481002    cost after epoch 1000: 0.2222669386845115    cost after epoch 2000: 0.20288702607598844    cost after epoch 3000: 0.1825149792468696    cost after epoch 4000: 0.18053978306217752    cost after epoch 5000: 0.17620471758400458    cost after epoch 6000: 0.1683273039211542    cost after epoch 7000: 0.16583593654672965    cost after epoch 8000: 0.163126719144605    cost after epoch 9000: 0.15942612253245111    cost after epoch 10000: 0.16329987525724202    cost after epoch 11000: 0.16098614487789192    cost after epoch 12000: 0.15764474148192972    cost after epoch 13000: 0.15213599644222855    cost after epoch 14000: 0.14843713518977336    cost after epoch 15000: 0.1479640092257416    cost after epoch 16000: 0.1463487630634997    cost after epoch 17000: 0.14634375863077015    cost after epoch 18000: 0.1433508853738097    cost after epoch 19000: 0.13936488362305466    cost after epoch 20000: 0.13851642423258528    cost after epoch 21000: 0.14118678351792227    cost after epoch 22000: 0.13629319468823384    cost after epoch 23000: 0.1315186013752767    cost after epoch 24000: 0.13032326002084876    cost after epoch 25000: 0.13285370211500933    cost after epoch 26000: 0.12814812861960656    cost after epoch 27000: 0.13263846518850458    cost after epoch 28000: 0.12678384582783875    cost after epoch 29000: 0.12408776091061005    on the train set:    acc: 0.9478672985781991    on the test set:    acc: 0.915â€‹    ![output_100_1](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_100_1.png)```pythonplt.title("Model without regularization")axes = plt.gca()axes.set_xlim([-0.75,0.40])axes.set_ylim([-0.75,0.65])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)```![output_101_0](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_101_0.png)#### L2 regularization model```pythonlayer_dims = [train_X.shape[0], 20, 3, 1]print(layer_dims)lr = 0.3num_epochs = 30000print_cost=Truelambd = 0.7keep_prob=1```    [2, 20, 3, 1]```pythonparameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost, lambd=lambd, keep_prob=keep_prob)print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()```    cost after epoch 0: 0.6974484493131264    cost after epoch 1000: 0.27304563479326766    cost after epoch 2000: 0.26985760798332925    cost after epoch 3000: 0.269508280641266    cost after epoch 4000: 0.26926544493616217    cost after epoch 5000: 0.2690430474349705    cost after epoch 6000: 0.26889745607345616    cost after epoch 7000: 0.26877517178557253    cost after epoch 8000: 0.26867325020602606    cost after epoch 9000: 0.2685595174585008    cost after epoch 10000: 0.2684918873282239    cost after epoch 11000: 0.2684141282822975    cost after epoch 12000: 0.268370115369031    cost after epoch 13000: 0.2683177401855035    cost after epoch 14000: 0.26826704893477976    cost after epoch 15000: 0.2682199033729047    cost after epoch 16000: 0.2681687054797271    cost after epoch 17000: 0.2681517100224052    cost after epoch 18000: 0.2681331699914915    cost after epoch 19000: 0.2680892379993576    cost after epoch 20000: 0.26809163371273015    cost after epoch 21000: 0.26803821899502356    cost after epoch 22000: 0.26806045797644007    cost after epoch 23000: 0.26782909050763876    cost after epoch 24000: 0.2678953595054706    cost after epoch 25000: 0.2679428566388702    cost after epoch 26000: 0.26785446611618824    cost after epoch 27000: 0.26791625501065636    cost after epoch 28000: 0.26789526792627955    cost after epoch 29000: 0.2678261099093219    on the train set:    acc: 0.9383886255924171    on the test set:    acc: 0.93![output_104_1](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_104_1.png)```pythonplt.title("Model with L2-regularization")axes = plt.gca()axes.set_xlim([-0.75,0.40])axes.set_ylim([-0.75,0.65])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)```![output_105_0](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_105_0.png)#### dropout model```pythonlayer_dims = [train_X.shape[0], 20, 3, 1]print(layer_dims)lr = 0.3num_epochs = 30000print_cost=Truelambd = 0keep_prob=0.86```    [2, 20, 3, 1]```pythonparameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost, lambd=lambd, keep_prob=keep_prob)print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()```    cost after epoch 0: 0.6543912405149825    cost after epoch 1000: 0.1759784892976791    cost after epoch 2000: 0.10396707442944592    cost after epoch 3000: 0.07661297787708934    cost after epoch 4000: 0.06719891270763614    cost after epoch 5000: 0.06466905010089666    cost after epoch 6000: 0.06240987262093488    cost after epoch 7000: 0.0618787353396944    cost after epoch 8000: 0.06143321818157481    cost after epoch 9000: 0.06119214378902588    cost after epoch 10000: 0.06101698660803223    cost after epoch 11000: 0.06093245086027745    cost after epoch 12000: 0.06082640200152239    cost after epoch 13000: 0.060862641336133956    cost after epoch 14000: 0.06083521540719877    cost after epoch 15000: 0.0606645721999514    cost after epoch 16000: 0.06064947241699113    cost after epoch 17000: 0.0606258566616184    cost after epoch 18000: 0.060658745096947145    cost after epoch 19000: 0.06059651334487958    cost after epoch 20000: 0.060582435841229895    cost after epoch 21000: 0.06055919942402353    cost after epoch 22000: 0.06057898394513002    cost after epoch 23000: 0.06056461470733185    cost after epoch 24000: 0.060503590314540175    cost after epoch 25000: 0.06050179006911904    cost after epoch 26000: 0.06052211745803752    cost after epoch 27000: 0.06047314743833395    cost after epoch 28000: 0.06047206696729297    cost after epoch 29000: 0.06048596676559831    on the train set:    acc: 0.9289099526066351    on the test set:    acc: 0.95![output_108_1](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_108_1.png)```pythonplt.title("Model with dropout")axes = plt.gca()axes.set_xlim([-0.75,0.40])axes.set_ylim([-0.75,0.65])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)```![output_109_0](%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A4/output_109_0.png)### <font color="red" size="5">æ€»ç»“</font><p>Note that regularization hurts training set performance! This is because it limits the ability of the network to overfit to the training set. But since it ultimately gives better test accuracy, it is helping your system. </p><h2 id="æ¢¯åº¦æ£€éªŒ"><a href="#æ¢¯åº¦æ£€éªŒ" class="headerlink" title="æ¢¯åº¦æ£€éªŒ"></a>æ¢¯åº¦æ£€éªŒ</h2><ul><li>æ£€æŸ¥åå‘ä¼ æ’­è¿‡ç¨‹æ˜¯å¦æ­£ç¡®ï¼Ÿåˆ™éœ€è¦æ¢¯åº¦æ£€éªŒ</li></ul><h3 id="å·¥ä½œåŸç†ä»‹ç»"><a href="#å·¥ä½œåŸç†ä»‹ç»" class="headerlink" title="å·¥ä½œåŸç†ä»‹ç»"></a>å·¥ä½œåŸç†ä»‹ç»</h3><ol><li>ç¡®ä¿ä½ çš„å‰å‘ä¼ æ’­å’Œè®¡ç®—losså®Œå…¨æ­£ç¡®ï¼</li><li>æ£€éªŒåå‘ä¼ æ’­è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æ£€æŸ¥$\frac{\partial J}{\partial \theta}$æ˜¯å¦è®¡ç®—æ­£ç¡®</li><li>å›é¡¾å¯¼æ•°çš„å®šä¹‰</li></ol><script type="math/tex; mode=display">\frac{\partial J}{\partial \theta} = \lim_{\varepsilon \to 0} \frac{J(\theta + \varepsilon) - J(\theta - \varepsilon)}{2 \varepsilon}</script><ul><li>åˆ™å¯ä»¥ä½¿ç”¨$J(\theta + \varepsilon)$ and $J(\theta - \varepsilon)$ (in the case that $\theta$ is a real number), since youâ€™re confident your implementation for $J$ is correct</li></ul><h3 id="1D-æ¢¯åº¦æ£€éªŒ"><a href="#1D-æ¢¯åº¦æ£€éªŒ" class="headerlink" title="1D æ¢¯åº¦æ£€éªŒ"></a>1D æ¢¯åº¦æ£€éªŒ</h3><h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h4><p> To show that the <code>func_1d_backward_propagation()</code> function is correctly computing the gradient $\frac{\partial J}{\partial \theta}$, letâ€™s implement gradient checking.</p><ul><li>First compute â€œgradapproxâ€ using the formula above (1) and a small value of $\varepsilon$. Here are the Steps to follow:<ol><li>$\theta^{+} = \theta + \varepsilon$</li><li>$\theta^{-} = \theta - \varepsilon$</li><li>$J^{+} = J(\theta^{+})$</li><li>$J^{-} = J(\theta^{-})$</li><li>$gradapprox = \frac{J^{+} - J^{-}}{2  \varepsilon}$</li></ol></li><li>Then compute the gradient using backward propagation, and store the result in a variable â€œgradâ€</li><li>Finally, compute the relative difference between â€œgradapproxâ€ and the â€œgradâ€ using the following formula:<script type="math/tex; mode=display">difference = \frac {\mid\mid grad - gradapprox \mid\mid_2}{\mid\mid grad \mid\mid_2 + \mid\mid gradapprox \mid\mid_2} \tag{2}</script>You will need 3 Steps to compute this formula:<ul><li>1â€™. compute the numerator using np.linalg.norm(â€¦)</li><li>2â€™. compute the denominator. You will need to call np.linalg.norm(â€¦) twice.</li><li>3â€™. divide them.</li></ul></li><li>If this difference is small (say less than $10^{-7}$), you can be quite confident that you have computed your gradient correctly. Otherwise, there may be a mistake in the gradient computation. </li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_1d_forward_propagation(x, theta):    """    Implement the linear forward propagation (compute J) presented in Figure 1 (J(theta) = theta * x)    Arguments:    x -- a real-valued input    theta -- our parameter, a real number as well    Returns:    J -- the value of function J, computed using the formula J(theta) = theta * x    """    return theta * x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">x, theta = 2, 4J = func_1d_forward_propagation(x, theta)print(J)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>8</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_1d_backward_propagation(x, theta):    dtheta = x    return dtheta<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dtheta = func_1d_backward_propagation(x, theta)print(dtheta)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>2</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_1d_gradient_check(x, theta, epsilon=1e-7):    """    Implement the backward propagation presented in Figure 1.    Arguments:    x -- a real-valued input    theta -- our parameter, a real number as well    epsilon -- tiny shift to the input to compute approximated gradient with formula(1)    Returns:    difference -- difference (2) between the approximated gradient and the backward propagation gradient    """    theta_plus = theta + epsilon    theta_minus = theta - epsilon    J_plus = func_1d_forward_propagation(x, theta_plus)    J_minus = func_1d_forward_propagation(x, theta_minus)    grad_approx = (J_plus - J_minus) / 2 / epsilon    grad = func_1d_backward_propagation(x, theta)    numerator = np.linalg.norm(grad - grad_approx)    denominator = np.linalg.norm(grad) + np.linalg.norm(grad_approx)    difference = numerator / denominator    if difference < 1e-7:        print('the gradient is correct!')    else:        print('the gradient is wrong!')    return difference<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">difference = func_1d_gradient_check(x, theta)difference<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>the gradient is correct!2.919335883291695e-10</code></pre><h3 id="N-dimensional-gradient-checking"><a href="#N-dimensional-gradient-checking" class="headerlink" title="N-dimensional gradient checking"></a>N-dimensional gradient checking</h3><h4 id="check-function-è‡ªå·±å†™çš„"><a href="#check-function-è‡ªå·±å†™çš„" class="headerlink" title="check function=è‡ªå·±å†™çš„"></a>check function=è‡ªå·±å†™çš„</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_nd_gradient_check(parameters, gradients, X, Y, epsilon=1e-7):    """    Checks if backward_propagation_n computes correctly the gradient of the cost output by forward_propagation_n    Arguments:    parameters -- python dictionary containing your parameters "W1", "b1", "W2", "b2", "W3", "b3":    grad -- output of backward_propagation_n, contains gradients of the cost with respect to the parameters.     x -- input datapoint, of shape (input size, 1)    y -- true "label"    epsilon -- tiny shift to the input to compute approximated gradient with formula(1)    Returns:    difference -- difference (2) between the approximated gradient and the backward propagation gradient    """    gradients_approx = {}    for key, value in parameters.items():#         print(key)        parameters_copy = copy.copy(parameters)        value_shape = value.shape  # wå‚æ•°çš„è§„æ¨¡        value_vector = np.reshape(value, (-1, 1))  # å°†wå±•å¼€æˆ(n_w, 1)#         print(value_vector.shape, value_shape)        gradapprox_vector = np.zeros((value_vector.shape[0], 1))  # æ¯æ”¹å˜ä¸€ä¸ªwï¼Œå¯¹åº”ä¸€ä¸ªgradapprox        for i in range(value_vector.shape[0]):  # æ¯ä¸ªwè¿‡ä¸€é            theta_plus = np.copy(value_vector)            theta_plus[i][0] = theta_plus[i][0] + epsilon            parameters_copy[key] = theta_plus.reshape(value_shape)    #         print(parameters_copy)            AL, _ = func_L_model_forward(X, parameters_copy)            cost_plus = func_compute_cost(AL, Y)            theta_minus = np.copy(value_vector)            theta_minus[i][0] = theta_minus[i][0] - epsilon            parameters_copy[key] = theta_minus.reshape(value_shape)            AL, _ = func_L_model_forward(X, parameters_copy)            cost_minus = func_compute_cost(AL, Y)            gradapprox_vector[i] = (cost_plus - cost_minus) / 2 / epsilon#         print(gradapprox_vector, gradapprox_vector.shape)        gradients_approx['d'+key] = gradapprox_vector.reshape(value_shape)    # å°†gradientsè½¬æˆvector    count = 0    for key in gradients_approx.keys():#         print(key)        new_vector = np.reshape(gradients[key], (-1, 1))        new_vector_approx = np.reshape(gradients_approx[key], (-1, 1))        if count == 0:            theta = new_vector            theta_approx = new_vector_approx        else:            theta = np.concatenate((theta, new_vector), axis=0)            theta_approx = np.concatenate((theta_approx, new_vector_approx), axis=0)        count += 1    # è®¡ç®—difference#     print(theta.shape, theta_approx.shape)#     print(theta, theta_approx)    numerator = np.linalg.norm(theta - theta_approx)    denominator = np.linalg.norm(theta) + np.linalg.norm(theta_approx)#     print(numerator, denominator)#     print(np.linalg.norm(theta), np.linalg.norm(theta_approx))    difference = numerator / denominator    if difference > 2e-7:        print ("\033[93m" + "There is a mistake in the backward propagation! difference = " + str(difference) + "\033[0m")    else:        print ("\033[92m" + "Your backward propagation works perfectly fine! difference = " + str(difference) + "\033[0m")    return difference<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æµ‹è¯•ç”¨çš„"><a href="#æµ‹è¯•ç”¨çš„" class="headerlink" title="æµ‹è¯•ç”¨çš„"></a>æµ‹è¯•ç”¨çš„</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def dictionary_to_vector(parameters):    """    Roll all our parameters dictionary into a single vector satisfying our specific required shape.    """    keys = []    count = 0    for key in ["W1", "b1", "W2", "b2", "W3", "b3"]:        # flatten parameter        new_vector = np.reshape(parameters[key], (-1,1))        keys = keys + [key]*new_vector.shape[0]        if count == 0:            theta = new_vector        else:            theta = np.concatenate((theta, new_vector), axis=0)        count = count + 1    return theta, keys<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def vector_to_dictionary(theta):    """    Unroll all our parameters dictionary from a single vector satisfying our specific required shape.    """    parameters = {}    parameters["W1"] = theta[:20].reshape((10,2))    parameters["b1"] = theta[20:30].reshape((10,1))    parameters["W2"] = theta[30:80].reshape((5,10))    parameters["b2"] = theta[80:85].reshape((5,1))    parameters["W3"] = theta[85:90].reshape((1,5))    parameters["b3"] = theta[90:91].reshape((1,1))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def gradients_to_vector(gradients):    """    Roll all our gradients dictionary into a single vector satisfying our specific required shape.    """    count = 0    for key in ["dW1", "db1", "dW2", "db2", "dW3", "db3"]:        # flatten parameter        new_vector = np.reshape(gradients[key], (-1,1))        if count == 0:            theta = new_vector        else:            theta = np.concatenate((theta, new_vector), axis=0)        count = count + 1    return theta<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># GRADED FUNCTION: gradient_check_ndef gradient_check_n(parameters, gradients, X, Y, epsilon = 1e-7):    """    Checks if backward_propagation_n computes correctly the gradient of the cost output by forward_propagation_n    Arguments:    parameters -- python dictionary containing your parameters "W1", "b1", "W2", "b2", "W3", "b3":    grad -- output of backward_propagation_n, contains gradients of the cost with respect to the parameters.     x -- input datapoint, of shape (input size, 1)    y -- true "label"    epsilon -- tiny shift to the input to compute approximated gradient with formula(1)    Returns:    difference -- difference (2) between the approximated gradient and the backward propagation gradient    """    # Set-up variables    parameters_values, _ = dictionary_to_vector(parameters)    grad = gradients_to_vector(gradients)    num_parameters = parameters_values.shape[0]    J_plus = np.zeros((num_parameters, 1))    J_minus = np.zeros((num_parameters, 1))    gradapprox = np.zeros((num_parameters, 1))    # Compute gradapprox    for i in range(num_parameters):        # Compute J_plus[i]. Inputs: "parameters_values, epsilon". Output = "J_plus[i]".        # "_" is used because the function you have to outputs two parameters but we only care about the first one        ### START CODE HERE ### (approx. 3 lines)        thetaplus = np.copy(parameters_values)                                      # Step 1        thetaplus[i][0] += epsilon                                # Step 2        AL, _ = func_L_model_forward(X, vector_to_dictionary( thetaplus  ))        J_plus[i] = func_compute_cost(AL, Y)#         J_plus[i], _ = forward_propagation_n(X, Y, vector_to_dictionary( thetaplus  ))                                   # Step 3        ### END CODE HERE ###        # Compute J_minus[i]. Inputs: "parameters_values, epsilon". Output = "J_minus[i]".        ### START CODE HERE ### (approx. 3 lines)        thetaminus = np.copy(parameters_values)                                     # Step 1        thetaminus[i][0] -= epsilon                               # Step 2                AL, _ = func_L_model_forward(X, vector_to_dictionary( thetaminus  ))        J_minus[i] = func_compute_cost(AL, Y)#         J_minus[i], _ = forward_propagation_n(X, Y, vector_to_dictionary( thetaminus  ))                                  # Step 3        ### END CODE HERE ###        # Compute gradapprox[i]        ### START CODE HERE ### (approx. 1 line)        gradapprox[i] = (J_plus[i] - J_minus[i]) / 2/ epsilon        ### END CODE HERE ###    # Compare gradapprox to backward propagation gradients by computing difference.    ### START CODE HERE ### (approx. 1 line)    numerator = np.linalg.norm(grad - gradapprox)                               # Step 1'    denominator = np.linalg.norm(grad) + np.linalg.norm(gradapprox)                                         # Step 2'#     print(numerator, denominator)#     print(grad, gradapprox)    difference = numerator / denominator                                          # Step 3'    ### END CODE HERE ###    if difference > 2e-7:        print ("\033[93m" + "There is a mistake in the backward propagation! difference = " + str(difference) + "\033[0m")    else:        print ("\033[92m" + "Your backward propagation works perfectly fine! difference = " + str(difference) + "\033[0m")    return difference<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="overwrite-dnn-model-1"><a href="#overwrite-dnn-model-1" class="headerlink" title="overwrite dnn model"></a>overwrite dnn model</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layer_dnn_model(X, Y, layer_dims, lr=0.001, num_epochs=10000, print_cost=False):    """    å¤šå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    :param X:    :param Y:    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param lr: learning rate    :param num_epochs:    :param print_cost:    :return params    """    np.random.seed(1)    costs = []#     m = X.shape[1]    # å‚æ•°åˆå§‹åŒ–    parameters = func_L_layers_initialize_parameters(layer_dims)    # loop    for epoch in range(num_epochs):        # å‰å‘ä¼ æ’­        AL, caches = func_L_model_forward(X, parameters)        # è®¡ç®—æŸå¤±        cost = func_compute_cost(AL, Y)        # åå‘ä¼ æ’­        grads = func_L_model_backward(AL, Y, caches)        if epoch == num_epochs-1:            # æ¢¯åº¦æ£€éªŒ            # print(grads, caches)            difference = func_nd_gradient_check(parameters, grads, X, Y)            difference = gradient_check_n(parameters, grads, X, Y)        # æ›´æ–°å‚æ•°        parameters = func_update_parameters(parameters, grads, lr)        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 100 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))        if epoch % 100 == 0:            costs.append(cost)    return parameters, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ-1"><a href="#åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ-1" class="headerlink" title="åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ"></a>åœ¨æ¨¡æ‹Ÿæ•°æ®ä¸Šè®­ç»ƒ</h4><h5 id="å¯¼å…¥æ•°æ®-1"><a href="#å¯¼å…¥æ•°æ®-1" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h5><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_X, train_Y, test_X, test_Y = load_dataset()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_129_0.png" alt="output_129_0"></p><h5 id="å‚æ•°è®¾ç½®"><a href="#å‚æ•°è®¾ç½®" class="headerlink" title="å‚æ•°è®¾ç½®"></a>å‚æ•°è®¾ç½®</h5><pre class="line-numbers language-lang-python"><code class="language-lang-python">layer_dims = [train_X.shape[0], 10, 5, 1]print(layer_dims)lr = 0.1num_epochs = 1500print_cost=True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[2, 10, 5, 1]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, costs = func_L_layer_dnn_model(train_X, train_Y, layer_dims, lr, num_epochs, print_cost)print('on the train set:')pred_train = func_predict(train_X, train_Y, parameters)print('on the test set:')pred_test = func_predict(test_X, test_Y, parameters)plt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per hundreds)')plt.title("Learning rate =" + str(lr))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>cost after epoch 0: 0.6960659020466242cost after epoch 100: 0.6891991419051238cost after epoch 200: 0.6850092483958543cost after epoch 300: 0.6798479812645738cost after epoch 400: 0.6729753561826027cost after epoch 500: 0.6580667774079205cost after epoch 600: 0.6311404895208866cost after epoch 700: 0.5853323852501582cost after epoch 800: 0.5132274924019706cost after epoch 900: 0.41849780592362346cost after epoch 1000: 0.3288154213170582cost after epoch 1100: 0.2578987108855108cost after epoch 1200: 0.20516738899849638cost after epoch 1300: 0.16682454264195795cost after epoch 1400: 0.13371779611157564[92mYour backward propagation works perfectly fine! difference = 1.0610826936117557e-08[0m[92mYour backward propagation works perfectly fine! difference = 1.0610826936117557e-08[0mon the train set:acc: 0.99on the test set:acc: 0.94</code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_132_1.png" alt="output_132_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in parameters.items():    print(key, value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>W1 (10, 2)b1 (10, 1)W2 (5, 10)b2 (5, 1)W3 (1, 5)b3 (1, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.title("Model with np.sqrt(layer_dims(layer-1)) initialization")axes = plt.gca()axes.set_xlim([-1.5,1.5])axes.set_ylim([-1.5,1.5])func_plot_decision_boundary(lambda x: func_predict_dec(parameters, x.T), train_X, train_Y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/11/03/shen-du-xue-xi-ng-zhi-jia-qiang-shen-du-wang-luo-xing-neng-de-yi-xie-ji-qiao/output_134_0.png" alt="output_134_0"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><font color="red" size="5">æ€»ç»“</font></h3><ol><li>æ¢¯åº¦æ£€éªŒå¾ˆæ…¢ï¼Œå› ä¸ºæ¯ä¸€ä¸ªwçš„åˆ†é‡éƒ½è¦è®¡ç®—pluså’Œminusï¼Œæ‰€ä»¥ä¸ç”¨æ¯ä¸€ä¸ªepochéƒ½æ¢¯åº¦æ£€éªŒï¼Œåªéœ€è¦æŸäº›epochè¿›è¡Œæ£€éªŒæ¢¯åº¦è®¡ç®—æ˜¯å¦æ­£ç¡®å³å¯</li><li>æ¢¯åº¦æ£€éªŒä¸é€‚ç”¨äºdropoutï¼Œå…ˆæ£€éªŒæ˜¯å¦æ­£ç¡®ï¼Œå†åŠ dropout</li></ol><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯»ä¹¦ç¬”è®°ä¹‹æ·±åº¦å­¦ä¹ æ¨èç³»ç»Ÿ</title>
      <link href="/2021/09/23/du-shu-bi-ji-zhi-shen-du-xue-xi-tui-jian-xi-tong/"/>
      <url>/2021/09/23/du-shu-bi-ji-zhi-shen-du-xue-xi-tui-jian-xi-tong/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ul><li><a href>ç‹å–†çš„æ·±åº¦å­¦ä¹ æ¨èç³»ç»Ÿ</a></li></ul><h1 id="ç¬¬ä¸€ç« ï¼šäº’è”ç½‘çš„å¢é•¿å¼•æ“-æ¨èç³»ç»Ÿ"><a href="#ç¬¬ä¸€ç« ï¼šäº’è”ç½‘çš„å¢é•¿å¼•æ“-æ¨èç³»ç»Ÿ" class="headerlink" title="ç¬¬ä¸€ç« ï¼šäº’è”ç½‘çš„å¢é•¿å¼•æ“-æ¨èç³»ç»Ÿ"></a>ç¬¬ä¸€ç« ï¼šäº’è”ç½‘çš„å¢é•¿å¼•æ“-æ¨èç³»ç»Ÿ</h1><ul><li><p>äº’è”ç½‘ä¼ä¸šçš„æ ¸å¿ƒéœ€æ±‚æ˜¯â€œå¢é•¿â€ï¼Œè€Œæ¨èç³»ç»Ÿæ­£å¤„åœ¨â€œå¢é•¿å¼•æ“â€çš„æ ¸å¿ƒä½ç½®</p></li><li><p>æ¨èç³»ç»Ÿè¦è§£å†³çš„â€œç”¨æˆ·ç—›ç‚¹â€æ˜¯ç”¨æˆ·å¦‚ä½•åœ¨â€œä¿¡æ¯è¿‡è½½â€çš„æƒ…å†µä¸‹é«˜æ•ˆçš„è·å¾—æ„Ÿå…´è¶£çš„ä¿¡æ¯</p></li><li><p>æ¨èç³»ç»Ÿçš„æŠ€æœ¯æ¶æ„ç¤ºæ„å›¾</p><p><img src="/2021/09/23/du-shu-bi-ji-zhi-shen-du-xue-xi-tui-jian-xi-tong/image-20210923094027196.png" alt="image-20210923094027196"></p></li></ul><h1 id="ç¬¬äºŒç« ï¼šæ¨èç³»ç»Ÿçš„è¿›åŒ–ä¹‹è·¯"><a href="#ç¬¬äºŒç« ï¼šæ¨èç³»ç»Ÿçš„è¿›åŒ–ä¹‹è·¯" class="headerlink" title="ç¬¬äºŒç« ï¼šæ¨èç³»ç»Ÿçš„è¿›åŒ–ä¹‹è·¯"></a>ç¬¬äºŒç« ï¼šæ¨èç³»ç»Ÿçš„è¿›åŒ–ä¹‹è·¯</h1><ul><li><p>ååŒè¿‡æ»¤</p><ul><li><p>åŸºäºç”¨æˆ·çš„</p><ul><li><p>é€‚åˆä¸šåŠ¡åœºæ™¯</p><ul><li>é€‚åˆç¤¾äº¤å±æ€§å¼ºçš„åº”ç”¨åœºæ™¯</li></ul></li><li><p>ç›¸ä¼¼åº¦è®¡ç®—</p><p><img src="/2021/09/23/du-shu-bi-ji-zhi-shen-du-xue-xi-tui-jian-xi-tong/image-20210923100728637.png" alt="image-20210923100728637"></p></li><li><p>ç¼ºç‚¹</p><ul><li>ç”¨æˆ·æ•°å¾€å¾€å¤§äºç‰©å“æ•°ï¼Œéœ€è¦ç»´æŠ¤çš„ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µå­˜å‚¨å¼€é”€éå¸¸å¤§</li><li>ç”¨æˆ·å†å²æ•°æ®å¾€å¾€æ¯”è¾ƒç¨€ç–ï¼Œå¯¹äºåªæœ‰å‡ æ¬¡è´­ä¹°æˆ–è€…ç‚¹å‡»è¡Œä¸ºçš„ç”¨æˆ·æ¥è¯´ï¼Œæ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·çš„å‡†ç¡®åº¦è¾ƒä½</li></ul></li></ul></li><li><p>åŸºäºç‰©å“çš„</p><ul><li>é€‚åˆä¸šåŠ¡åœºæ™¯<ul><li>é€‚åˆå…´è¶£å˜åŒ–è¾ƒç¨³å®šçš„ä¸šåŠ¡åœºæ™¯</li></ul></li><li>æ­¥éª¤<ul><li>åŸºäºå†å²æ•°æ®æ„å»ºç”¨æˆ·-ç‰©å“å…±ç°çŸ©é˜µ</li><li>åŸºäºå…±ç°çŸ©é˜µè®¡ç®—ä¸¤ä¸¤ç‰©å“ç›¸ä¼¼åº¦</li><li>è·å¾—ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ä¸­æ­£åé¦ˆç‰©å“åˆ—è¡¨</li><li>æ ¹æ®æ­£åé¦ˆç‰©å“ï¼Œæ‰¾å‡ºç›¸ä¼¼ç‰©å“ï¼Œæ ¹æ®ç›¸ä¼¼åº¦åˆ†æ”¯è¿›è¡Œæ¨è</li></ul></li></ul></li><li><p>ååŒè¿‡æ»¤çš„ç¼ºç‚¹</p><ul><li>ä¸å¥½æ³›åŒ–ï¼Œçƒ­é—¨å•†å“æœ‰å¾ˆå¼ºçš„å¤´éƒ¨æ•ˆåº”ï¼Œè·Ÿè°éƒ½ç›¸å…³</li><li>ä»…åˆ©ç”¨ç”¨æˆ·-ç‰©å“çš„äº¤äº’ä¿¡æ¯ï¼Œæ— æ³•æœ‰æ•ˆå¼•å…¥ç”¨æˆ·å¹´é¾„ã€æ€§åˆ«ã€å•†å“æè¿°ç­‰ç”¨æˆ·ã€ç‰©å“ã€ä¸Šä¸‹æ–‡ç‰¹å¾</li></ul></li></ul></li><li><p>åŸºäºçŸ©é˜µåˆ†è§£=ååŒè¿‡æ»¤çš„è¿›åŒ–</p><ul><li>é’ˆå¯¹ååŒè¿‡æ»¤ç®—æ³•çš„å¤´éƒ¨æ•ˆåº”ï¼Œæ³›åŒ–èƒ½åŠ›å¼±çš„é—®é¢˜æ¥æå‡ºçš„</li><li></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ¨èç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TensorFlowå­¦ä¹ ä¹‹ä¸å¹³è¡¡æ•°æ®çš„åˆ†ç±»</title>
      <link href="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/"/>
      <url>/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/</url>
      
        <content type="html"><![CDATA[<h1 id="TensorFlowå­¦ä¹ ä¹‹ä¸å¹³è¡¡æ•°æ®çš„åˆ†ç±»"><a href="#TensorFlowå­¦ä¹ ä¹‹ä¸å¹³è¡¡æ•°æ®çš„åˆ†ç±»" class="headerlink" title="TensorFlowå­¦ä¹ ä¹‹ä¸å¹³è¡¡æ•°æ®çš„åˆ†ç±»"></a>TensorFlowå­¦ä¹ ä¹‹ä¸å¹³è¡¡æ•°æ®çš„åˆ†ç±»</h1><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://www.tensorflow.org/tutorials/structured_data/imbalanced_data" target="_blank" rel="noopener">å®˜ç½‘ä¾‹å­</a></li></ul><h2 id="å¯¼å…¥æ¨¡å—"><a href="#å¯¼å…¥æ¨¡å—" class="headerlink" title="å¯¼å…¥æ¨¡å—"></a>å¯¼å…¥æ¨¡å—</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import tensorflow as tffrom tensorflow import kerasimport osimport datetimeimport tempfileimport matplotlib as mplimport matplotlib.pyplot as pltimport numpy as npimport pandas as pdimport seaborn as snsimport sklearnfrom sklearn.metrics import confusion_matrixfrom sklearn.model_selection import train_test_splitfrom sklearn.preprocessing import StandardScaler<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2021-09-14 15:38:33.691409: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">mpl.rcParams['figure.figsize'] = (12, 10)colors = plt.rcParams['axes.prop_cycle'].by_key()['color']colors<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>[&#39;#1f77b4&#39;, &#39;#ff7f0e&#39;, &#39;#2ca02c&#39;, &#39;#d62728&#39;, &#39;#9467bd&#39;, &#39;#8c564b&#39;, &#39;#e377c2&#39;, &#39;#7f7f7f&#39;, &#39;#bcbd22&#39;, &#39;#17becf&#39;]</code></pre><h2 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h2><ul><li>å°†é¢„æµ‹æ•°æ®æ˜¯å¦ä¼šä¿¡ç”¨å¡æ¬ºè¯ˆ</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_path = './TensorFlowå­¦ä¹ ä¹‹ä¸å¹³è¡¡æ•°æ®çš„åˆ†ç±»/creditcard.csv'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">raw_data = pd.read_csv(train_path)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æ•°æ®æ¢ç´¢"><a href="#æ•°æ®æ¢ç´¢" class="headerlink" title="æ•°æ®æ¢ç´¢"></a>æ•°æ®æ¢ç´¢</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">raw_data.head()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Time</th>      <th>V1</th>      <th>V2</th>      <th>V3</th>      <th>V4</th>      <th>V5</th>      <th>V6</th>      <th>V7</th>      <th>V8</th>      <th>V9</th>      <th>...</th>      <th>V21</th>      <th>V22</th>      <th>V23</th>      <th>V24</th>      <th>V25</th>      <th>V26</th>      <th>V27</th>      <th>V28</th>      <th>Amount</th>      <th>Class</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>0.0</td>      <td>-1.359807</td>      <td>-0.072781</td>      <td>2.536347</td>      <td>1.378155</td>      <td>-0.338321</td>      <td>0.462388</td>      <td>0.239599</td>      <td>0.098698</td>      <td>0.363787</td>      <td>...</td>      <td>-0.018307</td>      <td>0.277838</td>      <td>-0.110474</td>      <td>0.066928</td>      <td>0.128539</td>      <td>-0.189115</td>      <td>0.133558</td>      <td>-0.021053</td>      <td>149.62</td>      <td>0</td>    </tr>    <tr>      <th>1</th>      <td>0.0</td>      <td>1.191857</td>      <td>0.266151</td>      <td>0.166480</td>      <td>0.448154</td>      <td>0.060018</td>      <td>-0.082361</td>      <td>-0.078803</td>      <td>0.085102</td>      <td>-0.255425</td>      <td>...</td>      <td>-0.225775</td>      <td>-0.638672</td>      <td>0.101288</td>      <td>-0.339846</td>      <td>0.167170</td>      <td>0.125895</td>      <td>-0.008983</td>      <td>0.014724</td>      <td>2.69</td>      <td>0</td>    </tr>    <tr>      <th>2</th>      <td>1.0</td>      <td>-1.358354</td>      <td>-1.340163</td>      <td>1.773209</td>      <td>0.379780</td>      <td>-0.503198</td>      <td>1.800499</td>      <td>0.791461</td>      <td>0.247676</td>      <td>-1.514654</td>      <td>...</td>      <td>0.247998</td>      <td>0.771679</td>      <td>0.909412</td>      <td>-0.689281</td>      <td>-0.327642</td>      <td>-0.139097</td>      <td>-0.055353</td>      <td>-0.059752</td>      <td>378.66</td>      <td>0</td>    </tr>    <tr>      <th>3</th>      <td>1.0</td>      <td>-0.966272</td>      <td>-0.185226</td>      <td>1.792993</td>      <td>-0.863291</td>      <td>-0.010309</td>      <td>1.247203</td>      <td>0.237609</td>      <td>0.377436</td>      <td>-1.387024</td>      <td>...</td>      <td>-0.108300</td>      <td>0.005274</td>      <td>-0.190321</td>      <td>-1.175575</td>      <td>0.647376</td>      <td>-0.221929</td>      <td>0.062723</td>      <td>0.061458</td>      <td>123.50</td>      <td>0</td>    </tr>    <tr>      <th>4</th>      <td>2.0</td>      <td>-1.158233</td>      <td>0.877737</td>      <td>1.548718</td>      <td>0.403034</td>      <td>-0.407193</td>      <td>0.095921</td>      <td>0.592941</td>      <td>-0.270533</td>      <td>0.817739</td>      <td>...</td>      <td>-0.009431</td>      <td>0.798278</td>      <td>-0.137458</td>      <td>0.141267</td>      <td>-0.206010</td>      <td>0.502292</td>      <td>0.219422</td>      <td>0.215153</td>      <td>69.99</td>      <td>0</td>    </tr>  </tbody></table><p>5 rows Ã— 31 columns</p></div><pre class="line-numbers language-lang-python"><code class="language-lang-python">raw_data.info(show_counts=True)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;RangeIndex: 284807 entries, 0 to 284806Data columns (total 31 columns): #   Column  Non-Null Count   Dtype  ---  ------  --------------   -----   0   Time    284807 non-null  float64 1   V1      284807 non-null  float64 2   V2      284807 non-null  float64 3   V3      284807 non-null  float64 4   V4      284807 non-null  float64 5   V5      284807 non-null  float64 6   V6      284807 non-null  float64 7   V7      284807 non-null  float64 8   V8      284807 non-null  float64 9   V9      284807 non-null  float64 10  V10     284807 non-null  float64 11  V11     284807 non-null  float64 12  V12     284807 non-null  float64 13  V13     284807 non-null  float64 14  V14     284807 non-null  float64 15  V15     284807 non-null  float64 16  V16     284807 non-null  float64 17  V17     284807 non-null  float64 18  V18     284807 non-null  float64 19  V19     284807 non-null  float64 20  V20     284807 non-null  float64 21  V21     284807 non-null  float64 22  V22     284807 non-null  float64 23  V23     284807 non-null  float64 24  V24     284807 non-null  float64 25  V25     284807 non-null  float64 26  V26     284807 non-null  float64 27  V27     284807 non-null  float64 28  V28     284807 non-null  float64 29  Amount  284807 non-null  float64 30  Class   284807 non-null  int64  dtypes: float64(30), int64(1)memory usage: 67.4 MB</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">raw_data.describe(include='all').T<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>count</th>      <th>mean</th>      <th>std</th>      <th>min</th>      <th>25%</th>      <th>50%</th>      <th>75%</th>      <th>max</th>    </tr>  </thead>  <tbody>    <tr>      <th>Time</th>      <td>284807.0</td>      <td>9.481386e+04</td>      <td>47488.145955</td>      <td>0.000000</td>      <td>54201.500000</td>      <td>84692.000000</td>      <td>139320.500000</td>      <td>172792.000000</td>    </tr>    <tr>      <th>V1</th>      <td>284807.0</td>      <td>1.168375e-15</td>      <td>1.958696</td>      <td>-56.407510</td>      <td>-0.920373</td>      <td>0.018109</td>      <td>1.315642</td>      <td>2.454930</td>    </tr>    <tr>      <th>V2</th>      <td>284807.0</td>      <td>3.416908e-16</td>      <td>1.651309</td>      <td>-72.715728</td>      <td>-0.598550</td>      <td>0.065486</td>      <td>0.803724</td>      <td>22.057729</td>    </tr>    <tr>      <th>V3</th>      <td>284807.0</td>      <td>-1.379537e-15</td>      <td>1.516255</td>      <td>-48.325589</td>      <td>-0.890365</td>      <td>0.179846</td>      <td>1.027196</td>      <td>9.382558</td>    </tr>    <tr>      <th>V4</th>      <td>284807.0</td>      <td>2.074095e-15</td>      <td>1.415869</td>      <td>-5.683171</td>      <td>-0.848640</td>      <td>-0.019847</td>      <td>0.743341</td>      <td>16.875344</td>    </tr>    <tr>      <th>V5</th>      <td>284807.0</td>      <td>9.604066e-16</td>      <td>1.380247</td>      <td>-113.743307</td>      <td>-0.691597</td>      <td>-0.054336</td>      <td>0.611926</td>      <td>34.801666</td>    </tr>    <tr>      <th>V6</th>      <td>284807.0</td>      <td>1.487313e-15</td>      <td>1.332271</td>      <td>-26.160506</td>      <td>-0.768296</td>      <td>-0.274187</td>      <td>0.398565</td>      <td>73.301626</td>    </tr>    <tr>      <th>V7</th>      <td>284807.0</td>      <td>-5.556467e-16</td>      <td>1.237094</td>      <td>-43.557242</td>      <td>-0.554076</td>      <td>0.040103</td>      <td>0.570436</td>      <td>120.589494</td>    </tr>    <tr>      <th>V8</th>      <td>284807.0</td>      <td>1.213481e-16</td>      <td>1.194353</td>      <td>-73.216718</td>      <td>-0.208630</td>      <td>0.022358</td>      <td>0.327346</td>      <td>20.007208</td>    </tr>    <tr>      <th>V9</th>      <td>284807.0</td>      <td>-2.406331e-15</td>      <td>1.098632</td>      <td>-13.434066</td>      <td>-0.643098</td>      <td>-0.051429</td>      <td>0.597139</td>      <td>15.594995</td>    </tr>    <tr>      <th>V10</th>      <td>284807.0</td>      <td>2.239053e-15</td>      <td>1.088850</td>      <td>-24.588262</td>      <td>-0.535426</td>      <td>-0.092917</td>      <td>0.453923</td>      <td>23.745136</td>    </tr>    <tr>      <th>V11</th>      <td>284807.0</td>      <td>1.673327e-15</td>      <td>1.020713</td>      <td>-4.797473</td>      <td>-0.762494</td>      <td>-0.032757</td>      <td>0.739593</td>      <td>12.018913</td>    </tr>    <tr>      <th>V12</th>      <td>284807.0</td>      <td>-1.247012e-15</td>      <td>0.999201</td>      <td>-18.683715</td>      <td>-0.405571</td>      <td>0.140033</td>      <td>0.618238</td>      <td>7.848392</td>    </tr>    <tr>      <th>V13</th>      <td>284807.0</td>      <td>8.190001e-16</td>      <td>0.995274</td>      <td>-5.791881</td>      <td>-0.648539</td>      <td>-0.013568</td>      <td>0.662505</td>      <td>7.126883</td>    </tr>    <tr>      <th>V14</th>      <td>284807.0</td>      <td>1.207294e-15</td>      <td>0.958596</td>      <td>-19.214325</td>      <td>-0.425574</td>      <td>0.050601</td>      <td>0.493150</td>      <td>10.526766</td>    </tr>    <tr>      <th>V15</th>      <td>284807.0</td>      <td>4.887456e-15</td>      <td>0.915316</td>      <td>-4.498945</td>      <td>-0.582884</td>      <td>0.048072</td>      <td>0.648821</td>      <td>8.877742</td>    </tr>    <tr>      <th>V16</th>      <td>284807.0</td>      <td>1.437716e-15</td>      <td>0.876253</td>      <td>-14.129855</td>      <td>-0.468037</td>      <td>0.066413</td>      <td>0.523296</td>      <td>17.315112</td>    </tr>    <tr>      <th>V17</th>      <td>284807.0</td>      <td>-3.772171e-16</td>      <td>0.849337</td>      <td>-25.162799</td>      <td>-0.483748</td>      <td>-0.065676</td>      <td>0.399675</td>      <td>9.253526</td>    </tr>    <tr>      <th>V18</th>      <td>284807.0</td>      <td>9.564149e-16</td>      <td>0.838176</td>      <td>-9.498746</td>      <td>-0.498850</td>      <td>-0.003636</td>      <td>0.500807</td>      <td>5.041069</td>    </tr>    <tr>      <th>V19</th>      <td>284807.0</td>      <td>1.039917e-15</td>      <td>0.814041</td>      <td>-7.213527</td>      <td>-0.456299</td>      <td>0.003735</td>      <td>0.458949</td>      <td>5.591971</td>    </tr>    <tr>      <th>V20</th>      <td>284807.0</td>      <td>6.406204e-16</td>      <td>0.770925</td>      <td>-54.497720</td>      <td>-0.211721</td>      <td>-0.062481</td>      <td>0.133041</td>      <td>39.420904</td>    </tr>    <tr>      <th>V21</th>      <td>284807.0</td>      <td>1.654067e-16</td>      <td>0.734524</td>      <td>-34.830382</td>      <td>-0.228395</td>      <td>-0.029450</td>      <td>0.186377</td>      <td>27.202839</td>    </tr>    <tr>      <th>V22</th>      <td>284807.0</td>      <td>-3.568593e-16</td>      <td>0.725702</td>      <td>-10.933144</td>      <td>-0.542350</td>      <td>0.006782</td>      <td>0.528554</td>      <td>10.503090</td>    </tr>    <tr>      <th>V23</th>      <td>284807.0</td>      <td>2.578648e-16</td>      <td>0.624460</td>      <td>-44.807735</td>      <td>-0.161846</td>      <td>-0.011193</td>      <td>0.147642</td>      <td>22.528412</td>    </tr>    <tr>      <th>V24</th>      <td>284807.0</td>      <td>4.473266e-15</td>      <td>0.605647</td>      <td>-2.836627</td>      <td>-0.354586</td>      <td>0.040976</td>      <td>0.439527</td>      <td>4.584549</td>    </tr>    <tr>      <th>V25</th>      <td>284807.0</td>      <td>5.340915e-16</td>      <td>0.521278</td>      <td>-10.295397</td>      <td>-0.317145</td>      <td>0.016594</td>      <td>0.350716</td>      <td>7.519589</td>    </tr>    <tr>      <th>V26</th>      <td>284807.0</td>      <td>1.683437e-15</td>      <td>0.482227</td>      <td>-2.604551</td>      <td>-0.326984</td>      <td>-0.052139</td>      <td>0.240952</td>      <td>3.517346</td>    </tr>    <tr>      <th>V27</th>      <td>284807.0</td>      <td>-3.660091e-16</td>      <td>0.403632</td>      <td>-22.565679</td>      <td>-0.070840</td>      <td>0.001342</td>      <td>0.091045</td>      <td>31.612198</td>    </tr>    <tr>      <th>V28</th>      <td>284807.0</td>      <td>-1.227390e-16</td>      <td>0.330083</td>      <td>-15.430084</td>      <td>-0.052960</td>      <td>0.011244</td>      <td>0.078280</td>      <td>33.847808</td>    </tr>    <tr>      <th>Amount</th>      <td>284807.0</td>      <td>8.834962e+01</td>      <td>250.120109</td>      <td>0.000000</td>      <td>5.600000</td>      <td>22.000000</td>      <td>77.165000</td>      <td>25691.160000</td>    </tr>    <tr>      <th>Class</th>      <td>284807.0</td>      <td>1.727486e-03</td>      <td>0.041527</td>      <td>0.000000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>1.000000</td>    </tr>  </tbody></table></div><h3 id="æ£€æŸ¥å¹³è¡¡æ€§"><a href="#æ£€æŸ¥å¹³è¡¡æ€§" class="headerlink" title="æ£€æŸ¥å¹³è¡¡æ€§"></a>æ£€æŸ¥å¹³è¡¡æ€§</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">target = 'Class'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">raw_data.groupby(target, as_index=False)['Time'].count()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Class</th>      <th>Time</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>0</td>      <td>284315</td>    </tr>    <tr>      <th>1</th>      <td>1</td>      <td>492</td>    </tr>  </tbody></table></div><pre class="line-numbers language-lang-python"><code class="language-lang-python">neg, pos = np.bincount(raw_data[target])total = neg + posprint('Examples:\n    Total: {}\n    Positive: {} ({:.2f}% of total)\n'.format(    total, pos, 100 * pos / total))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Examples:    Total: 284807    Positive: 492 (0.17% of total)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dataframe = raw_data.copy()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><ol><li>å‰”é™¤æ— ç”¨ç‰¹å¾ï¼Œå¯¹Amountè¿›è¡Œlogå˜æ¢</li><li>æ•°æ®æ ‡å‡†åŒ–</li><li>æˆªæ–­</li></ol><h3 id="logå˜æ¢"><a href="#logå˜æ¢" class="headerlink" title="logå˜æ¢"></a>logå˜æ¢</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">dataframe.pop('Time')eps = 0.001 # 0 => 0.1Â¢for feature in ['Amount']:    dataframe[feature+'_log'] = np.log(dataframe.pop(feature)+eps)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ’åˆ†è®­ç»ƒé›†ã€éªŒè¯é›†ã€æµ‹è¯•é›†"><a href="#åˆ’åˆ†è®­ç»ƒé›†ã€éªŒè¯é›†ã€æµ‹è¯•é›†" class="headerlink" title="åˆ’åˆ†è®­ç»ƒé›†ã€éªŒè¯é›†ã€æµ‹è¯•é›†"></a>åˆ’åˆ†è®­ç»ƒé›†ã€éªŒè¯é›†ã€æµ‹è¯•é›†</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">train, test = train_test_split(dataframe, test_size=0.2, stratify=dataframe[target], random_state=2030)train, val = train_test_split(train, test_size=0.2, stratify=train[target], random_state=2030)print(len(train), 'train examples')print(len(val), 'validation examples')print(len(test), 'test examples')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>182276 train examples45569 validation examples56962 test examples</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># Form np arrays of labels and features.train_labels = np.array(train.pop(target))bool_train_labels = train_labels != 0val_labels = np.array(val.pop(target))test_labels = np.array(test.pop(target))train_features = np.array(train)val_features = np.array(val)test_features = np.array(test)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ ‡å‡†åŒ–"><a href="#æ ‡å‡†åŒ–" class="headerlink" title="æ ‡å‡†åŒ–"></a>æ ‡å‡†åŒ–</h3><ul><li>æ³¨æ„ç”¨è®­ç»ƒé›†çš„æ•°æ®æ¥fit transforméªŒè¯é›†ã€æµ‹è¯•é›†</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">scaler = StandardScaler()train_features = scaler.fit_transform(train_features)val_features = scaler.transform(val_features)test_features = scaler.transform(test_features)train_features = np.clip(train_features, -5, 5)val_features = np.clip(val_features, -5, 5)test_features = np.clip(test_features, -5, 5)print('Training labels shape:', train_labels.shape)print('Validation labels shape:', val_labels.shape)print('Test labels shape:', test_labels.shape)print('Training features shape:', train_features.shape)print('Validation features shape:', val_features.shape)print('Test features shape:', test_features.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Training labels shape: (182276,)Validation labels shape: (45569,)Test labels shape: (56962,)Training features shape: (182276, 29)Validation features shape: (45569, 29)Test features shape: (56962, 29)</code></pre><h3 id="è§‚å¯Ÿæ•°æ®åˆ†å¸ƒ"><a href="#è§‚å¯Ÿæ•°æ®åˆ†å¸ƒ" class="headerlink" title="è§‚å¯Ÿæ•°æ®åˆ†å¸ƒ"></a>è§‚å¯Ÿæ•°æ®åˆ†å¸ƒ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">pos_df = pd.DataFrame(train_features[ bool_train_labels], columns=train.columns)neg_df = pd.DataFrame(train_features[~bool_train_labels], columns=train.columns)sns.jointplot(pos_df['V5'], pos_df['V6'],              kind='hex', xlim=(-5,5), ylim=(-5,5))plt.suptitle("Positive distribution")sns.jointplot(neg_df['V5'], neg_df['V6'],              kind='hex', xlim=(-5,5), ylim=(-5,5))_ = plt.suptitle("Negative distribution")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>/home/meiyunhe/softwares/miniconda3/envs/env_tensorflow/lib/python3.8/site-packages/seaborn/_decorators.py:36: FutureWarning: Pass the following variables as keyword args: x, y. From version 0.12, the only valid positional argument will be `data`, and passing other arguments without an explicit keyword will result in an error or misinterpretation.  warnings.warn(/home/meiyunhe/softwares/miniconda3/envs/env_tensorflow/lib/python3.8/site-packages/seaborn/_decorators.py:36: FutureWarning: Pass the following variables as keyword args: x, y. From version 0.12, the only valid positional argument will be `data`, and passing other arguments without an explicit keyword will result in an error or misinterpretation.  warnings.warn(</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_25_1.png" alt="output_25_1"></p><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_25_2.png" alt="output_25_2"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pos_df.describe().T<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>count</th>      <th>mean</th>      <th>std</th>      <th>min</th>      <th>25%</th>      <th>50%</th>      <th>75%</th>      <th>max</th>    </tr>  </thead>  <tbody>    <tr>      <th>V1</th>      <td>315.0</td>      <td>-1.760906</td>      <td>1.909379</td>      <td>-5.000000</td>      <td>-2.995964</td>      <td>-1.194895</td>      <td>-0.232911</td>      <td>1.087466</td>    </tr>    <tr>      <th>V2</th>      <td>315.0</td>      <td>1.821280</td>      <td>1.886729</td>      <td>-5.000000</td>      <td>0.708689</td>      <td>1.566040</td>      <td>3.037499</td>      <td>5.000000</td>    </tr>    <tr>      <th>V3</th>      <td>315.0</td>      <td>-2.966703</td>      <td>1.843923</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-3.302910</td>      <td>-1.408258</td>      <td>1.486048</td>    </tr>    <tr>      <th>V4</th>      <td>315.0</td>      <td>2.940414</td>      <td>1.616449</td>      <td>-0.924989</td>      <td>1.633506</td>      <td>2.848541</td>      <td>4.487645</td>      <td>5.000000</td>    </tr>    <tr>      <th>V5</th>      <td>315.0</td>      <td>-1.514576</td>      <td>2.295449</td>      <td>-5.000000</td>      <td>-3.413844</td>      <td>-1.120011</td>      <td>0.140397</td>      <td>5.000000</td>    </tr>    <tr>      <th>V6</th>      <td>315.0</td>      <td>-1.041315</td>      <td>1.378416</td>      <td>-4.764846</td>      <td>-1.883094</td>      <td>-1.055371</td>      <td>-0.242898</td>      <td>4.816880</td>    </tr>    <tr>      <th>V7</th>      <td>315.0</td>      <td>-2.473715</td>      <td>2.118062</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-2.385480</td>      <td>-0.803709</td>      <td>3.008926</td>    </tr>    <tr>      <th>V8</th>      <td>315.0</td>      <td>0.661945</td>      <td>2.325665</td>      <td>-5.000000</td>      <td>-0.136614</td>      <td>0.471054</td>      <td>1.472319</td>      <td>5.000000</td>    </tr>    <tr>      <th>V9</th>      <td>315.0</td>      <td>-2.107191</td>      <td>1.819530</td>      <td>-5.000000</td>      <td>-3.521353</td>      <td>-2.012870</td>      <td>-0.719422</td>      <td>3.049323</td>    </tr>    <tr>      <th>V10</th>      <td>315.0</td>      <td>-3.418757</td>      <td>1.897714</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-4.057184</td>      <td>-2.573482</td>      <td>3.691563</td>    </tr>    <tr>      <th>V11</th>      <td>315.0</td>      <td>3.202421</td>      <td>1.776641</td>      <td>-1.665756</td>      <td>2.001885</td>      <td>3.536426</td>      <td>5.000000</td>      <td>5.000000</td>    </tr>    <tr>      <th>V12</th>      <td>315.0</td>      <td>-3.778767</td>      <td>1.782103</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-2.989429</td>      <td>1.234618</td>    </tr>    <tr>      <th>V13</th>      <td>315.0</td>      <td>-0.122043</td>      <td>1.112873</td>      <td>-3.142507</td>      <td>-0.973313</td>      <td>-0.067780</td>      <td>0.622709</td>      <td>2.828751</td>    </tr>    <tr>      <th>V14</th>      <td>315.0</td>      <td>-4.120755</td>      <td>1.711212</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-4.441194</td>      <td>1.639314</td>    </tr>    <tr>      <th>V15</th>      <td>315.0</td>      <td>-0.127527</td>      <td>1.146112</td>      <td>-3.382938</td>      <td>-0.759891</td>      <td>-0.073017</td>      <td>0.701528</td>      <td>2.697669</td>    </tr>    <tr>      <th>V16</th>      <td>315.0</td>      <td>-3.043271</td>      <td>2.275678</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-3.836717</td>      <td>-1.316847</td>      <td>2.841122</td>    </tr>    <tr>      <th>V17</th>      <td>315.0</td>      <td>-3.171004</td>      <td>2.850112</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-1.612624</td>      <td>5.000000</td>    </tr>    <tr>      <th>V18</th>      <td>315.0</td>      <td>-2.069377</td>      <td>2.456956</td>      <td>-5.000000</td>      <td>-5.000000</td>      <td>-1.969603</td>      <td>-0.060276</td>      <td>3.926839</td>    </tr>    <tr>      <th>V19</th>      <td>315.0</td>      <td>0.875712</td>      <td>1.872091</td>      <td>-4.032744</td>      <td>-0.339676</td>      <td>0.841347</td>      <td>1.961852</td>      <td>5.000000</td>    </tr>    <tr>      <th>V20</th>      <td>315.0</td>      <td>0.486428</td>      <td>1.460203</td>      <td>-5.000000</td>      <td>-0.160274</td>      <td>0.370908</td>      <td>1.086496</td>      <td>5.000000</td>    </tr>    <tr>      <th>V21</th>      <td>315.0</td>      <td>0.798396</td>      <td>1.932013</td>      <td>-5.000000</td>      <td>0.032131</td>      <td>0.790971</td>      <td>1.855851</td>      <td>5.000000</td>    </tr>    <tr>      <th>V22</th>      <td>315.0</td>      <td>0.137193</td>      <td>1.411641</td>      <td>-5.000000</td>      <td>-0.657904</td>      <td>0.159077</td>      <td>0.897130</td>      <td>5.000000</td>    </tr>    <tr>      <th>V23</th>      <td>315.0</td>      <td>0.019576</td>      <td>1.377033</td>      <td>-5.000000</td>      <td>-0.546028</td>      <td>-0.127559</td>      <td>0.525010</td>      <td>5.000000</td>    </tr>    <tr>      <th>V24</th>      <td>315.0</td>      <td>-0.124175</td>      <td>0.838200</td>      <td>-3.342668</td>      <td>-0.666720</td>      <td>-0.042600</td>      <td>0.534642</td>      <td>1.799373</td>    </tr>    <tr>      <th>V25</th>      <td>315.0</td>      <td>0.084645</td>      <td>1.419304</td>      <td>-4.153589</td>      <td>-0.605800</td>      <td>0.145072</td>      <td>0.876187</td>      <td>4.132529</td>    </tr>    <tr>      <th>V26</th>      <td>315.0</td>      <td>0.072469</td>      <td>0.977484</td>      <td>-2.388598</td>      <td>-0.543418</td>      <td>0.000739</td>      <td>0.760928</td>      <td>5.000000</td>    </tr>    <tr>      <th>V27</th>      <td>315.0</td>      <td>0.675460</td>      <td>2.413487</td>      <td>-5.000000</td>      <td>-0.045323</td>      <td>0.923004</td>      <td>2.036083</td>      <td>5.000000</td>    </tr>    <tr>      <th>V28</th>      <td>315.0</td>      <td>0.239053</td>      <td>1.653805</td>      <td>-5.000000</td>      <td>-0.355816</td>      <td>0.465788</td>      <td>1.105123</td>      <td>5.000000</td>    </tr>    <tr>      <th>Amount_log</th>      <td>315.0</td>      <td>-0.382619</td>      <td>1.617817</td>      <td>-4.855759</td>      <td>-1.450333</td>      <td>-0.356358</td>      <td>0.847578</td>      <td>2.325855</td>    </tr>  </tbody></table></div><pre class="line-numbers language-lang-python"><code class="language-lang-python">neg_df.describe().T<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>count</th>      <th>mean</th>      <th>std</th>      <th>min</th>      <th>25%</th>      <th>50%</th>      <th>75%</th>      <th>max</th>    </tr>  </thead>  <tbody>    <tr>      <th>V1</th>      <td>181961.0</td>      <td>0.012509</td>      <td>0.915748</td>      <td>-5.000000</td>      <td>-0.465855</td>      <td>0.011296</td>      <td>0.672076</td>      <td>1.251724</td>    </tr>    <tr>      <th>V2</th>      <td>181961.0</td>      <td>0.008627</td>      <td>0.856092</td>      <td>-5.000000</td>      <td>-0.359485</td>      <td>0.040111</td>      <td>0.481902</td>      <td>5.000000</td>    </tr>    <tr>      <th>V3</th>      <td>181961.0</td>      <td>0.011040</td>      <td>0.936744</td>      <td>-5.000000</td>      <td>-0.584617</td>      <td>0.120097</td>      <td>0.678324</td>      <td>2.790418</td>    </tr>    <tr>      <th>V4</th>      <td>181961.0</td>      <td>-0.006194</td>      <td>0.983917</td>      <td>-3.924999</td>      <td>-0.600361</td>      <td>-0.017643</td>      <td>0.521791</td>      <td>5.000000</td>    </tr>    <tr>      <th>V5</th>      <td>181961.0</td>      <td>0.005026</td>      <td>0.882939</td>      <td>-5.000000</td>      <td>-0.493601</td>      <td>-0.038049</td>      <td>0.438492</td>      <td>5.000000</td>    </tr>    <tr>      <th>V6</th>      <td>181961.0</td>      <td>0.001449</td>      <td>0.965131</td>      <td>-5.000000</td>      <td>-0.570013</td>      <td>-0.203485</td>      <td>0.298300</td>      <td>5.000000</td>    </tr>    <tr>      <th>V7</th>      <td>181961.0</td>      <td>0.005842</td>      <td>0.818787</td>      <td>-5.000000</td>      <td>-0.437768</td>      <td>0.031821</td>      <td>0.452537</td>      <td>5.000000</td>    </tr>    <tr>      <th>V8</th>      <td>181961.0</td>      <td>0.017644</td>      <td>0.745925</td>      <td>-5.000000</td>      <td>-0.172570</td>      <td>0.019889</td>      <td>0.272858</td>      <td>5.000000</td>    </tr>    <tr>      <th>V9</th>      <td>181961.0</td>      <td>0.002619</td>      <td>0.983578</td>      <td>-5.000000</td>      <td>-0.583394</td>      <td>-0.045386</td>      <td>0.543770</td>      <td>5.000000</td>    </tr>    <tr>      <th>V10</th>      <td>181961.0</td>      <td>0.000444</td>      <td>0.884508</td>      <td>-5.000000</td>      <td>-0.488516</td>      <td>-0.085221</td>      <td>0.419347</td>      <td>5.000000</td>    </tr>    <tr>      <th>V11</th>      <td>181961.0</td>      <td>-0.006827</td>      <td>0.980387</td>      <td>-4.583258</td>      <td>-0.747892</td>      <td>-0.032732</td>      <td>0.720054</td>      <td>5.000000</td>    </tr>    <tr>      <th>V12</th>      <td>181961.0</td>      <td>0.011853</td>      <td>0.936165</td>      <td>-5.000000</td>      <td>-0.402320</td>      <td>0.141804</td>      <td>0.617894</td>      <td>5.000000</td>    </tr>    <tr>      <th>V13</th>      <td>181961.0</td>      <td>0.000204</td>      <td>0.999690</td>      <td>-5.000000</td>      <td>-0.650306</td>      <td>-0.012781</td>      <td>0.666657</td>      <td>5.000000</td>    </tr>    <tr>      <th>V14</th>      <td>181961.0</td>      <td>0.013696</td>      <td>0.919757</td>      <td>-5.000000</td>      <td>-0.441005</td>      <td>0.055106</td>      <td>0.513936</td>      <td>5.000000</td>    </tr>    <tr>      <th>V15</th>      <td>181961.0</td>      <td>0.000164</td>      <td>0.999363</td>      <td>-4.793884</td>      <td>-0.638472</td>      <td>0.053209</td>      <td>0.708801</td>      <td>5.000000</td>    </tr>    <tr>      <th>V16</th>      <td>181961.0</td>      <td>0.008581</td>      <td>0.957594</td>      <td>-5.000000</td>      <td>-0.530996</td>      <td>0.077795</td>      <td>0.596470</td>      <td>5.000000</td>    </tr>    <tr>      <th>V17</th>      <td>181961.0</td>      <td>0.014459</td>      <td>0.855516</td>      <td>-5.000000</td>      <td>-0.566987</td>      <td>-0.076122</td>      <td>0.470954</td>      <td>5.000000</td>    </tr>    <tr>      <th>V18</th>      <td>181961.0</td>      <td>0.004775</td>      <td>0.983692</td>      <td>-5.000000</td>      <td>-0.595008</td>      <td>-0.002535</td>      <td>0.599786</td>      <td>5.000000</td>    </tr>    <tr>      <th>V19</th>      <td>181961.0</td>      <td>-0.001509</td>      <td>0.996377</td>      <td>-5.000000</td>      <td>-0.562193</td>      <td>0.003682</td>      <td>0.561334</td>      <td>5.000000</td>    </tr>    <tr>      <th>V20</th>      <td>181961.0</td>      <td>0.001119</td>      <td>0.768444</td>      <td>-5.000000</td>      <td>-0.273441</td>      <td>-0.082090</td>      <td>0.168334</td>      <td>5.000000</td>    </tr>    <tr>      <th>V21</th>      <td>181961.0</td>      <td>-0.009335</td>      <td>0.713355</td>      <td>-5.000000</td>      <td>-0.306948</td>      <td>-0.039843</td>      <td>0.251401</td>      <td>5.000000</td>    </tr>    <tr>      <th>V22</th>      <td>181961.0</td>      <td>0.000416</td>      <td>0.988440</td>      <td>-5.000000</td>      <td>-0.743404</td>      <td>0.007948</td>      <td>0.728703</td>      <td>5.000000</td>    </tr>    <tr>      <th>V23</th>      <td>181961.0</td>      <td>0.003516</td>      <td>0.695287</td>      <td>-5.000000</td>      <td>-0.258290</td>      <td>-0.019468</td>      <td>0.233072</td>      <td>5.000000</td>    </tr>    <tr>      <th>V24</th>      <td>181961.0</td>      <td>-0.000064</td>      <td>0.998703</td>      <td>-4.656135</td>      <td>-0.583868</td>      <td>0.067759</td>      <td>0.725433</td>      <td>5.000000</td>    </tr>    <tr>      <th>V25</th>      <td>181961.0</td>      <td>0.000240</td>      <td>0.989529</td>      <td>-5.000000</td>      <td>-0.609040</td>      <td>0.032075</td>      <td>0.672402</td>      <td>5.000000</td>    </tr>    <tr>      <th>V26</th>      <td>181961.0</td>      <td>-0.000407</td>      <td>0.998447</td>      <td>-5.000000</td>      <td>-0.677797</td>      <td>-0.109895</td>      <td>0.498649</td>      <td>5.000000</td>    </tr>    <tr>      <th>V27</th>      <td>181961.0</td>      <td>0.005844</td>      <td>0.799027</td>      <td>-5.000000</td>      <td>-0.176850</td>      <td>0.002015</td>      <td>0.224085</td>      <td>5.000000</td>    </tr>    <tr>      <th>V28</th>      <td>181961.0</td>      <td>-0.001089</td>      <td>0.700654</td>      <td>-5.000000</td>      <td>-0.161470</td>      <td>0.034111</td>      <td>0.239486</td>      <td>5.000000</td>    </tr>    <tr>      <th>Amount_log</th>      <td>181961.0</td>      <td>0.000662</td>      <td>0.998482</td>      <td>-4.855759</td>      <td>-0.587677</td>      <td>0.075498</td>      <td>0.691266</td>      <td>3.554182</td>    </tr>  </tbody></table></div><h2 id="å®šä¹‰æ¨¡å‹å’Œmetrics"><a href="#å®šä¹‰æ¨¡å‹å’Œmetrics" class="headerlink" title="å®šä¹‰æ¨¡å‹å’Œmetrics"></a>å®šä¹‰æ¨¡å‹å’Œmetrics</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">METRICS = [    keras.metrics.TruePositives(name='tp'),    keras.metrics.FalsePositives(name='fp'),    keras.metrics.TrueNegatives(name='tn'),    keras.metrics.FalseNegatives(name='fn'),    keras.metrics.BinaryAccuracy(name='acc'),    keras.metrics.Precision(name='precision'),    keras.metrics.Recall(name='recall'),    keras.metrics.AUC(name='auc'),    keras.metrics.AUC(name='prc', curve='PR'),]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2021-09-14 15:38:41.927807: I tensorflow/compiler/jit/xla_cpu_device.cc:41] Not creating XLA devices, tf_xla_enable_xla_devices not set2021-09-14 15:38:41.929747: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcuda.so.12021-09-14 15:38:42.132272: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties: pciBusID: 0000:06:00.0 name: Tesla P40 computeCapability: 6.1coreClock: 1.531GHz coreCount: 30 deviceMemorySize: 22.38GiB deviceMemoryBandwidth: 323.21GiB/s2021-09-14 15:38:42.132316: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.02021-09-14 15:38:42.135128: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.112021-09-14 15:38:42.135177: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.112021-09-14 15:38:42.136258: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.102021-09-14 15:38:42.136515: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.102021-09-14 15:38:42.138962: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.102021-09-14 15:38:42.139484: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.112021-09-14 15:38:42.139633: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.82021-09-14 15:38:42.142269: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 02021-09-14 15:38:42.145697: I tensorflow/compiler/jit/xla_gpu_device.cc:99] Not creating XLA devices, tf_xla_enable_xla_devices not set2021-09-14 15:38:42.148120: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties: pciBusID: 0000:06:00.0 name: Tesla P40 computeCapability: 6.1coreClock: 1.531GHz coreCount: 30 deviceMemorySize: 22.38GiB deviceMemoryBandwidth: 323.21GiB/s2021-09-14 15:38:42.148158: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.02021-09-14 15:38:42.148193: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.112021-09-14 15:38:42.148224: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.112021-09-14 15:38:42.148252: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.102021-09-14 15:38:42.148280: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.102021-09-14 15:38:42.148308: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.102021-09-14 15:38:42.148336: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.112021-09-14 15:38:42.148364: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.82021-09-14 15:38:42.152837: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 02021-09-14 15:38:42.152897: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.02021-09-14 15:38:42.781704: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1261] Device interconnect StreamExecutor with strength 1 edge matrix:2021-09-14 15:38:42.781748: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1267]      0 2021-09-14 15:38:42.781756: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1280] 0:   N 2021-09-14 15:38:42.785308: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1406] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 21298 MB memory) -&gt; physical GPU (device: 0, name: Tesla P40, pci bus id: 0000:06:00.0, compute capability: 6.1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_make_model(n_x, metrics=None, output_bias=None):    """    :param n_x: è¾“å…¥ç‰¹å¾ç»´åº¦    :param metrics:    :param output_bias:    :return model    """    if metrics is None:        metrics = [keras.metrics.BinaryAccuracy(name='acc')]    if output_bias is not None:        output_bias = tf.keras.initializers.Constant(output_bias)    model = keras.Sequential([        keras.layers.Dense(16, activation='relu', input_shape=(n_x, )),        keras.layers.Dropout(0.5),        keras.layers.Dense(1, activation='sigmoid', bias_initializer=output_bias),    ])    model.compile(optimizer=keras.optimizers.Adam(learning_rate=1e-3),                  loss=keras.losses.BinaryCrossentropy(),                  metrics=metrics)    return model<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="baseline-model"><a href="#baseline-model" class="headerlink" title="baseline model"></a>baseline model</h2><h3 id="build-the-model"><a href="#build-the-model" class="headerlink" title="build the model"></a>build the model</h3><ul><li><code>restore_best_weights</code>: Whether to restore model weights from the epoch with the best value of the monitored quantity. If False, the model weights obtained at the last step of training are used.</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">EPOCHS = 100BATCH_SIZE = 2048early_stopping = tf.keras.callbacks.EarlyStopping(monitor='val_prc',                                                  verbose=1,                                                  patience=10,                                                  mode='max',                                                  restore_best_weights=True)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline = func_make_model(n_x=train_features.shape[-1], metrics=METRICS)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline.summary()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>Model: &quot;sequential&quot;_________________________________________________________________Layer (type)                 Output Shape              Param #   =================================================================dense (Dense)                (None, 16)                480       _________________________________________________________________dropout (Dropout)            (None, 16)                0         _________________________________________________________________dense_1 (Dense)              (None, 1)                 17        =================================================================Total params: 497Trainable params: 497Non-trainable params: 0_________________________________________________________________</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline.predict(train_features[:10])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>2021-09-14 15:38:43.448415: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:116] None of the MLIR optimization passes are enabled (registered 2)2021-09-14 15:38:43.449074: I tensorflow/core/platform/profile_utils/cpu_utils.cc:112] CPU Frequency: 2394435000 Hz2021-09-14 15:38:43.566365: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.112021-09-14 15:38:43.851378: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.11array([[0.7945324 ],       [0.9206671 ],       [0.7186621 ],       [0.8676042 ],       [0.86442024],       [0.820997  ],       [0.8121756 ],       [0.8080936 ],       [0.820931  ],       [0.9337303 ]], dtype=float32)</code></pre><h3 id="set-the-correct-initial-bias"><a href="#set-the-correct-initial-bias" class="headerlink" title="set the correct initial bias"></a>set the correct initial bias</h3><p>å‚è€ƒ<a href="http://karpathy.github.io/2019/04/25/recipe/#2-set-up-the-end-to-end-trainingevaluation-skeleton--get-dumb-baselines" target="_blank" rel="noopener">è®­ç»ƒç¥ç»ç½‘ç»œçš„æ–¹æ³•</a></p><ol><li>With the default bias initialization the loss should be about <code>math.log(2)=0.69314</code></li><li>The correct bias to set can be derived from:</li></ol><script type="math/tex; mode=display">p_0 = pos/(pos + neg) = 1/(1+e^{-b_0}) \\b_0 = -log_e(1/p_0 - 1) \\b_0 = log_e(pos/neg)</script><ol><li>with correct bias the loss should be about:</li></ol><script type="math/tex; mode=display">-p_0log(p_0)-(1-p_0)log(1-p_0)</script><pre class="line-numbers language-lang-python"><code class="language-lang-python">## 1results = model_baseline.evaluate(train_features, train_labels, batch_size=BATCH_SIZE, verbose=0)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(results[0])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>1.9581257104873657</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">## 2correct_initial_bias = np.log([pos/neg])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">correct_initial_bias<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([-6.35935934])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline = func_make_model(n_x=train_features.shape[-1], metrics=METRICS, output_bias=correct_initial_bias)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline.predict(train_features[:10])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[0.00340313],       [0.00266778],       [0.00226334],       [0.00272266],       [0.00042819],       [0.00054607],       [0.00602424],       [0.00321096],       [0.0007532 ],       [0.00322443]], dtype=float32)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">## 3p_0 = pos / (pos+neg)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">-1*p_0*np.log(p_0) - (1-p_0)*np.log(1-p_0)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>0.012714681335936208</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">results = model_baseline.evaluate(train_features, train_labels, batch_size=BATCH_SIZE, verbose=0)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(results[0])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>0.015545893460512161</code></pre><h3 id="checkpoint-the-initial-weights"><a href="#checkpoint-the-initial-weights" class="headerlink" title="checkpoint the initial weights"></a>checkpoint the initial weights</h3><ul><li>ä¸ºäº†æ–¹ä¾¿ä¹‹åå‡ ä¸ªæ¨¡å‹çš„å‚æ•°åˆå§‹åŒ–ï¼Œæ•…å°†è¿™æ¬¡çº æ­£è¿‡çš„åˆå§‹åŒ–å‚æ•°ä¿å­˜ä¸‹æ¥</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python"># os.path.join(tempfile.mkdtemp(), 'initial_weights')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">correct_initial_bias_path = './tmp/correct_initial_bias/correct_initial_bias'model_baseline.save_weights(correct_initial_bias_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="çœ‹ä¸€ä¸‹çº æ­£å‚æ•°åˆå§‹åŒ–åçš„æ•ˆæœ"><a href="#çœ‹ä¸€ä¸‹çº æ­£å‚æ•°åˆå§‹åŒ–åçš„æ•ˆæœ" class="headerlink" title="çœ‹ä¸€ä¸‹çº æ­£å‚æ•°åˆå§‹åŒ–åçš„æ•ˆæœ"></a>çœ‹ä¸€ä¸‹çº æ­£å‚æ•°åˆå§‹åŒ–åçš„æ•ˆæœ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline = func_make_model(n_x=train_features.shape[-1], metrics=METRICS)model_baseline.load_weights(correct_initial_bias_path)model_baseline.layers[-1].bias.assign([0.0])  # è®¾ç½®æœ€åä¸€å±‚çš„biasä¸º0zero_bias_history = model_baseline.fit(train_features, train_labels, batch_size=BATCH_SIZE, epochs=20, validation_data=(val_features, val_labels), verbose=0)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline = func_make_model(n_x=train_features.shape[-1], metrics=METRICS)model_baseline.load_weights(correct_initial_bias_path)correct_bias_history = model_baseline.fit(train_features, train_labels, batch_size=BATCH_SIZE, epochs=20, validation_data=(val_features, val_labels), verbose=0)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_plot_loss(history, label, color):    # Use a log scale on y-axis to show the wide range of values.    plt.semilogy(history.epoch, history.history['loss'], color=color, label='Train ' + label)    plt.semilogy(history.epoch, history.history['val_loss'], color=color, label='Val ' + label, linestyle="--")    plt.xlabel('Epoch')    plt.ylabel('Loss')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_loss(zero_bias_history, "Zero Bias", 'red')func_plot_loss(correct_bias_history, "Careful Bias", 'blue')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_54_0.png" alt="output_54_0"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œçº æ­£è¿‡åï¼ŒæŸå¤±å€¼æ›´å°</p><h3 id="train-the-baseline-model"><a href="#train-the-baseline-model" class="headerlink" title="train the baseline model"></a>train the baseline model</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_baseline = func_make_model(n_x=train_features.shape[-1], metrics=METRICS)model_baseline.load_weights(correct_initial_bias_path)baseline_history = model_baseline.fit(train_features, train_labels, batch_size=BATCH_SIZE, epochs=EPOCHS,                                       callbacks=[early_stopping], validation_data=(val_features, val_labels))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Epoch 1/10090/90 [==============================] - 4s 21ms/step - loss: 0.0147 - tp: 64.8352 - fp: 45.5934 - tn: 139430.5055 - fn: 168.6374 - acc: 0.9985 - precision: 0.5985 - recall: 0.3220 - auc: 0.7673 - prc: 0.3309 - val_loss: 0.0073 - val_tp: 0.0000e+00 - val_fp: 0.0000e+00 - val_tn: 45490.0000 - val_fn: 79.0000 - val_acc: 0.9983 - val_precision: 0.0000e+00 - val_recall: 0.0000e+00 - val_auc: 0.8791 - val_prc: 0.6609Epoch 2/10090/90 [==============================] - 1s 11ms/step - loss: 0.0078 - tp: 48.4505 - fp: 13.4286 - tn: 93966.1978 - fn: 112.4945 - acc: 0.9987 - precision: 0.8123 - recall: 0.3008 - auc: 0.8303 - prc: 0.4306 - val_loss: 0.0051 - val_tp: 29.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 50.0000 - val_acc: 0.9988 - val_precision: 0.8286 - val_recall: 0.3671 - val_auc: 0.8922 - val_prc: 0.6677Epoch 3/10090/90 [==============================] - 1s 11ms/step - loss: 0.0081 - tp: 65.3846 - fp: 14.6813 - tn: 93958.2637 - fn: 102.2418 - acc: 0.9986 - precision: 0.7926 - recall: 0.3719 - auc: 0.8072 - prc: 0.4533 - val_loss: 0.0045 - val_tp: 44.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 35.0000 - val_acc: 0.9991 - val_precision: 0.8800 - val_recall: 0.5570 - val_auc: 0.9048 - val_prc: 0.6881Epoch 4/10090/90 [==============================] - 1s 11ms/step - loss: 0.0068 - tp: 71.2308 - fp: 15.0110 - tn: 93965.9011 - fn: 88.4286 - acc: 0.9989 - precision: 0.8163 - recall: 0.4337 - auc: 0.8344 - prc: 0.5153 - val_loss: 0.0042 - val_tp: 47.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 32.0000 - val_acc: 0.9992 - val_precision: 0.8868 - val_recall: 0.5949 - val_auc: 0.9175 - val_prc: 0.7249Epoch 5/10090/90 [==============================] - 1s 11ms/step - loss: 0.0057 - tp: 76.8901 - fp: 19.1648 - tn: 93963.4286 - fn: 81.0879 - acc: 0.9989 - precision: 0.7970 - recall: 0.4733 - auc: 0.8757 - prc: 0.5857 - val_loss: 0.0040 - val_tp: 48.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 31.0000 - val_acc: 0.9992 - val_precision: 0.8889 - val_recall: 0.6076 - val_auc: 0.9175 - val_prc: 0.7392Epoch 6/10090/90 [==============================] - 1s 10ms/step - loss: 0.0064 - tp: 74.9560 - fp: 15.1319 - tn: 93958.1099 - fn: 92.3736 - acc: 0.9988 - precision: 0.8518 - recall: 0.4300 - auc: 0.8618 - prc: 0.5888 - val_loss: 0.0039 - val_tp: 52.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 27.0000 - val_acc: 0.9993 - val_precision: 0.8966 - val_recall: 0.6582 - val_auc: 0.9174 - val_prc: 0.7480Epoch 7/10090/90 [==============================] - 1s 10ms/step - loss: 0.0047 - tp: 88.3846 - fp: 12.4615 - tn: 93968.0549 - fn: 71.6703 - acc: 0.9991 - precision: 0.8904 - recall: 0.5613 - auc: 0.9146 - prc: 0.7047 - val_loss: 0.0038 - val_tp: 54.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 25.0000 - val_acc: 0.9993 - val_precision: 0.9000 - val_recall: 0.6835 - val_auc: 0.9174 - val_prc: 0.7568Epoch 8/10090/90 [==============================] - 1s 8ms/step - loss: 0.0043 - tp: 95.3297 - fp: 19.2418 - tn: 93959.6923 - fn: 66.3077 - acc: 0.9991 - precision: 0.8432 - recall: 0.6045 - auc: 0.9324 - prc: 0.7021 - val_loss: 0.0037 - val_tp: 52.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 27.0000 - val_acc: 0.9993 - val_precision: 0.8966 - val_recall: 0.6582 - val_auc: 0.9174 - val_prc: 0.7711Epoch 9/10090/90 [==============================] - 1s 9ms/step - loss: 0.0049 - tp: 94.0220 - fp: 11.9890 - tn: 93963.3736 - fn: 71.1868 - acc: 0.9991 - precision: 0.9108 - recall: 0.5838 - auc: 0.8996 - prc: 0.7061 - val_loss: 0.0036 - val_tp: 53.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 26.0000 - val_acc: 0.9993 - val_precision: 0.8983 - val_recall: 0.6709 - val_auc: 0.9175 - val_prc: 0.7826Epoch 10/10090/90 [==============================] - 1s 9ms/step - loss: 0.0045 - tp: 91.1209 - fp: 20.6923 - tn: 93955.2747 - fn: 73.4835 - acc: 0.9990 - precision: 0.8317 - recall: 0.5825 - auc: 0.9340 - prc: 0.6933 - val_loss: 0.0036 - val_tp: 53.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 26.0000 - val_acc: 0.9993 - val_precision: 0.8983 - val_recall: 0.6709 - val_auc: 0.9175 - val_prc: 0.7929Epoch 11/10090/90 [==============================] - 1s 8ms/step - loss: 0.0045 - tp: 84.9231 - fp: 18.3956 - tn: 93962.7363 - fn: 74.5165 - acc: 0.9990 - precision: 0.8351 - recall: 0.5411 - auc: 0.9233 - prc: 0.6955 - val_loss: 0.0035 - val_tp: 55.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 24.0000 - val_acc: 0.9993 - val_precision: 0.9016 - val_recall: 0.6962 - val_auc: 0.9238 - val_prc: 0.7973Epoch 12/10090/90 [==============================] - 1s 10ms/step - loss: 0.0046 - tp: 101.3626 - fp: 17.9341 - tn: 93954.2088 - fn: 67.0659 - acc: 0.9991 - precision: 0.8479 - recall: 0.6011 - auc: 0.9329 - prc: 0.7196 - val_loss: 0.0035 - val_tp: 55.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 24.0000 - val_acc: 0.9993 - val_precision: 0.9016 - val_recall: 0.6962 - val_auc: 0.9175 - val_prc: 0.7939Epoch 13/10090/90 [==============================] - 1s 11ms/step - loss: 0.0050 - tp: 94.1099 - fp: 18.0110 - tn: 93957.0110 - fn: 71.4396 - acc: 0.9990 - precision: 0.8307 - recall: 0.5390 - auc: 0.9075 - prc: 0.6494 - val_loss: 0.0035 - val_tp: 56.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 23.0000 - val_acc: 0.9994 - val_precision: 0.9032 - val_recall: 0.7089 - val_auc: 0.9238 - val_prc: 0.7989Epoch 14/10090/90 [==============================] - 1s 9ms/step - loss: 0.0047 - tp: 89.5495 - fp: 17.6264 - tn: 93958.5604 - fn: 74.8352 - acc: 0.9990 - precision: 0.8187 - recall: 0.5544 - auc: 0.9229 - prc: 0.6758 - val_loss: 0.0035 - val_tp: 58.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 21.0000 - val_acc: 0.9994 - val_precision: 0.9062 - val_recall: 0.7342 - val_auc: 0.9238 - val_prc: 0.7989Epoch 15/10090/90 [==============================] - 1s 8ms/step - loss: 0.0043 - tp: 87.0000 - fp: 16.5934 - tn: 93963.8571 - fn: 73.1209 - acc: 0.9991 - precision: 0.8336 - recall: 0.5472 - auc: 0.9099 - prc: 0.6537 - val_loss: 0.0035 - val_tp: 58.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 21.0000 - val_acc: 0.9994 - val_precision: 0.9062 - val_recall: 0.7342 - val_auc: 0.9238 - val_prc: 0.7999Epoch 16/10090/90 [==============================] - 1s 8ms/step - loss: 0.0040 - tp: 93.5275 - fp: 14.4725 - tn: 93967.1099 - fn: 65.4615 - acc: 0.9992 - precision: 0.8623 - recall: 0.5874 - auc: 0.9295 - prc: 0.7207 - val_loss: 0.0034 - val_tp: 58.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 21.0000 - val_acc: 0.9994 - val_precision: 0.9206 - val_recall: 0.7342 - val_auc: 0.9238 - val_prc: 0.8039Epoch 17/10090/90 [==============================] - 1s 8ms/step - loss: 0.0044 - tp: 87.9451 - fp: 15.0000 - tn: 93970.7033 - fn: 66.9231 - acc: 0.9991 - precision: 0.8475 - recall: 0.5557 - auc: 0.9207 - prc: 0.6808 - val_loss: 0.0034 - val_tp: 59.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 20.0000 - val_acc: 0.9995 - val_precision: 0.9219 - val_recall: 0.7468 - val_auc: 0.9238 - val_prc: 0.8054Epoch 18/10090/90 [==============================] - 1s 11ms/step - loss: 0.0042 - tp: 100.8462 - fp: 18.8791 - tn: 93962.7253 - fn: 58.1209 - acc: 0.9991 - precision: 0.8238 - recall: 0.6282 - auc: 0.9299 - prc: 0.7125 - val_loss: 0.0034 - val_tp: 58.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 21.0000 - val_acc: 0.9994 - val_precision: 0.9206 - val_recall: 0.7342 - val_auc: 0.9238 - val_prc: 0.8091Epoch 19/10090/90 [==============================] - 1s 9ms/step - loss: 0.0038 - tp: 91.3956 - fp: 16.1758 - tn: 93965.0989 - fn: 67.9011 - acc: 0.9991 - precision: 0.8653 - recall: 0.5567 - auc: 0.9329 - prc: 0.7471 - val_loss: 0.0034 - val_tp: 59.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 20.0000 - val_acc: 0.9995 - val_precision: 0.9219 - val_recall: 0.7468 - val_auc: 0.9238 - val_prc: 0.8081Epoch 20/10090/90 [==============================] - 1s 10ms/step - loss: 0.0035 - tp: 101.1978 - fp: 20.1209 - tn: 93958.4615 - fn: 60.7912 - acc: 0.9992 - precision: 0.8429 - recall: 0.6451 - auc: 0.9545 - prc: 0.7794 - val_loss: 0.0034 - val_tp: 59.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 20.0000 - val_acc: 0.9995 - val_precision: 0.9219 - val_recall: 0.7468 - val_auc: 0.9238 - val_prc: 0.8084Epoch 21/10090/90 [==============================] - 1s 9ms/step - loss: 0.0033 - tp: 102.5495 - fp: 16.1868 - tn: 93968.0000 - fn: 53.8352 - acc: 0.9993 - precision: 0.8732 - recall: 0.6806 - auc: 0.9385 - prc: 0.7763 - val_loss: 0.0034 - val_tp: 52.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 27.0000 - val_acc: 0.9993 - val_precision: 0.9123 - val_recall: 0.6582 - val_auc: 0.9238 - val_prc: 0.8112Epoch 22/10090/90 [==============================] - 1s 8ms/step - loss: 0.0044 - tp: 89.4615 - fp: 16.7363 - tn: 93964.2857 - fn: 70.0879 - acc: 0.9991 - precision: 0.8323 - recall: 0.5465 - auc: 0.9189 - prc: 0.6915 - val_loss: 0.0033 - val_tp: 55.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 24.0000 - val_acc: 0.9994 - val_precision: 0.9167 - val_recall: 0.6962 - val_auc: 0.9238 - val_prc: 0.8102Epoch 23/10090/90 [==============================] - 1s 9ms/step - loss: 0.0038 - tp: 98.5385 - fp: 15.2198 - tn: 93966.8791 - fn: 59.9341 - acc: 0.9992 - precision: 0.8713 - recall: 0.6000 - auc: 0.9229 - prc: 0.7481 - val_loss: 0.0033 - val_tp: 55.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 24.0000 - val_acc: 0.9994 - val_precision: 0.9167 - val_recall: 0.6962 - val_auc: 0.9237 - val_prc: 0.8129Epoch 24/10090/90 [==============================] - 1s 9ms/step - loss: 0.0039 - tp: 97.1868 - fp: 18.4505 - tn: 93961.9890 - fn: 62.9451 - acc: 0.9992 - precision: 0.8358 - recall: 0.6341 - auc: 0.9337 - prc: 0.7182 - val_loss: 0.0034 - val_tp: 54.0000 - val_fp: 1.0000 - val_tn: 45489.0000 - val_fn: 25.0000 - val_acc: 0.9994 - val_precision: 0.9818 - val_recall: 0.6835 - val_auc: 0.9238 - val_prc: 0.8156Epoch 25/10090/90 [==============================] - 1s 8ms/step - loss: 0.0042 - tp: 99.9231 - fp: 16.0769 - tn: 93957.1319 - fn: 67.4396 - acc: 0.9991 - precision: 0.8482 - recall: 0.6010 - auc: 0.9216 - prc: 0.7227 - val_loss: 0.0033 - val_tp: 59.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 20.0000 - val_acc: 0.9995 - val_precision: 0.9219 - val_recall: 0.7468 - val_auc: 0.9238 - val_prc: 0.8132Epoch 26/10090/90 [==============================] - 1s 7ms/step - loss: 0.0037 - tp: 103.0769 - fp: 16.0110 - tn: 93956.2747 - fn: 65.2088 - acc: 0.9992 - precision: 0.8841 - recall: 0.6262 - auc: 0.9341 - prc: 0.7564 - val_loss: 0.0033 - val_tp: 59.0000 - val_fp: 5.0000 - val_tn: 45485.0000 - val_fn: 20.0000 - val_acc: 0.9995 - val_precision: 0.9219 - val_recall: 0.7468 - val_auc: 0.9238 - val_prc: 0.8134Epoch 27/10090/90 [==============================] - 1s 7ms/step - loss: 0.0038 - tp: 98.8022 - fp: 15.9011 - tn: 93962.5604 - fn: 63.3077 - acc: 0.9992 - precision: 0.8723 - recall: 0.6362 - auc: 0.9365 - prc: 0.7486 - val_loss: 0.0033 - val_tp: 59.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 20.0000 - val_acc: 0.9994 - val_precision: 0.9077 - val_recall: 0.7468 - val_auc: 0.9238 - val_prc: 0.8124Epoch 28/10090/90 [==============================] - 1s 8ms/step - loss: 0.0040 - tp: 98.9451 - fp: 15.8022 - tn: 93965.5714 - fn: 60.2527 - acc: 0.9992 - precision: 0.8606 - recall: 0.6430 - auc: 0.9241 - prc: 0.7183 - val_loss: 0.0033 - val_tp: 59.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 20.0000 - val_acc: 0.9994 - val_precision: 0.9077 - val_recall: 0.7468 - val_auc: 0.9238 - val_prc: 0.8148Epoch 29/10090/90 [==============================] - 1s 8ms/step - loss: 0.0036 - tp: 104.4286 - fp: 13.1648 - tn: 93965.1429 - fn: 57.8352 - acc: 0.9993 - precision: 0.8989 - recall: 0.6587 - auc: 0.9396 - prc: 0.7463 - val_loss: 0.0033 - val_tp: 58.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 21.0000 - val_acc: 0.9994 - val_precision: 0.9062 - val_recall: 0.7342 - val_auc: 0.9238 - val_prc: 0.8150Epoch 30/10090/90 [==============================] - 1s 8ms/step - loss: 0.0039 - tp: 104.1319 - fp: 12.7033 - tn: 93967.4066 - fn: 56.3297 - acc: 0.9992 - precision: 0.8847 - recall: 0.6371 - auc: 0.9197 - prc: 0.7073 - val_loss: 0.0033 - val_tp: 55.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 24.0000 - val_acc: 0.9993 - val_precision: 0.9016 - val_recall: 0.6962 - val_auc: 0.9238 - val_prc: 0.8163Epoch 31/10090/90 [==============================] - 1s 8ms/step - loss: 0.0037 - tp: 91.6154 - fp: 17.1648 - tn: 93966.5495 - fn: 65.2418 - acc: 0.9992 - precision: 0.8379 - recall: 0.5814 - auc: 0.9231 - prc: 0.7264 - val_loss: 0.0033 - val_tp: 55.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 24.0000 - val_acc: 0.9993 - val_precision: 0.9016 - val_recall: 0.6962 - val_auc: 0.9238 - val_prc: 0.8168Epoch 32/10090/90 [==============================] - 1s 8ms/step - loss: 0.0038 - tp: 98.9231 - fp: 14.8681 - tn: 93962.0440 - fn: 64.7363 - acc: 0.9991 - precision: 0.8635 - recall: 0.5902 - auc: 0.9405 - prc: 0.7401 - val_loss: 0.0033 - val_tp: 56.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 23.0000 - val_acc: 0.9994 - val_precision: 0.9032 - val_recall: 0.7089 - val_auc: 0.9238 - val_prc: 0.8164Epoch 33/10090/90 [==============================] - 1s 9ms/step - loss: 0.0037 - tp: 102.0549 - fp: 16.8242 - tn: 93959.9231 - fn: 61.7692 - acc: 0.9992 - precision: 0.8656 - recall: 0.6255 - auc: 0.9333 - prc: 0.7486 - val_loss: 0.0034 - val_tp: 54.0000 - val_fp: 2.0000 - val_tn: 45488.0000 - val_fn: 25.0000 - val_acc: 0.9994 - val_precision: 0.9643 - val_recall: 0.6835 - val_auc: 0.9238 - val_prc: 0.8174Epoch 34/10090/90 [==============================] - 1s 9ms/step - loss: 0.0030 - tp: 106.4396 - fp: 10.6593 - tn: 93972.9231 - fn: 50.5495 - acc: 0.9994 - precision: 0.9169 - recall: 0.6839 - auc: 0.9287 - prc: 0.7915 - val_loss: 0.0034 - val_tp: 55.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 24.0000 - val_acc: 0.9993 - val_precision: 0.9016 - val_recall: 0.6962 - val_auc: 0.9238 - val_prc: 0.8158Epoch 35/10090/90 [==============================] - 1s 9ms/step - loss: 0.0039 - tp: 96.9780 - fp: 15.2857 - tn: 93964.0220 - fn: 64.2857 - acc: 0.9992 - precision: 0.8767 - recall: 0.5986 - auc: 0.9371 - prc: 0.7327 - val_loss: 0.0034 - val_tp: 55.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 24.0000 - val_acc: 0.9993 - val_precision: 0.9016 - val_recall: 0.6962 - val_auc: 0.9238 - val_prc: 0.8157Epoch 36/10090/90 [==============================] - 1s 10ms/step - loss: 0.0039 - tp: 97.0440 - fp: 16.4725 - tn: 93962.8242 - fn: 64.2308 - acc: 0.9992 - precision: 0.8561 - recall: 0.6162 - auc: 0.9231 - prc: 0.7042 - val_loss: 0.0034 - val_tp: 53.0000 - val_fp: 2.0000 - val_tn: 45488.0000 - val_fn: 26.0000 - val_acc: 0.9994 - val_precision: 0.9636 - val_recall: 0.6709 - val_auc: 0.9238 - val_prc: 0.8161Epoch 37/10090/90 [==============================] - 1s 9ms/step - loss: 0.0040 - tp: 98.1978 - fp: 16.4176 - tn: 93961.2747 - fn: 64.6813 - acc: 0.9992 - precision: 0.8608 - recall: 0.6091 - auc: 0.9226 - prc: 0.7067 - val_loss: 0.0034 - val_tp: 54.0000 - val_fp: 3.0000 - val_tn: 45487.0000 - val_fn: 25.0000 - val_acc: 0.9994 - val_precision: 0.9474 - val_recall: 0.6835 - val_auc: 0.9238 - val_prc: 0.8160Epoch 38/10090/90 [==============================] - 1s 8ms/step - loss: 0.0036 - tp: 97.2198 - fp: 15.0879 - tn: 93970.4835 - fn: 57.7802 - acc: 0.9992 - precision: 0.8639 - recall: 0.6325 - auc: 0.9437 - prc: 0.7358 - val_loss: 0.0034 - val_tp: 55.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 24.0000 - val_acc: 0.9993 - val_precision: 0.9016 - val_recall: 0.6962 - val_auc: 0.9238 - val_prc: 0.8155Epoch 39/10090/90 [==============================] - 1s 8ms/step - loss: 0.0041 - tp: 107.5385 - fp: 18.5604 - tn: 93953.8352 - fn: 60.6374 - acc: 0.9991 - precision: 0.8364 - recall: 0.6481 - auc: 0.9290 - prc: 0.7210 - val_loss: 0.0034 - val_tp: 53.0000 - val_fp: 2.0000 - val_tn: 45488.0000 - val_fn: 26.0000 - val_acc: 0.9994 - val_precision: 0.9636 - val_recall: 0.6709 - val_auc: 0.9238 - val_prc: 0.8160Epoch 40/10090/90 [==============================] - 1s 7ms/step - loss: 0.0041 - tp: 96.3846 - fp: 16.7143 - tn: 93964.8352 - fn: 62.6374 - acc: 0.9992 - precision: 0.8532 - recall: 0.6206 - auc: 0.9248 - prc: 0.6902 - val_loss: 0.0034 - val_tp: 53.0000 - val_fp: 2.0000 - val_tn: 45488.0000 - val_fn: 26.0000 - val_acc: 0.9994 - val_precision: 0.9636 - val_recall: 0.6709 - val_auc: 0.9238 - val_prc: 0.8154Epoch 41/10090/90 [==============================] - 1s 8ms/step - loss: 0.0037 - tp: 103.1758 - fp: 14.4505 - tn: 93961.2198 - fn: 61.7253 - acc: 0.9992 - precision: 0.8754 - recall: 0.6197 - auc: 0.9334 - prc: 0.7572 - val_loss: 0.0034 - val_tp: 53.0000 - val_fp: 2.0000 - val_tn: 45488.0000 - val_fn: 26.0000 - val_acc: 0.9994 - val_precision: 0.9636 - val_recall: 0.6709 - val_auc: 0.9238 - val_prc: 0.8157Epoch 42/10090/90 [==============================] - 1s 8ms/step - loss: 0.0034 - tp: 90.2088 - fp: 15.3846 - tn: 93967.3516 - fn: 67.6264 - acc: 0.9991 - precision: 0.8634 - recall: 0.5541 - auc: 0.9456 - prc: 0.7623 - val_loss: 0.0034 - val_tp: 53.0000 - val_fp: 2.0000 - val_tn: 45488.0000 - val_fn: 26.0000 - val_acc: 0.9994 - val_precision: 0.9636 - val_recall: 0.6709 - val_auc: 0.9238 - val_prc: 0.8152Epoch 43/10090/90 [==============================] - 1s 9ms/step - loss: 0.0040 - tp: 96.2308 - fp: 21.1209 - tn: 93957.6813 - fn: 65.5385 - acc: 0.9990 - precision: 0.8026 - recall: 0.5805 - auc: 0.9326 - prc: 0.7090 - val_loss: 0.0034 - val_tp: 53.0000 - val_fp: 2.0000 - val_tn: 45488.0000 - val_fn: 26.0000 - val_acc: 0.9994 - val_precision: 0.9636 - val_recall: 0.6709 - val_auc: 0.9238 - val_prc: 0.8150Restoring model weights from the end of the best epoch.Epoch 00043: early stopping</code></pre><h3 id="æŸ¥çœ‹è®­ç»ƒæ¨¡å‹çš„historyå›¾"><a href="#æŸ¥çœ‹è®­ç»ƒæ¨¡å‹çš„historyå›¾" class="headerlink" title="æŸ¥çœ‹è®­ç»ƒæ¨¡å‹çš„historyå›¾"></a>æŸ¥çœ‹è®­ç»ƒæ¨¡å‹çš„historyå›¾</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_plot_metrics(history):    metrics = ['loss', 'prc', 'precision', 'recall']    for n, metric in enumerate(metrics):        name = metric.replace("_"," ").capitalize()        plt.subplot(2,2,n+1)        plt.plot(history.epoch, history.history[metric], color='blue', label='Train')        plt.plot(history.epoch, history.history['val_'+metric], color='blue', linestyle="--", label='Val')        plt.xlabel('Epoch')        plt.ylabel(name)        if metric == 'loss':            pass#             plt.ylim([0, plt.ylim()[1]])        elif metric == 'auc':            plt.ylim([0.8,1])        elif metric == 'recall':            plt.ylim([0,1])        else:            plt.ylim([0,1])        plt.legend()    plt.tight_layout()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_metrics(baseline_history)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_60_0.png" alt="output_60_0"></p><h3 id="æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ"><a href="#æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ" class="headerlink" title="æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ"></a>æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_predictions_baseline = model_baseline.predict(train_features, batch_size=BATCH_SIZE)test_predictions_baseline = model_baseline.predict(test_features, batch_size=BATCH_SIZE)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_plot_cm(labels, predictions, p=0.5):    cm = confusion_matrix(labels, predictions > p)    plt.figure(figsize=(5,5))    sns.heatmap(cm, annot=True, fmt="d")    plt.title('Confusion matrix @{:.2f}'.format(p))    plt.ylabel('Actual label')    plt.xlabel('Predicted label')    print('Legitimate Transactions Detected (True Negatives): ', cm[0][0])    print('Legitimate Transactions Incorrectly Detected (False Positives): ', cm[0][1])    print('Fraudulent Transactions Missed (False Negatives): ', cm[1][0])    print('Fraudulent Transactions Detected (True Positives): ', cm[1][1])    print('Total Fraudulent Transactions: ', np.sum(cm[1]))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">baseline_results = model_baseline.evaluate(test_features, test_labels, batch_size=BATCH_SIZE, verbose=0)for name, value in zip(model_baseline.metrics_names, baseline_results):    print(name, ': ', value)print()func_plot_cm(test_labels, test_predictions_baseline)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>loss :  0.002730185631662607tp :  72.0fp :  9.0tn :  56855.0fn :  26.0acc :  0.9993855357170105precision :  0.8888888955116272recall :  0.7346938848495483auc :  0.9487220048904419prc :  0.8363494873046875Legitimate Transactions Detected (True Negatives):  56855Legitimate Transactions Incorrectly Detected (False Positives):  9Fraudulent Transactions Missed (False Negatives):  26Fraudulent Transactions Detected (True Positives):  72Total Fraudulent Transactions:  98</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_64_1.png" alt="output_64_1"></p><h3 id="ç”»rocå›¾"><a href="#ç”»rocå›¾" class="headerlink" title="ç”»rocå›¾"></a>ç”»rocå›¾</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_plot_roc(name, labels, predictions, **kwargs):    fp, tp, _ = sklearn.metrics.roc_curve(labels, predictions)    plt.plot(100*fp, 100*tp, label=name, linewidth=2, **kwargs)    plt.xlabel('False positives [%]')    plt.ylabel('True positives [%]')    plt.xlim([-0.5,20])    plt.ylim([80,100.5])    plt.grid(True)    ax = plt.gca()    ax.set_aspect('equal')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_roc("Train Baseline", train_labels, train_predictions_baseline, color='red')func_plot_roc("Test Baseline", test_labels, test_predictions_baseline, color='blue', linestyle='--')plt.legend(loc='lower right')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.legend.Legend at 0x7f2cc0264550&gt;</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_67_1.png" alt="output_67_1"></p><h3 id="ç”»PRå›¾"><a href="#ç”»PRå›¾" class="headerlink" title="ç”»PRå›¾"></a>ç”»PRå›¾</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_plot_prc(name, labels, predictions, **kwargs):    precision, recall, _ = sklearn.metrics.precision_recall_curve(labels, predictions)    plt.plot(precision, recall, label=name, linewidth=2, **kwargs)    plt.xlabel('Recall')    plt.ylabel('Precision')    plt.grid(True)    ax = plt.gca()    ax.set_aspect('equal')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_prc("Train Baseline", train_labels, train_predictions_baseline, color='red')func_plot_prc("Test Baseline", test_labels, test_predictions_baseline, color='blue', linestyle='--')plt.legend(loc='lower right')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.legend.Legend at 0x7f2cc00d0e20&gt;</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_70_1.png" alt="output_70_1"></p><h2 id="model-1-add-class-weight"><a href="#model-1-add-class-weight" class="headerlink" title="model_1: add class_weight"></a>model_1: add class_weight</h2><h3 id="è®¡ç®—class-weight"><a href="#è®¡ç®—class-weight" class="headerlink" title="è®¡ç®—class_weight"></a>è®¡ç®—class_weight</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">weight_for_0 = (1 / neg) * (total / 2.0)  # total / (2*neg)weight_for_1 = (1 / pos) * (total / 2.0)  # total / (2*pos)class_weight = {    0: weight_for_0,    1: weight_for_1}class_weight<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>{0: 0.5008652375006595, 1: 289.43800813008136}</code></pre><h3 id="train-a-model-with-class-weight"><a href="#train-a-model-with-class-weight" class="headerlink" title="train a model with class weight"></a>train a model with class weight</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_weight = func_make_model(n_x=train_features.shape[-1], metrics=METRICS)model_weight.load_weights(correct_initial_bias_path)model_weight_history = model_weight.fit(train_features, train_labels,                                         batch_size=BATCH_SIZE, epochs=EPOCHS,                                         callbacks=[early_stopping],                                         validation_data=(val_features, val_labels),                                        # the class weights go here                                        class_weight=class_weight)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Epoch 1/10090/90 [==============================] - 4s 20ms/step - loss: 3.3108 - tp: 85.5495 - fp: 103.0659 - tn: 150735.5495 - fn: 178.4066 - acc: 0.9983 - precision: 0.5085 - recall: 0.3590 - auc: 0.7769 - prc: 0.3236 - val_loss: 0.0081 - val_tp: 10.0000 - val_fp: 6.0000 - val_tn: 45484.0000 - val_fn: 69.0000 - val_acc: 0.9984 - val_precision: 0.6250 - val_recall: 0.1266 - val_auc: 0.9132 - val_prc: 0.3528Epoch 2/10090/90 [==============================] - 1s 9ms/step - loss: 1.5420 - tp: 58.9451 - fp: 177.4945 - tn: 93802.3516 - fn: 101.7802 - acc: 0.9972 - precision: 0.2352 - recall: 0.3316 - auc: 0.7668 - prc: 0.1856 - val_loss: 0.0093 - val_tp: 56.0000 - val_fp: 32.0000 - val_tn: 45458.0000 - val_fn: 23.0000 - val_acc: 0.9988 - val_precision: 0.6364 - val_recall: 0.7089 - val_auc: 0.9470 - val_prc: 0.5701Epoch 3/10090/90 [==============================] - 1s 8ms/step - loss: 0.8803 - tp: 92.3956 - fp: 448.8462 - tn: 93533.2418 - fn: 66.0879 - acc: 0.9947 - precision: 0.1718 - recall: 0.5509 - auc: 0.8812 - prc: 0.2806 - val_loss: 0.0147 - val_tp: 62.0000 - val_fp: 94.0000 - val_tn: 45396.0000 - val_fn: 17.0000 - val_acc: 0.9976 - val_precision: 0.3974 - val_recall: 0.7848 - val_auc: 0.9680 - val_prc: 0.6804Epoch 4/10090/90 [==============================] - 1s 8ms/step - loss: 0.6487 - tp: 110.7582 - fp: 801.8242 - tn: 93174.9560 - fn: 53.0330 - acc: 0.9914 - precision: 0.1226 - recall: 0.6634 - auc: 0.9129 - prc: 0.2730 - val_loss: 0.0227 - val_tp: 66.0000 - val_fp: 166.0000 - val_tn: 45324.0000 - val_fn: 13.0000 - val_acc: 0.9961 - val_precision: 0.2845 - val_recall: 0.8354 - val_auc: 0.9691 - val_prc: 0.7008Epoch 5/10090/90 [==============================] - 1s 9ms/step - loss: 0.4749 - tp: 126.5165 - fp: 1314.5934 - tn: 92661.6813 - fn: 37.7802 - acc: 0.9859 - precision: 0.0907 - recall: 0.7836 - auc: 0.9293 - prc: 0.2892 - val_loss: 0.0308 - val_tp: 66.0000 - val_fp: 281.0000 - val_tn: 45209.0000 - val_fn: 13.0000 - val_acc: 0.9935 - val_precision: 0.1902 - val_recall: 0.8354 - val_auc: 0.9708 - val_prc: 0.6695Epoch 6/10090/90 [==============================] - 1s 9ms/step - loss: 0.4803 - tp: 128.5824 - fp: 1652.0330 - tn: 92324.8791 - fn: 35.0769 - acc: 0.9824 - precision: 0.0749 - recall: 0.7747 - auc: 0.9277 - prc: 0.2729 - val_loss: 0.0380 - val_tp: 66.0000 - val_fp: 448.0000 - val_tn: 45042.0000 - val_fn: 13.0000 - val_acc: 0.9899 - val_precision: 0.1284 - val_recall: 0.8354 - val_auc: 0.9745 - val_prc: 0.6359Epoch 7/10090/90 [==============================] - 1s 9ms/step - loss: 0.3692 - tp: 136.0110 - fp: 2004.2967 - tn: 91972.8242 - fn: 27.4396 - acc: 0.9787 - precision: 0.0646 - recall: 0.8400 - auc: 0.9357 - prc: 0.2538 - val_loss: 0.0446 - val_tp: 66.0000 - val_fp: 548.0000 - val_tn: 44942.0000 - val_fn: 13.0000 - val_acc: 0.9877 - val_precision: 0.1075 - val_recall: 0.8354 - val_auc: 0.9741 - val_prc: 0.6173Epoch 8/10090/90 [==============================] - 1s 8ms/step - loss: 0.3391 - tp: 133.3846 - fp: 2250.4615 - tn: 91731.2527 - fn: 25.4725 - acc: 0.9759 - precision: 0.0547 - recall: 0.8384 - auc: 0.9464 - prc: 0.2333 - val_loss: 0.0502 - val_tp: 66.0000 - val_fp: 602.0000 - val_tn: 44888.0000 - val_fn: 13.0000 - val_acc: 0.9865 - val_precision: 0.0988 - val_recall: 0.8354 - val_auc: 0.9740 - val_prc: 0.6335Epoch 9/10090/90 [==============================] - 1s 8ms/step - loss: 0.3891 - tp: 134.6374 - fp: 2574.4066 - tn: 91403.6154 - fn: 27.9121 - acc: 0.9727 - precision: 0.0507 - recall: 0.8210 - auc: 0.9373 - prc: 0.2371 - val_loss: 0.0550 - val_tp: 66.0000 - val_fp: 643.0000 - val_tn: 44847.0000 - val_fn: 13.0000 - val_acc: 0.9856 - val_precision: 0.0931 - val_recall: 0.8354 - val_auc: 0.9756 - val_prc: 0.6202Epoch 10/10090/90 [==============================] - 1s 8ms/step - loss: 0.3159 - tp: 137.5714 - fp: 2726.1538 - tn: 91248.8462 - fn: 28.0000 - acc: 0.9712 - precision: 0.0490 - recall: 0.8459 - auc: 0.9529 - prc: 0.2447 - val_loss: 0.0597 - val_tp: 67.0000 - val_fp: 707.0000 - val_tn: 44783.0000 - val_fn: 12.0000 - val_acc: 0.9842 - val_precision: 0.0866 - val_recall: 0.8481 - val_auc: 0.9754 - val_prc: 0.6138Epoch 11/10090/90 [==============================] - 1s 8ms/step - loss: 0.2898 - tp: 142.0110 - fp: 2837.5055 - tn: 91137.0440 - fn: 24.0110 - acc: 0.9695 - precision: 0.0480 - recall: 0.8655 - auc: 0.9555 - prc: 0.2209 - val_loss: 0.0630 - val_tp: 67.0000 - val_fp: 753.0000 - val_tn: 44737.0000 - val_fn: 12.0000 - val_acc: 0.9832 - val_precision: 0.0817 - val_recall: 0.8481 - val_auc: 0.9755 - val_prc: 0.6147Epoch 12/10090/90 [==============================] - 1s 8ms/step - loss: 0.2809 - tp: 134.1429 - fp: 2854.5824 - tn: 91132.2088 - fn: 19.6374 - acc: 0.9695 - precision: 0.0454 - recall: 0.8817 - auc: 0.9487 - prc: 0.2253 - val_loss: 0.0639 - val_tp: 67.0000 - val_fp: 770.0000 - val_tn: 44720.0000 - val_fn: 12.0000 - val_acc: 0.9828 - val_precision: 0.0800 - val_recall: 0.8481 - val_auc: 0.9754 - val_prc: 0.6218Epoch 13/10090/90 [==============================] - 1s 9ms/step - loss: 0.3396 - tp: 139.3956 - fp: 2952.3626 - tn: 91026.8462 - fn: 21.9670 - acc: 0.9683 - precision: 0.0439 - recall: 0.8461 - auc: 0.9395 - prc: 0.2182 - val_loss: 0.0630 - val_tp: 67.0000 - val_fp: 758.0000 - val_tn: 44732.0000 - val_fn: 12.0000 - val_acc: 0.9831 - val_precision: 0.0812 - val_recall: 0.8481 - val_auc: 0.9763 - val_prc: 0.6152Epoch 14/10090/90 [==============================] - 1s 8ms/step - loss: 0.2931 - tp: 133.0000 - fp: 2956.3736 - tn: 91029.8462 - fn: 21.3516 - acc: 0.9685 - precision: 0.0404 - recall: 0.8468 - auc: 0.9493 - prc: 0.2041 - val_loss: 0.0675 - val_tp: 67.0000 - val_fp: 811.0000 - val_tn: 44679.0000 - val_fn: 12.0000 - val_acc: 0.9819 - val_precision: 0.0763 - val_recall: 0.8481 - val_auc: 0.9769 - val_prc: 0.6114Restoring model weights from the end of the best epoch.Epoch 00014: early stopping</code></pre><h3 id="check-training-history"><a href="#check-training-history" class="headerlink" title="check training history"></a>check training history</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_metrics(model_weight_history)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_76_0.png" alt="output_76_0"></p><h3 id="æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ-1"><a href="#æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ-1" class="headerlink" title="æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ"></a>æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_predictions_weight = model_weight.predict(train_features, batch_size=BATCH_SIZE)test_predictions_weight = model_weight.predict(test_features, batch_size=BATCH_SIZE)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">results = model_weight.evaluate(test_features, test_labels, batch_size=BATCH_SIZE, verbose=0)for name, value in zip(model_weight.metrics_names, results):    print(name, ': ', value)print()func_plot_cm(test_labels, test_predictions_weight)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>loss :  0.02326195128262043tp :  83.0fp :  210.0tn :  56654.0fn :  15.0acc :  0.9960500001907349precision :  0.28327643871307373recall :  0.8469387888908386auc :  0.969890296459198prc :  0.7208744287490845Legitimate Transactions Detected (True Negatives):  56654Legitimate Transactions Incorrectly Detected (False Positives):  210Fraudulent Transactions Missed (False Negatives):  15Fraudulent Transactions Detected (True Positives):  83Total Fraudulent Transactions:  98</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_79_1.png" alt="output_79_1"></p><h3 id="ç”»rocå›¾-1"><a href="#ç”»rocå›¾-1" class="headerlink" title="ç”»rocå›¾"></a>ç”»rocå›¾</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_roc("Train weight", train_labels, train_predictions_weight, color='red')func_plot_roc("Test weight", test_labels, test_predictions_weight, color='blue', linestyle='--')plt.legend(loc='lower right')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.legend.Legend at 0x7f2c9c227dc0&gt;</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_81_1.png" alt="output_81_1"></p><h3 id="ç”»PRå›¾-1"><a href="#ç”»PRå›¾-1" class="headerlink" title="ç”»PRå›¾"></a>ç”»PRå›¾</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_prc("Train weight", train_labels, train_predictions_weight, color='red')func_plot_prc("Test weight", test_labels, test_predictions_weight, color='blue', linestyle='--')plt.legend(loc='lower right')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.legend.Legend at 0x7f2c9c19fd90&gt;</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_83_1.png" alt="output_83_1"></p><h2 id="model-2-ä¸Šé‡‡æ ·å°‘çš„é‚£ä¸ªç±»åˆ«"><a href="#model-2-ä¸Šé‡‡æ ·å°‘çš„é‚£ä¸ªç±»åˆ«" class="headerlink" title="model_2: ä¸Šé‡‡æ ·å°‘çš„é‚£ä¸ªç±»åˆ«"></a>model_2: ä¸Šé‡‡æ ·å°‘çš„é‚£ä¸ªç±»åˆ«</h2><h3 id="ä¸Šé‡‡æ ·"><a href="#ä¸Šé‡‡æ ·" class="headerlink" title="ä¸Šé‡‡æ ·"></a>ä¸Šé‡‡æ ·</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">pos_features = train_features[bool_train_labels]neg_features = train_features[~bool_train_labels]pos_labels = train_labels[bool_train_labels]neg_labels = train_labels[~bool_train_labels]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="using-numpy"><a href="#using-numpy" class="headerlink" title="using numpy"></a>using numpy</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">ids = np.arange(len(pos_features))choices = np.random.choice(ids, len(neg_features))  # Generates a random sample from a given 1-D arrayres_pos_features = pos_features[choices]res_pos_labels = pos_labels[choices]res_pos_features.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(181961, 29)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">resampled_features = np.concatenate([res_pos_features, neg_features], axis=0)resampled_labels = np.concatenate([res_pos_labels, neg_labels], axis=0)# éšæœºæ‰“ä¹±order = np.arange(len(resampled_labels))np.random.shuffle(order)resampled_features = resampled_features[order]resampled_labels = resampled_labels[order]resampled_features.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(363922, 29)</code></pre><h4 id="using-tf-data"><a href="#using-tf-data" class="headerlink" title="using tf.data"></a>using tf.data</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_make_ds(features, labels):    ds = tf.data.Dataset.from_tensor_slices((features, labels))    ds = ds.shuffle(len(features)).repeat()  # é‡å¤æ— æ•°æ¬¡    return ds<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">pos_ds = func_make_ds(pos_features, pos_labels)neg_ds = func_make_ds(neg_features, neg_labels)for features, label in pos_ds.take(1):    print(features, label)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>tf.Tensor([-0.72499268  2.48494345 -5.          4.71183888 -3.39522677 -1.54142183 -5.          2.32846081 -2.95406275 -5.          5.         -5.  0.5493042  -5.          0.99578148 -5.         -5.         -5.  3.88524349  1.80758865  2.51455711  0.55774627  0.9575459  -1.26789652 -3.3464076   1.04065595  4.89460213  2.17526156 -1.45033267], shape=(29,), dtype=float64) tf.Tensor(1, shape=(), dtype=int64)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">resampled_ds = tf.data.experimental.sample_from_datasets([pos_ds, neg_ds], weights=[0.5, 0.5])resampled_ds = resampled_ds.batch(BATCH_SIZE).prefetch(tf.data.experimental.AUTOTUNE)val_ds = tf.data.Dataset.from_tensor_slices((val_features, val_labels)).cache()val_ds = val_ds.batch(BATCH_SIZE).prefetch(tf.data.experimental.AUTOTUNE)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for features, label in resampled_ds.take(1):    print(label.numpy().mean())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>0.50537109375</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">resampled_steps_per_epoch = np.ceil(2.0*neg/BATCH_SIZE)  # æ­£è´Ÿæ ·æœ¬é‡/batch_sizeresampled_steps_per_epoch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>278.0</code></pre><h3 id="train-a-model-on-oversample-data"><a href="#train-a-model-on-oversample-data" class="headerlink" title="train a model on oversample data"></a>train a model on oversample data</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">model_sampled = func_make_model(n_x=train_features.shape[-1], metrics=METRICS)model_sampled.load_weights(correct_initial_bias_path)# reset the bias to zero, since this dataset is balancedmodel_sampled.layers[-1].bias.assign([0.0])  # è®¾ç½®æœ€åä¸€å±‚çš„biasä¸º0model_sampled_history = model_sampled.fit(resampled_ds, epochs=EPOCHS, steps_per_epoch=resampled_steps_per_epoch,                                          callbacks=[early_stopping],                                           validation_data=val_ds)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Epoch 1/100278/278 [==============================] - 9s 25ms/step - loss: 0.7187 - tp: 106770.7025 - fp: 41735.0538 - tn: 158500.6093 - fn: 36668.2939 - acc: 0.7680 - precision: 0.6690 - recall: 0.6851 - auc: 0.8375 - prc: 0.7999 - val_loss: 0.1986 - val_tp: 67.0000 - val_fp: 1074.0000 - val_tn: 44416.0000 - val_fn: 12.0000 - val_acc: 0.9762 - val_precision: 0.0587 - val_recall: 0.8481 - val_auc: 0.9660 - val_prc: 0.7480Epoch 2/100278/278 [==============================] - 6s 23ms/step - loss: 0.2155 - tp: 128022.4910 - fp: 8284.8065 - tn: 135214.0609 - fn: 15191.3011 - acc: 0.9150 - precision: 0.9348 - recall: 0.8921 - auc: 0.9683 - prc: 0.9752 - val_loss: 0.1105 - val_tp: 67.0000 - val_fp: 704.0000 - val_tn: 44786.0000 - val_fn: 12.0000 - val_acc: 0.9843 - val_precision: 0.0869 - val_recall: 0.8481 - val_auc: 0.9679 - val_prc: 0.7478Epoch 3/100278/278 [==============================] - 6s 22ms/step - loss: 0.1596 - tp: 129871.1828 - fp: 4884.9964 - tn: 138569.3584 - fn: 13387.1219 - acc: 0.9358 - precision: 0.9629 - recall: 0.9063 - auc: 0.9833 - prc: 0.9858 - val_loss: 0.0815 - val_tp: 68.0000 - val_fp: 640.0000 - val_tn: 44850.0000 - val_fn: 11.0000 - val_acc: 0.9857 - val_precision: 0.0960 - val_recall: 0.8608 - val_auc: 0.9694 - val_prc: 0.7165Epoch 4/100278/278 [==============================] - 6s 22ms/step - loss: 0.1347 - tp: 131100.8423 - fp: 4062.0036 - tn: 139467.2903 - fn: 12082.5233 - acc: 0.9432 - precision: 0.9699 - recall: 0.9146 - auc: 0.9890 - prc: 0.9900 - val_loss: 0.0661 - val_tp: 68.0000 - val_fp: 571.0000 - val_tn: 44919.0000 - val_fn: 11.0000 - val_acc: 0.9872 - val_precision: 0.1064 - val_recall: 0.8608 - val_auc: 0.9694 - val_prc: 0.7182Epoch 5/100278/278 [==============================] - 6s 22ms/step - loss: 0.1192 - tp: 132650.0143 - fp: 3900.9642 - tn: 139417.2115 - fn: 10744.4695 - acc: 0.9486 - precision: 0.9712 - recall: 0.9245 - auc: 0.9918 - prc: 0.9923 - val_loss: 0.0570 - val_tp: 67.0000 - val_fp: 569.0000 - val_tn: 44921.0000 - val_fn: 12.0000 - val_acc: 0.9873 - val_precision: 0.1053 - val_recall: 0.8481 - val_auc: 0.9670 - val_prc: 0.7172Epoch 6/100278/278 [==============================] - 6s 22ms/step - loss: 0.1076 - tp: 133341.7706 - fp: 3745.2294 - tn: 139902.4552 - fn: 9723.2043 - acc: 0.9524 - precision: 0.9724 - recall: 0.9312 - auc: 0.9936 - prc: 0.9936 - val_loss: 0.0479 - val_tp: 67.0000 - val_fp: 508.0000 - val_tn: 44982.0000 - val_fn: 12.0000 - val_acc: 0.9886 - val_precision: 0.1165 - val_recall: 0.8481 - val_auc: 0.9682 - val_prc: 0.7194Epoch 7/100278/278 [==============================] - 6s 21ms/step - loss: 0.0995 - tp: 134289.4444 - fp: 3585.8961 - tn: 140065.9319 - fn: 8771.3871 - acc: 0.9566 - precision: 0.9739 - recall: 0.9381 - auc: 0.9947 - prc: 0.9946 - val_loss: 0.0433 - val_tp: 67.0000 - val_fp: 502.0000 - val_tn: 44988.0000 - val_fn: 12.0000 - val_acc: 0.9887 - val_precision: 0.1178 - val_recall: 0.8481 - val_auc: 0.9685 - val_prc: 0.7209Epoch 8/100278/278 [==============================] - 6s 22ms/step - loss: 0.0906 - tp: 136117.1470 - fp: 3446.8566 - tn: 139792.3333 - fn: 7356.3226 - acc: 0.9623 - precision: 0.9752 - recall: 0.9490 - auc: 0.9956 - prc: 0.9955 - val_loss: 0.0391 - val_tp: 67.0000 - val_fp: 458.0000 - val_tn: 45032.0000 - val_fn: 12.0000 - val_acc: 0.9897 - val_precision: 0.1276 - val_recall: 0.8481 - val_auc: 0.9647 - val_prc: 0.7208Epoch 9/100278/278 [==============================] - 6s 21ms/step - loss: 0.0871 - tp: 136469.3692 - fp: 3419.2043 - tn: 139679.6810 - fn: 7144.4050 - acc: 0.9630 - precision: 0.9756 - recall: 0.9498 - auc: 0.9959 - prc: 0.9957 - val_loss: 0.0363 - val_tp: 67.0000 - val_fp: 448.0000 - val_tn: 45042.0000 - val_fn: 12.0000 - val_acc: 0.9899 - val_precision: 0.1301 - val_recall: 0.8481 - val_auc: 0.9607 - val_prc: 0.7211Epoch 10/100278/278 [==============================] - 6s 22ms/step - loss: 0.0823 - tp: 136684.5591 - fp: 3467.4803 - tn: 140006.9319 - fn: 6553.6882 - acc: 0.9649 - precision: 0.9751 - recall: 0.9540 - auc: 0.9963 - prc: 0.9961 - val_loss: 0.0333 - val_tp: 67.0000 - val_fp: 437.0000 - val_tn: 45053.0000 - val_fn: 12.0000 - val_acc: 0.9901 - val_precision: 0.1329 - val_recall: 0.8481 - val_auc: 0.9611 - val_prc: 0.7214Epoch 11/100278/278 [==============================] - 6s 22ms/step - loss: 0.0779 - tp: 137468.5520 - fp: 3409.0538 - tn: 139987.1111 - fn: 5847.9427 - acc: 0.9673 - precision: 0.9760 - recall: 0.9581 - auc: 0.9967 - prc: 0.9965 - val_loss: 0.0317 - val_tp: 67.0000 - val_fp: 436.0000 - val_tn: 45054.0000 - val_fn: 12.0000 - val_acc: 0.9902 - val_precision: 0.1332 - val_recall: 0.8481 - val_auc: 0.9515 - val_prc: 0.7120Restoring model weights from the end of the best epoch.Epoch 00011: early stopping</code></pre><h3 id="check-training-history-1"><a href="#check-training-history-1" class="headerlink" title="check training history"></a>check training history</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_metrics(model_sampled_history)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_98_0.png" alt="output_98_0"></p><h3 id="æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ-2"><a href="#æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ-2" class="headerlink" title="æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ"></a>æŸ¥çœ‹ä¸€ä¸‹æ··æ·†çŸ©é˜µ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_predictions_sampled = model_sampled.predict(train_features, batch_size=BATCH_SIZE)test_predictions_sampled = model_sampled.predict(test_features, batch_size=BATCH_SIZE)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">results = model_sampled.evaluate(test_features, test_labels, batch_size=BATCH_SIZE, verbose=0)for name, value in zip(model_sampled.metrics_names, results):    print(name, ': ', value)print()func_plot_cm(test_labels, test_predictions_sampled)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>loss :  0.19912180304527283tp :  91.0fp :  1298.0tn :  55566.0fn :  7.0acc :  0.9770900011062622precision :  0.06551475822925568recall :  0.9285714030265808auc :  0.9868985414505005prc :  0.7712134718894958Legitimate Transactions Detected (True Negatives):  55566Legitimate Transactions Incorrectly Detected (False Positives):  1298Fraudulent Transactions Missed (False Negatives):  7Fraudulent Transactions Detected (True Positives):  91Total Fraudulent Transactions:  98</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_101_1.png" alt="output_101_1"></p><h3 id="ç”»rocå›¾-2"><a href="#ç”»rocå›¾-2" class="headerlink" title="ç”»rocå›¾"></a>ç”»rocå›¾</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_roc("Train sampled", train_labels, train_predictions_sampled, color='red')func_plot_roc("Test sampled", test_labels, test_predictions_sampled, color='blue', linestyle='--')plt.legend(loc='lower right')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.legend.Legend at 0x7f2c5c561fd0&gt;</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_103_1.png" alt="output_103_1"></p><h3 id="ç”»PRå›¾-2"><a href="#ç”»PRå›¾-2" class="headerlink" title="ç”»PRå›¾"></a>ç”»PRå›¾</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_prc("Train sampled", train_labels, train_predictions_sampled, color='red')func_plot_prc("Test sampled", test_labels, test_predictions_sampled, color='blue', linestyle='--')plt.legend(loc='lower right')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.legend.Legend at 0x7f2c5c7c57c0&gt;</code></pre><p><img src="/2021/09/13/tensorflow-xue-xi-zhi-bu-ping-heng-shu-ju-de-fen-lei/output_105_1.png" alt="output_105_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> TensorFlowå­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†ç±» </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ä¸å¹³è¡¡æ•°æ® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹FFmpeg</title>
      <link href="/2021/09/06/shi-yong-gong-ju-zhi-ffmpeg/"/>
      <url>/2021/09/06/shi-yong-gong-ju-zhi-ffmpeg/</url>
      
        <content type="html"><![CDATA[<h1 id="FFmpegè§†é¢‘å¤„ç†å·¥å…·"><a href="#FFmpegè§†é¢‘å¤„ç†å·¥å…·" class="headerlink" title="FFmpegè§†é¢‘å¤„ç†å·¥å…·"></a>FFmpegè§†é¢‘å¤„ç†å·¥å…·</h1><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">conda install ffmpeg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h4><p>è§†é¢‘æ–‡ä»¶æœ¬èº«æ˜¯ä¸€ä¸ª<code>å®¹å™¨</code>ï¼Œé‡Œé¢åŒ…å«<code>è§†é¢‘</code>ã€<code>éŸ³é¢‘</code>ã€<code>å­—å¹•</code>ç­‰ç­‰</p><p>å¸¸è§çš„å®¹å™¨æ ¼å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼ˆä¸€èˆ¬åç¼€èƒ½åæ˜ å…¶æ ¼å¼ï¼‰</p><ol><li>mp4</li><li>mkv</li><li>webm</li><li>avi</li></ol><h5 id="æŸ¥çœ‹ffmpegæ”¯æŒå®¹å™¨æ ¼å¼"><a href="#æŸ¥çœ‹ffmpegæ”¯æŒå®¹å™¨æ ¼å¼" class="headerlink" title="æŸ¥çœ‹ffmpegæ”¯æŒå®¹å™¨æ ¼å¼"></a>æŸ¥çœ‹<code>ffmpeg</code>æ”¯æŒå®¹å™¨æ ¼å¼</h5><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -formats<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="ç¼–ç æ ¼å¼"><a href="#ç¼–ç æ ¼å¼" class="headerlink" title="ç¼–ç æ ¼å¼"></a>ç¼–ç æ ¼å¼</h4><p>è§†é¢‘ã€éŸ³é¢‘éƒ½éœ€è¦ç¼–ç æ‰èƒ½ä¿å­˜æˆæ–‡ä»¶ã€‚ä¸åŒçš„ç¼–ç æ ¼å¼ï¼Œæœ‰ä¸åŒçš„å‹ç¼©ç‡ï¼Œä¼šå¯¼è‡´æ–‡ä»¶å¤§å°å’Œæ¸…æ™°åº¦çš„å·®å¼‚</p><p>å¸¸è§çš„è§†é¢‘ç¼–ç æ ¼å¼æœ‰ä»¥ä¸‹å‡ ç§</p><ul><li>æœ‰ç‰ˆæƒï¼Œå…è´¹ä½¿ç”¨<ul><li>H.262</li><li>H.264</li><li>H.265</li></ul></li><li>æ— ç‰ˆæƒ<ul><li>VP8</li><li>VP9</li><li>AV1</li></ul></li></ul><p>å¸¸è§çš„éŸ³é¢‘ç¼–ç æ ¼å¼</p><ul><li>æ— æŸ<ul><li>FLAC</li><li>ALAC</li></ul></li><li>æœ‰æŸ<ul><li>MP3</li><li>AAC</li></ul></li></ul><h5 id="æŸ¥çœ‹ffmpegæ”¯æŒç¼–ç æ ¼å¼"><a href="#æŸ¥çœ‹ffmpegæ”¯æŒç¼–ç æ ¼å¼" class="headerlink" title="æŸ¥çœ‹ffmpegæ”¯æŒç¼–ç æ ¼å¼"></a>æŸ¥çœ‹ffmpegæ”¯æŒç¼–ç æ ¼å¼</h5><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -codecs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="ç¼–ç å™¨"><a href="#ç¼–ç å™¨" class="headerlink" title="ç¼–ç å™¨"></a>ç¼–ç å™¨</h4><p>ç¼–ç å™¨æ˜¯å®ç°æŸç§ç¼–ç æ ¼å¼çš„åº“æ–‡ä»¶ï¼Œåªæœ‰å®‰è£…äº†å¯¹åº”ç¼–ç æ ¼å¼çš„ç¼–ç å™¨ï¼Œæ‰èƒ½å®ç°è¯¥æ ¼å¼è§†é¢‘ã€éŸ³é¢‘ç¼–ç å’Œè§£ç </p><p>å¸¸è§çš„è§†é¢‘ç¼–ç å™¨</p><ol><li>libx264ï¼šæœ€æµè¡Œçš„å¼€æºH.264ç¼–ç å™¨</li><li>NVENCï¼šåŸºäºNVIDIA GPUçš„H.264ç¼–ç å™¨</li><li>libx265ï¼šå¼€æºçš„HEVCç¼–ç å™¨</li><li>libvpxï¼šè°·æ­Œçš„VP8å’ŒVP9ç¼–ç å™¨</li><li>libaomï¼šAV1ç¼–ç å™¨</li></ol><p>å¸¸è§éŸ³é¢‘ç¼–ç å™¨</p><ol><li>libfdk-aacï¼šå½“å‰æœ€é«˜è´¨é‡çš„AACç¼–ç ï¼Œç¼–ç æ¨¡å¼åˆ†ä¸ºCBRå’ŒVBR</li><li>aac</li></ol><h5 id="æŸ¥çœ‹ffmpegå·²å®‰è£…ç¼–ç å™¨"><a href="#æŸ¥çœ‹ffmpegå·²å®‰è£…ç¼–ç å™¨" class="headerlink" title="æŸ¥çœ‹ffmpegå·²å®‰è£…ç¼–ç å™¨"></a>æŸ¥çœ‹ffmpegå·²å®‰è£…ç¼–ç å™¨</h5><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -encoders<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ä½¿ç”¨æ ¼å¼"><a href="#ä½¿ç”¨æ ¼å¼" class="headerlink" title="ä½¿ç”¨æ ¼å¼"></a>ä½¿ç”¨æ ¼å¼</h3><h4 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg {1} {2} -i {3} {4} {5}<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ol><li>å…¨å±€å‚æ•°</li><li>è¾“å…¥æ–‡ä»¶å‚æ•°</li><li>è¾“å…¥æ–‡ä»¶</li><li>è¾“å‡ºæ–‡ä»¶å‚æ•°</li><li>è¾“å‡ºæ–‡ä»¶</li></ol><h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-y \  # å…¨å±€å‚æ•°-c \  # è¾“å…¥æ–‡ä»¶å‚æ•°-i input.mp4 \  # è¾“å…¥æ–‡ä»¶-c:v libvpx-vp9 -c:a libvorbis \  # è¾“å‡ºæ–‡ä»¶å‚æ•°output.webm  # è¾“å‡ºæ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„å‘½ä»¤æ˜¯å°†mp4æ–‡ä»¶è½¬æˆwebmæ–‡ä»¶ï¼Œä¸¤ä¸ªéƒ½æ˜¯å®¹å™¨æ ¼å¼ã€‚è¾“å…¥çš„mp4æ–‡ä»¶çš„éŸ³é¢‘ç¼–ç æ ¼å¼æ˜¯aacï¼Œè§†é¢‘ç¼–ç æ ¼å¼æ˜¯H.264ï¼›è¾“å‡ºçš„webmæ–‡ä»¶çš„è§†é¢‘ç¼–ç æ ¼å¼æ˜¯vp9ï¼ŒéŸ³é¢‘æ ¼å¼æ˜¯vorbis</p><ul><li>å¦‚æœä¸æŒ‡æ˜ç¼–ç æ ¼å¼ï¼ŒFFmpegä¼šè‡ªå·±åˆ¤æ–­è¾“å…¥æ–‡ä»¶ç¼–ç </li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -i input.avi output.mp4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å¸¸ç”¨å‘½ä»¤è¡Œå‚æ•°"><a href="#å¸¸ç”¨å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="å¸¸ç”¨å‘½ä»¤è¡Œå‚æ•°"></a>å¸¸ç”¨å‘½ä»¤è¡Œå‚æ•°</h3><ul><li><code>-c</code>ï¼šæŒ‡å®šç¼–ç å™¨</li><li><code>-c copy</code>ï¼šç›´æ¥å¤åˆ¶ï¼Œä¸ç»è¿‡é‡æ–°ç¼–ç ï¼ˆè¿™æ ·æ¯”è¾ƒå¿«ï¼‰</li><li><code>-c:v</code>ï¼šæŒ‡å®šè§†é¢‘ç¼–ç å™¨</li><li><code>-c:a</code>ï¼šæŒ‡å®šéŸ³é¢‘ç¼–ç å™¨</li><li><code>-i</code>ï¼šæŒ‡å®šè¾“å…¥æ–‡ä»¶</li><li><code>-an</code>ï¼šå»é™¤éŸ³é¢‘æµ</li><li><code>-vn</code>ï¼šå»é™¤è§†é¢‘æµ</li><li><code>-preset</code>ï¼šæŒ‡å®šè¾“å‡ºè§†é¢‘çš„è§†é¢‘è´¨é‡ï¼Œä¼šå½±å“æ–‡ä»¶ç”Ÿæˆé€Ÿåº¦ï¼Œä»¥ä¸‹å‡ ä¸ªå¯ç”¨å€¼ï¼š<ul><li>ultrafast</li><li>superfast</li><li>veryfast</li><li>faster</li><li>fast</li><li>medium</li><li>slow</li><li>slower</li><li>veryslow</li></ul></li><li><code>-y</code>ï¼šä¸ç»è¿‡ç¡®è®¤ï¼Œç›´æ¥è¦†ç›–åŒåæ–‡ä»¶</li></ul><h3 id="å¸¸è§ç”¨æ³•"><a href="#å¸¸è§ç”¨æ³•" class="headerlink" title="å¸¸è§ç”¨æ³•"></a>å¸¸è§ç”¨æ³•</h3><h4 id="æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯"><a href="#æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯"></a>æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -i input.mp4ffmpeg -i input.mp4 -hide_banner<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="è½¬æ¢ç¼–ç æ ¼å¼"><a href="#è½¬æ¢ç¼–ç æ ¼å¼" class="headerlink" title="è½¬æ¢ç¼–ç æ ¼å¼"></a>è½¬æ¢ç¼–ç æ ¼å¼</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -i input.mp4 -c:v libx265 outpu.mp4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="è½¬æ¢å®¹å™¨æ ¼å¼"><a href="#è½¬æ¢å®¹å™¨æ ¼å¼" class="headerlink" title="è½¬æ¢å®¹å™¨æ ¼å¼"></a>è½¬æ¢å®¹å™¨æ ¼å¼</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -i input.mp4 -c copy output.webm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="è°ƒæ•´ç ç‡"><a href="#è°ƒæ•´ç ç‡" class="headerlink" title="è°ƒæ•´ç ç‡"></a>è°ƒæ•´ç ç‡</h4><p>è°ƒæ•´ç ç‡æŒ‡çš„æ˜¯æ”¹å˜ç¼–ç çš„æ¯”ç‰¹ç‡ï¼Œä¸€èˆ¬ç”¨æ¥å°†è§†é¢‘æ–‡ä»¶çš„ä½“ç§¯å˜å°</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-i input.mp4 \-minrate 964K -maxrate 3856K -bufsize 2000K \output.mp4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ”¹å˜åˆ†è¾¨ç‡"><a href="#æ”¹å˜åˆ†è¾¨ç‡" class="headerlink" title="æ”¹å˜åˆ†è¾¨ç‡"></a>æ”¹å˜åˆ†è¾¨ç‡</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-i input.mp4 \-vf scale=480:-1 \output.mp4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æå–éŸ³é¢‘"><a href="#æå–éŸ³é¢‘" class="headerlink" title="æå–éŸ³é¢‘"></a>æå–éŸ³é¢‘</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-i input.mp4\-vn -c:a copy \output.aac<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ·»åŠ éŸ³è½¨"><a href="#æ·»åŠ éŸ³è½¨" class="headerlink" title="æ·»åŠ éŸ³è½¨"></a>æ·»åŠ éŸ³è½¨</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-i input.aac -i input.mp4 \output.mp4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="æˆªå›¾"><a href="#æˆªå›¾" class="headerlink" title="æˆªå›¾"></a>æˆªå›¾</h4><ul><li>æŒ‡å®šæ—¶é—´å¼€å§‹ï¼Œè¿ç»­å¯¹1ç§’é’Ÿçš„è§†é¢‘è¿›è¡Œæˆªå›¾</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-y \-i input.mp4 \-ss 00:01:24 -t 00:00:01 \output_%3d.jpg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åªéœ€è¦æˆªä¸€å¼ å›¾</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-ss 01:23:45 \-i input.mp4 \-vframes 1 -q:v 2 \  # åªæˆªå–ä¸€å¸§ï¼Œè¾“å‡ºå›¾ç‰‡è´¨é‡ä¸º2ï¼Œ1æœ€é«˜output.jpg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="è£å‰ª"><a href="#è£å‰ª" class="headerlink" title="è£å‰ª"></a>è£å‰ª</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg -ss [start] -i [input] -t [duration] -c copy [output]ffmpeg -ss [start] -i [input] -to [end] -c copy [output]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="ä¸ºéŸ³é¢‘æ·»åŠ å°é¢"><a href="#ä¸ºéŸ³é¢‘æ·»åŠ å°é¢" class="headerlink" title="ä¸ºéŸ³é¢‘æ·»åŠ å°é¢"></a>ä¸ºéŸ³é¢‘æ·»åŠ å°é¢</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">ffmpeg \-loop 1 \  # è¡¨ç¤ºå›¾ç‰‡æ— é™å¾ªç¯-i cover.jpg -i input.mp3 \-c:v libx264 -c:a aac -b:a 192k -shortest \ # è¡¨ç¤ºéŸ³é¢‘æ–‡ä»¶ç»“æŸï¼Œè¾“å‡ºè§†é¢‘å°±ç»“æŸoutput.mp4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h2><h2 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h2><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html" target="_blank" rel="noopener">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FFmpeg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š3</title>
      <link href="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/"/>
      <url>/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/</url>
      
        <content type="html"><![CDATA[<h1 id="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W4"><a href="#å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W4" class="headerlink" title="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W4"></a>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W4</h1><ul><li>æ„å»ºå¤šå±‚éšè—å±‚ç¥ç»ç½‘ç»œ</li></ul><h2 id="HW1å‚è€ƒ"><a href="#HW1å‚è€ƒ" class="headerlink" title="HW1å‚è€ƒ"></a>HW1å‚è€ƒ</h2><ol><li><a href="https://mooc.study.163.com/university/deeplearning_ai#/c" target="_blank" rel="noopener">è§†é¢‘é“¾æ¥</a></li><li><a href="https://www.heywhale.com/mw/project/5dd798fbf41512002ceb38de" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥</a></li><li><a href="https://github.com/suqi/deeplearning_andrewng" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥2</a></li></ol><h2 id="HW2å‚è€ƒ"><a href="#HW2å‚è€ƒ" class="headerlink" title="HW2å‚è€ƒ"></a>HW2å‚è€ƒ</h2><ol><li><a href="https://mooc.study.163.com/university/deeplearning_ai#/c" target="_blank" rel="noopener">è§†é¢‘é“¾æ¥</a></li><li><a href="https://github.com/JudasDie/deeplearning.ai" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥</a></li><li><a href="https://github.com/suqi/deeplearning_andrewng" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥2</a></li></ol><h2 id="1-å¯¼å…¥æ¨¡å—"><a href="#1-å¯¼å…¥æ¨¡å—" class="headerlink" title="1-å¯¼å…¥æ¨¡å—"></a>1-å¯¼å…¥æ¨¡å—</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import timeimport numpy as npimport h5pyimport matplotlib.pyplot as pltimport scipyfrom PIL import Imagefrom scipy import ndimage%matplotlib inlineplt.rcParams['figure.figsize'] = (5.0, 4.0)plt.rcParams['image.interpolation'] = 'nearest'plt.rcParams['image.cmap'] = 'gray'# load_extension%load_ext autoreload  # Then your module will be auto-reloaded by default%autoreload 2  np.random.seed(1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">root_path = './æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š3/'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-ä¸€äº›å‡½æ•°"><a href="#2-ä¸€äº›å‡½æ•°" class="headerlink" title="2-ä¸€äº›å‡½æ•°"></a>2-ä¸€äº›å‡½æ•°</h2><h3 id="2-1-testCases-v3-py"><a href="#2-1-testCases-v3-py" class="headerlink" title="2.1-testCases_v3.py"></a>2.1-testCases_v3.py</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_forward_test_case():    np.random.seed(1)    """    X = np.array([[-1.02387576, 1.12397796],                 [-1.62328545, 0.64667545],                 [-1.74314104, -0.59664964]])    W = np.array([[ 0.74505627, 1.97611078, -1.24412333]])    b = np.array([[1]])    """    A = np.random.randn(3,2)    W = np.random.randn(1,3)    b = np.random.randn(1,1)    return A, W, bdef func_linear_activation_forward_test_case():    """    X = np.array([[-1.02387576, 1.12397796],                 [-1.62328545, 0.64667545],                 [-1.74314104, -0.59664964]])    W = np.array([[ 0.74505627, 1.97611078, -1.24412333]])    b = 5    """    np.random.seed(2)    A_prev = np.random.randn(3,2)    W = np.random.randn(1,3)    b = np.random.randn(1,1)    return A_prev, W, bdef func_L_model_forward_test_case():    """    X = np.array([[-1.02387576, 1.12397796],                 [-1.62328545, 0.64667545],                 [-1.74314104, -0.59664964]])    parameters = {        'W1': np.array([[ 1.62434536, -0.61175641, -0.52817175],                        [-1.07296862,  0.86540763, -2.3015387 ]]),        'W2': np.array([[ 1.74481176, -0.7612069 ]]),        'b1': np.array([[ 0.], [ 0.]]),        'b2': np.array([[ 0.]])    }    """    np.random.seed(1)    X = np.random.randn(4,2)    W1 = np.random.randn(3,4)    b1 = np.random.randn(3,1)    W2 = np.random.randn(1,3)    b2 = np.random.randn(1,1)    parameters = {"W1": W1,                  "b1": b1,                  "W2": W2,                  "b2": b2}    return X, parametersdef func_compute_cost_test_case():    Y = np.asarray([[1, 1, 1]])    aL = np.array([[.8,.9,0.4]])    return Y, aLdef func_linear_backward_test_case():    """    z, linear_cache = (np.array([[-0.8019545 ,  3.85763489]]), (np.array([[-1.02387576,  1.12397796],       [-1.62328545,  0.64667545],       [-1.74314104, -0.59664964]]), np.array([[ 0.74505627,  1.97611078, -1.24412333]]), np.array([[1]]))    """    np.random.seed(1)    dZ = np.random.randn(1,2)    A = np.random.randn(3,2)    W = np.random.randn(1,3)    b = np.random.randn(1,1)    linear_cache = (A, W, b)    return dZ, linear_cachedef func_linear_activation_backward_test_case():    """    aL, linear_activation_cache = (np.array([[ 3.1980455 ,  7.85763489]]), ((np.array([[-1.02387576,  1.12397796], [-1.62328545,  0.64667545], [-1.74314104, -0.59664964]]), np.array([[ 0.74505627,  1.97611078, -1.24412333]]), 5), np.array([[ 3.1980455 ,  7.85763489]])))    """    np.random.seed(2)    dA = np.random.randn(1,2)    A = np.random.randn(3,2)    W = np.random.randn(1,3)    b = np.random.randn(1,1)    Z = np.random.randn(1,2)    linear_cache = (A, W, b)    activation_cache = Z    linear_activation_cache = (linear_cache, activation_cache)    return dA, linear_activation_cachedef func_L_model_backward_test_case():    """    X = np.random.rand(3,2)    Y = np.array([[1, 1]])    parameters = {'W1': np.array([[ 1.78862847,  0.43650985,  0.09649747]]), 'b1': np.array([[ 0.]])}    aL, caches = (np.array([[ 0.60298372,  0.87182628]]), [((np.array([[ 0.20445225,  0.87811744],           [ 0.02738759,  0.67046751],           [ 0.4173048 ,  0.55868983]]),    np.array([[ 1.78862847,  0.43650985,  0.09649747]]),    np.array([[ 0.]])),   np.array([[ 0.41791293,  1.91720367]]))])   """    np.random.seed(3)    AL = np.random.randn(1, 2)    Y = np.array([[1, 0]])    A1 = np.random.randn(4,2)    W1 = np.random.randn(3,4)    b1 = np.random.randn(3,1)    Z1 = np.random.randn(3,2)    linear_cache_activation_1 = ((A1, W1, b1), Z1)    A2 = np.random.randn(3,2)    W2 = np.random.randn(1,3)    b2 = np.random.randn(1,1)    Z2 = np.random.randn(1,2)    linear_cache_activation_2 = ((A2, W2, b2), Z2)    caches = (linear_cache_activation_1, linear_cache_activation_2)    return AL, Y, cachesdef func_update_parameters_test_case():    """    parameters = {'W1': np.array([[ 1.78862847,  0.43650985,  0.09649747],        [-1.8634927 , -0.2773882 , -0.35475898],        [-0.08274148, -0.62700068, -0.04381817],        [-0.47721803, -1.31386475,  0.88462238]]),    'W2': np.array([[ 0.88131804,  1.70957306,  0.05003364, -0.40467741],        [-0.54535995, -1.54647732,  0.98236743, -1.10106763],        [-1.18504653, -0.2056499 ,  1.48614836,  0.23671627]]),        'W3': np.array([[-1.02378514, -0.7129932 ,  0.62524497],        [-0.16051336, -0.76883635, -0.23003072]]),    'b1': np.array([[ 0.],        [ 0.],        [ 0.],        [ 0.]]),    'b2': np.array([[ 0.],        [ 0.],        [ 0.]]),    'b3': np.array([[ 0.],        [ 0.]])}    grads = {'dW1': np.array([[ 0.63070583,  0.66482653,  0.18308507],        [ 0.        ,  0.        ,  0.        ],        [ 0.        ,  0.        ,  0.        ],        [ 0.        ,  0.        ,  0.        ]]),    'dW2': np.array([[ 1.62934255,  0.        ,  0.        ,  0.        ],        [ 0.        ,  0.        ,  0.        ,  0.        ],        [ 0.        ,  0.        ,  0.        ,  0.        ]]),    'dW3': np.array([[-1.40260776,  0.        ,  0.        ]]),    'da1': np.array([[ 0.70760786,  0.65063504],        [ 0.17268975,  0.15878569],        [ 0.03817582,  0.03510211]]),    'da2': np.array([[ 0.39561478,  0.36376198],        [ 0.7674101 ,  0.70562233],        [ 0.0224596 ,  0.02065127],        [-0.18165561, -0.16702967]]),    'da3': np.array([[ 0.44888991,  0.41274769],        [ 0.31261975,  0.28744927],        [-0.27414557, -0.25207283]]),    'db1': 0.75937676204411464,    'db2': 0.86163759922811056,    'db3': -0.84161956022334572}    """    np.random.seed(2)    W1 = np.random.randn(3,4)    b1 = np.random.randn(3,1)    W2 = np.random.randn(1,3)    b2 = np.random.randn(1,1)    parameters = {"W1": W1,                  "b1": b1,                  "W2": W2,                  "b2": b2}    np.random.seed(3)    dW1 = np.random.randn(3,4)    db1 = np.random.randn(3,1)    dW2 = np.random.randn(1,3)    db2 = np.random.randn(1,1)    grads = {"dW1": dW1,             "db1": db1,             "dW2": dW2,             "db2": db2}    return parameters, gradsdef func_L_model_forward_test_case_2hidden():    np.random.seed(6)    X = np.random.randn(5,4)    W1 = np.random.randn(4,5)    b1 = np.random.randn(4,1)    W2 = np.random.randn(3,4)    b2 = np.random.randn(3,1)    W3 = np.random.randn(1,3)    b3 = np.random.randn(1,1)    parameters = {"W1": W1,                  "b1": b1,                  "W2": W2,                  "b2": b2,                  "W3": W3,                  "b3": b3}    return X, parametersdef func_print_grads(grads):    print ("dW1 = "+ str(grads["dW1"]))    print ("db1 = "+ str(grads["db1"]))    print ("dA1 = "+ str(grads["dA2"])) # this is done on purpose to be consistent with lecture where we normally start with A0    # in this implementation we started with A1, hence we bump it up by 1.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-dnn-utils-v2-py"><a href="#2-2-dnn-utils-v2-py" class="headerlink" title="2.2-dnn_utils_v2.py"></a>2.2-dnn_utils_v2.py</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_sigmoid(Z):    """    Implements the sigmoid activation in numpy    Arguments:    Z -- numpy array of any shape    Returns:    A -- output of sigmoid(z), same shape as Z    cache -- returns Z as well, useful during backpropagation    """    A = 1/(1+np.exp(-Z))    cache = Z    return A, cachedef func_relu(Z):    """    Implement the RELU function.    Arguments:    Z -- Output of the linear layer, of any shape    Returns:    A -- Post-activation parameter, of the same shape as Z    cache -- a python dictionary containing "A" ; stored for computing the backward pass efficiently    """    A = np.maximum(0,Z)    assert(A.shape == Z.shape)    cache = Z     return A, cachedef func_relu_backward(dA, cache):    """    Implement the backward propagation for a single RELU unit.    Arguments:    dA -- post-activation gradient, of any shape    cache -- 'Z' where we store for computing backward propagation efficiently    Returns:    dZ -- Gradient of the cost with respect to Z    """    Z = cache    dZ = np.array(dA, copy=True) # just converting dz to a correct object.    # When z <= 0, you should set dz to 0 as well.     dZ[Z <= 0] = 0    assert (dZ.shape == Z.shape)    return dZdef func_sigmoid_backward(dA, cache):    """    Implement the backward propagation for a single SIGMOID unit.    Arguments:    dA -- post-activation gradient, of any shape    cache -- 'Z' where we store for computing backward propagation efficiently    Returns:    dZ -- Gradient of the cost with respect to Z    """    Z = cache    s = 1/(1+np.exp(-Z))    dZ = dA * s * (1-s)    assert (dZ.shape == Z.shape)    return dZ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-ä¸»è¦æ¡†æ¶"><a href="#3-ä¸»è¦æ¡†æ¶" class="headerlink" title="3-ä¸»è¦æ¡†æ¶"></a>3-ä¸»è¦æ¡†æ¶</h2><ol><li>åˆå§‹åŒ–å‚æ•°ï¼š$L$å±‚ç¥ç»ç½‘ç»œ</li><li>å®ç°å‰å‘ä¼ æ’­æ¨¡å—</li><li>è®¡ç®—æŸå¤±</li><li>å®ç°åå‘ä¼ æ’­æ¨¡å—</li><li>æ›´æ–°å‚æ•°</li></ol><ul><li>å¦‚ä¸‹å›¾</li></ul><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/final_outline.png" alt="final_outline.png"></p><ul><li>æ³¨æ„<ol><li>æ¯ä¸€ä¸ªå‰å‘ä¼ æ’­å¯¹åº”ä¸€ä¸ªåå‘ä¼ æ’­ï¼Œæ‰€ä»¥è¦å°†å‰å‘ä¼ æ’­çš„å€¼cacheï¼Œä»¥ä¾¿åå‘ä¼ æ’­è®¡ç®—æ¢¯åº¦</li></ol></li></ul><h2 id="4-å‚æ•°åˆå§‹åŒ–"><a href="#4-å‚æ•°åˆå§‹åŒ–" class="headerlink" title="4-å‚æ•°åˆå§‹åŒ–"></a>4-å‚æ•°åˆå§‹åŒ–</h2><ol><li>å®ç°2å±‚ç¥ç»ç½‘ç»œçš„å‚æ•°åˆå§‹åŒ–</li><li>å®ç°$L$å±‚ç¥ç»ç½‘ç»œçš„å‚æ•°åˆå§‹åŒ–</li></ol><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/relu.png" alt="relu"></p><h3 id="4-1-2å±‚ç¥ç»ç½‘ç»œ"><a href="#4-1-2å±‚ç¥ç»ç½‘ç»œ" class="headerlink" title="4.1-2å±‚ç¥ç»ç½‘ç»œ"></a>4.1-2å±‚ç¥ç»ç½‘ç»œ</h3><ul><li>æ¨¡å‹ç»“æ„æ˜¯ï¼š<em>LINEAR -&gt; RELU -&gt; LINEAR -&gt; SIGMOID</em></li><li>ç”¨<code>np.random.randn(shape)*0.01</code>æ¥éšæœºåˆå§‹åŒ–å‚æ•°</li><li>ç”¨<code>np.zeros(shape)</code>æ¥åˆå§‹åŒ–bias</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_2_layers_initialize_parameters(n_x, n_h, n_y):    """    2å±‚ç¥ç»ç½‘ç»œçš„å‚æ•°åˆå§‹åŒ–    :param n_x: size of the input layer    :param n_h: size of the hidden layer    :param n_y: size of the output layer    :return parameters: python dictionary containing your parameters:        W1 -- weight matrix of shape (n_h, n_x)        b1 -- bias vector of shape (n_h, 1)        W2 -- weight matrix of shape (n_y, n_h)        b2 -- bias vector of shape (n_y, 1)    """    np.random.seed(1)    W1 = np.random.randn(n_h, n_x) * 0.01    b1 = np.zeros((n_h, 1))    W2 = np.random.randn(n_y, n_h) * 0.01    b2 = np.zeros((n_y, 1))    parameters = {        'W1': W1,        'b1': b1,        'W2': W2,        'b2': b2    }    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_2_layers_initialize_parameters(3, 2, 1)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[ 0.01624345, -0.00611756, -0.00528172],        [-0.01072969,  0.00865408, -0.02301539]]), &#39;b1&#39;: array([[0.],        [0.]]), &#39;W2&#39;: array([[ 0.01744812, -0.00761207]]), &#39;b2&#39;: array([[0.]])}</code></pre><h3 id="3-2-Lå±‚ç¥ç»ç½‘ç»œ"><a href="#3-2-Lå±‚ç¥ç»ç½‘ç»œ" class="headerlink" title="3.2-Lå±‚ç¥ç»ç½‘ç»œ"></a>3.2-Lå±‚ç¥ç»ç½‘ç»œ</h3><ul><li>ä»¥è¾“å…¥$X$å¤§å°ä¸º(12288,209)(m=209)ä¸ºä¾‹ï¼Œå„å±‚å‚æ•°å¦‚ä¸‹è¡¨ï¼š</li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">-</th><th style="text-align:left">shape of W</th><th style="text-align:left">shape of b</th><th style="text-align:left">activation</th><th style="text-align:left">shape of activation</th></tr></thead><tbody><tr><td style="text-align:left">layer 1</td><td style="text-align:left">$(n^{[1]},12288)$</td><td style="text-align:left">$(n^{[1]},1)$</td><td style="text-align:left">$Z^{[1]} = W^{[1]}  X + b^{[1]}$</td><td style="text-align:left">$(n^{[1]},209)$</td></tr><tr><td style="text-align:left">layer 2</td><td style="text-align:left">$(n^{[2]}, n^{[1]})$</td><td style="text-align:left">$(n^{[2]},1)$</td><td style="text-align:left">$Z^{[2]} = W^{[2]} A^{[1]} + b^{[2]}$</td><td style="text-align:left">$(n^{[2]}, 209)$</td></tr><tr><td style="text-align:left">â€¦</td><td style="text-align:left">â€¦</td><td style="text-align:left">â€¦</td><td style="text-align:left">â€¦</td><td style="text-align:left">â€¦</td></tr><tr><td style="text-align:left">layer L-1</td><td style="text-align:left">$(n^{[L-1]}, n^{[L-2]})$</td><td style="text-align:left">$(n^{[L-1]}, 1)$</td><td style="text-align:left">$Z^{[L-1]} =  W^{[L-1]} A^{[L-2]} + b^{[L-1]}$</td><td style="text-align:left">$(n^{[L-1]}, 209)$</td></tr><tr><td style="text-align:left">layer L</td><td style="text-align:left">$(n^{[L]}, n^{[L-1]})$</td><td style="text-align:left">$(n^{[L]}, 1)$</td><td style="text-align:left">$Z^{[L]} =  W^{[L]} A^{[L-1]} + b^{[L]}$</td><td style="text-align:left">$(n^{[L]}, 209)$</td></tr></tbody></table></div><ul><li>åœ¨pythonä¸­ï¼Œåˆç†è¿ç”¨broadcastæœºåˆ¶ï¼Œå¦‚ä¸‹ï¼š</li></ul><script type="math/tex; mode=display">W = \begin{bmatrix}    j  & k  & l\\    m  & n & o \\    p  & q & r \end{bmatrix}\;\;\; X = \begin{bmatrix}    a  & b  & c\\    d  & e & f \\    g  & h & i \end{bmatrix} \;\;\; b =\begin{bmatrix}    s  \\    t  \\    u\end{bmatrix}\tag{2}</script><p>Then $WX + b$ will be:</p><script type="math/tex; mode=display">WX + b = \begin{bmatrix}(ja + kd + lg) + s  & (jb + ke + lh) + s  & (jc + kf + li)+ s\\(ma + nd + og) + t & (mb + ne + oh) + t & (mc + nf + oi) + t\\(pa + qd + rg) + u & (pb + qe + rh) + u & (pc + qf + ri)+ u\end{bmatrix}\tag{3}</script><ul><li>ç»ƒä¹ <ol><li>å®ç°Lå±‚ç¥ç»ç½‘ç»œå‚æ•°åˆå§‹åŒ–</li></ol></li><li>è¯´æ˜<ol><li>æ¨¡å‹ç»“æ„ä¸ºï¼š<em> [LINEAR -&gt; RELU] $ \times$ (L-1) -&gt; LINEAR -&gt; SIGMOID </em></li><li>ä½¿ç”¨<code>np.random.randn(shape)*0.01</code>åˆå§‹åŒ–$W$</li><li>ä½¿ç”¨<code>np.zeros(shape)</code>åˆå§‹åŒ–$b$</li><li>å°†$n^{[l]}$å­˜å‚¨åœ¨<code>layer_dims</code>ä¸­ï¼Œä¾‹å¦‚<code>layer_dims=[2,4,1]</code>æ„å‘³ç€2ä¸ªè¾“å…¥ç‰¹å¾ï¼Œä¸€ä¸ªéšè—å±‚4ä¸ªunitsï¼Œ1ä¸ªè¾“å‡º</li></ol></li><li><font size="5" color="red">å¼ºè°ƒ</font>ï¼š<ol><li>è¿™é‡Œ<code>/ np.sqrt(layer_dims[layer-1])</code>å¾ˆé‡è¦ï¼Œå¦‚æœè¿˜æ˜¯<code>*0.01</code>ï¼Œä¼šå¯¼è‡´æ¨¡å‹costé™ä¸ä¸‹å»</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layers_initialize_parameters(layer_dims):    """    Lå±‚ç¥ç»ç½‘ç»œå‚æ•°åˆå§‹åŒ–    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :return:         parameters -- python dictionary containing your parameters "W1", "b1", ..., "WL", "bL":        Wl -- weight matrix of shape (layer_dims[l], layer_dims[l-1])        bl -- bias vector of shape (layer_dims[l], 1)    """    np.random.seed(1)    parameters = {}    L = len(layer_dims)    # è¿™é‡Œ/ np.sqrt(layer_dims[layer-1])å¾ˆé‡è¦ï¼Œå¦‚æœè¿˜æ˜¯*0.01ï¼Œä¼šå¯¼è‡´æ¨¡å‹costé™ä¸ä¸‹å»    for layer in range(1, L):        parameters['W' + str(layer)] = np.random.randn(layer_dims[layer], layer_dims[layer-1]) / np.sqrt(layer_dims[layer-1]) # * 0.01        parameters['b' + str(layer)] = np.zeros((layer_dims[layer], 1))        assert(parameters['W' + str(layer)].shape == (layer_dims[layer], layer_dims[layer-1]))        assert(parameters['b' + str(layer)].shape == (layer_dims[layer], 1))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_L_layers_initialize_parameters(layer_dims=[5, 4, 3])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[ 0.72642933, -0.27358579, -0.23620559, -0.47984616,  0.38702206],        [-1.0292794 ,  0.78030354, -0.34042208,  0.14267862, -0.11152182],        [ 0.65387455, -0.92132293, -0.14418936, -0.17175433,  0.50703711],        [-0.49188633, -0.07711224, -0.39259022,  0.01887856,  0.26064289]]), &#39;b1&#39;: array([[0.],        [0.],        [0.],        [0.]]), &#39;W2&#39;: array([[-0.55030959,  0.57236185,  0.45079536,  0.25124717],        [ 0.45042797, -0.34186393, -0.06144511, -0.46788472],        [-0.13394404,  0.26517773, -0.34583038, -0.19837676]]), &#39;b2&#39;: array([[0.],        [0.],        [0.]])}</code></pre><h2 id="5-forward-propagation"><a href="#5-forward-propagation" class="headerlink" title="5-forward propagation"></a>5-forward propagation</h2><h3 id="5-1-linear-forward"><a href="#5-1-linear-forward" class="headerlink" title="5.1-linear forward"></a>5.1-linear forward</h3><ul><li>å…¬å¼<script type="math/tex; mode=display">Z^{[l]} = W^{[l]}A^{[l-1]} + b^{[l]} \\A^{[0]} = X</script></li><li>ç»ƒä¹ <ol><li>å®ç°<code>func_linear_forward()</code>å‡½æ•°</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_forward(A, W, b):    """    linear forward    :param A:    :param W:    :param b:    :return Z,chche:        Z -- the input of the activation function, also called pre-activation parameter         cache -- a python dictionary containing "A", "W" and "b" ; stored for computing the backward pass efficiently    """    Z = np.dot(W, A) + b    assert(Z.shape == (W.shape[0], A.shape[1]))    cache = (A, W, b)    return Z, cache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A, W, b = func_linear_forward_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(A.shape, W.shape, b.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(3, 2) (1, 3) (1, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">Z, linear_cache = func_linear_forward(A, W, b)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">Z<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[ 3.26295337, -1.23429987]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">linear_cache<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(array([[ 1.62434536, -0.61175641],        [-0.52817175, -1.07296862],        [ 0.86540763, -2.3015387 ]]), array([[ 1.74481176, -0.7612069 ,  0.3190391 ]]), array([[-0.24937038]]))</code></pre><h3 id="5-2-linear-activation-forward"><a href="#5-2-linear-activation-forward" class="headerlink" title="5.2-linear activation forward"></a>5.2-linear activation forward</h3><ul><li>activation method:<ol><li>sigmoid</li><li>relu</li></ol></li><li>å…¬å¼<script type="math/tex; mode=display">  A^{[l]} = g(Z^{[l]}) = g(W^{[l]}A^{[l-1]} +b^{[l]})</script></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_activation_forward(A_prev, W, b, activation):    """    Implement the forward propagation for the LINEAR->ACTIVATION layer    :param A_prev: activations from previous layer (or input data): (size of previous layer, number of examples)    :param W: weights matrix: numpy array of shape (size of current layer, size of previous layer)    :param b: bias vector, numpy array of shape (size of the current layer, 1)    :param activation: the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :return:        A -- the output of the activation function, also called the post-activation value         cache -- a python dictionary containing "linear_cache" and "activation_cache";                 stored for computing the backward pass efficiently    """    Z, linear_cache = func_linear_forward(A_prev, W, b)    if activation == 'sigmoid':        A, activation_cache = func_sigmoid(Z)    elif activation == 'relu':        A, activation_cache = func_relu(Z)    else:        raise ValueError('activation param')    assert(A.shape == (W.shape[0], A_prev.shape[1]))    cache = (linear_cache, activation_cache)    return A, cache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A_prev, W, b = func_linear_activation_forward_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(A_prev.shape, W.shape, b.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(3, 2) (1, 3) (1, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A, linear_activation_cache = func_linear_activation_forward(A_prev, W, b, activation='sigmoid')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[0.96890023, 0.11013289]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">linear_activation_cache<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>((array([[-0.41675785, -0.05626683],         [-2.1361961 ,  1.64027081],         [-1.79343559, -0.84174737]]),  array([[ 0.50288142, -1.24528809, -1.05795222]]),  array([[-0.90900761]])), array([[ 3.43896131, -2.08938436]]))</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A, linear_activation_cache = func_linear_activation_forward(A_prev, W, b, activation='relu')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[3.43896131, 0.        ]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">linear_activation_cache<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>((array([[-0.41675785, -0.05626683],         [-2.1361961 ,  1.64027081],         [-1.79343559, -0.84174737]]),  array([[ 0.50288142, -1.24528809, -1.05795222]]),  array([[-0.90900761]])), array([[ 3.43896131, -2.08938436]]))</code></pre><h3 id="5-3-L-layer-forward"><a href="#5-3-L-layer-forward" class="headerlink" title="5.3-L layer forward"></a>5.3-L layer forward</h3><ul><li>å¦‚å›¾ï¼š</li></ul><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/model_architecture_kiank.png" alt="model_architecture_ki.png"></p><ul><li>ç»ƒä¹ ï¼š<ol><li>å®ç°<code>func_L_model_forward()</code></li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_model_forward(X, parameters):    """    Implement forward propagation for the [LINEAR->RELU]*(L-1)->LINEAR->SIGMOID computation    :param X -- data, numpy array of shape (input size, number of examples)    :param parameters -- output of initialize_parameters_deep()    :return:        AL -- last post-activation value        caches -- list of caches containing:                    every cache of linear_relu_forward() (there are L-1 of them, indexed from 0 to L-2)                    the cache of linear_sigmoid_forward() (there is one, indexed L-1)    """    caches = []    A = X    L = len(parameters) // 2    for layer in range(1, L):        A_prev = A        W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]        A, cache = func_linear_activation_forward(A_prev, W, b, 'relu')        caches.append(cache)    A_prev = A    layer = L    W, b = parameters['W'+str(layer)], parameters['b'+str(layer)]    A, cache = func_linear_activation_forward(A_prev, W, b, 'sigmoid')    caches.append(cache)    assert(A.shape == (1, X.shape[1]))    return A, caches<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X, parameters = func_L_model_forward_test_case_2hidden()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[-0.31178367,  0.72900392,  0.21782079, -0.8990918 ],       [-2.48678065,  0.91325152,  1.12706373, -1.51409323],       [ 1.63929108, -0.4298936 ,  2.63128056,  0.60182225],       [-0.33588161,  1.23773784,  0.11112817,  0.12915125],       [ 0.07612761, -0.15512816,  0.63422534,  0.810655  ]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[ 0.35480861,  1.81259031, -1.3564758 , -0.46363197,  0.82465384],        [-1.17643148,  1.56448966,  0.71270509, -0.1810066 ,  0.53419953],        [-0.58661296, -1.48185327,  0.85724762,  0.94309899,  0.11444143],        [-0.02195668, -2.12714455, -0.83440747, -0.46550831,  0.23371059]]), &#39;b1&#39;: array([[ 1.38503523],        [-0.51962709],        [-0.78015214],        [ 0.95560959]]), &#39;W2&#39;: array([[-0.12673638, -1.36861282,  1.21848065, -0.85750144],        [-0.56147088, -1.0335199 ,  0.35877096,  1.07368134],        [-0.37550472,  0.39636757, -0.47144628,  2.33660781]]), &#39;b2&#39;: array([[ 1.50278553],        [-0.59545972],        [ 0.52834106]]), &#39;W3&#39;: array([[ 0.9398248 ,  0.42628539, -0.75815703]]), &#39;b3&#39;: array([[-0.16236698]])}</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A, caches = func_L_model_forward(X, parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[0.03921668, 0.70498921, 0.19734387, 0.04728177]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">caches<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>[((array([[-0.31178367,  0.72900392,  0.21782079, -0.8990918 ],          [-2.48678065,  0.91325152,  1.12706373, -1.51409323],          [ 1.63929108, -0.4298936 ,  2.63128056,  0.60182225],          [-0.33588161,  1.23773784,  0.11112817,  0.12915125],          [ 0.07612761, -0.15512816,  0.63422534,  0.810655  ]]),   array([[ 0.35480861,  1.81259031, -1.3564758 , -0.46363197,  0.82465384],          [-1.17643148,  1.56448966,  0.71270509, -0.1810066 ,  0.53419953],          [-0.58661296, -1.48185327,  0.85724762,  0.94309899,  0.11444143],          [-0.02195668, -2.12714455, -0.83440747, -0.46550831,  0.23371059]]),   array([[ 1.38503523],          [-0.51962709],          [-0.78015214],          [ 0.95560959]])),  array([[-5.23825714,  3.18040136,  0.4074501 , -1.88612721],         [-2.77358234, -0.56177316,  3.18141623, -0.99209432],         [ 4.18500916, -1.78006909, -0.14502619,  2.72141638],         [ 5.05850802, -1.25674082, -3.54566654,  3.82321852]])), ((array([[0.        , 3.18040136, 0.4074501 , 0.        ],          [0.        , 0.        , 3.18141623, 0.        ],          [4.18500916, 0.        , 0.        , 2.72141638],          [5.05850802, 0.        , 0.        , 3.82321852]]),   array([[-0.12673638, -1.36861282,  1.21848065, -0.85750144],          [-0.56147088, -1.0335199 ,  0.35877096,  1.07368134],          [-0.37550472,  0.39636757, -0.47144628,  2.33660781]]),   array([[ 1.50278553],          [-0.59545972],          [ 0.52834106]])),  array([[ 2.2644603 ,  1.09971298, -2.90298027,  1.54036335],         [ 6.33722569, -2.38116246, -4.11228806,  4.48582383],         [10.37508342, -0.66591468,  1.63635185,  8.17870169]])), ((array([[ 2.2644603 ,  1.09971298,  0.        ,  1.54036335],          [ 6.33722569,  0.        ,  0.        ,  4.48582383],          [10.37508342,  0.        ,  1.63635185,  8.17870169]]),   array([[ 0.9398248 ,  0.42628539, -0.75815703]]),   array([[-0.16236698]])),  array([[-3.19864676,  0.87117055, -1.40297864, -3.00319435]]))]</code></pre><h2 id="6-æŸå¤±å‡½æ•°"><a href="#6-æŸå¤±å‡½æ•°" class="headerlink" title="6-æŸå¤±å‡½æ•°"></a>6-æŸå¤±å‡½æ•°</h2><ul><li>cross entropyå…¬å¼</li></ul><script type="math/tex; mode=display">-\frac{1}{m} \sum\limits_{i = 1}^{m} \left(y^{(i)}\log(a^{[L] (i)}) + (1-y^{(i)})\log(1- a^{[L](i)})\right)</script><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_compute_cost(AL, Y):    """    Implement the cost function defined by equation (7).    :param AL -- probability vector corresponding to your label predictions, shape (1, number of examples)    :param Y -- true "label" vector (for example: containing 0 if non-cat, 1 if cat), shape (1, number of examples)    :return:        cost -- cross-entropy cost    """    m = Y.shape[1]#     cost = -1 / m * np.sum(np.multiply(Y, np.log(AL))+np.multiply(1-Y, np.log(1-AL)))    cost = (1./m) * (-np.dot(Y,np.log(AL).T) - np.dot(1-Y, np.log(1-AL).T))    cost = np.squeeze(cost)    assert(cost.shape == ())    return cost<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">Y, AL = func_compute_cost_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">cost = func_compute_cost(AL, Y)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">cost<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array(0.4149316)</code></pre><h2 id="7-backward-propagation"><a href="#7-backward-propagation" class="headerlink" title="7-backward propagation"></a>7-backward propagation</h2><ul><li>åå‘ä¼ æ’­æ¨¡å—æ˜¯ä¸ºäº†è®¡ç®—æ¢¯åº¦ï¼Œä»è€Œæ›´æ–°å‚æ•°</li><li>åå‘ä¼ æ’­å›¾</li></ul><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/backprop.png"></p><caption><center> **Figure 3** : Forward and Backward propagation for *LINEAR->RELU->LINEAR->SIGMOID* <br> *The purple blocks represent the forward propagation, and the red blocks represent the backward propagation.*  </center></caption><ul><li>åå‘ä¼ æ’­å…¬å¼</li></ul><script type="math/tex; mode=display">\frac{d \mathcal{L}(a^{[2]},y)}{ {dz^{[1]}} } = \frac{d\mathcal{L}(a^{[2]},y)}{ {da^{[2]}} }\frac{ {da^{[2]} }}{ {dz^{[2]}} }\frac{ {dz^{[2]}} }{ {da^{[1]}} }\frac{ {da^{[1]}} }{ {dz^{[1]}} }  \\dW^{[1]} = \frac{\partial \mathcal{L}}{\partial W^{[1]}} = dz^{[1]} \times \frac{\partial z^{[1]} }{\partial W^{[1]}}  \\db^{[1]} = \frac{\partial \mathcal{L}}{\partial b^{[1]}} = dz^{[1]} \times \frac{\partial z^{[1]} }{\partial b^{[1]}}</script><ul><li>ç»ƒä¹ <ol><li>å®ç°linear backward</li><li>å®ç°æ¿€æ´»å‡½æ•°çš„backward</li><li>å®ç°Lå±‚çš„backward</li></ol></li></ul><h3 id="7-1-linear-backward"><a href="#7-1-linear-backward" class="headerlink" title="7.1-linear backward"></a>7.1-linear backward</h3><ul><li>å¯¹äºlayer lï¼Œ<ol><li>linear forwardæ˜¯ï¼š$Z^{[l]} = W^{[l]} A^{[l-1]} + b^{[l]}$</li><li>linear backwardæ˜¯ï¼š$dZ^{[l]} = \frac{\partial \mathcal{L} }{\partial Z^{[l]}}$</li></ol></li><li><p>å¦‚ä¸‹å›¾</p><p>  <img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/linearback_kiank.png" style="width:250px;height:300px;"></p>  <caption><center> **Figure 4** </center></caption></li><li><p>æ±‚è§£$(dW^{[l]}, db^{[l]} dA^{[l-1]})$å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">  dW^{[l]} = \frac{\partial \mathcal{L} }{\partial W^{[l]}} = \frac{1}{m} dZ^{[l]} A^{[l-1] T} \\  db^{[l]} = \frac{\partial \mathcal{L} }{\partial b^{[l]}} = \frac{1}{m} \sum_{i = 1}^{m} dZ^{[l](i)} \\  dA^{[l-1]} = \frac{\partial \mathcal{L} }{\partial A^{[l-1]}} = W^{[l] T} dZ^{[l]}</script></li><li>è§£é‡Šï¼š<ol><li>$dW^{[l]}$æºå¸¦$1/m$æ˜¯å› ä¸ºä¸€å…±$m$ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬éƒ½ä¼šè®¡ç®—ä¸€æ¬¡æŸå¤±ä»¥åŠ$dW^{[l]}$</li><li>$W^{[l]}$çš„ç»´åº¦ä¸º$(n^{[l]}, n^{[l-1]})$</li><li>$A^{[l-1]}$çš„ç»´åº¦ä¸º$(n^{[l-1]}, m)$ï¼Œæ•…å…¶å¯¼æ•°ä¸æºå¸¦$1/m$</li></ol></li><li>ç»ƒä¹ ï¼š<ol><li>å®ç°<code>func_linear_backward()</code>å‡½æ•°</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_backward(dZ, cache):    """    Implement the linear portion of backward propagation for a single layer (layer l)    :param dZ -- Gradient of the cost with respect to the linear output (of current layer l)    :param cache -- tuple of values (A_prev, W, b) coming from the forward propagation in the current layer    :return:        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    A_prev, W, b = cache    m = A_prev.shape[1]    dW = 1 / m * np.dot(dZ, A_prev.T)    db = 1 / m * np.sum(dZ, axis=1, keepdims=True)  # axis=1æ˜¯è¡Œè®°å½•æ±‚å’Œ    dA_prev = np.dot(W.T, dZ)    assert(dW.shape == W.shape)    assert(db.shape == b.shape)    assert(dA_prev.shape == A_prev.shape)    return dA_prev, dW, db<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dZ, linear_cache = func_linear_backward_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dZ.shape<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(1, 2)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for i in linear_cache:    print(i.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>(3, 2)(1, 3)(1, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dA_prev, dW, db = func_linear_backward(dZ, linear_cache)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dA_prev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[ 0.51822968, -0.19517421],       [-0.40506361,  0.15255393],       [ 2.37496825, -0.89445391]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dW<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[-0.10076895,  1.40685096,  1.64992505]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">db<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[0.50629448]])</code></pre><h3 id="7-2-linear-activation-backward"><a href="#7-2-linear-activation-backward" class="headerlink" title="7.2-linear activation backward"></a>7.2-linear activation backward</h3><ul><li>å…¬å¼</li></ul><script type="math/tex; mode=display">dZ^{[l]} = dA^{[l]} * g'(Z^{[l]})</script><ul><li>ç»ƒä¹ <ol><li>å®ç°<code>func_linear_activation_backward()</code>å‡½æ•°</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_linear_activation_backward(dA, cache, activation):    """    Implement the backward propagation for the LINEAR->ACTIVATION layer.    :param dA -- post-activation gradient for current layer l     :param cache -- tuple of values (linear_cache, activation_cache) we store for computing backward propagation efficiently    :param activation -- the activation to be used in this layer, stored as a text string: "sigmoid" or "relu"    :returns        dA_prev -- Gradient of the cost with respect to the activation (of the previous layer l-1), same shape as A_prev        dW -- Gradient of the cost with respect to W (current layer l), same shape as W        db -- Gradient of the cost with respect to b (current layer l), same shape as b    """    linear_cache, activation_cache = cache    if activation == 'relu':        dZ = func_relu_backward(dA, activation_cache)    elif activation == 'sigmoid':        dZ = func_sigmoid_backward(dA, activation_cache)    else:        raise ValueError('activation param')    dA_prev, dW, db = func_linear_backward(dZ, linear_cache)    return dA_prev, dW, db<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">AL, linear_activation_cache = func_linear_activation_backward_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">AL<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[-0.41675785, -0.05626683]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">linear_activation_cache<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>((array([[-2.1361961 ,  1.64027081],         [-1.79343559, -0.84174737],         [ 0.50288142, -1.24528809]]),  array([[-1.05795222, -0.90900761,  0.55145404]]),  array([[2.29220801]])), array([[ 0.04153939, -1.11792545]]))</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dA_prev, dW, db = func_linear_activation_backward(AL, linear_activation_cache, activation='sigmoid')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dA_prev, dW, db<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(array([[ 0.11017994,  0.01105339],        [ 0.09466817,  0.00949723],        [-0.05743092, -0.00576154]]), array([[ 0.10266786,  0.09778551, -0.01968084]]), array([[-0.05729622]]))</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dA_prev, dW, db = func_linear_activation_backward(AL, linear_activation_cache, activation='relu')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">dA_prev, dW, db<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(array([[ 0.44090989,  0.        ],        [ 0.37883606,  0.        ],        [-0.2298228 ,  0.        ]]), array([[ 0.44513824,  0.37371418, -0.10478989]]), array([[-0.20837892]]))</code></pre><h3 id="7-3-L-layer-backward"><a href="#7-3-L-layer-backward" class="headerlink" title="7.3-L layer backward"></a>7.3-L layer backward</h3><ul><li>ç»“æ„å›¾</li></ul><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/mn_backward.png" style="width:450px;height:300px;"></p><caption><center>  **Figure 5** : Backward pass  </center></caption><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/mn_backward1.jpg" style="width:450px;height:300px;"></p><caption><center>  **Figure 5** : Backward pass æˆªå›¾  </center></caption><ul><li><p>outputå±‚çš„æ¢¯åº¦</p><p>  <code>dAL</code> $= \frac{\partial \mathcal{L}}{\partial A^{[L]}}$=<code>- (np.divide(Y, AL) - np.divide(1 - Y, 1 - AL))</code></p></li><li><p>ç»ƒä¹ </p><ol><li>å®ç°<code>func_L_model_backward()</code>å‡½æ•°</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_model_backward(AL, Y, caches):    """    Implement the backward propagation for the [LINEAR->RELU] * (L-1) -> LINEAR -> SIGMOID group    :param AL -- probability vector, output of the forward propagation (L_model_forward())    :param Y -- true "label" vector (containing 0 if non-cat, 1 if cat)    :param caches -- list of caches containing:                    every cache of linear_activation_forward() with "relu" (it's caches[l], for l in range(L-1) i.e l = 0...L-2)                    the cache of linear_activation_forward() with "sigmoid" (it's caches[L-1])    :return:        grads -- A dictionary with the gradients                 grads["dA" + str(l)] = ...                  grads["dW" + str(l)] = ...                 grads["db" + str(l)] = ...     """    grads = {}    L = len(caches)    m = AL.shape[1]    Y = Y.reshape(AL.shape)    dAL = - (np.divide(Y, AL) - np.divide(1-Y, 1-AL))    cur_cache = caches[L-1]    grads['dA' + str(L-1)], grads['dW'+str(L)], grads['db'+str(L)] = func_linear_activation_backward(dAL, cur_cache, activation='sigmoid')    for layer in reversed(range(L-1)):        cur_cache = caches[layer]        dA_prev_tmp, dW_tmp, db_tmp = func_linear_activation_backward(grads["dA"+str(layer+1)], cur_cache, activation='relu')        grads['dA'+str(layer)] = dA_prev_tmp        grads['dW'+str(layer+1)] = dW_tmp        grads['db'+str(layer+1)] = db_tmp#     current_cache = caches[L-1]#     grads["dA" + str(L)], grads["dW" + str(L)], grads["db" + str(L)] = func_linear_activation_backward(dAL, current_cache, activation = "sigmoid")#     for l in reversed(range(L-1)):#         # lth layer: (RELU -> LINEAR) gradients.#         current_cache = caches[l]#         dA_prev_temp, dW_temp, db_temp = func_linear_activation_backward(grads["dA" + str(l + 2)], current_cache, activation = "relu")#         grads["dA" + str(l + 1)] = dA_prev_temp#         grads["dW" + str(l + 1)] = dW_temp#         grads["db" + str(l + 1)] = db_temp    return grads<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">AL, Y_assess, caches = func_L_model_backward_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">AL, Y_assess, caches<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(array([[1.78862847, 0.43650985]]), array([[1, 0]]), (((array([[ 0.09649747, -1.8634927 ],           [-0.2773882 , -0.35475898],           [-0.08274148, -0.62700068],           [-0.04381817, -0.47721803]]),    array([[-1.31386475,  0.88462238,  0.88131804,  1.70957306],           [ 0.05003364, -0.40467741, -0.54535995, -1.54647732],           [ 0.98236743, -1.10106763, -1.18504653, -0.2056499 ]]),    array([[ 1.48614836],           [ 0.23671627],           [-1.02378514]])),   array([[-0.7129932 ,  0.62524497],          [-0.16051336, -0.76883635],          [-0.23003072,  0.74505627]])),  ((array([[ 1.97611078, -1.24412333],           [-0.62641691, -0.80376609],           [-2.41908317, -0.92379202]]),    array([[-1.02387576,  1.12397796, -0.13191423]]),    array([[-1.62328545]])),   array([[ 0.64667545, -0.35627076]]))))</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">grads = func_L_model_backward(AL, Y_assess, caches)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">grads<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;dA1&#39;: array([[ 0.12913162, -0.44014127],        [-0.14175655,  0.48317296],        [ 0.01663708, -0.05670698]]), &#39;dW2&#39;: array([[-0.39202432, -0.13325855, -0.04601089]]), &#39;db2&#39;: array([[0.15187861]]), &#39;dA0&#39;: array([[ 0.        ,  0.52257901],        [ 0.        , -0.3269206 ],        [ 0.        , -0.32070404],        [ 0.        , -0.74079187]]), &#39;dW1&#39;: array([[0.41010002, 0.07807203, 0.13798444, 0.10502167],        [0.        , 0.        , 0.        , 0.        ],        [0.05283652, 0.01005865, 0.01777766, 0.0135308 ]]), &#39;db1&#39;: array([[-0.22007063],        [ 0.        ],        [-0.02835349]])}</code></pre><h3 id="7-4-æ›´æ–°å‚æ•°"><a href="#7-4-æ›´æ–°å‚æ•°" class="headerlink" title="7.4-æ›´æ–°å‚æ•°"></a>7.4-æ›´æ–°å‚æ•°</h3><ul><li>æ›´æ–°å…¬å¼</li></ul><script type="math/tex; mode=display">W^{[l]} = W^{[l]} - \alpha \text{ } dW^{[l]} \\b^{[l]} = b^{[l]} - \alpha \text{ } db^{[l]}</script><ul><li>ç»ƒä¹ <ol><li>å®ç°<code>func_update_parameters()</code>å‡½æ•°</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_update_parameters(parameters, grads, lr):    """    Update parameters using gradient descent    :param parameters -- python dictionary containing your parameters     :param grads -- python dictionary containing your gradients, output of L_model_backward    :param lr: learning rate    :return:        parameters -- python dictionary containing your updated parameters                       parameters["W" + str(l)] = ...                       parameters["b" + str(l)] = ...    """    L = len(parameters) // 2    for layer in range(1, L+1):        parameters['W'+str(layer)] = parameters['W'+str(layer)] - lr * grads['dW' + str(layer)]        parameters['b'+str(layer)] = parameters['b'+str(layer)] - lr * grads['db' + str(layer)]    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, grads = func_update_parameters_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, grads<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>({&#39;W1&#39;: array([[-0.41675785, -0.05626683, -2.1361961 ,  1.64027081],         [-1.79343559, -0.84174737,  0.50288142, -1.24528809],         [-1.05795222, -0.90900761,  0.55145404,  2.29220801]]),  &#39;b1&#39;: array([[ 0.04153939],         [-1.11792545],         [ 0.53905832]]),  &#39;W2&#39;: array([[-0.5961597 , -0.0191305 ,  1.17500122]]),  &#39;b2&#39;: array([[-0.74787095]])}, {&#39;dW1&#39;: array([[ 1.78862847,  0.43650985,  0.09649747, -1.8634927 ],         [-0.2773882 , -0.35475898, -0.08274148, -0.62700068],         [-0.04381817, -0.47721803, -1.31386475,  0.88462238]]),  &#39;db1&#39;: array([[0.88131804],         [1.70957306],         [0.05003364]]),  &#39;dW2&#39;: array([[-0.40467741, -0.54535995, -1.54647732]]),  &#39;db2&#39;: array([[0.98236743]])})</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_update_parameters(parameters, grads, 0.1)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[-0.59562069, -0.09991781, -2.14584584,  1.82662008],        [-1.76569676, -0.80627147,  0.51115557, -1.18258802],        [-1.0535704 , -0.86128581,  0.68284052,  2.20374577]]), &#39;b1&#39;: array([[-0.04659241],        [-1.28888275],        [ 0.53405496]]), &#39;W2&#39;: array([[-0.55569196,  0.0354055 ,  1.32964895]]), &#39;b2&#39;: array([[-0.84610769]])}</code></pre><h3 id="7-5-é¢„æµ‹"><a href="#7-5-é¢„æµ‹" class="headerlink" title="7.5-é¢„æµ‹"></a>7.5-é¢„æµ‹</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_predict(X, y, parameters):    """    This function is used to predict the results of a  L-layer neural network.    :param X -- data set of examples you would like to label    :param parameters -- parameters of the trained model    :return:        p -- predictions for the given dataset X    """    m = X.shape[1]    L = len(parameters) // 2    p = np.zeros((1, m))    probas, caches = func_L_model_forward(X, parameters)    for i in range(probas.shape[1]):        if probas[0, i] > 0.5:            p[0, i] = 1        else:            p[0, i] = 0    print('acc: {}'.format(np.sum(p==y)/m))    return p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-æ•´åˆåˆ°model"><a href="#8-æ•´åˆåˆ°model" class="headerlink" title="8-æ•´åˆåˆ°model"></a>8-æ•´åˆåˆ°model</h2><h3 id="8-1-two-layer-neural-network"><a href="#8-1-two-layer-neural-network" class="headerlink" title="8.1-two layer neural network"></a>8.1-two layer neural network</h3><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/2layerNN_kiank.png" style="width:650px;height:400px;"></p><caption><center> <u>Figure 2</u>: 2-layer neural network. <br> The model can be summarized as: ***INPUT -> LINEAR -> RELU -> LINEAR -> SIGMOID -> OUTPUT***. </center></caption><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_two_layer_nn_model(X, Y, layer_dims, lr=0.001, num_epochs=10000, print_cost=False):    """    åŒå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    :param X:    :param Y:    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param lr: learning rate    :param num_epochs:    :param print_cost:    :return params    """    np.random.seed(1)    grads = {}    costs = []    m = X.shape[1]    (n_x, n_h, n_y) = layer_dims    # å‚æ•°åˆå§‹åŒ–    parameters = func_2_layers_initialize_parameters(n_x, n_h, n_y)    W1 = parameters['W1']    b1 = parameters['b1']    W2 = parameters['W2']    b2 = parameters['b2']    # loop    for epoch in range(num_epochs):        # å‰å‘ä¼ æ’­        A1, cache1 = func_linear_activation_forward(X, W1, b1, 'relu')        A2, cache2 = func_linear_activation_forward(A1, W2, b2, 'sigmoid')        # è®¡ç®—æŸå¤±        cost = func_compute_cost(A2, Y)        # åå‘ä¼ æ’­        dA2 = -(np.divide(Y, A2) - np.divide(1-Y, 1-A2))        dA1, dW2, db2 = func_linear_activation_backward(dA2, cache2, 'sigmoid')        dA0, dW1, db1 = func_linear_activation_backward(dA1, cache1, 'relu')        grads['dW1'] = dW1        grads['db1'] = db1        grads['dW2'] = dW2        grads['db2'] = db2        # æ›´æ–°å‚æ•°        parameters = func_update_parameters(parameters, grads, lr)        W1 = parameters['W1']        b1 = parameters['b1']        W2 = parameters['W2']        b2 = parameters['b2']        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 100 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))        if epoch % 100 == 0:            costs.append(cost)    return parameters, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-2-L-layer-deep-neural-network"><a href="#8-2-L-layer-deep-neural-network" class="headerlink" title="8.2 L layer deep neural network"></a>8.2 L layer deep neural network</h3><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/LlayerNN_kiank.png" style="width:650px;height:400px;"></p><caption><center> <u>Figure 3</u>: L-layer neural network. <br> The model can be summarized as: ***[LINEAR -> RELU] $\times$ (L-1) -> LINEAR -> SIGMOID***</center></caption><p><u>Detailed Architecture of figure 3</u>:</p><ul><li>The input is a (64,64,3) image which is flattened to a vector of size (12288,1).</li><li>The corresponding vector: $[x_0,x_1,â€¦,x_{12287}]^T$ is then multiplied by the weight matrix $W^{[1]}$ and then you add the intercept $b^{[1]}$. The result is called the linear unit.</li><li>Next, you take the relu of the linear unit. This process could be repeated several times for each $(W^{[l]}, b^{[l]})$ depending on the model architecture.</li><li>Finally, you take the sigmoid of the final linear unit. If it is greater than 0.5, you classify it to be a cat.</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_L_layer_dnn_model(X, Y, layer_dims, lr=0.001, num_epochs=10000, print_cost=False):    """    å¤šå±‚ç¥ç»ç½‘ç»œæ¨¡å‹    :param X:    :param Y:    :param layer_dims: python array (list) containing the dimensions of each layer in our network    :param lr: learning rate    :param num_epochs:    :param print_cost:    :return params    """    np.random.seed(1)    costs = []#     m = X.shape[1]    # å‚æ•°åˆå§‹åŒ–    parameters = func_L_layers_initialize_parameters(layer_dims)    # loop    for epoch in range(num_epochs):        # å‰å‘ä¼ æ’­        AL, caches = func_L_model_forward(X, parameters)        # è®¡ç®—æŸå¤±        cost = func_compute_cost(AL, Y)        # åå‘ä¼ æ’­        grads = func_L_model_backward(AL, Y, caches)        # æ›´æ–°å‚æ•°        parameters = func_update_parameters(parameters, grads, lr)        # æ‰“å°ä¿¡æ¯        if print_cost and epoch % 100 == 0:            print('cost after epoch {}: {}'.format(epoch, np.squeeze(cost)))        if epoch % 100 == 0:            costs.append(cost)    return parameters, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="9-åº”ç”¨-å›¾ç‰‡åˆ†ç±»"><a href="#9-åº”ç”¨-å›¾ç‰‡åˆ†ç±»" class="headerlink" title="9-åº”ç”¨=å›¾ç‰‡åˆ†ç±»"></a>9-åº”ç”¨=å›¾ç‰‡åˆ†ç±»</h2><ul><li>You will use use the functions youâ€™d implemented in the previous assignment to build a deep network, and apply it to cat vs non-cat classification.</li></ul><h3 id="9-1-ä¸€äº›å‡½æ•°"><a href="#9-1-ä¸€äº›å‡½æ•°" class="headerlink" title="9.1-ä¸€äº›å‡½æ•°"></a>9.1-ä¸€äº›å‡½æ•°</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_load_dataset():    """    from lr_utils import load_dataset    :return train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes    """    train_dataset = h5py.File('./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š1/train_catvnoncat.h5', "r")    train_set_x_orig = np.array(train_dataset["train_set_x"][:]) # your train set features    train_set_y_orig = np.array(train_dataset["train_set_y"][:]) # your train set labels    test_dataset = h5py.File('./æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š1/test_catvnoncat.h5', "r")    test_set_x_orig = np.array(test_dataset["test_set_x"][:]) # your test set features    test_set_y_orig = np.array(test_dataset["test_set_y"][:]) # your test set labels    classes = np.array(test_dataset["list_classes"][:]) # the list of classes    train_set_y_orig = train_set_y_orig.reshape((1, train_set_y_orig.shape[0]))    test_set_y_orig = test_set_y_orig.reshape((1, test_set_y_orig.shape[0]))    return train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_print_mislabeled_images(classes, X, y, p):    """    Plots images where predictions and truth were different.    :param X -- dataset    :param y -- true labels    :param p -- predictions    """    a = p + y    mislabeled_indices = np.asarray(np.where(a == 1))    plt.rcParams['figure.figsize'] = (40.0, 40.0) # set default size of plots    num_images = len(mislabeled_indices[0])    for i in range(num_images):        index = mislabeled_indices[1][i]        plt.subplot(2, num_images, i + 1)        plt.imshow(X[:,index].reshape(64,64,3), interpolation='nearest')        plt.axis('off')        plt.title("Prediction: " + classes[int(p[0,index])].decode("utf-8") + " \n Class: " + classes[y[0,index]].decode("utf-8"))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-2-å¯¼å…¥æ•°æ®é›†"><a href="#9-2-å¯¼å…¥æ•°æ®é›†" class="headerlink" title="9.2-å¯¼å…¥æ•°æ®é›†"></a>9.2-å¯¼å…¥æ•°æ®é›†</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes = func_load_dataset()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(train_set_x_orig.shape)print(test_set_x_orig.shape)print(train_set_y_orig.shape)print(test_set_y_orig.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(209, 64, 64, 3)(50, 64, 64, 3)(1, 209)(1, 50)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">index = 10plt.imshow(train_set_x_orig[index])print('y=' + str(train_set_y_orig[:, index]) + ' it is a ' + classes[np.squeeze(train_set_y_orig[:, index])].decode('utf-8'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>y=[0] it is a non-cat</code></pre><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/output_92_1.png" alt="output_92_1"></p><ul><li>é‡å¡‘æ•°æ®é›†ï¼Œå°†å¤§å°(n, length, height, 3)çš„é‡å¡‘ä¸º(length*height*3, n)</li><li>å¦‚ä¸‹å›¾</li></ul><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/imvectorkiank.png" alt="imvector"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x_flatten = train_set_x_orig.reshape(train_set_x_orig.shape[0], -1).Ttest_set_x_flatten = test_set_x_orig.reshape(test_set_x_orig.shape[0], -1).Tprint(train_set_x_flatten.shape)print(test_set_x_flatten.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(12288, 209)(12288, 50)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x_flatten[:5, 0]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([17, 31, 56, 22, 33], dtype=uint8)</code></pre><ul><li>æ•°æ®é¢„å¤„ç†</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x = train_set_x_flatten / 255.test_set_x = test_set_x_flatten / 255.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x[:5, 0]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([0.06666667, 0.12156863, 0.21960784, 0.08627451, 0.12941176])</code></pre><h3 id="9-3-ä½¿ç”¨two-layer-neural-network"><a href="#9-3-ä½¿ç”¨two-layer-neural-network" class="headerlink" title="9.3-ä½¿ç”¨two layer neural network"></a>9.3-ä½¿ç”¨two layer neural network</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">n_x, n_h, n_y = train_set_x.shape[0], 7, 1layer_dims = (n_x, n_h, n_y)print(layer_dims)lr = 0.0075num_epochs = 2500print_cost=True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(12288, 7, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timeparameters, costs = func_two_layer_nn_model(train_set_x, train_set_y_orig, layer_dims, lr, num_epochs, print_cost)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>cost after epoch 0: 0.693049735659989cost after epoch 100: 0.6464320953428849cost after epoch 200: 0.6325140647912678cost after epoch 300: 0.6015024920354665cost after epoch 400: 0.5601966311605748cost after epoch 500: 0.5158304772764731cost after epoch 600: 0.47549013139433266cost after epoch 700: 0.433916315122575cost after epoch 800: 0.40079775362038844cost after epoch 900: 0.3580705011323798cost after epoch 1000: 0.3394281538366413cost after epoch 1100: 0.30527536361962654cost after epoch 1200: 0.2749137728213015cost after epoch 1300: 0.24681768210614827cost after epoch 1400: 0.1985073503746611cost after epoch 1500: 0.17448318112556638cost after epoch 1600: 0.17080762978096792cost after epoch 1700: 0.11306524562164719cost after epoch 1800: 0.09629426845937153cost after epoch 1900: 0.08342617959726863cost after epoch 2000: 0.07439078704319084cost after epoch 2100: 0.06630748132267933cost after epoch 2200: 0.05919329501038171cost after epoch 2300: 0.053361403485605585cost after epoch 2400: 0.04855478562877018CPU times: user 19min 11s, sys: 13min 2s, total: 32min 14sWall time: 34.9 s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># plot the costplt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per tens)')plt.title("Learning rate =" + str(lr))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/output_102_0.png" alt="output_102_0"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred_train = func_predict(train_set_x, train_set_y_orig, parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>acc: 1.0</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred_test = func_predict(test_set_x, test_set_y_orig, parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>acc: 0.72</code></pre><h3 id="9-4-ä½¿ç”¨Lå±‚æ·±åº¦ç¥ç»ç½‘ç»œ"><a href="#9-4-ä½¿ç”¨Lå±‚æ·±åº¦ç¥ç»ç½‘ç»œ" class="headerlink" title="9.4-ä½¿ç”¨Lå±‚æ·±åº¦ç¥ç»ç½‘ç»œ"></a>9.4-ä½¿ç”¨Lå±‚æ·±åº¦ç¥ç»ç½‘ç»œ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">layer_dims = [train_set_x.shape[0], 7, 1]print(layer_dims)lr = 0.0075num_epochs = 2500print_cost=True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[12288, 7, 1]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timeparameters, costs = func_L_layer_dnn_model(train_set_x, train_set_y_orig, layer_dims, lr, num_epochs, print_cost)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>cost after epoch 0: 0.6950464961800915cost after epoch 100: 0.5892596054583805cost after epoch 200: 0.5232609173622991cost after epoch 300: 0.4497686396221906cost after epoch 400: 0.42090021618838985cost after epoch 500: 0.3724640306174595cost after epoch 600: 0.34742051870201895cost after epoch 700: 0.3171919198737027cost after epoch 800: 0.26643774347746585cost after epoch 900: 0.21991432807842595cost after epoch 1000: 0.14357898893623774cost after epoch 1100: 0.45309212623221046cost after epoch 1200: 0.09499357670093511cost after epoch 1300: 0.08014128076781372cost after epoch 1400: 0.06940234005536465cost after epoch 1500: 0.06021664023174592cost after epoch 1600: 0.05327415758001879cost after epoch 1700: 0.04762903262098435cost after epoch 1800: 0.04297588879436871cost after epoch 1900: 0.039036074365138215cost after epoch 2000: 0.03568313638049029cost after epoch 2100: 0.03291526373054677cost after epoch 2200: 0.030472193059120623cost after epoch 2300: 0.028387859212946124cost after epoch 2400: 0.026615212372776063CPU times: user 18min 20s, sys: 11min 49s, total: 30min 10sWall time: 32.4 s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># plot the costplt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per tens)')plt.title("Learning rate =" + str(lr))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/output_108_0.png" alt="output_108_0"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred_train = func_predict(train_set_x, train_set_y_orig, parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>acc: 1.0</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred_test = func_predict(test_set_x, test_set_y_orig, parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>acc: 0.74</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">layer_dims = [train_set_x.shape[0], 20, 7, 5, 1]print(layer_dims)lr = 0.0075num_epochs = 2500print_cost=True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[12288, 20, 7, 5, 1]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">%%timeparameters, costs = func_L_layer_dnn_model(train_set_x, train_set_y_orig, layer_dims, lr, num_epochs, print_cost)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>cost after epoch 0: 0.7717493284237686cost after epoch 100: 0.6720534400822914cost after epoch 200: 0.6482632048575212cost after epoch 300: 0.6115068816101354cost after epoch 400: 0.5670473268366111cost after epoch 500: 0.5401376634547801cost after epoch 600: 0.5279299569455267cost after epoch 700: 0.46547737717668514cost after epoch 800: 0.36912585249592794cost after epoch 900: 0.39174697434805344cost after epoch 1000: 0.3151869888600617cost after epoch 1100: 0.2726998441789385cost after epoch 1200: 0.23741853400268137cost after epoch 1300: 0.19960120532208644cost after epoch 1400: 0.18926300388463305cost after epoch 1500: 0.16118854665827748cost after epoch 1600: 0.14821389662363316cost after epoch 1700: 0.13777487812972944cost after epoch 1800: 0.1297401754919012cost after epoch 1900: 0.12122535068005211cost after epoch 2000: 0.1138206066863371cost after epoch 2100: 0.10783928526254132cost after epoch 2200: 0.10285466069352679cost after epoch 2300: 0.10089745445261786cost after epoch 2400: 0.09287821526472395CPU times: user 28min 23s, sys: 17min 29s, total: 45min 53sWall time: 49.3 s</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># plot the costplt.plot(np.squeeze(costs))plt.ylabel('cost')plt.xlabel('iterations (per tens)')plt.title("Learning rate =" + str(lr))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/output_113_0.png" alt="output_113_0"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred_train = func_predict(train_set_x, train_set_y_orig, parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>acc: 0.9856459330143541</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred_test = func_predict(test_set_x, test_set_y_orig, parameters)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>acc: 0.8</code></pre><h3 id="9-5-ç»“æœåˆ†æ"><a href="#9-5-ç»“æœåˆ†æ" class="headerlink" title="9.5-ç»“æœåˆ†æ"></a>9.5-ç»“æœåˆ†æ</h3><ul><li>è®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›è¢«é”™è¯¯åˆ†ç±»çš„å›¾ç‰‡</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_print_mislabeled_images(classes, test_set_x, test_set_y_orig, pred_test)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/output_117_0.png" alt="output_117_0"></p><p><strong>ä¸€äº›æ¨¡å‹åœ¨è¯†åˆ«ä¸ŠçŠ¯é”™è¯¯çš„åœ°æ–¹</strong></p><ul><li>Cat body in an unusual position</li><li>Cat appears against a background of a similar color</li><li>Unusual cat color and species</li><li>Camera Angle</li><li>Brightness of the picture</li><li>Scale variation (cat is very large or small in image) </li></ul><h3 id="9-6-è¯†åˆ«è‡ªå·±çš„å›¾ç‰‡"><a href="#9-6-è¯†åˆ«è‡ªå·±çš„å›¾ç‰‡" class="headerlink" title="9.6-è¯†åˆ«è‡ªå·±çš„å›¾ç‰‡"></a>9.6-è¯†åˆ«è‡ªå·±çš„å›¾ç‰‡</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">image_path = './æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š1/cat_in_iran.jpg'my_label_y = [1]image = np.array(plt.imread(image_path))image.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(1115, 1114, 3)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">num_px = train_set_x_orig.shape[1]my_image = np.array(Image.fromarray(image).resize((num_px, num_px))).reshape((1, num_px*num_px*3)).Tmy_image.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>(12288, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">my_pred_image = func_predict(my_image, my_label_y, parameters)my_pred_image<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>acc: 1.0array([[1.]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.figure(figsize=(9, 9))plt.imshow(image)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.image.AxesImage at 0x7f02f60edeb0&gt;</code></pre><p><img src="/2021/09/03/shen-du-xue-xi-ng-zhi-duo-ceng-yin-cang-ceng-shen-jing-wang-luo/output_123_1.png" alt="output_123_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">print('y_pred=', np.squeeze(my_pred_image), ", your algorithm predicts a \"" + classes[int(np.squeeze(my_pred_image)),].decode("utf-8") +  "\" picture.")<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>y_pred= 1.0 , your algorithm predicts a &quot;cat&quot; picture.</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š2</title>
      <link href="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/"/>
      <url>/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/</url>
      
        <content type="html"><![CDATA[<h1 id="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W3ä¸€å±‚éšè—å±‚ç¥ç»ç½‘ç»œ"><a href="#å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W3ä¸€å±‚éšè—å±‚ç¥ç»ç½‘ç»œ" class="headerlink" title="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W3ä¸€å±‚éšè—å±‚ç¥ç»ç½‘ç»œ"></a>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W3ä¸€å±‚éšè—å±‚ç¥ç»ç½‘ç»œ</h1><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://mooc.study.163.com/university/deeplearning_ai#/c" target="_blank" rel="noopener">è§†é¢‘é“¾æ¥</a></li><li><a href="https://www.heywhale.com/mw/project/5dd3946900b0b900365f3a48" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥</a></li></ol><h2 id="æœ¬èŠ‚ç›®çš„"><a href="#æœ¬èŠ‚ç›®çš„" class="headerlink" title="æœ¬èŠ‚ç›®çš„"></a>æœ¬èŠ‚ç›®çš„</h2><ol><li>å»ºç«‹ä¸€ä¸ªå«ä¸€å±‚éšè—å±‚çš„ç¥ç»ç½‘ç»œï¼Œè§‚å¯Ÿå…¶å’Œé€»è¾‘å›å½’å®ç°ä¹‹é—´çš„å·®å¼‚</li><li>å®ç°å•ä¸ªéšè—å±‚çš„2åˆ†ç±»ç¥ç»ç½‘ç»œ</li><li>ä½¿ç”¨å…·æœ‰éçº¿æ€§æ¿€æ´»å‡½æ•°çš„ç¥ç»å…ƒï¼Œä¾‹å¦‚tanh</li><li>è®¡ç®—äº¤å‰ç†µæŸå¤±</li><li>å®ç°å‰å‘å’Œåå‘ä¼ æ’­</li></ol><h2 id="1-å¯¼å…¥æ¨¡å—"><a href="#1-å¯¼å…¥æ¨¡å—" class="headerlink" title="1-å¯¼å…¥æ¨¡å—"></a>1-å¯¼å…¥æ¨¡å—</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import numpy as npimport pandas as pdimport matplotlib.pyplot as pltimport sklearnimport sklearn.datasetsimport sklearn.linear_model%matplotlib inlinenp.random.seed(2030)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-1-planar-utils-py"><a href="#1-1-planar-utils-py" class="headerlink" title="1.1-planar_utils.py"></a>1.1-planar_utils.py</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_plot_decision_boundary(model, X, y):    """    plot decision boundary    :param model:     :param X:    :param y:    :return    """    # Set min and max values and give it some padding    x_min, x_max = X[0, :].min() - 1, X[0, :].max() + 1    y_min, y_max = X[1, :].min() - 1, X[1, :].max() + 1    h = 0.01    # Generate a grid of points with distance h between them    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))    # Predict the function value for the whole grid    Z = model(np.c_[xx.ravel(), yy.ravel()])    Z = Z.reshape(xx.shape)    # Plot the contour and training examples    plt.contourf(xx, yy, Z, cmap=plt.cm.Spectral)    plt.ylabel('x2')    plt.xlabel('x1')    plt.scatter(X[0, :], X[1, :], c=y, cmap=plt.cm.Spectral)def func_sigmoid(x):    """    Compute the sigmoid of x    Arguments:    x -- A scalar or numpy array of any size.    Return:    s -- sigmoid(x)    """    s = 1/(1+np.exp(-x))    return sdef func_load_planar_dataset():    """    load_planar_dataset    """    np.random.seed(2030)    m = 400 # number of examples    N = int(m/2) # number of points per class    D = 2 # dimensionality    X = np.zeros((m,D)) # data matrix where each row is a single example    Y = np.zeros((m,1), dtype='uint8') # labels vector (0 for red, 1 for blue)    a = 4 # maximum ray of the flower    for j in range(2):        ix = range(N*j,N*(j+1))        t = np.linspace(j*3.12,(j+1)*3.12,N) + np.random.randn(N)*0.2 # theta        r = a*np.sin(4*t) + np.random.randn(N)*0.2 # radius        X[ix] = np.c_[r*np.sin(t), r*np.cos(t)]        Y[ix] = j    X = X.T    Y = Y.T    return X, Ydef func_load_extra_datasets():    """    load_extra_datasets    """    N = 200    noisy_circles = sklearn.datasets.make_circles(n_samples=N, factor=.5, noise=.3)    noisy_moons = sklearn.datasets.make_moons(n_samples=N, noise=.2)    blobs = sklearn.datasets.make_blobs(n_samples=N, random_state=5, n_features=2, centers=6)    gaussian_quantiles = sklearn.datasets.make_gaussian_quantiles(mean=None, cov=0.5, n_samples=N, n_features=2, n_classes=2, shuffle=True, random_state=None)    no_structure = np.random.rand(N, 2), np.random.rand(N, 2)    return noisy_circles, noisy_moons, blobs, gaussian_quantiles, no_structure<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-testCases-py"><a href="#1-2-testCases-py" class="headerlink" title="1.2-testCases.py"></a>1.2-testCases.py</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_layer_sizes_test_case():    """    layer sizes test case    """    np.random.seed(2030)    X_assess = np.random.randn(5, 3)    Y_assess = np.random.randn(2, 3)    return X_assess, Y_assessdef func_initialize_parameters_test_case():    """    initialize_parameters_test_case    """    n_x, n_h, n_y = 2, 4, 1    return n_x, n_h, n_ydef func_forward_propagation_test_case():    """    forward_propagation_test_case    """    np.random.seed(2030)    X_assess = np.random.randn(2, 3)    parameters = {        'W1': np.array([[-0.00416758, -0.00056267],                        [-0.02136196,  0.01640271],                        [-0.01793436, -0.00841747],                        [ 0.00502881, -0.01245288]]),        'W2': np.array([[-0.01057952, -0.00909008,                           0.00551454,  0.02292208]]),        'b1': np.array([[ 0.], [ 0.], [ 0.], [ 0.]]),        'b2': np.array([[ 0.]])}    return X_assess, parametersdef func_compute_cost_test_case():    """    compute_cost_test_case    """    np.random.seed(2030)    Y_assess = np.random.randn(1, 3)    parameters = {        'W1': np.array([[-0.00416758, -0.00056267],                        [-0.02136196,  0.01640271],                        [-0.01793436, -0.00841747],                        [ 0.00502881, -0.01245288]]),        'W2': np.array([[-0.01057952, -0.00909008,                           0.00551454,  0.02292208]]),        'b1': np.array([[ 0.], [ 0.], [ 0.], [ 0.]]),        'b2': np.array([[ 0.]])}    a2 = (np.array([[ 0.5002307 ,  0.49985831,  0.50023963]]))    return a2, Y_assess, parametersdef func_backward_propagation_test_case():    """    backward_propagation_test_case    """    np.random.seed(2030)    X_assess = np.random.randn(2, 3)    Y_assess = np.random.randn(1, 3)    parameters = {        'W1': np.array([[-0.00416758, -0.00056267],                        [-0.02136196,  0.01640271],                        [-0.01793436, -0.00841747],                        [ 0.00502881, -0.01245288]]),        'W2': np.array([[-0.01057952, -0.00909008,                       0.00551454,  0.02292208]]),        'b1': np.array([[ 0.], [ 0.], [ 0.], [ 0.]]),        'b2': np.array([[ 0.]])}    cache = {        'A1': np.array([[-0.00616578,  0.0020626 ,  0.00349619],                        [-0.05225116,  0.02725659, -0.02646251],                        [-0.02009721,  0.0036869 ,  0.02883756],                        [ 0.02152675, -0.01385234,  0.02599885]]),        'A2': np.array([[ 0.5002307 ,  0.49985831,  0.50023963]]),        'Z1': np.array([[-0.00616586,  0.0020626 ,  0.0034962 ],                        [-0.05229879,  0.02726335, -0.02646869],                        [-0.02009991,  0.00368692,  0.02884556],                        [ 0.02153007, -0.01385322,  0.02600471]]),        'Z2': np.array([[ 0.00092281, -0.00056678,  0.00095853]])}    return parameters, cache, X_assess, Y_assessdef func_update_parameters_test_case():    """    update_parameters_test_case    """    parameters = {        'W1': np.array([[-0.00615039,  0.0169021 ],                        [-0.02311792,  0.03137121],                        [-0.0169217 , -0.01752545],                        [ 0.00935436, -0.05018221]]),        'W2': np.array([[-0.0104319 , -0.04019007,                           0.01607211,  0.04440255]]),        'b1': np.array([[ -8.97523455e-07],                        [  8.15562092e-06],                        [  6.04810633e-07],                        [ -2.54560700e-06]]),        'b2': np.array([[  9.14954378e-05]])}    grads = {        'dW1': np.array([[ 0.00023322, -0.00205423],                         [ 0.00082222, -0.00700776],                         [-0.00031831,  0.0028636 ],                         [-0.00092857,  0.00809933]]),        'dW2': np.array([[ -1.75740039e-05, 3.70231337e-03,                            -1.25683095e-03, -2.55715317e-03]]),        'db1': np.array([[  1.05570087e-07],                         [ -3.81814487e-06],                         [ -1.90155145e-07],                         [  5.46467802e-07]]),        'db2': np.array([[ -1.08923140e-05]])    }    return parameters, gradsdef func_nn_model_test_case():    """    nn_model_test_case    """    np.random.seed(2030)    X_assess = np.random.randn(2, 3)    Y_assess = np.random.randn(1, 3)    return X_assess, Y_assessdef func_predict_test_case():    """    predict_test_case    """    np.random.seed(2030)    X_assess = np.random.randn(2, 3)    parameters = {            'W1': np.array([[-0.00615039,  0.0169021 ],                            [-0.02311792,  0.03137121],                            [-0.0169217 , -0.01752545],                            [ 0.00935436, -0.05018221]]),            'W2': np.array([[-0.0104319 , -0.04019007,                               0.01607211,  0.04440255]]),            'b1': np.array([[ -8.97523455e-07],                            [  8.15562092e-06],                            [  6.04810633e-07],                            [ -2.54560700e-06]]),            'b2': np.array([[  9.14954378e-05]])}    return parameters, X_assess<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-å¯¼å…¥æ•°æ®é›†"><a href="#2-å¯¼å…¥æ•°æ®é›†" class="headerlink" title="2-å¯¼å…¥æ•°æ®é›†"></a>2-å¯¼å…¥æ•°æ®é›†</h2><ol><li>å°†<code>flower</code>2åˆ†ç±»æ•°æ®åŠ è½½åˆ°å˜é‡X,Yä¸­</li><li>ä½¿ç”¨<code>matplotlib</code>å¯è§†åŒ–æ•°æ®é›†</li><li>æ·±å…¥äº†è§£æ•°æ®</li></ol><h3 id="2-1-åŠ è½½"><a href="#2-1-åŠ è½½" class="headerlink" title="2.1-åŠ è½½"></a>2.1-åŠ è½½</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python"># loadX, Y = func_load_planar_dataset()print(X.shape, Y.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>(2, 400) (1, 400)</code></pre><h3 id="2-2-å¯è§†åŒ–"><a href="#2-2-å¯è§†åŒ–" class="headerlink" title="2.2-å¯è§†åŒ–"></a>2.2-å¯è§†åŒ–</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python"># plot# X[0, :].shape  (400,)plt.scatter(X[0, :], X[1, :], c=Y.reshape(X[0, :].shape), s=40, cmap=plt.cm.Spectral)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.collections.PathCollection at 0x7f58a99ab670&gt;</code></pre><p><img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/output_11_1.png" alt="output_11_1"></p><h3 id="2-3-æ·±å…¥äº†è§£"><a href="#2-3-æ·±å…¥äº†è§£" class="headerlink" title="2.3-æ·±å…¥äº†è§£"></a>2.3-æ·±å…¥äº†è§£</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">shape_X = X.shapeshape_Y = Y.shapem = shape_X[1]print('the shape of X is: ', shape_X)print('the shape of Y is: ', shape_Y)print('m=%d training examples' % m)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>the shape of X is:  (2, 400)the shape of Y is:  (1, 400)m=400 training examples</code></pre><h2 id="3-ä½¿ç”¨ç®€å•logistic-regressionå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»"><a href="#3-ä½¿ç”¨ç®€å•logistic-regressionå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»" class="headerlink" title="3-ä½¿ç”¨ç®€å•logistic regressionå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»"></a>3-ä½¿ç”¨ç®€å•logistic regressionå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»</h2><ol><li>ä½¿ç”¨sklearnå†…ç½®å‡½æ•°æ‰§è¡Œ</li><li>ç”»å‡ºå†³ç­–è¾¹ç•Œ</li></ol><h3 id="3-1-æ„å»º"><a href="#3-1-æ„å»º" class="headerlink" title="3.1-æ„å»º"></a>3.1-æ„å»º</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">clf = sklearn.linear_model.LogisticRegressionCV()clf.fit(X.T, Y.ravel())# Y.ravel()  # Return a flattened array.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>LogisticRegressionCV()</code></pre><h3 id="3-2-å†³ç­–è¾¹ç•Œ"><a href="#3-2-å†³ç­–è¾¹ç•Œ" class="headerlink" title="3.2-å†³ç­–è¾¹ç•Œ"></a>3.2-å†³ç­–è¾¹ç•Œ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_decision_boundary(lambda x: clf.predict(x), X, Y)plt.title('sklearn logistic regression')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>Text(0.5, 1.0, &#39;sklearn logistic regression&#39;)</code></pre><p><img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/output_18_1.png" alt="output_18_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">pred_lr = clf.predict(X.T)print('acc: ', float((np.dot(Y, pred_lr)) + np.dot(1-Y, 1-pred_lr)) / float(Y.size)*100)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>acc:  49.25</code></pre><ul><li>æ­£ç¡®ç‡åªæœ‰49.25%ï¼Œ ç”±äºæ•°æ®é›†ä¸æ˜¯çº¿æ€§å¯åˆ†ç±»çš„ï¼Œå› æ­¤é€»è¾‘å›å½’æ•ˆæœä¸ä½³</li><li>æ¥ä¸‹æ¥è¯•è¯•DNN</li></ul><h2 id="4-DNNç»“æ„å®ç°"><a href="#4-DNNç»“æ„å®ç°" class="headerlink" title="4-DNNç»“æ„å®ç°"></a>4-DNNç»“æ„å®ç°</h2><h3 id="4-1-ç†è®ºä»‹ç»"><a href="#4-1-ç†è®ºä»‹ç»" class="headerlink" title="4.1-ç†è®ºä»‹ç»"></a>4.1-ç†è®ºä»‹ç»</h3><ol><li><p>æ¨¡å‹ç»“æ„</p><p> <img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/q17ipqoyrg.png" alt="æ¨¡å‹ç»“æ„"></p></li><li><p>æ•°å­¦åŸç†</p><p> è¾“å…¥$x^{(i)}$</p><script type="math/tex; mode=display"> z^{[1] (i)} =  W^{[1]} x^{(i)} + b^{[1] (i)}  \\ a^{[1] (i)} = \tanh(z^{[1] (i)})  \\ z^{[2] (i)} = W^{[2]} a^{[1] (i)} + b^{[2] (i)}  \\ \hat{y}^{(i)} = a^{[2] (i)} = \sigma(z^{ [2] (i)})  \\ y^{(i)}_{prediction} = \begin{cases} 1 & \mbox{if } a^{[2](i)} > 0.5 \\ 0 & \mbox{otherwise } \end{cases}  \\ loss = J = - \frac{1}{m} \sum\limits_{i = 0}^{m} \large\left(\small y^{(i)}\log\left(a^{[2] (i)}\right) + (1-y^{(i)})\log\left(1- a^{[2] (i)}\right)  \large  \right) \small</script></li><li><p>å»ºç«‹ç¥ç»ç½‘ç»œçš„ä¸€èˆ¬æ–¹æ³•</p><ol><li>å®šä¹‰ç¥ç»ç½‘ç»œç»“æ„ï¼Œè¾“å…¥å‚æ•°ï¼Œéšè—å•å…ƒå‚æ•°ç­‰</li><li>åˆå§‹åŒ–æ¨¡å‹å‚æ•°</li><li>å¾ªç¯<ol><li>å®ç°å‰å‘ä¼ æ’­</li><li>è®¡ç®—æŸå¤±</li><li>åå‘ä¼ æ’­ä»¥è·å¾—æ¢¯åº¦</li><li>æ›´æ–°å‚æ•°ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰</li></ol></li><li>é¢„æµ‹</li></ol></li></ol><h3 id="4-2-å®šä¹‰ç¥ç»ç½‘ç»œç»“æ„"><a href="#4-2-å®šä¹‰ç¥ç»ç½‘ç»œç»“æ„" class="headerlink" title="4.2-å®šä¹‰ç¥ç»ç½‘ç»œç»“æ„"></a>4.2-å®šä¹‰ç¥ç»ç½‘ç»œç»“æ„</h3><ul><li>å®šä¹‰ä¸‰ä¸ªå˜é‡ï¼š<ol><li>n_x: è¾“å…¥å±‚çš„å¤§å°</li><li>n_h: éšè—å±‚çš„å¤§å°</li><li>n_y: è¾“å‡ºå±‚çš„å¤§å°</li></ol></li><li>æç¤ºï¼š<ol><li>ä½¿ç”¨shapeæ¥æ‰¾åˆ°n_xå’Œn_y</li><li>å°†éšè—å±‚å¤§å°ç¡¬ç¼–ç æˆ4</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_layer_sizes(X, Y):    """    å®šä¹‰æ¯å±‚å‚æ•°å¤§å°    :param X    :param Y    :return (n_x, n_h, n_y)    """    n_x = X.shape[0]    n_h = 4    n_y = Y.shape[0]    return (n_x, n_h, n_y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X_assess, Y_assess = func_layer_sizes_test_case()(n_x, n_h, n_y) = func_layer_sizes(X_assess, Y_assess)print(n_x, n_h, n_y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>5 4 2</code></pre><h3 id="4-3-åˆå§‹åŒ–æ¨¡å‹å‚æ•°"><a href="#4-3-åˆå§‹åŒ–æ¨¡å‹å‚æ•°" class="headerlink" title="4.3-åˆå§‹åŒ–æ¨¡å‹å‚æ•°"></a>4.3-åˆå§‹åŒ–æ¨¡å‹å‚æ•°</h3><ul><li>ç»ƒä¹ <ol><li>å®ç°å‡½æ•°<code>func_initialize_parameters()</code></li></ol></li><li>è¯´æ˜<ol><li>ç¡®ä¿å‚æ•°å¤§å°æ­£ç¡®</li><li>ä½¿ç”¨éšæœºåˆå§‹åŒ–æƒé‡çŸ©é˜µ<ol><li>ä½¿ç”¨<code>np.random.randn(a, b)*0.01</code>éšæœºåˆå§‹åŒ–ç»´åº¦ä¸º(a,b)çš„çŸ©é˜µ</li></ol></li><li>å°†åå·®å‘é‡åˆå§‹åŒ–ä¸º0<ol><li>ä½¿ç”¨<code>np.zeros((a,b))</code>åˆå§‹åŒ–ç»´åº¦ä¸º(a,b)çš„çŸ©é˜µ</li></ol></li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_initialize_parameters(n_x, n_h, n_y):    """    éšæœºåˆå§‹åŒ–æ¨¡å‹å‚æ•°    :param n_x: size of input layer    :param n_h: size of hidden layer    :param n_y: size of output layer    :return params    """    np.random.seed(2030)    W1 = np.random.randn(n_h, n_x) * 0.01    b1 = np.zeros((n_h, 1))    W2 = np.random.randn(n_y, n_h) * 0.01    b2 = np.zeros((n_y, 1))    assert (W1.shape == (n_h, n_x))    assert (b1.shape == (n_h, 1))    assert (W2.shape == (n_y, n_h))    assert (b2.shape == (n_y, 1))    params = {        'W1': W1,        'b1': b1,        'W2': W2,        'b2': b2    }    return params<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">params = func_initialize_parameters(n_x, n_h, n_y)for key, value in params.items():    print(key, value)    print(value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>W1 [[ 0.0140356  -0.01123472  0.00181204  0.00371685  0.00331453] [ 0.00616523 -0.00719542  0.00392973 -0.01472587  0.01631223] [ 0.00700217 -0.00210701  0.00322235  0.0085826   0.01209621] [-0.01813631 -0.01153197  0.00429659 -0.00105094  0.00331243]](4, 5)b1 [[0.] [0.] [0.] [0.]](4, 1)W2 [[ 0.00530549  0.00229905 -0.00579193 -0.00166288] [-0.00867708  0.00637114 -0.00827742 -0.00441255]](2, 4)b2 [[0.] [0.]](2, 1)</code></pre><h3 id="4-4-å¾ªç¯"><a href="#4-4-å¾ªç¯" class="headerlink" title="4.4-å¾ªç¯"></a>4.4-å¾ªç¯</h3><ul><li>ç»ƒä¹ <ol><li>å®ç°<code>func_forward_propagation()</code></li></ol></li><li>è¯´æ˜<ol><li>æŸ¥çœ‹åˆ†ç±»å™¨çš„æ•°å­¦è¡¨è¾¾å¼</li><li>å¯ä»¥ä½¿ç”¨<code>func_sigmoid()</code>å‡½æ•°</li><li>å¯ä»¥ä½¿ç”¨<code>np.tanh()</code>å‡½æ•°</li><li>å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ­¥éª¤<ol><li>ä½¿ç”¨<code>params[&#39;&#39;]</code>ä»ä¸­æ£€ç´¢å‡ºæ¯ä¸ªå‚æ•°</li><li>å®ç°æ­£å‘ä¼ æ’­ï¼Œè®¡ç®—$Z^{[1]}, A^{[1]}, Z^{[2]}$å’Œ$A^{[2]}$ï¼ˆæ‰€æœ‰è®­ç»ƒæ•°æ®çš„é¢„æµ‹ç»“æœå‘é‡ï¼‰</li></ol></li><li>å‘åä¼ æ’­æ‰€éœ€çš„å€¼å­˜å‚¨åœ¨<code>cache</code>ä¸­ï¼Œä½œä¸ºåå‘ä¼ æ’­å‡½æ•°çš„è¾“å…¥</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_forward_propagation(X, parameters):    """    å‰å‘ä¼ æ’­    :param X    :param parameters    return A2, cache    """    W1 = parameters['W1']    b1 = parameters['b1']    W2 = parameters['W2']    b2 = parameters['b2']    Z1 = np.dot(W1, X) + b1    A1 = np.tanh(Z1)    Z2 = np.dot(W2, A1) + b2    A2 = func_sigmoid(Z2)    assert (A2.shape == (1, X.shape[1]))    cache = {        'Z1': Z1,        'A1': A1,        'Z2': Z2,        'A2': A2    }    return A2, cache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X_assess, params = func_forward_propagation_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X_assess.shape<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(2, 3)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">params<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>{&#39;W1&#39;: array([[-0.00416758, -0.00056267],        [-0.02136196,  0.01640271],        [-0.01793436, -0.00841747],        [ 0.00502881, -0.01245288]]), &#39;W2&#39;: array([[-0.01057952, -0.00909008,  0.00551454,  0.02292208]]), &#39;b1&#39;: array([[0.],        [0.],        [0.],        [0.]]), &#39;b2&#39;: array([[0.]])}</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in params.items():    print(key, value)    print(value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>W1 [[-0.00416758 -0.00056267] [-0.02136196  0.01640271] [-0.01793436 -0.00841747] [ 0.00502881 -0.01245288]](4, 2)W2 [[-0.01057952 -0.00909008  0.00551454  0.02292208]](1, 4)b1 [[0.] [0.] [0.] [0.]](4, 1)b2 [[0.]](1, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A2, cache = func_forward_propagation(X_assess, params)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A2.shape<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(1, 3)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in cache.items():    print(key, value)    print('shape', value.shape)    print('mean:', np.mean(value))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Z1 [[-0.00605859  0.00449566 -0.00110208] [-0.02388616  0.02943629  0.00624179] [-0.0283006   0.01735875 -0.00843933] [ 0.00242969 -0.00977727 -0.00676625]]shape (4, 3)mean: -0.002030674846044073A1 [[-0.00605851  0.00449563 -0.00110208] [-0.02388161  0.02942779  0.00624171] [-0.02829305  0.01735701 -0.00843913] [ 0.00242968 -0.00977696 -0.00676615]]shape (4, 3)mean: -0.0020304726884621785Z2 [[ 0.00018085 -0.00044345 -0.00024671]]shape (1, 3)mean: -0.00016977098916522824A2 [[0.50004521 0.49988914 0.49993832]]shape (1, 3)mean: 0.4999575572533775</code></pre><ul><li>ç»ƒä¹ ï¼š<ol><li>å®ç°<code>func_compute_cost()</code>å‡½æ•°</li></ol></li><li>è¯´æ˜ï¼š<ol><li>è®¡ç®—å…¬å¼<script type="math/tex; mode=display"> J = - \frac{1}{m} \sum\limits_{i = 0}^{m} \large{(} \small y^{(i)}\log\left(a^{[2] (i)}\right) + (1-y^{(i)})\log\left(1- a^{[2] (i)}\right) \large{)} \small</script></li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_compute_cost(A2, Y):    """    è®¡ç®—DNNæŸå¤±å‡½æ•°    :param A2: the sigmoid output of the second activation, of shape (1, num_samples)    :param Y: 'true' labels vector of shape (1, num_samples)    return cost: cost value    """    m = Y.shape[1]  # num_samples    log_probs = np.multiply(np.log(A2), Y) + np.multiply(np.log(1-A2), 1-Y)    cost = -1 / m * np.sum(log_probs)    cost = np.squeeze(cost)  # eg. turns [[17]] into 17    assert(isinstance(cost, float))    return cost<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A2, Y_assess, params = func_compute_cost_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">A2.shape<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(1, 3)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">Y_assess.shape<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(1, 3)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in params.items():    print(key, value)    print('shape', value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>W1 [[-0.00416758 -0.00056267] [-0.02136196  0.01640271] [-0.01793436 -0.00841747] [ 0.00502881 -0.01245288]]shape (4, 2)W2 [[-0.01057952 -0.00909008  0.00551454  0.02292208]]shape (1, 4)b1 [[0.] [0.] [0.] [0.]]shape (4, 1)b2 [[0.]]shape (1, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print('cost=', func_compute_cost(A2, Y_assess))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>cost= 0.6926644838406011</code></pre><ul><li>ç»ƒä¹ <ol><li>å®ç°å‡½æ•°<code>func_backward_propagation()</code></li></ol></li><li>è¯´æ˜<ol><li>åå‘ä¼ æ’­é€šå¸¸æ˜¯DNNä¸­æœ€éš¾ï¼ˆæœ€æ•°å­¦ï¼‰çš„éƒ¨åˆ†ï¼Œè¯¦æƒ…è§ä¸‹å›¾<br> <img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/q17hcd4yra.png" alt="åå‘ä¼ æ’­è¿‡ç¨‹"></li><li>ç”±äºæ¿€æ´»å‡½æ•°æ˜¯<code>tanh</code>ï¼Œæ‰€ä»¥$g^{[1]â€™}(z) = 1-a^2$</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_backward_propagation(parameters, cache, X, Y):    """    DNNåå‘ä¼ æ’­    :param parameters:     :param cache: Z1, A1, ...    :param X:    :param Y:    :return grads:    """    m = X.shape[1]    W1 = parameters['W1']    b1 = parameters['b1']    W2 = parameters['W2']    b2 = parameters['b2']    A1 = cache['A1']    A2 = cache['A2']    dZ2 = A2 - Y    dW2 = 1 / m * np.dot(dZ2, A1.T)    db2 = 1 / m * np.sum(dZ2, axis=1, keepdims=True)    dZ1 = np.multiply(np.dot(W2.T, dZ2), 1-np.power(A1, 2))    dW1 = 1 / m * np.dot(dZ1, X.T)    db1 = 1 / m * np.sum(dZ1, axis=1, keepdims=True)    grads = {        'dW2': dW2,        'db2': db2,        'dW1': dW1,        'db1': db1    }    return grads<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">params, cache, X_assess, Y_assess = func_backward_propagation_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in params.items():    print(key, value)    print(value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>W1 [[-0.00416758 -0.00056267] [-0.02136196  0.01640271] [-0.01793436 -0.00841747] [ 0.00502881 -0.01245288]](4, 2)W2 [[-0.01057952 -0.00909008  0.00551454  0.02292208]](1, 4)b1 [[0.] [0.] [0.] [0.]](4, 1)b2 [[0.]](1, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in cache.items():    print(key, value)    print(value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>A1 [[-0.00616578  0.0020626   0.00349619] [-0.05225116  0.02725659 -0.02646251] [-0.02009721  0.0036869   0.02883756] [ 0.02152675 -0.01385234  0.02599885]](4, 3)A2 [[0.5002307  0.49985831 0.50023963]](1, 3)Z1 [[-0.00616586  0.0020626   0.0034962 ] [-0.05229879  0.02726335 -0.02646869] [-0.02009991  0.00368692  0.02884556] [ 0.02153007 -0.01385322  0.02600471]](4, 3)Z2 [[ 0.00092281 -0.00056678  0.00095853]](1, 3)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">grads = func_backward_propagation(params, cache, X_assess, Y_assess)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in grads.items():    print(key, value)    print(value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>dW2 [[-0.00013434 -0.03767573  0.01092386  0.02535612]](1, 4)db2 [[1.09982824]](1, 1)dW1 [[-0.00687442 -0.0060129 ] [-0.00589216 -0.00516006] [ 0.00358158  0.00313207] [ 0.01488723  0.01302015]](4, 2)db1 [[-0.0116354 ] [-0.00998301] [ 0.00606112] [ 0.02519569]](4, 1)</code></pre><ul><li>ç»ƒä¹ <ol><li>å®ç°å‚æ•°æ›´æ–°ã€‚ä½¿ç”¨æ¢¯åº¦ä¸‹é™ã€‚è§„åˆ™ä¸ºï¼š$\theta = \theta - \alpha \frac{\partial J }{ \partial \theta }$</li></ol></li><li>æç¤º<ol><li>å…·æœ‰è‰¯å¥½çš„å­¦ä¹ é€Ÿç‡ï¼ˆæ”¶æ•›ï¼‰å›¾å’Œè¾ƒå·®çš„å­¦ä¹ é€Ÿç‡ï¼ˆå‘æ•£ï¼‰çš„å›¾å¦‚ä¸‹<br> <img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/q17hh4otzu.gif" alt="è‰¯å¥½"><br> <img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/q17hharbth.gif" alt="è¾ƒå·®"></li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_update_parameters(parameters, grads, lr=0.5):    """    ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£å‚æ•°    :param parameters:    :param grads:     :return params:    """    W1 = parameters['W1']    b1 = parameters['b1']    W2 = parameters['W2']    b2 = parameters['b2']    dW1 = grads['dW1']    db1 = grads['db1']    dW2 = grads['dW2']    db2 = grads['db2']    W1 = W1 - lr * dW1    b1 = b1 - lr * db1    W2 = W2 - lr * dW2    b2 = b2 - lr * db2    params = {        'W1': W1,        'b1': b1,        'W2': W2,        'b2': b2    }    return params<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, grads = func_update_parameters_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_update_parameters(parameters, grads)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in parameters.items():    print(key, value)    print(value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>W1 [[-0.006267    0.01792921] [-0.02352903  0.03487509] [-0.01676255 -0.01895725] [ 0.00981865 -0.05423187]](4, 2)b1 [[-9.50308498e-07] [ 1.00646934e-05] [ 6.99888206e-07] [-2.81884090e-06]](4, 1)W2 [[-0.01042311 -0.04204123  0.01670053  0.04568113]](1, 4)b2 [[9.69415948e-05]](1, 1)</code></pre><h3 id="4-5-é›†æˆ4-2-4-4"><a href="#4-5-é›†æˆ4-2-4-4" class="headerlink" title="4.5-é›†æˆ4.2-4.4"></a>4.5-é›†æˆ4.2-4.4</h3><ul><li>ç»ƒä¹ <ol><li>å®ç°<code>func_nn_model()</code></li></ol></li><li>è¯´æ˜<ol><li>DNNå¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºç»„åˆå…ˆå‰æ„å»ºçš„å‡½æ•°</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_nn_model(X, Y, n_h, lr, num_epochs=10000, print_cost=False):    """    DNNæ¨¡å‹ç»“æ„    :param X:    :param Y:    :param n_h: size of hidden layer    :param lr: learning rate    :param num_epochs:    :param print_cost:    :return params    """    np.random.seed(2030)    n_x, _, n_y = func_layer_sizes(X, Y)    parameters = func_initialize_parameters(n_x, n_h, n_y)    for i in range(num_epochs):        A2, cache = func_forward_propagation(X, parameters)        cost = func_compute_cost(A2, Y)        grads = func_backward_propagation(parameters, cache, X, Y)        parameters = func_update_parameters(parameters, grads, lr)        if print_cost and i % 1000 == 0:            print('cost after iter %i: %f' % (i, cost))    return parameters<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">X_assess, Y_assess = func_nn_model_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_nn_model(X_assess, Y_assess, n_h=4, print_cost=True)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>cost after iter 0: 0.693205cost after iter 1000: -infcost after iter 2000: -infcost after iter 3000: -infcost after iter 4000: -inf/tmp/ipykernel_33337/3831275435.py:35: RuntimeWarning: overflow encountered in exp  s = 1/(1+np.exp(-x))/tmp/ipykernel_33337/2034926829.py:10: RuntimeWarning: divide by zero encountered in log  log_probs = np.multiply(np.log(A2), Y) + np.multiply(np.log(1-A2), 1-Y)/home/meiyunhe/softwares/miniconda3/envs/python38/lib/python3.8/site-packages/numpy/core/fromnumeric.py:86: RuntimeWarning: invalid value encountered in reduce  return ufunc.reduce(obj, axis, dtype, out, **passkwargs)cost after iter 5000: -infcost after iter 6000: -infcost after iter 7000: -infcost after iter 8000: -infcost after iter 9000: -inf</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for key, value in parameters.items():    print(key, value)    print(value.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>W1 [[  11.52632597    4.53170427] [ -11.52483312   -4.53805397] [   3.7056901    -5.59975822] [-135.67556482   43.1988336 ]](4, 2)b1 [[  3.76204789] [ -3.75833722] [-11.97631404] [127.6183328 ]](4, 1)W2 [[-4101.12484223  4100.86581429  3195.42022681 -1806.0368121 ]](1, 4)b2 [[-3201.6699135]](1, 1)</code></pre><h3 id="4-6-é¢„æµ‹"><a href="#4-6-é¢„æµ‹" class="headerlink" title="4.6-é¢„æµ‹"></a>4.6-é¢„æµ‹</h3><ul><li>ç»ƒä¹ <ol><li>å®ç°<code>func_predict()</code></li></ol></li><li>æç¤º<ol><li>é¢„æµ‹å…¬å¼ä¸ºï¼š<script type="math/tex; mode=display"> y_{prediction} = \mathbb 1 \textfalse = \begin{cases}   1 & \text{if}\ activation > 0.5 \\   0 & \text{otherwise}   \end{cases}</script></li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_predict(parameters, X):    """    é¢„æµ‹    :param parameters:    :param X:    :return preds    """    A2, _ = func_forward_propagation(X, parameters)    preds = np.round(A2)    return preds<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters, X_assess = func_predict_test_case()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">preds = func_predict(parameters, X_assess)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">preds<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[1., 0., 0.]])</code></pre><h2 id="5-ä½¿ç”¨DNNå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»"><a href="#5-ä½¿ç”¨DNNå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»" class="headerlink" title="5-ä½¿ç”¨DNNå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»"></a>5-ä½¿ç”¨DNNå¯¹æ•°æ®é›†è¿›è¡ŒäºŒåˆ†ç±»</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">X.shape<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(2, 400)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">Y.shape<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>(1, 400)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">parameters = func_nn_model(X, Y, n_h=4, num_epochs=10000, print_cost=True)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>cost after iter 0: 0.693208cost after iter 1000: 0.255412cost after iter 2000: 0.237878cost after iter 3000: 0.230251cost after iter 4000: 0.225817cost after iter 5000: 0.222741cost after iter 6000: 0.220396cost after iter 7000: 0.218504cost after iter 8000: 0.216923cost after iter 9000: 0.215573</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_plot_decision_boundary(lambda x: func_predict(parameters, x.T), X, Y)plt.title('decision boundary for hidden layer size %i' % 4)plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/output_70_0.png" alt="output_70_0"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">preds = func_predict(parameters, X)print('acc: ', (np.dot(Y, preds.T)+np.dot(1-Y, (1-preds).T))/float(Y.size)*100)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>acc:  [[91.25]]</code></pre><ul><li>ä¸ç®€å•é€»è¾‘å›å½’ç›¸æ¯”ï¼ŒDNNå‡†ç¡®æ€§æ›´é«˜ï¼Œå®ƒå­¦ä¹ äº†flowerçš„å¶å­å›¾æ¡ˆï¼Œä¸é€»è¾‘å›å½’ä¸åŒï¼ŒDNNèƒ½å¤Ÿå­¦ä¹ éçº¿æ€§çš„å†³ç­–è¾¹ç•Œ</li></ul><h3 id="4-7-è°ƒæ•´éšè—å±‚çš„å¤§å°"><a href="#4-7-è°ƒæ•´éšè—å±‚çš„å¤§å°" class="headerlink" title="4.7-è°ƒæ•´éšè—å±‚çš„å¤§å°"></a>4.7-è°ƒæ•´éšè—å±‚çš„å¤§å°</h3><ul><li>è§‚å¯Ÿä¸åŒå¤§å°éšè—å±‚çš„æ¨¡å‹è¡¨ç°</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.figure(figsize=(16, 32))hidden_layer_sizes = [1,2,3,4,5,10,20]for i, n_h in enumerate(hidden_layer_sizes):    plt.subplot(5, 2, i+1)    parameters = func_nn_model(X, Y, n_h, num_epochs=5000)    func_plot_decision_boundary(lambda x: func_predict(parameters, x.T), X, Y)    preds = func_predict(parameters, X)    acc = float((np.dot(Y,preds.T) + np.dot(1-Y,1-preds.T))/float(Y.size)*100)#     print ("Accuracy for {} hidden units: {} %".format(n_h, acc))    plt.title("Accuracy for {} hidden units: {} %".format(n_h, acc))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/output_74_0.png" alt="output_74_0"></p><ul><li>è¾ƒå¤§çš„æ¨¡å‹èƒ½å¤Ÿæ›´å¥½çš„æ‹Ÿåˆè®­ç»ƒé›†</li><li>éšè—å±‚unitsæ•°é‡ä¹Ÿä¸æ˜¯è¶Šå¤šè¶Šå¥½</li><li>å¯ä»¥å€ŸåŠ©æ­£åˆ™åŒ–ï¼Œé¿å…æ¨¡å‹è¿‡æ‹Ÿåˆ</li><li>æ­£åˆ™åŒ–æ–¹æ³•ï¼š<ol><li>l2æ­£åˆ™</li><li>dropout</li><li>æ•°æ®å¢å¼º</li><li>early stopping</li><li></li></ol></li></ul><h2 id="6-æ¨¡å‹åœ¨å…¶ä»–æ•°æ®é›†ä¸Šçš„æ€§èƒ½"><a href="#6-æ¨¡å‹åœ¨å…¶ä»–æ•°æ®é›†ä¸Šçš„æ€§èƒ½" class="headerlink" title="6-æ¨¡å‹åœ¨å…¶ä»–æ•°æ®é›†ä¸Šçš„æ€§èƒ½"></a>6-æ¨¡å‹åœ¨å…¶ä»–æ•°æ®é›†ä¸Šçš„æ€§èƒ½</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_train_predict_extra_dataset():    """    åœ¨å…¶ä»–æ•°æ®é›†ä¸Šçš„è¡¨ç°    :return    """    nosiy_circles, nosiy_moons, blobs, gaussian_quantiles, no_structure = func_load_extra_datasets()    datasets = {        'nosiy_circles': nosiy_circles,        'nosiy_moons': nosiy_moons,        'blobs': blobs,        'gaussian_quantiles': gaussian_quantiles    }    plt.figure(figsize=(16, 16))    for i, dataset in enumerate(datasets.keys()):        plt.subplot(2, 2, i+1)        X, Y = datasets[dataset]        X, Y = X.T, np.expand_dims(Y, axis=0)        if dataset == 'blobs':            Y = Y % 2#         plt.scatter(X[0, :], X[1, :], c=Y.reshape(X[0, :].shape), s=40, cmap=plt.cm.Spectral)        parameters = func_nn_model(X, Y, n_h=4, num_epochs=10000, print_cost=False)        func_plot_decision_boundary(lambda x: func_predict(parameters, x.T), X, Y)        plt.title('dataset %s decision boundary for hidden layer size %i' % (dataset, 4))    plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_train_predict_extra_dataset()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/08/11/shen-du-xue-xi-ng-zhi-yi-ceng-yin-cang-ceng-shen-jing-wang-luo/output_78_0.png" alt="output_78_0"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹å´æ©è¾¾è¯¾ç¨‹ä½œä¸š1</title>
      <link href="/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/"/>
      <url>/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/</url>
      
        <content type="html"><![CDATA[<h1 id="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW1-numpyå…¥é—¨"><a href="#å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW1-numpyå…¥é—¨" class="headerlink" title="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW1=numpyå…¥é—¨"></a>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW1=numpyå…¥é—¨</h1><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://mooc.study.163.com/university/deeplearning_ai#/c" target="_blank" rel="noopener">è§†é¢‘é“¾æ¥</a></li><li><a href="https://www.heywhale.com/mw/project/5dd236a800b0b900365eca9b" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥</a></li></ol><h2 id="NumpyåŸºç¡€"><a href="#NumpyåŸºç¡€" class="headerlink" title="NumpyåŸºç¡€"></a>NumpyåŸºç¡€</h2><h3 id="1-ä½¿ç”¨numpyæ„å»ºåŸºæœ¬å‡½æ•°"><a href="#1-ä½¿ç”¨numpyæ„å»ºåŸºæœ¬å‡½æ•°" class="headerlink" title="1-ä½¿ç”¨numpyæ„å»ºåŸºæœ¬å‡½æ•°"></a>1-ä½¿ç”¨numpyæ„å»ºåŸºæœ¬å‡½æ•°</h3><h4 id="1-1-sigmoidå‡½æ•°å’Œnp-exp"><a href="#1-1-sigmoidå‡½æ•°å’Œnp-exp" class="headerlink" title="1-1 sigmoidå‡½æ•°å’Œnp.exp()"></a>1-1 sigmoidå‡½æ•°å’Œnp.exp()</h4><ul><li>sigmoidå‡½æ•°å…¬å¼</li></ul><script type="math/tex; mode=display">\sigma(x) = \frac{1}{1+exp(-x)}</script><ul><li>ä¸ºä»€ä¹ˆnp.exp()æ¯”math.exp()æ›´å¯å–ï¼Ÿ<ol><li>æ·±åº¦å­¦ä¹ ä¸­ä¸»è¦ä½¿ç”¨çš„æ˜¯çŸ©é˜µå’Œå‘é‡ï¼Œå› æ­¤numpyæ›´ä¸ºå®ç”¨</li><li>math.exp()åªé€‚ç”¨äºè¾“å…¥æ˜¯å®æ•°</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">import mathdef func_basic_sigmoid(x):    """    ä½¿ç”¨math.expæ„å»ºsigmoidå‡½æ•°    :param x: a scaler    :return sigmoid(x)    """    return 1 / (1 + math.exp(-x))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_basic_sigmoid(3)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>0.9525741268224334</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># func_basic_sigmoid([1,2,3])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">import numpy as npx = np.array([1,2,3])np.exp(x)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([ 2.71828183,  7.3890561 , 20.08553692])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">import numpy as npdef func_numpy_sigmoid(x):    """    ä½¿ç”¨np.expæ„å»ºsigmoidå‡½æ•°    :param x: a scaler or numpy array of any size    :return sigmoid(x)    """    return 1 / (1 + np.exp(-x))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">x = np.array([1,2,3])func_numpy_sigmoid(x)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([0.73105858, 0.88079708, 0.95257413])</code></pre><h4 id="1-2-simoidå‡½æ•°çš„æ¢¯åº¦"><a href="#1-2-simoidå‡½æ•°çš„æ¢¯åº¦" class="headerlink" title="1-2 simoidå‡½æ•°çš„æ¢¯åº¦"></a>1-2 simoidå‡½æ•°çš„æ¢¯åº¦</h4><ul><li>æ¢¯åº¦æ±‚è§£å…¬å¼</li></ul><script type="math/tex; mode=display">\sigma^{'}(x) = \sigma(x)(1-\sigma(x))</script><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_numpy_sigmoid_derivative(x):    """    è®¡ç®—sigmoidå‡½æ•°åœ¨xå¤„çš„æ¢¯åº¦    :param x: a scaler or numpy array of any size    :return æ¢¯åº¦    """    s = func_numpy_sigmoid(x)    return s * (1 - s)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">x = np.array([0,1,2,3,100])func_numpy_sigmoid_derivative(x)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([0.25      , 0.19661193, 0.10499359, 0.04517666, 0.        ])</code></pre><h4 id="1-3é‡å¡‘æ•°ç»„"><a href="#1-3é‡å¡‘æ•°ç»„" class="headerlink" title="1-3é‡å¡‘æ•°ç»„"></a>1-3é‡å¡‘æ•°ç»„</h4><ul><li>np.shape: è·å–çŸ©é˜µæˆ–è€…å‘é‡çš„ç»´åº¦</li><li>np.reshape(): å°†çŸ©é˜µæˆ–è€…å‘é‡é‡å¡‘æˆå…¶ä»–shape</li><li>ä¾‹å¦‚å®ç°image2vector()ï¼Œå°†è¾“å…¥(length, height, depth)çš„3Dæ•°ç»„è¾“å…¥ï¼Œè½¬æ¢æˆ(length<em>height</em>depth, 1)çš„1Dæ•°ç»„</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_image2vector(image):    """    å›¾åƒè¾“å…¥è½¬æ¢æˆvector    :param image: a numpy array of shape (length, height, depth)    :return v: a vector of shape (length*height*depth, 1)    """    return image.reshape(image.shape[0] * image.shape[1] * image.shape[2], 1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">image = np.array([[[ 0.67826139,  0.29380381],                    [ 0.90714982,  0.52835647],                    [ 0.4215251 ,  0.45017551]],                   [[ 0.92814219,  0.96677647],                    [ 0.85304703,  0.52351845],                    [ 0.19981397,  0.27417313]],                   [[ 0.60659855,  0.00533165],                    [ 0.10820313,  0.49978937],                    [ 0.34144279,  0.94630077]]])image.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(3, 3, 2)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">v = func_image2vector(image)v.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>(18, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">v<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[0.67826139],       [0.29380381],       [0.90714982],       [0.52835647],       [0.4215251 ],       [0.45017551],       [0.92814219],       [0.96677647],       [0.85304703],       [0.52351845],       [0.19981397],       [0.27417313],       [0.60659855],       [0.00533165],       [0.10820313],       [0.49978937],       [0.34144279],       [0.94630077]])</code></pre><h4 id="1-4-è¡Œæ ‡å‡†åŒ–"><a href="#1-4-è¡Œæ ‡å‡†åŒ–" class="headerlink" title="1-4 è¡Œæ ‡å‡†åŒ–"></a>1-4 è¡Œæ ‡å‡†åŒ–</h4><ul><li>ä¸ºä»€ä¹ˆæ ‡å‡†åŒ–ï¼Ÿ<ol><li>æ•°æ®å½’ä¸€åŒ–åï¼Œæ¢¯åº¦ä¸‹é™çš„æ”¶æ•›é€Ÿåº¦æ›´å¿«ï¼Œé€šå¸¸ä¼šè¡¨ç°å‡ºæ›´å¥½çš„æ•ˆæœ</li></ol></li><li>ç»ƒä¹ ï¼šæ„å»ºnormalize_rows()å‡½æ•°æ¥æ ‡å‡†åŒ–çŸ©é˜µçš„è¡Œ</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_normalize_rows(x):    """    è¡Œæ ‡å‡†åŒ–    :param: x: a numpy matrix of shape (n, m)    :return x: è¡Œæ ‡å‡†åŒ–åçš„çŸ©é˜µ    """    x_norm = np.linalg.norm(x, axis=1, ord=2, keepdims=True)  # Matrix or vector norm    print(x_norm, x_norm.shape)    return x / x_norm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">x = np.array([[0,3,4],               [1,6,4]])x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>array([[0, 3, 4],       [1, 6, 4]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_normalize_rows(x)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>[[5.        ] [7.28010989]] (2, 1)array([[0.        , 0.6       , 0.8       ],       [0.13736056, 0.82416338, 0.54944226]])</code></pre><h4 id="1-5-broadcast-and-softmax"><a href="#1-5-broadcast-and-softmax" class="headerlink" title="1-5 broadcast and softmax"></a>1-5 broadcast and softmax</h4><ul><li>broadcast: å¹¿æ’­ï¼Œæ•°ç»„+æ ‡é‡ï¼Œä¼šå°†æ ‡é‡è‡ªåŠ¨broadcastæˆå’Œæ•°ç»„ä¸€æ ·ç»´åº¦å†ç›¸åŠ </li><li>softmax:</li></ul><script type="math/tex; mode=display">softmax(x) = \frac{exp(x_i)}{\sum{exp(x_j)}}</script><ul><li>ç»ƒä¹ ï¼šå®ç°softmaxå‡½æ•°</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_softmax_rows(x):    """    softmaxå‡½æ•°ï¼Œ æŒ‰è¡Œ    :param x: a matrix of shape (n, m)    :return x: softmaxè¿‡åçš„çŸ©é˜µ    """    x_exp = np.exp(x)    x_row_sum = np.sum(x_exp, axis=1, keepdims=True)    return x_exp/ x_row_sum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">x = np.array([    [9, 2, 5, 0, 0],    [7, 5, 0, 0 ,0]])x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([[9, 2, 5, 0, 0],       [7, 5, 0, 0, 0]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_softmax_rows(x)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[9.80897665e-01, 8.94462891e-04, 1.79657674e-02, 1.21052389e-04,        1.21052389e-04],       [8.78679856e-01, 1.18916387e-01, 8.01252314e-04, 8.01252314e-04,        8.01252314e-04]])</code></pre><h3 id="2-å‘é‡åŒ–"><a href="#2-å‘é‡åŒ–" class="headerlink" title="2-å‘é‡åŒ–"></a>2-å‘é‡åŒ–</h3><ul><li>ä¸ºäº†ç¡®ä¿ä»£ç çš„é«˜æ•ˆè®¡ç®—ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‘é‡åŒ–</li><li>ä¾‹å¦‚ï¼šå°è¯•åŒºåˆ†ç‚¹ï¼Œå¤–éƒ¨ï¼Œå…ƒç´ ä¹˜ç§¯ä¹‹é—´çš„åŒºåˆ«</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">import timex1 = [9, 2, 5, 0, 0, 7, 5, 0, 0, 0, 9, 2, 5, 0, 0]x2 = [9, 2, 2, 9, 0, 9, 2, 5, 0, 0, 9, 2, 5, 0, 0]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç»å…¸ç‚¹ä¹˜-dot product</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">tic = time.process_time()dot = 0for i in range(len(x1)):    dot += x1[i]*x2[i]toc = time.process_time()print(dot, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>278 0.2324579999997134</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">tic = time.process_time()dot = np.dot(x1, x2)print(dot, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>278 -10.069867000000343</code></pre><ul><li>ç»å…¸å¤–ä¹˜-outer product</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">tic = time.process_time()outer = np.zeros((len(x1), len(x2)))for i in range(len(x1)):    for j in range(len(x2)):        outer[i, j] = x1[i] * x2[j]toc = time.process_time()print(outer, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[[81. 18. 18. 81.  0. 81. 18. 45.  0.  0. 81. 18. 45.  0.  0.] [18.  4.  4. 18.  0. 18.  4. 10.  0.  0. 18.  4. 10.  0.  0.] [45. 10. 10. 45.  0. 45. 10. 25.  0.  0. 45. 10. 25.  0.  0.] [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.] [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.] [63. 14. 14. 63.  0. 63. 14. 35.  0.  0. 63. 14. 35.  0.  0.] [45. 10. 10. 45.  0. 45. 10. 25.  0.  0. 45. 10. 25.  0.  0.] [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.] [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.] [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.] [81. 18. 18. 81.  0. 81. 18. 45.  0.  0. 81. 18. 45.  0.  0.] [18.  4.  4. 18.  0. 18.  4. 10.  0.  0. 18.  4. 10.  0.  0.] [45. 10. 10. 45.  0. 45. 10. 25.  0.  0. 45. 10. 25.  0.  0.] [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.] [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]] 0.4756360000000015</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">tic = time.process_time()outer = np.outer(x1, x2)print(outer, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>[[81 18 18 81  0 81 18 45  0  0 81 18 45  0  0] [18  4  4 18  0 18  4 10  0  0 18  4 10  0  0] [45 10 10 45  0 45 10 25  0  0 45 10 25  0  0] [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0] [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0] [63 14 14 63  0 63 14 35  0  0 63 14 35  0  0] [45 10 10 45  0 45 10 25  0  0 45 10 25  0  0] [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0] [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0] [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0] [81 18 18 81  0 81 18 45  0  0 81 18 45  0  0] [18  4  4 18  0 18  4 10  0  0 18  4 10  0  0] [45 10 10 45  0 45 10 25  0  0 45 10 25  0  0] [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0] [ 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0]] -12.807576000000154</code></pre><ul><li>å…ƒç´ ç›¸ä¹˜-elementwise product</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">tic = time.process_time()mul = np.zeros(len(x1))for i in range(len(x1)):    mul[i] = x1[i] * x2[i]toc = time.process_time()print(mul, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[81.  4. 10.  0.  0. 63. 10.  0.  0.  0. 81.  4. 25.  0.  0.] 0.2550199999999947</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">tic = time.process_time()mul = np.multiply(x1, x2)print(mul, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>[81  4 10  0  0 63 10  0  0  0 81  4 25  0  0] -9.051946999999672</code></pre><ul><li>çŸ©é˜µç›¸ä¹˜-general dot product</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">np.random.seed(2030)W = np.random.rand(3, len(x1))tic = time.process_time()gdot = np.zeros(W.shape[0])for i in range(W.shape[0]):    for j in range(len(x1)):        gdot[i] += W[i, j]*x1[j]toc = time.process_time()print(gdot, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[23.51513471 26.17443232 12.03612207] 0.3430280000000785</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">tic = time.process_time()gdot = np.dot(W, x1)print(gdot, (toc-tic)*1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>[23.51513471 26.17443232 12.03612207] -9.034191000000025</code></pre><h4 id="2-1-å®ç°l1å’Œl2æŸå¤±å‡½æ•°"><a href="#2-1-å®ç°l1å’Œl2æŸå¤±å‡½æ•°" class="headerlink" title="2-1 å®ç°l1å’Œl2æŸå¤±å‡½æ•°"></a>2-1 å®ç°l1å’Œl2æŸå¤±å‡½æ•°</h4><ul><li>å‘é‡åŒ–ç‰ˆæœ¬</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_l1_l2(y_hat, y):    """    l1æŸå¤±å‡½æ•°    :param y_hat: é¢„æµ‹å€¼    :param y: å®é™…å€¼    return l1_loss, l2_loss:    """    return np.sum(np.abs(y-y_hat)), np.dot((y-y_hat), (y-y_hat).T)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y_hat = np.array([.9, 0.2, 0.1, .4, .9])y = np.array([1, 0, 0, 1, 1])func_l1_l2(y_hat, y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(1.1, 0.43)</code></pre><h1 id="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW2-ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’"><a href="#å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW2-ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’" class="headerlink" title="å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW2=ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’"></a>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä½œä¸šL1W2HW2=ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’</h1><h2 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://mooc.study.163.com/university/deeplearning_ai#/c" target="_blank" rel="noopener">è§†é¢‘é“¾æ¥</a></li><li><a href="https://www.heywhale.com/mw/project/5dd23dbf00b0b900365ecef1" target="_blank" rel="noopener">ä½œä¸šé“¾æ¥</a></li></ol><h2 id="ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’"><a href="#ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’" class="headerlink" title="ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’"></a>ç¥ç»ç½‘ç»œå®ç°é€»è¾‘å›å½’</h2><ul><li>å»ºç«‹å­¦ä¹ ç®—æ³•çš„ä¸€èˆ¬æ­¥éª¤<ol><li>åˆå§‹åŒ–å‚æ•°</li><li>è®¡ç®—æŸå¤±å‡½æ•°åŠæ¢¯åº¦</li><li>ä½¿ç”¨ä¼˜åŒ–ç®—æ³•ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰</li></ol></li></ul><h3 id="1-å¯¼å…¥æ¨¡å—"><a href="#1-å¯¼å…¥æ¨¡å—" class="headerlink" title="1-å¯¼å…¥æ¨¡å—"></a>1-å¯¼å…¥æ¨¡å—</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">import numpy as np  # pythonç§‘å­¦è®¡ç®—çš„åŸºæœ¬åŒ…import matplotlib.pyplot as plt  # pythonå›¾å½¢åº“import h5py  # å¤„ç†å­˜å‚¨ä¸ºh5æ–‡ä»¶æ ¼å¼çš„æ•°æ®é›†import scipy  # pythonç®—æ³•åº“å’Œæ•°å­¦å·¥å…·åŒ…from PIL import Image  # å›¾åƒå¤„ç†åº“from scipy import ndimage  # å›¾åƒå¤„ç†# from lr_utils import load_dataset%matplotlib inline<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_load_dataset():    """    from lr_utils import load_dataset    :return train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes    """    train_dataset = h5py.File('./L1W2/train_catvnoncat.h5', "r")    train_set_x_orig = np.array(train_dataset["train_set_x"][:]) # your train set features    train_set_y_orig = np.array(train_dataset["train_set_y"][:]) # your train set labels    test_dataset = h5py.File('./L1W2/test_catvnoncat.h5', "r")    test_set_x_orig = np.array(test_dataset["test_set_x"][:]) # your test set features    test_set_y_orig = np.array(test_dataset["test_set_y"][:]) # your test set labels    classes = np.array(test_dataset["list_classes"][:]) # the list of classes    train_set_y_orig = train_set_y_orig.reshape((1, train_set_y_orig.shape[0]))    test_set_y_orig = test_set_y_orig.reshape((1, test_set_y_orig.shape[0]))    return train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-é—®é¢˜æè¿°"><a href="#2-é—®é¢˜æè¿°" class="headerlink" title="2-é—®é¢˜æè¿°"></a>2-é—®é¢˜æè¿°</h3><ul><li><p>é—®é¢˜è¯´æ˜ï¼š</p><ol><li>labelä¸ºcat(y=1)æˆ–écat(y=0)çš„å›¾åƒé›†</li><li>å›¾åƒç»´åº¦ä¸º(length, height, 3)</li><li>æ„å»ºä¸€ä¸ªç®€å•çš„å›¾åƒè¯†åˆ«ç®—æ³•ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œåˆ†ç±»</li></ol></li><li><p>æ•°æ®EDA</p><ol><li>æ·±åº¦å­¦ä¹ ä¸­è®¸å¤šæŠ¥é”™éƒ½æ¥è‡ªäºçŸ©é˜µ/å‘é‡å°ºå¯¸ä¸åŒ¹é…ï¼Œå¦‚æœå¯ä»¥ä¿æŒä»–ä»¬ä¸å˜ï¼Œåˆ™å¯ä»¥æ¶ˆé™¤å¾ˆå¤šé”™è¯¯</li><li>æœºå™¨å­¦ä¹ å¸¸è§çš„æ•°æ®é¢„å¤„ç†æ˜¯å¯¹æ•°æ®é›†è¿›è¡Œå±…ä¸­å’Œæ ‡å‡†åŒ–ï¼Œå³å‡å»å‡å€¼é™¤ä»¥æ ‡å‡†å·®ã€‚ä½†æ˜¯å›¾ç‰‡æ•°æ®é›†åªéœ€è¦å°†æ¯ä¸€è¡Œé™¤ä»¥255ï¼Œæ•ˆæœå·®ä¸å¤š</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes = func_load_dataset()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(train_set_x_orig.shape)print(test_set_x_orig.shape)print(train_set_y_orig.shape)print(test_set_y_orig.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(209, 64, 64, 3)(50, 64, 64, 3)(1, 209)(1, 50)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">index = 5plt.imshow(train_set_x_orig[index])print('y=' + str(train_set_y_orig[:, index]) + ' it is a ' + classes[np.squeeze(train_set_y_orig[:, index])].decode('utf-8'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>y=[0] it is a non-cat</code></pre><p><img src="/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/output_49_1.png" alt="output_49_1"></p><ul><li>é‡å¡‘æ•°æ®é›†ï¼Œå°†å¤§å°(n, length, height, 3)çš„é‡å¡‘ä¸º(length*height*3, n)</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x_flatten = train_set_x_orig.reshape(train_set_x_orig.shape[0], -1).Ttest_set_x_flatten = test_set_x_orig.reshape(test_set_x_orig.shape[0], -1).Tprint(train_set_x_flatten.shape)print(test_set_x_flatten.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(12288, 209)(12288, 50)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x_flatten[:5, 0]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([17, 31, 56, 22, 33], dtype=uint8)</code></pre><ul><li>æ•°æ®é¢„å¤„ç†</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x = train_set_x_flatten / 255.test_set_x = test_set_x_flatten / 255.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set_x[:5, 0]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([0.06666667, 0.12156863, 0.21960784, 0.08627451, 0.12941176])</code></pre><h3 id="3-å­¦ä¹ ç®—æ³•çš„ä¸€èˆ¬æ¶æ„"><a href="#3-å­¦ä¹ ç®—æ³•çš„ä¸€èˆ¬æ¶æ„" class="headerlink" title="3-å­¦ä¹ ç®—æ³•çš„ä¸€èˆ¬æ¶æ„"></a>3-å­¦ä¹ ç®—æ³•çš„ä¸€èˆ¬æ¶æ„</h3><ul><li>é€»è¾‘å›å½’å®é™…æ˜¯ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œï¼Œå¦‚ä¸‹å›¾</li></ul><p><img src="/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/LogReg_kiank.png" alt="LogReg_kiank"></p><ul><li>ç®—æ³•çš„æ•°å­¦è¡¨è¾¾å¼</li></ul><script type="math/tex; mode=display">z^{(i)} = w^Tx^{(i)}+b \\\hat{y}^{(i)} = a^{(i)} = \sigma(z^{(i)})  \\\mathcal{L}(a^{(i)}, y^{(i)}) =  - y^{(i)}  \log(a^{(i)}) - (1-y^{(i)} )  \log(1-a^{(i)})</script><ul><li>å…³é”®æ­¥éª¤<ol><li>åˆå§‹åŒ–æ¨¡å‹å‚æ•°</li><li>æœ€å°åŒ–æŸå¤±å‡½æ•°æ¥å­¦ä¹ å‚æ•°</li><li>ä½¿ç”¨å­¦ä¹ åˆ°çš„å‚æ•°è¿›è¡Œé¢„æµ‹ï¼ˆåœ¨æµ‹è¯•é›†ä¸Šï¼‰</li><li>åˆ†æç»“æœå¹¶å¾—å‡ºç»“è®º</li></ol></li></ul><h3 id="4-æ„å»ºç®—æ³•çš„å„ä¸ªéƒ¨åˆ†"><a href="#4-æ„å»ºç®—æ³•çš„å„ä¸ªéƒ¨åˆ†" class="headerlink" title="4-æ„å»ºç®—æ³•çš„å„ä¸ªéƒ¨åˆ†"></a>4-æ„å»ºç®—æ³•çš„å„ä¸ªéƒ¨åˆ†</h3><ul><li>æ„å»ºç¥ç»ç½‘ç»œä¸»è¦æ­¥éª¤ï¼š<ol><li>å®šä¹‰æ¨¡å‹æ¶æ„</li><li>åˆå§‹åŒ–æ¨¡å‹å‚æ•°</li><li>å¾ªç¯ï¼š<ol><li>è®¡ç®—å½“å‰æŸå¤±ï¼ˆæ­£å‘ä¼ æ’­ï¼‰</li><li>è®¡ç®—å½“å‰æ¢¯åº¦ï¼ˆåå‘ä¼ æ’­ï¼‰</li><li>æ›´æ–°å‚æ•°ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰</li></ol></li></ol></li></ul><h4 id="4-1-è¾…åŠ©å‡½æ•°-sigmoid"><a href="#4-1-è¾…åŠ©å‡½æ•°-sigmoid" class="headerlink" title="4-1 è¾…åŠ©å‡½æ•°=sigmoid"></a>4-1 è¾…åŠ©å‡½æ•°=sigmoid</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_numpy_sigmoid(x):    """    sigmoidå‡½æ•°    :param x: a scalar or numpy array of any size    :return s: sigmoid(x)    """    return 1 / (1 + np.exp(-x))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">func_numpy_sigmoid(np.array([0, 2]))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([0.5       , 0.88079708])</code></pre><h4 id="4-2-åˆå§‹åŒ–å‚æ•°"><a href="#4-2-åˆå§‹åŒ–å‚æ•°" class="headerlink" title="4-2 åˆå§‹åŒ–å‚æ•°"></a>4-2 åˆå§‹åŒ–å‚æ•°</h4><ul><li>å°†wåˆå§‹åŒ–ä¸º0çš„å‘é‡</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_initial_parameters(dim):    """    This function creates a vector of zeros of shape (dim, 1) for w and initializes b to 0.    :param dim: wå‚æ•°çš„ç»´åº¦    :return w, b    """    w = np.zeros((dim, 1))    b = 0    assert(w.shape==(dim, 1))    assert(isinstance(b, float) or isinstance(b, int))    return w, b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">w, b = func_initial_parameters(2)print(w, b)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>[[0.] [0.]] 0</code></pre><h4 id="4-3-å‰å‘ï¼Œåå‘ä¼ æ’­"><a href="#4-3-å‰å‘ï¼Œåå‘ä¼ æ’­" class="headerlink" title="4-3 å‰å‘ï¼Œåå‘ä¼ æ’­"></a>4-3 å‰å‘ï¼Œåå‘ä¼ æ’­</h4><ul><li>å‰å‘ä¼ æ’­ï¼š</li></ul><script type="math/tex; mode=display">A = \sigma(W^TX+b)=(a^{(0)},...,a^{(m)})  \\J = -\frac{1}{m}\sum_{i=1}^{m}y^{(i)}\log(a^{(i)})+(1-y^{(i)})\log(1-a^{(i)})</script><ul><li>åå‘ä¼ æ’­</li></ul><script type="math/tex; mode=display">\frac{\partial J}{\partial w} = \frac{1}{m}X(A-Y)^T  \\\frac{\partial J}{\partial b} = \frac{1}{m} \sum_{i=1}^m (a^{(i)}-y^{(i)})</script><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_propagate(w, b, X, Y):    """    å‰å‘åå‘ä¼ æ’­    :param w: weights of size(length*height*3, 1)    :param b: bias    :param X: data of size(length*height*3, num_samples)    :param Y: target of size(1, num_samples)    """    m = X.shape[1]    # forward    A = func_numpy_sigmoid(np.dot(w.T, X) + b)#     print('A: \n', A, '\n', A.shape)#     J = -1 / m * np.sum(Y * np.log(A) + (1 - Y) * np.log(1 - A))    J = -1 / m * np.sum(np.multiply(Y, np.log(A)) + np.multiply((1 - Y), np.log(1 - A)))#     print('J: \n', J, '\n', J.shape)    # backward    dw = 1 / m * np.dot(X, (A-Y).T)    db = 1 / m * np.sum(A-Y)    assert(dw.shape == w.shape)    assert(db.dtype == float)    J = np.squeeze(J)    assert(J.shape == ())    grads = {        'dw': dw,        'db': db    }    return grads, J<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">w, b, X, Y = np.array([[1],[2]]), 2, np.array([[1,2],[3,4]]), np.array([[1,0]])print(w.shape, b, X.shape, Y.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>(2, 1) 2 (2, 2) (1, 2)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">grads, cost = func_propagate(w, b, X, Y)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print ("dw = " + str(grads["dw"]))print ("db = " + str(grads["db"]))print ("cost = " + str(cost))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>dw = [[0.99993216] [1.99980262]]db = 0.49993523062470574cost = 6.000064773192205</code></pre><h4 id="4-4-ä¼˜åŒ–å‡½æ•°"><a href="#4-4-ä¼˜åŒ–å‡½æ•°" class="headerlink" title="4-4 ä¼˜åŒ–å‡½æ•°"></a>4-4 ä¼˜åŒ–å‡½æ•°</h4><ul><li>æœ€å°åŒ–Jæ¥å­¦ä¹ w,b</li><li>å‚æ•°çš„æ›´æ–°è§„åˆ™ï¼š</li></ul><script type="math/tex; mode=display">\theta = \theta - \alpha * d\theta</script><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_optimizer(w, b, X, Y, epochs, lr, print_cost=False):    """    ä¼˜åŒ–å‡½æ•°ï¼Œæ±‚è§£w,b    :param w: (length*height*3, 1)    :param b:    :param X: (length*height*3, num_samples)    :param Y: (1, num_samples)    :param epochs: num_iterations    :param lr: learning_rate    :param print_cost: True to print the loss every 100 steps    :return params, grads, costs    """    costs = []    for i in range(epochs):        grads, cost = func_propagate(w, b, X, Y)        dw = grads['dw']        db = grads['db']        w = w - lr * dw        b = b - lr * db        if i % 100 == 0:            costs.append(cost)            if print_cost:                print('cost after epoch %i: %f' % (i, cost))    params = {        'w': w,        'b': b    }    grads = {        'dw': dw,        'db': db    }    return params, grads, costs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">w, b, X, Y = np.array([[1],[2]]), 2, np.array([[1,2],[3,4]]), np.array([[1,0]])print(w.shape, b, X.shape, Y.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>(2, 1) 2 (2, 2) (1, 2)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">params, grads, costs = func_optimizer(w, b, X, Y, epochs=100, lr=0.009, print_cost=False)print('w=', params['w'])print('b=', params['b'])print('dw=', grads['dw'])print('db=', grads['db'])print(costs)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>w= [[0.1124579 ] [0.23106775]]b= 1.5593049248448891dw= [[0.90158428] [1.76250842]]db= 0.4304620716786828[6.000064773192205]</code></pre><ul><li>predict</li><li>é¢„æµ‹å…¬å¼</li></ul><script type="math/tex; mode=display">\hat{Y} = A = \sigma(w^TX + b)</script><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_predict(w, b, X):    """    predict    :param w: (length*height*3, 1)    :param b:    :param X: (length*height*3, num_samples)    :return y_pred    """    m = X.shape[1]#     y_pred = np.zeros((1, m))    w = w.reshape(X.shape[0], 1)    A = func_numpy_sigmoid(np.dot(w.T, X) + b)  # predict    y_pred = [0 if A[0, i] <= 0.5 else 1 for i in range(A.shape[1])]    y_pred = np.expand_dims(y_pred, 0)    assert(y_pred.shape==(1, m))    return y_pred<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y_pred = func_predict(w, b, X)print('y_pred=', y_pred)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>y_pred= [[1 1]]</code></pre><h4 id="5-å°†æ‰€æœ‰åŠŸèƒ½åˆå¹¶åˆ°æ¨¡å‹ä¸­"><a href="#5-å°†æ‰€æœ‰åŠŸèƒ½åˆå¹¶åˆ°æ¨¡å‹ä¸­" class="headerlink" title="5-å°†æ‰€æœ‰åŠŸèƒ½åˆå¹¶åˆ°æ¨¡å‹ä¸­"></a>5-å°†æ‰€æœ‰åŠŸèƒ½åˆå¹¶åˆ°æ¨¡å‹ä¸­</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">def func_model(x_train, y_train, x_test, y_test, epochs=2000, lr=0.5, print_cost=False):    """    æ„å»ºlogistic regression    :param x_train:    :param y_train:    :param x_test:    :param y_test:    :param epochs:    :param lr:    :param print_cost:    :return d: dictionary containing information about the model.    """    w, b = func_initial_parameters(x_train.shape[0])    params, grads, costs = func_optimizer(w, b, x_train, y_train, epochs, lr, print_cost=print_cost)    w = params['w']    b = params['b']    y_pred_train = func_predict(w, b, x_train)    y_pred_test = func_predict(w, b, x_test)    print('train acc: {} %'.format(100-np.mean(np.abs(y_pred_train - y_train))*100))    print('test acc: {} %'.format(100-np.mean(np.abs(y_pred_test - y_test))*100))    d = {        'costs': costs,        'y_pred_train': y_pred_train,        'y_pred_test': y_pred_test,        'w': w,        'b': b,        'lr': lr,        'epochs': epochs    }    return d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">d = func_model(train_set_x, train_set_y_orig, test_set_x, test_set_y_orig, epochs=2000, lr=0.005, print_cost=True)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>cost after epoch 0: 0.693147cost after epoch 100: 0.584508cost after epoch 200: 0.466949cost after epoch 300: 0.376007cost after epoch 400: 0.331463cost after epoch 500: 0.303273cost after epoch 600: 0.279880cost after epoch 700: 0.260042cost after epoch 800: 0.242941cost after epoch 900: 0.228004cost after epoch 1000: 0.214820cost after epoch 1100: 0.203078cost after epoch 1200: 0.192544cost after epoch 1300: 0.183033cost after epoch 1400: 0.174399cost after epoch 1500: 0.166521cost after epoch 1600: 0.159305cost after epoch 1700: 0.152667cost after epoch 1800: 0.146542cost after epoch 1900: 0.140872train acc: 99.04306220095694 %test acc: 70.0 %</code></pre><ul><li>ç»“æœåˆ†æï¼š<ol><li>è®­ç»ƒaccæ¥è¿‘100%ï¼Œæµ‹è¯•accä¸º70%</li><li>è¯¥æ¨¡å‹æ˜æ˜¾é€‚åˆè®­ç»ƒæ•°æ®ï¼Œæœ‰äº›è¿‡æ‹Ÿåˆ</li></ol></li><li>ä½¿ç”¨ä¸‹é¢ä»£ç å¯ä»¥æŸ¥çœ‹é¢„æµ‹ç»“æœ</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">index = 1plt.imshow(test_set_x[:, index].reshape(test_set_x_orig.shape[1], test_set_x_orig.shape[1], 3))print('y=', test_set_y_orig[0, index], 'pred=', d['y_pred_test'][0, index])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>y= 1 pred= 1</code></pre><p><img src="/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/output_80_1.png" alt="output_80_1"></p><ul><li>ç»˜åˆ¶æŸå¤±å‡½æ•°å’Œæ¢¯åº¦</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">costs = np.array(d['costs'])plt.plot(costs)plt.ylabel('cost')plt.xlabel('epochs')plt.title('lr='+str(d['lr']))plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/output_82_0.png" alt="output_82_0"></p><h4 id="6-å­¦ä¹ ç‡çš„é€‰æ‹©"><a href="#6-å­¦ä¹ ç‡çš„é€‰æ‹©" class="headerlink" title="6-å­¦ä¹ ç‡çš„é€‰æ‹©"></a>6-å­¦ä¹ ç‡çš„é€‰æ‹©</h4><ul><li>lrå†³å®šæˆ‘ä»¬æ›´æ–°å‚æ•°çš„é€Ÿåº¦</li><li>å¦‚æœå¤ªå¤§ï¼Œå¯èƒ½ä¼šè¶…å‡ºæœ€ä½³å€¼</li><li>å¦‚æœå¤ªå°ï¼Œå¯èƒ½éœ€è¦æ›´å¤šçš„è¿­ä»£æ‰èƒ½æ”¶æ•›åˆ°æœ€ä½³å€¼</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">lr_list = [0.01, 0.001, 0.0001]models = {}for lr in lr_list:    print('lr=', lr)    models[str(lr)] = func_model(train_set_x, train_set_y_orig, test_set_x, test_set_y_orig,                                  epochs=1500, lr=lr, print_cost=False)    print('-'*52)for lr in lr_list:    plt.plot(np.array(models[str(lr)]['costs']), label=str(models[str(lr)]['lr']))plt.ylabel('cost')plt.xlabel('epochs')legend = plt.legend(loc='upper center', shadow=True)frame = legend.get_frame()frame.set_facecolor('0.90')plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>lr= 0.01train acc: 99.52153110047847 %test acc: 68.0 %----------------------------------------------------lr= 0.001train acc: 88.99521531100478 %test acc: 64.0 %----------------------------------------------------lr= 0.0001train acc: 68.42105263157895 %test acc: 36.0 %----------------------------------------------------</code></pre><p><img src="/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/output_84_1.png" alt="output_84_1"></p><ul><li>åˆ†æ<ol><li>ä¸åŒçš„å­¦ä¹ ç‡å¸¦æ¥ä¸åŒæŸå¤±</li><li>å­¦ä¹ ç‡å¤ªå¤§ï¼ŒæŸå¤±ä¸Šä¸‹æ³¢åŠ¨ï¼Œç”šè‡³å¯èƒ½ä¼šå‘æ•£</li><li>è¾ƒä½æŸå¤±å¹¶ä¸æ„å‘³ç€æ¨¡å‹æ•ˆæœå¥½ï¼Œå½“è®­ç»ƒç²¾åº¦æ¯”æµ‹è¯•ç²¾åº¦é«˜å¾ˆå¤šæ—¶ï¼Œä¼šå‘ç”Ÿè¿‡æ‹Ÿåˆæƒ…å†µ</li></ol></li><li>æ·±åº¦å­¦ä¹ ä¸­ï¼Œé€šå¸¸å»ºè®®<ol><li>é€‰æ‹©å¥½å­¦ä¹ ç‡</li><li>å¦‚æœè¿‡æ‹Ÿåˆï¼Œåˆ™ä½¿ç”¨å…¶ä»–æ–¹æ³•å‡å°‘è¿‡æ‹Ÿåˆ</li></ol></li></ul><h4 id="7-é¢„æµ‹è‡ªå·±çš„å›¾åƒ"><a href="#7-é¢„æµ‹è‡ªå·±çš„å›¾åƒ" class="headerlink" title="7-é¢„æµ‹è‡ªå·±çš„å›¾åƒ"></a>7-é¢„æµ‹è‡ªå·±çš„å›¾åƒ</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">image_path = './L1W2/cat_in_iran.jpg'image = np.array(plt.imread(image_path))image.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>(1115, 1114, 3)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">num_px = train_set_x_orig.shape[1]my_image = np.array(Image.fromarray(image).resize((num_px, num_px))).reshape((1, num_px*num_px*3)).Tmy_image.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>(12288, 1)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">my_pred_image = func_predict(d['w'], d['b'], my_image)my_pred_image<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([[1]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.imshow(image)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>&lt;matplotlib.image.AxesImage at 0x7f12aa284e20&gt;</code></pre><p><img src="/2021/08/08/shen-du-xue-xi-ng-zhi-numpy-ru-men-ji-shen-jing-wang-luo-shi-xian-lr/output_90_1.png" alt="output_90_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">print('y_pred=', np.squeeze(my_pred_image), ", your algorithm predicts a \"" + classes[int(np.squeeze(my_pred_image)),].decode("utf-8") +  "\" picture.")<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>y_pred= 1 , your algorithm predicts a &quot;cat&quot; picture.</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> numpy </tag>
            
            <tag> é€»è¾‘å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ±‚èŒå¿…å¤‡ä¹‹å„å¤§å®˜ç½‘</title>
      <link href="/2021/08/06/qiu-zhi-bi-bei-zhi-ge-da-guan-wang/"/>
      <url>/2021/08/06/qiu-zhi-bi-bei-zhi-ge-da-guan-wang/</url>
      
        <content type="html"><![CDATA[<h1 id="å®˜ç½‘"><a href="#å®˜ç½‘" class="headerlink" title="å®˜ç½‘"></a>å®˜ç½‘</h1><h2 id="å›½ä¼"><a href="#å›½ä¼" class="headerlink" title="å›½ä¼"></a>å›½ä¼</h2><ol><li>==<a href="https://job.10086.cn/personal/society/" target="_blank" rel="noopener">ä¸­å›½ç§»åŠ¨</a>==</li><li><a href="http://hr.gdtel.com.cn/portal/recruit/more/42" target="_blank" rel="noopener">ä¸­å›½ç”µä¿¡</a></li><li><a href="http://www.chinaunicom.com/hr/socialrecruit.html" target="_blank" rel="noopener">ä¸­å›½è”é€š</a></li><li>==<a href="https://www.gac.com.cn/cn/talent#join" target="_blank" rel="noopener">å¹¿å·æ±½è½¦é›†å›¢è‚¡ä»½æœ‰é™å…¬å¸</a>==</li><li>==<a href="https://yuexiu.hotjob.cn/wt/YUEXIU/web/index/social" target="_blank" rel="noopener">å¹¿å·è¶Šç§€é›†å›¢æœ‰é™å…¬å¸</a>==</li><li><a href="http://www.gzpgroup.com/zpxx/shzp/" target="_blank" rel="noopener">å¹¿å·æ¸¯é›†å›¢æœ‰é™å…¬å¸</a></li><li><a href="https://gzmpc.com/index.php/Human/index/id/14" target="_blank" rel="noopener">å¹¿å·åŒ»è¯é›†å›¢æœ‰é™å…¬å¸</a></li><li><a href="https://www.gz-gofar.com/index.php?ac=article&amp;at=list&amp;tid=59" target="_blank" rel="noopener">å¹¿å·å›½èµ„å‘å±•æ§è‚¡æœ‰é™å…¬å¸</a></li><li>==<a href="http://www.gdg.com.cn/cn/zhaopinxinxi/index.html" target="_blank" rel="noopener">å¹¿å·å‘å±•é›†å›¢è‚¡ä»½æœ‰é™å…¬å¸</a>==</li><li><a href="http://www.gzmcg.com/information/job.html" target="_blank" rel="noopener">å¹¿å·å¸‚å»ºç­‘é›†å›¢æœ‰é™å…¬å¸</a></li><li>==<a href="https://gzmetro.zhiye.com/social" target="_blank" rel="noopener">å¹¿å·åœ°é“é›†å›¢æœ‰é™å…¬å¸</a>==</li><li><a href="http://www.gzci.net/catalog.aspx?id=20&amp;?id=6" target="_blank" rel="noopener">å¹¿å·å¸‚åŸå¸‚å»ºè®¾æŠ•èµ„é›†å›¢æœ‰é™å…¬å¸</a></li><li>å¹¿å·å¸‚æ°´åŠ¡æŠ•èµ„é›†å›¢æœ‰é™å…¬å¸</li><li><a href="http://www.gzjrkg.com/%e5%8a%a0%e5%85%a5%e6%88%91%e4%bb%ac/%e6%8b%9b%e8%81%98%e8%81%8c%e4%bd%8d" target="_blank" rel="noopener">å¹¿å·é‡‘èæ§è‚¡é›†å›¢æœ‰é™å…¬å¸</a></li><li>==<a href="http://sc.hotjob.cn/wt/GZCB/web/index/social" target="_blank" rel="noopener">å¹¿å·é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸</a>==</li><li><a href="http://grcbank.zhiye.com/social?k=&amp;d=-1&amp;c=-1&amp;p=3^-1,1^-1&amp;PageIndex=1" target="_blank" rel="noopener">å¹¿å·å†œæ‘å•†ä¸šé“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸</a></li><li><a href="https://www.gjtjt.cn/join.aspx" target="_blank" rel="noopener">å¹¿å·äº¤é€šæŠ•èµ„é›†å›¢æœ‰é™å…¬å¸</a></li><li><a href="http://www.gzfzs.com/news/28" target="_blank" rel="noopener">å¹¿å·è½»å·¥å·¥è´¸é›†å›¢æœ‰é™å…¬å¸</a></li><li>å¹¿å·å·¥ä¸šæŠ•èµ„æ§è‚¡é›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·å•†è´¸æŠ•èµ„æ§è‚¡é›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·å²­å—å›½é™…ä¼ä¸šé›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·æ— çº¿ç”µé›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·ç æ±Ÿå®ä¸šé›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·æ™ºèƒ½è£…å¤‡é›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·ç æ±Ÿå•¤é…’è‚¡ä»½æœ‰é™å…¬å¸</li><li>å¹¿å·ç æ±Ÿé’¢ç´é›†å›¢è‚¡ä»½æœ‰é™å…¬å¸</li><li>å¹¿å·é…’å®¶é›†å›¢è‚¡ä»½æœ‰é™å…¬å¸</li><li>å¹¿å·ç¯ä¿æŠ•èµ„é›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·å¸‚å…¬å…±äº¤é€šé›†å›¢æœ‰é™å…¬å¸</li><li>å¹¿å·èµ›é©¬å¨±ä¹æ€»å…¬å¸</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±‚èŒå¿…å¤‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®˜ç½‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹FM_FFM_DeepFM</title>
      <link href="/2021/07/02/ji-qi-xue-xi-zhi-fm-ffm-deepfm/"/>
      <url>/2021/07/02/ji-qi-xue-xi-zhi-fm-ffm-deepfm/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><ul><li>CTR-CVRé¢„ä¼°ä»»åŠ¡ä¸Šï¼Œå¸¸ç”¨çš„æ¨¡å‹ä»‹ç»</li></ul><h1 id="FM"><a href="#FM" class="headerlink" title="FM"></a>FM</h1><ul><li>Factorization machines</li></ul><h1 id="FFM"><a href="#FFM" class="headerlink" title="FFM"></a>FFM</h1><ul><li>Fields Factorization machines</li></ul><h1 id="DeepFM"><a href="#DeepFM" class="headerlink" title="DeepFM"></a>DeepFM</h1><h1 id="DeepFFM"><a href="#DeepFFM" class="headerlink" title="DeepFFM"></a>DeepFFM</h1><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.hrwhisper.me/machine-learning-fm-ffm-deepfm-deepffm/" target="_blank" rel="noopener">hrwhisper.meçš„åšå®¢</a></li></ul><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTRé¢„ä¼° </tag>
            
            <tag> å¹¿å‘Šæ¨è </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èµ„æºæ•´åˆä¹‹è°·æ­Œä¹¦ç­¾</title>
      <link href="/2021/04/23/zi-yuan-zheng-he-zhi-gu-ge-shu-qian/"/>
      <url>/2021/04/23/zi-yuan-zheng-he-zhi-gu-ge-shu-qian/</url>
      
        <content type="html"><![CDATA[<ul><li><a href="https://msdn.itellyou.cn/" target="_blank" rel="noopener">msdnä¸‹è½½</a></li></ul><h1 id="æ·±åº¦å­¦ä¹ "><a href="#æ·±åº¦å­¦ä¹ " class="headerlink" title="æ·±åº¦å­¦ä¹ "></a>æ·±åº¦å­¦ä¹ </h1><ol><li><a href="https://d2l.ai/" target="_blank" rel="noopener">Dive into Deep Learning</a></li></ol><h1 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h1><ol><li><a href="https://colorsupplyyy.com/app" target="_blank" rel="noopener">PPTé…è‰²å·¥å…·</a></li><li><a href="https://jsoneditoronline.org/#right=local.wajogi&amp;left=local.horoku" target="_blank" rel="noopener">jsonåœ¨çº¿è§£æ</a></li><li><a href="https://npm.taobao.org/mirrors/" target="_blank" rel="noopener">npmæ·˜å®é•œåƒ</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> èµ„æºæ•´åˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è°·æ­Œä¹¦ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹è¯­éŸ³è¯†åˆ«</title>
      <link href="/2021/03/23/shen-du-xue-xi-zhi-yu-yin-shi-bie/"/>
      <url>/2021/03/23/shen-du-xue-xi-zhi-yu-yin-shi-bie/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="https://github.com/nobody132/masr" target="_blank" rel="noopener">nobody132/masr: ä¸­æ–‡è¯­éŸ³è¯†åˆ«; Mandarin Automatic â€¦ - GitHubgithub.com â€º nobody132 â€º masr</a></li><li><a href="https://github.com/nl8590687/ASRT_SpeechRecognition" target="_blank" rel="noopener">nl8590687/ASRT_SpeechRecognition: A Deep â€¦ - GitHubgithub.com â€º ASRT_SpeechRecognition</a></li><li><a href="https://github.com/audier/DeepSpeechRecognition" target="_blank" rel="noopener">audier/DeepSpeechRecognition: A Chinese Deep â€¦ - GitHubgithub.com â€º audier â€º DeepSpeechRecognition</a></li><li><a href="https://github.com/xxbb1234021/speech_recognition" target="_blank" rel="noopener">xxbb1234021/speech_recognition: ä¸­æ–‡è¯­éŸ³è¯†åˆ« - GitHubgithub.com â€º xxbb1234021 â€º speech_recognition</a></li><li><a href="https://www.pythonf.cn/read/138089" target="_blank" rel="noopener">ä»è§†é¢‘ä¸­æå–éŸ³é¢‘â€”â€”Pythonä¸‰è¡Œç¨‹åº,çš„,python,æå®šwww.pythonf.cn â€º read</a></li><li><a href="https://zhuanlan.zhihu.com/p/32085405" target="_blank" rel="noopener">äººäººéƒ½èƒ½çœ‹æ‡‚çš„LSTM - çŸ¥ä¹zhuanlan.zhihu.com â€º â€¦</a></li><li><a href="https://deepspeech.readthedocs.io/en/v0.9.3/?badge=latest" target="_blank" rel="noopener">deepspeeché¡¹ç›®</a>ï¼š<code>star:16.9k</code></li><li>ä½¿ç”¨<code>google</code>æ¥å£è¿›è¡Œè¯­éŸ³è¯†åˆ«ï¼š<a href="https://github.com/Uberi/speech_recognition" target="_blank" rel="noopener">speech_recognition</a></li><li>ç›¸å…³paper: <a href="https://github.com/zzw922cn/awesome-speech-recognition-speech-synthesis-papers#Automatic-Speech-Recognition" target="_blank" rel="noopener">GitHub</a></li><li><a href="https://github.com/topics/speech-recognition?o=desc&amp;s=stars" target="_blank" rel="noopener">github speech recognition topicsæ’è¡Œæ¦œ</a></li><li><a href="https://github.com/athena-team/athena" target="_blank" rel="noopener">æ»´æ»´è¯­éŸ³è¯†åˆ«å¼€æº</a></li><li><a href="https://github.com/wenet-e2e/wenet" target="_blank" rel="noopener">2021æœ€æ–°è¯­éŸ³è¯†åˆ«å¼€æºWENET</a></li></ol><h1 id="ä¸OKçš„é¡¹ç›®"><a href="#ä¸OKçš„é¡¹ç›®" class="headerlink" title="ä¸OKçš„é¡¹ç›®"></a>ä¸OKçš„é¡¹ç›®</h1><ol><li><a href="https://github.com/xxbb1234021/speech_recognition" target="_blank" rel="noopener">speech_recognition</a></li></ol><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="è§†é¢‘æå–éŸ³é¢‘"><a href="#è§†é¢‘æå–éŸ³é¢‘" class="headerlink" title="è§†é¢‘æå–éŸ³é¢‘"></a>è§†é¢‘æå–éŸ³é¢‘</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python"># -*- coding:utf-8 _*-"""Author: Email: Date: 2021/03/23File: audio_test.pySoftware: PyCharmDescription: éŸ³é¢‘è¯†åˆ«"""# load modulesimport osimport sysfrom moviepy.editor import AudioFileClipcurrent_path = sys.path[0]video_path = '%s/video/' % current_path  # è§†é¢‘æºæ–‡ä»¶ç›®å½•video_name = os.listdir(video_path)[0]audio_path = '%s/audio_extracts/' % current_path  # éŸ³é¢‘æå–æ–‡ä»¶ç›®å½•if not os.path.exists(audio_path):    os.mkdir(audio_path)audio_name = video_name.split('.')[0] + '.wav'# éŸ³é¢‘æå–my_audio_clip = AudioFileClip(video_path+video_name)my_audio_clip.write_audiofile(audio_path+audio_name)# éŸ³é¢‘åˆ†æimport numpy as npimport librosaaudio, freq = librosa.load(audio_path+audio_name)time = np.arange(0, len(audio)) / freqprint(len(audio), type(audio), freq, sep="\t")# ç”»ä¿¡å·å¢å¼ºå›¾import librosa.displayimport matplotlib.pyplot as pltaudio, _ = librosa.effects.trim(audio)  # Trim leading and trailing #silence from an audio signal.librosa.display.waveplot(audio, sr=freq)plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="éŸ³é¢‘è¯†åˆ«"><a href="#éŸ³é¢‘è¯†åˆ«" class="headerlink" title="éŸ³é¢‘è¯†åˆ«"></a>éŸ³é¢‘è¯†åˆ«</h2><h3 id="ä½¿ç”¨æ¥å£"><a href="#ä½¿ç”¨æ¥å£" class="headerlink" title="ä½¿ç”¨æ¥å£"></a>ä½¿ç”¨æ¥å£</h3><ul><li><a href="https://app.xunjiepdf.com/voice2text/" target="_blank" rel="noopener">è¿…æ·PDFè½¬æ¢å™¨</a>ï¼šå…è´¹ï¼Œæ•ˆæœè¿˜è¡Œ</li><li><a href="https://jianwai.youdao.com/index/0" target="_blank" rel="noopener">ç½‘æ˜“è§å¤–</a>ï¼šå…è´¹ï¼Œæ•ˆæœä¸€èˆ¬</li></ul><p><a href="https://github.com/topics/speech-recognition" target="_blank" rel="noopener">speech-recognition</a>ï¼šéŸ³é¢‘è¯†åˆ«ç›¸å…³topic</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯­éŸ³è¯†åˆ« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹CNN</title>
      <link href="/2021/03/22/shen-du-xue-xi-zhi-cnn/"/>
      <url>/2021/03/22/shen-du-xue-xi-zhi-cnn/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="http://neuralnetworksanddeeplearning.com/chap6.html#introducing_convolutional_networks" target="_blank" rel="noopener">ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ </a></li><li><a href="https://www.zhihu.com/question/52668301" target="_blank" rel="noopener">çŸ¥ä¹</a></li></ol><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> CNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹TensorFlowå®‰è£…</title>
      <link href="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/"/>
      <url>/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210621153613138.png" alt="image-20210621153613138"></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://zhuanlan.zhihu.com/p/35717544" target="_blank" rel="noopener">windows tensorflow-gpuçš„å®‰è£…</a></li><li><a href="https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html#install-windows" target="_blank" rel="noopener">å®˜ç½‘</a></li></ul><h1 id="windowså®‰è£…"><a href="#windowså®‰è£…" class="headerlink" title="windowså®‰è£…"></a>windowså®‰è£…</h1><h2 id="å…ˆæ›´æ–°æ˜¾å¡é©±åŠ¨"><a href="#å…ˆæ›´æ–°æ˜¾å¡é©±åŠ¨" class="headerlink" title="å…ˆæ›´æ–°æ˜¾å¡é©±åŠ¨"></a>å…ˆæ›´æ–°æ˜¾å¡é©±åŠ¨</h2><ul><li><p>å³é”®æ›´æ–°æ˜¾å¡é©±åŠ¨</p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320115932959.png" alt="image-20210320115932959"></p></li></ul><h2 id="æŸ¥çœ‹æ˜¾å¡é©±åŠ¨å¯¹åº”cudaç‰ˆæœ¬"><a href="#æŸ¥çœ‹æ˜¾å¡é©±åŠ¨å¯¹åº”cudaç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹æ˜¾å¡é©±åŠ¨å¯¹åº”cudaç‰ˆæœ¬"></a>æŸ¥çœ‹æ˜¾å¡é©±åŠ¨å¯¹åº”<code>cuda</code>ç‰ˆæœ¬</h2><ul><li><p>æ¡Œé¢å³é”®æ˜¾å¡æ§åˆ¶é¢æ¿</p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320120246190.png" alt="image-20210320120246190"></p></li></ul><h2 id="ä¸‹è½½å®‰è£…cuda"><a href="#ä¸‹è½½å®‰è£…cuda" class="headerlink" title="ä¸‹è½½å®‰è£…cuda"></a>ä¸‹è½½å®‰è£…<code>cuda</code></h2><ul><li><p><a href="https://developer.nvidia.com/cuda-toolkit-archive" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a>ï¼šéå¸¸ä¹‹æ…¢</p></li><li><p><a href="https://developer.nvidia.com/zh-cn/cuda-downloads" target="_blank" rel="noopener">ä¸‹è½½åœ°å€2</a></p></li><li><p><a href="https://blog.csdn.net/XunCiy/article/details/89070315" target="_blank" rel="noopener">å®‰è£…å‚è€ƒåœ°å€</a></p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320153609006.png" alt="image-20210320153609006"></p></li><li><p>ä»¥ä¸‹ä¸¤ä¸ªåœ°æ–¹æ³¨æ„æ¯”é€‰å°±è¡Œ</p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320122925046.png" alt="image-20210320122925046"></p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320122936325.png" alt="image-20210320122936325"></p></li></ul><h2 id="æŸ¥çœ‹cudaå¯¹åº”çš„cudnnç‰ˆæœ¬"><a href="#æŸ¥çœ‹cudaå¯¹åº”çš„cudnnç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹cudaå¯¹åº”çš„cudnnç‰ˆæœ¬"></a>æŸ¥çœ‹<code>cuda</code>å¯¹åº”çš„<code>cudnn</code>ç‰ˆæœ¬</h2><ul><li><p><a href="https://www.tensorflow.org/install/source_windows#gpu" target="_blank" rel="noopener">åœ°å€</a></p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320121040837.png" alt="image-20210320121040837"></p></li></ul><h2 id="ä¸‹è½½å®‰è£…cudnn"><a href="#ä¸‹è½½å®‰è£…cudnn" class="headerlink" title="ä¸‹è½½å®‰è£…cudnn"></a>ä¸‹è½½å®‰è£…<code>cudnn</code></h2><ul><li><p><a href="https://developer.nvidia.com/zh-cn/cudnn" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a>ï¼šéœ€è¦ç™»å½•</p></li><li><p><a href="https://developer.nvidia.cn/rdp/cudnn-download" target="_blank" rel="noopener">ä¸‹è½½åœ°å€2</a></p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320162205564.png" alt="image-20210320162205564"></p></li><li><p>å®‰è£…</p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320163021436.png" alt="image-20210320163021436"></p></li></ul><h2 id="å®‰è£…tensorflow-gpu"><a href="#å®‰è£…tensorflow-gpu" class="headerlink" title="å®‰è£…tensorflow-gpu"></a>å®‰è£…<code>tensorflow-gpu</code></h2><ul><li><p>æ ¹æ®<code>cuda</code>å¯¹åº”ç‰ˆæœ¬å®‰è£…<code>tf</code>çš„å¯¹åº”ç‰ˆæœ¬ï¼Œä½¿ç”¨<code>pycharm</code>å®‰è£…</p><p><img src="/2021/03/20/shen-du-xue-xi-zhi-tensorflow-an-zhuang/image-20210320163946401.png" alt="image-20210320163946401"></p></li></ul><h2 id="æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ"></a>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">import tensorflow as tfprint(tf.__version__)print('GPU', tf.test.is_gpu_available())# output# GPU [PhysicalDevice(name='/physical_device:GPU:0', device_type='GPU')]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å‡ºç°ä»¥ä¸‹æŠ¥é”™æ—¶ï¼š</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">2021-03-20 16:51:38.885475: W tensorflow/stream_executor/platform/default/dso_loader.cc:60] Could not load dynamic library 'cusolver64_10.dll'; dlerror: cusolver64_10.dll not found<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å°†<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\vx.x\bin</code>ç›®å½•ä¸‹çš„<code>cusolver64_11.dll</code>å¤åˆ¶ï¼Œå¹¶å°†å‰¯æœ¬æ”¹åä¸º<code>cusolver64_10.dll</code></p></li></ul><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><ol><li>æ˜¾å¡æœ‰å¯¹åº”çš„æ˜¾å¡é©±åŠ¨</li><li>æ˜¾å¡é©±åŠ¨å¯¹åº”<code>cuda</code>çš„ç‰ˆæœ¬</li><li>æ ¹æ®<code>cuda</code>çš„ç‰ˆæœ¬å¯¹åº”<code>cudnn</code>ã€<code>tf</code>ç‰ˆæœ¬</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®‰è£…æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹åˆ†ç±»</title>
      <link href="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/"/>
      <url>/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="chrome-extension://cdonnmffkdaoajfknoeeecmchibpmkmg/assets/pdf/web/viewer.html?file=http%3A%2F%2Findex-of.es%2FVarios-2%2FHands%2520on%2520Machine%2520Learning%2520with%2520Scikit%2520Learn%2520and%2520Tensorflow.pdf" target="_blank" rel="noopener">hands on machine learning with scikit-learn and tensorflow</a></li><li><a href="https://github.com/ageron/handson-ml" target="_blank" rel="noopener">å‚è€ƒä¹¦ä»£ç </a></li><li><a href="https://github.com/ageron/handson-ml2" target="_blank" rel="noopener">å‚è€ƒä¹¦ä»£ç 2</a></li></ul><h1 id="ä¸‰ã€åˆ†ç±»"><a href="#ä¸‰ã€åˆ†ç±»" class="headerlink" title="ä¸‰ã€åˆ†ç±»"></a>ä¸‰ã€åˆ†ç±»</h1><pre class="line-numbers language-lang-python"><code class="language-lang-python"># !jupyter labextension install @jupyterlab/toc# Python â‰¥3.5 is requiredimport sysassert sys.version_info >= (3, 5)# Scikit-Learn â‰¥0.20 is requiredimport sklearnassert sklearn.__version__ >= "0.20"# Common importsimport numpy as npimport os# to make this notebook's output stable across runsnp.random.seed(42)# To plot pretty figures%matplotlib inlineimport matplotlib as mplimport matplotlib.pyplot as pltmpl.rc('axes', labelsize=14)mpl.rc('xtick', labelsize=12)mpl.rc('ytick', labelsize=12)# Where to save the figuresPROJECT_ROOT_DIR = "."CHAPTER_ID = "classification"IMAGES_PATH = os.path.join(PROJECT_ROOT_DIR, "images", CHAPTER_ID)os.makedirs(IMAGES_PATH, exist_ok=True)def save_fig(fig_id, tight_layout=True, fig_extension="png", resolution=300):    path = os.path.join(IMAGES_PATH, fig_id + "." + fig_extension)    print("Saving figure", fig_id)    if tight_layout:        plt.tight_layout()    plt.savefig(path, format=fig_extension, dpi=resolution)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="MNIST"><a href="#MNIST" class="headerlink" title="MNIST"></a>MNIST</h2><h3 id="ä½¿ç”¨ä»£ç ä¸‹è½½è¯¥æ•°æ®é›†"><a href="#ä½¿ç”¨ä»£ç ä¸‹è½½è¯¥æ•°æ®é›†" class="headerlink" title="ä½¿ç”¨ä»£ç ä¸‹è½½è¯¥æ•°æ®é›†"></a>ä½¿ç”¨ä»£ç ä¸‹è½½è¯¥æ•°æ®é›†</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.datasets import fetch_openml# Load data from https://www.openml.org/d/554X, y = fetch_openml('mnist_784', version=1, return_X_y=True, as_frame=False)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(X.shape)print(y.shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>(70000, 784)(70000,)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">import matplotlib as mplimport matplotlib.pyplot as pltdef digit_show(some_digit):    some_digit_image = some_digit.reshape(28,28)    plt.imshow(some_digit_image, cmap=mpl.cm.binary, interpolation="nearest")    plt.axis("off")    plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">digit_show(X[0])print(y[0])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/output_6_0.png" alt="output_6_0"></p><pre><code>5</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y[0]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>&#39;5&#39;</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y=y.astype(np.uint8)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y[0]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>5</code></pre><h3 id="åˆ’åˆ†è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€å°†æµ‹è¯•é›†æ”¾ä¸€è¾¹"><a href="#åˆ’åˆ†è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€å°†æµ‹è¯•é›†æ”¾ä¸€è¾¹" class="headerlink" title="åˆ’åˆ†è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€å°†æµ‹è¯•é›†æ”¾ä¸€è¾¹"></a>åˆ’åˆ†è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€å°†æµ‹è¯•é›†æ”¾ä¸€è¾¹</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python"># # å…ˆshuffle# import random# combined = list(zip([1,2,3], [4,5,6]))# random.shuffle(combined)# list(zip(*combined))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[(3, 2, 1), (6, 5, 4)]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># åˆ’åˆ†index = 60000X_train, X_test, y_train, y_test = X[:index], X[index:], y[:index], y[index:]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="è®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»å™¨"><a href="#è®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»å™¨" class="headerlink" title="è®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»å™¨"></a>è®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»å™¨</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">y_train_5 = (y_train == 5)y_test_5 = (y_test == 5)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.linear_model import SGDClassifiersgd_clf = SGDClassifier(random_state=42)sgd_clf.fit(X_train, y_train_5)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>SGDClassifier(random_state=42)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(sgd_clf.predict([X_train[0]]))print(y_train[0])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>[ True]5</code></pre><h3 id="perfomance-measures-è¯„ä¼°è¡¨ç°"><a href="#perfomance-measures-è¯„ä¼°è¡¨ç°" class="headerlink" title="perfomance measures:è¯„ä¼°è¡¨ç°"></a>perfomance measures:è¯„ä¼°è¡¨ç°</h3><ol><li>ç”¨CVæ¥è¯„ä¼°ï¼šcross_val_score()</li><li>confusion matrix:æ··æ·†çŸ©é˜µ<ul><li>precision and recall</li></ul></li></ol><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.model_selection import cross_val_scorecross_val_score(sgd_clf, X_train, y_train_5, cv=3, scoring='accuracy')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([0.95035, 0.96035, 0.9604 ])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># å¾—çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸¥é‡ä¸å¹³è¡¡from sklearn.base import BaseEstimatorclass Never5Classifier(BaseEstimator):    def fit(self, X, y=None):        pass    def predict(self, X):        return np.zeros((len(X), 1), dtype=bool)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">never_5_clf = Never5Classifier()cross_val_score(never_5_clf, X_train, y_train_5, cv=3, scoring='accuracy')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([0.91125, 0.90855, 0.90915])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ä½¿ç”¨æ··æ·†çŸ©é˜µfrom sklearn.model_selection import cross_val_predictfrom sklearn.metrics import confusion_matrixy_train_pred = cross_val_predict(sgd_clf, X_train, y_train_5, cv=3)confusion_matrix(y_train_5, y_train_pred)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([[53892,   687],       [ 1891,  3530]], dtype=int64)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y_train_pred<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([ True, False, False, ...,  True, False, False])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># precision ã€recall and f1_scorefrom sklearn.metrics import precision_score, recall_score, f1_scoreprint(precision_score(y_train_5, y_train_pred))print(recall_score(y_train_5, y_train_pred))print(f1_score(y_train_5, y_train_pred))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>0.83708797723500120.65117137059583110.7325171197343846</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># precision_recall curvey_scores = cross_val_predict(sgd_clf, X_train, y_train_5, cv=3, method='decision_function')from sklearn.metrics import precision_recall_curveprecisions, recalls, thresholds = precision_recall_curve(y_train_5, y_scores)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def plot_precision_recall_vs_threhold(precisions, recalls, thresholds):    plt.plot(thresholds, precisions[:-1], 'b--', label='Precision')    plt.plot(thresholds, recalls[:-1], 'g-', label='Recall')    plt.legend(loc='best')    plt.tight_layout()    plt.show()plot_precision_recall_vs_threhold(precisions, recalls, thresholds)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â€‹<br><img src="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/output_25_0.png" alt="output_25_0"><br>â€‹    </p><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ä½¿ç²¾ç¡®ç‡è¾¾åˆ°90%çš„é˜ˆå€¼threshold_90_precision = thresholds[np.argmax(precisions >= 0.90)]y_train_pred_90 = (y_scores >= threshold_90_precision)print(precision_score(y_train_5, y_train_pred_90))print(recall_score(y_train_5, y_train_pred_90))print(f1_score(y_train_5, y_train_pred_90))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>0.90003459010722930.47998524257517060.626082771896054</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># roc_curvefrom sklearn.metrics import roc_curvefpr, tpr, thresholds = roc_curve(y_train_5, y_scores)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def plot_roc_curve(fpr, tpr, label=None):    plt.plot(fpr, tpr, linewidth=2, label=label)    plt.plot([0,1], [0,1], 'k--')    plt.xlabel('False Positive Rate')    plt.ylabel('True Positive Rate')    plt.grid()plot_roc_curve(fpr, tpr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/output_28_0.png" alt="output_28_0"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.metrics import roc_auc_scoreroc_auc_score(y_train_5, y_scores)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>0.9604938554008616</code></pre><h3 id="éšæœºæ£®æ—"><a href="#éšæœºæ£®æ—" class="headerlink" title="éšæœºæ£®æ—"></a>éšæœºæ£®æ—</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.ensemble import RandomForestClassifier<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">forest_clf = RandomForestClassifier(random_state=42)y_probas_forest = cross_val_predict(forest_clf, X_train, y_train_5, cv=3, method='predict_proba')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y_scores_forest = y_probas_forest[:, 1]fpr_forest, tpr_forest, thresholds_forest = roc_curve(y_train_5, y_scores_forest)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">plt.plot(fpr, tpr,linewidth=2, label='SGD')plot_roc_curve(fpr_forest, tpr_forest, label='RF')plt.legend()plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>â€‹<br><img src="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/output_34_0.png" alt="output_34_0"><br>â€‹    </p><pre class="line-numbers language-lang-python"><code class="language-lang-python">print(roc_auc_score(y_train_5, y_scores_forest))print(precision_score(y_train_5, y_scores_forest>=0.5))print(recall_score(y_train_5, y_scores_forest>=0.5))print(f1_score(y_train_5, y_scores_forest>=0.5))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>0.99834367313281450.98974680895584850.87253274303634020.9274509803921569</code></pre><h3 id="äºŒåˆ†ç±»æ€»ç»“"><a href="#äºŒåˆ†ç±»æ€»ç»“" class="headerlink" title="äºŒåˆ†ç±»æ€»ç»“"></a>äºŒåˆ†ç±»æ€»ç»“</h3><ol><li>é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è¯„ä¼°æŒ‡æ ‡</li><li>ç”¨CVäº¤å‰éªŒè¯æ¥æ‰§è¡Œåˆ†ç±»æ¨¡å‹</li><li>é€‰æ‹©precision\recallæ¥é¿å…é™·é˜±</li><li>ç”¨rocå’Œaucæ¯”è¾ƒä¸åŒæ¨¡å‹</li></ol><h3 id="å¤šç±»åˆ«åˆ†ç±»"><a href="#å¤šç±»åˆ«åˆ†ç±»" class="headerlink" title="å¤šç±»åˆ«åˆ†ç±»"></a>å¤šç±»åˆ«åˆ†ç±»</h3><ul><li>ä¸€ä¸ªè¡Œè®°å½•åªå±äºå¤šç±»åˆ«ä¸­çš„ä¸€ä¸ªç±»åˆ«</li></ul><ol><li>ovoï¼šæ‹†æˆN*(N-1)/2ä¸ªåˆ†ç±»ï¼Œä¾‹å¦‚ç±»åˆ«1vsç±»åˆ«2ï¼Œç±»åˆ«1vsç±»åˆ«3ï¼Œâ€¦</li><li>ovr: æ‹†æˆNä¸ªåˆ†ç±»ï¼Œä¾‹å¦‚ç±»åˆ«1vså‰©ä¸‹ï¼Œç±»åˆ«2vså‰©ä¸‹ï¼Œâ€¦</li></ol><pre class="line-numbers language-lang-python"><code class="language-lang-python">sgd_clf = SGDClassifier(random_state=42)sgd_clf.fit(X_train, y_train)some_digit = X_train[0]sgd_clf.predict([some_digit])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([3], dtype=uint8)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">some_digit_scores = sgd_clf.decision_function([some_digit])some_digit_scores<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([[-31893.03095419, -34419.69069632,  -9530.63950739,          1823.73154031, -22320.14822878,  -1385.80478895,        -26188.91070951, -16147.51323997,  -4604.35491274,        -12050.767298  ]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">np.argmax(some_digit_scores)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>3</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">sgd_clf.classes_<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=uint8)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># cross_val_score(sgd_clf, X_train, y_train, cv=3, scoring='accuracy')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æ ‡å‡†åŒ–å¤„ç†from sklearn.preprocessing import StandardScaler<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># scaler = StandardScaler()# X_train_scaled = scaler.fit_transform(X_train.astype(np.float64))# cross_val_score(sgd_clf, X_train_scaled, y_train, cv=3, scoring='accuracy')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="é”™è¯¯ç‡åˆ†æ"><a href="#é”™è¯¯ç‡åˆ†æ" class="headerlink" title="é”™è¯¯ç‡åˆ†æ"></a>é”™è¯¯ç‡åˆ†æ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python"># scaler = StandardScaler()# X_train_scaled = scaler.fit_transform(X_train.astype(np.float64))# y_train_pred = cross_val_predict(sgd_clf, X_train_scaled, y_train, cv = 3)# conf_mx = confusion_matrix(y_train, y_train_pred)# conf_mx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># plt.matshow(conf_mx, cmap=plt.cm.gray)# plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># row_sums = conf_mx.sum(axis=1, keepdims=True)# norm_conf_mx = conf_mx / row_sums# np.fill_diagonal(norm_conf_mx, 0)# plt.matshow(norm_conf_mx, cmap=plt.cm.gray)# plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># # åˆ†æ3ã€5çš„å·®åˆ«# def plot_digits(instances, images_per_row=10, **options): #     size = 28 #     images_per_row = min(len(instances), images_per_row) #     images = [instance.reshape(size,size) for instance in instances] #     n_rows = (len(instances) - 1) // images_per_row + 1 #     row_images = [] #     n_empty = n_rows * images_per_row - len(instances) #     images.append(np.zeros((size, size * n_empty)))  #     for row in range(n_rows): #         rimages = images[row * images_per_row : (row + 1) * images_per_row] #         row_images.append(np.concatenate(rimages, axis=1)) #     image = np.concatenate(row_images, axis=0) #     plt.imshow(image, cmap = plt.cm.binary, **options) #     plt.axis("off")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># cl_a, cl_b = 3, 5# X_aa = X_train[(y_train == cl_a) & (y_train_pred == cl_a)]# X_ab = X_train[(y_train == cl_a) & (y_train_pred == cl_b)]# X_bb = X_train[(y_train == cl_b) & (y_train_pred == cl_b)]# X_ba = X_train[(y_train == cl_b) & (y_train_pred == cl_a)]# plt.figure(figsize=(8,8))# plt.subplot(221); plot_digits(X_aa[:25], images_per_row=5)# plt.subplot(222); plot_digits(X_ab[:25], images_per_row=5)# plt.subplot(223); plot_digits(X_ba[:25], images_per_row=5)# plt.subplot(224); plot_digits(X_bb[:25], images_per_row=5)# plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¤šæ ‡ç­¾åˆ†ç±»"><a href="#å¤šæ ‡ç­¾åˆ†ç±»" class="headerlink" title="å¤šæ ‡ç­¾åˆ†ç±»"></a>å¤šæ ‡ç­¾åˆ†ç±»</h3><ul><li>ä¸€ä¸ªè¡Œè®°å½•å¯èƒ½å±äºå¤šä¸ªç±»åˆ«ï¼Œä¾‹å¦‚ä¸€ä¸ªäººæ˜¯ç”·äººã€å¾‹å¸ˆ</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.neighbors import KNeighborsClassifier<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">y_train_large = (y_train >= 7)y_train_odd = (y_train % 2 == 1)y_multilabel = np.c_[y_train_large, y_train_odd]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">knn_clf = KNeighborsClassifier()knn_clf.fit(X_train, y_multilabel)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>KNeighborsClassifier()</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">knn_clf.predict([some_digit])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>array([[False,  True]])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">digit_show(some_digit)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/output_55_0.png" alt="output_55_0"></p><h4 id="è¯„ä¼°å¤šæ ‡ç­¾åˆ†ç±»å™¨"><a href="#è¯„ä¼°å¤šæ ‡ç­¾åˆ†ç±»å™¨" class="headerlink" title="è¯„ä¼°å¤šæ ‡ç­¾åˆ†ç±»å™¨"></a>è¯„ä¼°å¤šæ ‡ç­¾åˆ†ç±»å™¨</h4><ul><li>ä¸€ä¸ªæ–¹æ³•æ˜¯å¯¹æ¯ä¸ªä¸ªä½“æ ‡ç­¾åº¦é‡F1_scoreï¼Œç„¶åè®¡ç®—å¹³å‡å€¼</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">y_train_knn_pred = cross_val_predict(knn_clf, X_train, y_multilabel, cv=3)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">f1_score(y_multilabel, y_train_knn_pred, average='macro')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>0.976410265560605</code></pre><h3 id="å¤šè¾“å‡º-å¤šç±»åˆ†ç±»"><a href="#å¤šè¾“å‡º-å¤šç±»åˆ†ç±»" class="headerlink" title="å¤šè¾“å‡º-å¤šç±»åˆ†ç±»"></a>å¤šè¾“å‡º-å¤šç±»åˆ†ç±»</h3><ul><li>ä¸€ä¸ªæ ‡ç­¾å¯ä»¥æ˜¯å¤šç±»åˆ«çš„</li><li>ä¾‹å¦‚ï¼šåˆ†ç±»å™¨çš„è¾“å‡ºæ˜¯å¤šæ ‡ç­¾ï¼ˆä¸€ä¸ªåƒç´ ä¸€ä¸ªæ ‡ç­¾ï¼‰ï¼Œè€Œæ¯ä¸ªæ ‡ç­¾å¯ä»¥æœ‰å¤šä¸ªå€¼ï¼Œç±»æ ‡ç­¾å’Œå€¼æ ‡ç­¾</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">noise = np.random.randint(0, 100, (len(X_train), 784))X_train_mod = X_train + noisey_train_mod = X_trainnoise = np.random.randint(0, 100, (len(X_test), 784))X_test_mod = X_test + noisey_test_mod = X_test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">knn_clf = KNeighborsClassifier()knn_clf.fit(X_train_mod, y_train_mod)clean_digit = knn_clf.predict([X_test_mod[0]])digit_show(clean_digit)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/output_61_0.png" alt="output_61_0"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">digit_show(X_test_mod[0])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-fen-lei/output_62_0.png" alt="output_62_0"></p><h2 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h2><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><ol><li>å°è¯•åœ¨MNISTæ•°æ®é›†ä¸Šå»ºç«‹ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œä½¿å®ƒåœ¨æµ‹è¯•é›†ä¸Šçš„ç²¾åº¦è¶…è¿‡97%<ul><li>æç¤ºï¼šä½¿ç”¨KNeighborsClassifierï¼Œæ‰¾å‡ºä¸€ä¸ªå¥½çš„è¶…å‚æ•°ï¼Œï¼ˆå¯¹æƒé‡å’Œè¶…å‚æ•°n_neighborsè¿›è¡Œç½‘æ ¼æœç´¢ï¼‰</li></ul></li></ol><pre class="line-numbers language-lang-python"><code class="language-lang-python"># å¯¼å…¥æ•°æ®# from sklearn.datasets import fetch_openml# # Load data from https://www.openml.org/d/554# X, y = fetch_openml('mnist_784', version=1, return_X_y=True, as_frame=False)from sklearn.datasets import fetch_openmlX, y = fetch_openml('mnist_784', version=1, return_X_y=True, as_frame=False)print(X.shape, y.shape)# åˆ’åˆ†è®­ç»ƒé›†ã€æµ‹è¯•é›†import numpy as npy = y.astype(np.uint8)index = 55000X_train, y_train, X_test, y_test = X[:index], y[:index], X[index:], y[index:]print(X_train.shape, y_train.shape, X_test.shape, y_test.shape)# ç”»å›¾æŸ¥çœ‹å…¶ä¸­ä¸€æ¡è®°å½•import matplotlib as mplimport matplotlib.pyplot as pltindex = 0tmp = X[index].reshape((28, 28))plt.imshow(tmp, cmap=mpl.cm.binary, interpolation='nearest')plt.axis('off')plt.show()y[0]# å»ºç«‹åˆ†ç±»å™¨y_train_5 = (y_train == 5)y_test_5 = (y_test == 5)from sklearn.neighbors import KNeighborsClassifierknn_clf = KNeighborsClassifier()knn_clf.fit(X_train, y_train_5)pred = knn_clf.predict(X_test)from sklearn.metrics import confusion_matrixconfusion_matrix(y_test_5, pred)from sklearn.metrics import precision_score, recall_score, f1_score, accuracy_scoreprint(accuracy_score(y_test_5, pred))print(precision_score(y_test_5, pred))print(recall_score(y_test_5, pred))print(f1_score(y_test_5, pred))# ä½¿ç”¨gridcvæ¥è¿›è¡Œè¶…å‚æ•°ç­›é€‰from sklearn.model_selection import GridSearchCVpara_grid = [{'n_neighbors': [3,4,5], 'weights': ['uniform', 'distance']}]knn_fit = KNeighborsClassifier()grid_search = GridSearchCV(knn_fit, para_grid, cv=5)grid_search.fit(X_train, y_train_5)print(grid_search.best_params_)print(grid_search.best_estimator_)# è¯„ä¼°è¯„åˆ†cvres = grid_search.cv_results_for mean_score, params in zip(cvres['mean_test_score'], cvres['params']):    print(np.sqrt(mean_score), params)# é¢„æµ‹pred = grid_search.predict(X_test)from sklearn.metrics import precision_score, recall_score, f1_score, accuracy_scoreprint(accuracy_score(y_test_5, pred))print(precision_score(y_test_5, pred))print(recall_score(y_test_5, pred))print(f1_score(y_test_5, pred))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><ol><li>æ‹¿Titanic æ•°æ®é›†å»æ£é¼“ä¸€ç•ªã€‚å¼€å§‹è¿™ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªå¾ˆæ£’çš„å¹³å°ï¼šKaggleï¼</li></ol>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> åˆ†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹ä¸€ä¸ªå®Œæ•´é¡¹ç›®</title>
      <link href="/2021/03/19/ji-qi-xue-xi-zhi-yi-ge-wan-zheng-xiang-mu/"/>
      <url>/2021/03/19/ji-qi-xue-xi-zhi-yi-ge-wan-zheng-xiang-mu/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="chrome-extension://cdonnmffkdaoajfknoeeecmchibpmkmg/assets/pdf/web/viewer.html?file=http%3A%2F%2Findex-of.es%2FVarios-2%2FHands%2520on%2520Machine%2520Learning%2520with%2520Scikit%2520Learn%2520and%2520Tensorflow.pdf" target="_blank" rel="noopener">hands on machine learning with scikit-learn and tensorflow</a></li><li><a href="https://github.com/ageron/handson-ml" target="_blank" rel="noopener">å‚è€ƒä¹¦ä»£ç </a></li><li><a href="https://github.com/ageron/handson-ml2" target="_blank" rel="noopener">å‚è€ƒä¹¦ä»£ç 2</a></li></ul><h1 id="ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®"><a href="#ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®" class="headerlink" title="ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®"></a>ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®</h1><h2 id="ä¸»è¦æ­¥éª¤"><a href="#ä¸»è¦æ­¥éª¤" class="headerlink" title="ä¸»è¦æ­¥éª¤"></a>ä¸»è¦æ­¥éª¤</h2><ol><li>é¡¹ç›®æ¦‚è¿°</li><li>è·å–æ•°æ®</li><li>å‘ç°å¹¶å¯è§†åŒ–æ•°æ®ï¼Œå‘ç°è§„å¾‹</li><li>ä¸ºæœºå™¨å­¦ä¹ ç®—æ³•å‡†å¤‡æ•°æ®</li><li>é€‰æ‹©æ¨¡å‹ï¼Œè¿›è¡Œè®­ç»ƒ</li><li>å¾®è°ƒæ¨¡å‹</li><li>ç»™å‡ºè§£å†³æ–¹æ¡ˆ</li><li>éƒ¨ç½²ã€ç›‘æ§ã€ç»´æŠ¤ç³»ç»Ÿ</li></ol><h2 id="ä½¿ç”¨çœŸå®æ•°æ®"><a href="#ä½¿ç”¨çœŸå®æ•°æ®" class="headerlink" title="ä½¿ç”¨çœŸå®æ•°æ®"></a>ä½¿ç”¨çœŸå®æ•°æ®</h2><ul><li>æµè¡Œçš„å¼€æºæ•°æ®ä»“åº“<ul><li><a href="http://archive.ics.uci.edu/ml/index.php" target="_blank" rel="noopener">UCI</a></li><li><a href="https://www.kaggle.com/datasets" target="_blank" rel="noopener">Kaggle</a></li><li><a href="https://registry.opendata.aws/" target="_blank" rel="noopener">Amazon AWS</a></li></ul></li><li>å‡†å…¥å£ï¼ˆæä¾›å¼€æºæ•°æ®åˆ—è¡¨ï¼‰<ul><li><a href="http://dataportals.org/search" target="_blank" rel="noopener">dataportals</a></li><li><a href="https://opendatamonitor.eu/frontend/web/index.php?r=dashboard%2Findex" target="_blank" rel="noopener">opendatamonitor</a></li><li><a href="https://www.quandl.com/" target="_blank" rel="noopener">quandl</a></li></ul></li><li>å…¶ä»–<ul><li><a href="https://en.wikipedia.org/wiki/List_of_datasets_for_machine-learning_research" target="_blank" rel="noopener">wikipedia</a></li><li><a href="https://www.quora.com/Where-can-I-find-large-datasets-open-to-the-public" target="_blank" rel="noopener">quora</a></li><li><a href="https://www.reddit.com/r/datasets/" target="_blank" rel="noopener">reddit</a></li></ul></li></ul><h2 id="é¡¹ç›®æ¦‚è§ˆ"><a href="#é¡¹ç›®æ¦‚è§ˆ" class="headerlink" title="é¡¹ç›®æ¦‚è§ˆ"></a>é¡¹ç›®æ¦‚è§ˆ</h2><ul><li>åˆ©ç”¨åŠ å·æ™®æŸ¥æ•°æ®ï¼Œå»ºç«‹ä¸€ä¸ªåŠ å·æˆ¿ä»·æ¨¡å‹ã€‚è¿™ä¸ªæ•°æ®åŒ…å«æ¯ä¸ªè¡—åŒºç»„çš„äººå£ã€æ”¶å…¥ä¸­ä½æ•°ã€æˆ¿ä»·ä¸­ä½æ•°ç­‰æŒ‡æ ‡ã€‚</li></ul><h3 id="åˆ’å®šé—®é¢˜"><a href="#åˆ’å®šé—®é¢˜" class="headerlink" title="åˆ’å®šé—®é¢˜"></a>åˆ’å®šé—®é¢˜</h3><h4 id="æå‡ºé—®é¢˜"><a href="#æå‡ºé—®é¢˜" class="headerlink" title="æå‡ºé—®é¢˜"></a>æå‡ºé—®é¢˜</h4><ul><li>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå•†ä¸šç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ã€å¹¶ä»æ¨¡å‹å—ç›Šï¼Ÿ</li><li>ç¬¬äºŒä¸ªé—®é¢˜ï¼šç°åœ¨çš„è§£å†³æ–¹æ¡ˆæ•ˆæœå¦‚ä½•ï¼Ÿ</li></ul><h4 id="åˆ’å®šé—®é¢˜-1"><a href="#åˆ’å®šé—®é¢˜-1" class="headerlink" title="åˆ’å®šé—®é¢˜"></a>åˆ’å®šé—®é¢˜</h4><ul><li>ç›‘ç£æˆ–éç›‘ç£æˆ–å¼ºåŒ–å­¦ä¹ ï¼Ÿ</li><li>åˆ†ç±»æˆ–å›å½’æˆ–å…¶ä»–ï¼Ÿ</li><li>æ‰¹é‡è¿˜æ˜¯çº¿ä¸Šï¼Ÿ</li></ul><h3 id="é€‰æ‹©æ€§èƒ½æŒ‡æ ‡"><a href="#é€‰æ‹©æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="é€‰æ‹©æ€§èƒ½æŒ‡æ ‡"></a>é€‰æ‹©æ€§èƒ½æŒ‡æ ‡</h3><ul><li>å›å½’é—®é¢˜çš„å…¸å‹æŒ‡æ ‡ï¼šå‡æ–¹æ ¹è¯¯å·®ï¼ˆRMSEï¼‰ã€å¹³æ–¹ç»å¯¹è¯¯å·®ï¼ˆMAEï¼‰</li></ul><h3 id="æ ¸å®å‡è®¾"><a href="#æ ¸å®å‡è®¾" class="headerlink" title="æ ¸å®å‡è®¾"></a>æ ¸å®å‡è®¾</h3><ul><li>é¦–å…ˆåˆ—å‡ºå¹¶æ ¸å¯¹è¿„ä»Šï¼ˆä½ æˆ–å…¶ä»–äººï¼‰ä½œå‡ºçš„å‡è®¾</li></ul><h2 id="è·å–æ•°æ®"><a href="#è·å–æ•°æ®" class="headerlink" title="è·å–æ•°æ®"></a>è·å–æ•°æ®</h2><h3 id="ä¸‹è½½æ•°æ®"><a href="#ä¸‹è½½æ•°æ®" class="headerlink" title="ä¸‹è½½æ•°æ®"></a>ä¸‹è½½æ•°æ®</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">import osimport tarfilefrom six.moves import urllibDOWNLOAD_ROOT = "https://raw.githubusercontent.com/ageron/handson-ml/master/"HOUSING_PATH = "datasets/housing"HOUSING_URL = DOWNLOAD_ROOT + HOUSING_PATH + "/housing.tgz"def fetch_housing_data(housing_url=HOUSING_URL, housing_path=HOUSING_PATH):    if not os.path.isdir(housing_path):        os.makedirs(housing_path)    tgz_path = os.path.join(housing_path, "housing.tgz")    urllib.request.urlretrieve(housing_url, tgz_path)    housing_tgz = tarfile.open(tgz_path)    housing_tgz.extractall(path=housing_path)    housing_tgz.close()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># fetch_housing_data()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">import pandas as pddef load_housing_data(housing_path=HOUSING_PATH):    csv_path = os.path.join(housing_path, "housing.csv")    return pd.read_csv(csv_path)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing = load_housing_data()housing.head()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>longitude</th>      <th>latitude</th>      <th>housing_median_age</th>      <th>total_rooms</th>      <th>total_bedrooms</th>      <th>population</th>      <th>households</th>      <th>median_income</th>      <th>median_house_value</th>      <th>ocean_proximity</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>-122.23</td>      <td>37.88</td>      <td>41.0</td>      <td>880.0</td>      <td>129.0</td>      <td>322.0</td>      <td>126.0</td>      <td>8.3252</td>      <td>452600.0</td>      <td>NEAR BAY</td>    </tr>    <tr>      <th>1</th>      <td>-122.22</td>      <td>37.86</td>      <td>21.0</td>      <td>7099.0</td>      <td>1106.0</td>      <td>2401.0</td>      <td>1138.0</td>      <td>8.3014</td>      <td>358500.0</td>      <td>NEAR BAY</td>    </tr>    <tr>      <th>2</th>      <td>-122.24</td>      <td>37.85</td>      <td>52.0</td>      <td>1467.0</td>      <td>190.0</td>      <td>496.0</td>      <td>177.0</td>      <td>7.2574</td>      <td>352100.0</td>      <td>NEAR BAY</td>    </tr>    <tr>      <th>3</th>      <td>-122.25</td>      <td>37.85</td>      <td>52.0</td>      <td>1274.0</td>      <td>235.0</td>      <td>558.0</td>      <td>219.0</td>      <td>5.6431</td>      <td>341300.0</td>      <td>NEAR BAY</td>    </tr>    <tr>      <th>4</th>      <td>-122.25</td>      <td>37.85</td>      <td>52.0</td>      <td>1627.0</td>      <td>280.0</td>      <td>565.0</td>      <td>259.0</td>      <td>3.8462</td>      <td>342200.0</td>      <td>NEAR BAY</td>    </tr>  </tbody></table></div><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing.info()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;RangeIndex: 20640 entries, 0 to 20639Data columns (total 10 columns): #   Column              Non-Null Count  Dtype  ---  ------              --------------  -----   0   longitude           20640 non-null  float64 1   latitude            20640 non-null  float64 2   housing_median_age  20640 non-null  float64 3   total_rooms         20640 non-null  float64 4   total_bedrooms      20433 non-null  float64 5   population          20640 non-null  float64 6   households          20640 non-null  float64 7   median_income       20640 non-null  float64 8   median_house_value  20640 non-null  float64 9   ocean_proximity     20640 non-null  object dtypes: float64(9), object(1)memory usage: 1.6+ MB</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing['ocean_proximity'].value_counts()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>&lt;1H OCEAN     9136INLAND        6551NEAR OCEAN    2658NEAR BAY      2290ISLAND           5Name: ocean_proximity, dtype: int64</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing.describe()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>longitude</th>      <th>latitude</th>      <th>housing_median_age</th>      <th>total_rooms</th>      <th>total_bedrooms</th>      <th>population</th>      <th>households</th>      <th>median_income</th>      <th>median_house_value</th>    </tr>  </thead>  <tbody>    <tr>      <th>count</th>      <td>20640.000000</td>      <td>20640.000000</td>      <td>20640.000000</td>      <td>20640.000000</td>      <td>20433.000000</td>      <td>20640.000000</td>      <td>20640.000000</td>      <td>20640.000000</td>      <td>20640.000000</td>    </tr>    <tr>      <th>mean</th>      <td>-119.569704</td>      <td>35.631861</td>      <td>28.639486</td>      <td>2635.763081</td>      <td>537.870553</td>      <td>1425.476744</td>      <td>499.539680</td>      <td>3.870671</td>      <td>206855.816909</td>    </tr>    <tr>      <th>std</th>      <td>2.003532</td>      <td>2.135952</td>      <td>12.585558</td>      <td>2181.615252</td>      <td>421.385070</td>      <td>1132.462122</td>      <td>382.329753</td>      <td>1.899822</td>      <td>115395.615874</td>    </tr>    <tr>      <th>min</th>      <td>-124.350000</td>      <td>32.540000</td>      <td>1.000000</td>      <td>2.000000</td>      <td>1.000000</td>      <td>3.000000</td>      <td>1.000000</td>      <td>0.499900</td>      <td>14999.000000</td>    </tr>    <tr>      <th>25%</th>      <td>-121.800000</td>      <td>33.930000</td>      <td>18.000000</td>      <td>1447.750000</td>      <td>296.000000</td>      <td>787.000000</td>      <td>280.000000</td>      <td>2.563400</td>      <td>119600.000000</td>    </tr>    <tr>      <th>50%</th>      <td>-118.490000</td>      <td>34.260000</td>      <td>29.000000</td>      <td>2127.000000</td>      <td>435.000000</td>      <td>1166.000000</td>      <td>409.000000</td>      <td>3.534800</td>      <td>179700.000000</td>    </tr>    <tr>      <th>75%</th>      <td>-118.010000</td>      <td>37.710000</td>      <td>37.000000</td>      <td>3148.000000</td>      <td>647.000000</td>      <td>1725.000000</td>      <td>605.000000</td>      <td>4.743250</td>      <td>264725.000000</td>    </tr>    <tr>      <th>max</th>      <td>-114.310000</td>      <td>41.950000</td>      <td>52.000000</td>      <td>39320.000000</td>      <td>6445.000000</td>      <td>35682.000000</td>      <td>6082.000000</td>      <td>15.000100</td>      <td>500001.000000</td>    </tr>  </tbody></table></div><pre class="line-numbers language-lang-python"><code class="language-lang-python">%matplotlib inlineimport matplotlib.pyplot as plthousing.hist(bins=50, figsize=(20, 15))plt.tight_layout()plt.show()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-yi-ge-wan-zheng-xiang-mu/output_8_0.png" alt="output_8_0"></p><h2 id="åˆ›å»ºæµ‹è¯•é›†"><a href="#åˆ›å»ºæµ‹è¯•é›†" class="headerlink" title="åˆ›å»ºæµ‹è¯•é›†"></a>åˆ›å»ºæµ‹è¯•é›†</h2><h3 id="éšæœºé‡‡æ ·"><a href="#éšæœºé‡‡æ ·" class="headerlink" title="éšæœºé‡‡æ ·"></a>éšæœºé‡‡æ ·</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">import numpy as npdef train_test_split(data, test_ratio):    np.random.seed(0)  # è®¾ç½®éšæœºæ•°ç§å­ä»¥æ¯æ¬¡è¿è¡Œäº§ç”Ÿç›¸åŒæµ‹è¯•é›†ï¼Œä½†æ˜¯æ–°æ•°æ®åŠ å…¥å°±å¯èƒ½æŠŠä¹‹å‰è®­ç»ƒé›†çš„åŠ å…¥åˆ°æµ‹è¯•é›†    shuffled_indices = np.random.permutation(len(data))    test_set_size = int(len(data)*test_ratio)    test_indices = shuffled_indices[:test_set_size]    train_indices = shuffled_indices[test_set_size:]    return data.iloc[train_indices], data.iloc[test_indices]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">train_set, test_set = train_test_split(housing, test_ratio=0.2)print(len(train_set), "train + ", len(test_set), "test")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>16512 train +  4128 test</code></pre><ul><li>ä¸Šè¿°éšæœºæŠ½æ ·å¦‚æœæ–°æ•°æ®æ¥ï¼Œé‡æ–°è¿è¡Œç¨‹åºä¼šå°†ä¹‹å‰çš„è®­ç»ƒæ ·æœ¬æœ‰å¯èƒ½åˆ’åˆ†æˆæµ‹è¯•æ ·æœ¬</li><li>è§£å†³åŠæ³•ï¼šä¸€ä¸ªé€šå¸¸çš„è§£å†³åŠæ³•æ˜¯ä½¿ç”¨æ¯ä¸ªå®ä¾‹çš„IDæ¥åˆ¤å®šè¿™ä¸ªå®ä¾‹æ˜¯å¦åº”è¯¥æ”¾å…¥æµ‹è¯•é›†ï¼ˆå‡è®¾æ¯ä¸ªå®ä¾‹éƒ½æœ‰å”¯ä¸€å¹¶ä¸”ä¸å˜çš„IDï¼‰ã€ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¡ç®—å‡ºæ¯ä¸ªå®ä¾‹IDçš„å“ˆå¸Œå€¼ï¼Œåªä¿ç•™å…¶æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œå¦‚æœè¯¥å€¼å°äºç­‰äº51ï¼ˆçº¦ä¸º256 çš„20%ï¼‰ï¼Œå°±å°†å…¶æ”¾å…¥æµ‹è¯•é›†ã€‚è¿™æ ·å¯ä»¥ä¿è¯åœ¨å¤šæ¬¡è¿è¡Œä¸­ï¼Œæµ‹è¯•é›†ä¿æŒä¸å˜ï¼Œå³ä½¿æ›´æ–°äº†æ•°æ®é›†ã€‚æ–°çš„æµ‹è¯•é›†ä¼šåŒ…å«æ–°å®ä¾‹ä¸­çš„20%ï¼Œä½†ä¸ä¼šæœ‰ä¹‹å‰ä½äºè®­ç»ƒé›†çš„å®ä¾‹ã€‚ã€‘</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">import hashlibdef test_set_check(identifier, test_ratio, hash):    return hash(np.int64(identifier)).digest()[-1]<256*test_ratiodef split_train_test_by_id(data, test_ratio, id_column, hash=hashlib.md5):    ids = data[id_column]    in_test_set = ids.apply(lambda id_: test_set_check(id_, test_ratio, hash))    return data.loc[~in_test_set], data.loc[in_test_set]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># å¦‚æœä½¿ç”¨è¡Œç´¢å¼•ä½œä¸ºå”¯ä¸€è¯†åˆ«ç ï¼Œä½ éœ€è¦ä¿è¯æ–°æ•°æ®éƒ½æ”¾åˆ°ç°æœ‰æ•°æ®çš„å°¾éƒ¨ï¼Œä¸”æ²¡æœ‰è¡Œè¢«åˆ é™¤housing_with_id = housing.reset_index()train_set, test_set = split_train_test_by_id(housing_with_id, 0.2, "index")print(len(train_set), "train + ", len(test_set), "test")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>16362 train +  4278 test</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ä¸€ä¸ªåŒºçš„ç»´åº¦å’Œç»åº¦åœ¨å‡ ç™¾ä¸‡å¹´ä¹‹å†…æ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥å¯ä»¥å°†ä¸¤è€…ç»“åˆæˆä¸€ä¸ªIDhousing_with_id["id"] = housing["longitude"] * 1000 + housing["latitude"]train_set, test_set = split_train_test_by_id(housing_with_id, 0.2, "id")print(len(train_set), "train + ", len(test_set), "test")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>16267 train +  4373 test</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æœ€ç®€å•çš„å‡½æ•°æ˜¯train_test_split ï¼Œå®ƒçš„ä½œç”¨å’Œä¹‹å‰çš„å‡½æ•°split_train_test å¾ˆåƒï¼Œå¹¶å¸¦æœ‰å…¶å®ƒä¸€äº›åŠŸèƒ½ã€‚é¦–å…ˆï¼Œå®ƒæœ‰ä¸€ä¸ªrandom_state å‚æ•°ï¼Œå¯ä»¥è®¾å®šå‰é¢è®²è¿‡çš„éšæœºç”Ÿæˆå™¨ç§å­ï¼›ç¬¬äºŒï¼Œä½ å¯ä»¥å°†ç§å­ä¼ é€’ç»™å¤šä¸ªè¡Œæ•°ç›¸åŒçš„æ•°æ®é›†ï¼Œå¯ä»¥åœ¨ç›¸åŒçš„ç´¢å¼•ä¸Šåˆ†å‰²æ•°æ®é›†ï¼ˆè¿™ä¸ªåŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä½ çš„æ ‡ç­¾å€¼æ˜¯æ”¾åœ¨å¦ä¸€ä¸ªDataFrame é‡Œçš„ï¼‰from sklearn.model_selection import train_test_splittrain_set, test_set = train_test_split(housing, test_size=0.2, random_state=42)print(len(train_set), "train + ", len(test_set), "test")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>16512 train +  4128 test</code></pre><ul><li>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„éƒ½æ˜¯çº¯éšæœºçš„å–æ ·æ–¹æ³•ã€‚å½“ä½ çš„æ•°æ®é›†å¾ˆå¤§æ—¶ï¼ˆå°¤å…¶æ˜¯å’Œå±æ€§æ•°ç›¸æ¯”ï¼‰ï¼Œè¿™é€šå¸¸å¯è¡Œï¼›ä½†å¦‚æœæ•°æ®é›†ä¸å¤§ï¼Œå°±ä¼šæœ‰é‡‡æ ·åå·®çš„é£é™©ã€‚ </li></ul><h3 id="åˆ†å±‚é‡‡æ ·"><a href="#åˆ†å±‚é‡‡æ ·" class="headerlink" title="åˆ†å±‚é‡‡æ ·"></a>åˆ†å±‚é‡‡æ ·</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing["income_cat"] = np.ceil(housing["median_income"] / 1.5)housing["income_cat"].where(housing["income_cat"]<5, 5.0, inplace=True)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.model_selection import StratifiedShuffleSplitsplit = StratifiedShuffleSplit(n_splits=1, test_size=0.2, random_state=42)for train_index, test_index in split.split(housing, housing["income_cat"]):    strat_train_set = housing.loc[train_index]    strat_test_set = housing.loc[test_index]print(len(strat_train_set), "train + ", len(strat_test_set), "test")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>16512 train +  4128 test</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing["income_cat"].value_counts() / len(housing)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>3.0    0.3505812.0    0.3188474.0    0.1763085.0    0.1144381.0    0.039826Name: income_cat, dtype: float64</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">strat_train_set["income_cat"].value_counts() / len(strat_train_set)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>3.0    0.3505942.0    0.3188594.0    0.1762965.0    0.1144021.0    0.039850Name: income_cat, dtype: float64</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">for set in (strat_train_set, strat_test_set):    set.drop(["income_cat"], axis=1, inplace=True)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="æ•°æ®EDA"><a href="#æ•°æ®EDA" class="headerlink" title="æ•°æ®EDA"></a>æ•°æ®EDA</h2><ul><li>é¦–å…ˆå°†æµ‹è¯•é›†æ”¾ä¸€æ—ï¼Œåªç ”ç©¶è®­ç»ƒé›†</li><li>å¦‚æœè®­ç»ƒé›†éå¸¸å¤§ï¼Œéœ€è¦å†é‡‡æ ·ä¸€ä¸ªæ¢ç´¢é›†</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing = strat_train_set.copy()housing.plot(kind="scatter", x="longitude", y="latitude", alpha=0.1)  # alphaæ§åˆ¶é€æ˜åº¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>&lt;AxesSubplot:xlabel=&#39;longitude&#39;, ylabel=&#39;latitude&#39;&gt;</code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-yi-ge-wan-zheng-xiang-mu/output_24_1.png" alt="output_24_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing.plot(kind='scatter', x="longitude", y="latitude", alpha=0.4,            s=housing['population']/100, label='population',            c='median_house_value', cmap=plt.get_cmap('jet'), colorbar=True)plt.legend()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>&lt;matplotlib.legend.Legend at 0x1cb9a343b50&gt;</code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-yi-ge-wan-zheng-xiang-mu/output_25_1.png" alt="output_25_1"></p><ul><li>è¿™å¼ å›¾è¯´æ˜æˆ¿ä»·å’Œä½ç½®ã€äººå£å¯†åº¦è”ç³»å¯†åˆ‡</li></ul><h3 id="æŸ¥æ‰¾å…³è”"><a href="#æŸ¥æ‰¾å…³è”" class="headerlink" title="æŸ¥æ‰¾å…³è”"></a>æŸ¥æ‰¾å…³è”</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ç›¸å…³ç³»æ•°corr_matrix = housing.corr()corr_matrix['median_house_value'].sort_values(ascending=False)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>median_house_value    1.000000median_income         0.687160total_rooms           0.135097housing_median_age    0.114110households            0.064506total_bedrooms        0.047689population           -0.026920longitude            -0.047432latitude             -0.142724Name: median_house_value, dtype: float64</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ç›¸å…³ç³»æ•°å›¾from pandas.plotting import scatter_matrixattributes = ['median_house_value', 'median_income', 'total_rooms', 'housing_median_age']scatter_matrix(housing[attributes], figsize=(12,8))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([[&lt;AxesSubplot:xlabel=&#39;median_house_value&#39;, ylabel=&#39;median_house_value&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;median_income&#39;, ylabel=&#39;median_house_value&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;total_rooms&#39;, ylabel=&#39;median_house_value&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;housing_median_age&#39;, ylabel=&#39;median_house_value&#39;&gt;],       [&lt;AxesSubplot:xlabel=&#39;median_house_value&#39;, ylabel=&#39;median_income&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;median_income&#39;, ylabel=&#39;median_income&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;total_rooms&#39;, ylabel=&#39;median_income&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;housing_median_age&#39;, ylabel=&#39;median_income&#39;&gt;],       [&lt;AxesSubplot:xlabel=&#39;median_house_value&#39;, ylabel=&#39;total_rooms&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;median_income&#39;, ylabel=&#39;total_rooms&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;total_rooms&#39;, ylabel=&#39;total_rooms&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;housing_median_age&#39;, ylabel=&#39;total_rooms&#39;&gt;],       [&lt;AxesSubplot:xlabel=&#39;median_house_value&#39;, ylabel=&#39;housing_median_age&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;median_income&#39;, ylabel=&#39;housing_median_age&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;total_rooms&#39;, ylabel=&#39;housing_median_age&#39;&gt;,        &lt;AxesSubplot:xlabel=&#39;housing_median_age&#39;, ylabel=&#39;housing_median_age&#39;&gt;]],      dtype=object)</code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-yi-ge-wan-zheng-xiang-mu/output_28_1.png" alt="output_28_1"></p><pre class="line-numbers language-lang-python"><code class="language-lang-python"># æœ€æœ‰å¸Œæœ›ç”¨æ¥é¢„æµ‹æˆ¿ä»·ä¸­ä½æ•°çš„å±æ€§æ˜¯æ”¶å…¥ä¸­ä½æ•°ï¼Œå› æ­¤å°†è¿™å¼ å›¾æ”¾å¤§housing.plot(kind='scatter', x='median_income', y='median_house_value', alpha=0.1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>&lt;AxesSubplot:xlabel=&#39;median_income&#39;, ylabel=&#39;median_house_value&#39;&gt;</code></pre><p><img src="/2021/03/19/ji-qi-xue-xi-zhi-yi-ge-wan-zheng-xiang-mu/output_29_1.png" alt="output_29_1"></p><ul><li>ä¼šå‘ç°ä¸€äº›ç›´çº¿ï¼Œå¸Œæœ›å»é™¤è¿™äº›ç›´çº¿å¯¹åº”çš„è®°å½•ï¼Œä»¥é˜²æ­¢ç®—æ³•é‡å¤è¿™äº›å·§åˆ</li></ul><h3 id="å±æ€§ç»„åˆè¯•éªŒ"><a href="#å±æ€§ç»„åˆè¯•éªŒ" class="headerlink" title="å±æ€§ç»„åˆè¯•éªŒ"></a>å±æ€§ç»„åˆè¯•éªŒ</h3><ol><li>æ¢ç´¢æ•°æ®å¯èƒ½å‘ç°ä¸€äº›æ•°æ®çš„å·§åˆï¼Œéœ€è¦å°†å…¶å»é™¤</li><li>å‘ç°ä¸€äº›å±æ€§é—´æœ‰è¶£çš„å…³è”</li><li>ä¸€äº›å±æ€§æœ‰é•¿å°¾åˆ†å¸ƒï¼Œå°†å…¶è½¬æ¢</li><li>â€¦â€¦</li></ol><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing['rooms_per_household'] = housing['total_rooms'] / housing['households']housing['bedrooms_per_room'] = housing['total_bedrooms'] / housing['total_rooms']housing['population_per_household'] = housing['population'] / housing['households']<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">corr_matrix = housing.corr()corr_matrix['median_house_value'].sort_values(ascending=False)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>median_house_value          1.000000median_income               0.687160rooms_per_household         0.146285total_rooms                 0.135097housing_median_age          0.114110households                  0.064506total_bedrooms              0.047689population_per_household   -0.021985population                 -0.026920longitude                  -0.047432latitude                   -0.142724bedrooms_per_room          -0.259984Name: median_house_value, dtype: float64</code></pre><h2 id="ä¸ºæœºå™¨å­¦ä¹ ç®—æ³•å‡†å¤‡æ•°æ®"><a href="#ä¸ºæœºå™¨å­¦ä¹ ç®—æ³•å‡†å¤‡æ•°æ®" class="headerlink" title="ä¸ºæœºå™¨å­¦ä¹ ç®—æ³•å‡†å¤‡æ•°æ®"></a>ä¸ºæœºå™¨å­¦ä¹ ç®—æ³•å‡†å¤‡æ•°æ®</h2><ul><li>å†™å‡½æ•°çš„å¥½å¤„ï¼š<ol><li>å‡½æ•°å¯ä»¥è®©ä½ åœ¨ä»»ä½•æ•°æ®é›†ä¸Šæ–¹ä¾¿çš„è¿›è¡Œé‡å¤æ•°æ®è½¬æ¢</li><li>ä½ èƒ½æ…¢æ…¢å»ºç«‹ä¸€ä¸ªè½¬æ¢å‡½æ•°åº“ï¼Œå¯ä»¥åœ¨æœªæ¥çš„é¡¹ç›®ä¸­å¤ç”¨</li><li>åœ¨å°†æ•°æ®ä¼ ç»™ç®—æ³•ä¹‹å‰ï¼Œä½ å¯ä»¥åœ¨å®æ—¶ç³»ç»Ÿä¸­ä½¿ç”¨è¿™äº›å‡½æ•°</li><li>è¿™å¯ä»¥è®©ä½ æ–¹ä¾¿çš„å°è¯•å¤šç§æ•°æ®è½¬æ¢ï¼ŒæŸ¥çœ‹å“ªäº›è½¬æ¢æ–¹æ³•ç»“åˆèµ·æ¥æ•ˆæœæœ€å¥½</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing = strat_train_set.drop('median_house_value', axis=1)housing_labels = strat_train_set['median_house_value'].copy()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ•°æ®æ¸…æ´—"><a href="#æ•°æ®æ¸…æ´—" class="headerlink" title="æ•°æ®æ¸…æ´—"></a>æ•°æ®æ¸…æ´—</h3><ul><li>å‰é¢æ¢ç´¢å‘ç°<code>total_bedrooms</code>æœ‰ä¸€äº›ç¼ºå¤±å€¼ï¼Œæœ‰ä¸‰ä¸ªè§£å†³é€‰é¡¹ï¼š<ol><li>å»æ‰å¯¹åº”è¡Œè®°å½•</li><li>å»æ‰è¿™ä¸ªå±æ€§</li><li>è¿›è¡Œèµ‹å€¼ï¼ˆ0ã€å¹³å‡å€¼ã€ä¸­ä½æ•°ç­‰ç­‰ï¼‰</li></ol></li><li>ä¹Ÿå¯ä»¥ä½¿ç”¨sklearné‡Œé¢çš„Imputerç±»æ¥å¤„ç†ç¼ºå¤±å€¼</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing.dropna(subset=['total_bedrooms'])  # é€‰é¡¹1housing.drop('total_bedrooms', axis=1)  # é€‰é¡¹2median = housing['total_bedrooms'].median()  # é€‰é¡¹3housing['total_bedrooms'].fillna(median)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>17606     351.018632     108.014650     471.03230      371.03555     1525.0          ...  6563      236.012053     294.013908     872.011159     380.015775     682.0Name: total_bedrooms, Length: 16512, dtype: float64</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.impute import SimpleImputerimputer = SimpleImputer(missing_values=np.nan, strategy='median')# åªæœ‰æ•°å€¼å±æ€§æ‰èƒ½ç®—å‡ºä¸­ä½æ•°housing_num = housing.drop('ocean_proximity', axis=1)imputer.fit(housing_num)print(imputer.statistics_)print(housing.median().values)# å¯¹è®­ç»ƒé›†è¿›è¡Œè½¬æ¢X = imputer.transform(housing_num)housing_tr = pd.DataFrame(X, columns=housing_num.columns)housing_tr.head()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[-118.51     34.26     29.     2119.5     433.     1164.      408.    3.5409][-118.51     34.26     29.     2119.5     433.     1164.      408.    3.5409]</code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: right;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>longitude</th>      <th>latitude</th>      <th>housing_median_age</th>      <th>total_rooms</th>      <th>total_bedrooms</th>      <th>population</th>      <th>households</th>      <th>median_income</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>-121.89</td>      <td>37.29</td>      <td>38.0</td>      <td>1568.0</td>      <td>351.0</td>      <td>710.0</td>      <td>339.0</td>      <td>2.7042</td>    </tr>    <tr>      <th>1</th>      <td>-121.93</td>      <td>37.05</td>      <td>14.0</td>      <td>679.0</td>      <td>108.0</td>      <td>306.0</td>      <td>113.0</td>      <td>6.4214</td>    </tr>    <tr>      <th>2</th>      <td>-117.20</td>      <td>32.77</td>      <td>31.0</td>      <td>1952.0</td>      <td>471.0</td>      <td>936.0</td>      <td>462.0</td>      <td>2.8621</td>    </tr>    <tr>      <th>3</th>      <td>-119.61</td>      <td>36.31</td>      <td>25.0</td>      <td>1847.0</td>      <td>371.0</td>      <td>1460.0</td>      <td>353.0</td>      <td>1.8839</td>    </tr>    <tr>      <th>4</th>      <td>-118.59</td>      <td>34.23</td>      <td>17.0</td>      <td>6592.0</td>      <td>1525.0</td>      <td>4459.0</td>      <td>1463.0</td>      <td>3.0347</td>    </tr>  </tbody></table></div><h4 id="å¤„ç†æ–‡æœ¬å’Œç±»åˆ«å±æ€§"><a href="#å¤„ç†æ–‡æœ¬å’Œç±»åˆ«å±æ€§" class="headerlink" title="å¤„ç†æ–‡æœ¬å’Œç±»åˆ«å±æ€§"></a>å¤„ç†æ–‡æœ¬å’Œç±»åˆ«å±æ€§</h4><ol><li>å°†æ–‡æœ¬æ ‡ç­¾è½¬æ¢ä¸ºæ•°å­—ï¼šè¿™æ ·åšçš„é—®é¢˜æ˜¯ï¼šMLç®—æ³•ä¼šè®¤ä¸ºä¸¤ä¸ªä¸´è¿‘å€¼æ¯”ä¸¤ä¸ªç–è¿œå€¼æ›´ç›¸ä¼¼ï¼Œä½†æ˜¯å¯¹æ ‡ç­¾æ•°æ®è¿™æ ·æ˜¯ä¸å‡†ç¡®çš„<ul><li>sklearnæä¾›ä¸€ä¸ªè½¬æ¢å™¨ï¼šLabelEncoder</li></ul></li><li>one-hotç¼–ç ï¼šæ¯ä¸ªå±æ€§å¼„æˆ0-1<ul><li>sklearnæä¾›ä¸€ä¸ªè½¬æ¢å™¨ï¼šOneHotEncoder</li></ul></li></ol><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.preprocessing import LabelEncoderencoder = LabelEncoder()housing_cat = housing['ocean_proximity']housing_cat_encoded = encoder.fit_transform(housing_cat)print(housing_cat_encoded)# æœ‰å¤šä¸ªæ–‡æœ¬ç‰¹å¾åˆ—æ—¶ï¼Œåº”ä½¿ç”¨factorize()æ–¹æ³•housing_cat_encoded, housing_categories = housing_cat.factorize()print(housing_cat_encoded, housing_categories)print(encoder.classes_)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[0 0 4 ... 1 0 3][0 0 1 ... 2 0 3] Index([&#39;&lt;1H OCEAN&#39;, &#39;NEAR OCEAN&#39;, &#39;INLAND&#39;, &#39;NEAR BAY&#39;, &#39;ISLAND&#39;], dtype=&#39;object&#39;)[&#39;&lt;1H OCEAN&#39; &#39;INLAND&#39; &#39;ISLAND&#39; &#39;NEAR BAY&#39; &#39;NEAR OCEAN&#39;]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.preprocessing import OneHotEncoderencoder = OneHotEncoder()housing_cat_1hot = encoder.fit_transform(housing_cat_encoded.reshape(-1,1))print(housing_cat_1hot.toarray())housing_cat_1hot  # ç¨€ç–çŸ©é˜µ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[[1. 0. 0. 0. 0.] [1. 0. 0. 0. 0.] [0. 1. 0. 0. 0.] ... [0. 0. 1. 0. 0.] [1. 0. 0. 0. 0.] [0. 0. 0. 1. 0.]]&lt;16512x5 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;    with 16512 stored elements in Compressed Sparse Row format&gt;</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ä½¿ç”¨LabelBinarizeä¸€æ­¥åˆ°ä½ï¼šè·å¾—ç¨€ç–çŸ©é˜µ+to arrayfrom sklearn.preprocessing import LabelBinarizerencoder = LabelBinarizer(sparse_output=False)housing_cat_1hot = encoder.fit_transform(housing_cat)print(housing_cat_1hot)# # æœ‰å¤šä¸ªæ–‡æœ¬ç‰¹å¾åˆ—æ—¶ï¼Œåº”ä½¿ç”¨sklearnä¸­çš„CategoricalEncoderç±»# from sklearn.preprocessing import CategoricalEncoder<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[[1 0 0 0 0] [1 0 0 0 0] [0 0 0 0 1] ... [0 1 0 0 0] [1 0 0 0 0] [0 0 0 1 0]]</code></pre><h4 id="è‡ªå®šä¹‰è½¬æ¢å™¨"><a href="#è‡ªå®šä¹‰è½¬æ¢å™¨" class="headerlink" title="è‡ªå®šä¹‰è½¬æ¢å™¨"></a>è‡ªå®šä¹‰è½¬æ¢å™¨</h4><ul><li>å°½ç®¡Scikit-Learn æä¾›äº†è®¸å¤šæœ‰ç”¨çš„è½¬æ¢å™¨ï¼Œä½ è¿˜æ˜¯éœ€è¦è‡ªå·±åŠ¨æ‰‹å†™è½¬æ¢å™¨æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”å¦‚è‡ªå®šä¹‰çš„æ¸…ç†æ“ä½œï¼Œæˆ–å±æ€§ç»„åˆã€‚ä½ éœ€è¦è®©è‡ªåˆ¶çš„è½¬æ¢å™¨ä¸Scikit-Learn ç»„ä»¶ï¼ˆæ¯”å¦‚æµæ°´çº¿ï¼‰æ— ç¼è¡”æ¥å·¥ä½œï¼Œå› ä¸ºScikit-Learn æ˜¯ä¾èµ–é¸­å­ç±»å‹çš„ï¼ˆè€Œä¸æ˜¯ç»§æ‰¿ï¼‰ï¼Œä½ æ‰€éœ€è¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ªç±»å¹¶æ‰§è¡Œä¸‰ä¸ªæ–¹æ³•ï¼šfit() ï¼ˆè¿”å›self ï¼‰ï¼Œtransform() ï¼Œå’Œfit_transform() ã€‚</li><li>é¸­å­ç±»å‹ï¼ˆè‹±è¯­ï¼šduck typingï¼‰åœ¨ç¨‹åºè®¾è®¡ä¸­æ˜¯åŠ¨æ€ç±»å‹çš„ä¸€ç§é£æ ¼ã€‚åœ¨è¿™ç§é£æ ¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰æ•ˆçš„è¯­ä¹‰ï¼Œä¸æ˜¯ç”±ç»§æ‰¿è‡ªç‰¹å®šçš„ç±»æˆ–å®ç°ç‰¹å®šçš„æ¥å£ï¼Œè€Œæ˜¯ç”±â€å½“å‰æ–¹æ³•å’Œå±æ€§çš„é›†åˆâ€å†³å®šã€‚</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.base import BaseEstimator, TransformerMixinrooms_ix, bedrooms_ix, population_ix, household_ix = 3, 4, 5, 6class CombinedAttributesAdder(BaseEstimator, TransformerMixin):    def __init__(self, add_bedrooms_pre_room=True):        self.add_bedrooms_pre_room = add_bedrooms_pre_room    def fit(self, X, y=None):        return self    def transform(self, X, y=None):        rooms_pre_household = X[:, rooms_ix] / X[:, household_ix]        population_pre_household = X[:, population_ix] / X[:, household_ix]        if self.add_bedrooms_pre_room:            bedrooms_pre_room = X[:, bedrooms_ix] / X[:, rooms_ix]            return np.c_[X, rooms_pre_household, population_pre_household, bedrooms_pre_room]        else:            return np.c_[X, rooms_pre_household, population_pre_household]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">attr_adder = CombinedAttributesAdder(add_bedrooms_pre_room=False)housing_extra_attribs = attr_adder.transform(housing.values)housing_extra_attribs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>array([[-121.89, 37.29, 38.0, ..., &#39;&lt;1H OCEAN&#39;, 4.625368731563422,        2.094395280235988],       [-121.93, 37.05, 14.0, ..., &#39;&lt;1H OCEAN&#39;, 6.008849557522124,        2.7079646017699117],       [-117.2, 32.77, 31.0, ..., &#39;NEAR OCEAN&#39;, 4.225108225108225,        2.0259740259740258],       ...,       [-116.4, 34.09, 9.0, ..., &#39;INLAND&#39;, 6.34640522875817,        2.742483660130719],       [-118.01, 33.82, 31.0, ..., &#39;&lt;1H OCEAN&#39;, 5.50561797752809,        3.808988764044944],       [-122.45, 37.77, 52.0, ..., &#39;NEAR BAY&#39;, 4.843505477308295,        1.9859154929577465]], dtype=object)</code></pre><h3 id="ç‰¹å¾ç¼©æ”¾"><a href="#ç‰¹å¾ç¼©æ”¾" class="headerlink" title="ç‰¹å¾ç¼©æ”¾"></a>ç‰¹å¾ç¼©æ”¾</h3><ul><li>è®©æ‰€æœ‰å±æ€§å…·æœ‰ç›¸åŒé‡åº¦ï¼š<ol><li>çº¿æ€§å½’ä¸€åŒ–ï¼š MinMaxScaler()</li><li>æ ‡å‡†åŒ–: StandarScaler()</li></ol></li><li>ä¸æ‰€æœ‰çš„è½¬æ¢ä¸€æ ·ï¼Œç¼©æ”¾å™¨åªèƒ½å‘è®­ç»ƒé›†æ‹Ÿåˆï¼Œè€Œä¸æ˜¯å‘å®Œæ•´çš„æ•°æ®é›†ï¼ˆåŒ…æ‹¬æµ‹è¯•é›†ï¼‰ã€‚åªæœ‰è¿™æ ·ï¼Œä½ æ‰èƒ½ç”¨ç¼©æ”¾å™¨è½¬æ¢è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆå’Œæ–°æ•°æ®ï¼‰</li></ul><h4 id="è½¬æ¢æµæ°´çº¿"><a href="#è½¬æ¢æµæ°´çº¿" class="headerlink" title="è½¬æ¢æµæ°´çº¿"></a>è½¬æ¢æµæ°´çº¿</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.pipeline import Pipelinefrom sklearn.preprocessing import StandardScalernum_pipline = Pipeline([('imputer', SimpleImputer(strategy='median')),                        ('attribs_addr', CombinedAttributesAdder()),                        ('std_scaler', StandardScaler()),                       ])housing_num_tr = num_pipline.fit_transform(housing_num)housing_num_tr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([[-1.15604281,  0.77194962,  0.74333089, ..., -0.31205452,        -0.08649871,  0.15531753],       [-1.17602483,  0.6596948 , -1.1653172 , ...,  0.21768338,        -0.03353391, -0.83628902],       [ 1.18684903, -1.34218285,  0.18664186, ..., -0.46531516,        -0.09240499,  0.4222004 ],       ...,       [ 1.58648943, -0.72478134, -1.56295222, ...,  0.3469342 ,        -0.03055414, -0.52177644],       [ 0.78221312, -0.85106801,  0.18664186, ...,  0.02499488,         0.06150916, -0.30340741],       [-1.43579109,  0.99645926,  1.85670895, ..., -0.22852947,        -0.09586294,  0.10180567]])</code></pre><h4 id="å°†æ•°å€¼æµæ°´çº¿å’Œå±æ€§å‹æµæ°´çº¿ä¸€èµ·å¤„ç†"><a href="#å°†æ•°å€¼æµæ°´çº¿å’Œå±æ€§å‹æµæ°´çº¿ä¸€èµ·å¤„ç†" class="headerlink" title="å°†æ•°å€¼æµæ°´çº¿å’Œå±æ€§å‹æµæ°´çº¿ä¸€èµ·å¤„ç†"></a>å°†æ•°å€¼æµæ°´çº¿å’Œå±æ€§å‹æµæ°´çº¿ä¸€èµ·å¤„ç†</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.pipeline import FeatureUnionfrom sklearn.base import BaseEstimator, TransformerMixinclass DataFrameSelector(BaseEstimator, TransformerMixin):    def __init__(self, attribute_names):        self.attribute_names=attribute_names    def fit(self, X, y=None):        return self    def transform(self, X):        return X[self.attribute_names].valuesclass MyLabelBinarizer(BaseEstimator, TransformerMixin):    def __init__(self, *args, **kwargs):        self.encoder = LabelBinarizer(*args, **kwargs)    def fit(self, x, y=None):        self.encoder.fit(x)        return self    def transform(self, x, y=None):        return self.encoder.transform(x)num_attribs = list(housing_num)cat_attribs = ['ocean_proximity']num_pipline = Pipeline([('selector', DataFrameSelector(num_attribs)),                        ('imputer', SimpleImputer(strategy='median')),                        ('attribs_addr', CombinedAttributesAdder()),                        ('std_scaler', StandardScaler()),                       ])cat_pipline = Pipeline([('selector', DataFrameSelector(cat_attribs)),                        ('label_binarizer', MyLabelBinarizer()),                       ])full_pipeline = FeatureUnion(transformer_list=[('num_pipeline', num_pipline),                                               ('cat_pipeline', cat_pipline),                                              ])housing_prepared = full_pipeline.fit_transform(housing)housing_prepared.shape<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>(16512, 16)</code></pre><h3 id="é€‰æ‹©å¹¶è®­ç»ƒæ¨¡å‹"><a href="#é€‰æ‹©å¹¶è®­ç»ƒæ¨¡å‹" class="headerlink" title="é€‰æ‹©å¹¶è®­ç»ƒæ¨¡å‹"></a>é€‰æ‹©å¹¶è®­ç»ƒæ¨¡å‹</h3><ul><li>å‰é¢å·²åš<ol><li>é™å®šäº†é—®é¢˜</li><li>è·å–æ•°æ®</li><li>æ¢ç´¢æ•°æ®</li><li>é‡‡æ ·æµ‹è¯•é›†</li><li>è‡ªåŠ¨åŒ–çš„è½¬æ¢æµæ°´çº¿ï¼šæ¸…ç†æ•°æ®</li></ol></li></ul><h4 id="åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒå’Œè¯„ä¼°"><a href="#åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒå’Œè¯„ä¼°" class="headerlink" title="åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒå’Œè¯„ä¼°"></a>åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒå’Œè¯„ä¼°</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python"># å›å½’æ¨¡å‹from sklearn.linear_model import LinearRegressionlin_reg = LinearRegression();lin_reg.fit(housing_prepared, housing_labels);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ç”¨ä¸€äº›è®­ç»ƒæ•°æ®çœ‹çœ‹some_data = housing.iloc[:5]some_labels = housing_labels.iloc[:5]some_data_prepared = full_pipeline.transform(some_data)print(lin_reg.predict(some_data_prepared))print(list(some_labels))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[210644.60459286 317768.80697211 210956.43331178  59218.98886849 189747.55849879][286600.0, 340600.0, 196900.0, 46300.0, 254500.0]</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># è®¡ç®—RSMEfrom sklearn.metrics import mean_squared_errorhousing_pred = lin_reg.predict(housing_prepared)lin_mse = mean_squared_error(housing_labels, housing_pred)lin_rmse = np.sqrt(lin_mse)lin_rmse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>68628.19819848923</code></pre><ul><li>æ˜¾ç„¶å›å½’æ¨¡å‹æ¬ æ‹Ÿåˆï¼Œç‰¹å¾æ²¡æœ‰æä¾›è¶³å¤Ÿå¤šçš„ä¿¡æ¯æ¥åšä¸€ä¸ªå¥½çš„é¢„æµ‹ï¼Œæˆ–è€…æ¨¡å‹ä¸å¤Ÿå¼ºå¤§</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python"># å†³ç­–æ ‘from sklearn.tree import DecisionTreeRegressortree_reg = DecisionTreeRegressor();tree_reg.fit(housing_prepared, housing_labels);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">housing_pred = tree_reg.predict(housing_prepared)tree_mse = mean_squared_error(housing_labels, housing_pred)tree_rmse = np.sqrt(tree_mse)tree_rmse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>0.0</code></pre><ul><li>æ˜¾ç„¶æ¨¡å‹å¯èƒ½è¿‡æ‹Ÿåˆ</li></ul><h4 id="ä½¿ç”¨äº¤å‰éªŒè¯æ¥åšæ›´ä½³çš„è¯„ä¼°"><a href="#ä½¿ç”¨äº¤å‰éªŒè¯æ¥åšæ›´ä½³çš„è¯„ä¼°" class="headerlink" title="ä½¿ç”¨äº¤å‰éªŒè¯æ¥åšæ›´ä½³çš„è¯„ä¼°"></a>ä½¿ç”¨äº¤å‰éªŒè¯æ¥åšæ›´ä½³çš„è¯„ä¼°</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.model_selection import cross_val_scorescores = cross_val_score(tree_reg, housing_prepared, housing_labels,                        scoring='neg_mean_squared_error', cv=10)tree_rmse_scores = np.sqrt(-scores)tree_rmse_scores<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([70402.31297471, 67320.10682085, 70223.47037104, 69614.92234167,       71787.54609682, 75496.45097963, 71048.37280966, 71597.08425246,       77043.79328191, 70578.37265691])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">def displayScores(scores):    print("Scores:", scores)    print("Mean:", scores.mean())    print("Std:", scores.std())displayScores(tree_rmse_scores)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Scores: [70402.31297471 67320.10682085 70223.47037104 69614.92234167 71787.54609682 75496.45097963 71048.37280966 71597.08425246 77043.79328191 70578.37265691]Mean: 71511.24325856709Std: 2677.852533862523</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">scores = cross_val_score(lin_reg, housing_prepared, housing_labels,                        scoring='neg_mean_squared_error', cv=10)lin_rmse_scores = np.sqrt(-scores)lin_rmse_scores<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([66782.73843989, 66960.118071  , 70347.95244419, 74739.57052552,       68031.13388938, 71193.84183426, 64969.63056405, 68281.61137997,       71552.91566558, 67665.10082067])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">displayScores(lin_rmse_scores)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>Scores: [66782.73843989 66960.118071   70347.95244419 74739.57052552 68031.13388938 71193.84183426 64969.63056405 68281.61137997 71552.91566558 67665.10082067]Mean: 69052.46136345083Std: 2731.6740017983425</code></pre><ul><li>åˆ¤æ–­æ²¡é”™ï¼šå†³ç­–æ ‘æ¨¡å‹è¿‡æ‹Ÿåˆå¾ˆä¸¥é‡ï¼Œå®ƒçš„æ€§èƒ½æ¯”çº¿æ€§å›å½’æ¨¡å‹è¿˜å·®</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python"># éšæœºæ£®æ—from sklearn.ensemble import RandomForestRegressorforest_reg = RandomForestRegressor()forest_reg.fit(housing_prepared, housing_labels)housing_pred = forest_reg.predict(housing_prepared)forest_mse = mean_squared_error(housing_labels, housing_pred)forest_rmse = np.sqrt(forest_mse)forest_rmse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>18691.633224101523</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">scores = cross_val_score(forest_reg, housing_prepared, housing_labels,                        scoring='neg_mean_squared_error', cv=10)forest_rmse_scores = np.sqrt(-scores)forest_rmse_scores<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>array([49503.09765569, 47556.24185705, 49876.34879458, 52163.99071947,       49535.73021436, 53483.37725634, 48882.69703437, 47583.62724759,       53339.88235391, 49722.75212307])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">displayScores(forest_rmse_scores)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>Scores: [49503.09765569 47556.24185705 49876.34879458 52163.99071947 49535.73021436 53483.37725634 48882.69703437 47583.62724759 53339.88235391 49722.75212307]Mean: 50164.77452564256Std: 2032.5814147343965</code></pre><ul><li>åœ¨ç»§ç»­æ·±å…¥å‰ï¼Œåº”è¯¥å°è¯•ä¸‹ä¸åŒæ¨¡å‹ï¼Œä¸è¦åœ¨è°ƒèŠ‚è¶…å‚æ•°ä¸ŠèŠ±è´¹å¤ªå¤šæ—¶é—´ï¼Œç›®æ ‡æ˜¯åˆ—å‡ºä¸€ä¸ªå¯èƒ½çš„æ¨¡å‹åˆ—è¡¨ï¼ˆ2-5ä¸ªï¼‰</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ä¿å­˜æ¨¡å‹import jobliboutput_path = 'model/'if not os.path.isdir(output_path):    os.makedirs(output_path)joblib.dump(forest_reg, output_path+'forest_reg.pkl');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">import gcdel forest_reggc.collect();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">forest_reg = joblib.load(output_path + 'forest_reg.pkl')forest_reg.predict(housing_prepared)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([267951.  , 323307.  , 221516.  , ..., 102155.  , 214044.  ,       464662.73])</code></pre><h3 id="æ¨¡å‹å¾®è°ƒ"><a href="#æ¨¡å‹å¾®è°ƒ" class="headerlink" title="æ¨¡å‹å¾®è°ƒ"></a>æ¨¡å‹å¾®è°ƒ</h3><ul><li>å‡è®¾æœ‰ä¸€ä¸ªåˆ—è¡¨äº†ï¼Œåˆ—è¡¨é‡Œé¢æœ‰å‡ ä¸ªæœ‰å¸Œæœ›çš„æ¨¡å‹äº†ï¼Œç°åœ¨å¯¹å®ƒä»¬è¿›è¡Œå¾®è°ƒ</li></ul><ol><li>ç½‘æ ¼æœç´¢</li><li>éšå³æœç´¢</li><li>é›†æˆæ–¹æ³•</li></ol><h4 id="ç½‘æ ¼æœç´¢"><a href="#ç½‘æ ¼æœç´¢" class="headerlink" title="ç½‘æ ¼æœç´¢"></a>ç½‘æ ¼æœç´¢</h4><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.model_selection import GridSearchCVparam_grid = [    {'n_estimators': [3,10,30], 'max_features': [2,4,6,8]},    {'bootstrap': [False], 'n_estimators': [3,10], 'max_features': [2,3,4]},]forest_reg = RandomForestRegressor()grid_search = GridSearchCV(forest_reg, param_grid, cv=5,                            scoring='neg_mean_squared_error')grid_search.fit(housing_prepared, housing_labels)(grid_search.best_params_)(grid_search.best_estimator_)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>RandomForestRegressor(max_features=6, n_estimators=30)</code></pre><ul><li>param_grid å‘Šè¯‰Scikit-Learn é¦–å…ˆè¯„ä¼°æ‰€æœ‰çš„åˆ—åœ¨ç¬¬ä¸€ä¸ªdict ä¸­çš„n_estimators å’Œmax_features çš„3 Ã— 4 = 12 ç§ç»„åˆï¼ˆä¸ç”¨æ‹…å¿ƒè¿™äº›è¶…å‚æ•°çš„å«ä¹‰ï¼Œä¼šåœ¨ç¬¬7 ç« ä¸­è§£é‡Šï¼‰ã€‚ç„¶åå°è¯•ç¬¬äºŒä¸ªdict ä¸­è¶…å‚æ•°çš„2 Ã— 3 = 6 ç§ç»„åˆï¼Œè¿™æ¬¡ä¼šå°†è¶…å‚æ•°bootstrap è®¾ä¸ºFalse è€Œä¸æ˜¯True ï¼ˆåè€…æ˜¯è¯¥è¶…å‚æ•°çš„é»˜è®¤å€¼ï¼‰ã€‚</li><li>æ€»ä¹‹ï¼Œç½‘æ ¼æœç´¢ä¼šæ¢ç´¢12 + 6 = 18 ç§RandomForestRegressor çš„è¶…å‚æ•°ç»„åˆï¼Œä¼šè®­ç»ƒæ¯ä¸ªæ¨¡å‹äº”æ¬¡ï¼ˆå› ä¸ºç”¨çš„æ˜¯äº”æŠ˜äº¤å‰éªŒè¯ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œè®­ç»ƒæ€»å…±æœ‰18 Ã— 5 = 90 è½®ï¼K æŠ˜å°†è¦èŠ±è´¹å¤§é‡æ—¶é—´ï¼Œå®Œæˆåï¼Œä½ å°±èƒ½è·å¾—å‚æ•°çš„æœ€ä½³ç»„åˆ</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python"># è¯„ä¼°è¯„åˆ†cvres = grid_search.cv_results_for mean_score, params in zip(cvres['mean_test_score'], cvres['params']):    print(np.sqrt(-mean_score), params)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>64484.368945438095 {&#39;max_features&#39;: 2, &#39;n_estimators&#39;: 3}55801.68474277632 {&#39;max_features&#39;: 2, &#39;n_estimators&#39;: 10}53103.397117972374 {&#39;max_features&#39;: 2, &#39;n_estimators&#39;: 30}60739.34011042108 {&#39;max_features&#39;: 4, &#39;n_estimators&#39;: 3}52606.55731138118 {&#39;max_features&#39;: 4, &#39;n_estimators&#39;: 10}50461.78456229793 {&#39;max_features&#39;: 4, &#39;n_estimators&#39;: 30}58694.1806275357 {&#39;max_features&#39;: 6, &#39;n_estimators&#39;: 3}52167.01603965681 {&#39;max_features&#39;: 6, &#39;n_estimators&#39;: 10}49789.76142728186 {&#39;max_features&#39;: 6, &#39;n_estimators&#39;: 30}59244.45170151536 {&#39;max_features&#39;: 8, &#39;n_estimators&#39;: 3}52471.88272318626 {&#39;max_features&#39;: 8, &#39;n_estimators&#39;: 10}50024.71009745971 {&#39;max_features&#39;: 8, &#39;n_estimators&#39;: 30}62288.45521151971 {&#39;bootstrap&#39;: False, &#39;max_features&#39;: 2, &#39;n_estimators&#39;: 3}54541.851530599495 {&#39;bootstrap&#39;: False, &#39;max_features&#39;: 2, &#39;n_estimators&#39;: 10}60763.31894922859 {&#39;bootstrap&#39;: False, &#39;max_features&#39;: 3, &#39;n_estimators&#39;: 3}52256.3308785951 {&#39;bootstrap&#39;: False, &#39;max_features&#39;: 3, &#39;n_estimators&#39;: 10}58006.11393494447 {&#39;bootstrap&#39;: False, &#39;max_features&#39;: 4, &#39;n_estimators&#39;: 3}51525.95227740632 {&#39;bootstrap&#39;: False, &#39;max_features&#39;: 4, &#39;n_estimators&#39;: 10}</code></pre><h4 id="éšæœºæœç´¢"><a href="#éšæœºæœç´¢" class="headerlink" title="éšæœºæœç´¢"></a>éšæœºæœç´¢</h4><ul><li>å½“è¶…å‚æ•°çš„æœç´¢ç©ºé—´å¾ˆå¤§æ—¶ï¼Œæœ€å¥½ä½¿ç”¨<code>RandomizedSearchCV</code></li><li>éšæœºæœç´¢é€šè¿‡é€‰æ‹©æ¯ä¸ªè¶…å‚æ•°çš„ä¸€ä¸ªéšæœºå€¼çš„ç‰¹å®šæ•°é‡çš„éšæœºç»„åˆï¼Œä¸¤ä¸ªä¼˜ç‚¹ï¼š<ol><li>å¦‚æœä½ è®©éšæœºæœç´¢è¿è¡Œï¼Œæ¯”å¦‚1000 æ¬¡ï¼Œå®ƒä¼šæ¢ç´¢æ¯ä¸ªè¶…å‚æ•°çš„1000 ä¸ªä¸åŒçš„å€¼ï¼ˆè€Œä¸æ˜¯åƒç½‘æ ¼æœç´¢é‚£æ ·ï¼Œåªæœç´¢æ¯ä¸ªè¶…å‚æ•°çš„å‡ ä¸ªå€¼</li><li>ä½ å¯ä»¥æ–¹ä¾¿åœ°é€šè¿‡è®¾å®šæœç´¢æ¬¡æ•°ï¼Œæ§åˆ¶è¶…å‚æ•°æœç´¢çš„è®¡ç®—é‡</li></ol></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">from sklearn.model_selection import RandomizedSearchCVdistributions = dict(n_estimators=[3,10,30], max_features=[2,4,6,8])forest_reg = RandomForestRegressor()grid_search = RandomizedSearchCV(forest_reg, distributions,                                  random_state=0, cv=5,                                 scoring='neg_mean_squared_error')grid_search.fit(housing_prepared, housing_labels)(grid_search.best_params_)(grid_search.best_estimator_)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>RandomForestRegressor(max_features=8, n_estimators=30)</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python"># è¯„ä¼°è¯„åˆ†cvres = grid_search.cv_results_for mean_score, params in zip(cvres['mean_test_score'], cvres['params']):    print(np.sqrt(-mean_score), params)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>60313.361125661046 {&#39;n_estimators&#39;: 3, &#39;max_features&#39;: 6}49834.72365719627 {&#39;n_estimators&#39;: 30, &#39;max_features&#39;: 8}52515.52121503662 {&#39;n_estimators&#39;: 10, &#39;max_features&#39;: 4}51547.81101848066 {&#39;n_estimators&#39;: 10, &#39;max_features&#39;: 8}52824.54605534015 {&#39;n_estimators&#39;: 30, &#39;max_features&#39;: 2}50011.013090069086 {&#39;n_estimators&#39;: 30, &#39;max_features&#39;: 6}55772.624674081875 {&#39;n_estimators&#39;: 10, &#39;max_features&#39;: 2}51994.5987814074 {&#39;n_estimators&#39;: 10, &#39;max_features&#39;: 6}58695.313520315474 {&#39;n_estimators&#39;: 3, &#39;max_features&#39;: 8}60144.83595308729 {&#39;n_estimators&#39;: 3, &#39;max_features&#39;: 4}</code></pre><h4 id="é›†æˆæ–¹æ³•"><a href="#é›†æˆæ–¹æ³•" class="headerlink" title="é›†æˆæ–¹æ³•"></a>é›†æˆæ–¹æ³•</h4><ul><li>å¦ä¸€ç§å¾®è°ƒç³»ç»Ÿçš„æ–¹æ³•æ˜¯å°†è¡¨ç°æœ€å¥½çš„æ¨¡å‹ç»„åˆèµ·æ¥ã€‚ç»„åˆï¼ˆé›†æˆï¼‰ä¹‹åçš„æ€§èƒ½é€šå¸¸è¦æ¯”å•ç‹¬çš„æ¨¡å‹è¦å¥½ï¼ˆå°±åƒéšæœºæ£®æ—è¦æ¯”å•ç‹¬çš„å†³ç­–æ ‘è¦å¥½ï¼‰ï¼Œç‰¹åˆ«æ˜¯å½“å•ç‹¬æ¨¡å‹çš„è¯¯å·®ç±»å‹ä¸åŒæ—¶</li></ul><h3 id="åˆ†ææœ€ä½³æ¨¡å‹å’Œå®ƒä»¬çš„è¯¯å·®"><a href="#åˆ†ææœ€ä½³æ¨¡å‹å’Œå®ƒä»¬çš„è¯¯å·®" class="headerlink" title="åˆ†ææœ€ä½³æ¨¡å‹å’Œå®ƒä»¬çš„è¯¯å·®"></a>åˆ†ææœ€ä½³æ¨¡å‹å’Œå®ƒä»¬çš„è¯¯å·®</h3><ul><li>æ ¹æ®ç‰¹å¾é‡è¦æ€§ï¼Œä¸¢å¼ƒä¸€äº›æ— ç”¨ç‰¹å¾</li><li>è§‚å¯Ÿç³»ç»Ÿè¯¯å·®ï¼Œææ¸…ä¸ºä»€ä¹ˆæœ‰è¿™äº›è¯¯å·®ï¼Œå¦‚ä½•æ”¹æ­£é—®é¢˜ï¼ˆæ·»åŠ ã€å»æ‰ã€æ¸…æ´—å¼‚å¸¸å€¼ç­‰æªæ–½ï¼‰</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">feature_importances = grid_search.best_estimator_.feature_importances_feature_importances<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>array([6.54145890e-02, 6.11239658e-02, 4.68569762e-02, 1.57799553e-02,       1.47877860e-02, 1.52606278e-02, 1.45150045e-02, 3.56582379e-01,       5.46405542e-02, 1.14200534e-01, 7.60282167e-02, 7.53161308e-03,       1.52163827e-01, 3.13174862e-05, 2.25971757e-03, 2.82293596e-03])</code></pre><pre class="line-numbers language-lang-python"><code class="language-lang-python">extra_attribs = ['rooms_per_hold', 'pop_per_hold', 'bedrooms_per_room']cat_ont_hot_attribs = list(encoder.classes_)attributes = num_attribs + extra_attribs + cat_ont_hot_attribssorted(zip(feature_importances, attributes), reverse=True)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[(0.35658237869153536, &#39;median_income&#39;), (0.1521638272583547, &#39;INLAND&#39;), (0.11420053447156554, &#39;pop_per_hold&#39;), (0.07602821669031448, &#39;bedrooms_per_room&#39;), (0.06541458900157228, &#39;longitude&#39;), (0.06112396584108679, &#39;latitude&#39;), (0.05464055415192507, &#39;rooms_per_hold&#39;), (0.04685697616305872, &#39;housing_median_age&#39;), (0.015779955349765996, &#39;total_rooms&#39;), (0.015260627821204058, &#39;population&#39;), (0.01478778596813993, &#39;total_bedrooms&#39;), (0.014515004497103572, &#39;households&#39;), (0.007531613076317472, &#39;&lt;1H OCEAN&#39;), (0.0028229359597008235, &#39;NEAR OCEAN&#39;), (0.0022597175721814156, &#39;NEAR BAY&#39;), (3.131748617381553e-05, &#39;ISLAND&#39;)]</code></pre><h2 id="ç”¨æµ‹è¯•é›†è¯„ä¼°ç³»ç»Ÿ"><a href="#ç”¨æµ‹è¯•é›†è¯„ä¼°ç³»ç»Ÿ" class="headerlink" title="ç”¨æµ‹è¯•é›†è¯„ä¼°ç³»ç»Ÿ"></a>ç”¨æµ‹è¯•é›†è¯„ä¼°ç³»ç»Ÿ</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">final_model = grid_search.best_estimator_X_test = strat_test_set.drop('median_house_value', axis=1)y_test = strat_test_set['median_house_value'].copy()X_test_prepared = full_pipeline.transform(X_test)final_predictions = final_model.predict(X_test_prepared)final_mse = mean_squared_error(y_test, final_predictions)final_rmse = np.sqrt(final_mse)final_rmse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>48237.045259350096</code></pre><h2 id="é¡¹ç›®é¢„ä¸Šçº¿é˜¶æ®µ"><a href="#é¡¹ç›®é¢„ä¸Šçº¿é˜¶æ®µ" class="headerlink" title="é¡¹ç›®é¢„ä¸Šçº¿é˜¶æ®µ"></a>é¡¹ç›®é¢„ä¸Šçº¿é˜¶æ®µ</h2><ol><li>å±•ç¤ºæ–¹æ¡ˆ<ol><li>å­¦åˆ°äº†ä»€ä¹ˆ</li><li>åšäº†ä»€ä¹ˆ</li><li>æ²¡åšä»€ä¹ˆ</li><li>åšè¿‡ä»€ä¹ˆå‡è®¾</li><li>ç³»ç»Ÿçš„é™åˆ¶æ˜¯ä»€ä¹ˆ</li><li>â€¦â€¦</li></ol></li></ol><ul><li>ç”¨æ¼‚äº®çš„å›¾è¡¨å’Œå®¹æ˜“è®°ä½çš„è¡¨è¾¾</li></ul><h2 id="å¯åŠ¨ã€ç›‘æ§ã€ç»´æŠ¤ç³»ç»Ÿ"><a href="#å¯åŠ¨ã€ç›‘æ§ã€ç»´æŠ¤ç³»ç»Ÿ" class="headerlink" title="å¯åŠ¨ã€ç›‘æ§ã€ç»´æŠ¤ç³»ç»Ÿ"></a>å¯åŠ¨ã€ç›‘æ§ã€ç»´æŠ¤ç³»ç»Ÿ</h2><ol><li>æ¥å…¥è¾“å…¥æ•°æ®ï¼Œç¼–å†™æµ‹è¯•</li><li>ç¼–å†™ç›‘æ§ä»£ç </li><li>ç¼–å†™è¯„ä¼°ç³»ç»Ÿ</li></ol><h2 id="å®è·µï¼"><a href="#å®è·µï¼" class="headerlink" title="å®è·µï¼"></a>å®è·µï¼</h2>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯»ä¹¦ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹èšç±»</title>
      <link href="/2021/03/17/ji-qi-xue-xi-zhi-ju-lei/"/>
      <url>/2021/03/17/ji-qi-xue-xi-zhi-ju-lei/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="KMeans"><a href="#KMeans" class="headerlink" title="KMeans"></a><code>KMeans</code></h2><h3 id="KMeans-1"><a href="#KMeans-1" class="headerlink" title="KMeans"></a><code>KMeans</code></h3><h4 id="ç®—æ³•æµç¨‹"><a href="#ç®—æ³•æµç¨‹" class="headerlink" title="ç®—æ³•æµç¨‹"></a>ç®—æ³•æµç¨‹</h4><ul><li>è¾“å…¥ï¼š<ul><li>æ ·æœ¬é›†$D=\{x_1,x_2,â€¦x_m\}$</li><li>éœ€è¦èšæˆå¤šå°‘ç±»$k$</li><li>æœ€å¤§è¿­ä»£æ¬¡æ•°$N$</li></ul></li><li>è¾“å‡ºï¼š<ul><li>$k$ä¸ªç±»ç°‡$C=\{C_1,C_2,â€¦C_k\}$</li></ul></li><li>æµç¨‹<ol><li>ä»æ•°æ®é›†$D$ä¸­<code>éšæœºé€‰æ‹©</code>$k$ä¸ªæ ·æœ¬ä½œä¸ºåˆå§‹çš„è´¨å¿ƒ$\mu=\{\mu_1,\mu_2,â€¦,\mu_k\}$</li><li>å°†$k$ä¸ªç±»ç°‡åˆå§‹åŒ–ä¸º$C_t = \varnothing \;\; t =1,2â€¦k$</li><li>from n=1 to Nï¼š<ol><li>å¯¹$m$ä¸ªæ ·æœ¬ï¼Œè®¡ç®—æ ·æœ¬$x_i,i=1,â€¦,m$ä¸$k$ä¸ªè´¨å¿ƒçš„è·ç¦»$d_{ij} = ||x_i - \mu_j||_2^2$ã€‚å°†è¯¥æ ·æœ¬çº³å…¥æœ€å°$d_{ij}$å¯¹åº”çš„è´¨å¿ƒå¯¹åº”ç±»åˆ«$\lambda_i$ä¸­ï¼Œæ›´æ–°$C_{\lambda_i} = C_{\lambda_i} \cup \{x_i\}$</li><li>å¯¹$k$ä¸ªç±»ç°‡å„è‡ªçš„æ ·æœ¬é‡æ–°è®¡ç®—æ–°çš„è´¨å¿ƒ$\mu_j = \frac{1}{|C_j|}\sum\limits_{x \in C_j}x$</li><li>å¦‚æœè¿™$k$ä¸ªè´¨å¿ƒéƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™<code>break</code></li></ol></li><li>è¾“å‡ºç±»ç°‡$C$</li></ol></li></ul><h4 id="ç›®æ ‡å‡½æ•°"><a href="#ç›®æ ‡å‡½æ•°" class="headerlink" title="ç›®æ ‡å‡½æ•°"></a>ç›®æ ‡å‡½æ•°</h4><script type="math/tex; mode=display">E = \sum\limits_{i=1}^k\sum\limits_{x \in C_i} ||x-\mu_i||_2^2</script><h4 id="k-å’Œè·ç¦»å¦‚ä½•ç¡®å®š"><a href="#k-å’Œè·ç¦»å¦‚ä½•ç¡®å®š" class="headerlink" title="$k$å’Œè·ç¦»å¦‚ä½•ç¡®å®š"></a>$k$å’Œè·ç¦»å¦‚ä½•ç¡®å®š</h4><ul><li>$k$ï¼šæ ¹æ®å¯¹æ•°æ®çš„å…ˆéªŒç»éªŒé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ä»€ä¹ˆå…ˆéªŒçŸ¥è¯†ï¼Œåˆ™é€šè¿‡äº¤å‰éªŒè¯é€‰æ‹©ä¸€ä¸ªåˆé€‚å€¼</li><li>è·ç¦»ï¼š<code>æ¬§æ°è·ç¦»</code></li></ul><h4 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><ul><li>åˆå§‹<code>k</code>ä¸ªè´¨å¿ƒéšæœºé€‰å–ï¼Œå¤ªè€—æ—¶</li><li>æ²¡å¿…è¦æ‰€æœ‰è·ç¦»éƒ½è®¡ç®—</li></ul><h3 id="KMeans-2"><a href="#KMeans-2" class="headerlink" title="KMeans++"></a><code>KMeans++</code></h3><h4 id="æ”¹è¿›çš„åœ°æ–¹"><a href="#æ”¹è¿›çš„åœ°æ–¹" class="headerlink" title="æ”¹è¿›çš„åœ°æ–¹"></a>æ”¹è¿›çš„åœ°æ–¹</h4><ul><li>åˆå§‹<code>k</code>ä¸ªè´¨å¿ƒ<code>ä¸å†</code>éšæœºé€‰å–ï¼Œæ”¹è¿›å¦‚ä¸‹ï¼š<ol><li>å¯¹æ•°æ®é›†$D$éšæœºé€‰æ‹©ç¬¬ä¸€ä¸ªç‚¹ä½œä¸ºç¬¬ä¸€ä¸ªè´¨å¿ƒ$\mu_1$</li><li>å¯¹$D$ä¸­å…¶ä»–ç‚¹$x_i$ï¼Œè®¡ç®—å®ƒä¸å·²é€‰æ‹©çš„è´¨å¿ƒä¸­æœ€è¿‘è´¨å¿ƒçš„è·ç¦»$D(x_i) = arg\;min||x_i- \mu_r||_2^2\;\;r=1,2,â€¦k_{selected}$</li><li>é€‰æ‹©ä¸€ä¸ªæ–°çš„æ•°æ®ç‚¹ä½œä¸ºæ–°çš„è´¨å¿ƒï¼Œé€‰æ‹©çš„åŸåˆ™æ˜¯ï¼š$D(x)$è¾ƒå¤§çš„ç‚¹ï¼Œè¢«é€‰å–ä½œä¸ºè´¨å¿ƒçš„æ¦‚ç‡è¾ƒå¤§</li><li>é‡å¤2-3æ­¥ï¼Œç›´åˆ°é€‰å‡º$k$ä¸ªè´¨å¿ƒ</li><li>å°†è¿™$k$ä¸ªè´¨å¿ƒä½œä¸ºåˆå§‹åŒ–è´¨å¿ƒå»è¿›è¡Œ<code>KMeans</code>è®¡ç®—</li></ol></li></ul><h3 id="elkan-KMeans"><a href="#elkan-KMeans" class="headerlink" title="elkan KMeans"></a><code>elkan KMeans</code></h3><h4 id="æ”¹è¿›çš„åœ°æ–¹-1"><a href="#æ”¹è¿›çš„åœ°æ–¹-1" class="headerlink" title="æ”¹è¿›çš„åœ°æ–¹"></a>æ”¹è¿›çš„åœ°æ–¹</h4><ul><li>æœ‰äº›æ ·æœ¬ç‚¹åˆ°è´¨å¿ƒçš„è·ç¦»ä¸è®¡ç®—ï¼Œæ”¹è¿›å¦‚ä¸‹ï¼š<ol><li>åˆ©ç”¨ä¸‰è§’å½¢ä¸¤è¾¹ä¹‹å’Œå¤§äºç¬¬ä¸‰è¾¹ï¼Œä¸¤è¾¹ä¹‹å·®å°äºç¬¬ä¸‰è¾¹çš„æ€§è´¨ï¼Œå‡å°‘è·ç¦»çš„è®¡ç®—</li></ol></li></ul><h4 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ul><li>å¦‚æœæ ·æœ¬çš„ç‰¹å¾ç¨€ç–ã€æœ‰ç¼ºå¤±å€¼çš„æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå› ä¸ºæŸäº›è·ç¦»æ— æ³•è®¡ç®—</li></ul><h3 id="å¤§æ ·æœ¬ä¼˜åŒ–MiNi-Batch-KMeans"><a href="#å¤§æ ·æœ¬ä¼˜åŒ–MiNi-Batch-KMeans" class="headerlink" title="å¤§æ ·æœ¬ä¼˜åŒ–MiNi Batch KMeans"></a>å¤§æ ·æœ¬ä¼˜åŒ–<code>MiNi Batch KMeans</code></h3><h4 id="æ”¹è¿›çš„åœ°æ–¹-2"><a href="#æ”¹è¿›çš„åœ°æ–¹-2" class="headerlink" title="æ”¹è¿›çš„åœ°æ–¹"></a>æ”¹è¿›çš„åœ°æ–¹</h4><ul><li>å½“æ ·æœ¬é‡æˆ–è€…ç‰¹å¾ç»´åº¦ç‰¹åˆ«å¤§æ—¶ï¼Œ<code>KMeans</code>ç®—æ³•éå¸¸è€—æ—¶ï¼Œä½¿ç”¨<code>elkan KMeans</code>éƒ½è¿˜æ˜¯è€—æ—¶ï¼Œæ­¤æ—¶å°±æ˜¯<code>MiNi Batch KMeans</code>ï¼Œå³ä½¿ç”¨æ ·æœ¬é›†$D$ä¸­çš„ä¸€éƒ¨åˆ†<code>Batch size</code>æ ·æœ¬è¿›è¡Œ<code>KMeans</code>ï¼Œè¿™éƒ¨åˆ†æ ·æœ¬é€šè¿‡<code>æ— æ”¾å›éšæœºé‡‡æ ·</code></li><li>ä¸€èˆ¬è¦å¯¹æ ·æœ¬é›†$D$å¤šè¿è¡Œå‡ æ¬¡<code>MiNi Batch KMeans</code>ï¼Œé€‰å–ç›¸å¯¹æœ€ä¼˜ç±»ç°‡</li></ul><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>ä¼šå¤±å»ä¸€äº›ç²¾åº¦ï¼Œéœ€è¦æ•ˆç‡å’Œç²¾åº¦ä½œæƒè¡¡</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>ä¼˜ç‚¹ï¼š<ol><li>åŸç†ç®€å•ï¼Œæ”¶æ•›å¿«</li><li>å¯è§£é‡Šå¼º</li><li>ä»…éœ€å¯¹$k$è°ƒå‚</li></ol></li><li>ç¼ºç‚¹ï¼š<ol><li>$k$å€¼ä¸å¥½è°ƒå‚</li><li>å¯¹ä¸æ˜¯å‡¸çš„æ•°æ®é›†éš¾æ”¶æ•›</li><li>å¦‚æœéšå«ç±»åˆ«çš„æ•°æ®ä¸å¹³è¡¡ï¼Œåˆ™èšç±»æ•ˆæœä¸ä½³</li><li>è¿­ä»£åªæ˜¯å±€éƒ¨æœ€ä¼˜</li><li>å¯¹å™ªéŸ³å’Œå¼‚å¸¸ç‚¹æ•æ„Ÿ</li></ol></li></ul><h2 id="BIRCH"><a href="#BIRCH" class="headerlink" title="BIRCH"></a><code>BIRCH</code></h2><h2 id="DBSCAN"><a href="#DBSCAN" class="headerlink" title="DBSCAN"></a><code>DBSCAN</code></h2><h2 id="è°±èšç±»"><a href="#è°±èšç±»" class="headerlink" title="è°±èšç±»"></a>è°±èšç±»</h2><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="https://www.cnblogs.com/pinard/p/6164214.html" target="_blank" rel="noopener">     K-Meansèšç±»ç®—æ³•åŸç†         </a></li><li><a href="https://www.cnblogs.com/pinard/p/6179132.html" target="_blank" rel="noopener">     BIRCHèšç±»ç®—æ³•åŸç†         </a></li><li><a href="https://www.cnblogs.com/pinard/p/6208966.html" target="_blank" rel="noopener">     DBSCANå¯†åº¦èšç±»ç®—æ³•         </a></li><li><a href="https://www.cnblogs.com/pinard/p/6221564.html" target="_blank" rel="noopener">     è°±èšç±»ï¼ˆspectral clusteringï¼‰åŸç†æ€»ç»“         </a></li></ol>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
            <tag> åå¤§ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹å†³ç­–æ ‘</title>
      <link href="/2021/03/15/ji-qi-xue-xi-zhi-jue-ce-shu/"/>
      <url>/2021/03/15/ji-qi-xue-xi-zhi-jue-ce-shu/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/03/15/ji-qi-xue-xi-zhi-jue-ce-shu/image-20210621160625825.png" alt="image-20210621160625825"></p><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><ul><li>å†³ç­–æ ‘æ—¢å¯ä»¥åˆ†ç±»ã€ä¹Ÿå¯ä»¥å›å½’</li><li>åˆé€‚åˆé›†æˆå­¦ä¹ å¦‚éšæœºæ£®æ—ã€GBDT</li></ul><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><ul><li><p>è¾“å…¥è®­ç»ƒé›†$T = \lbrace (x_1,y_1),(x_2,y_2), \cdots ,(x_n,y_n) \rbrace$ï¼Œæ„å»ºå¦‚ä¸‹å›¾çš„ä¸€æ£µæ ‘</p><p><img src="/2021/03/15/ji-qi-xue-xi-zhi-jue-ce-shu/image-20210315195647811.png" alt="image-20210315195647811"></p></li></ul><h2 id="é¢ä¸´çš„2ä¸ªé—®é¢˜"><a href="#é¢ä¸´çš„2ä¸ªé—®é¢˜" class="headerlink" title="é¢ä¸´çš„2ä¸ªé—®é¢˜"></a>é¢ä¸´çš„2ä¸ªé—®é¢˜</h2><h3 id="å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚"><a href="#å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚" class="headerlink" title="å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚"></a>å¦‚ä½•é€‰æ‹©ç‰¹å¾è¿›è¡Œåˆ†è£‚</h3><ul><li>æ˜¾è€Œæ˜“è§ï¼Œåˆ’åˆ†åæ¯ä¸ªèŠ‚ç‚¹å†…çš„æ ·æœ¬ç±»åˆ«æ··ä¹±ç¨‹åº¦è¶Šä½ï¼ˆçº¯åº¦è¶Šé«˜ï¼‰ï¼Œåˆ™åº”è¯¥ä¼˜å…ˆåˆ’åˆ†è¿™ä¸ªç‰¹å¾</li></ul><h3 id="å•¥æ—¶å€™åœæ­¢åˆ†è£‚"><a href="#å•¥æ—¶å€™åœæ­¢åˆ†è£‚" class="headerlink" title="å•¥æ—¶å€™åœæ­¢åˆ†è£‚"></a>å•¥æ—¶å€™åœæ­¢åˆ†è£‚</h3><ul><li>æœ‰ä¸¤ç§è‡ªç„¶æƒ…å†µåº”è¯¥åœæ­¢åˆ†è£‚<ul><li>ä¸€æ˜¯è¯¥èŠ‚ç‚¹å¯¹åº”çš„æ‰€æœ‰æ ·æœ¬è®°å½•å‡å±äºåŒä¸€ç±»åˆ«ï¼Œ</li><li>äºŒæ˜¯è¯¥èŠ‚ç‚¹å¯¹åº”çš„æ‰€æœ‰æ ·æœ¬çš„ç‰¹å¾å±æ€§å€¼å‡ç›¸ç­‰ã€‚</li></ul></li><li>ä½†é™¤æ­¤ä¹‹å¤–ï¼Œæ˜¯ä¸æ˜¯è¿˜åº”è¯¥å…¶ä»–æƒ…å†µåœæ­¢åˆ†è£‚å‘¢ï¼Ÿ<ul><li>ä½¿ç”¨å‰ªææ–¹æ³•æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›</li><li>é¢„å‰ªæ</li><li>åå‰ªæ</li></ul></li></ul><h2 id="æ··ä¹±ç¨‹åº¦çš„åº¦é‡"><a href="#æ··ä¹±ç¨‹åº¦çš„åº¦é‡" class="headerlink" title="æ··ä¹±ç¨‹åº¦çš„åº¦é‡"></a>æ··ä¹±ç¨‹åº¦çš„åº¦é‡</h2><h3 id="ç†µï¼šè¶Šæ··ä¹±è¶Šå¤§"><a href="#ç†µï¼šè¶Šæ··ä¹±è¶Šå¤§" class="headerlink" title="ç†µï¼šè¶Šæ··ä¹±è¶Šå¤§"></a>ç†µï¼šè¶Šæ··ä¹±è¶Šå¤§</h3><script type="math/tex; mode=display">Entropy(t)=-\sum\limits_{k}p(c_k|t)\log p(c_k|t)</script><ul><li>$t$ï¼šæŸä¸ªç‰¹å¾èŠ‚ç‚¹</li><li>$c_k$ï¼šæ ·æœ¬æ‰€å±ç±»åˆ«</li><li>$p(c_k|t)$ï¼š$t$èŠ‚ç‚¹çš„$c_k$ç±»åˆ«å¯¹åº”æ ·æœ¬æ¯”ä¾‹ï¼Œ<ul><li>ä¾‹å¦‚DèŠ‚ç‚¹æœ‰15ä¸ªæ ·æœ¬ï¼Œè¾“å‡ºä¸º0æˆ–è€…1ã€‚å…¶ä¸­æœ‰9ä¸ªè¾“å‡ºä¸º1ï¼Œ 6ä¸ªè¾“å‡ºä¸º0ï¼Œåˆ™ç±»åˆ«1çš„æ ·æœ¬æ¯”ä¾‹ä¸ºï¼š$9/15$</li></ul></li></ul><h3 id="GINIç³»æ•°ï¼šè¶Šæ··ä¹±è¶Šå¤§"><a href="#GINIç³»æ•°ï¼šè¶Šæ··ä¹±è¶Šå¤§" class="headerlink" title="GINIç³»æ•°ï¼šè¶Šæ··ä¹±è¶Šå¤§"></a><code>GINI</code>ç³»æ•°ï¼šè¶Šæ··ä¹±è¶Šå¤§</h3><script type="math/tex; mode=display">Gini(t)=1-\sum\limits_{k}[p(c_k|t)]^2</script><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><div class="table-container"><table><thead><tr><th>ç®—æ³•</th><th>æ¨¡å‹</th><th>æ ‘ç»“æ„</th><th>ç‰¹å¾é€‰æ‹©</th><th>è¿ç»­å€¼</th><th>ç¼ºå¤±å€¼</th><th>å‰ªæ</th></tr></thead><tbody><tr><td><code>ID3</code></td><td>åˆ†ç±»</td><td>å¤šå‰</td><td>ä¿¡æ¯å¢ç›Š</td><td>no</td><td>no</td><td>no</td></tr><tr><td><code>C4.5</code></td><td>åˆ†ç±»</td><td>å¤šå‰</td><td>ä¿¡æ¯å¢ç›Šç‡</td><td>yes</td><td>yes</td><td>yes</td></tr><tr><td><code>CART</code></td><td>åˆ†è£‚ã€å›å½’</td><td>äºŒå‰</td><td><code>gini</code>ã€å‡æ–¹å·®</td><td>yes</td><td>yes</td><td>yes</td></tr></tbody></table></div><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h2 id="ID3ï¼šè‡³å°‘äºŒå‰"><a href="#ID3ï¼šè‡³å°‘äºŒå‰" class="headerlink" title="ID3ï¼šè‡³å°‘äºŒå‰"></a><code>ID3</code>ï¼šè‡³å°‘äºŒå‰</h2><h3 id="åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼šä¿¡æ¯å¢ç›Šï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ"><a href="#åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼šä¿¡æ¯å¢ç›Šï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ" class="headerlink" title="åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼šä¿¡æ¯å¢ç›Šï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ"></a>åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼šä¿¡æ¯å¢ç›Šï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ</h3><script type="math/tex; mode=display">\Delta = Entropy(parent) - \sum\limits_{i=1}^{n}{N(a_i)\over N}Entropy(a_i)</script><ul><li>$a_i$ï¼š$parent$èŠ‚ç‚¹æ ¹æ®ç‰¹å¾$X$åˆ†è£‚æˆçš„å­èŠ‚ç‚¹</li><li>$N$ï¼š$parent$èŠ‚ç‚¹å¯¹åº”çš„æ ·æœ¬é‡</li><li>$N(a_i)$ï¼š$a_i$èŠ‚ç‚¹å¯¹åº”çš„æ ·æœ¬é‡</li></ul><h3 id="ç®—æ³•æ­¥éª¤"><a href="#ç®—æ³•æ­¥éª¤" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h3><ul><li>è¾“å…¥ï¼š<ul><li>$m$ä¸ªæ ·æœ¬ï¼Œæ ·æœ¬ç±»åˆ«é›†åˆ$D$ï¼Œ</li><li>æ¯ä¸ªæ ·æœ¬æœ‰$n$ä¸ª<code>ç¦»æ•£</code>ç‰¹å¾ï¼Œç‰¹å¾é›†åˆ$A$</li></ul></li><li>è¾“å‡ºï¼š<ul><li>å†³ç­–æ ‘$T$</li></ul></li><li>è¿‡ç¨‹<ol><li>åˆå§‹åŒ–ä¿¡æ¯å¢ç›Šçš„é˜ˆå€¼$\epsilon$</li><li>åˆ¤æ–­æ˜¯å¦æ»¡è¶³è‡ªç„¶åˆ†è£‚æ¡ä»¶ï¼š<ol><li>åˆ¤æ–­æ ·æœ¬æ˜¯å¦ä¸ºåŒä¸€ç±»åˆ«è¾“å‡º$L_i$ï¼Œå¦‚æœæ˜¯åˆ™è¿”å›å•èŠ‚ç‚¹æ ‘$T$ã€‚æ ‡è®°ç±»åˆ«ä¸º$L_i$</li><li>åˆ¤æ–­ç‰¹å¾æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯åˆ™è¿”å›å•èŠ‚ç‚¹æ ‘$T$ã€‚æ ‡è®°ç±»åˆ«ä¸ºæ ·æœ¬ç±»åˆ«é›†åˆ$D$ä¸­å®ä¾‹æ•°æœ€å¤šçš„ç±»åˆ«</li></ol></li><li>è®¡ç®—ç‰¹å¾é›†åˆ$A$ä¸­çš„å„ä¸ªç‰¹å¾å¯¹$D$çš„<code>ä¿¡æ¯å¢ç›Š</code>ï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾$A_g$è¿›è¡Œåˆ†è£‚</li><li>å¦‚æœ$A_g$çš„ä¿¡æ¯å¢ç›Šå°äº$\epsilon$ï¼Œåˆ™è¿”å›å•èŠ‚ç‚¹æ•°$T$ï¼Œæ ‡è®°ç±»åˆ«ä¸ºæ ·æœ¬ç±»åˆ«é›†åˆ$D$ä¸­å®ä¾‹æ•°æœ€å¤šçš„ç±»åˆ«</li><li>å¦åˆ™ï¼ŒæŒ‰ç‰¹å¾$A_g$çš„ä¸åŒå–å€¼å°†å¯¹åº”æ ·æœ¬ç±»åˆ«$D$åˆ†æˆä¸åŒçš„ç±»åˆ«é›†åˆ$D_i$ã€‚æ¯ä¸ªç±»åˆ«äº§ç”Ÿä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå¯¹åº”ç‰¹å¾å€¼ä¸º$A_{gi}$ã€‚è¿”å›å¢åŠ äº†èŠ‚ç‚¹çš„æ ‘$T$</li><li>å¯¹äºæ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œä»¤$D=D_i,A=A-\{A_g\}$ï¼Œé‡å¤2-6æ­¥</li><li>å¾—åˆ°æ ‘$T$</li></ol></li></ul><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><ul><li>ç¼ºç‚¹ï¼š<ol><li>æ²¡æœ‰è€ƒè™‘<code>è¿ç»­ç‰¹å¾</code></li><li>æ²¡æœ‰è€ƒè™‘<code>ç¼ºå¤±å€¼</code></li><li>åˆ†è£‚ç›®æ ‡å‡½æ•°ä½¿ç”¨ä¿¡æ¯å¢ç›Šçš„æ–¹å¼ï¼Œåœ¨ç›¸åŒæ¡ä»¶ä¸‹ï¼Œå–å€¼æ¯”è¾ƒå¤šçš„ç‰¹å¾æ¯”å–å€¼å°‘çš„ç‰¹å¾ä¿¡æ¯å¢ç›Šå¤§ï¼Œè¿™æ ·ä¼šæœ‰å¤±åé¢‡</li><li>æ²¡æœ‰è€ƒè™‘è¿‡æ‹Ÿåˆé—®é¢˜</li></ol></li></ul><h2 id="C4-5ï¼šè‡³å°‘äºŒå‰ï¼Œå¯¹ID3çš„æ”¹è¿›ç‰ˆ"><a href="#C4-5ï¼šè‡³å°‘äºŒå‰ï¼Œå¯¹ID3çš„æ”¹è¿›ç‰ˆ" class="headerlink" title="C4.5ï¼šè‡³å°‘äºŒå‰ï¼Œå¯¹ID3çš„æ”¹è¿›ç‰ˆ"></a><code>C4.5</code>ï¼šè‡³å°‘äºŒå‰ï¼Œå¯¹<code>ID3</code>çš„æ”¹è¿›ç‰ˆ</h2><h3 id="æ”¹è¿›çš„åœ°æ–¹"><a href="#æ”¹è¿›çš„åœ°æ–¹" class="headerlink" title="æ”¹è¿›çš„åœ°æ–¹"></a>æ”¹è¿›çš„åœ°æ–¹</h3><ol><li>å¯¹è¿ç»­ç‰¹å¾ç¦»æ•£åŒ–ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œä¸ç¦»æ•£å±æ€§ä¸åŒçš„æ˜¯ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºè¿ç»­å±æ€§ï¼Œåˆ™è¯¥å±æ€§åé¢è¿˜å¯ä»¥å‚ä¸å­èŠ‚ç‚¹çš„äº§ç”Ÿé€‰æ‹©è¿‡ç¨‹</li><li>é’ˆå¯¹ç¼ºå¤±å€¼å¤„ç†ï¼Œä¸»è¦éœ€è¦è§£å†³çš„æ˜¯ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜<ol><li>ä¸€æ˜¯åœ¨æŸä¸ªç‰¹å¾æœ‰ç¼ºå¤±å€¼æ—¶ï¼Œæ€ä¹ˆåˆ†è£‚è¿™ä¸ªç‰¹å¾<ul><li>å°†æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¯¹æ¯ä¸ªæ ·æœ¬è®¾ç½®ä¸€ä¸ªæƒé‡ï¼ˆåˆå§‹å¯ä»¥éƒ½ä¸º1ï¼‰ï¼Œç„¶ååˆ’åˆ†æ•°æ®ï¼Œä¸€éƒ¨åˆ†æ˜¯æœ‰ç‰¹å¾å€¼Açš„æ•°æ®<code>D1</code>ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯æ²¡æœ‰ç‰¹å¾Açš„æ•°æ®<code>D2</code></li><li>ç„¶åå¯¹äºæ²¡æœ‰ç¼ºå¤±ç‰¹å¾Açš„æ•°æ®é›†<code>D1</code>æ¥å’Œå¯¹åº”çš„Aç‰¹å¾çš„å„ä¸ªç‰¹å¾å€¼ä¸€èµ·è®¡ç®—åŠ æƒé‡åçš„ä¿¡æ¯å¢ç›Šæ¯”ï¼Œ</li><li>æœ€åä¹˜ä¸Šä¸€ä¸ªç³»æ•°ï¼Œè¿™ä¸ªç³»æ•°æ˜¯æ— ç‰¹å¾Aç¼ºå¤±çš„æ ·æœ¬åŠ æƒåæ‰€å åŠ æƒæ€»æ ·æœ¬çš„æ¯”ä¾‹</li></ul></li><li>äºŒæ˜¯é€‰å®šäº†åˆ’åˆ†å±æ€§ï¼Œå¯¹äºåœ¨è¯¥å±æ€§ä¸Šç¼ºå¤±æ ·æœ¬åº”è¯¥å¦‚ä½•å¤„ç†<ul><li>å¯ä»¥å°†ç¼ºå¤±ç‰¹å¾çš„æ ·æœ¬åŒæ—¶åˆ’åˆ†å…¥æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œä¸è¿‡å°†è¯¥æ ·æœ¬çš„æƒé‡æŒ‰å„ä¸ªå­èŠ‚ç‚¹æ ·æœ¬çš„æ•°é‡æ¯”ä¾‹æ¥åˆ†é…ã€‚</li><li>æ¯”å¦‚ç¼ºå¤±ç‰¹å¾Açš„æ ·æœ¬aä¹‹å‰æƒé‡ä¸º1ï¼Œç‰¹å¾Aæœ‰3ä¸ªç‰¹å¾å€¼<code>A1,A2,A3</code>ã€‚ 3ä¸ªç‰¹å¾å€¼å¯¹åº”çš„æ— ç¼ºå¤±Aç‰¹å¾çš„æ ·æœ¬ä¸ªæ•°ä¸º<code>2,3,4</code>.åˆ™aåŒæ—¶åˆ’åˆ†å…¥<code>A1ï¼ŒA2ï¼ŒA3</code>ã€‚å¯¹åº”æƒé‡è°ƒèŠ‚ä¸º<code>2/9,3/9, 4/9</code>ã€‚</li></ul></li></ol></li><li>ä¿¡æ¯å¢ç›Šä½œä¸ºæ ‡å‡†å®¹æ˜“åå‘äºå–å€¼è¾ƒå¤šçš„ç‰¹å¾çš„é—®é¢˜ã€‚<code>C4.5</code>å¼•å…¥ä¸€ä¸ª<code>ä¿¡æ¯å¢ç›Šæ¯”</code>çš„å˜é‡</li><li><code>C4.5</code>å¼•å…¥äº†æ­£åˆ™åŒ–ç³»æ•°è¿›è¡Œåˆæ­¥çš„å‰ªæï¼Œå¤„ç†è¿‡æ‹Ÿåˆé—®é¢˜</li></ol><h3 id="åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ"><a href="#åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ" class="headerlink" title="åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ"></a>åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå¤§ï¼Œè¶Šé€‚åˆ</h3><script type="math/tex; mode=display">Gain \ ratio = {\Delta \over Entropy(parent)}</script><h3 id="ç®—æ³•æ­¥éª¤-1"><a href="#ç®—æ³•æ­¥éª¤-1" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h3><ul><li>åŒ<code>ID3</code></li></ul><h3 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><ul><li>ç¼ºç‚¹<ol><li>ç”±äºå†³ç­–æ ‘ç®—æ³•éå¸¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå› æ­¤å¯¹äºç”Ÿæˆçš„å†³ç­–æ ‘å¿…é¡»è¦è¿›è¡Œå‰ªæã€‚å‰ªæçš„ç®—æ³•æœ‰éå¸¸å¤šï¼Œ<code>C4.5</code>çš„å‰ªææ–¹æ³•æœ‰ä¼˜åŒ–çš„ç©ºé—´ã€‚æ€è·¯ä¸»è¦æ˜¯ä¸¤ç§ï¼Œ<ol><li>ä¸€ç§æ˜¯é¢„å‰ªæï¼Œå³åœ¨ç”Ÿæˆå†³ç­–æ ‘çš„æ—¶å€™å°±å†³å®šæ˜¯å¦å‰ªæã€‚</li><li>å¦ä¸€ä¸ªæ˜¯åå‰ªæï¼Œå³å…ˆç”Ÿæˆå†³ç­–æ ‘ï¼Œå†é€šè¿‡äº¤å‰éªŒè¯æ¥å‰ªæã€‚</li></ol></li><li>ç”Ÿæˆçš„æ˜¯å¤šå‰æ ‘ï¼Œå³ä¸€ä¸ªçˆ¶èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªèŠ‚ç‚¹ã€‚å¾ˆå¤šæ—¶å€™ï¼Œåœ¨è®¡ç®—æœºä¸­äºŒå‰æ ‘æ¨¡å‹ä¼šæ¯”å¤šå‰æ ‘è¿ç®—æ•ˆç‡é«˜ã€‚å¦‚æœé‡‡ç”¨äºŒå‰æ ‘ï¼Œå¯ä»¥æé«˜æ•ˆç‡</li><li>åªèƒ½ç”¨äºåˆ†ç±»ï¼Œå¦‚æœèƒ½å°†å†³ç­–æ ‘ç”¨äºå›å½’çš„è¯å¯ä»¥æ‰©å¤§å®ƒçš„ä½¿ç”¨èŒƒå›´</li><li>ç”±äºä½¿ç”¨äº†ç†µæ¨¡å‹ï¼Œé‡Œé¢æœ‰å¤§é‡çš„è€—æ—¶çš„å¯¹æ•°è¿ç®—ï¼Œè¿™å¯¹æœ‰è¿ç»­å€¼ä¸”è¿˜æœ‰å¤§é‡çš„æ’åºè¿ç®—æ—¶ï¼Œè€—æ—¶ç³Ÿç³•</li></ol></li></ul><h2 id="CARTï¼šåªèƒ½äºŒå‰ï¼Œä¸‰ä¸ªç®—æ³•ä¸­æœ€ä¼˜"><a href="#CARTï¼šåªèƒ½äºŒå‰ï¼Œä¸‰ä¸ªç®—æ³•ä¸­æœ€ä¼˜" class="headerlink" title="CARTï¼šåªèƒ½äºŒå‰ï¼Œä¸‰ä¸ªç®—æ³•ä¸­æœ€ä¼˜"></a><code>CART</code>ï¼šåªèƒ½äºŒå‰ï¼Œä¸‰ä¸ªç®—æ³•ä¸­æœ€ä¼˜</h2><h3 id="æ”¹è¿›çš„åœ°æ–¹-1"><a href="#æ”¹è¿›çš„åœ°æ–¹-1" class="headerlink" title="æ”¹è¿›çš„åœ°æ–¹"></a>æ”¹è¿›çš„åœ°æ–¹</h3><ol><li>ä½¿ç”¨<code>GINIç³»æ•°</code>ï¼Œå‡å°‘è®¡ç®—è€—æ—¶</li><li>åªèƒ½äºŒå‰ï¼Œå³æ¯ä¸ªç‰¹å¾åªèƒ½åˆ†è£‚ä¸¤ä¸ªå­èŠ‚ç‚¹<ol><li>å¯¹äºç¦»æ•£ç‰¹å¾ï¼Œå¦‚æœ‰å¤šä¸ªç±»åˆ«ï¼Œåˆ™ä¸åœäºŒåˆ†ï¼Œç„¶åæ‰¾å‡º<code>GINI</code>ç³»æ•°æœ€å°çš„é‚£ä¸ªåˆ†è£‚</li><li>å¯¹äºè¿ç»­ç‰¹å¾ï¼Œåˆ™æŒ‰å€¼ä»å°åˆ°å¤§æ’åˆ—ï¼Œä¸æ–­äºŒåˆ†ï¼Œæ‰¾å‡º<code>GINI</code>ç³»æ•°æœ€å°çš„é‚£ä¸ªåˆ†è£‚</li></ol></li><li></li></ol><h3 id="åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå°ï¼Œè¶Šé€‚åˆ"><a href="#åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå°ï¼Œè¶Šé€‚åˆ" class="headerlink" title="åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå°ï¼Œè¶Šé€‚åˆ"></a>åˆ†è£‚ç›®æ ‡å‡½æ•°ï¼Œè¶Šå°ï¼Œè¶Šé€‚åˆ</h3><script type="math/tex; mode=display">Gini(D, X) = \frac{|D_1|}{|D|}Gini(D_1) + \frac{|D_2|}{|D|}Gini(D_2)</script><h3 id="ç®—æ³•æ­¥éª¤-2"><a href="#ç®—æ³•æ­¥éª¤-2" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h3><ul><li>è¾“å…¥ï¼š<ul><li>$m$ä¸ªæ ·æœ¬ï¼Œæ ·æœ¬ç±»åˆ«é›†åˆ$D$ï¼Œ</li><li>ç‰¹å¾é›†åˆ$A$</li><li><code>gini</code>ç³»æ•°çš„é˜ˆå€¼ï¼Œ</li><li>æ ·æœ¬ä¸ªæ•°é˜ˆå€¼</li></ul></li><li>è¾“å‡ºï¼š<ul><li>å†³ç­–æ ‘$T$</li></ul></li><li>è¿‡ç¨‹<ol><li>åˆ¤æ–­æ˜¯å¦æ»¡è¶³è‡ªç„¶åˆ†è£‚æ¡ä»¶ï¼š<ol><li>åˆ¤æ–­æ ·æœ¬æ˜¯å¦ä¸ºåŒä¸€ç±»åˆ«è¾“å‡º$L_i$ï¼Œå¦‚æœæ˜¯åˆ™è¿”å›å•èŠ‚ç‚¹æ ‘$T$ã€‚æ ‡è®°ç±»åˆ«ä¸º$L_i$</li><li>åˆ¤æ–­ç‰¹å¾æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯åˆ™è¿”å›å•èŠ‚ç‚¹æ ‘$T$ã€‚æ ‡è®°ç±»åˆ«ä¸ºæ ·æœ¬ç±»åˆ«é›†åˆ$D$ä¸­å®ä¾‹æ•°æœ€å¤šçš„ç±»åˆ«</li></ol></li><li>åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼š<ol><li>åˆ¤æ–­æ ·æœ¬ä¸ªæ•°æ˜¯å¦å°äºé˜ˆå€¼ï¼Œæ˜¯åˆ™è¿”å›</li></ol></li><li>è®¡ç®—ç‰¹å¾é›†åˆ$A$ä¸­çš„å„ä¸ªç‰¹å¾å¯¹$D$çš„<code>giniç³»æ•°</code>ï¼Œé€‰æ‹©å€¼æœ€å°çš„ç‰¹å¾$A_g$è¿›è¡Œåˆ†è£‚<ol><li>å¯¹äºç¦»æ•£ã€è¿ç»­å€¼åˆ†è£‚è§æ”¹è¿›çš„åœ°æ–¹</li><li>å¯¹äºç¼ºå¤±å€¼ï¼Œå¤„ç†åŒ<code>C4.5</code></li></ol></li><li>å¦‚æœ$A_g$çš„<code>giniç³»æ•°</code>å°äº$\epsilon$ï¼Œåˆ™è¿”å›å•èŠ‚ç‚¹æ•°$T$ï¼Œæ ‡è®°ç±»åˆ«ä¸ºæ ·æœ¬ç±»åˆ«é›†åˆ$D$ä¸­å®ä¾‹æ•°æœ€å¤šçš„ç±»åˆ«</li><li>å¦åˆ™ï¼ŒæŒ‰åˆ†è£‚ç‰¹å¾å¯¹åº”çš„æ ·æœ¬ç±»åˆ«$D$åˆ†æˆä¸åŒçš„ç±»åˆ«é›†åˆ$D_i$ã€‚æ¯ä¸ªç±»åˆ«äº§ç”Ÿä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå¯¹åº”ç‰¹å¾å€¼ä¸º$A_{gi}$ã€‚è¿”å›å¢åŠ äº†èŠ‚ç‚¹çš„æ ‘$T$</li><li>å¯¹å·¦å³èŠ‚ç‚¹é‡å¤1-5æ­¥</li><li>å¾—åˆ°æ ‘$T$</li></ol></li></ul><h3 id="CARTå›å½’æ ‘"><a href="#CARTå›å½’æ ‘" class="headerlink" title="CARTå›å½’æ ‘"></a><code>CART</code>å›å½’æ ‘</h3><ul><li><p>å¦‚æœæ ·æœ¬è¾“å‡ºæ˜¯è¿ç»­å€¼ï¼Œåˆ™æ˜¯å›å½’æ ‘</p></li><li><p>é™¤äº†æ¦‚å¿µçš„ä¸åŒï¼Œ<code>CART</code>å›å½’æ ‘å’Œåˆ†ç±»æ ‘çš„å»ºç«‹å’Œé¢„æµ‹åŒºåˆ«ä¸»è¦æ˜¯ï¼š</p><ol><li><p>è¿ç»­å€¼çš„å¤„ç†æ–¹æ³•ä¸åŒ</p><ul><li>åˆ†ç±»æ ‘ä½¿ç”¨çš„æ˜¯<code>gini</code>ç³»æ•°ï¼Œè€Œå›å½’æ ‘ä½¿ç”¨å‡æ–¹è¯¯å·®æœ€å°æ¥è¿›è¡Œç‰¹å¾åˆ†è£‚ï¼Œå…¬å¼å¦‚ä¸‹<script type="math/tex; mode=display">\underbrace{min}_{A,s}\Bigg[\underbrace{min}_{c_1}\sum\limits_{x_i \in D_1(A,s)}(y_i - c_1)^2 + \underbrace{min}_{c_2}\sum\limits_{x_i \in D_2(A,s)}(y_i - c_2)^2\Bigg]</script></li></ul></li></ol></li></ul><ol><li><p>æ ‘å»ºç«‹åé¢„æµ‹çš„æ–¹å¼ä¸åŒ</p><ul><li>å›å½’æ ‘ä½¿ç”¨å¶å­èŠ‚ç‚¹çš„å‡å€¼æ¥ä½œä¸ºæ ·æœ¬é¢„æµ‹è¾“å‡º</li></ul></li></ol><h3 id="å‰ªæ"><a href="#å‰ªæ" class="headerlink" title="å‰ªæ"></a>å‰ªæ</h3><ul><li>ç”±äºå†³ç­–æ—¶ç®—æ³•å¾ˆå®¹æ˜“å¯¹è®­ç»ƒé›†è¿‡æ‹Ÿåˆï¼Œè€Œå¯¼è‡´æ³›åŒ–èƒ½åŠ›å·®ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¯¹CARTæ ‘è¿›è¡Œå‰ªæï¼Œ</li><li>å³ç±»ä¼¼äºçº¿æ€§å›å½’çš„æ­£åˆ™åŒ–ï¼Œæ¥å¢åŠ å†³ç­–æ ‘çš„æ³›åŒ–èƒ½åŠ›</li><li><code>CART</code>ä½¿ç”¨åå‰ªæ</li></ul><h4 id="é¢„å‰ªæ"><a href="#é¢„å‰ªæ" class="headerlink" title="é¢„å‰ªæ"></a>é¢„å‰ªæ</h4><h4 id="åå‰ªæ"><a href="#åå‰ªæ" class="headerlink" title="åå‰ªæ"></a>åå‰ªæ</h4><ul><li>å…ˆç”Ÿæˆå†³ç­–æ ‘ï¼Œç„¶åäº§ç”Ÿæ‰€æœ‰å¯èƒ½çš„å‰ªæåçš„æ ‘</li><li>ç„¶åä½¿ç”¨äº¤å‰éªŒè¯æ¥æ£€éªŒå„ç§å‰ªæåçš„æ ‘çš„æ•ˆæœï¼Œé€‰æ‹©æ³›åŒ–èƒ½åŠ›æœ€å¥½çš„æ ‘</li><li>å‰ªææ­¥éª¤ï¼š<ol><li>ç¡®å®šæŸå¤±å‡½æ•°ï¼š$C_{\alpha}(T_t) = C(T_t) + \alpha |T_t|$<ol><li>$C(T_t)$ï¼šé¢„æµ‹è¯¯å·®ï¼Œå›å½’æ ‘æ˜¯å‡æ–¹è¯¯å·®ï¼Œåˆ†ç±»æ ‘æ˜¯<code>GINI</code>ç³»æ•°</li><li>$\alpha$ï¼šæ­£åˆ™åŒ–å‚æ•°ï¼Œè¶Šå¤§å‰ªæè¶Šå‰å®³</li><li>$|T_t|$ï¼šå¶å­èŠ‚ç‚¹æ•°é‡</li></ol></li><li>åˆå§‹åŒ–$i=0,T=T_0$ï¼Œæœ€ä¼˜å­æ ‘é›†åˆ$w=\{T\}$</li><li>ä»å¶å­èŠ‚ç‚¹è‡ªä¸‹è€Œä¸Šçš„æŠŠæ‰€æœ‰èŠ‚ç‚¹æ˜¯å¦å‰ªæçš„å€¼$\alpha$è®¡ç®—å‡ºæ¥</li><li>å¾—åˆ°æœ€å°çš„$\alpha$ä»¥åŠå¯¹åº”çš„æœ€ä¼˜å­æ ‘$T_i$</li><li>æœ€ä¼˜å­æ ‘é›†åˆ$w=w \cup T_i$</li><li>ä»¤$i=i+1,T=T_i$ï¼Œé‡å¤2-5æ­¥</li><li>æœ€åå¾—åˆ°æœ€ä¼˜å­æ ‘é›†åˆ$w=\{T,T_0,T_1,â€¦\}$</li><li>å¯¹æœ€ä¼˜å­æ ‘é›†åˆçš„æ¯ä¸€é¢—æ ‘å»éªŒè¯é›†é¢„æµ‹ï¼Œå¾—åˆ°æ³›åŒ–èƒ½åŠ›æœ€å¥½çš„å­æ ‘</li></ol></li></ul><h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="chrome-extension://cdonnmffkdaoajfknoeeecmchibpmkmg/assets/pdf/web/viewer.html?file=https%3A%2F%2Flink.springer.com%2Fcontent%2Fpdf%2F10.1007%2FBF00116251.pdf" target="_blank" rel="noopener">Induction of Decision Trees </a></li><li><a href>Classification and regression treesï¼šBreiman.etl</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%86%B3%E7%AD%96%E6%A0%91%E5%AD%A6%E4%B9%A0" target="_blank" rel="noopener">wikiï¼šå†³ç­–æ ‘å­¦ä¹ </a></li><li><a href="https://www.cnblogs.com/pinard/p/6050306.html" target="_blank" rel="noopener">å†³ç­–æ ‘ç®—æ³•åŸç†(ä¸Š)</a></li><li><a href="https://www.cnblogs.com/en-heng/p/5013995.html" target="_blank" rel="noopener">ã€åå¤§ç»å…¸æ•°æ®æŒ–æ˜ç®—æ³•ã€‘C4.5</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
            <tag> åå¤§ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹KNN</title>
      <link href="/2021/03/15/ji-qi-xue-xi-zhi-knn/"/>
      <url>/2021/03/15/ji-qi-xue-xi-zhi-knn/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><ul><li><p>è¾“å…¥ï¼š</p><ul><li>$x$ï¼šå¾…åˆ†ç±»çš„é¢„æµ‹æ ·æœ¬ï¼Œ</li><li>$k$ï¼šæœ€è¿‘çš„$k$ä¸ªä½œä¸ºæ ‡å‡†</li><li>$T = \lbrace (x_1,y_1),(x_2,y_2), \cdots ,(x_n,y_n) \rbrace$ï¼šè®­ç»ƒé›†ï¼Œæ˜¯å¤šç»´ç‰¹å¾ç©ºé—´å‘é‡ï¼Œå…¶ä¸­æ¯ä¸ªè®­ç»ƒæ ·æœ¬å¸¦æœ‰ä¸€ä¸ªç±»åˆ«æ ‡ç­¾</li><li>è·ç¦»åº¦é‡ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†<a href="https://zh.wikipedia.org/wiki/æ¬§æ°è·ç¦»" target="_blank" rel="noopener">æ¬§æ°è·ç¦»</a>ä½œä¸ºè·ç¦»åº¦é‡ï¼Œä½†æ˜¯è¿™æ˜¯åªé€‚ç”¨äºè¿ç»­å˜é‡ã€‚åœ¨æ–‡æœ¬åˆ†ç±»è¿™ç§ç¦»æ•£å˜é‡æƒ…å†µä¸‹ï¼Œå¦ä¸€ä¸ªåº¦é‡â€”â€”<strong>é‡å åº¦é‡</strong>ï¼ˆæˆ–<a href="https://zh.wikipedia.org/wiki/æµ·æ˜è·ç¦»" target="_blank" rel="noopener">æµ·æ˜è·ç¦»</a>ï¼‰å¯ä»¥ç”¨æ¥ä½œä¸ºåº¦é‡</li></ul></li><li><p>è¾“å‡ºï¼š</p><ul><li>$y$ï¼šå¾…åˆ†ç±»é¢„æµ‹æ ·æœ¬$x$å¯¹åº”çš„ç±»åˆ«</li></ul></li><li><p>å†³ç­–è§„åˆ™ï¼š</p><script type="math/tex; mode=display">\begin{equation} y = \arg \mathop {\max }\limits_{c_j} \sum\limits_{x_i \in n_k(x)} I(y_i = c_j),\ i = 1,2, \cdots ,n; \ j = 1,2, \cdots ,k \label{eq:obj} \end{equation}</script><ul><li>æ‰¾å‡ºè®­ç»ƒæ ·æœ¬é›†ä¸­ä¸é¢„æµ‹æ ·æœ¬$x$è·ç¦»ç›¸è¿‘çš„$k$ä¸ªæ ·æœ¬ï¼Œæ ¹æ®è¿™$k$ä¸ªæ ·æœ¬å¯¹åº”çš„ç±»åˆ«ï¼Œé‡‡å–<strong>å¤šæ•°è¡¨å†³</strong>çš„è§„åˆ™æ¥ç¡®å®šé¢„æµ‹æ ·æœ¬$x$çš„ç±»åˆ«</li></ul></li></ul><h2 id="å‚æ•°é€‰æ‹©"><a href="#å‚æ•°é€‰æ‹©" class="headerlink" title="å‚æ•°é€‰æ‹©"></a>å‚æ•°é€‰æ‹©</h2><h3 id="k"><a href="#k" class="headerlink" title="$k$"></a>$k$</h3><ul><li>åœ¨äºŒå…ƒï¼ˆä¸¤ç±»ï¼‰åˆ†ç±»é—®é¢˜ä¸­ï¼Œé€‰å–$k$ä¸ºå¥‡æ•°æœ‰åŠ©äºé¿å…ä¸¤ä¸ªåˆ†ç±»å¹³ç¥¨çš„æƒ…å½¢</li><li>åœ¨æ­¤é—®é¢˜ä¸‹ï¼Œé€‰å–æœ€ä½³ç»éªŒ$k$å€¼çš„æ–¹æ³•æ˜¯<a href="https://zh.wikipedia.org/wiki/è‡ªåŠ©æ³•" target="_blank" rel="noopener">è‡ªåŠ©æ³•</a></li><li>å¸¸ç”¨çš„æ˜¯äº¤å‰éªŒè¯æ–¹æ³•æ¥é€‰å–$k$</li></ul><h3 id="è·ç¦»åº¦é‡"><a href="#è·ç¦»åº¦é‡" class="headerlink" title="è·ç¦»åº¦é‡"></a>è·ç¦»åº¦é‡</h3><ul><li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†<a href="https://zh.wikipedia.org/wiki/æ¬§æ°è·ç¦»" target="_blank" rel="noopener">æ¬§æ°è·ç¦»</a>ä½œä¸ºè·ç¦»åº¦é‡ï¼Œä½†æ˜¯è¿™æ˜¯åªé€‚ç”¨äºè¿ç»­å˜é‡ã€‚åœ¨æ–‡æœ¬åˆ†ç±»è¿™ç§ç¦»æ•£å˜é‡æƒ…å†µä¸‹ï¼Œå¦ä¸€ä¸ªåº¦é‡â€”â€”<strong>é‡å åº¦é‡</strong>ï¼ˆæˆ–<a href="https://zh.wikipedia.org/wiki/æµ·æ˜è·ç¦»" target="_blank" rel="noopener">æµ·æ˜è·ç¦»</a>ï¼‰å¯ä»¥ç”¨æ¥ä½œä¸ºåº¦é‡</li></ul><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h2 id="ä¿®æ­£ä¹‹åŠ æƒKNN"><a href="#ä¿®æ­£ä¹‹åŠ æƒKNN" class="headerlink" title="ä¿®æ­£ä¹‹åŠ æƒKNN"></a>ä¿®æ­£ä¹‹åŠ æƒ<code>KNN</code></h2><ul><li><p>ä¸Šé¢æåˆ°çš„è®¡ç®—è§„åˆ™ä¸­ï¼Œ$k$é‚»åŸŸçš„æ ·æœ¬ç‚¹å¯¹é¢„æµ‹ç»“æœçš„è´¡çŒ®åº¦æ˜¯ç›¸ç­‰çš„</p></li><li><p>ä½†æˆ‘ä»¬ç›´è§‚ç†è§£ï¼Œè·ç¦»æ›´è¿‘çš„æ ·æœ¬ç‚¹åº”æœ‰æ›´å¤§çš„ç›¸ä¼¼åº¦ï¼Œå…¶è´¡çŒ®åº¦åº”æ¯”è·ç¦»æ›´è¿œçš„æ ·æœ¬ç‚¹å¤§</p></li><li><p>æ‰€ä»¥å¯ä»¥åŠ ä¸Šæƒå€¼$w_i = \frac{1}{\left| {x_i - x} \right|}$è¿›è¡Œä¿®æ­£ï¼Œåˆ™å¼(1)å˜æˆï¼š</p><script type="math/tex; mode=display">\begin{equation} y = \arg \mathop {\max }\limits_{c_j} \sum\limits_{x_i \in n_k(x)} {w_i \times I(y_i = c_j)},\ i = 1,2, \cdots ,n; \ j = 1,2, \cdots ,k \label{eq:obj1} \end{equation}</script></li></ul><h2 id="åŠ å¿«è®¡ç®—ä¹‹KDæ ‘"><a href="#åŠ å¿«è®¡ç®—ä¹‹KDæ ‘" class="headerlink" title="åŠ å¿«è®¡ç®—ä¹‹KDæ ‘"></a>åŠ å¿«è®¡ç®—ä¹‹<code>KD</code>æ ‘</h2><h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href>Michael Steinbach and Pang-Ning Tan, The Top Ten Algorithms in Data Mining.</a></li><li><a href="https://zh.wikipedia.org/wiki/K-%E8%BF%91%E9%82%BB%E7%AE%97%E6%B3%95" target="_blank" rel="noopener">wiki-Kè¿‘é‚»ç®—æ³•</a></li><li><a href="https://www.cnblogs.com/en-heng/p/5000628.html" target="_blank" rel="noopener">ã€åå¤§ç»å…¸æ•°æ®æŒ–æ˜ç®—æ³•ã€‘kNN</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
            <tag> åå¤§ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ä¹‹å›¾åƒè¯†åˆ«</title>
      <link href="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/"/>
      <url>/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/</url>
      
        <content type="html"><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><h2 id="OCR"><a href="#OCR" class="headerlink" title="OCR"></a>OCR</h2><ul><li>OCRï¼Œå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼Œå¤§å®¶å¯èƒ½éƒ½ç”¨è¿‡ï¼Œå°±æ˜¯å°†å›¾ç‰‡ä¸­çš„æ–‡å­—æå–å‡ºæ¥å½¢æˆæ–‡æœ¬</li><li>é‚£åœ¨ç®—æ³•ä¸Šå¦‚ä½•åšå‘¢ï¼Ÿå¦‚ä¸‹å›¾<ul><li>é¦–å…ˆæ˜¯è¿›è¡Œæ–‡å­—æ‰€åœ¨åŒºåŸŸæ£€æµ‹</li><li>ç„¶åè¯†åˆ«æ£€æµ‹åˆ°çš„åŒºåŸŸ</li></ul></li></ul><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/000025.jpg" alt="000025" style="zoom:25%;"></p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/000025_seg1_cnocr.png" alt="000025_seg1_cnocr"></p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/000025_segr1_cnocr.jpg" alt="000025_segr1_cnocr"></p><h1 id="Related-Works"><a href="#Related-Works" class="headerlink" title="Related Works"></a>Related Works</h1><h2 id="text-detection"><a href="#text-detection" class="headerlink" title="text detection"></a>text detection</h2><ol><li><p><a href="https://arxiv.org/abs/1911.08947" target="_blank" rel="noopener">DBNet</a>(AAAIâ€™2020): <a href="https://zhuanlan.zhihu.com/p/94677957" target="_blank" rel="noopener">detail</a>ï¼Œé€Ÿåº¦å‡†ç¡®æ€§å…¼é¡¾ï¼Œæ”¯æŒå¼¯æ›²æ–‡æœ¬æ£€æµ‹ã€‚å¯å¾®äºŒå€¼åŒ–çš„å®æ—¶åœºæ™¯æ–‡æœ¬æ£€æµ‹ï¼Œä½¿ç”¨FPN(ç‰¹å¾é‡‘å­—å¡”)ç»“æ„ï¼Œåœ¨ç²¾åº¦ã€æ•ˆç‡ä¸Šéƒ½è¡¨ç°ä¼˜ç§€ï¼Œæ”¯æŒå¼¯æ›²æ–‡æœ¬æ£€æµ‹ï¼Œä½†æ˜¯æ— æ³•å¤„ç†æ–‡æœ¬åŒ…å«æ–‡æœ¬</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@article{Liao_Wan_Yao_Chen_Bai_2020,    title={Real-Time Scene Text Detection with Differentiable Binarization},    journal={Proceedings of the AAAI Conference on Artificial Intelligence},    author={Liao, Minghui and Wan, Zhaoyi and Yao, Cong and Chen, Kai and Bai, Xiang},    year={2020},    pages={11474-11481}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/1703.06870" target="_blank" rel="noopener">Mask R-CNN</a>(ICCVâ€™2017): <a href="https://zhuanlan.zhihu.com/p/37998710" target="_blank" rel="noopener">detail</a>ï¼ŒResNet-FPN+Fast RCNN+maskã€‚ResNet-FPN+Fast RCNN+mask(ç›®æ ‡æ©ç )ï¼Œä¸»è¦ç”¨äºç›®æ ‡æ£€æµ‹</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@INPROCEEDINGS{8237584,    author={K. {He} and G. {Gkioxari} and P. {DollÃ¡r} and R. {Girshick}},    booktitle={2017 IEEE International Conference on Computer Vision (ICCV)},    title={Mask R-CNN},    year={2017},    pages={2980-2988},    doi={10.1109/ICCV.2017.322}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/1908.05900" target="_blank" rel="noopener">PANet</a>(ICCVâ€™2019): <a href="https://zhuanlan.zhihu.com/p/81415166" target="_blank" rel="noopener">detail</a>ï¼Œ åƒç´ èšåˆç½‘ç»œï¼Œé€Ÿåº¦å¿«ï¼Œä»»æ„å½¢çŠ¶æ–‡å­—ã€‚åƒç´ èšåˆç½‘ç»œï¼Œé€Ÿåº¦å¿«ï¼ŒåŒ…å«äº†ä¸¤ä¸ªæ­¥éª¤ï¼ˆ1ï¼‰ç”¨åˆ†å‰²ç½‘ç»œé¢„æµ‹æ–‡å­—åŒºåŸŸã€æ ¸å‚æ•°ä»¥åŠç›¸ä¼¼å‘é‡ï¼›ï¼ˆ2ï¼‰ä»é¢„æµ‹çš„æ ¸ä¸­é‡å»ºå®Œæ•´çš„æ–‡å­—å®ä¾‹</p><ol><li>é€šè¿‡é¢„æµ‹æ–‡å­—æ‰€å¤„åŒºåŸŸæ¥æè¿°æ–‡å­—çš„å®Œæ•´å½¢çŠ¶ï¼›</li><li>é€šè¿‡é¢„æµ‹å‡ºæ ¸å‚æ•°æ¥åŒºåˆ†ä¸åŒçš„æ–‡å­—å®ä¾‹ã€‚</li><li>å¦å¤–ç½‘ç»œä¹Ÿä¼šé¢„æµ‹æ¯ä¸ªæ–‡å­—åƒç´ çš„ç›¸ä¼¼å‘é‡ï¼Œä»¥ä¿è¯åƒç´ çš„ç›¸ä¼¼å‘é‡ä¸æ¥è‡ªåŒæ ·æ–‡æœ¬çš„æ ¸ä¹‹é—´çš„è·ç¦»è¶³å¤Ÿå°</li></ol></li><li><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@inproceedings{WangXSZWLYS19,    author={Wenhai Wang and Enze Xie and Xiaoge Song and Yuhang Zang and Wenjia Wang and Tong Lu and Gang Yu and Chunhua Shen},    title={Efficient and Accurate Arbitrary-Shaped Text Detection With Pixel Aggregation Network},    booktitle={ICCV},    pages={8439--8448},    year={2019}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/1903.12473" target="_blank" rel="noopener">PSENet</a>(CVPRâ€™2019): <a href="https://zhuanlan.zhihu.com/p/63074253" target="_blank" rel="noopener">detail</a>ï¼Œé¢„æµ‹å¤šä¸ªåˆ†å‰²ç»“æœï¼Œé€æ­¥æ‰©å¼ ã€‚è¿™ä¸ªæ–‡ç« ä¸»è¦åšçš„åˆ›æ–°ç‚¹å¤§æ¦‚å°±æ˜¯<strong>é¢„æµ‹å¤šä¸ªåˆ†å‰²ç»“æœï¼Œåˆ†åˆ«æ˜¯S1,S2,S3â€¦Sn</strong>ä»£è¡¨ä¸åŒçš„ç­‰çº§é¢ç§¯çš„ç»“æœï¼ŒS1æœ€å°ï¼ŒåŸºæœ¬å°±æ˜¯æ–‡æœ¬éª¨æ¶ï¼ŒSnæœ€å¤§ã€‚ç„¶ååœ¨åå¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œå…ˆç”¨<strong>æœ€å°çš„é¢„æµ‹ç»“æœå»åŒºåˆ†æ–‡æœ¬ï¼Œå†é€æ­¥æ‰©å¼ æˆæ­£å¸¸æ–‡æœ¬å¤§å°</strong></p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@inproceedings{wang2019shape,    title={Shape robust text detection with progressive scale expansion network},    author={Wang, Wenhai and Xie, Enze and Li, Xiang and Hou, Wenbo and Lu, Tong and Yu, Gang and Shao, Shuai},    booktitle={Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition},    pages={9336--9345},    year={2019}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/1807.01544" target="_blank" rel="noopener">TextSnake</a>(ECCVâ€™2018): <a href="https://zhuanlan.zhihu.com/p/55492034" target="_blank" rel="noopener">detail</a>ï¼Œä¸è§„åˆ™æ–‡æœ¬é¢„æµ‹ï¼Œç±»ä¼¼æ–‡æœ¬è›‡ã€‚ è¯¥è®ºæ–‡çš„åˆ›æ–°ç‚¹ä¸»è¦åœ¨äºæå‡ºä¸€ä¸ªç±»ä¼¼äºæ–‡æœ¬è›‡çš„æ£€æµ‹æ–¹å¼å¯¹<strong>ä¸è§„åˆ™æ–‡æœ¬è¿›è¡Œé¢„æµ‹</strong>ï¼Œè¯¥ç®—æ³•ä¸»è¦åšçš„æ˜¯äº”ä¸ªä»»åŠ¡ï¼š<strong>1ã€é¢„æµ‹æ–‡æœ¬ 2ã€é¢„æµ‹æ–‡æœ¬ä¸­å¿ƒçº¿ 3ã€é¢„æµ‹ä¸€ä¸ªæ–‡æœ¬ä¸­15ä¸ªåœ†çš„åŠå¾„ 4ã€é¢„æµ‹ä¸­å¿ƒçº¿ä¸åœ†å¿ƒçš„sin 5ã€é¢„æµ‹cos</strong></p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@article{long2018textsnake,    title={TextSnake: A Flexible Representation for Detecting Text of Arbitrary Shapes},    author={Long, Shangbang and Ruan, Jiaqiang and Zhang, Wenjie and He, Xin and Wu, Wenhao and Yao, Cong},    booktitle={ECCV},    pages={20-36},    year={2018}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/1904.01941" target="_blank" rel="noopener">CRAFT</a>(CVPRâ€™2019): <a href="https://zhuanlan.zhihu.com/p/141865260" target="_blank" rel="noopener">detail</a>ï¼Œé€Ÿåº¦å¿«ï¼Œå¼±ç›‘ç£åšå­—ç¬¦å°ºåº¦çš„åˆ†å‰²ã€‚æ–‡ç« æœ€å¤§è´¡çŒ®æ˜¯å®ƒåˆ›æ–°çš„æå‡ºäº†ä¸€ç§å¼±ç›‘ç£æ¨¡å‹ï¼Œå¯ä»¥åœ¨çœŸå®æ ·æœ¬åªæœ‰æ–‡æœ¬è¡Œæ ‡æ³¨çš„æƒ…å†µä¸‹ï¼Œåšå­—ç¬¦å°ºåº¦çš„å›¾åƒåˆ†å‰²</p></li><li><p><a href="https://arxiv.org/abs/1609.03605" target="_blank" rel="noopener">CTPN</a>(ECCVâ€™2016): <a href="https://zhuanlan.zhihu.com/p/34757009" target="_blank" rel="noopener">detail</a>ï¼Œæ£€æµ‹æ¨ªå‘åˆ†å¸ƒï¼Œå­—ç¬¦çº§åˆ«ã€‚CTPNç»“åˆCNNä¸LSTMæ·±åº¦ç½‘ç»œï¼Œèƒ½æœ‰æ•ˆçš„æ£€æµ‹å‡ºå¤æ‚åœºæ™¯çš„æ¨ªå‘åˆ†å¸ƒçš„æ–‡å­—</p></li></ol><p>ä¸‹é¢ä¸¤å¼ å›¾æ¥è‡ªDBNETè®ºæ–‡ï¼Œä¸»è¦è¯´æ˜è¿™äº›æ£€æµ‹ç½‘ç»œåœ¨å…¬å¼€æ•°æ®é›†çš„è¡¨ç°ï¼Œå¯ä»¥çœ‹å‡ºDBNETåœ¨è¿™äº›æ£€æµ‹ç½‘ç»œä¸­æ˜¯é€Ÿåº¦ä¸ç²¾åº¦å…¼é¡¾çš„ã€‚é™¤äº†DBNETï¼ŒPSENETå’ŒCRAFTçš„è¡¨ç°ä¹Ÿè¿˜ä¸é”™</p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/dbnet_figure1.jpg" alt="dbnet_figure1" style="zoom: 50%;"></p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/dbnet_table5.jpg" alt="dbnet_table5" style="zoom:50%;"></p><h2 id="text-recognition"><a href="#text-recognition" class="headerlink" title="text recognition"></a>text recognition</h2><ol><li><p><a href="https://arxiv.org/abs/1507.05717" target="_blank" rel="noopener">CRNN</a>(TPAMIâ€™2016): <a href="https://zhuanlan.zhihu.com/p/43534801" target="_blank" rel="noopener">detail</a>, CNN+RNN+CTCã€‚å·ç§¯+å¾ªç¯ç¥ç»ç½‘ç»œ+softmaxå³è¾“å‡ºå­—ç¬¦</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@article{shi2016end,    title={An end-to-end trainable neural network for image-based sequence recognition and its application to scene text recognition},    author={Shi, Baoguang and Bai, Xiang and Yao, Cong},    journal={IEEE transactions on pattern analysis and machine intelligence},    year={2016}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/1806.00926" target="_blank" rel="noopener">NRTR</a>(ICDARâ€™2019), A No-Recurrence Sequence-to-Sequence Model For Scene Text Recognition, ä¸ä½¿ç”¨CNN+RNNã€‚æ³¨æ„åŠ›æœºåˆ¶ï¼Œæœ¬æ–‡é¦–æ¬¡æå‡ºäº†ä¸€ç§æ— é‡å¤åºåˆ—åˆ°åºåˆ—æ–‡æœ¬è¯†åˆ«å™¨ï¼Œç§°ä¸ºNRTRï¼Œå®ƒå®Œå…¨æ¶ˆé™¤äº†é‡å¤å’Œå·ç§¯ã€‚ NRTRéµå¾ªç¼–ç å™¨-è§£ç å™¨èŒƒä¾‹ï¼Œå…¶ä¸­ç¼–ç å™¨ä½¿ç”¨å †å å¼è‡ªæ³¨æ„æå–å›¾åƒç‰¹å¾ï¼Œè€Œè§£ç å™¨åˆ™åº”ç”¨å †å å¼è‡ªæ³¨æ„æ¥åŸºäºç¼–ç å™¨è¾“å‡ºè¯†åˆ«æ–‡æœ¬ã€‚ NRTRå®Œå…¨ä¾é è‡ªæˆ‘å…³æ³¨æœºåˆ¶ï¼Œå› æ­¤å¯ä»¥ä»¥æ›´é«˜çš„å¹¶è¡Œåº¦å’Œæ›´å°‘çš„å¤æ‚æ€§è¿›è¡Œè®­ç»ƒ</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@inproceedings{sheng2019nrtr,    title={NRTR: A no-recurrence sequence-to-sequence model for scene text recognition},    author={Sheng, Fenfen and Chen, Zhineng and Xu, Bo},    booktitle={2019 International Conference on Document Analysis and Recognition (ICDAR)},    pages={781--786},    year={2019},    organization={IEEE}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/2007.07542" target="_blank" rel="noopener">RobustScanner</a>(ECCVâ€™2020): <a href="https://zhuanlan.zhihu.com/p/196419633" target="_blank" rel="noopener">detail</a>, æ³¨æ„åŠ›æœºåˆ¶ï¼Œå¢åŠ æ–‡æœ¬ä½ç½®ä¿¡æ¯ã€‚ æ³¨æ„åŠ›æœºåˆ¶ï¼Œæˆ‘ä»¬å‡­ç»éªŒå‘ç°ä»£è¡¨æ€§çš„å­—ç¬¦çº§åºåˆ—è§£ç å™¨ä¸ä»…åˆ©ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè€Œä¸”åˆ©ç”¨ä½ç½®ä¿¡æ¯ã€‚ ç°æœ‰æ–¹æ³•é«˜åº¦ä¾èµ–çš„æ–‡æœ¬ä¿¡æ¯ä¼šå¼•èµ·æ³¨æ„åŠ›æ¼‚ç§»çš„é—®é¢˜ã€‚ ä¸ºäº†æŠ‘åˆ¶è¿™ç§å‰¯ä½œç”¨ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°é¢–çš„ä½ç½®å¢å¼ºåˆ†æ”¯ï¼Œå¹¶å°†å…¶è¾“å‡ºä¸è§£ç å™¨å…³æ³¨æ¨¡å—çš„è¾“å‡ºåŠ¨æ€èåˆä»¥è¿›è¡Œåœºæ™¯æ–‡æœ¬è¯†åˆ«</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@inproceedings{yue2020robustscanner,    title={RobustScanner: Dynamically Enhancing Positional Clues for Robust Text Recognition},    author={Yue, Xiaoyu and Kuang, Zhanghui and Lin, Chenhao and Sun, Hongbin and Zhang, Wayne},    booktitle={European Conference on Computer Vision},    year={2020}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><a href="https://arxiv.org/abs/1811.00751" target="_blank" rel="noopener">SAR</a>(AAAIâ€™2019): <a href="https://zhuanlan.zhihu.com/p/53358238" target="_blank" rel="noopener">detail</a>ï¼Œä¸è§„åˆ™æ–‡æœ¬è¯†åˆ«ï¼ŒResNet+LSTM+2-dimensional attention moduleã€‚ ç”±äºæ–‡æœ¬å¤–è§‚çš„å¤§å˜åŒ–ï¼ˆä¾‹å¦‚æ›²ç‡ï¼Œæ–¹å‘å’Œå˜å½¢ï¼‰ï¼Œåœ¨è‡ªç„¶åœºæ™¯å›¾åƒä¸­è¯†åˆ«ä¸è§„åˆ™æ–‡æœ¬éå¸¸å›°éš¾ã€‚ ç°æœ‰çš„å¤§å¤šæ•°æ–¹æ³•éƒ½ä¸¥é‡ä¾èµ–å¤æ‚çš„æ¨¡å‹è®¾è®¡å’Œ/æˆ–é¢å¤–çš„ç»†ç²’åº¦æ³¨é‡Šï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç®—æ³•å®ç°å’Œæ•°æ®æ”¶é›†çš„éš¾åº¦ã€‚ åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç°æˆçš„ç¥ç»ç½‘ç»œç»„ä»¶å’Œä»…å•è¯çº§æ³¨é‡Šï¼Œä¸ºä¸è§„åˆ™åœºæ™¯æ–‡æœ¬è¯†åˆ«æå‡ºäº†æ˜“äºå®æ–½çš„å¼ºåŸºå‡†ã€‚ å®ƒç”±ä¸€ä¸ª31å±‚ResNetï¼Œä¸€ä¸ªåŸºäºLSTMçš„ç¼–ç å™¨-è§£ç å™¨æ¡†æ¶å’Œä¸€ä¸ªäºŒç»´æ³¨æ„æ¨¡å—ç»„æˆã€‚ å°½ç®¡å®ƒå¾ˆç®€å•ï¼Œä½†æ˜¯æ‰€æå‡ºçš„æ–¹æ³•æ˜¯å¥å£®çš„ã€‚ å®ƒåœ¨ä¸è§„åˆ™æ–‡æœ¬è¯†åˆ«åŸºå‡†ä¸Šè¾¾åˆ°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œå¹¶åœ¨å¸¸è§„æ–‡æœ¬æ•°æ®é›†ä¸Šå®ç°äº†å¯æ¯”çš„ç»“æœ</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@inproceedings{li2019show,    title={Show, attend and read: A simple and strong baseline for irregular text recognition},    author={Li, Hui and Wang, Peng and Shen, Chunhua and Zhang, Guyu},    booktitle={Proceedings of the AAAI Conference on Artificial Intelligence},    volume={33},    number={01},    pages={8610--8617},    year={2019}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>SegOCR Simple Baseline</code></p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">@unpublished{key,    title={SegOCR Simple Baseline.},    author={},    note={Unpublished Manuscript},    year={2021}    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h1 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h1><h2 id="easyocr"><a href="#easyocr" class="headerlink" title="easyocr"></a><a href="https://github.com/JaidedAI/EasyOCR" target="_blank" rel="noopener">easyocr</a></h2><p>ç»“æ„å¦‚ä¸‹å›¾</p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/easyocr_framework.jpeg" alt="easyocr_framework"></p><h3 id="CRAFTç½‘ç»œç»“æ„"><a href="#CRAFTç½‘ç»œç»“æ„" class="headerlink" title="CRAFTç½‘ç»œç»“æ„"></a><a href="https://arxiv.org/abs/1904.01941" target="_blank" rel="noopener">CRAFT</a>ç½‘ç»œç»“æ„</h3><p>ä¸‹å›¾æ˜¯å®ƒçš„ç½‘ç»œç»“æ„ï¼ŒCRAFTçš„éª¨å¹²å·ç§¯ç½‘ç»œæ˜¯<a href="https://arxiv.org/abs/1409.1556" target="_blank" rel="noopener">VGG16</a>ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šä½œè€…ä½¿ç”¨äº†ç±»ä¼¼äº<a href="https://arxiv.org/abs/1505.04597" target="_blank" rel="noopener">U-net</a>çš„ç»“æ„ï¼Œæµ…å±‚å’Œæ·±å±‚çš„å·ç§¯ç‰¹å¾ç›¸ç»“åˆä½œä¸ºè¾“å‡ºï¼Œæœ‰æ•ˆçš„ä¿ç•™äº†æµ…å±‚çš„ç»“æ„ç‰¹å¾å’Œæ·±å±‚çš„è¯­ä¹‰ç‰¹å¾ã€‚åœ¨U-netä¹‹åï¼Œç½‘ç»œå¢åŠ ä¸€ç³»åˆ—å±‚å·ç§¯æ“å±‚ï¼Œæœ€ç»ˆçš„1x1å·ç§¯å±‚ä½¿ç”¨ä¸¤ä¸ªå·ç§¯æ ¸è¾“å‡ºä¸¤ä¸ªåˆ†æ”¯ç»“æœï¼Œç¬¬ä¸€æ”¯ä¸ºå„åƒç´ ç‚¹å¤„äºå­—ç¬¦ä¸­å¿ƒçš„æ¦‚ç‡ï¼ˆä½ç½®åˆ†ï¼‰ï¼Œç¬¬äºŒæ”¯ä¸ºå„åƒç´ ç‚¹å¤„äºå­—ç¬¦é—´éš™çš„æ¦‚ç‡ï¼ˆé‚»åŸŸåˆ†ï¼‰ã€‚é€šè¿‡è¿™ä¸¤å±‚è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥åˆ†åˆ«å¾—åˆ°å­—ç¬¦ä½ç½®å’Œå­—ç¬¦é—´è¿æ¥æƒ…å†µï¼Œè¿›è€Œå°†ç»“æœæ•´åˆä¸ºæ–‡æœ¬æ¡†</p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/craft.jpg" alt="craft" style="zoom:50%;"></p><h3 id="CRAFTä½ç½®åˆ†é‚»åŸŸåˆ†æ ‡æ³¨"><a href="#CRAFTä½ç½®åˆ†é‚»åŸŸåˆ†æ ‡æ³¨" class="headerlink" title="CRAFTä½ç½®åˆ†é‚»åŸŸåˆ†æ ‡æ³¨"></a><a href="https://arxiv.org/abs/1904.01941" target="_blank" rel="noopener">CRAFT</a>ä½ç½®åˆ†é‚»åŸŸåˆ†æ ‡æ³¨</h3><p>åœ¨CRAFTä¸­ï¼Œå›¾åƒåˆ†å‰²çš„æ ‡æ³¨æ˜¯ä¸€ä¸ªè¿ç»­çš„äºŒç»´é«˜æ–¯åˆ†å¸ƒï¼Œä½äºå­—ç¬¦æ¡†ä¸­å¿ƒçš„åƒç´ ç‚¹æœ‰è¾ƒé«˜çš„ä½ç½®åˆ†ï¼Œè€Œä½äºå­—ç¬¦æ¡†è¾¹ç¼˜çš„åƒç´ ç‚¹ä½ç½®åˆ†è¾ƒä½ï¼Œä»è€Œæ¨¡å‹å……åˆ†åˆ©ç”¨äº†åƒç´ ç‚¹çš„ä½ç½®ä¿¡æ¯ã€‚ç”±äºå­—ç¬¦æ¡†é€šå¸¸ä¸ºä¸è§„åˆ™çš„å››è¾¹å½¢ï¼Œå…·ä½“æ“ä½œä¸­ï¼ŒCRAFTéœ€å°†äºŒç»´æ ‡å‡†é«˜æ–¯åˆ†å¸ƒå˜æ¢åˆ°å­—ç¬¦æ¡†å››è¾¹å½¢ä¸­ï¼Œå¦‚ä¸‹å›¾</p><p>è·å–é‚»åŸŸåˆ†æ ‡æ³¨æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å­—ç¬¦æ¡†å››è¾¹å½¢çš„å¯¹è§’çº¿ç›¸è¿ï¼Œå¦‚ä¸Šå›¾å·¦ä¾§Affinity Box Generationä¸­è“è‰²å®çº¿æ‰€ç¤ºã€‚æ¥ç€ï¼Œæˆ‘ä»¬åˆ†åˆ«æ‰¾åˆ°ä¸Šä¸‹ä¸¤ä¸ªä¸‰è§’å½¢çš„é‡å¿ƒï¼ˆè“è‰²åå­—ï¼‰ï¼Œä¸¤ä¸ªç›¸é‚»çš„å­—ç¬¦å…±æœ‰å››ä¸ªä¸‰è§’å½¢é‡å¿ƒï¼Œæˆ‘ä»¬å°†å®ƒä»¬ç»„æˆçš„å››è¾¹å½¢å®šä¸ºé‚»åŸŸæ¡†ã€‚æœ€åï¼Œæˆ‘ä»¬ç”¨ä¹‹å‰ä½ç½®åˆ†ç›¸åŒçš„æ–¹æ³•ï¼Œç”Ÿæˆé‚»åŸŸæ¡†å†…çš„é«˜æ–¯åˆ†å¸ƒï¼Œä»è€Œå¾—åˆ°äº†é‚»åŸŸåˆ†ã€‚æœ€ç»ˆçš„ç»“æœå¯è§ä¸Šå›¾æœ€å³ä¾§çš„heat map</p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/craft1.jpg" alt="craft1"></p><h3 id="CRAFTå¼±ç›‘ç£å­¦ä¹ "><a href="#CRAFTå¼±ç›‘ç£å­¦ä¹ " class="headerlink" title="CRAFTå¼±ç›‘ç£å­¦ä¹ "></a><a href="https://arxiv.org/abs/1904.01941" target="_blank" rel="noopener">CRAFT</a>å¼±ç›‘ç£å­¦ä¹ </h3><p>å¦‚ä½•ä»æ–‡æœ¬æ¡†æ ‡æ³¨è·å¾—å¯é çš„å­—ç¬¦æ¡†æ ‡æ³¨æ˜¯æœ¬æ–‡çš„æœ€å¤§äº®ç‚¹ã€‚CRAFTé‡‡ç”¨äº†å¼±ç›‘ç£å­¦ä¹ çš„æ–¹æ³•ï¼Œæœ‰æ•ˆçš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚åœ¨è®­ç»ƒåˆæœŸï¼Œæˆ‘ä»¬ä½¿ç”¨çš„è®­ç»ƒé›†ä¸ºåˆæˆçš„éçœŸå®å›¾ç‰‡ï¼Œåˆæˆå›¾ç‰‡ä¸­å…·æœ‰å­—ç¬¦æ¡†å‡†ç¡®çš„æ ‡æ³¨ä¿¡æ¯ï¼Œå› è€Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚åˆæˆå›¾ç‰‡ä¸çœŸå®å›¾ç‰‡çš„æ•°æ®ç‰¹å¾æœ‰ç›¸ä¼¼ä¹‹å¤„ä½†åˆä¸å®Œå…¨ç›¸åŒï¼Œå…¶å¯ä»¥ä¸ºæ¨¡å‹è®­ç»ƒæä¾›æœ‰é™çš„å¸®åŠ©ã€‚å½“æ¨¡å‹å…·æœ‰ä¸€å®šé¢„æµ‹èƒ½åŠ›åï¼Œæˆ‘ä»¬å†å¼€å§‹ä½¿ç”¨çœŸå®å›¾ç‰‡ã€‚</p><p>ç”±äºçœŸå®å›¾ç‰‡ç¼ºä¹å­—ç¬¦æ¡†æ ‡æ³¨ï¼Œæ–‡ç« ä¸­é‡‡å–äº†ä»¥ä¸‹çš„è®­ç»ƒæ–¹æ¡ˆï¼šé¦–å…ˆæˆ‘ä»¬å°†æ–‡æœ¬è¡Œæˆªå–å‡ºæ¥ï¼Œåˆ©ç”¨å½“å‰è®­ç»ƒå¥½çš„æ¨¡å‹é¢„æµ‹æ¯ä¸ªåƒç´ ç‚¹çš„ä½ç½®åˆ†ï¼›æ¥ç€ä»ä½ç½®åˆ†çš„åˆ†å¸ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç¦»å‡ºæ¥å½“å‰æ¨¡å‹åˆ¤æ–­çš„å­—ç¬¦æ¡†æ•°é‡å’Œä½ç½®ï¼Œå¹¶åˆ©ç”¨è¿™äº›å­—ç¬¦æ¡†ä½œä¸ºæ ‡æ³¨å›å¤´æ¥è®­ç»ƒæ¨¡å‹ã€‚ç”±äºæ­¤æ—¶æ¨¡å‹é¢„æµ‹çš„å­—ç¬¦æ¡†å‡†ç¡®æ€§å¹¶æ²¡æœ‰ä¿è¯ï¼Œåœ¨è®¡å…¥æŸå¤±å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå¯¹åº”çš„æŸå¤±ä¹˜ä»¥ä¸€ä¸ªç½®ä¿¡æ¦‚ç‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®é™…çš„å­—ç¬¦æ•°é‡ï¼ˆæ–‡æœ¬æ ‡æ³¨é•¿åº¦ï¼‰æ˜¯å·²çŸ¥çš„ï¼ŒæœªçŸ¥çš„ä»…ä»…æ˜¯å­—ç¬¦æ¡†çš„ä½ç½®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨é¢„æµ‹å’Œå®é™…çš„å­—ç¬¦æ•°é‡çš„å·®æ¥è¡¡é‡é¢„æµ‹çš„å‡†ç¡®æ€§ï¼Œå³ç½®ä¿¡æ¦‚ç‡=1-å­—ç¬¦æ•°å·®/å®é™…å­—ç¬¦æ•°é‡ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­ï¼Œä¸‰ä¸ªæ–‡æœ¬è¡Œçš„ç½®ä¿¡æ¦‚ç‡åˆ†åˆ«ä¸º6/6ï¼Œ5/7å’Œ5/6ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ä¿è¯è¿™ç§è®­ç»ƒæ¨¡å¼çš„æœ‰æ•ˆæ€§ï¼Œä½œè€…åœ¨è¿™ä¸€æ­¥è®­ç»ƒä¸­ä¹Ÿæºå…¥äº†è¾ƒä½æ¯”ä¾‹ï¼ˆ1:5ï¼‰çš„å…·æœ‰å‡†ç¡®å­—ç¬¦æ¡†æ ‡æ³¨çš„åˆæˆå›¾ç‰‡</p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/craft2.jpg" alt="craft2"></p><h3 id="CRAFTæ–‡æœ¬æ¡†ç”Ÿæˆ"><a href="#CRAFTæ–‡æœ¬æ¡†ç”Ÿæˆ" class="headerlink" title="CRAFTæ–‡æœ¬æ¡†ç”Ÿæˆ"></a><a href="https://arxiv.org/abs/1904.01941" target="_blank" rel="noopener">CRAFT</a>æ–‡æœ¬æ¡†ç”Ÿæˆ</h3><p>åœ¨å¾—åˆ°äº†æ‰€æœ‰åƒç´ ç‚¹çš„ä½ç½®åˆ†å’Œé‚»åŸŸåˆ†ä»¥åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†ç»“æœæ•´åˆä¸ºæœ€ç»ˆçš„æ–‡æœ¬æ¡†ä½œä¸ºè¾“å‡ºã€‚æ–‡ç« ä¸­ä½œè€…å¯¹ä½ç½®åˆ†å’Œé‚»åŸŸåˆ†åˆ†åˆ«è®¾å®šäº†ä¸€ä¸ªé˜ˆå€¼ï¼Œå°†ä¸¤è€…ä¸­è‡³å°‘æœ‰ä¸€æ–¹é«˜äºé˜ˆå€¼çš„åƒç´ ç‚¹æ ‡ä¸º1ï¼Œå…¶ä»–æ ‡ä¸º0ï¼Œç„¶åå°†æ‰€æœ‰ç›¸è¿çš„å€¼ä¸º1çš„åƒç´ å®šä¸ºä¸€ä¸ªæ–‡æœ¬ç›®æ ‡ã€‚åœ¨éœ€è¦çŸ©å½¢æ–‡æœ¬æ¡†çš„ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªé¢ç§¯æœ€å°çš„åŒ…å›´æ•´ä¸ªç›®æ ‡çš„çŸ©å½¢ä½œä¸ºè¾“å‡ºï¼›åœ¨éœ€è¦å¤šè¾¹å½¢æ–‡æœ¬æ¡†çš„ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ¯ä¸ªå­—ç¬¦çš„ä¸­å¿ƒç‚¹å’Œå®½åº¦æ„é€ ä¸€ä¸ªå¤šè¾¹å½¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p>ç¬¬ä¸€æ­¥æ˜¯æ²¿æ‰«ææ–¹å‘å¯»æ‰¾ç‰¹å¾åŒºåŸŸçš„å±€éƒ¨æå¤§å€¼çº¿ï¼Œè“çº¿ï¼Œè¿æ¥æ‰€æœ‰å±€éƒ¨æå¤§å€¼ä¸­å¿ƒç‚¹çš„çº¿ç§°ä¸ºä¸­å¿ƒçº¿ï¼Œé»„çº¿ï¼Œç„¶åï¼Œæ—‹è½¬å±€éƒ¨max-imaçº¿ï¼Œä½¿å…¶å‚ç›´äºä¸­å¿ƒçº¿ï¼Œä»¥åæ˜ å­—ç¬¦çš„å€¾æ–œè§’åº¦ï¼Œçº¢è‰²ç®­å¤´ï¼Œå±€éƒ¨æå¤§å€¼çº¿çš„ç«¯ç‚¹æ˜¯æ–‡æœ¬å¤šè¾¹å½¢æ§åˆ¶ç‚¹çš„å€™é€‰ç‚¹</p><p>å¦‚ä½•ä»æ–‡æœ¬æ¡†æ ‡æ³¨è·å¾—å¯é çš„å­—ç¬¦æ¡†æ ‡æ³¨æ˜¯æœ¬æ–‡çš„æœ€å¤§äº®ç‚¹ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥ç‚¹å‡»<a href="https://zhuanlan.zhihu.com/p/141865260" target="_blank" rel="noopener">detail</a></p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/craft3.jpg" alt="craft3"></p><h3 id="CRNNç½‘ç»œç»“æ„"><a href="#CRNNç½‘ç»œç»“æ„" class="headerlink" title="CRNNç½‘ç»œç»“æ„"></a><a href="https://arxiv.org/abs/1507.05717" target="_blank" rel="noopener">CRNN</a>ç½‘ç»œç»“æ„</h3><ul><li><a href="https://arxiv.org/abs/1512.03385" target="_blank" rel="noopener">ResNet</a>: æ®‹å·®ç½‘ç»œ</li><li><a href="https://zhuanlan.zhihu.com/p/32085405" target="_blank" rel="noopener">LSTM</a>: å¾ªç¯ç¥ç»ç½‘ç»œ</li><li><a href="https://dl.acm.org/doi/abs/10.1145/1143844.1143891" target="_blank" rel="noopener">CTC</a>: è§£å†³è¾“å…¥è¾“å‡ºå¯¹é½é—®é¢˜ï¼Œè¯¦æƒ…è¯·è§<a href="https://zhuanlan.zhihu.com/p/42719047" target="_blank" rel="noopener">detail</a></li></ul><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/crnn.jpg" alt="crnn" style="zoom:50%;"></p><h2 id="cnstd-cnocr"><a href="#cnstd-cnocr" class="headerlink" title="cnstd+cnocr"></a><a href="https://github.com/breezedeus/cnstd" target="_blank" rel="noopener">cnstd</a>+<a href="https://github.com/breezedeus/cnocr" target="_blank" rel="noopener">cnocr</a></h2><ol><li>ä½¿ç”¨<a href="https://arxiv.org/abs/1903.12473" target="_blank" rel="noopener">PSENet</a>è¿›è¡Œtext detection</li><li>å†ä½¿ç”¨<a href="https://arxiv.org/abs/1608.06993" target="_blank" rel="noopener">Densenet</a>+<a href="https://arxiv.org/abs/1406.1078" target="_blank" rel="noopener">GRU</a>è¿›è¡Œtext recognition</li></ol><h3 id="PSENetç½‘ç»œç»“æ„"><a href="#PSENetç½‘ç»œç»“æ„" class="headerlink" title="PSENetç½‘ç»œç»“æ„"></a><a href="https://arxiv.org/abs/1903.12473" target="_blank" rel="noopener">PSENet</a>ç½‘ç»œç»“æ„</h3><p>éª¨å¹²ç½‘ç»œï¼š<a href="https://arxiv.org/abs/1512.03385" target="_blank" rel="noopener">ResNet</a>ï¼Œé¢„æµ‹å¤šä¸ªåˆ†å‰²ç»“æœï¼Œåˆ†åˆ«æ˜¯$S1,â€¦,Sn$ï¼Œä»£è¡¨ä¸åŒç­‰çº§é¢ç§¯çš„ç»“æœï¼Œ$S1$æœ€å°ï¼ŒåŸºæœ¬å°±æ˜¯æ–‡æœ¬éª¨æ¶ï¼Œ$Sn$æœ€å¤§</p><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/PSENet1.jpg" alt="PSENet1"></p><h3 id="PSENetç®—æ³•ä¸»ä½“"><a href="#PSENetç®—æ³•ä¸»ä½“" class="headerlink" title="PSENetç®—æ³•ä¸»ä½“"></a><a href="https://arxiv.org/abs/1903.12473" target="_blank" rel="noopener">PSENet</a>ç®—æ³•ä¸»ä½“</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><ol><li>ç½‘ç»œæœ‰$S1,S2,S3$ä¸‰ä¸ªåˆ†å‰²ç»“æœ</li><li>å…ˆç”¨æœ€å°çš„kernelç”Ÿæˆçš„$S1$æ¥åŒºåˆ†å››ä¸ªæ–‡æœ¬å®ä¾‹</li><li>ç„¶åå†é€æ­¥æ‰©å¼ æˆ$S2,S3$</li></ol><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/PSENet2.jpg" alt="PSENet2"></p><h3 id="PSENetæ ‡æ³¨ç”Ÿæˆ"><a href="#PSENetæ ‡æ³¨ç”Ÿæˆ" class="headerlink" title="PSENetæ ‡æ³¨ç”Ÿæˆ"></a><a href="https://arxiv.org/abs/1903.12473" target="_blank" rel="noopener">PSENet</a>æ ‡æ³¨ç”Ÿæˆ</h3><ul><li>æ ¹æ®å·²æœ‰å¤šè¾¹å½¢æ¡†æ ‡æ³¨è®¡ç®—</li><li>$d_i=\frac{Area(p_n)\times (1-r_i^2)}{Perimeter(p_n)}$</li><li>$r_i = 1-\frac{(1-m)\times (n-i)}{n-1}$</li><li>$Area$: é¢ç§¯</li><li>$Perimeter$: å‘¨é•¿</li><li>$r_i$: ç¼©æ”¾æ¯”ä¾‹</li></ul><p><img src="/2021/03/11/shen-du-xue-xi-zhi-tu-xiang-shi-bie/PSENet3.jpg" alt="PSENet3"></p><h3 id="CRNNç½‘ç»œç»“æ„-1"><a href="#CRNNç½‘ç»œç»“æ„-1" class="headerlink" title="CRNNç½‘ç»œç»“æ„"></a><a href="https://arxiv.org/abs/1507.05717" target="_blank" rel="noopener">CRNN</a>ç½‘ç»œç»“æ„</h3><ul><li><a href="https://arxiv.org/abs/1608.06993" target="_blank" rel="noopener">Densenet</a>: äº’ç›¸è¿æ¥æ‰€æœ‰çš„å±‚</li><li><a href="https://arxiv.org/abs/1406.1078" target="_blank" rel="noopener">GRU</a>: Gate Recurrent Unit</li><li><a href="https://dl.acm.org/doi/abs/10.1145/1143844.1143891" target="_blank" rel="noopener">CTC</a></li></ul><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul><li>[MMOCR Documents]: <a href="https://mmocr.readthedocs.io/en/latest/modelzoo.html" target="_blank" rel="noopener">https://mmocr.readthedocs.io/en/latest/modelzoo.html</a></li><li><a href="https://github.com/drsanwujiang/video-subtitle-recognize" target="_blank" rel="noopener">å‚è€ƒopencvå®ç°è§†é¢‘åˆ‡å‰²</a></li></ul><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="è§†é¢‘æˆªå¸§æˆä¸€å¼ å¼ å›¾ç‰‡"><a href="#è§†é¢‘æˆªå¸§æˆä¸€å¼ å¼ å›¾ç‰‡" class="headerlink" title="è§†é¢‘æˆªå¸§æˆä¸€å¼ å¼ å›¾ç‰‡"></a>è§†é¢‘æˆªå¸§æˆä¸€å¼ å¼ å›¾ç‰‡</h2><h3 id="ä½¿ç”¨opencv"><a href="#ä½¿ç”¨opencv" class="headerlink" title="ä½¿ç”¨opencv"></a>ä½¿ç”¨<code>opencv</code></h3><ul><li><a href="https://github.com/drsanwujiang/video-subtitle-recognize" target="_blank" rel="noopener">å‚è€ƒopencvå®ç°è§†é¢‘åˆ‡å‰²</a></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python"># -*- coding:utf-8 _*-"""Author:Email: Date: 2021/03/12File: opencv_test.pySoftware: PyCharmDescription: ä½¿ç”¨opencvå°†è§†é¢‘åˆ‡æˆè‹¥å¹²å¼ é™æ€å›¾ç‰‡ï¼ˆé»˜è®¤æ¯ç§’1å¼ ï¼‰"""# load modulesimport shutilimport timeimport cv2import osimport sys# configç±»class Config:    Maps = {        # ä»¥ä¸‹è¯·æ ¹æ®éœ€è¦è°ƒæ•´æ•°å€¼        "split_duration": 1.5,  # åˆ‡ç‰‡é—´éš”,æ¯ split_duration ç§’è¾“å‡ºä¸€å¸§        "jpg_quality": 40,  # å›¾ç‰‡è¾“å‡ºè´¨é‡, 0~100        "probability": 0.66,  # OCRå¯ä¿¡åº¦ä¸‹é™, 0~1        "subtitle_top_rate": 0.66,  # å­—å¹•èŒƒå›´å€ç‡        "remove_duplicate": False,  # å¼ºåˆ¶å»é‡        # ç›®å½•ä¿¡æ¯,åœ¨ä¸‹æ–¹å®šä¹‰        "video_dir": "",        "video_path": "",        "video_frames": "",        "image_dir": "",        "output_dir": "",        # è§†é¢‘ä¿¡æ¯,è‡ªåŠ¨ç”Ÿæˆ        "video_name": "",        "video_suffix": "",        "video_width": 0,        "video_height": 0,        "subtitle_top": 0,  # å­—å¹•èŒƒå›´ = å­—å¹•èŒƒå›´å€ç‡ * è§†é¢‘é«˜åº¦,æ­¤é«˜åº¦ä»¥ä¸‹çš„æ–‡å­—è¢«è®¤ä¸ºæ˜¯å­—å¹•    }    @staticmethod    def set_path(video_name="", video_suffix=""):        current_path = sys.path[0]        Config.Maps["video_dir"] = '%s/video/' % current_path  # è§†é¢‘æºæ–‡ä»¶ç›®å½•        Config.Maps["video_path"] = '%s/video/%s%s' % (current_path, video_name, video_suffix)  # æŒ‡å®šè§†é¢‘æ–‡ä»¶è·¯å¾„        Config.Maps["video_frames"] = '%s/video_frames/' % current_path  # è§†é¢‘åˆ‡ç‰‡æ–‡ä»¶ç›®å½•        Config.Maps["image_dir"] = '%s/video_frames/%s/' % (current_path, video_name)  # æŒ‡å®šè§†é¢‘åˆ‡ç‰‡æ–‡ä»¶ç›®å½•        Config.Maps["output_dir"] = '%s/output/' % current_path  # å­—å¹•è¾“å‡ºç›®å½•        Config.Maps["video_name"] = video_name        Config.Maps["video_suffix"] = video_suffix    @staticmethod    def set_video_props(video_width, video_height):        Config.Maps["video_width"] = video_width        Config.Maps["video_height"] = video_height        Config.Maps["subtitle_top"] = Config.Maps["subtitle_top_rate"] * video_height    @staticmethod    def get_value(key):        return Config.Maps[key]# getFrameç±»class GetFrames:    @staticmethod    def main():        # è¯»å–è·¯å¾„ä¿¡æ¯        video_path = Config.get_value("video_path")        image_dir = Config.get_value('image_dir')        jpg_quality = Config.get_value('jpg_quality')        split_duration = Config.get_value('split_duration')        if (os.path.exists(image_dir)):            shutil.rmtree(image_dir)  # é€’å½’åˆ é™¤ç›®å½•ï¼Œos.rmdiråªèƒ½åˆ é™¤ç©ºç›®å½•        os.mkdir(image_dir)        cv = cv2.VideoCapture(video_path)  # è¯»å…¥è§†é¢‘æ–‡ä»¶        current_frame = 1        saved_frames = 1        if cv.isOpened():  # åˆ¤æ–­æ˜¯å¦æ­£å¸¸æ‰“å¼€            retval, frame = cv.read()        else:            cv.release()            print("Video open error")            return False        duration = int(cv.get(cv2.CAP_PROP_FPS) * split_duration)  # é—´éš”é¢‘ç‡ = å¸§ç‡ * åˆ‡ç‰‡æ—¶é—´é—´éš”(å››èˆäº”å…¥)        frame_count = int(cv.get(cv2.CAP_PROP_FRAME_COUNT))  # è§†é¢‘æ€»å¸§æ•°        video_width = int(cv.get(cv2.CAP_PROP_FRAME_WIDTH))  # è§†é¢‘å®½åº¦        video_height = int(cv.get(cv2.CAP_PROP_FRAME_HEIGHT))  # è§†é¢‘é«˜åº¦        Config.set_video_props(video_width, video_height)        while retval:  # å¾ªç¯è¯»å–è§†é¢‘å¸§            retval, frame = cv.read()            if current_frame % duration == 0:  # æ¯ duration å¸§è¿›è¡Œå­˜å‚¨æ“ä½œ                cv2.imencode('.jpg', frame, [int(cv2.IMWRITE_JPEG_QUALITY), jpg_quality])[1]. \                    tofile(image_dir + str(current_frame).zfill(6) + '.jpg')                print(("Now: frame %d, saved: %d frame(s), process: %d%%" %                       (current_frame, saved_frames, (current_frame * 100) // frame_count)).ljust(60, ' '))                saved_frames += 1            current_frame += 1            cv2.waitKey(1)        print(("Now: frame %d, saved: %d frame(s), process: %d%%" %               (current_frame, saved_frames, (current_frame * 100) // frame_count)).ljust(60, ' '))        cv.release()        print("\nSaved: %d frame(s)" % saved_frames)        return True# ä¸»ç±»class Main:    @staticmethod    def clear():        if sys.platform.find("win") > -1:            os.system("cls")        else:            print()    @staticmethod    def main():        # é…ç½®è·¯å¾„        Config.set_path()        if not (os.path.exists(Config.get_value('video_dir'))):            os.mkdir(Config.get_value('video_dir'))        if not (os.path.exists(Config.get_value('video_frames'))):            os.mkdir(Config.get_value('video_frames'))        if not (os.path.exists(Config.get_value('output_dir'))):            os.mkdir(Config.get_value('output_dir'))        # åˆ—å‡ºæ‰€æœ‰video        Main.clear()        print("\n")        print("-"*40)        print("List Video")        print("-" * 40)        video_list = os.listdir(Config.get_value('video_dir'))        print(video_list)        if len(video_list) < 1:            print("Nothing found\n\n")            print("Process finished")            input()            return        # å¯¹æ‰€æœ‰videoè¿›è¡Œå¤„ç†        start_all = time.time()        print("\n")        print("-" * 40)        print("All Video Division")        print("-" * 40)        print("Start All video division")        for video in video_list:            print("%d.%s" % (video_list.index(video) + 1, video))            video_name = video[: video.rfind(".")]            video_suffix = video[video.rfind("."):]            Config.set_path(video_name, video_suffix)            start = time.time()            print("\n")            print("-" * 40)            print("Video: %s Division" % video)            print("-" * 40)            print("Start video division")            if not GetFrames.main():                print("Video division FAILED!")                print("Process finished")                input()                return            print("Video: %s division finished" % video)            print("Time: %.2fs\n" % (time.time() - start))        print("All Video division finished")        print("Time: %.2fs\n" % (time.time() - start_all))        returnif __name__ == "__main__":    Main.main()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="https://github.com/drsanwujiang/video-subtitle-recognize" target="_blank" rel="noopener">opencvå®ç°è§†é¢‘åˆ‡å‰²</a><ol><li><a href="https://www.kancloud.cn/aollo/aolloopencv" target="_blank" rel="noopener">OpenCV-Pythonä¸­æ–‡æ•™ç¨‹</a></li></ol></li><li><a href="https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html" target="_blank" rel="noopener">FFmpegè§†é¢‘å¤„ç†</a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/chineseocr/darknet-ocr">darknet-ocr</a>ï¼š<code>star:851</code></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/chineseocr/chineseocr">chineseocr</a>ï¼š<code>star:3.9k</code></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/ouyanghuiyu/chineseocr_lite">https://github.com/ouyanghuiyu/chineseocr_litegithub.com</a>ï¼š<code>star:6.4k</code>ï¼Œæ”¯æŒwindows<ol><li><a href="https://zhuanlan.zhihu.com/p/111533615" target="_blank" rel="noopener">æœºå™¨ä¹‹å¿ƒï¼šå®æµ‹è¶…è½»é‡ä¸­æ–‡OCRå¼€æºé¡¹ç›®ï¼Œæ€»æ¨¡å‹ä»…17Mzhuanlan.zhihu.com)</a></li></ol></li><li>åŒ…æ‹¬AlexNetã€RCNNã€ResNetã€YOLOã€SSDç­‰ã€‚</li><li><a href="https://github.com/hwalsuklee/awesome-deep-text-detection-recognition" target="_blank" rel="noopener">æ–‡æœ¬æ£€æµ‹çš„èµ„æºæ±‡æ€»</a><ol><li><a href="https://zhuanlan.zhihu.com/p/71028209" target="_blank" rel="noopener">Githubï¼šæ·±åº¦å­¦ä¹ æ–‡æœ¬æ£€æµ‹è¯†åˆ«ï¼ˆOCRï¼‰ç²¾é€‰èµ„æºæ±‡æ€»</a></li></ol></li><li><a href="https://github.com/xiaofengShi/CHINESE-OCR" target="_blank" rel="noopener">xiaofengshiï¼šchinese-ocr</a>ï¼š<code>star:2.4k</code></li><li><a href="https://zhuanlan.zhihu.com/p/34757009" target="_blank" rel="noopener">åœºæ™¯æ–‡å­—æ£€æµ‹â€”CTPNåŸç†ä¸å®ç°</a><ol><li><a href="https://github.com/yizt/cv-papers/blob/master/CTPN.md" target="_blank" rel="noopener">CTPNè®ºæ–‡</a></li></ol></li><li><a href="https://zhuanlan.zhihu.com/p/43534801" target="_blank" rel="noopener">ä¸€æ–‡è¯»æ‡‚CRNN+CTCæ–‡å­—è¯†åˆ«</a></li><li><a href="https://zhuanlan.zhihu.com/p/55118990" target="_blank" rel="noopener">è§†é¢‘æ ‡ç­¾ç®—æ³•è§£æ</a></li><li><a href="https://github.com/topics/text-detection" target="_blank" rel="noopener">text-detection</a>ï¼šæ–‡å­—è¯†åˆ«ç›¸å…³topic</li><li><a href="https://zhuanlan.zhihu.com/p/142455144" target="_blank" rel="noopener">å¤šæ¨¡æ€ç ”ç©¶ç»¼è¿°</a></li><li><a href="https://github.com/JaidedAI/EasyOCR" target="_blank" rel="noopener">easyocr</a><ol><li>è§£ç å™¨ï¼š<a href="https://zhuanlan.zhihu.com/p/157966981" target="_blank" rel="noopener">é“¾æ¥</a></li></ol></li><li><a href="https://github.com/topics/ocr?o=desc&amp;s=stars" target="_blank" rel="noopener">github ocr topics æ’è¡Œæ¦œ</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒè¯†åˆ« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLPä¹‹TextRank</title>
      <link href="/2021/03/10/nlp-zhi-textrank/"/>
      <url>/2021/03/10/nlp-zhi-textrank/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ul><li>å¦‚ä½•å¯¹ä¸€ç¯‡æ–‡ç« çš„å…³é”®è¯è¿›è¡Œæå–</li></ul><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><ul><li>ä½¿ç”¨ç±»ä¼¼ç½‘é¡µæ’åç®—æ³•<code>PageRank</code>çš„æ€è·¯</li><li>æ„å»ºè¯ä¸è¯ä¹‹é—´çš„å›¾ï¼Œç„¶åè¿­ä»£è®¡ç®—è¯çš„æ’å</li></ul><h2 id="TextRank"><a href="#TextRank" class="headerlink" title="TextRank"></a><code>TextRank</code></h2><ul><li>å›é¡¾<code>PageRank</code>çš„è®¡ç®—å…¬å¼ï¼š$P=(1-d)\frac{I}{n}+dA^TP$</li><li>ç›´æ¥è¯´<code>TextRank</code>çš„è®¡ç®—å…¬å¼ï¼š$P=(1-d)\frac{I}{n}+dW^TP$<ul><li>å…¶ä¸­$W=(w_{ij})_{m\times n}$ä¸ºè¯ä¸è¯ä¹‹é—´çš„æƒé‡ï¼Œä¸€èˆ¬ä¸ºè¯$i$ä¸è¯$j$åœ¨æ»‘åŠ¨çª—å£$k$å†…çš„å…±ç°æ¬¡æ•°</li></ul></li></ul><h2 id="å¦‚ä½•æ ¹æ®è¯æ„å»ºå›¾"><a href="#å¦‚ä½•æ ¹æ®è¯æ„å»ºå›¾" class="headerlink" title="å¦‚ä½•æ ¹æ®è¯æ„å»ºå›¾"></a>å¦‚ä½•æ ¹æ®è¯æ„å»ºå›¾</h2><ol><li><p>å¯¹æ–‡ç« $S$è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ°è¯åˆ—è¡¨</p></li><li><p>è®¾å®šæ»‘åŠ¨çª—å£$k$çš„å¤§å°ï¼Œç»Ÿè®¡æ»‘åŠ¨çª—å£å†…å„è¯å¯¹çš„è´¡çŒ®æ¬¡æ•°</p><ol><li><p>ä¾‹å¦‚ï¼š<code>æ·¡é»„çš„é•¿è£™ï¼Œè“¬æ¾çš„å¤´å‘</code>ï¼Œåˆ†è¯åä¸º[<code>æ·¡é»„</code>, <code>é•¿è£™</code>, <code>è“¬æ¾</code>, <code>å¤´å‘</code>]</p></li><li><p>è®¾å®šæ»‘åŠ¨çª—å£$k=2$ï¼Œåˆ™å¾—åˆ°è¯å¯¹ï¼š</p><ol><li><code>æ·¡é»„</code>,<code>é•¿è£™</code></li><li><code>é•¿è£™</code>,<code>è“¬æ¾</code></li><li><code>è“¬æ¾</code>,<code>å¤´å‘</code></li></ol></li><li><p>æ ¹æ®è¿™äº›è¯å¯¹æ„å»º<code>æ— å‘å›¾</code>ï¼Œæ³¨æ„<code>PageRank</code>æ˜¯<code>æœ‰å‘å›¾</code></p><p><img src="/2021/03/10/nlp-zhi-textrank/image-20210310171957155.png" alt="å›¾ç‰‡æ¥æºäºå‚è€ƒé“¾æ¥1"></p></li><li><p>ç„¶åä½¿ç”¨å…¬å¼è®¡ç®—</p></li></ol></li></ol><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><ul><li><p><a href="https://github.com/fxsjy/jieba" target="_blank" rel="noopener">Jieba</a></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">jieba.analyse.textrank(sentence, topK=20, withWeight=False, allowPOS=('ns', 'n', 'vn', 'v'))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="http://web.eecs.umich.edu/~mihalcea/papers/mihalcea.emnlp04.pdf" target="_blank" rel="noopener">TextRank: Bringing Order into Texts</a></li><li><a href="https://zhuanlan.zhihu.com/p/41091116" target="_blank" rel="noopener">ï¼ˆä¹ï¼‰é€šä¿—æ˜“æ‡‚ç†è§£â€”â€”TF-IDFä¸TextRank</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…³é”®è¯æå– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹PageRank</title>
      <link href="/2021/03/10/ji-qi-xue-xi-zhi-pagerank/"/>
      <url>/2021/03/10/ji-qi-xue-xi-zhi-pagerank/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/03/10/ji-qi-xue-xi-zhi-pagerank/image-20210621160912259.png" alt="image-20210621160912259"></p><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ul><li>å¦‚ä½•ç»™ä¼—å¤šç½‘é¡µæ’åï¼Ÿ</li></ul><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><ul><li>ä¸€ä¸ªè§£å†³åŠæ³•ï¼š</li><li>å½“å¾ˆå¤šç½‘é¡µéƒ½é“¾æ¥åˆ°åŒä¸€ä¸ªç½‘é¡µæ—¶ï¼Œé‚£è¿™ä¸ªç½‘é¡µåº”è¯¥æ’åé å‰</li><li>é“¾æ¥è¿™ä¸ªç½‘é¡µçš„ä¼—å¤šç½‘é¡µä¸­ï¼Œæ’åè¶Šé å‰çš„ç½‘é¡µï¼Œå…¶é‡è¦æ€§åº”è¯¥æ›´é«˜</li></ul><h2 id="PageRank"><a href="#PageRank" class="headerlink" title="PageRank"></a><code>PageRank</code></h2><script type="math/tex; mode=display">PR_i = \sum_{(j,i) \in V}{\frac{PR_j}{O_j}}</script><ul><li>$PR_i$è¡¨ç¤ºç¬¬$i$ä¸ªç½‘é¡µçš„<code>PageRank</code>å€¼ï¼Œä»£è¡¨å…¶ç½‘é¡µæ’åä¾æ®</li><li>$V$æ˜¯æ‰€æœ‰ç½‘é¡µé›†åˆ</li><li>$O_j$æ˜¯ç¬¬$j$ä¸ªç½‘é¡µæ‰€å­˜åœ¨çš„å¤–é“¾æ•°ï¼Œè¶Šå¤šå¤–é“¾ï¼Œå®ƒç»™$i$ç½‘é¡µæŠ•ç¥¨å¯¹åº”é‡è¦æ€§è¶Šä½</li></ul><h2 id="ä½¿ç”¨å›¾æ„å»ºPageRank"><a href="#ä½¿ç”¨å›¾æ„å»ºPageRank" class="headerlink" title="ä½¿ç”¨å›¾æ„å»ºPageRank"></a>ä½¿ç”¨å›¾æ„å»º<code>PageRank</code></h2><ul><li><p>ç½‘é¡µå¯¹åº”å›¾çš„èŠ‚ç‚¹<code>node</code></p></li><li><p>ç½‘é¡µ$i$çš„å¤–é“¾æœ‰ç½‘é¡µ$j$ä»£è¡¨$(i,j)$ï¼Œå³å›¾çš„æœ‰å‘è¾¹<code>edge</code></p></li><li><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2021/03/10/ji-qi-xue-xi-zhi-pagerank/image-20210310155933176.png" alt="å›¾ç‰‡æ¥æºå‚è€ƒé“¾æ¥"></p></li><li><p>è¡¨ç¤ºä¸º$G(V,E)$ï¼Œä¸Šå›¾çš„é‚»æ¥çŸ©é˜µè¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">A = \left( \begin{array} {ccc}     0 & 1/2 & 1/2 & 0 & 0 & 0 \\     1/2 & 0 & 1/2 & 0 & 0 & 0 \\     0 & 1 & 0 & 0 & 0 & 0 \\     0 & 0 & 1/3 & 0 & 1/3 & 1/3 \\     0 & 0 & 0 & 0 & 0 & 0 \\     0 & 0 & 0 & 1/2 & 1/2 & 0 \\ \end{array} \right)</script></li><li><p>ç”¨çŸ©é˜µè¡¨ç¤º<code>å¼(1)</code>ï¼š$P=A^TP$</p></li><li><p>å…¶ä¸­$P=[PR_1, PR_2, â€¦, PR_n]^T$</p></li></ul><h2 id="å¦‚ä½•æ±‚è§£"><a href="#å¦‚ä½•æ±‚è§£" class="headerlink" title="å¦‚ä½•æ±‚è§£"></a>å¦‚ä½•æ±‚è§£</h2><ul><li><p>å…ˆç»™æ¯ä¸ªç½‘é¡µç»™å®šä¸€ä¸ªåˆå§‹$PR$å€¼ï¼Œä¸€èˆ¬éƒ½æ˜¯$1/n$</p></li><li><p>ç„¶åä½¿ç”¨$P=A^TP$è¿›è¡Œè¿­ä»£ï¼Œç›´åˆ°$||P^k - P^{k-1}||&lt; \epsilon$ï¼Œè¿™æ˜¯ä¸€ä¸ªé©¬å°”å¯å¤«æ”¶æ•›è¿‡ç¨‹</p></li><li><p>ä½†æ˜¯éœ€è¦é‚»æ¥çŸ©é˜µ$A$æ»¡è¶³ä¸‹é¢3ä¸ªæ¡ä»¶ä¸Šå¼æ‰æœ‰è§£ï¼š</p><ol><li>è½¬ç§»æ¦‚ç‡çŸ©é˜µ<code>(stochastic matrix)</code>ï¼šå³æ¯è¡Œè‡³å°‘æœ‰ä¸€ä¸ªéé›¶å€¼</li><li>ä¸å¯çº¦æ€§ï¼šçŸ©é˜µAå¯¹åº”çš„æœ‰å‘å›¾å¿…é¡»æ˜¯å¼ºè¿é€šçš„ï¼Œå³ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå­˜åœ¨ä¸€æ¡è·¯å¾„å¯è¾¾</li><li>éå‘¨æœŸæ€§ï¼šå³å­˜åœ¨ä¸€ä¸ªæœ€å°æ­£æ•´æ•°$k$ï¼Œä½¿å¾—ä»æŸèŠ‚ç‚¹$i$å‡ºå‘åˆå›åˆ°çŠ¶æ€$i$çš„æ‰€æœ‰è·¯å¾„é•¿åº¦æ˜¯$k$çš„æ•´æ•°å€ï¼Œè¿™å°±éœ€è¦é˜»å°¼ç³»æ•°<code>d</code></li></ol></li><li><p>ä¸€èˆ¬æƒ…å†µä¸‹çŸ©é˜µ$A$ä¸æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ï¼Œæ•…éœ€è¦å¯¹æ±‚è§£å¼ä½œå¹³æ»‘å¤„ç†ï¼Œæœ€ç»ˆç­‰å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">P = \big ((1-d)\frac{I}{n} + dA^TP \big )</script></li><li><p>å…¶ä¸­ï¼š$d \in [0,1],I\text{æ˜¯å•ä½é˜µ}$</p></li></ul><h2 id="æœ€ç»ˆæ±‚è§£å¼"><a href="#æœ€ç»ˆæ±‚è§£å¼" class="headerlink" title="æœ€ç»ˆæ±‚è§£å¼"></a>æœ€ç»ˆæ±‚è§£å¼</h2><script type="math/tex; mode=display">P = \big ((1-d)\frac{I}{n} + dA^TP \big )</script><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><ul><li>ç¼ºç‚¹ï¼šæ—§çš„é¡µé¢çš„æ’åå¾€å¾€ä¼šæ¯”æ–°é¡µé¢é«˜<ul><li>å› ä¸ºå³ä½¿æ˜¯è´¨é‡å¾ˆé«˜çš„æ–°é¡µé¢ä¹Ÿå¾€å¾€ä¸ä¼šæœ‰å¾ˆå¤šå¤–é“¾ï¼Œé™¤éå®ƒæ˜¯æŸä¸ªå·²ç»å­˜åœ¨ç«™ç‚¹çš„å­ç«™ç‚¹ã€‚è¿™ä¹Ÿæ˜¯<code>PageRank</code>éœ€è¦å¤šé¡¹ç®—æ³•ç»“åˆä»¥ä¿è¯å…¶ç»“æœçš„å‡†ç¡®æ€§çš„åŸå› </li></ul></li></ul><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.cnblogs.com/en-heng/p/6124526.html" target="_blank" rel="noopener">ã€åå¤§ç»å…¸æ•°æ®æŒ–æ˜ç®—æ³•ã€‘PageRank</a></li><li><a href="https://zh.wikipedia.org/wiki/PageRank" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
            <tag> åå¤§ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLPä¹‹TF-IDF</title>
      <link href="/2021/03/10/nlp-zhi-tf-idf/"/>
      <url>/2021/03/10/nlp-zhi-tf-idf/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ul><li>ä¸€ç¯‡æ–‡ç« ä¸­å¦‚ä½•æå–å‡ºèƒ½ä»£è¡¨è¿™ç¯‡æ–‡ç« çš„å…³é”®è¯</li></ul><h2 id="è§£ç­”"><a href="#è§£ç­”" class="headerlink" title="è§£ç­”"></a>è§£ç­”</h2><ul><li>ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯æå–å‡ºè¯¥ç¯‡æ–‡ç« ä¸­<code>é«˜é¢‘è¯</code></li><li>ä½†æ˜¯<code>é«˜é¢‘è¯</code>å¯èƒ½æ˜¯é‚£äº›<code>çš„ï¼Œæ˜¯</code>ç­‰è¯ï¼Œæ‰€ä»¥è¦å‰”é™¤è¿™äº›è¯ï¼Œè¿™äº›è¯è¢«ç§°ä¸º<code>åœç”¨è¯(stop words)</code></li><li>è¿˜æœ‰å°±æ˜¯ç±»ä¼¼<code>ä¸­å›½</code>ç­‰è¯é«˜é¢‘ï¼Œä½†æ˜¯å¯èƒ½ä¸æ˜¯æ–‡ç« ä¸­çš„å…³é”®è¯ï¼Œå› ä¸ºè¿™ç§è¯åœ¨å¾ˆå¤šæ–‡ç« ä¸­éƒ½ä¼šå‡ºç°ï¼Œæ‰€ä»¥éœ€è¦é’ˆå¯¹é«˜é¢‘è¯ä½œä¸€ä¸ªé‡è¦æ€§è°ƒæ•´ï¼Œç§°ä¸ºé‡è¦æ€§è°ƒæ•´ç³»æ•°</li><li>é‚£å¦‚æœä¸€ä¸ªè¯é«˜é¢‘ï¼Œä¸”æ¯”è¾ƒå°‘è§ï¼Œé‚£è¿™ç§è¯æœ€å¯èƒ½åæ˜ è¯¥æ–‡ç« ç‰¹æ€§</li><li>è¿™å°±å¯¹åº”äº†<code>TF-IDF</code>ç®—æ³•</li></ul><h2 id="TF-IDFç®—æ³•"><a href="#TF-IDFç®—æ³•" class="headerlink" title="TF-IDFç®—æ³•"></a><code>TF-IDF</code>ç®—æ³•</h2><h3 id="TF"><a href="#TF" class="headerlink" title="TF"></a><code>TF</code></h3><ul><li>$\text{è¯é¢‘}(TF)=\frac{\text{æŸä¸ªè¯åœ¨æ–‡ç« ä¸­çš„å‡ºç°æ¬¡æ•°}}{\text{æ–‡ç« çš„æ€»è¯æ•°}}$</li><li>æˆ–è€…</li><li>$\text{è¯é¢‘}(TF)=\frac{\text{æŸä¸ªè¯åœ¨æ–‡ç« ä¸­çš„å‡ºç°æ¬¡æ•°}}{\text{è¯¥æ–‡å‡ºç°æ¬¡æ•°æœ€å¤šçš„è¯çš„å‡ºç°æ¬¡æ•°}}$</li></ul><h3 id="IDF"><a href="#IDF" class="headerlink" title="IDF"></a><code>IDF</code></h3><ul><li>$\text{é€†æ–‡æ¡£é¢‘ç‡}(IDF)=\log{\frac{\text{è¯­æ–™åº“çš„æ–‡æ¡£æ€»æ•°}}{\text{åŒ…å«è¯¥è¯çš„æ–‡æ¡£æ•°}+1}}$</li></ul><h3 id="TF-IDF"><a href="#TF-IDF" class="headerlink" title="TF-IDF"></a><code>TF-IDF</code></h3><ul><li>$TF-IDF=TF \times IDF$</li></ul><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><ol><li>ä¼˜ç‚¹ï¼šç®€å•å¿«é€Ÿï¼Œç»“æœæ¯”è¾ƒç¬¦åˆå®é™…æƒ…å†µ</li><li>ç¼ºç‚¹ï¼š<ol><li>å•çº¯ä»¥<code>è¯é¢‘</code>è¡¡é‡ä¸€ä¸ªè¯çš„é‡è¦æ€§ï¼Œä¸å¤Ÿå…¨é¢ï¼Œæœ‰æ—¶é‡è¦çš„è¯å¯èƒ½å‡ºç°æ¬¡æ•°å¹¶ä¸å¤š</li><li>è€Œä¸”ï¼Œè¿™ç§ç®—æ³•æ— æ³•ä½“ç°è¯çš„ä½ç½®ä¿¡æ¯ï¼Œå‡ºç°ä½ç½®é å‰çš„è¯ä¸å‡ºç°ä½ç½®é åçš„è¯ï¼Œéƒ½è¢«è§†ä¸ºé‡è¦æ€§ç›¸åŒï¼Œè¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚ï¼ˆä¸€ç§è§£å†³æ–¹æ³•æ˜¯ï¼Œå¯¹å…¨æ–‡çš„ç¬¬ä¸€æ®µå’Œæ¯ä¸€æ®µçš„ç¬¬ä¸€å¥è¯ï¼Œç»™äºˆè¾ƒå¤§çš„æƒé‡ã€‚ï¼‰</li></ol></li></ol><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h2 id="è®¡ç®—å·¥å…·"><a href="#è®¡ç®—å·¥å…·" class="headerlink" title="è®¡ç®—å·¥å…·"></a>è®¡ç®—å·¥å…·</h2><ol><li><p><a href="https://github.com/fxsjy/jieba" target="_blank" rel="noopener">Jieba</a></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">import jieba.analysejieba.analyse.extract_tags(sentence, topK=20, withWeight=False, allowPOS=())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.ruanyifeng.com/blog/2013/03/tf-idf.html" target="_blank" rel="noopener">TF-IDFä¸ä½™å¼¦ç›¸ä¼¼æ€§çš„åº”ç”¨ï¼ˆä¸€ï¼‰ï¼šè‡ªåŠ¨æå–å…³é”®è¯</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…³é”®è¯æå– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLPä¹‹åˆ†è¯åŸç†</title>
      <link href="/2021/03/09/nlp-zhi-fen-ci-yuan-li/"/>
      <url>/2021/03/09/nlp-zhi-fen-ci-yuan-li/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="åˆ†è¯çš„åŸºæœ¬åŸç†"><a href="#åˆ†è¯çš„åŸºæœ¬åŸç†" class="headerlink" title="åˆ†è¯çš„åŸºæœ¬åŸç†"></a>åˆ†è¯çš„åŸºæœ¬åŸç†</h2><ul><li><p>åŸºäºç»Ÿè®¡çš„åˆ†è¯ï¼Œç»Ÿè®¡çš„æ ·æœ¬å†…å®¹æ¥è‡ªä¸€äº›æ ‡å‡†çš„è¯­æ–™åº“</p></li><li><p>ä¸¾ä¸ªæ —å­ï¼Œæˆ‘ä»¬åˆ†è¯çš„æ—¶å€™å¸Œæœ›~å°çˆ±/æ¥åˆ°/å¤©æ²³/åŒº~è¿™ä¸ªåˆ†è¯åå¥å­å‡ºç°çš„æ¦‚ç‡è¦æ¯”~å°çˆ±/æ¥åˆ°/å¤©/æ²³/åŒº~çš„å¤§</p></li><li><p>ä¸Šè¿°ä¾‹å­ç”¨æ•°å­¦è¯­è¨€è¡¨ç¤ºå¦‚ä¸‹</p></li><li><p>å¦‚æœæœ‰ä¸€ä¸ªå¥å­<code>S</code>ï¼Œå®ƒæœ‰<code>m</code>ä¸­åˆ†è¯é€‰é¡¹å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">A_{11}A_{12}...A_{1n_1}  \\A_{21}A_{22}...A_{2n_2}  \\...  \\A_{m1}A_{m2}...A_{mn_m}</script></li><li><p>å…¶ä¸­$n_i$ä»£è¡¨ç¬¬$i$ç§åˆ†è¯çš„è¯ä¸ªæ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ä»ä¸­é€‰å‡ºçš„æ˜¯ï¼š$r = \underbrace{arg\;max}_iP(A_{i1},A_{i2},â€¦,A_{in_i})$</p></li><li><p>ä½†æ˜¯$P(A_{i1},A_{i2},â€¦,A_{in_i})$ä¸å¥½æ±‚ï¼Œæ•…ä½¿ç”¨é©¬å°”å¯å¤«å‡è®¾ï¼Œå‡è®¾å½“å‰è¯åªä¸å…¶å‰ä¸€ä¸ªè¯æœ‰å…³ï¼Œåˆ™ï¼š$P(A_{i1},A_{i2},â€¦,A_{in_i}) = P(A_{i1})P(A_{i2}|A_{i1})P(A_{i3}|A_{i2})â€¦P(A_{in_i}|A_{i(n_i-1)})$</p></li><li><p>é€šè¿‡æ ‡å‡†è¯­æ–™åº“ï¼Œå¯ä»¥è¿‘ä¼¼è®¡ç®—æ‰€æœ‰åˆ†è¯çš„äºŒå…ƒæ¡ä»¶æ¦‚ç‡ï¼Œå³ï¼š</p><script type="math/tex; mode=display">P(w_2|w_1) = \frac{P(w_1,w_2)}{P(w_1)} \approx \frac{freq(w_1,w_2)}{freq(w_1)}  \\P(w_1|w_2) = \frac{P(w_2,w_1)}{P(w_2)} \approx \frac{freq(w_1,w_2)}{freq(w_2)}</script></li><li><p><code>N</code>å…ƒæ¨¡å‹å®é™…åº”ç”¨ä¸­ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼š</p><ul><li>æŸäº›ç”Ÿåƒ»è¯ï¼Œæˆ–è€…ç›¸é‚»åˆ†è¯è”åˆåˆ†å¸ƒåœ¨è¯­æ–™åº“ä¸­æ²¡æœ‰ï¼Œæ¦‚ç‡ä¸º0ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼Œå³ç»™å®ƒä¸€ä¸ªè¾ƒå°çš„æ¦‚ç‡å€¼</li><li>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯å¦‚æœå¥å­é•¿ï¼Œåˆ†è¯æœ‰å¾ˆå¤šæƒ…å†µï¼Œè®¡ç®—é‡ä¹Ÿéå¸¸å¤§ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹ä¸€èŠ‚==ç»´ç‰¹æ¯”ç®—æ³•==æ¥ä¼˜åŒ–ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€‚</li></ul></li><li><p><code>N</code>å…ƒæ¨¡å‹å³å‡è®¾å½“å‰è¯ä¸å…¶å‰<code>N</code>ä¸ªè¯ç›¸å…³</p></li></ul><h2 id="ä½¿ç”¨ç»´ç‰¹æ¯”ç®—æ³•åˆ†è¯"><a href="#ä½¿ç”¨ç»´ç‰¹æ¯”ç®—æ³•åˆ†è¯" class="headerlink" title="ä½¿ç”¨ç»´ç‰¹æ¯”ç®—æ³•åˆ†è¯"></a>ä½¿ç”¨ç»´ç‰¹æ¯”ç®—æ³•åˆ†è¯</h2><h3 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h3><ul><li><p>è¾“å…¥ï¼š<code>S=</code>~äººç”Ÿå¦‚æ¢¦å¢ƒ~ï¼Œå®ƒåœ¨è¯­æ–™åº“ä¸­å¯èƒ½çš„æ¦‚ç‡å›¾å¦‚ä¸‹ï¼š</p><p><img src="/2021/03/09/nlp-zhi-fen-ci-yuan-li/image-20210309171556507.png" alt="å›¾ç‰‡æ¥æºï¼šæ–‡æœ¬æŒ–æ˜çš„åˆ†è¯åŸç†"></p></li><li><p>ä½¿ç”¨ç»´ç‰¹æ¯”ç®—æ³•å¦‚ä¸‹ï¼š</p></li><li><p>é¦–å…ˆåˆå§‹åŒ–æœ‰ï¼š$\delta(äºº) = 0.26\;\;\Psi(äºº)=Start\;\;\delta(äººç”Ÿ) = 0.44\;\;\Psi(äººç”Ÿ)=Start$</p></li><li><p>å¯¹èŠ‚ç‚¹<code>ç”Ÿ</code>ï¼š$\delta(ç”Ÿ) = \delta(äºº)P(ç”Ÿ|äºº) = 0.0442 \;\; \Psi(ç”Ÿ)=äºº$</p></li><li><p>å¯¹èŠ‚ç‚¹<code>å¦‚</code>ï¼š$\delta(å¦‚) = max\{\delta(ç”Ÿ)P(å¦‚|ç”Ÿ)ï¼Œ\delta(äººç”Ÿ)P(å¦‚|äººç”Ÿ)\} = max\{0.01680, 0.3168\} = 0.3168 \;\; \Psi(å¦‚) = äººç”Ÿ$</p></li><li><p>å…¶ä»–èŠ‚ç‚¹ç±»ä¼¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\delta(å¦‚æ¢¦) = \delta(äººç”Ÿ)P(å¦‚æ¢¦|äººç”Ÿ) = 0.242 \;\; \Psi(å¦‚æ¢¦)=äººç”Ÿ  \\\delta(æ¢¦) = \delta(å¦‚)P(æ¢¦|å¦‚) = 0.1996 \;\; \Psi(æ¢¦)=å¦‚  \\\delta(å¢ƒ) = max\{\delta(æ¢¦)P(å¢ƒ|æ¢¦) ,\delta(å¦‚æ¢¦)P(å¢ƒ|å¦‚æ¢¦)\}= max\{0.0359, 0.0315\} = 0.0359 \;\; \Psi(å¢ƒ)=æ¢¦  \\\delta(æ¢¦å¢ƒ) = \delta(å¦‚)P(æ¢¦å¢ƒ|å¦‚) = 0.1616 \;\; \Psi(æ¢¦å¢ƒ)=å¦‚  \\\delta(End) = max\{\delta(æ¢¦å¢ƒ)P(End|æ¢¦å¢ƒ), \delta(å¢ƒ)P(End|å¢ƒ)\} = max\{0.0396, 0.0047\} = 0.0396\;\;\Psi(End)=æ¢¦å¢ƒ \\\Psi(End)=æ¢¦å¢ƒ \to \Psi(æ¢¦å¢ƒ)=å¦‚ \to \Psi(å¦‚)=äººç”Ÿ \to \Psi(äººç”Ÿ)=start</script></li><li><p>ä»è€Œæœ€ç»ˆåˆ†è¯ç»“æœä¸º~äººç”Ÿ/å¦‚/æ¢¦å¢ƒ~</p></li></ul><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="ç–‘éš¾"><a href="#ç–‘éš¾" class="headerlink" title="ç–‘éš¾"></a>ç–‘éš¾</h1><h2 id="å¸¸ç”¨ä¸­æ–‡åˆ†è¯å·¥å…·"><a href="#å¸¸ç”¨ä¸­æ–‡åˆ†è¯å·¥å…·" class="headerlink" title="å¸¸ç”¨ä¸­æ–‡åˆ†è¯å·¥å…·"></a>å¸¸ç”¨ä¸­æ–‡åˆ†è¯å·¥å…·</h2><ol><li><a href="https://github.com/fxsjy/jieba" target="_blank" rel="noopener">Jieba</a>ï¼š<code>star:25.7k</code>åšæœ€å¥½çš„ Python ä¸­æ–‡åˆ†è¯ç»„ä»¶</li><li><a href="https://github.com/isnowfy/snownlp" target="_blank" rel="noopener">SnowNLP</a>ï¼š<code>star:5.3k</code>Simplified Chinese Text Processing</li><li><a href="https://github.com/lancopku/pkuseg-python" target="_blank" rel="noopener">pkuseg</a>ï¼š<code>star:5.3k</code>ä¸€ä¸ªå¤šé¢†åŸŸä¸­æ–‡åˆ†è¯å·¥å…·åŒ…</li><li><a href="https://github.com/thunlp/THULAC-Python" target="_blank" rel="noopener">THULAC</a>ï¼š<code>star:1.5k</code>ä¸€ä¸ªé«˜æ•ˆçš„ä¸­æ–‡è¯æ³•åˆ†æå·¥å…·åŒ…</li><li><a href="https://www.52nlp.cn/python%e4%b8%ad%e6%96%87%e5%88%86%e8%af%8d%e5%b7%a5%e5%85%b7-%e5%90%88%e9%9b%86-%e5%88%86%e8%af%8d%e5%ae%89%e8%a3%85-%e5%88%86%e8%af%8d%e4%bd%bf%e7%94%a8-%e5%88%86%e8%af%8d%e6%b5%8b%e8%af%95" target="_blank" rel="noopener">å…¶ä»–</a>ï¼šè¯¦æƒ…è¯·è§</li></ol><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.cnblogs.com/pinard/p/6677078.html" target="_blank" rel="noopener">æ–‡æœ¬æŒ–æ˜çš„åˆ†è¯åŸç†</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLPä¹‹HMM</title>
      <link href="/2021/03/03/nlp-zhi-hmm/"/>
      <url>/2021/03/03/nlp-zhi-hmm/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="ä»€ä¹ˆæ ·çš„é—®é¢˜å¯ä»¥ç”¨HMMæ¨¡å‹"><a href="#ä»€ä¹ˆæ ·çš„é—®é¢˜å¯ä»¥ç”¨HMMæ¨¡å‹" class="headerlink" title="ä»€ä¹ˆæ ·çš„é—®é¢˜å¯ä»¥ç”¨HMMæ¨¡å‹"></a>ä»€ä¹ˆæ ·çš„é—®é¢˜å¯ä»¥ç”¨HMMæ¨¡å‹</h2><ul><li>å¯ä»¥ç”¨HMMçš„é—®é¢˜å…·å¤‡ä¸¤ä¸ªç‰¹å¾<ul><li>é—®é¢˜æ˜¯åŸºäºåºåˆ—çš„ï¼Œä¾‹å¦‚ï¼šæ—¶é—´åºåˆ—ã€çŠ¶æ€åºåˆ—ç­‰</li><li>é—®é¢˜ä¸­æœ‰ä¸¤ç±»æ•°æ®ï¼Œå¯ä»¥è§‚æµ‹çš„è§‚æµ‹åºåˆ—å’Œæ— æ³•è§‚æµ‹çš„éšè—åºåˆ—</li></ul></li><li>ä¸¾ä¸ªæ —å­<ol><li>æ‰“å­—çš„æ—¶å€™ï¼Œé”®ç›˜æ‰“å‡ºæ¥çš„ä¸€ç³»åˆ—å­—ç¬¦æ˜¯å¯ä»¥è§‚æµ‹çš„è§‚æµ‹åºåˆ—ï¼Œè€Œæˆ‘è„‘å­é‡Œæƒ³é€šè¿‡è¿™äº›å­—ç¬¦å†™çš„ä¸€æ®µè¯æ˜¯æ²¡æ³•è§‚æµ‹çš„éšè—åºåˆ—</li><li>è¯´è¯çš„æ—¶å€™ï¼Œå£°éŸ³æ˜¯è§‚æµ‹åºåˆ—ï¼Œè€Œå®é™…æƒ³è¡¨è¾¾çš„æ˜¯éšè—åºåˆ—ï¼Œå¾—é€šè¿‡å£°éŸ³æ¥åˆ¤æ–­å‡ºæƒ³è¡¨è¾¾çš„éšè—åºåˆ—</li></ol></li></ul><h2 id="HMMæ¨¡å‹å®šä¹‰"><a href="#HMMæ¨¡å‹å®šä¹‰" class="headerlink" title="HMMæ¨¡å‹å®šä¹‰"></a>HMMæ¨¡å‹å®šä¹‰</h2><h3 id="ä¸¾ä¸ªæ —å­è¯´æ˜"><a href="#ä¸¾ä¸ªæ —å­è¯´æ˜" class="headerlink" title="ä¸¾ä¸ªæ —å­è¯´æ˜"></a>ä¸¾ä¸ªæ —å­è¯´æ˜</h3><ul><li>æ —å­æ¥æºäºã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•=æèˆªã€‹</li><li>æ —å­å¦‚ä¸‹ï¼š</li></ul><p>å‡è®¾æœ‰3ä¸ªç›’å­ï¼Œæ¯ä¸ªç›’å­æœ‰å¤šä¸ªçº¢ç™½ä¸¤ç§çƒï¼Œæ•°é‡å¦‚ä¸‹è¡¨ï¼š</p><div class="table-container"><table><thead><tr><th>ç›’å­</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>çº¢</td><td>5</td><td>4</td><td>7</td></tr><tr><td>ç™½</td><td>5</td><td>6</td><td>3</td></tr></tbody></table></div><p>æœ‰æ”¾å›æŠ½çƒ3æ¬¡ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>ç¬¬ä¸€æ¬¡ä»ç›’1æŠ½çš„æ¦‚ç‡0.2ï¼Œç›’2ã€ç›’3å‡æ˜¯0.4</li><li>æ¥ä¸‹æ¥æ¯ä¸€æ¬¡çš„æŠ½å–è§„åˆ™ï¼š<ol><li>å¦‚æœå½“å‰æŠ½çš„ç›’1ï¼Œåˆ™æŒ‰0.5ã€0.2ã€0.3è¿›è¡Œç›’1ã€2ã€3æŠ½å–</li><li>å¦‚æœå½“å‰æŠ½çš„ç›’2ï¼Œåˆ™æŒ‰0.3ã€0.5ã€0.2è¿›è¡Œç›’1ã€2ã€3æŠ½å–</li><li>å¦‚æœå½“å‰æŠ½çš„ç›’3ï¼Œåˆ™æŒ‰0.2ã€0.3ã€0.5è¿›è¡Œç›’1ã€2ã€3æŠ½å–</li></ol></li><li>æŠ½3æ¬¡ï¼Œå¾—åˆ°è§‚æµ‹åºåˆ—ï¼š$O=\{\text{çº¢ã€ç™½ã€çº¢}\}$ï¼Œè€Œéšè—åºåˆ—æ˜¯$Q=\{\text{ç›’å­1ã€2ã€3}\}$ï¼Œå› ä¸ºä¸çŸ¥é“æ¯ä¸ªçƒæ˜¯ä»å“ªä¸ªç›’å­æŠ½å‡ºçš„</li></ol><p>ä»ä¸Šè¿°è§„åˆ™å¯ä»¥æå–å‡ºï¼š</p><ol><li>è§‚æµ‹åºåˆ—é›†åˆ$V=\{\text{çº¢ã€ç™½}\},M=2$</li><li>éšè—åºåˆ—é›†åˆ$Q=\{\text{ç›’å­1ã€2ã€3}\},N=3$</li><li>éšè—åºåˆ—åˆå§‹çŠ¶æ€åˆ†å¸ƒ$\Pi =(0.2,0.4,0.4)^T$</li><li>éšè—åºåˆ—è½¬ç§»åˆ†å¸ƒçŸ©é˜µ$A = \left( \begin{array} {ccc} 0.5 &amp; 0.2 &amp; 0.3 \\ 0.3 &amp; 0.5 &amp; 0.2 \\ 0.2 &amp; 0.3 &amp;0.5 \end{array} \right)$</li><li>è§‚æµ‹åºåˆ—æ¦‚ç‡çŸ©é˜µ$B = \left( \begin{array} {ccc} 0.5 &amp; 0.5 \\ 0.4 &amp; 0.6 \\ 0.7 &amp; 0.3 \end{array} \right)$ï¼Œè¡Œæ˜¯ç›’1ã€2ã€3ï¼Œåˆ—æ˜¯çº¢ã€ç™½</li></ol><h3 id="é€šä¿—å®šä¹‰"><a href="#é€šä¿—å®šä¹‰" class="headerlink" title="é€šä¿—å®šä¹‰"></a>é€šä¿—å®šä¹‰</h3><ul><li>è®¾$Q = \{q_1,q_2,â€¦,q_N\}, \; V =\{v_1,v_2,â€¦v_M\}$åˆ†åˆ«ä¸ºéšè—åºåˆ—é›†åˆã€å¯è§‚æµ‹åºåˆ—é›†åˆ</li><li>è®¾$I = \{i_1,i_2,â€¦,i_T\}, \; O =\{o_1,o_2,â€¦o_T\}$åˆ†åˆ«ä¸ºéšè—åºåˆ—åˆ—è¡¨ã€å¯è§‚æµ‹åºåˆ—åˆ—è¡¨</li><li>å…¶ä¸­ä»»æ„ä¸€ä¸ª$i_t \in Q$ï¼Œä»»æ„ä¸€ä¸ª$o_t \in V$</li></ul><h4 id="ä¸¤ä¸ªé‡è¦å‡è®¾-ä¸€ä¸ªéšè—åºåˆ—é›†åˆåˆå§‹åˆ†å¸ƒ"><a href="#ä¸¤ä¸ªé‡è¦å‡è®¾-ä¸€ä¸ªéšè—åºåˆ—é›†åˆåˆå§‹åˆ†å¸ƒ" class="headerlink" title="ä¸¤ä¸ªé‡è¦å‡è®¾+ä¸€ä¸ªéšè—åºåˆ—é›†åˆåˆå§‹åˆ†å¸ƒ"></a>ä¸¤ä¸ªé‡è¦å‡è®¾+ä¸€ä¸ªéšè—åºåˆ—é›†åˆåˆå§‹åˆ†å¸ƒ</h4><ol><li>é½æ¬¡é©¬å°”ç§‘å¤«é“¾å‡è®¾ï¼Œå³$i_t$åªä¾èµ–äº$i_{t-1}$ï¼Œ<ul><li>è¿™æ ·è½¬ç§»æ¦‚ç‡çŸ©é˜µè¡¨ç¤ºæˆ$A=\Big [a_{ij}\Big ]_{N \times N}$ï¼Œå…¶ä¸­$a_{ij} = P(i_{t+1} = q_j | i_t= q_i)$</li></ul></li><li>è§‚æµ‹ç‹¬ç«‹æ€§å‡è®¾ï¼Œå³ä»»æ„æ—¶åˆ»çš„è§‚æµ‹åºåˆ—å€¼ä»…ä¾èµ–å½“å‰æ—¶åˆ»çš„éšè—åºåˆ—å€¼<ul><li>è¿™æ ·è§‚æµ‹åºåˆ—æ¦‚ç‡çŸ©é˜µè¡¨ç¤ºæˆ$B = \Big [b_j(k) \Big ]_{N \times M}$ï¼Œå…¶ä¸­$b_j(k) = P(o_t = v_k | i_t= q_j)$</li></ul></li><li>é™¤æ­¤ä¹‹å¤–éœ€è¦ä¸€ç»„åœ¨æ—¶åˆ»$t=1$çš„éšè—åºåˆ—é›†åˆçš„æ¦‚ç‡åˆ†å¸ƒ$\Pi = \Big [ \pi(i)\Big ]_N \; å…¶ä¸­ \;\pi(i) = P(i_1 = q_i)$</li></ol><h4 id="HMMå®šä¹‰"><a href="#HMMå®šä¹‰" class="headerlink" title="HMMå®šä¹‰"></a>HMMå®šä¹‰</h4><ul><li>åˆ™HMMè¡¨ç¤ºä¸º$\lambda = (A, B, \Pi)$</li></ul><h2 id="HMMè§‚æµ‹åºåˆ—çš„ç”Ÿæˆ"><a href="#HMMè§‚æµ‹åºåˆ—çš„ç”Ÿæˆ" class="headerlink" title="HMMè§‚æµ‹åºåˆ—çš„ç”Ÿæˆ"></a>HMMè§‚æµ‹åºåˆ—çš„ç”Ÿæˆ</h2><ul><li>è¾“å…¥ï¼š$\lambda = (A, B, \Pi)$</li><li>è¾“å‡ºï¼š$O =\{o_1,o_2,â€¦o_T\}$ï¼Œé•¿åº¦ä¸º$T$</li><li>ç”Ÿæˆæ­¥éª¤ï¼š<ol><li>æ ¹æ®åˆå§‹çŠ¶æ€æ¦‚ç‡åˆ†å¸ƒ$\Pi$ç”Ÿæˆéšè—çŠ¶æ€$i_1$</li><li>for t in range(1, T+1)<ol><li>æŒ‰ç…§éšè—çŠ¶æ€$i_t$çš„è§‚æµ‹çŠ¶æ€åˆ†å¸ƒ$b_{i_t}(k)$ç”Ÿæˆè§‚æµ‹çŠ¶æ€$o_t$</li><li>æŒ‰ç…§éšè—çŠ¶æ€$i_t$çš„è½¬ç§»æ¦‚ç‡åˆ†å¸ƒ$a_{i_t,i_{t+1}}$ç”Ÿæˆéšè—çŠ¶æ€$i_{t+1}$</li></ol></li></ol></li></ul><h2 id="HMMæ¨¡å‹éœ€è¦è§£å†³çš„ä¸‰ä¸ªé—®é¢˜"><a href="#HMMæ¨¡å‹éœ€è¦è§£å†³çš„ä¸‰ä¸ªé—®é¢˜" class="headerlink" title="HMMæ¨¡å‹éœ€è¦è§£å†³çš„ä¸‰ä¸ªé—®é¢˜"></a>HMMæ¨¡å‹éœ€è¦è§£å†³çš„ä¸‰ä¸ªé—®é¢˜</h2><ol><li>è¯„ä¼°è§‚æµ‹åºåˆ—æ¦‚ç‡ï¼Œç»™å®šæ¨¡å‹å’Œè§‚æµ‹åºåˆ—ï¼Œè®¡ç®—è§‚æµ‹åºåˆ—å‡ºç°çš„æ¦‚ç‡ï¼Œå‰å‘åå‘ç®—æ³•</li><li>æ¨¡å‹å‚æ•°å­¦ä¹ ï¼Œç»™å®šè§‚æµ‹åºåˆ—ï¼Œä¼°è®¡æ¨¡å‹çš„å‚æ•°ä½¿è§‚æµ‹åºåˆ—å‡ºç°çš„æ¦‚ç‡æœ€å¤§ï¼ŒåŸºäºEMç®—æ³•çš„é²å§†-éŸ¦å°”å¥‡ç®—æ³•</li><li>é¢„æµ‹ï¼Œç»™å®šæ¨¡å‹å’Œè§‚æµ‹åºåˆ—ï¼Œæ±‚ç»™å®šè§‚æµ‹åºåˆ—åï¼Œæœ€å¯èƒ½å‡ºç°çš„éšè—åºåˆ—ï¼ŒåŸºäºåŠ¨æ€è§„åˆ’çš„ç»´ç‰¹æ¯”ç®—æ³•</li></ol><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><h3 id="é—®é¢˜ä¸€ï¼šè¯„ä¼°è§‚æµ‹åºåˆ—æ¦‚ç‡"><a href="#é—®é¢˜ä¸€ï¼šè¯„ä¼°è§‚æµ‹åºåˆ—æ¦‚ç‡" class="headerlink" title="é—®é¢˜ä¸€ï¼šè¯„ä¼°è§‚æµ‹åºåˆ—æ¦‚ç‡"></a>é—®é¢˜ä¸€ï¼šè¯„ä¼°è§‚æµ‹åºåˆ—æ¦‚ç‡</h3><h4 id="æš´åŠ›æ±‚è§£"><a href="#æš´åŠ›æ±‚è§£" class="headerlink" title="æš´åŠ›æ±‚è§£"></a>æš´åŠ›æ±‚è§£</h4><h5 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h5><ol><li>æˆ‘ä»¬å¯ä»¥åˆ—ä¸¾å‡ºæ‰€æœ‰å¯èƒ½å‡ºç°çš„é•¿åº¦ä¸º$T$çš„éšè—åºåˆ—$I = \{i_1,i_2,â€¦,i_T\}$ï¼Œä»»æ„ä¸€ä¸ªéšè—åºåˆ—$I = \{i_1,i_2,â€¦,i_T\}$å‡ºç°çš„æ¦‚ç‡ä¸ºï¼š$P(I|\lambda) = \pi_{i_1} a_{i_1i_2} a_{i_2i_3}â€¦ a_{i_{T-1}\;\;i_T}$</li><li>å¯¹äºå›ºå®šçš„éšè—åºåˆ—$I = \{i_1,i_2,â€¦,i_T\}$ï¼Œæˆ‘ä»¬è¦æ±‚çš„è§‚æµ‹åºåˆ—$O =\{o_1,o_2,â€¦o_T\}$å‡ºç°çš„æ¦‚ç‡ä¸ºï¼š$P(O|I, \lambda) = b_{i_1}(o_1)b_{i_2}(o_2)â€¦b_{i_T}(o_T)$</li><li>åˆ™$O,T$çš„è”åˆæ¦‚ç‡ä¸ºï¼š$P(O,I|\lambda) = P(I|\lambda)P(O|I, \lambda) = \pi_{i_1}b_{i_1}(o_1)a_{i_1i_2}b_{i_2}(o_2)â€¦a_{i_{T-1}\;\;i_T}b_{i_T}(o_T)$</li><li>æœ€åæ±‚è§‚æµ‹åºåˆ—$O$åœ¨æ¨¡å‹$\lambda$ä¸‹å‡ºç°çš„æ¡ä»¶æ¦‚ç‡$P(O|\lambda)$ä¸ºï¼š$P(O|\lambda) = \sum\limits_{I}P(O,I|\lambda)  = \sum\limits_{i_1,i_2,â€¦i_T}\pi_{i_1}b_{i_1}(o_1)a_{i_1i_2}b_{i_2}(o_2)â€¦a_{i_{T-1}\;\;i_T}b_{i_T}(o_T)$</li></ol><h5 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h5><ul><li>æš´åŠ›æ±‚è§£å¤ªè€—æ—¶ï¼Œå½“éšè—çŠ¶æ€æ•°$N$å¤ªå¤§æ—¶</li><li>æ—¶é—´å¤æ‚åº¦ï¼š$O(TN^T)$</li></ul><h4 id="å‰å‘ç®—æ³•"><a href="#å‰å‘ç®—æ³•" class="headerlink" title="å‰å‘ç®—æ³•"></a>å‰å‘ç®—æ³•</h4><ul><li>å‰å‘æ¦‚ç‡å®šä¹‰ï¼š$\alpha_t(i) = P(o_1,o_2,â€¦o_t, i_t =q_i | \lambda)$</li></ul><h5 id="æ­¥éª¤-1"><a href="#æ­¥éª¤-1" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h5><ol><li>è®¡ç®—æ—¶åˆ»1çš„å„ä¸ªéšè—çŠ¶æ€å‰å‘æ¦‚ç‡ï¼š$\alpha_1(i) = \pi_ib_i(o_1),\; i=1,2,â€¦N$</li><li>from t=2 to Tï¼š<ol><li>è®¡ç®—æ—¶åˆ»$t$çš„å„ä¸ªéšè—çŠ¶æ€å‰è¡Œæ¦‚ç‡ï¼š$\alpha_{t+1}(i) = \Big[\sum\limits_{j=1}^N\alpha_t(j)a_{ji}\Big]b_i(o_{t+1}),\; i=1,2,â€¦N$</li></ol></li><li>è®¡ç®—æœ€ç»ˆç»“æœï¼š$P(O|\lambda) = \sum\limits_{i=1}^N\alpha_T(i)$</li></ol><h5 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h5><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š$O(TN^2)$</li></ul><h4 id="åå‘ç®—æ³•"><a href="#åå‘ç®—æ³•" class="headerlink" title="åå‘ç®—æ³•"></a>åå‘ç®—æ³•</h4><ul><li>åå‘æ¦‚ç‡å®šä¹‰ï¼š$\beta_t(i) = P(o_{t+1},o_{t+2},â€¦o_T| i_t =q_i , \lambda)$</li></ul><h5 id="æ­¥éª¤-2"><a href="#æ­¥éª¤-2" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h5><ol><li>åˆå§‹åŒ–æ—¶åˆ»$T$å„ä¸ªéšè—çŠ¶æ€åå‘æ¦‚ç‡ï¼š$\beta_T(i) = 1,\; i=1,2,â€¦N$</li><li>from t=T-1 to 1ï¼š<ol><li>è®¡ç®—æ—¶åˆ»$t$çš„åå‘æ¦‚ç‡ï¼š$\beta_{t}(i) = \sum\limits_{j=1}^{N}a_{ij}b_j(o_{t+1})\beta_{t+1}(j),\; i=1,2,â€¦N$</li></ol></li><li>è®¡ç®—æœ€ç»ˆç»“æœï¼š$P(O|\lambda) = \sum\limits_{i=1}^N\pi_ib_i(o_1)\beta_1(i)$</li></ol><h5 id="é—®é¢˜-1"><a href="#é—®é¢˜-1" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h5><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š$O(TN^2)$</li></ul><h3 id="é—®é¢˜äºŒï¼šæ¨¡å‹å‚æ•°å­¦ä¹ ï¼šå­¦ä¹ -A-B-lambda"><a href="#é—®é¢˜äºŒï¼šæ¨¡å‹å‚æ•°å­¦ä¹ ï¼šå­¦ä¹ -A-B-lambda" class="headerlink" title="é—®é¢˜äºŒï¼šæ¨¡å‹å‚æ•°å­¦ä¹ ï¼šå­¦ä¹ $A,B,\lambda$"></a>é—®é¢˜äºŒï¼šæ¨¡å‹å‚æ•°å­¦ä¹ ï¼šå­¦ä¹ $A,B,\lambda$</h3><h4 id="æ ¹æ®å‰å‘åå‘ç®—æ³•è®¡ç®—å¸¸ç”¨æ¦‚ç‡"><a href="#æ ¹æ®å‰å‘åå‘ç®—æ³•è®¡ç®—å¸¸ç”¨æ¦‚ç‡" class="headerlink" title="æ ¹æ®å‰å‘åå‘ç®—æ³•è®¡ç®—å¸¸ç”¨æ¦‚ç‡"></a>æ ¹æ®å‰å‘åå‘ç®—æ³•è®¡ç®—å¸¸ç”¨æ¦‚ç‡</h4><ol><li>ç»™å®šæ¨¡å‹$\lambda$å’Œè§‚æµ‹åºåˆ—$O$ï¼Œåœ¨æ—¶åˆ»$t$å¤„äºçŠ¶æ€$q_i$çš„æ¦‚ç‡ä¸ºï¼š$\gamma_t(i) = P(i_t = q_i | O,\lambda) = \frac{P(i_t = q_i ,O|\lambda)}{P(O|\lambda)}= \frac{ \alpha_t(i)\beta_t(i)}{\sum\limits_{j=1}^N \alpha_t(j)\beta_t(j)}$</li><li>ç»™å®šæ¨¡å‹$\lambda$å’Œè§‚æµ‹åºåˆ—$O$ï¼Œåœ¨æ—¶åˆ»$t$å¤„äºçŠ¶æ€$q_i$ï¼Œä¸”æ—¶åˆ»$t+1$å¤„äºçŠ¶æ€$q_j$çš„æ¦‚ç‡ä¸ºï¼š$\xi_t(i,j) = P(i_t = q_i, i_{t+1}=q_j | O,\lambda) = \frac{ P(i_t = q_i, i_{t+1}=q_j , O|\lambda)}{P(O|\lambda)}=\frac{\alpha_t(i)a_{ij}b_j(o_{t+1})\beta_{t+1}(j)}{\sum\limits_{r=1}^N\sum\limits_{s=1}^N\alpha_t(r)a_{rs}b_s(o_{t+1})\beta_{t+1}(s)}$</li><li>ç”±1ã€2å¯å¾—ï¼š<ol><li>åœ¨è§‚æµ‹åºåˆ—$O$ä¸‹çŠ¶æ€$i$å‡ºç°çš„æœŸæœ›å€¼ä¸ºï¼š$\sum\limits_{t=1}^T\gamma_t(i)$</li><li>åœ¨è§‚æµ‹åºåˆ—$O$ä¸‹çŠ¶æ€$i$è½¬ç§»çš„æœŸæœ›å€¼ä¸ºï¼š$\sum\limits_{t=1}^{T-1}\gamma_t(i)$</li><li>åœ¨è§‚æµ‹åºåˆ—$O$ä¸‹çŠ¶æ€$i$è½¬ç§»åˆ°çŠ¶æ€$j$çš„æœŸæœ›å€¼ä¸ºï¼š$\sum\limits_{t=1}^{T-1}\xi_t(i,j)$</li></ol></li></ol><h4 id="æ±‚è§£æ¨¡å‹å‚æ•°ï¼šç®€å•æƒ…å†µ-éšè—åºåˆ—å·²çŸ¥"><a href="#æ±‚è§£æ¨¡å‹å‚æ•°ï¼šç®€å•æƒ…å†µ-éšè—åºåˆ—å·²çŸ¥" class="headerlink" title="æ±‚è§£æ¨¡å‹å‚æ•°ï¼šç®€å•æƒ…å†µ-éšè—åºåˆ—å·²çŸ¥"></a>æ±‚è§£æ¨¡å‹å‚æ•°ï¼šç®€å•æƒ…å†µ-éšè—åºåˆ—å·²çŸ¥</h4><p>å·²çŸ¥$D$ä¸ªé•¿åº¦ä¸º$T$çš„è§‚æµ‹åºåˆ—å’Œå¯¹åº”çš„éšè—åºåˆ—ï¼Œå³$\{(O_1, I_1), (O_2, I_2), â€¦(O_D, I_D)\}$ï¼Œæ±‚è§£å¦‚ä¸‹ï¼š</p><ol><li>ç»Ÿè®¡ä»éšè—çŠ¶æ€$q_i$åˆ°$q_j$çš„é¢‘ç‡è®¡æ•°ä¸º$A_{ij}$ï¼Œé‚£ä¹ˆå¯å¾—éšè—çŠ¶æ€è½¬ç§»çŸ©é˜µ$A$</li><li>ç»Ÿè®¡æ ·æœ¬éšè—çŠ¶æ€ä¸º$q_j$ä¸”è§‚æµ‹çŠ¶æ€ä¸º$v_k$çš„é¢‘ç‡è®¡æ•°ä¸º$B_{jk}$ï¼Œåˆ™è§‚æµ‹çŠ¶æ€çŸ©é˜µä¸º$B$</li><li>ç»Ÿè®¡æ ·æœ¬åˆå§‹éšè—çŠ¶æ€ä¸º$q_i$çš„é¢‘ç‡è®¡æ•°ä¸º$C(i)$ï¼Œåˆ™åˆå§‹æ¦‚ç‡åˆ†å¸ƒä¸º$\Pi$</li></ol><h4 id="æ±‚è§£æ¨¡å‹å‚æ•°ï¼šå¤æ‚æƒ…å†µ-éšè—åºåˆ—æœªçŸ¥"><a href="#æ±‚è§£æ¨¡å‹å‚æ•°ï¼šå¤æ‚æƒ…å†µ-éšè—åºåˆ—æœªçŸ¥" class="headerlink" title="æ±‚è§£æ¨¡å‹å‚æ•°ï¼šå¤æ‚æƒ…å†µ-éšè—åºåˆ—æœªçŸ¥"></a>æ±‚è§£æ¨¡å‹å‚æ•°ï¼šå¤æ‚æƒ…å†µ-éšè—åºåˆ—æœªçŸ¥</h4><p>å·²çŸ¥$D$ä¸ªé•¿åº¦ä¸º$T$çš„è§‚æµ‹åºåˆ—ï¼Œå³$\{(O_1), (O_2), â€¦(O_D)\}$ï¼Œ</p><p><strong>é²å§†-éŸ¦å°”å¥‡ç®—æ³•</strong></p><ol><li>Eæ­¥ï¼šæ±‚å‡ºè”åˆåˆ†å¸ƒ$P(O,I|\lambda)$åŸºäºæ¡ä»¶æ¦‚ç‡$P(I|O,\overline{\lambda})$çš„æœŸæœ›è¡¨è¾¾å¼ï¼š$L(\lambda, \overline{\lambda}) = \sum\limits_{I}P(I|O,\overline{\lambda})logP(O,I|\lambda)$</li><li>Mæ­¥ï¼šæå¤§åŒ–ä¸Šå¼ï¼Œæ›´æ–°å‚æ•°ï¼š$\overline{\lambda} = arg\;\max_{\lambda}\sum\limits_{I}P(I|O,\overline{\lambda})logP(O,I|\lambda)$</li><li>ä¸æ–­è¿­ä»£EMæ­¥ï¼Œç›´åˆ°æ”¶æ•›</li></ol><p><strong>å…·ä½“æ­¥éª¤</strong></p><ul><li><p>è¾“å…¥ï¼š$\{(O_1), (O_2), â€¦(O_D)\}$</p></li><li><p>è¾“å‡ºï¼šHMMæ¨¡å‹å‚æ•°</p></li><li><p>æ­¥éª¤ï¼š</p><ol><li><p>éšæœºåˆå§‹åŒ–æ‰€æœ‰çš„$\Pi,A,B$</p></li><li><p>å¯¹äºæ¯ä¸ªæ ·æœ¬ï¼Œç”¨å‰å‘åå‘ç®—æ³•è®¡ç®—$\gamma_t^{(d)}(i)ï¼Œ\xi_t^{(d)}(i,j), t =1,2â€¦T$</p></li><li><p>æ›´æ–°æ¨¡å‹å‚æ•°ï¼š</p><script type="math/tex; mode=display">\pi_i =  \frac{\sum\limits_{d=1}^D\gamma_1^{(d)}(i)}{D} \\a_{ij} = \frac{\sum\limits_{d=1}^D\sum\limits_{t=1}^{T-1}\xi_t^{(d)}(i,j)}{\sum\limits_{d=1}^D\sum\limits_{t=1}^{T-1}\gamma_t^{(d)}(i)} \\b_{j}(k) = \frac{\sum\limits_{d=1}^D\sum\limits_{t=1, o_t^{(d)}=v_k}^{T}\gamma_t^{(d)}(j)}{\sum\limits_{d=1}^D\sum\limits_{t=1}^{T}\gamma_t^{(d)}(j)}</script></li><li><p>å¦‚æœ$\Pi,A,B$å·²ç»æ”¶æ•›ï¼Œåˆ™ç®—æ³•ç»“æŸï¼Œå¦åˆ™ä»ç¬¬äºŒæ­¥å¼€å§‹ç»§ç»­è¿­ä»£</p></li></ol></li></ul><h3 id="é—®é¢˜ä¸‰ï¼šé¢„æµ‹-ç»´ç‰¹æ¯”ç®—æ³•"><a href="#é—®é¢˜ä¸‰ï¼šé¢„æµ‹-ç»´ç‰¹æ¯”ç®—æ³•" class="headerlink" title="é—®é¢˜ä¸‰ï¼šé¢„æµ‹-ç»´ç‰¹æ¯”ç®—æ³•"></a>é—®é¢˜ä¸‰ï¼šé¢„æµ‹-ç»´ç‰¹æ¯”ç®—æ³•</h3><h4 id="ä¸¤ä¸ªå±€éƒ¨çŠ¶æ€"><a href="#ä¸¤ä¸ªå±€éƒ¨çŠ¶æ€" class="headerlink" title="ä¸¤ä¸ªå±€éƒ¨çŠ¶æ€"></a>ä¸¤ä¸ªå±€éƒ¨çŠ¶æ€</h4><ol><li><p>åœ¨æ—¶åˆ»$t$éšè—çŠ¶æ€ä¸º$i$æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€è½¬ç§»è·¯å¾„$i_1,i_2,â€¦i_t$ä¸­çš„æ¦‚ç‡æœ€å¤§å€¼ï¼Œè®°ä¸º$\delta_t(i) = \max_{i_1,i_2,â€¦i_{t-1}}\;P(i_t=i, i_1,i_2,â€¦i_{t-1},o_t,o_{t-1},â€¦o_1|\lambda),\; i =1,2,â€¦N$ï¼Œä¸”é€’æ¨è¡¨è¾¾å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{align} \delta_{t+1}(i) & =  \max_{i_1,i_2,...i_{t}}\;P(i_{t+1}=i, i_1,i_2,...i_{t},o_{t+1},o_{t},...o_1|\lambda) \\ & = \max_{1 \leq j \leq N}\;[\delta_t(j)a_{ji}]b_i(o_{t+1})\end{align}</script></li><li><p>åœ¨æ—¶åˆ»$t$éšè—çŠ¶æ€ä¸º$i$æ‰€æœ‰å•ä¸ªçŠ¶æ€è½¬ç§»è·¯å¾„$(i_1,i_2,â€¦,i_{t-1},i)$ä¸­æ¦‚ç‡æœ€å¤§çš„è½¬ç§»è·¯å¾„ä¸­ç¬¬$t-1$ä¸ªèŠ‚ç‚¹çš„éšè—çŠ¶æ€ä¸º$\Psi_t(i)$ï¼Œå…¶é€’æ¨è¡¨è¾¾å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\Psi_t(i) = arg \; \max_{1 \leq j \leq N}\;[\delta_{t-1}(j)a_{ji}]</script></li></ol><h4 id="ç®—æ³•æµç¨‹"><a href="#ç®—æ³•æµç¨‹" class="headerlink" title="ç®—æ³•æµç¨‹"></a>ç®—æ³•æµç¨‹</h4><ul><li><p>è¾“å…¥ï¼šHMMæ¨¡å‹$\lambda = (A,B,\Pi)$ï¼Œè§‚æµ‹åºåˆ—$O=(o_1,o_2,â€¦o_T)$</p></li><li><p>è¾“å‡ºï¼šæœ€æœ‰å¯èƒ½çš„éšè—çŠ¶æ€åºåˆ—$I^<em>= \{i_1^</em>,i_2^<em>,â€¦i_T^</em>\}$</p></li><li><p>æ­¥éª¤ï¼š</p><ol><li><p>åˆå§‹åŒ–å±€éƒ¨çŠ¶æ€ï¼š</p><script type="math/tex; mode=display">\delta_1(i) = \pi_ib_i(o_1),\;i=1,2...N \\\Psi_1(i)=0,\;i=1,2...N</script></li><li><p>from t=2 to Tï¼š</p><script type="math/tex; mode=display">\delta_{t}(i) = \max_{1 \leq j \leq N}\;[\delta_{t-1}(j)a_{ji}]b_i(o_{t}),\;i=1,2...N \\\Psi_t(i) = arg \; \max_{1 \leq j \leq N}\;[\delta_{t-1}(j)a_{ji}],\;i=1,2...N</script></li><li><p>è®¡ç®—æ—¶åˆ»$T$æœ€å¤§çš„$\delta_T(i)$ä»¥åŠå¯¹åº”çš„$\Psi_T(i)$ï¼Œå¼€å§‹å›æº¯å¾—åˆ°æœ€å¯èƒ½çš„éšè—çŠ¶æ€åºåˆ—$I^<em>= \{i_1^</em>,i_2^<em>,â€¦i_T^</em>\}$</p></li></ol></li></ul><h4 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h4><ul><li><p>è¾“å…¥ï¼š</p><script type="math/tex; mode=display">\Pi = (0.2,0.4,0.4)^T  \\A = \left( \begin{array} {ccc} 0.5 & 0.2 & 0.3 \\ 0.3 & 0.5 & 0.2 \\ 0.2 & 0.3 &0.5 \end{array} \right)  \\B = \left( \begin{array} {ccc} 0.5 & 0.5 \\ 0.4 & 0.6 \\ 0.7 & 0.3 \end{array} \right)  \\\text{è§‚æµ‹åºåˆ—ï¼š}O=\{çº¢ï¼Œç™½ï¼Œçº¢\}</script></li><li><p>è®¡ç®—ï¼š</p><ul><li><p>è§‚æµ‹çŠ¶æ€ä¸º<code>çº¢</code>ï¼š</p><script type="math/tex; mode=display">\delta_1(1) = \pi_1b_1(o_1) = 0.2 \times 0.5 = 0.1  \\\delta_1(2) = \pi_2b_2(o_1) = 0.4 \times 0.4 = 0.16  \\\delta_1(3) = \pi_3b_3(o_1) = 0.4 \times 0.7 = 0.28  \\\Psi_1(1)=\Psi_1(2) =\Psi_1(3) =0</script></li><li><p>ç„¶åè§‚æµ‹çŠ¶æ€ä¸º<code>ç™½</code>ï¼š</p><script type="math/tex; mode=display">\delta_2(1) = \max_{1\leq j \leq 3}[\delta_1(j)a_{j1}]b_1(o_2) = \max_{1\leq j \leq 3}[0.1 \times 0.5, 0.16 \times 0.3, 0.28\times 0.2] \times 0.5 = 0.028  \\\Psi_2(1)=\max_{1\leq j \leq 3}[0.1 \times 0.5, 0.16 \times 0.3, 0.28\times 0.2]=0.56, \text{å¯¹åº”çš„éšè—çŠ¶æ€æ˜¯3} \\\delta_2(2) = \max_{1\leq j \leq 3}[\delta_1(j)a_{j2}]b_2(o_2) = \max_{1\leq j \leq 3}[0.1 \times 0.2, 0.16 \times 0.5, 0.28\times 0.3] \times 0.6 = 0.0504  \\\Psi_2(2)=3  \\\delta_2(3) = \max_{1\leq j \leq 3}[\delta_1(j)a_{j3}]b_3(o_2) = \max_{1\leq j \leq 3}[0.1 \times 0.3, 0.16 \times 0.2, 0.28\times 0.5] \times 0.3 = 0.042  \\\Psi_2(3)=3</script></li><li><p>ç„¶åè§‚æµ‹çŠ¶æ€ä¸º<code>çº¢</code>ï¼š</p><script type="math/tex; mode=display">\delta_3(1) = \max_{1\leq j \leq 3}[\delta_2(j)a_{j1}]b_1(o_3) = \max_{1\leq j \leq 3}[0.028 \times 0.5, 0.0504 \times 0.3, 0.042\times 0.2] \times 0.5 = 0.00756  \\\Psi_3(1)=2 \\\delta_3(2) = \max_{1\leq j \leq 3}[\delta_2(j)a_{j2}]b_2(o_3) = \max_{1\leq j \leq 3}[0.028  \times 0.2, 0.0504\times 0.5, 0.042\times 0.3] \times 0.4 = 0.01008 \\\Psi_3(2)=2  \\\delta_3(3) = \max_{1\leq j \leq 3}[\delta_2(j)a_{j3}]b_3(o_3) = \max_{1\leq j \leq 3}[0.028  \times 0.3, 0.0504 \times 0.2, 0.042\times 0.5] \times 0.7 = 0.0147  \\\Psi_3(3)=3</script></li><li><p>ç°åœ¨å¼€å§‹å›æº¯ï¼Œæ­¤æ—¶æœ€å¤§æ¦‚ç‡ä¸º$\delta_3(3)$ï¼Œä»è€Œå¾—åˆ°$i_3^* =3$</p></li><li><p>ç”±äº$\Psi_3(3)=3,\Psi_2(3)=3$ï¼Œæ‰€ä»¥æœ€ç»ˆæœ€å¯èƒ½çš„éšè—çŠ¶æ€åºåˆ—ä¸º$(3,3,3)$</p></li></ul></li></ul><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><ul><li><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1></li></ul><h2 id="ä¸ºä»€ä¹ˆè¿™é‡Œçš„ç»´ç‰¹æ¯”å’Œä¸­æ–‡åˆ†è¯é‚£é‡Œä¸å¤ªç›¸åŒï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿™é‡Œçš„ç»´ç‰¹æ¯”å’Œä¸­æ–‡åˆ†è¯é‚£é‡Œä¸å¤ªç›¸åŒï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿™é‡Œçš„ç»´ç‰¹æ¯”å’Œä¸­æ–‡åˆ†è¯é‚£é‡Œä¸å¤ªç›¸åŒï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿™é‡Œçš„ç»´ç‰¹æ¯”å’Œä¸­æ–‡åˆ†è¯é‚£é‡Œä¸å¤ªç›¸åŒï¼Ÿ</h2><ul><li>ä¸­æ–‡åˆ†è¯æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰è§‚æµ‹åºåˆ—å’Œéšè—åºåˆ—çš„åŒºåˆ«ï¼Œåªæœ‰ä¸€ç§çŠ¶æ€</li></ul><h2 id="ç»´ç‰¹æ¯”ç®—æ³•ä¸dijkstraç®—æ³•åŒºåˆ«ï¼Ÿ"><a href="#ç»´ç‰¹æ¯”ç®—æ³•ä¸dijkstraç®—æ³•åŒºåˆ«ï¼Ÿ" class="headerlink" title="ç»´ç‰¹æ¯”ç®—æ³•ä¸dijkstraç®—æ³•åŒºåˆ«ï¼Ÿ"></a>ç»´ç‰¹æ¯”ç®—æ³•ä¸dijkstraç®—æ³•åŒºåˆ«ï¼Ÿ</h2><ul><li>ç»´ç‰¹æ¯”ç®—æ³•ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œè€Œdijkstraæ˜¯è´ªå¿ƒç®—æ³•</li><li>ç»´ç‰¹æ¯”ç®—æ³•ä»…ä»…å±€é™äºæ±‚åºåˆ—æœ€çŸ­è·¯å¾„ï¼Œè€Œdijkstraæ˜¯é€šç”¨çš„æ±‚æœ€çŸ­è·¯å¾„æ–¹æ³•</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="https://www.cnblogs.com/pinard/p/6945257.html" target="_blank" rel="noopener">éšé©¬å°”ç§‘å¤«æ¨¡å‹HMMï¼ˆä¸€ï¼‰HMMæ¨¡å‹</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HMM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹Flink</title>
      <link href="/2021/01/20/shi-yong-gong-ju-zhi-flink/"/>
      <url>/2021/01/20/shi-yong-gong-ju-zhi-flink/</url>
      
        <content type="html"><![CDATA[<h1 id="FlinkåŸºç¡€"><a href="#FlinkåŸºç¡€" class="headerlink" title="FlinkåŸºç¡€"></a>FlinkåŸºç¡€</h1><h2 id="Flinkæ˜¯ä»€ä¹ˆ"><a href="#Flinkæ˜¯ä»€ä¹ˆ" class="headerlink" title="Flinkæ˜¯ä»€ä¹ˆ"></a>Flinkæ˜¯ä»€ä¹ˆ</h2><h3 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h3><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><ul><li>Apache Flink æ˜¯ä¸€ä¸ªæ¡†æ¶å’Œåˆ†å¸ƒå¼å¤„ç†å¼•æ“ï¼Œç”¨äºåœ¨==æ— è¾¹ç•Œå’Œæœ‰è¾¹ç•Œæ•°æ®æµ==ä¸Šè¿›è¡Œæœ‰çŠ¶æ€çš„è®¡ç®—ã€‚</li><li>Flink èƒ½åœ¨æ‰€æœ‰å¸¸è§é›†ç¾¤ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶èƒ½ä»¥==å†…å­˜é€Ÿåº¦å’Œä»»æ„è§„æ¨¡==è¿›è¡Œè®¡ç®—ã€‚</li></ul><h4 id="å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®"><a href="#å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®" class="headerlink" title="å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®"></a>å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®</h4><ol><li><strong>æ— ç•Œæµ</strong> æœ‰å®šä¹‰æµçš„å¼€å§‹ï¼Œä½†æ²¡æœ‰å®šä¹‰æµçš„ç»“æŸã€‚å®ƒä»¬ä¼šæ— ä¼‘æ­¢åœ°äº§ç”Ÿæ•°æ®ã€‚æ— ç•Œæµçš„æ•°æ®å¿…é¡»æŒç»­å¤„ç†ï¼Œå³æ•°æ®è¢«æ‘„å–åéœ€è¦ç«‹åˆ»å¤„ç†ã€‚æˆ‘ä»¬ä¸èƒ½ç­‰åˆ°æ‰€æœ‰æ•°æ®éƒ½åˆ°è¾¾å†å¤„ç†ï¼Œå› ä¸ºè¾“å…¥æ˜¯æ— é™çš„ï¼Œåœ¨ä»»ä½•æ—¶å€™è¾“å…¥éƒ½ä¸ä¼šå®Œæˆã€‚å¤„ç†æ— ç•Œæ•°æ®é€šå¸¸è¦æ±‚ä»¥ç‰¹å®šé¡ºåºæ‘„å–äº‹ä»¶ï¼Œä¾‹å¦‚äº‹ä»¶å‘ç”Ÿçš„é¡ºåºï¼Œä»¥ä¾¿èƒ½å¤Ÿæ¨æ–­ç»“æœçš„å®Œæ•´æ€§ã€‚</li><li><strong>æœ‰ç•Œæµ</strong> æœ‰å®šä¹‰æµçš„å¼€å§‹ï¼Œä¹Ÿæœ‰å®šä¹‰æµçš„ç»“æŸã€‚æœ‰ç•Œæµå¯ä»¥åœ¨æ‘„å–æ‰€æœ‰æ•°æ®åå†è¿›è¡Œè®¡ç®—ã€‚æœ‰ç•Œæµæ‰€æœ‰æ•°æ®å¯ä»¥è¢«æ’åºï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦æœ‰åºæ‘„å–ã€‚æœ‰ç•Œæµå¤„ç†é€šå¸¸è¢«ç§°ä¸ºæ‰¹å¤„ç†</li><li><strong>Apache Flink æ“…é•¿å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®é›†</strong> ç²¾ç¡®çš„==æ—¶é—´æ§åˆ¶å’ŒçŠ¶æ€åŒ–==ä½¿å¾— Flink çš„è¿è¡Œæ—¶(runtime)èƒ½å¤Ÿè¿è¡Œä»»ä½•å¤„ç†æ— ç•Œæµçš„åº”ç”¨ã€‚æœ‰ç•Œæµåˆ™ç”±ä¸€äº›ä¸“ä¸ºå›ºå®šå¤§å°æ•°æ®é›†ç‰¹æ®Šè®¾è®¡çš„ç®—æ³•å’Œæ•°æ®ç»“æ„è¿›è¡Œå†…éƒ¨å¤„ç†ï¼Œäº§ç”Ÿäº†å‡ºè‰²çš„æ€§èƒ½ã€‚</li></ol><h4 id="éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹"><a href="#éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹" class="headerlink" title="éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹"></a>éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹</h4><ol><li>Apache Flink æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå®ƒéœ€è¦è®¡ç®—èµ„æºæ¥æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚</li><li>Flink é›†æˆäº†æ‰€æœ‰å¸¸è§çš„é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼Œä¾‹å¦‚ <a href="https://hadoop.apache.org/docs/stable/hadoop-yarn/hadoop-yarn-site/YARN.html" target="_blank" rel="noopener">Hadoop YARN</a>ã€ <a href="https://mesos.apache.org/" target="_blank" rel="noopener">Apache Mesos</a> å’Œ <a href="https://kubernetes.io/" target="_blank" rel="noopener">Kubernetes</a>ï¼Œä½†==åŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹é›†ç¾¤==è¿è¡Œã€‚</li><li>éƒ¨ç½² Flink åº”ç”¨ç¨‹åºæ—¶ï¼ŒFlink ä¼š==æ ¹æ®åº”ç”¨ç¨‹åºé…ç½®çš„å¹¶è¡Œæ€§è‡ªåŠ¨æ ‡è¯†==æ‰€éœ€çš„èµ„æºï¼Œå¹¶ä»èµ„æºç®¡ç†å™¨è¯·æ±‚è¿™äº›èµ„æºã€‚åœ¨å‘ç”Ÿæ•…éšœçš„æƒ…å†µä¸‹ï¼ŒFlink é€šè¿‡è¯·æ±‚æ–°èµ„æºæ¥æ›¿æ¢å‘ç”Ÿæ•…éšœçš„å®¹å™¨ã€‚æäº¤æˆ–æ§åˆ¶åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯é€šè¿‡ REST è°ƒç”¨è¿›è¡Œçš„ï¼Œè¿™å¯ä»¥ç®€åŒ– Flink ä¸å„ç§ç¯å¢ƒä¸­çš„é›†æˆã€‚</li></ol><h4 id="è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨"><a href="#è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨" class="headerlink" title="è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨"></a>è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨</h4><ol><li>Flink æ—¨åœ¨==ä»»æ„è§„æ¨¡==ä¸Šè¿è¡Œ==æœ‰çŠ¶æ€æµå¼==åº”ç”¨</li><li>å› æ­¤ï¼Œåº”ç”¨ç¨‹åºè¢«å¹¶è¡ŒåŒ–ä¸ºå¯èƒ½æ•°åƒä¸ªä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡åˆ†å¸ƒåœ¨é›†ç¾¤ä¸­å¹¶å‘æ‰§è¡Œã€‚æ‰€ä»¥åº”ç”¨ç¨‹åºèƒ½å¤Ÿå……åˆ†åˆ©ç”¨æ— å°½çš„ CPUã€å†…å­˜ã€ç£ç›˜å’Œç½‘ç»œ IO</li><li>è€Œä¸” Flink å¾ˆå®¹æ˜“ç»´æŠ¤éå¸¸å¤§çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚å…¶==å¼‚æ­¥å’Œå¢é‡çš„æ£€æŸ¥ç‚¹ç®—æ³•==å¯¹å¤„ç†å»¶è¿Ÿäº§ç”Ÿæœ€å°çš„å½±å“ï¼ŒåŒæ—¶==ä¿è¯ç²¾ç¡®ä¸€æ¬¡çŠ¶æ€==çš„ä¸€è‡´æ€§ã€‚<ol><li>å¤„ç†<strong>æ¯å¤©å¤„ç†æ•°ä¸‡äº¿çš„äº‹ä»¶</strong></li><li>åº”ç”¨ç»´æŠ¤<strong>å‡ TBå¤§å°çš„çŠ¶æ€</strong></li><li>åº”ç”¨<strong>åœ¨æ•°åƒä¸ªå†…æ ¸ä¸Šè¿è¡Œ</strong></li></ol></li></ol><h4 id="åˆ©ç”¨å†…å­˜æ€§èƒ½"><a href="#åˆ©ç”¨å†…å­˜æ€§èƒ½" class="headerlink" title="åˆ©ç”¨å†…å­˜æ€§èƒ½"></a>åˆ©ç”¨å†…å­˜æ€§èƒ½</h4><ol><li>æœ‰çŠ¶æ€çš„ Flink ç¨‹åºé’ˆå¯¹æœ¬åœ°çŠ¶æ€è®¿é—®è¿›è¡Œäº†ä¼˜åŒ–</li><li>ä»»åŠ¡çš„çŠ¶æ€å§‹ç»ˆä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœ==çŠ¶æ€å¤§å°è¶…è¿‡å¯ç”¨å†…å­˜==ï¼Œåˆ™ä¼šä¿å­˜åœ¨èƒ½é«˜æ•ˆè®¿é—®çš„ç£ç›˜æ•°æ®ç»“æ„ä¸­</li><li>ä»»åŠ¡é€šè¿‡è®¿é—®æœ¬åœ°ï¼ˆé€šå¸¸åœ¨å†…å­˜ä¸­ï¼‰çŠ¶æ€æ¥è¿›è¡Œæ‰€æœ‰çš„è®¡ç®—ï¼Œä»è€Œäº§ç”Ÿéå¸¸ä½çš„å¤„ç†å»¶è¿Ÿ</li><li>Flink é€šè¿‡==å®šæœŸå’Œå¼‚æ­¥==åœ°å¯¹æœ¬åœ°çŠ¶æ€è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨æ¥ä¿è¯æ•…éšœåœºæ™¯ä¸‹ç²¾ç¡®ä¸€æ¬¡çš„çŠ¶æ€ä¸€è‡´æ€§</li></ol><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><h4 id="æµå¤„ç†åº”ç”¨çš„åŸºæœ¬ç»„ä»¶"><a href="#æµå¤„ç†åº”ç”¨çš„åŸºæœ¬ç»„ä»¶" class="headerlink" title="æµå¤„ç†åº”ç”¨çš„åŸºæœ¬ç»„ä»¶"></a>æµå¤„ç†åº”ç”¨çš„åŸºæœ¬ç»„ä»¶</h4><ol><li><a href="#æµ">æµ</a></li><li><a href="#çŠ¶æ€">çŠ¶æ€</a></li><li>æ—¶é—´</li></ol><h5 id="æµ"><a href="#æµ" class="headerlink" title="æµ"></a>æµ</h5><ol><li><strong>æœ‰ç•Œ</strong> å’Œ <strong>æ— ç•Œ</strong> çš„æ•°æ®æµï¼šæµå¯ä»¥æ˜¯æ— ç•Œçš„ï¼›ä¹Ÿå¯ä»¥æ˜¯æœ‰ç•Œçš„ï¼Œä¾‹å¦‚å›ºå®šå¤§å°çš„æ•°æ®é›†ã€‚Flink åœ¨æ— ç•Œçš„æ•°æ®æµå¤„ç†ä¸Šæ‹¥æœ‰è¯¸å¤šåŠŸèƒ½å¼ºå¤§çš„ç‰¹æ€§ï¼ŒåŒæ—¶ä¹Ÿé’ˆå¯¹æœ‰ç•Œçš„æ•°æ®æµå¼€å‘äº†ä¸“ç”¨çš„é«˜æ•ˆç®—å­ã€‚</li><li><strong>å®æ—¶</strong> å’Œ <strong>å†å²è®°å½•</strong> çš„æ•°æ®æµï¼šæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä»¥æµçš„æ–¹å¼äº§ç”Ÿï¼Œä½†ç”¨æˆ·é€šå¸¸ä¼šä½¿ç”¨ä¸¤ç§æˆªç„¶ä¸åŒçš„æ–¹æ³•å¤„ç†æ•°æ®ã€‚æˆ–æ˜¯==åœ¨æ•°æ®ç”Ÿæˆæ—¶è¿›è¡Œå®æ—¶çš„å¤„ç†==ï¼›äº¦æˆ–æ˜¯==å…ˆå°†æ•°æ®æµæŒä¹…åŒ–åˆ°å­˜å‚¨ç³»ç»Ÿä¸­==â€”â€”ä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿæˆ–å¯¹è±¡å­˜å‚¨ï¼Œç„¶åå†è¿›è¡Œæ‰¹å¤„ç†ã€‚Flink çš„åº”ç”¨èƒ½å¤ŸåŒæ—¶æ”¯æŒå¤„ç†å®æ—¶ä»¥åŠå†å²è®°å½•æ•°æ®æµã€‚</li></ol><h5 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h5><ol><li><strong>ä¸éœ€è¦çŠ¶æ€</strong>ï¼šåœ¨æ¯ä¸€ä¸ªå•ç‹¬çš„äº‹ä»¶ä¸Šè¿›è¡Œè½¬æ¢æ“ä½œçš„åº”ç”¨</li><li><strong>éœ€è¦çŠ¶æ€</strong>ï¼šæ¯ä¸€ä¸ªå…·æœ‰ä¸€å®šå¤æ‚åº¦çš„æµå¤„ç†åº”ç”¨</li><li>ä»»ä½•è¿è¡ŒåŸºæœ¬ä¸šåŠ¡é€»è¾‘çš„æµå¤„ç†åº”ç”¨éƒ½éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…å­˜å‚¨æ‰€æ¥æ”¶çš„äº‹ä»¶æˆ–ä¸­é—´ç»“æœï¼Œä»¥ä¾›åç»­çš„æŸä¸ªæ—¶é—´ç‚¹ï¼ˆä¾‹å¦‚æ”¶åˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶æˆ–è€…ç»è¿‡ä¸€æ®µç‰¹å®šæ—¶é—´ï¼‰è¿›è¡Œè®¿é—®å¹¶è¿›è¡Œåç»­å¤„ç†</li><li><strong>çŠ¶æ€ç®¡ç†ç›¸å…³çš„ç‰¹æ€§æ”¯æŒ</strong>ï¼š<ol><li><strong>å¤šç§çŠ¶æ€åŸºç¡€ç±»å‹</strong>ï¼šFlink ä¸ºå¤šç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›äº†ç›¸å¯¹åº”çš„çŠ¶æ€åŸºç¡€ç±»å‹ï¼Œä¾‹å¦‚åŸå­å€¼ï¼ˆvalueï¼‰ï¼Œåˆ—è¡¨ï¼ˆlistï¼‰ä»¥åŠæ˜ å°„ï¼ˆmapï¼‰ã€‚å¼€å‘è€…å¯ä»¥åŸºäºå¤„ç†å‡½æ•°å¯¹çŠ¶æ€çš„è®¿é—®æ–¹å¼ï¼Œé€‰æ‹©æœ€é«˜æ•ˆã€æœ€é€‚åˆçš„çŠ¶æ€åŸºç¡€ç±»å‹ã€‚</li><li><strong>æ’ä»¶åŒ–çš„State Backend</strong>ï¼šState Backend è´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œ checkpointã€‚Flink æ”¯æŒå¤šç§ state backendï¼Œå¯ä»¥å°†çŠ¶æ€å­˜åœ¨å†…å­˜æˆ–è€… <a href="https://rocksdb.org/" target="_blank" rel="noopener">RocksDB</a>ã€‚RocksDB æ˜¯ä¸€ç§é«˜æ•ˆçš„åµŒå…¥å¼ã€æŒä¹…åŒ–é”®å€¼å­˜å‚¨å¼•æ“ã€‚Flink ä¹Ÿæ”¯æŒæ’ä»¶å¼çš„è‡ªå®šä¹‰ state backend è¿›è¡ŒçŠ¶æ€å­˜å‚¨ã€‚</li><li><strong>ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰</strong>ï¼šFlink çš„ checkpoint å’Œæ•…éšœæ¢å¤ç®—æ³•ä¿è¯äº†æ•…éšœå‘ç”Ÿååº”ç”¨çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚å› æ­¤ï¼ŒFlink èƒ½å¤Ÿåœ¨åº”ç”¨ç¨‹åºå‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯¹åº”ç”¨ç¨‹åºé€æ˜ï¼Œä¸é€ æˆæ­£ç¡®æ€§çš„å½±å“ã€‚</li><li><strong>è¶…å¤§æ•°æ®é‡çŠ¶æ€</strong>ï¼šFlink èƒ½å¤Ÿåˆ©ç”¨å…¶å¼‚æ­¥ä»¥åŠå¢é‡å¼çš„ checkpoint ç®—æ³•ï¼Œå­˜å‚¨æ•° TB çº§åˆ«çš„åº”ç”¨çŠ¶æ€ã€‚</li><li><strong>å¯å¼¹æ€§ä¼¸ç¼©çš„åº”ç”¨</strong>ï¼šFlink èƒ½å¤Ÿé€šè¿‡åœ¨æ›´å¤šæˆ–æ›´å°‘çš„å·¥ä½œèŠ‚ç‚¹ä¸Šå¯¹çŠ¶æ€è¿›è¡Œé‡æ–°åˆ†å¸ƒï¼Œæ”¯æŒæœ‰çŠ¶æ€åº”ç”¨çš„åˆ†å¸ƒå¼çš„æ¨ªå‘ä¼¸ç¼©ã€‚</li></ol></li></ol><h5 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h5><ol><li>æ—¶é—´æ˜¯æµå¤„ç†åº”ç”¨å¦ä¸€ä¸ªé‡è¦çš„ç»„æˆéƒ¨åˆ†ã€‚å› ä¸ºäº‹ä»¶æ€»æ˜¯åœ¨ç‰¹å®šæ—¶é—´ç‚¹å‘ç”Ÿï¼Œæ‰€ä»¥å¤§å¤šæ•°çš„äº‹ä»¶æµéƒ½æ‹¥æœ‰äº‹ä»¶æœ¬èº«æ‰€å›ºæœ‰çš„æ—¶é—´è¯­ä¹‰ã€‚</li><li>è¿›ä¸€æ­¥è€Œè¨€ï¼Œè®¸å¤šå¸¸è§çš„==æµè®¡ç®—éƒ½åŸºäºæ—¶é—´è¯­ä¹‰==ï¼Œä¾‹å¦‚çª—å£èšåˆã€ä¼šè¯è®¡ç®—ã€æ¨¡å¼æ£€æµ‹å’ŒåŸºäºæ—¶é—´çš„ joinã€‚</li><li>æµå¤„ç†çš„ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯åº”ç”¨ç¨‹åºå¦‚ä½•è¡¡é‡æ—¶é—´ï¼Œå³åŒºåˆ†äº‹ä»¶æ—¶é—´ï¼ˆevent-timeï¼‰å’Œå¤„ç†æ—¶é—´ï¼ˆprocessing-timeï¼‰<ol><li><strong>äº‹ä»¶æ—¶é—´æ¨¡å¼</strong>ï¼šä½¿ç”¨äº‹ä»¶æ—¶é—´è¯­ä¹‰çš„æµå¤„ç†åº”ç”¨æ ¹æ®äº‹ä»¶æœ¬èº«è‡ªå¸¦çš„æ—¶é—´æˆ³è¿›è¡Œç»“æœçš„è®¡ç®—ã€‚å› æ­¤ï¼Œæ— è®ºå¤„ç†çš„æ˜¯å†å²è®°å½•çš„äº‹ä»¶è¿˜æ˜¯å®æ—¶çš„äº‹ä»¶ï¼Œäº‹ä»¶æ—¶é—´æ¨¡å¼çš„å¤„ç†æ€»èƒ½ä¿è¯ç»“æœçš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§</li><li><strong>Watermark æ”¯æŒ</strong>ï¼šFlink å¼•å…¥äº† watermark çš„æ¦‚å¿µï¼Œç”¨ä»¥è¡¡é‡äº‹ä»¶æ—¶é—´è¿›å±•ã€‚Watermark ä¹Ÿæ˜¯ä¸€ç§å¹³è¡¡å¤„ç†å»¶æ—¶å’Œå®Œæ•´æ€§çš„çµæ´»æœºåˆ¶ã€‚</li><li><strong>è¿Ÿåˆ°æ•°æ®å¤„ç†</strong>ï¼šå½“ä»¥å¸¦æœ‰ watermark çš„äº‹ä»¶æ—¶é—´æ¨¡å¼å¤„ç†æ•°æ®æµæ—¶ï¼Œåœ¨è®¡ç®—å®Œæˆä¹‹åä»ä¼šæœ‰ç›¸å…³æ•°æ®åˆ°è¾¾ã€‚è¿™æ ·çš„äº‹ä»¶è¢«ç§°ä¸ºè¿Ÿåˆ°äº‹ä»¶ã€‚Flink æä¾›äº†å¤šç§å¤„ç†è¿Ÿåˆ°æ•°æ®çš„é€‰é¡¹ï¼Œä¾‹å¦‚å°†è¿™äº›æ•°æ®é‡å®šå‘åˆ°æ—è·¯è¾“å‡ºï¼ˆside outputï¼‰æˆ–è€…æ›´æ–°ä¹‹å‰å®Œæˆè®¡ç®—çš„ç»“æœã€‚</li><li><strong>å¤„ç†æ—¶é—´æ¨¡å¼</strong>ï¼šé™¤äº†äº‹ä»¶æ—¶é—´æ¨¡å¼ï¼ŒFlink è¿˜æ”¯æŒå¤„ç†æ—¶é—´è¯­ä¹‰ã€‚å¤„ç†æ—¶é—´æ¨¡å¼æ ¹æ®å¤„ç†å¼•æ“çš„æœºå™¨æ—¶é’Ÿè§¦å‘è®¡ç®—ï¼Œä¸€èˆ¬é€‚ç”¨äºæœ‰ç€ä¸¥æ ¼çš„ä½å»¶è¿Ÿéœ€æ±‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®¹å¿è¿‘ä¼¼ç»“æœçš„æµå¤„ç†åº”ç”¨ã€‚</li></ol></li></ol><h4 id="åˆ†æˆAPI"><a href="#åˆ†æˆAPI" class="headerlink" title="åˆ†æˆAPI"></a>åˆ†æˆAPI</h4><p><img src="https://flink.apache.org/img/api-stack.png" alt="imgï¼šå›¾ç‰‡æ¥æºflinkå®˜ç½‘"></p><h5 id="ProcessFunction"><a href="#ProcessFunction" class="headerlink" title="ProcessFunction"></a><code>ProcessFunction</code></h5><ol><li>ProcessFunction å¯ä»¥å¤„ç†==ä¸€æˆ–ä¸¤æ¡==è¾“å…¥æ•°æ®æµä¸­çš„å•ä¸ªäº‹ä»¶æˆ–è€…å½’å…¥ä¸€ä¸ªç‰¹å®šçª—å£å†…çš„å¤šä¸ªäº‹ä»¶</li><li>å®ƒæä¾›äº†å¯¹äºæ—¶é—´å’ŒçŠ¶æ€çš„ç»†ç²’åº¦æ§åˆ¶ã€‚å¼€å‘è€…å¯ä»¥åœ¨å…¶ä¸­ä»»æ„åœ°ä¿®æ”¹çŠ¶æ€ï¼Œä¹Ÿèƒ½å¤Ÿæ³¨å†Œå®šæ—¶å™¨ç”¨ä»¥åœ¨æœªæ¥çš„æŸä¸€æ—¶åˆ»è§¦å‘å›è°ƒå‡½æ•°</li><li>å› æ­¤ï¼Œä½ å¯ä»¥åˆ©ç”¨ ProcessFunction å®ç°è®¸å¤š<a href="https://flink.apache.org/zh/usecases.html#eventDrivenApps" target="_blank" rel="noopener">æœ‰çŠ¶æ€çš„äº‹ä»¶é©±åŠ¨åº”ç”¨</a>æ‰€éœ€è¦çš„åŸºäºå•ä¸ªäº‹ä»¶çš„å¤æ‚ä¸šåŠ¡é€»è¾‘</li><li><a href="https://flink.apache.org/zh/flink-applications.html" target="_blank" rel="noopener">ä¾‹å­</a></li></ol><h5 id="DataStreamAPI"><a href="#DataStreamAPI" class="headerlink" title="DataStreamAPI"></a><code>DataStreamAPI</code></h5><ol><li><a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/datastream_api.html" target="_blank" rel="noopener">DataStream API</a> ä¸ºè®¸å¤šé€šç”¨çš„æµå¤„ç†æ“ä½œæä¾›äº†å¤„ç†åŸè¯­ã€‚è¿™äº›æ“ä½œåŒ…æ‹¬çª—å£ã€é€æ¡è®°å½•çš„è½¬æ¢æ“ä½œï¼Œåœ¨å¤„ç†äº‹ä»¶æ—¶è¿›è¡Œå¤–éƒ¨æ•°æ®åº“æŸ¥è¯¢ç­‰</li><li>DataStream API æ”¯æŒ Java å’Œ Scala è¯­è¨€ï¼Œé¢„å…ˆå®šä¹‰äº†ä¾‹å¦‚<code>map()</code>ã€<code>reduce()</code>ã€<code>aggregate()</code> ç­‰å‡½æ•°ã€‚ä½ å¯ä»¥é€šè¿‡æ‰©å±•å®ç°é¢„å®šä¹‰æ¥å£æˆ–ä½¿ç”¨ Javaã€Scala çš„ lambda è¡¨è¾¾å¼å®ç°è‡ªå®šä¹‰çš„å‡½æ•°ã€‚</li><li><a href="https://flink.apache.org/zh/flink-applications.html" target="_blank" rel="noopener">ä¾‹å­</a></li></ol><h5 id="SQL-amp-Table-API"><a href="#SQL-amp-Table-API" class="headerlink" title="SQL &amp; Table API"></a><code>SQL &amp; Table API</code></h5><ol><li>Flink æ”¯æŒä¸¤ç§å…³ç³»å‹çš„ APIï¼Œ<a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/table/index.html" target="_blank" rel="noopener">Table API å’Œ SQL</a>ã€‚è¿™ä¸¤ä¸ª API éƒ½æ˜¯æ‰¹å¤„ç†å’Œæµå¤„ç†ç»Ÿä¸€çš„ APIï¼Œè¿™æ„å‘³ç€åœ¨æ— è¾¹ç•Œçš„å®æ—¶æ•°æ®æµå’Œæœ‰è¾¹ç•Œçš„å†å²è®°å½•æ•°æ®æµä¸Šï¼Œå…³ç³»å‹ API ä¼šä»¥ç›¸åŒçš„è¯­ä¹‰æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¹¶äº§ç”Ÿç›¸åŒçš„ç»“æœ</li><li>Table API å’Œ SQL å€ŸåŠ©äº† <a href="https://calcite.apache.org/" target="_blank" rel="noopener">Apache Calcite</a> æ¥è¿›è¡ŒæŸ¥è¯¢çš„è§£æï¼Œæ ¡éªŒä»¥åŠä¼˜åŒ–</li><li>å®ƒä»¬å¯ä»¥ä¸ DataStream å’Œ DataSet API æ— ç¼é›†æˆï¼Œå¹¶æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰çš„æ ‡é‡å‡½æ•°ï¼Œèšåˆå‡½æ•°ä»¥åŠè¡¨å€¼å‡½æ•°</li><li>Flink çš„å…³ç³»å‹ API æ—¨åœ¨ç®€åŒ–<a href="https://flink.apache.org/zh/usecases.html#analytics" target="_blank" rel="noopener">æ•°æ®åˆ†æ</a>ã€<a href="https://flink.apache.org/zh/usecases.html#pipelines" target="_blank" rel="noopener">æ•°æ®æµæ°´çº¿å’Œ ETL åº”ç”¨</a>çš„å®šä¹‰</li></ol><h4 id="åº“"><a href="#åº“" class="headerlink" title="åº“"></a>åº“</h4><ul><li>Flink å…·æœ‰æ•°ä¸ªé€‚ç”¨äºå¸¸è§æ•°æ®å¤„ç†åº”ç”¨åœºæ™¯çš„æ‰©å±•åº“ã€‚è¿™äº›åº“é€šå¸¸åµŒå…¥åœ¨ API ä¸­ï¼Œä¸”å¹¶ä¸å®Œå…¨ç‹¬ç«‹äºå…¶å®ƒ APIã€‚å®ƒä»¬ä¹Ÿå› æ­¤å¯ä»¥å—ç›Šäº API çš„æ‰€æœ‰ç‰¹æ€§ï¼Œå¹¶ä¸å…¶ä»–åº“é›†æˆ<ol><li><strong><a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/libs/cep.html" target="_blank" rel="noopener">å¤æ‚äº‹ä»¶å¤„ç†(CEP)</a></strong>ï¼šæ¨¡å¼æ£€æµ‹æ˜¯äº‹ä»¶æµå¤„ç†ä¸­çš„ä¸€ä¸ªéå¸¸å¸¸è§çš„ç”¨ä¾‹ã€‚Flink çš„ CEP åº“æä¾›äº† APIï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿä»¥ä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼æˆ–çŠ¶æ€æœºçš„æ–¹å¼æŒ‡å®šäº‹ä»¶æ¨¡å¼ã€‚CEP åº“ä¸ Flink çš„ DataStream API é›†æˆï¼Œä»¥ä¾¿åœ¨ DataStream ä¸Šè¯„ä¼°æ¨¡å¼ã€‚CEP åº“çš„åº”ç”¨åŒ…æ‹¬ç½‘ç»œå…¥ä¾µæ£€æµ‹ï¼Œä¸šåŠ¡æµç¨‹ç›‘æ§å’Œæ¬ºè¯ˆæ£€æµ‹ã€‚</li><li><strong><a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/batch/index.html" target="_blank" rel="noopener">DataSet API</a></strong>ï¼šDataSet API æ˜¯ Flink ç”¨äºæ‰¹å¤„ç†åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒ APIã€‚DataSet API æ‰€æä¾›çš„åŸºç¡€ç®—å­åŒ…æ‹¬<em>map</em>ã€<em>reduce</em>ã€<em>(outer) join</em>ã€<em>co-group</em>ã€<em>iterate</em>ç­‰ã€‚æ‰€æœ‰ç®—å­éƒ½æœ‰ç›¸åº”çš„ç®—æ³•å’Œæ•°æ®ç»“æ„æ”¯æŒï¼Œå¯¹å†…å­˜ä¸­çš„åºåˆ—åŒ–æ•°æ®è¿›è¡Œæ“ä½œã€‚å¦‚æœæ•°æ®å¤§å°è¶…è¿‡é¢„ç•™å†…å­˜ï¼Œåˆ™è¿‡é‡æ•°æ®å°†å­˜å‚¨åˆ°ç£ç›˜ã€‚Flink çš„ DataSet API çš„æ•°æ®å¤„ç†ç®—æ³•å€Ÿé‰´äº†ä¼ ç»Ÿæ•°æ®åº“ç®—æ³•çš„å®ç°ï¼Œä¾‹å¦‚æ··åˆæ•£åˆ—è¿æ¥ï¼ˆhybrid hash-joinï¼‰å’Œå¤–éƒ¨å½’å¹¶æ’åºï¼ˆexternal merge-sortï¼‰</li><li><strong><a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/libs/gelly/index.html" target="_blank" rel="noopener">Gelly</a></strong>: Gelly æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„å›¾å½¢å¤„ç†å’Œåˆ†æåº“ã€‚Gelly æ˜¯åœ¨ DataSet API ä¹‹ä¸Šå®ç°çš„ï¼Œå¹¶ä¸ DataSet API é›†æˆã€‚å› æ­¤ï¼Œå®ƒèƒ½å¤Ÿå—ç›Šäºå…¶å¯æ‰©å±•ä¸”å¥å£®çš„æ“ä½œç¬¦ã€‚Gelly æä¾›äº†<a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/libs/gelly/library_methods.html" target="_blank" rel="noopener">å†…ç½®ç®—æ³•</a>ï¼Œå¦‚ label propagationã€triangle enumeration å’Œ page rank ç®—æ³•ï¼Œä¹Ÿæä¾›äº†ä¸€ä¸ªç®€åŒ–è‡ªå®šä¹‰å›¾ç®—æ³•å®ç°çš„ <a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/libs/gelly/graph_api.html" target="_blank" rel="noopener">Graph API</a>ã€‚</li></ol></li></ul><h3 id="è¿ç»´"><a href="#è¿ç»´" class="headerlink" title="è¿ç»´"></a>è¿ç»´</h3><ul><li>Apache Flink éå¸¸æ³¨é‡æµæ•°æ®å¤„ç†çš„å¯è¿ç»´æ€§ã€‚å› æ­¤åœ¨è¿™ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç» Flink çš„æ•…éšœæ¢å¤æœºåˆ¶ï¼Œå¹¶ä»‹ç»å…¶ç®¡ç†å’Œç›‘æ§åº”ç”¨çš„åŠŸèƒ½</li></ul><h4 id="7-24å°æ—¶ç¨³å®šè¿è¡Œ"><a href="#7-24å°æ—¶ç¨³å®šè¿è¡Œ" class="headerlink" title="7*24å°æ—¶ç¨³å®šè¿è¡Œ"></a>7*24å°æ—¶ç¨³å®šè¿è¡Œ</h4><ol><li>å®ƒ(è¿™ç±»æµå¤„ç†å™¨)ä¸ä»…è¦èƒ½åœ¨æœåŠ¡å‡ºç°æ•…éšœæ—¶å€™èƒ½å¤Ÿé‡å¯æœåŠ¡ï¼Œè€Œä¸”è¿˜è¦å½“æ•…éšœå‘ç”Ÿæ—¶ï¼Œä¿è¯èƒ½å¤ŸæŒä¹…åŒ–æœåŠ¡å†…éƒ¨å„ä¸ªç»„ä»¶çš„å½“å‰çŠ¶æ€ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½ä¿è¯åœ¨æ•…éšœæ¢å¤æ—¶å€™ï¼ŒæœåŠ¡èƒ½å¤Ÿç»§ç»­æ­£å¸¸è¿è¡Œï¼Œå¥½åƒæ•…éšœå°±æ²¡æœ‰å‘ç”Ÿè¿‡ä¸€æ ·</li><li>Flinké€šè¿‡å‡ ä¸‹å¤šç§æœºåˆ¶ç»´æŠ¤åº”ç”¨å¯æŒç»­è¿è¡ŒåŠå…¶ä¸€è‡´æ€§<ol><li><strong>æ£€æŸ¥ç‚¹çš„ä¸€è‡´æ€§</strong>: Flinkçš„æ•…éšœæ¢å¤æœºåˆ¶æ˜¯é€šè¿‡å»ºç«‹åˆ†å¸ƒå¼åº”ç”¨æœåŠ¡çŠ¶æ€ä¸€è‡´æ€§æ£€æŸ¥ç‚¹å®ç°çš„ï¼Œå½“æœ‰æ•…éšœäº§ç”Ÿæ—¶ï¼Œåº”ç”¨æœåŠ¡ä¼šé‡å¯åï¼Œå†é‡æ–°åŠ è½½ä¸Šä¸€æ¬¡æˆåŠŸå¤‡ä»½çš„çŠ¶æ€æ£€æŸ¥ç‚¹ä¿¡æ¯ã€‚ç»“åˆå¯é‡æ”¾çš„æ•°æ®æºï¼Œè¯¥ç‰¹æ€§å¯ä¿è¯<em>ç²¾ç¡®ä¸€æ¬¡ï¼ˆexactly-onceï¼‰</em>çš„çŠ¶æ€ä¸€è‡´æ€§</li><li><strong>é«˜æ•ˆçš„æ£€æŸ¥ç‚¹</strong>: å¦‚æœä¸€ä¸ªåº”ç”¨è¦ç»´æŠ¤ä¸€ä¸ªTBçº§çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¯¹æ­¤åº”ç”¨çš„çŠ¶æ€å»ºç«‹æ£€æŸ¥ç‚¹æœåŠ¡çš„èµ„æºå¼€é”€æ˜¯å¾ˆé«˜çš„ï¼Œä¸ºäº†å‡å°å› æ£€æŸ¥ç‚¹æœåŠ¡å¯¹åº”ç”¨çš„å»¶è¿Ÿæ€§ï¼ˆSLAsæœåŠ¡ç­‰çº§åè®®ï¼‰çš„å½±å“ï¼ŒFlinké‡‡ç”¨==å¼‚æ­¥åŠå¢é‡==çš„æ–¹å¼æ„å»ºæ£€æŸ¥ç‚¹æœåŠ¡ã€‚</li><li><strong>ç«¯åˆ°ç«¯çš„ç²¾ç¡®ä¸€æ¬¡</strong>: Flink ä¸ºæŸäº›ç‰¹å®šçš„å­˜å‚¨æ”¯æŒäº†äº‹åŠ¡å‹è¾“å‡ºçš„åŠŸèƒ½ï¼ŒåŠæ—¶åœ¨å‘ç”Ÿæ•…éšœçš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½å¤Ÿä¿è¯ç²¾ç¡®ä¸€æ¬¡çš„è¾“å‡º</li><li><strong>é›†æˆå¤šç§é›†ç¾¤ç®¡ç†æœåŠ¡</strong>: Flinkå·²ä¸å¤šç§é›†ç¾¤ç®¡ç†æœåŠ¡ç´§å¯†é›†æˆï¼Œå¦‚ <a href="https://hadoop.apache.org/" target="_blank" rel="noopener">Hadoop YARN</a>, <a href="https://mesos.apache.org/" target="_blank" rel="noopener">Mesos</a>, ä»¥åŠ <a href="https://kubernetes.io/" target="_blank" rel="noopener">Kubernetes</a>ã€‚å½“é›†ç¾¤ä¸­æŸä¸ªæµç¨‹ä»»åŠ¡å¤±è´¥åï¼Œä¸€ä¸ªæ–°çš„æµç¨‹æœåŠ¡ä¼šè‡ªåŠ¨å¯åŠ¨å¹¶æ›¿ä»£å®ƒç»§ç»­æ‰§è¡Œ</li><li><strong>å†…ç½®é«˜å¯ç”¨æœåŠ¡</strong>: Flinkå†…ç½®äº†ä¸ºè§£å†³å•ç‚¹æ•…éšœé—®é¢˜çš„é«˜å¯ç”¨æ€§æœåŠ¡æ¨¡å—ï¼Œæ­¤æ¨¡å—æ˜¯åŸºäº<a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">Apache ZooKeeper</a> æŠ€æœ¯å®ç°çš„ï¼Œ<a href="https://zookeeper.apache.org/" target="_blank" rel="noopener">Apache ZooKeeper</a>æ˜¯ä¸€ç§å¯é çš„ã€äº¤äº’å¼çš„ã€åˆ†å¸ƒå¼åè°ƒæœåŠ¡ç»„ä»¶</li></ol></li></ol><h4 id="Flinkèƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°å‡çº§ã€è¿ç§»ã€æš‚åœã€æ¢å¤åº”ç”¨æœåŠ¡"><a href="#Flinkèƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°å‡çº§ã€è¿ç§»ã€æš‚åœã€æ¢å¤åº”ç”¨æœåŠ¡" class="headerlink" title="Flinkèƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°å‡çº§ã€è¿ç§»ã€æš‚åœã€æ¢å¤åº”ç”¨æœåŠ¡"></a>Flinkèƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°å‡çº§ã€è¿ç§»ã€æš‚åœã€æ¢å¤åº”ç”¨æœåŠ¡</h4><ol><li>é©±åŠ¨å…³é”®ä¸šåŠ¡æœåŠ¡çš„æµåº”ç”¨æ˜¯ç»å¸¸éœ€è¦ç»´æŠ¤çš„ã€‚æ¯”å¦‚éœ€è¦ä¿®å¤ç³»ç»Ÿæ¼æ´ï¼Œæ”¹è¿›åŠŸèƒ½ï¼Œæˆ–å¼€å‘æ–°åŠŸèƒ½</li><li>ç„¶è€Œå‡çº§ä¸€ä¸ªæœ‰çŠ¶æ€çš„æµåº”ç”¨å¹¶ä¸æ˜¯ç®€å•çš„äº‹æƒ…ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬ä¸ºäº†å‡çº§ä¸€ä¸ªæ”¹è¿›åç‰ˆæœ¬è€Œç®€å•åœæ­¢å½“å‰æµåº”ç”¨å¹¶é‡å¯æ—¶ï¼Œæˆ‘ä»¬è¿˜ä¸èƒ½ä¸¢å¤±æ‰å½“å‰æµåº”ç”¨çš„æ‰€å¤„äºçš„çŠ¶æ€ä¿¡æ¯</li><li>è€Œ==Flinkçš„ <em>Savepoint</em> æœåŠ¡==å°±æ˜¯ä¸ºè§£å†³å‡çº§æœåŠ¡è¿‡ç¨‹ä¸­è®°å½•æµåº”ç”¨çŠ¶æ€ä¿¡æ¯åŠå…¶ç›¸å…³éš¾é¢˜è€Œäº§ç”Ÿçš„ä¸€ç§å”¯ä¸€çš„ã€å¼ºå¤§çš„ç»„ä»¶</li><li>ä¸€ä¸ª Savepointï¼Œå°±æ˜¯ä¸€ä¸ªåº”ç”¨æœåŠ¡çŠ¶æ€çš„ä¸€è‡´æ€§å¿«ç…§ï¼Œå› æ­¤å…¶ä¸checkpointç»„ä»¶çš„å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ä¸checkpointç›¸æ¯”ï¼ŒSavepoint éœ€è¦æ‰‹åŠ¨è§¦å‘å¯åŠ¨ï¼Œè€Œä¸”å½“æµåº”ç”¨æœåŠ¡åœæ­¢æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚Savepoint å¸¸è¢«åº”ç”¨äºå¯åŠ¨ä¸€ä¸ªå·²å«æœ‰çŠ¶æ€çš„æµæœåŠ¡ï¼Œå¹¶åˆå§‹åŒ–å…¶ï¼ˆå¤‡ä»½æ—¶ï¼‰çŠ¶æ€ã€‚</li><li>Savepoint æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š<ol><li><strong>ä¾¿äºå‡çº§åº”ç”¨æœåŠ¡ç‰ˆæœ¬</strong>: Savepoint å¸¸åœ¨åº”ç”¨ç‰ˆæœ¬å‡çº§æ—¶ä½¿ç”¨ï¼Œå½“å‰åº”ç”¨çš„æ–°ç‰ˆæœ¬æ›´æ–°å‡çº§æ—¶ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸€ä¸ªç‰ˆæœ¬ç¨‹åºè®°å½•çš„ Savepoint å†…çš„æœåŠ¡çŠ¶æ€ä¿¡æ¯æ¥é‡å¯æœåŠ¡ã€‚å®ƒä¹Ÿå¯èƒ½ä¼šä½¿ç”¨æ›´æ—©çš„ Savepoint è¿˜åŸç‚¹æ¥é‡å¯æœåŠ¡ï¼Œä»¥ä¾¿äºä¿®å¤ç”±äºæœ‰ç¼ºé™·çš„ç¨‹åºç‰ˆæœ¬å¯¼è‡´çš„ä¸æ­£ç¡®çš„ç¨‹åºè¿è¡Œç»“æœ</li><li><strong>æ–¹ä¾¿é›†ç¾¤æœåŠ¡ç§»æ¤</strong>: é€šè¿‡ä½¿ç”¨ Savepointï¼ŒæµæœåŠ¡åº”ç”¨å¯ä»¥è‡ªç”±çš„åœ¨ä¸åŒé›†ç¾¤ä¸­è¿ç§»éƒ¨ç½²</li><li><strong>æ–¹ä¾¿Flinkç‰ˆæœ¬å‡çº§</strong>: é€šè¿‡ä½¿ç”¨ Savepointï¼Œå¯ä»¥ä½¿åº”ç”¨æœåŠ¡åœ¨å‡çº§Flinkæ—¶ï¼Œæ›´åŠ å®‰å…¨ä¾¿æ·</li><li><strong>å¢åŠ åº”ç”¨å¹¶è¡ŒæœåŠ¡çš„æ‰©å±•æ€§</strong>: Savepoint ä¹Ÿå¸¸åœ¨å¢åŠ æˆ–å‡å°‘åº”ç”¨æœåŠ¡é›†ç¾¤çš„å¹¶è¡Œåº¦æ—¶ä½¿ç”¨</li><li><strong>ä¾¿äºA/Bæµ‹è¯•åŠå‡è®¾åˆ†æåœºæ™¯å¯¹æ¯”ç»“æœ</strong>: é€šè¿‡æŠŠåŒä¸€åº”ç”¨åœ¨ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºï¼ŒåŸºäºåŒä¸€ä¸ª Savepoint è¿˜åŸç‚¹å¯åŠ¨æœåŠ¡æ—¶ï¼Œå¯ä»¥æµ‹è¯•å¯¹æ¯”2ä¸ªæˆ–å¤šä¸ªç‰ˆæœ¬ç¨‹åºçš„æ€§èƒ½åŠæœåŠ¡è´¨é‡</li><li><strong>æš‚åœå’Œæ¢å¤æœåŠ¡</strong>: ä¸€ä¸ªåº”ç”¨æœåŠ¡å¯ä»¥åœ¨æ–°å»ºä¸€ä¸ª Savepoint åå†åœæ­¢æœåŠ¡ï¼Œä»¥ä¾¿äºåé¢ä»»ä½•æ—¶é—´ç‚¹å†æ ¹æ®è¿™ä¸ªå®æ—¶åˆ·æ–°çš„ Savepoint è¿˜åŸç‚¹è¿›è¡Œæ¢å¤æœåŠ¡</li><li><strong>å½’æ¡£æœåŠ¡</strong>: Savepoint è¿˜æä¾›è¿˜åŸç‚¹çš„å½’æ¡£æœåŠ¡ï¼Œä»¥ä¾¿äºç”¨æˆ·èƒ½å¤ŸæŒ‡å®šæ—¶é—´ç‚¹çš„ Savepoint çš„æœåŠ¡æ•°æ®è¿›è¡Œé‡ç½®åº”ç”¨æœåŠ¡çš„çŠ¶æ€ï¼Œè¿›è¡Œæ¢å¤æœåŠ¡</li></ol></li></ol><h4 id="ç›‘æ§å’Œæ§åˆ¶åº”ç”¨æœåŠ¡"><a href="#ç›‘æ§å’Œæ§åˆ¶åº”ç”¨æœåŠ¡" class="headerlink" title="ç›‘æ§å’Œæ§åˆ¶åº”ç”¨æœåŠ¡"></a>ç›‘æ§å’Œæ§åˆ¶åº”ç”¨æœåŠ¡</h4><ol><li><p>å¦‚å…¶å®ƒåº”ç”¨æœåŠ¡ä¸€æ ·ï¼ŒæŒç»­è¿è¡Œçš„æµåº”ç”¨æœåŠ¡ä¹Ÿéœ€è¦ç›‘æ§åŠé›†æˆåˆ°ä¸€äº›åŸºç¡€è®¾æ–½èµ„æºç®¡ç†æœåŠ¡ä¸­ï¼Œä¾‹å¦‚ä¸€ä¸ªç»„ä»¶çš„ç›‘æ§æœåŠ¡åŠæ—¥å¿—æœåŠ¡ç­‰</p></li><li><p>ç›‘æ§æœåŠ¡æœ‰åŠ©äºé¢„æµ‹é—®é¢˜å¹¶æå‰åšå‡ºååº”ï¼Œæ—¥å¿—æœåŠ¡æä¾›æ—¥å¿—è®°å½•èƒ½å¤Ÿå¸®åŠ©è¿½è¸ªã€è°ƒæŸ¥ã€åˆ†ææ•…éšœå‘ç”Ÿçš„æ ¹æœ¬åŸå› </p></li><li><p>==ä¾¿æ·æ˜“ç”¨çš„è®¿é—®æ§åˆ¶åº”ç”¨æœåŠ¡è¿è¡Œçš„æ¥å£==ä¹Ÿæ˜¯Flinkçš„ä¸€ä¸ªé‡è¦çš„äº®ç‚¹ç‰¹å¾</p><ol><li><strong>Web UIæ–¹å¼</strong>: Flinkæä¾›äº†ä¸€ä¸ªweb UIæ¥è§‚å¯Ÿã€ç›‘è§†å’Œè°ƒè¯•æ­£åœ¨è¿è¡Œçš„åº”ç”¨æœåŠ¡ã€‚å¹¶ä¸”è¿˜å¯ä»¥æ‰§è¡Œæˆ–å–æ¶ˆç»„ä»¶æˆ–ä»»åŠ¡çš„æ‰§è¡Œã€‚</li><li><strong>æ—¥å¿—é›†æˆæœåŠ¡</strong>:Flinkå®ç°äº†æµè¡Œçš„slf4jæ—¥å¿—æ¥å£ï¼Œå¹¶ä¸æ—¥å¿—æ¡†æ¶<a href="https://logging.apache.org/log4j/2.x/" target="_blank" rel="noopener">log4j</a>æˆ–<a href="https://logback.qos.ch/" target="_blank" rel="noopener">logback</a>é›†æˆ</li><li><strong>æŒ‡æ ‡æœåŠ¡</strong>: Flinkæä¾›äº†ä¸€ä¸ªå¤æ‚çš„åº¦é‡ç³»ç»Ÿæ¥æ”¶é›†å’ŒæŠ¥å‘Šç³»ç»Ÿå’Œç”¨æˆ·å®šä¹‰çš„åº¦é‡æŒ‡æ ‡ä¿¡æ¯ã€‚åº¦é‡ä¿¡æ¯å¯ä»¥å¯¼å‡ºåˆ°å¤šä¸ªæŠ¥è¡¨ç»„ä»¶æœåŠ¡ï¼ŒåŒ…æ‹¬ <a href="https://en.wikipedia.org/wiki/Java_Management_Extensions" target="_blank" rel="noopener">JMX</a>, Ganglia, <a href="https://graphiteapp.org/" target="_blank" rel="noopener">Graphite</a>, <a href="https://prometheus.io/" target="_blank" rel="noopener">Prometheus</a>, <a href="https://github.com/etsy/statsd" target="_blank" rel="noopener">StatsD</a>, <a href="https://www.datadoghq.com/" target="_blank" rel="noopener">Datadog</a>, å’Œ <a href="https://www.slf4j.org/" target="_blank" rel="noopener">Slf4j</a>.</li><li><strong>æ ‡å‡†çš„WEB REST APIæ¥å£æœåŠ¡</strong>: Flinkæä¾›å¤šç§REST APIæ¥å£ï¼Œæœ‰æäº¤æ–°åº”ç”¨ç¨‹åºã€è·å–æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„SavepointæœåŠ¡ä¿¡æ¯ã€å–æ¶ˆåº”ç”¨æœåŠ¡ç­‰æ¥å£ã€‚REST APIè¿˜æä¾›å…ƒæ•°æ®ä¿¡æ¯å’Œå·²é‡‡é›†çš„è¿è¡Œä¸­æˆ–å®Œæˆåçš„åº”ç”¨æœåŠ¡çš„æŒ‡æ ‡ä¿¡æ¯ã€‚</li></ol></li></ol><h1 id="Flinkè¿›é˜¶"><a href="#Flinkè¿›é˜¶" class="headerlink" title="Flinkè¿›é˜¶"></a>Flinkè¿›é˜¶</h1><h2 id="Stateful-Functionsï¼šçŠ¶æ€å‡½æ•°"><a href="#Stateful-Functionsï¼šçŠ¶æ€å‡½æ•°" class="headerlink" title="Stateful Functionsï¼šçŠ¶æ€å‡½æ•°"></a><strong>Stateful Functionsï¼šçŠ¶æ€å‡½æ•°</strong></h2><h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ol><li><a href="https://flink.apache.org/zh/flink-architecture.html" target="_blank" rel="noopener">å®˜ç½‘</a></li><li><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.12/zh/try-flink/index.html" target="_blank" rel="noopener">å®˜ç½‘æ•™ç¨‹</a></li></ol><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èµ„æºæ•´åˆä¹‹å®ç”¨å·¥å…·</title>
      <link href="/2020/12/04/zi-yuan-zheng-he-zhi-shi-yong-gong-ju/"/>
      <url>/2020/12/04/zi-yuan-zheng-he-zhi-shi-yong-gong-ju/</url>
      
        <content type="html"><![CDATA[<p><img src="/2020/12/04/zi-yuan-zheng-he-zhi-shi-yong-gong-ju/image-20210621143931618.png" alt="image-20210621143931618"></p><h1 id="å·¥å…·æ±‡æ€»"><a href="#å·¥å…·æ±‡æ€»" class="headerlink" title="å·¥å…·æ±‡æ€»"></a>å·¥å…·æ±‡æ€»</h1><h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><ol><li><a href="https://www.python.org/downloads/" target="_blank" rel="noopener">python2</a></li><li><a href="https://www.python.org/downloads/" target="_blank" rel="noopener">python3</a></li><li><a href="https://www.jetbrains.com/pycharm/download/#section=windows" target="_blank" rel="noopener">pycharm</a></li><li><a href="https://www.jetbrains.com/help/pycharm/quick-start-guide.html" target="_blank" rel="noopener">pycharmé…ç½®</a></li></ol><h2 id="java"><a href="#java" class="headerlink" title="java"></a>java</h2><ol><li><a href="https://www.oracle.com/java/technologies/javase-downloads.html" target="_blank" rel="noopener">java</a></li><li><a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener">Intellij Idea</a></li><li><a href="https://www.jetbrains.com/help/idea/discover-intellij-idea.html" target="_blank" rel="noopener">Intellij Ideaé…ç½®</a></li><li><a href="https://maven.apache.org/" target="_blank" rel="noopener">maven</a></li></ol><h2 id="go"><a href="#go" class="headerlink" title="go"></a>go</h2><ol><li><a href="https://golang.org/" target="_blank" rel="noopener">go</a></li><li><a href="https://golang.org/doc/" target="_blank" rel="noopener">goæ•™ç¨‹</a></li></ol><h2 id="spark"><a href="#spark" class="headerlink" title="spark"></a>spark</h2><ol><li><a href="https://www.scala-lang.org/" target="_blank" rel="noopener">scala</a></li><li><a href="https://spark.apache.org/" target="_blank" rel="noopener">spark</a></li><li><a href="https://spark.apache.org/docs/latest/" target="_blank" rel="noopener">sparkæ•™ç¨‹</a></li></ol><h2 id="R"><a href="#R" class="headerlink" title="R"></a>R</h2><ol><li><a href="https://www.r-project.org/" target="_blank" rel="noopener">R</a></li><li><a href="https://rstudio.com/" target="_blank" rel="noopener">Rstudio</a></li></ol><h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><ol><li><a href="https://git-scm.com/" target="_blank" rel="noopener">git</a></li><li><a href="https://git-scm.com/docs" target="_blank" rel="noopener">gitæ•™ç¨‹</a></li></ol><h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><ol><li><a href="https://mobaxterm.mobatek.net/" target="_blank" rel="noopener">MobaXterm</a></li></ol><h2 id="æ–‡æœ¬ç¼–è¾‘ä¸æŸ¥çœ‹"><a href="#æ–‡æœ¬ç¼–è¾‘ä¸æŸ¥çœ‹" class="headerlink" title="æ–‡æœ¬ç¼–è¾‘ä¸æŸ¥çœ‹"></a>æ–‡æœ¬ç¼–è¾‘ä¸æŸ¥çœ‹</h2><ol><li><a href="https://typora.io/" target="_blank" rel="noopener">typora</a></li><li><a href="https://notepad-plus-plus.org/" target="_blank" rel="noopener">Nodepad++</a></li><li><a href="https://www.emeditor.com/" target="_blank" rel="noopener">emeditor</a></li><li><a href="https://www.gaaiho.cn/index.php/zh-cn/" target="_blank" rel="noopener">GaaihoReader</a></li></ol><h2 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a>æ€ç»´å¯¼å›¾</h2><ol><li><a href="https://www.xmind.net/" target="_blank" rel="noopener">xmind</a></li></ol><h2 id="çˆ¬è™«ç›¸å…³"><a href="#çˆ¬è™«ç›¸å…³" class="headerlink" title="çˆ¬è™«ç›¸å…³"></a>çˆ¬è™«ç›¸å…³</h2><ol><li><a href="https://www.postman.com/downloads/" target="_blank" rel="noopener">postman</a></li></ol><h2 id="google"><a href="#google" class="headerlink" title="google"></a>google</h2><ol><li><a href="https://www.google.com/intl/zh-CN/chrome/" target="_blank" rel="noopener">google</a></li></ol><h2 id="å¤‡ä»½"><a href="#å¤‡ä»½" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h2><ol><li><a href="http://pan.baidu.com/download" target="_blank" rel="noopener">ç™¾åº¦ç½‘ç›˜</a></li><li><a href="http://note.youdao.com/WAP/intro/" target="_blank" rel="noopener">æœ‰é“äº‘ç¬”è®°</a></li></ol><h2 id="é‚®ä»¶"><a href="#é‚®ä»¶" class="headerlink" title="é‚®ä»¶"></a>é‚®ä»¶</h2><ol><li><a href="http://mail.163.com/dashi/" target="_blank" rel="noopener">ç½‘æ˜“é‚®ç®±</a></li></ol><h2 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h2><ol><li><a href="https://cn.bandisoft.com/bandizip/" target="_blank" rel="noopener">bandzip</a></li></ol><h2 id="æˆªå›¾"><a href="#æˆªå›¾" class="headerlink" title="æˆªå›¾"></a>æˆªå›¾</h2><ol><li><a href="https://zh.snipaste.com/" target="_blank" rel="noopener">snipaste</a></li></ol><h2 id="æ–‡ä»¶æœç´¢å’Œç›®å½•ç›¸å…³"><a href="#æ–‡ä»¶æœç´¢å’Œç›®å½•ç›¸å…³" class="headerlink" title="æ–‡ä»¶æœç´¢å’Œç›®å½•ç›¸å…³"></a>æ–‡ä»¶æœç´¢å’Œç›®å½•ç›¸å…³</h2><ol><li><a href="https://www.voidtools.com/zh-cn/" target="_blank" rel="noopener">everything</a></li><li><a href="http://qttabbar.wikidot.com/" target="_blank" rel="noopener">qttabbar</a></li><li><a href="http://www.wox.one/" target="_blank" rel="noopener">Wox</a></li></ol><h2 id="ä¿æŠ¤çœ¼ç›"><a href="#ä¿æŠ¤çœ¼ç›" class="headerlink" title="ä¿æŠ¤çœ¼ç›"></a>ä¿æŠ¤çœ¼ç›</h2><ol><li><a href="https://justgetflux.com/" target="_blank" rel="noopener">f.lux</a></li></ol><h2 id="æ—¶é’Ÿå±ä¿"><a href="#æ—¶é’Ÿå±ä¿" class="headerlink" title="æ—¶é’Ÿå±ä¿"></a>æ—¶é’Ÿå±ä¿</h2><ol><li><a href="https://fliqlo.com/" target="_blank" rel="noopener">fliqo</a></li></ol><h2 id="èŠå¤©"><a href="#èŠå¤©" class="headerlink" title="èŠå¤©"></a>èŠå¤©</h2><ol><li><a href="https://weixin.qq.com/" target="_blank" rel="noopener">wechat</a></li></ol><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><ol><li><a href="https://www.xunlei.com/" target="_blank" rel="noopener">è¿…é›·</a></li></ol><h2 id="gooleæ‰©å±•ç¨‹åº"><a href="#gooleæ‰©å±•ç¨‹åº" class="headerlink" title="gooleæ‰©å±•ç¨‹åº"></a>gooleæ‰©å±•ç¨‹åº</h2><ol><li><a href="https://chrome.google.com/webstore/category/extensions?hl=zh-CN" target="_blank" rel="noopener">adblock</a></li><li><a href="https://chrome.google.com/webstore/category/extensions?hl=zh-CN" target="_blank" rel="noopener">dark reader</a></li><li><a href="https://chrome.google.com/webstore/category/extensions?hl=zh-CN" target="_blank" rel="noopener">onetab</a></li><li><a href="https://chrome.google.com/webstore/category/extensions?hl=zh-CN" target="_blank" rel="noopener">æ²™æ‹‰æŸ¥è¯</a></li><li><a href="https://chrome.google.com/webstore/category/extensions?hl=zh-CN" target="_blank" rel="noopener">octotree</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> èµ„æºæ•´åˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®ç”¨å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹HBase</title>
      <link href="/2020/06/11/shi-yong-gong-ju-zhi-hbase/"/>
      <url>/2020/06/11/shi-yong-gong-ju-zhi-hbase/</url>
      
        <content type="html"><![CDATA[<p><img src="/2020/06/11/shi-yong-gong-ju-zhi-hbase/image-20210621152645053.png" alt="image-20210621152645053"></p><h1 id="HBaseåŸºç¡€"><a href="#HBaseåŸºç¡€" class="headerlink" title="HBaseåŸºç¡€"></a>HBaseåŸºç¡€</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseæ˜¯ä¸€ä¸ªå¼€æºçš„éå…³ç³»å‹åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆNoSQLï¼‰ï¼Œå®ƒå‚è€ƒäº†è°·æ­Œçš„BigTableå»ºæ¨¡ï¼Œå®ç°çš„ç¼–ç¨‹è¯­è¨€ä¸º Javaã€‚å®ƒæ˜¯Apacheè½¯ä»¶åŸºé‡‘ä¼šçš„Hadoopé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œè¿è¡ŒäºHDFSæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼Œä¸º Hadoop æä¾›ç±»ä¼¼äºBigTable è§„æ¨¡çš„æœåŠ¡ã€‚å› æ­¤ï¼Œå®ƒå¯ä»¥å¯¹ç¨€ç–æ–‡ä»¶æä¾›æé«˜çš„å®¹é”™ç‡ã€‚    HBaseæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€é¢å‘åˆ—çš„å¼€æºæ•°æ®åº“ï¼Œè¯¥æŠ€æœ¯æ¥æºäº Fay Chang æ‰€æ’°å†™çš„Googleè®ºæ–‡â€œBigtableï¼šä¸€ä¸ªç»“æ„åŒ–æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿâ€ã€‚å°±åƒBigtableåˆ©ç”¨äº†Googleæ–‡ä»¶ç³»ç»Ÿï¼ˆFile Systemï¼‰æ‰€æä¾›çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ä¸€æ ·ï¼ŒHBaseåœ¨Hadoopä¹‹ä¸Šæä¾›äº†ç±»ä¼¼äºBigtableçš„èƒ½åŠ›ã€‚HBaseæ˜¯Apacheçš„Hadoopé¡¹ç›®çš„å­é¡¹ç›®ã€‚HBaseä¸åŒäºä¸€èˆ¬çš„å…³ç³»æ•°æ®åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€‚åˆäºéç»“æ„åŒ–æ•°æ®å­˜å‚¨çš„æ•°æ®åº“ã€‚å¦ä¸€ä¸ªä¸åŒçš„æ˜¯HBaseåŸºäºåˆ—ç°‡çš„è€Œä¸æ˜¯åŸºäºè¡Œçš„æ¨¡å¼ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="ä½“ç³»ç»“æ„"><a href="#ä½“ç³»ç»“æ„" class="headerlink" title="ä½“ç³»ç»“æ„"></a>ä½“ç³»ç»“æ„</h2><p><img src="/2020/06/11/shi-yong-gong-ju-zhi-hbase/image-20201218163039823.png" alt="image-20201218163039823"></p><ul><li><p>å®¢æˆ·ç«¯</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseå®¢æˆ·ç«¯ï¼ˆClientï¼‰æä¾›äº†Shellå‘½ä»¤è¡Œæ¥å£ã€åŸç”ŸJava APIç¼–ç¨‹æ¥å£ã€Thrift/REST APIç¼–ç¨‹æ¥å£ä»¥åŠMapReduceç¼–ç¨‹æ¥å£ã€‚æ”¯æŒæ‰€æœ‰å¸¸è§çš„DMLæ“ä½œä»¥åŠDDLæ“ä½œï¼ŒåŒ…æ‹¬è¡¨çš„åˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹ï¼Œä»¥åŠæ•°æ®çš„æ’å…¥ã€åˆ é™¤ã€æ›´æ–°ã€è¯»å–ç­‰ã€‚å…¶ä¸­Thrift/REST APIä¸»è¦ç”¨äºæ”¯æŒéJavaçš„ä¸Šå±‚ä¸šåŠ¡éœ€æ±‚ï¼ŒMapReduceæ¥å£åˆ™ä¸»è¦ç”¨äºæ‰¹é‡æ•°æ®å¯¼å…¥ä»¥åŠæ‰¹é‡æ•°æ®è¯»å–ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>Master</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    è´Ÿè´£å¤„ç†ç”¨æˆ·çš„å„ç§ç®¡ç†è¯·æ±‚ï¼ŒåŒ…æ‹¬å»ºè¡¨æ“ä½œã€ä¿®æ”¹è¡¨æ“ä½œã€æƒé™æ“ä½œã€åˆ‡åˆ†è¡¨æ“ä½œã€åˆå¹¶æ•°æ®åˆ†ç‰‡æ“ä½œä»¥åŠCompactionæ“ä½œï¼›ç®¡ç†é›†ç¾¤ä¸­æ‰€æœ‰RegionServerï¼ŒåŒ…æ‹¬RegionServerä¸­Regionçš„è´Ÿè½½å‡è¡¡ã€RegionServerçš„å®•æœºæ¢å¤ä»¥åŠRegionçš„è¿ç§»ï¼›è´Ÿè´£è¿‡æœŸæ—¥å¿—ä»¥åŠæ–‡ä»¶çš„æ¸…ç†å·¥ä½œï¼ŒMasterä¼šæ¯éš”ä¸€æ®µæ—¶é—´æ£€æŸ¥HDFSä¸­HLogæ˜¯å¦è¿‡æœŸã€HFileæ˜¯å¦å·²ç»è¢«åˆ é™¤ï¼Œå¹¶åœ¨è¿‡æœŸä¹‹åä¼šå°†å…¶åˆ é™¤ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>RegionServer</p><ul><li><p>WAL(HLog)</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HLogåœ¨HBaseä¸­æœ‰ä¸¤ä¸ªæ ¸å¿ƒä½œç”¨ï¼Œå…¶ä¸€ç”¨äºå®ç°æ•°æ®é«˜å¯é ï¼ŒHBaseæ•°æ®éšæœºå†™å…¥å¹¶ä¸æ˜¯ç›´æ¥å†™å…¥æ–‡ä»¶ï¼Œè€Œæ˜¯å…ˆå†™å…¥ç¼“å­˜ï¼Œå†å¼‚æ­¥åˆ·æ–°è½ç›˜ã€‚ä¸ºäº†é˜²æ­¢ç¼“å­˜æ•°æ®ä¸¢å¤±ï¼Œæ•°æ®å†™å…¥ç¼“å­˜ä¹‹å‰éœ€è¦é¦–å…ˆé¡ºåºå†™å…¥HLogï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå³ä½¿ç¼“å­˜æ•°æ®ä¸¢å¤±ï¼Œä»ç„¶å¯ä»¥é€šè¿‡HLogæ—¥å¿—æ¢å¤ã€‚å…¶äºŒç”¨äºå®ç°HBaseé›†ç¾¤é—´ä¸»ä»å¤åˆ¶ï¼Œä»é›†ç¾¤é€šè¿‡å›æ”¾ä¸»é›†ç¾¤æ¨é€è¿‡æ¥çš„HLogæ—¥å¿—å®ç°ä¸»ä»å¤åˆ¶ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>BlockCache</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseç³»ç»Ÿä¸­çš„è¯»ç¼“å­˜ï¼Œå®¢æˆ·ç«¯ä»ç£ç›˜è¯»å–æ•°æ®ä¹‹åé€šå¸¸ä¼šå°†æ•°æ®ç¼“å­˜åˆ°ç³»ç»Ÿå†…å­˜ä¸­ï¼Œåç»­è®¿é—®åŒä¸€è¡Œæ•°æ®å¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è·å–è€Œä¸éœ€è¦è®¿é—®ç£ç›˜ã€‚å¯¹äºå¸¦æœ‰å¤§é‡çƒ­ç‚¹è¯»çš„ä¸šåŠ¡è¯·æ±‚æ¥è¯´ï¼Œç¼“å­˜æœºåˆ¶ä¼šå¸¦æ¥æå¤§çš„æ€§èƒ½æå‡ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>Region</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    æ•°æ®è¡¨çš„ä¸€ä¸ªåˆ†ç‰‡ï¼Œå½“æ•°æ®è¡¨å¤§å°è¶…è¿‡ä¸€å®šé˜ˆå€¼å°±ä¼šâ€œæ°´å¹³åˆ‡åˆ†â€ï¼Œåˆ†è£‚ä¸ºä¸¤ä¸ªRegionã€‚Regionæ˜¯é›†ç¾¤è´Ÿè½½å‡è¡¡çš„åŸºæœ¬å•ä½ã€‚é€šå¸¸ä¸€å¼ è¡¨çš„Regionä¼šåˆ†å¸ƒåœ¨æ•´ä¸ªé›†ç¾¤çš„å¤šå°RegionServerä¸Šï¼Œä¸€ä¸ªRegionServerä¸Šä¼šç®¡ç†å¤šä¸ªRegionï¼Œå½“ç„¶ï¼Œè¿™äº›Regionä¸€èˆ¬æ¥è‡ªä¸åŒçš„æ•°æ®è¡¨<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p>HDFS</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseåº•å±‚ä¾èµ–äºHDFSç»„ä»¶å­˜å‚¨å®é™…æ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ•°æ®æ–‡ä»¶ã€HLogæ—¥å¿—æ–‡ä»¶ç­‰ç­‰æœ€ç»ˆéƒ½ä¼šå†™å…¥HDFSè½ç›˜ã€‚HDFSæ˜¯Hadoopç”Ÿæ€åœˆå†…æœ€æˆç†Ÿçš„ç»„ä»¶ä¹‹ä¸€ï¼Œæ•°æ®é»˜è®¤ä¸‰å‰¯æœ¬å­˜å‚¨ç­–ç•¥å¯ä»¥æœ‰æ•ˆä¿è¯æ•°æ®çš„é«˜å¯é æ€§ã€‚HBaseå†…éƒ¨å°è£…äº†ä¸€ä¸ªç§°ä¸ºDFSClientçš„HDFSå®¢æˆ·ç«¯ç»„ä»¶è´Ÿè´£å¯¹HDFSçš„å®é™…æ•°æ®è¿›è¡Œè¯»å†™è®¿é—®ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h2 id="é€»è¾‘è§†å›¾"><a href="#é€»è¾‘è§†å›¾" class="headerlink" title="é€»è¾‘è§†å›¾"></a>é€»è¾‘è§†å›¾</h2><p><img src="/2020/06/11/shi-yong-gong-ju-zhi-hbase/image-20201218164935058.png" alt="image-20201218164935058"></p><ul><li><p>table</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    è¡¨ï¼Œä¸€ä¸ªè¡¨åŒ…å«å¤šè¡Œæ•°æ®ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>row</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    è¡Œï¼Œä¸€è¡Œæ•°æ®åŒ…å«ä¸€ä¸ªå”¯ä¸€æ ‡è¯†rowkeyã€å¤šä¸ªcolumnä»¥åŠå¯¹åº”çš„å€¼ã€‚åœ¨HBaseä¸­ï¼Œä¸€å¼ è¡¨ä¸­æ‰€æœ‰rowéƒ½æŒ‰ç…§rowkeyçš„å­—å…¸åºç”±å°åˆ°å¤§æ’åºã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>column</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    åˆ—ï¼Œä¸å…³ç³»å‹æ•°æ®åº“ä¸­çš„åˆ—ä¸åŒï¼ŒHBaseä¸­çš„columnç”±column familyï¼ˆåˆ—ç°‡ï¼‰ä»¥åŠqualifierï¼ˆåˆ—åï¼‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸¤è€…ä¸­é—´ä½¿ç”¨"ï¼š"ç›¸è¿ï¼Œæ¯”å¦‚contentsï¼šhtmlï¼Œå…¶ä¸­contentsä¸ºåˆ—ç°‡ï¼Œhtmlä¸ºåˆ—ç°‡ä¸‹å…·ä½“ä¸€åˆ—ã€‚column familyåœ¨è¡¨åˆ›å»ºçš„æ—¶å€™éœ€è¦æŒ‡å®šï¼Œç”¨æˆ·ä¸èƒ½éšæ„å¢å‡ã€‚ä¸€ä¸ªcolumn familyä¸‹å¯ä»¥è®¾ç½®ä»»æ„å¤šä¸ªqualifierï¼Œå› æ­¤å¯ä»¥ç†è§£ä¸ºHBaseä¸­çš„åˆ—å¯ä»¥åŠ¨æ€å¢åŠ ï¼Œç†è®ºä¸Šç”šè‡³å¯ä»¥æ‰©å±•åˆ°ä¸Šç™¾ä¸‡åˆ—ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>cell</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    å•å…ƒæ ¼ï¼Œç”±5å…ƒç»„ï¼ˆrowï¼Œcolumnï¼Œtimestampï¼Œtypeï¼Œvalueï¼‰ç»„æˆçš„ç»“æ„ï¼Œå…¶ä¸­typeè¡¨ç¤ºPut/Deleteè¿™æ ·çš„æ“ä½œç±»å‹ï¼Œtimestampä»£è¡¨è¿™ä¸ªcellçš„ç‰ˆæœ¬ã€‚è¿™ä¸ªç»“æ„åœ¨æ•°æ®åº“ä¸­å®é™…æ˜¯ä»¥KVç»“æ„å­˜å‚¨çš„ï¼Œå…¶ä¸­ï¼ˆrowï¼Œcolumnï¼Œtimestampï¼Œtypeï¼‰æ˜¯Kï¼Œvalueå­—æ®µå¯¹åº”KVçš„Vã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>timestamp</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    æ—¶é—´æˆ³ï¼Œæ¯ä¸ªcellåœ¨å†™å…¥HBaseçš„æ—¶å€™éƒ½ä¼šé»˜è®¤åˆ†é…ä¸€ä¸ªæ—¶é—´æˆ³ä½œä¸ºè¯¥cellçš„ç‰ˆæœ¬ï¼Œå½“ç„¶ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨å†™å…¥çš„æ—¶å€™è‡ªå¸¦æ—¶é—´æˆ³ã€‚HBaseæ”¯æŒå¤šç‰ˆæœ¬ç‰¹æ€§ï¼Œå³åŒä¸€rowkeyã€columnä¸‹å¯ä»¥æœ‰å¤šä¸ªvalueå­˜åœ¨ï¼Œè¿™äº›valueä½¿ç”¨timestampä½œä¸ºç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬è¶Šå¤§ï¼Œè¡¨ç¤ºæ•°æ®è¶Šæ–°ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li><p>å®¹é‡å·¨å¤§</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseçš„å•è¡¨å¯ä»¥æ”¯æŒåƒäº¿è¡Œã€ç™¾ä¸‡åˆ—çš„æ•°æ®è§„æ¨¡ï¼Œæ•°æ®å®¹é‡å¯ä»¥è¾¾åˆ°TBç”šè‡³PBçº§åˆ«ã€‚ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼Œå¦‚Oracleå’ŒMySQLç­‰ï¼Œå¦‚æœå•è¡¨è®°å½•æ¡æ•°è¶…è¿‡äº¿è¡Œï¼Œè¯»å†™æ€§èƒ½éƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œåœ¨HBaseä¸­å¹¶ä¸ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>è‰¯å¥½çš„å¯æ‰©å±•æ€§</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseé›†ç¾¤å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®ç°é›†ç¾¤å®¹é‡æ‰©å±•ï¼Œä¸»è¦åŒ…æ‹¬æ•°æ®å­˜å‚¨èŠ‚ç‚¹æ‰©å±•ä»¥åŠè¯»å†™æœåŠ¡èŠ‚ç‚¹æ‰©å±•ã€‚HBaseåº•å±‚æ•°æ®å­˜å‚¨ä¾èµ–äºHDFSç³»ç»Ÿï¼ŒHDFSå¯ä»¥é€šè¿‡ç®€å•åœ°å¢åŠ DataNodeå®ç°æ‰©å±•ï¼ŒHBaseè¯»å†™æœåŠ¡èŠ‚ç‚¹ä¹Ÿä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„å¢åŠ RegionServerèŠ‚ç‚¹å®ç°è®¡ç®—å±‚çš„æ‰©å±•ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ç¨€ç–æ€§</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseæ”¯æŒå¤§é‡ç¨€ç–å­˜å‚¨ï¼Œå³å…è®¸å¤§é‡åˆ—å€¼ä¸ºç©ºï¼Œå¹¶ä¸å ç”¨ä»»ä½•å­˜å‚¨ç©ºé—´ã€‚è¿™ä¸ä¼ ç»Ÿæ•°æ®åº“ä¸åŒï¼Œä¼ ç»Ÿæ•°æ®åº“å¯¹äºç©ºå€¼çš„å¤„ç†æ˜¯å ç”¨ä¸€å®šå­˜å‚¨ç©ºé—´çš„ï¼Œè¿™ä¼šé€ æˆä¸€å®šç¨‹åº¦çš„å­˜å‚¨ç©ºé—´æµªè´¹ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨HBaseå­˜å‚¨å¤šè‡³ä¸Šç™¾ä¸‡åˆ—çš„æ•°æ®ï¼Œå³ä½¿è¡¨ä¸­å­˜åœ¨å¤§é‡çš„ç©ºå€¼ï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•é¢å¤–ç©ºé—´ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>é«˜æ€§èƒ½</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseç›®å‰ä¸»è¦æ“…é•¿äºOLTPåœºæ™¯ï¼Œæ•°æ®å†™æ“ä½œæ€§èƒ½å¼ºåŠ²ï¼Œå¯¹äºéšæœºå•ç‚¹è¯»ä»¥åŠå°èŒƒå›´çš„æ‰«æè¯»æ€§èƒ½ä¹Ÿèƒ½å¤Ÿå¾—åˆ°ä¿è¯ã€‚å¯¹äºå¤§èŒƒå›´çš„æ‰«æè¯»å¯ä»¥ä½¿ç”¨MapReduceæä¾›çš„APIå®ç°æ›´é«˜æ•ˆçš„å¹¶è¡Œæ‰«æã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å¤šç‰ˆæœ¬</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseæ”¯æŒå¤šç‰ˆæœ¬ç‰¹æ€§ï¼Œä¸€ä¸ªKVå¯ä»¥åŒæ—¶ä¿ç•™å¤šä¸ªç‰ˆæœ¬ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æœ€æ–°ç‰ˆæœ¬æˆ–è€…æŸä¸ªå†å²ç‰ˆæœ¬ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ”¯æŒè¿‡æœŸ</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseæ”¯æŒTTLè¿‡æœŸç‰¹æ€§ï¼Œç”¨æˆ·åªéœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¶…è¿‡TTLçš„æ•°æ®å°±ä¼šè‡ªåŠ¨è¢«æ¸…ç†ï¼Œä¸éœ€è¦ç”¨æˆ·å†™ç¨‹åºæ‰‹åŠ¨åˆ é™¤ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>HadoopåŸç”Ÿæ”¯æŒ</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    HBaseæ˜¯Hadoopç”Ÿæ€ä¸­çš„æ ¸å¿ƒæˆå‘˜ä¹‹ä¸€ï¼Œå¾ˆå¤šç”Ÿæ€ç»„ä»¶éƒ½å¯ä»¥ä¸å…¶ç›´æ¥å¯¹æ¥ã€‚HBaseæ•°æ®å­˜å‚¨ä¾èµ–äºHDFSï¼Œè¿™æ ·çš„æ¶æ„å¯ä»¥å¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œæ¯”å¦‚ç”¨æˆ·å¯ä»¥ç›´æ¥ç»•è¿‡HBaseç³»ç»Ÿæ“ä½œHDFSæ–‡ä»¶ï¼Œé«˜æ•ˆåœ°å®Œæˆæ•°æ®æ‰«ææˆ–è€…æ•°æ®å¯¼å…¥å·¥ä½œï¼›å†æ¯”å¦‚å¯ä»¥åˆ©ç”¨HDFSæä¾›çš„å¤šçº§å­˜å‚¨ç‰¹æ€§ï¼ˆArchival Storage Featureï¼‰å°†HBaseæ ¹æ®ä¸šåŠ¡çš„é‡è¦ç¨‹åº¦è¿›è¡Œåˆ†çº§å­˜å‚¨ï¼Œå°†é‡è¦çš„ä¸šåŠ¡æ”¾åˆ°SSDï¼Œå°†ä¸é‡è¦çš„ä¸šåŠ¡æ”¾åˆ°HDDã€‚æˆ–è€…ç”¨æˆ·å¯ä»¥è®¾ç½®å½’æ¡£æ—¶é—´ï¼Œè¿›è€Œå°†æœ€è¿‘çš„æ•°æ®æ”¾åœ¨SSDï¼Œå°†å½’æ¡£æ•°æ®æ–‡ä»¶æ”¾åœ¨HDDã€‚å¦å¤–ï¼ŒHBaseå¯¹MapReduceçš„æ”¯æŒä¹Ÿå·²ç»æœ‰äº†å¾ˆå¤šæ¡ˆä¾‹ï¼Œåç»­è¿˜ä¼šé’ˆå¯¹sparkåšæ›´å¤šçš„å·¥ä½œã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ul><li><p>HBaseæœ¬èº«ä¸æ”¯æŒå¾ˆå¤æ‚çš„èšåˆè¿ç®—ï¼ˆJoinã€GroupByç­‰ï¼‰</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    å¦‚æœä¸šåŠ¡ä¸­éœ€è¦ä½¿ç”¨åˆ°èšåˆè¿ç®—ï¼Œå¯ä»¥åœ¨HBaseä¹‹ä¸Šæ¶è®¾Phoenixç»„ä»¶æˆ–è€…Sparkç»„ä»¶ï¼Œå‰è€…ä¸»è¦åº”ç”¨äºå°è§„æ¨¡èšåˆçš„OLTPåœºæ™¯ï¼Œåè€…åº”ç”¨äºå¤§è§„æ¨¡èšåˆçš„OLAPåœºæ™¯ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>HBaseæœ¬èº«å¹¶æ²¡æœ‰å®ç°äºŒçº§ç´¢å¼•åŠŸèƒ½</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    æ‰€ä»¥ä¸æ”¯æŒäºŒçº§ç´¢å¼•æŸ¥æ‰¾ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>HBaseåŸç”Ÿä¸æ”¯æŒå…¨å±€è·¨è¡Œäº‹åŠ¡</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    åªæ”¯æŒå•è¡Œäº‹åŠ¡æ¨¡å‹ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li>å†™å¯†é›†å‹åº”ç”¨ï¼Œæ¯å¤©å†™å…¥é‡å·¨å¤§ï¼Œè€Œç›¸å¯¹è¯»æ•°é‡è¾ƒå°çš„åº”ç”¨ï¼Œæ¯”å¦‚IMçš„å†å²æ¶ˆæ¯ï¼Œæ¸¸æˆçš„æ—¥å¿—ç­‰ç­‰</li><li>é«˜å¹¶å‘ key-value å­˜å‚¨çš„åœºæ™¯ï¼›ä¾‹å¦‚ HBase å¯ä»¥ä½œä¸ºå®æ—¶è®¡ç®—( Storm )ç­‰çš„ä¸­é—´è¡¨å’Œç»“æœè¡¨ï¼Œå­˜å‚¨è®¡ç®—ç»“æœ</li><li>ä¸éœ€è¦å¤æ‚æŸ¥è¯¢æ¡ä»¶æ¥æŸ¥è¯¢æ•°æ®çš„åº”ç”¨ï¼šHBaseåªæ”¯æŒåŸºäºrowkeyçš„æŸ¥è¯¢ï¼Œå¯¹äºHBaseæ¥è¯´ï¼Œå•æ¡è®°å½•æˆ–è€…å°èŒƒå›´çš„æŸ¥è¯¢æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå¤§èŒƒå›´çš„æŸ¥è¯¢ç”±äºåˆ†å¸ƒå¼çš„åŸå› ï¼Œå¯èƒ½åœ¨æ€§èƒ½ä¸Šæœ‰ç‚¹å½±å“ï¼Œè€Œå¯¹äºåƒSQLçš„joinç­‰æŸ¥è¯¢ï¼ŒHBaseæ— æ³•æ”¯æŒã€‚</li><li>æ•°æ®ç»“æ„æ¯”è¾ƒç®€å•ï¼Œè¡¨ç»“æ„çš„åˆ—æ—ç»å¸¸éœ€è¦è°ƒæ•´çš„åœºæ™¯</li></ul><h1 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h1><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><ul><li>single-node</li><li>standalone</li></ul><h2 id="2-æ“ä½œ"><a href="#2-æ“ä½œ" class="headerlink" title="2. æ“ä½œ"></a>2. æ“ä½œ</h2><h3 id="2-1-å¯åŠ¨"><a href="#2-1-å¯åŠ¨" class="headerlink" title="2.1 å¯åŠ¨"></a>2.1 å¯åŠ¨</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">$ ./bin/hbase shellhbase(main):001:0><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-2-å»ºè¡¨"><a href="#2-2-å»ºè¡¨" class="headerlink" title="2.2 å»ºè¡¨"></a>2.2 å»ºè¡¨</h3><ul><li>å¿…é¡»æŒ‡å®šè¡¨å<code>test</code>å’Œåˆ—å<code>cf</code></li></ul><pre class="line-numbers language-lang-hbase"><code class="language-lang-hbase">hbase(main):001:0> create 'test', 'cf'0 row(s) in 0.4170 seconds=> Hbase::Table - test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3-åˆ—å‡ºè¡¨ä¿¡æ¯"><a href="#2-3-åˆ—å‡ºè¡¨ä¿¡æ¯" class="headerlink" title="2.3 åˆ—å‡ºè¡¨ä¿¡æ¯"></a>2.3 åˆ—å‡ºè¡¨ä¿¡æ¯</h3><pre class="line-numbers language-lang-hbase"><code class="language-lang-hbase">hbase(main):002:0> list 'test'TABLEtest1 row(s) in 0.0180 seconds=> ["test"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-hbase"><code class="language-lang-hbase">hbase(main):003:0> describe 'test'Table test is ENABLEDtestCOLUMN FAMILIES DESCRIPTION{NAME => 'cf', VERSIONS => '1', EVICT_BLOCKS_ON_CLOSE => 'false', NEW_VERSION_BEHAVIOR => 'false', KEEP_DELETED_CELLS => 'FALSE', CACHE_DATA_ON_WRITE => 'false', DATA_BLOCK_ENCODING => 'NONE', TTL => 'FOREVER', MIN_VERSIONS => '0', REPLICATION_SCOPE => '0', BLOOMFILTER => 'ROW', CACHE_INDEX_ON_WRITE => 'false', IN_MEMORY => 'false', CACHE_BLOOMS_ON_WRITE => 'false', PREFETCH_BLOCKS_ON_OPEN => 'false', COMPRESSION => 'NONE', BLOCKCACHE => 'true', BLOCKSIZE => '65536'}1 row(s)Took 0.9998 seconds<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¹‹FTRLæ–¹æ³•</title>
      <link href="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/"/>
      <url>/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸç†ä»‹ç»"><a href="#åŸç†ä»‹ç»" class="headerlink" title="åŸç†ä»‹ç»"></a>åŸç†ä»‹ç»</h1><h2 id="Title"><a href="#Title" class="headerlink" title="Title"></a>Title</h2><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    Follow-the-Regularized-Leader and Mirror Descent: Equivalence Theorems and L1 Regularization<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>ã€åŸæ–‡ã€‘</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    We prove that many mirror descent algorithms for online convex optimization (such as online gradient descent) have an equivalent interpretation as follow-the-regularizedleader (FTRL) algorithms. This observation makes the relationships between many commonly used algorithms explicit, and provides theoretical insight on previous experimental observations. In particular, even though the FOBOS composite mirror descent algorithm handles L1 regularization explicitly, it has been observed that the FTRL-style Regularized Dual Averaging (RDA) algorithm is even more e ective at producing sparsity. Our results demonstrate that the key di erence between these algorithms is how they handle the cumulative L1 penalty. While FOBOS handles the L1 term exactly on any given update, we show that it is e ectively using subgradient approximations to the L1 penalty from previous rounds, leading to less sparsity than RDA, which handles the cumulative penalty in closed form. The FTRL-Proximal algorithm, which we introduce, can be seen as a hybrid of these two algorithms, and signi cantly outperforms both on a large, realworld dataset.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ã€è¯‘æ–‡ã€‘</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    æˆ‘ä»¬è¯æ˜äº†è®¸å¤šç”¨äºåœ¨çº¿å‡¸ä¼˜åŒ–çš„é•œåƒä¸‹é™ç®—æ³•ï¼ˆä¾‹å¦‚åœ¨çº¿æ¢¯åº¦ä¸‹é™ï¼‰å…·æœ‰ä¸follow-the-regularizedleader (FTRL)ç®—æ³•ç­‰æ•ˆçš„è§£é‡Šã€‚è¯¥è§‚å¯Ÿä½¿è®¸å¤šå¸¸ç”¨ç®—æ³•ä¹‹é—´çš„å…³ç³»å˜å¾—æ˜ç¡®ï¼Œå¹¶æä¾›äº†å¯¹å…ˆå‰å®éªŒè§‚å¯Ÿçš„ç†è®ºè§è§£ã€‚å°¤å…¶æ˜¯ï¼Œå³ä½¿FOBOSå¤åˆé•œåƒä¸‹é™ç®—æ³•å¯ä»¥æ˜ç¡®å¤„ç†L1æ­£åˆ™åŒ–ï¼Œä¹Ÿå·²ç»è§‚å¯Ÿåˆ°FTRLæ ·å¼çš„æ­£åˆ™å¹³å‡åŒ–ï¼ˆRDAï¼‰ç®—æ³•åœ¨äº§ç”Ÿç¨€ç–æ€§æ–¹é¢æ›´ä¸ºæœ‰æ•ˆã€‚æˆ‘ä»¬çš„ç»“æœè¡¨æ˜ï¼Œè¿™äº›ç®—æ³•ä¹‹é—´çš„å…³é”®åŒºåˆ«åœ¨äºå®ƒä»¬å¦‚ä½•å¤„ç†ç´¯ç§¯çš„L1æŸå¤±ã€‚å°½ç®¡FOBOSå¯ä»¥åœ¨ä»»ä½•ç»™å®šçš„æ›´æ–°ä¸­ç²¾ç¡®åœ°å¤„ç†L1é¡¹ï¼Œä½†æˆ‘ä»¬è¯æ˜å®ƒæœ‰æ•ˆåœ°ä½¿ç”¨äº†å‰å‡ è½®å¯¹L1ç½šåˆ†çš„æ¬¡æ¢¯åº¦è¿‘ä¼¼ï¼Œå¯¼è‡´ç¨€ç–æ€§ä½äºRDAï¼Œåè€…ä»¥å°é—­å½¢å¼å¤„ç†ç´¯ç§¯ç½šåˆ†ã€‚æˆ‘ä»¬ä»‹ç»çš„FTRL-Proximalç®—æ³•å¯ä»¥çœ‹ä½œæ˜¯è¿™ä¸¤ç§ç®—æ³•çš„æ··åˆä½“ï¼Œåœ¨å¤§å‹çš„çœŸå®æ•°æ®é›†ä¸Šå‡è¿œèƒœè¿‡ä¸¤è€…ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h2><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605145145754.png" alt="image-20200605145145754"></p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605145210366.png" alt="image-20200605145210366"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    æˆ‘ä»¬è€ƒè™‘äº†åœ¨çº¿å‡¸ä¼˜åŒ–çš„é—®é¢˜åŠå…¶åœ¨åœ¨çº¿å­¦ä¹ ä¸­çš„åº”ç”¨ã€‚ åœ¨æ¯ä¸€è½®ä¸­ï¼Œ$t=1,â€¦,T$ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªç‚¹$x_t\in R^n$ã€‚ ç„¶åæ­ç¤ºäº†å‡¸æŸå¤±å‡½æ•°$f_t$ä»¥åŠæŸå¤±$f_t(x_t)$ã€‚åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†åœ¨çº¿å‡¸ä¼˜åŒ–çš„ä¸¤ä¸ªæœ€é‡è¦ä¸”æˆåŠŸçš„ä½regretç®—æ³•å®¶æ—ä¹‹é—´çš„å…³ç³»ã€‚ ä»è¡¨é¢ä¸Šçœ‹ï¼Œè¯¸å¦‚Regularized Dual Averaging [Xiaoï¼Œ2009]ä¹‹ç±»çš„æ­£è§„åŒ–é¢†å¯¼ç®—æ³•ä¸FOBOS [Duchi and Singerï¼Œ2009]ç­‰æ¢¯åº¦ä¸‹é™ï¼ˆæ›´æ™®éçš„æ˜¯é•œåƒä¸‹é™ï¼‰é£æ ¼çš„ç®—æ³•ä¼¼ä¹æœ‰æ‰€ä¸åŒã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬è¡¨æ˜ï¼Œåœ¨äºŒæ¬¡ç¨³å®šæ­£åˆ™åŒ–çš„æƒ…å†µä¸‹ï¼Œç®—æ³•ä¹‹é—´åŸºæœ¬ä¸Šåªæœ‰ä¸¤ä¸ªåŒºåˆ«ï¼š</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605150118526.png" alt="image-20200605150118526"></p><p>ã€è¯‘æ–‡ã€‘</p><ul><li>å®ƒä»¬å¦‚ä½•é€‰æ‹©å°†é¢å¤–çš„å¼ºå‡¸æ€§ç”¨äºä¿è¯ä½regretï¼šRDAå°†æ­£åˆ™åŒ–é›†ä¸­åœ¨åŸç‚¹ï¼Œè€ŒFOBOSå°†æ­£åˆ™åŒ–é›†ä¸­åœ¨å½“å‰å¯è¡Œç‚¹ã€‚</li><li>å®ƒä»¬å¦‚ä½•å¤„ç†ä»»æ„çš„éå…‰æ»‘æ­£åˆ™åŒ–å‡½æ•°ã€‚è¿™åŒ…æ‹¬æŠ•å½±åˆ°å¯è¡Œé›†çš„æœºåˆ¶ä»¥åŠå¦‚ä½•å¤„ç†L1æ­£åˆ™åŒ–ã€‚</li></ul><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605150139243.png" alt="image-20200605150139243"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    ä¸ºäº†ä½¿è¿™äº›åŒºåˆ«æ›´ç²¾ç¡®ï¼ŒåŒæ—¶ä¹Ÿè¯´æ˜è¿™äº›å®¶æ—å®é™…ä¸Šæ˜¯å¯†åˆ‡ç›¸å…³çš„ï¼Œæˆ‘ä»¬è€ƒè™‘ç¬¬ä¸‰ç§ç®—æ³•ï¼ŒFTRL-Proximalã€‚å½“çœç•¥éå…‰æ»‘é¡¹æ—¶ï¼Œè¯¥ç®—æ³•å®é™…ä¸Šä¸FOBOSæ˜¯ç›¸åŒçš„ã€‚å¦ä¸€æ–¹é¢ï¼Œå…¶æ›´æ–°ä¸å¯¹å¶å¹³å‡çš„æ›´æ–°åŸºæœ¬ç›¸åŒï¼Œåªæ˜¯å¢åŠ çš„å¼ºå‡¸æ€§ä»¥å½“å‰å¯è¡Œç‚¹ä¸ºä¸­å¿ƒ(è§è¡¨1)ã€‚</p><p>ã€è¡¨1ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605152908088.png" alt="image-20200605152908088"></p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605150155117.png" alt="image-20200605150155117"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    å…ˆå‰çš„å·¥ä½œå·²é€šè¿‡å®éªŒè¡¨æ˜ï¼Œé‡‡ç”¨L1æ­£åˆ™åŒ–è¿›è¡Œå¯¹å¶å¹³å‡æ¯”å¼•å…¥FOBOSæ›´æœ‰æ•ˆåœ°å¼•å…¥ç¨€ç–æ€§[Xiao,2009,Duchi et al.,2010a]ã€‚æˆ‘ä»¬çš„ç­‰ä»·å®šç†å¯¹æ­¤æä¾›äº†ç†è®ºä¸Šçš„è§£é‡Šï¼šRDAè€ƒè™‘äº†ç¬¬tè½®çš„ç´¯ç§¯L1æƒ©ç½š$ t\lambda ||x||_1 $ï¼ŒFOBOSï¼ˆå½“ä½¿ç”¨ç­‰ä»·å®šç†è§†ä¸ºå…¨å±€ä¼˜åŒ–æ—¶ï¼‰è€ƒè™‘$\phi_{1:t-1}*x+\lambda||x||_1$ï¼Œå…¶ä¸­$\phi_s$æ˜¯ç¡®å®šçš„$\lambda||x_s||_1$çš„æ¬¡æ¢¯åº¦è¿‘ä¼¼ï¼ˆæˆ‘ä»¬ç”¨$\phi_{1:t-1}$ä»£è¡¨$\sum_{s=1}^{t-1}{\phi_s}$ï¼Œå¹¶æ ¹æ®éœ€è¦å°†è¡¨ç¤ºæ³•æ‰©å±•ä¸ºçŸ©é˜µå’Œå‡½æ•°çš„å’Œï¼‰ã€‚</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605150209723.png" alt="image-20200605150209723"></p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605150311078.png" alt="image-20200605150311078"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    åœ¨ç¬¬2èŠ‚ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘äº†é•œåƒä¸‹é™å’Œéµå¾ªæ­£åˆ™åŒ–é¢†å¯¼çš„ä¸€èˆ¬å…¬å¼ï¼Œå¹¶è¯æ˜äº†ä¸ä¸¤è€…æœ‰å…³çš„å®šç†ã€‚ åœ¨ç¬¬3èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡å®éªŒæ¯”è¾ƒFOBOSï¼ŒRDAå’ŒFTRL-Proximalã€‚ FTRL-Proximalç®—æ³•åœ¨ç¨€ç–æ€§æ–¹é¢çš„è¡Œä¸ºä¸RDAéå¸¸ç›¸ä¼¼ï¼Œè®¤ä¸ºæ˜¯L1ç½šåˆ™çš„ç´¯ç§¯æ¬¡æ¢¯åº¦è¿‘ä¼¼å¯¼è‡´FOBOSç¨€ç–æ€§é™ä½ã€‚<br>â€‹    è¿‘å¹´æ¥ï¼Œåœ¨çº¿æ¢¯åº¦ä¸‹é™å’Œéšæœºæ¢¯åº¦ä¸‹é™ï¼ˆå…¶æ‰¹æ¬¡æ¨¡æ‹Ÿï¼‰å·²è¯æ˜è‡ªå·±æ˜¯ç”¨äºå¤§è§„æ¨¡æœºå™¨å­¦ä¹ çš„å‡ºè‰²ç®—æ³•ã€‚ åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼ŒFTLR-Proximalæ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å½“éœ€è¦L1æˆ–å…¶ä»–ä¸å¹³æ»‘çš„æ­£åˆ™åŒ–æ—¶ï¼ŒFTRL-Proximalçš„æ€§èƒ½æ˜æ˜¾ä¼˜äºFOBOSï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥ä¼˜äºRDAã€‚ ç”±äºFTRL-Proximalå’ŒRDAçš„å®ç°ä»…éœ€è¦å‡ è¡Œä»£ç ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®æ‚¨å°è¯•ä¸¤è€…å¹¶åœ¨å®è·µä¸­é€‰æ‹©æ€§èƒ½æœ€ä½³çš„ä»£ç ã€‚</p><h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200605162626080.png" alt="image-20200605162626080"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    æˆ‘ä»¬é¦–å…ˆå»ºç«‹ç¬¦å·å¹¶æ›´æ­£å¼åœ°ä»‹ç»æˆ‘ä»¬è€ƒè™‘çš„ç®—æ³•ã€‚ è™½ç„¶æˆ‘ä»¬çš„å®šç†é€‚ç”¨äºè¿™äº›ç®—æ³•çš„æ›´é€šç”¨ç‰ˆæœ¬ï¼Œä½†åœ¨è¿™é‡Œæˆ‘ä»¬é›†ä¸­äºæˆ‘ä»¬åœ¨å®éªŒä¸­ä½¿ç”¨çš„ç‰¹å®šå®ä¾‹ã€‚æˆ‘ä»¬è€ƒè™‘æŸå¤±å‡½æ•°$f_t(x)=l_t(x)+\Phi(x)$ï¼Œå…¶ä¸­$\Phi(x)$ï¼ˆé€šå¸¸ä¸å¹³æ»‘ï¼‰æ˜¯å›ºå®šçš„æ­£åˆ™åŒ–å‡½æ•°ã€‚åœ¨å…¸å‹çš„åœ¨çº¿å­¦ä¹ ç¯å¢ƒä¸­ï¼Œç»™å®šä¸€ä¸ªæ ·æœ¬$(\theta_t,y_t)$ï¼Œ$\theta_t \in R^n$æ˜¯ç‰¹å¾å‘é‡ï¼Œ$y_t \in \{-1,1\}$æ˜¯labelï¼Œæˆ‘ä»¬å¾—åˆ°$l_t(x)=loss(\theta_tx,y_t)$ã€‚ä¾‹å¦‚ï¼Œå¯¹é€»è¾‘å›å½’æ¥è¯´ç”¨çš„æ˜¯log-lossï¼Œ$loss(\theta_tx,y_t)=log(1+\exp(-y_t\theta_tx))$ã€‚å¯¹çº¿æ€§å‡½æ•°æˆ‘ä»¬ä½¿ç”¨æ ‡å‡†è§„çº¦æ³•ï¼Œä»¤$g_t=\nabla{l_t(x_t)}$ã€‚æˆ‘ä»¬è€ƒè™‘çš„æ‰€æœ‰ç®—æ³•éƒ½æ”¯æŒå¤åˆæ›´æ–°ï¼ˆæ˜¾ç¤ºè€ƒè™‘$\Phi$è€Œä¸æ˜¯é€šè¿‡æ¢¯åº¦$\nabla{f_t(x_t)}$ä»¥åŠå¯è‡ªé€‚åº”é€‰æ‹©çš„æ­£åŠå®šå­¦ä¹ ç‡çŸ©é˜µQï¼ˆå°†è¿™äº›çŸ©é˜µè§£é‡Šä¸ºå­¦ä¹ ç‡å°†åœ¨ç¬¬2èŠ‚ä¸­æœ‰è¯´æ˜ï¼‰ï¼‰</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200611093316088.png" alt="image-20200611093316088"><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200611093355502.png" alt="image-20200611093355502"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    æˆ‘ä»¬è€ƒè™‘çš„ç¬¬ä¸€ä¸ªç®—æ³•æ˜¯æ¥è‡ªæ¢¯åº¦ä¸‹é™å®¶æ—çš„<code>FOBOS</code>ï¼Œå¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x \min {g_t*x+t\lambda||x||_1+\frac{1}{2}\sum_{s=1}^{t}{||Q_{1:t}^{1/2}(x-x_t)||_2^2}}</script><p>â€‹    æˆ‘ä»¬éšå¼åœ°å°†è¯¥ç®—æ³•è¡¨è¿°ä¸ºä¸€ç§ä¼˜åŒ–ï¼Œä½†ä¹Ÿå¯ä»¥ç»™å‡ºä¸€ç§æ¢¯åº¦ä¸‹é™å¼çš„å°é—­å½¢å¼æ›´æ–°[Duchiå’ŒSinger, 2009]ã€‚Duchiç­‰äººå°†è¯¥ç®—æ³•æè¿°ä¸ºä¸€ç§ç‰¹æ®Šçš„å¤åˆç‰©é•œä¸‹é™(COMID)ç®—æ³•[2010b]ã€‚</p><p>â€‹    Xiao[2009]çš„æ­£åˆ™å¯¹å¶å¹³å‡ç®—æ³•ï¼ˆ<code>RDA</code>ï¼‰å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x \min {g_{1:t}*x+t\lambda||x||_1+\frac{1}{2}\sum_{s=1}^{t}{||Q_s^{1/2}(x-0)||_2^2}}</script><p>â€‹    å¯¹æ¯”<code>FOBOS</code>ï¼Œ<code>RDA</code>æ˜¯ç”¨ç´¯ç§¯æ¢¯åº¦$g_{1:t}$ï¼Œè€Œä¸ä»…ä»…æ˜¯$g_t$ã€‚æˆ‘ä»¬å°†åœ¨å®šç†4è¯æ˜å½“$\lambda=0$ä»¥åŠ$l_t$ä¸æ˜¯å¼ºå‡¸æ—¶ï¼Œè¯¥ç®—æ³•ï¼ˆ<code>RDA</code>ï¼‰å®é™…ä¸Šç­‰ä»·äºåœ¨çº¿è‡ªé€‚åº”æ¢¯åº¦ä¸‹é™æ³•ï¼ˆ<code>AOGD</code>ï¼‰[Bartlett et al., 2007]</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200622094912113.png" alt="image-20200622094912113"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    FTRL-Proximalç®—æ³•å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x \min {g_{1:t}*x+t\lambda||x||_1+\frac{1}{2}\sum_{s=1}^{t}{||Q_s^{1/2}(x-x_s)||_2^2}}</script><p>â€‹    è¯¥ç®—æ³•åœ¨ [McMahan and Streeter, 2010]çš„è®ºæ–‡ä¸­æœ‰ä»‹ç»ï¼Œä½†æ˜¯æ²¡æœ‰æ”¯æŒæ˜¾ç¤ºçš„$\Phi$ï¼Œè€Œ[McMahan, 2011]è¯æ˜äº†å¤„ç†å›ºå®š$\Phi$å‡½æ•°çš„æ›´ä¸€èˆ¬ç®—æ³•çš„é—æ†¾ç•Œ</p><p>â€‹    æˆ‘ä»¬çš„ä¸»è¦è´¡çŒ®ä¹‹ä¸€å°±æ˜¯å±•ç¤ºäº†è¿™å››ç§ç®—æ³•ä¹‹é—´çš„ç´§å¯†è”ç³»;è¡¨1æ€»ç»“äº†å®šç†2å’Œå®šç†4çš„å…³é”®ç»“æœï¼Œä»¥ä½¿ä¸RDAå’ŒFTRL-Proximalçš„å…³ç³»æ˜¾å¼çš„å½¢å¼ç¼–å†™äº†AOGDå’ŒFOBOSã€‚</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200702143901089.png" alt="image-20200702143901089"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    åœ¨æˆ‘ä»¬çš„åˆ†æä¸­ï¼Œæˆ‘ä»¬å°†ç”¨ä»»æ„å‡¸å‡½æ•°$R_t$å’Œ$\hat{R_t}$æ¥ä»£æ›¿ä¸Šé¢å‡ºç°çš„$\frac{1}{2}||Q_t^{1/2}x||_2^2$å’Œ$\frac{1}{2}||Q_t^{1/2}(x-x_t)||_2^2$ï¼ŒåŒæ—¶ç”¨ä»»æ„å‡¸å‡½æ•°$\Phi(x)$ä»£æ›¿$\lambda||x||_1$ã€‚å¯¹è¿™äº›ç®—æ³•ï¼ŒçŸ©é˜µ$Q_t$è¢«è‡ªé€‚åº”çš„é€‰æ‹©ã€‚æˆ‘ä»¬åœ¨å®éªŒä¸­ä½¿ç”¨<code>per-coordinate adaptation</code>ä¾‹å¦‚$Q_t$æ˜¯å½¢å¦‚$Q_{1:t}=diag(\hat{\sigma_{t,1}},â€¦,\hat{\sigma_{t,n}})$çš„å¯¹è§’çŸ©é˜µï¼Œå…¶ä¸­$\hat{\sigma_{t,i}}=\frac{1}{\gamma}\sqrt{\sum_{s=1}^t{g_{t,i}^2}}$ï¼Œè¯¦æƒ…è¯·è§<code>McMahan and Streeter [2010] and Duchi et al. [2010a]</code>ã€‚ç”±äºæ‰€æœ‰ç®—æ³•éƒ½å—ç›Šäºè¿™ç§æ–¹æ³•ï¼Œå› æ­¤å³ä½¿åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä»¥æ ‡é‡å­¦ä¹ ç‡å¼•å…¥å®ƒä»¬ï¼Œæˆ‘ä»¬ä¹Ÿä½¿ç”¨åŸå§‹ç®—æ³•çš„æ›´ç†Ÿæ‚‰çš„åç§°ã€‚ æ˜¯å­¦ä¹ ç‡æ¯”ä¾‹å‚æ•°ï¼Œæˆ‘ä»¬åœ¨å®éªŒä¸­å¯¹å…¶è¿›è¡Œäº†è°ƒæ•´ã€‚</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200702163652233.png" alt="image-20200702163652233"></p><p>ã€è¯‘æ–‡ã€‘</p><p><strong>é«˜æ•ˆçš„å®æ–½åº¦ï¼š</strong>æ‰€æœ‰è¿™äº›ç®—æ³•éƒ½å¯ä»¥æœ‰æ•ˆå®æ–½ï¼Œå› ä¸º$g_t$çš„æ›´æ–°èƒ½åœ¨$O(K)$æ—¶é—´å†…å®Œæˆï¼Œå…¶ä¸­$K$éé›¶ã€‚FTRL-Proximalå’ŒRDAå¯ä»¥é€šè¿‡å­˜å‚¨æ¯ä¸ªå±æ€§çš„ä¸¤ä¸ªç§¯åˆ†å€¼ï¼Œä¸€ä¸ªäºŒæ¬¡é¡¹å’Œä¸€ä¸ªçº¿æ€§é¡¹æ¥å®ç°ï¼ˆå¯¹è§’å­¦ä¹ ç‡ï¼‰ã€‚ å½“éœ€è¦$x_{t,i}$æ—¶ï¼Œå¯ä»¥ç”¨å°é—­å½¢å¼çš„æ‡’æƒ°å¼æ±‚è§£ï¼ˆä¾‹å¦‚å‚è§<code>[Xiaoï¼Œ2009]</code>ï¼‰ã€‚</p><p>å¯¹FOBOSæ¥è¯´ï¼Œæ›´æ–°ä¸­$\lambda||x||_1$çš„å­˜åœ¨æ„å‘³ç€æ‰€æœ‰ç³»æ•°$x_{t.i}$ï¼ˆå³ä½¿åœ¨$g_{t,i}=0$æ—¶ä¹Ÿï¼‰éœ€è¦æ›´æ–°ã€‚ç„¶è€Œï¼Œä½†æ˜¯ï¼Œé€šè¿‡å­˜å‚¨$g_{t,i}$ä¸ä¸ºé›¶çš„æœ€åä¸€è½®çš„ç´¢å¼•<code>t</code>ï¼ŒL1 çš„ä¸€éƒ¨åˆ†æ›´æ–°æ˜¯æ‡’æƒ°çš„<code>[Duchi and Singerï¼Œ2009]</code>ã€‚</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200703161502635.png" alt="image-20200703161502635"></p><p>ã€è¯‘æ–‡ã€‘</p><p><strong>å¯è¡Œé›†ï¼š</strong> åœ¨æŸäº›åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½åªç”¨æ¥è‡ªå—é™å‡¸å¯è¡Œé›†$F \sub R^n$çš„ç‚¹ï¼Œä¾‹å¦‚ï¼Œå›¾ä¸­ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„é›†ã€‚ç”±äºæˆ‘ä»¬è€ƒè™‘çš„æ‰€æœ‰ç®—æ³•éƒ½æ”¯æŒå¤åˆæ›´æ–°ï¼Œå› æ­¤å¯ä»¥é€šè¿‡é€‰æ‹©åœ¨$F$ä¸Šçš„æŒ‡æ ‡å‡½æ•°$\Phi_F$æ¥é€‰æ‹©$\Phi$æ¥å®Œæˆæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯$\Phi_F(x)=0 , if(x \in F),else(\infty)$ã€‚å¯ä»¥ç›´æ¥è¯æ˜$\arg\min_{x\in R^n}{g_{1:t}x+R_{1:t}(x)+\Phi_F(x)}$ç­‰ä»·äº$\arg\min_{x\in F}{g_{1:t}x+R_{1:t}(x)}$ï¼Œå¹¶ä¸”æˆ‘ä»¬æ— éœ€æ˜ç¡®è®¨è®º$F$ï¼Œè€Œæ˜¯è€ƒè™‘ä»»æ„æ‰©å±•çš„å‡¸å‡½æ•°ï¼Œå°±å¯ä»¥æ¨å¹¿ç‰¹å®šå¯è¡Œé›†çš„ç»“æœ<code>[McMahanand Streeter, 2010]</code></p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200703171520426.png" alt="image-20200703171520426"></p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200703171600989.png" alt="image-20200703171600989"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    æˆ‘ä»¬è®°$x,y\in R^n$çš„å†…ç§¯ä¸º$x^Ty,or,xy$ã€‚$x_{t,i}\in R$è¡¨ç¤ºæ—¶é—´$t$çš„ç¬¬$i$ä¸ªå˜é‡ã€‚$B$æ˜¯åŠæ­£å®šçŸ©é˜µï¼Œæœ‰$||B^{1/2}x||_2^2=x^TBx$ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™å‡å®šå‡¸å‡½æ•°æ˜¯åŸŸ$R^n$å’ŒèŒƒå›´$R^n\cup\{\infty\}$çš„æ‰©å±•ã€‚å¯¹å‡¸å‡½æ•°$f$ï¼Œ$\partial{f}$è¡¨ç¤º$f$åœ¨$x$ä¸Šçš„å¯¼æ•°ã€‚é€šè¿‡å®šä¹‰ï¼Œå¯¹æ‰€æœ‰$y$ï¼Œæœ‰$f(y)\ge f(x)+g^T(y-x)$ï¼Œå…¶ä¸­$g\in \partial f(x)$ã€‚å½“$f$å¯å¯¼æ—¶ï¼Œè®°$\nabla f(x)$ä¸º$f$åœ¨$x$çš„å¯¼æ•°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ$\partial f(x) = \{\nabla f(x)\}$ã€‚é™¤éç‰¹åˆ«æŒ‡å®šï¼Œä¸ç„¶æ‰€æœ‰çš„$mins$å’Œ$argmins$éƒ½æ˜¯åœ¨$R^n$ä¸Šã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ä»¥ä¸‹æ ‡å‡†ç»“æœï¼Œæ€»ç»“å¦‚ä¸‹ï¼š</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200706145943582.png" alt="image-20200706145943582"></p><p>ã€è¯‘æ–‡ã€‘</p><p><strong>å®šç†1ï¼š</strong>ä»¤$R:R^n \rightarrow R$æ˜¯å…·æœ‰è¿ç»­ä¸€é˜¶åå¯¼æ•°çš„å¼ºå‡¸å‡½æ•°ä»¥åŠä»¤$\Psi:R^n \rightarrow R\cup \{\infty\}$æ˜¯ä»»æ„å‡¸å‡½æ•°ã€‚å®šä¹‰$g(x)=R(x)+\Psi(x)$ã€‚åˆ™ï¼Œå­˜åœ¨ä¸€ä¸ªå¦‚ä¸‹ç­‰å¼çš„å”¯ä¸€å¯¹$(x^*,\phi^*)$ï¼š</p><script type="math/tex; mode=display">\phi^*\in \partial{\Psi(x^*)} \\x^*=\arg_x\min{R(x)+\phi^*x}\leftrightarrow \nabla R(x^*)+\phi^*=0</script><p>ä¸”$x^*$æ˜¯$g$çš„å”¯ä¸€æœ€å°å€¼ã€‚</p><p>ã€è¯æ˜ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200706152306207.png" alt="image-20200706152306207"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    ç”±äº$R$æ˜¯å¼ºå‡¸çš„ï¼Œæ‰€ä»¥$g$ä¹Ÿæ˜¯å¼ºå‡¸çš„ã€‚åˆ™$g$æ‹¥æœ‰å”¯ä¸€æœ€å°å€¼$x^*$ã€‚ä»¤$r=\nabla R$ï¼Œåˆ™å­˜åœ¨$\phi^* \in \partial \Psi(x^*)$ä½¿å¾—$r(x^*)+\phi^*=0$ï¼ˆå› ä¸ºè¿™æ˜¯$0\in \partial g(x^*)$çš„å¿…è¦å……åˆ†æ¡ä»¶ï¼‰ã€‚ä¸”$x^*=\arg_x\min{R(x)+\phi^*x}$ï¼ˆå› ä¸º$r(x^*)+\phi^*$æ˜¯å…¶åœ¨$x^*$å¤„çš„æ¢¯åº¦ï¼‰ã€‚å‡å®šæœ‰å¦å¤–ä¸€ç»„$(x^1,\phi^1)$æ»¡è¶³è¿™ä¸ªå®šç†ï¼Œå³$r(x^{1})+\phi^{1}=0$ä»¥åŠ$0 \in \partial g(x^1)$ï¼Œä¸”$x^1$æ˜¯$g$çš„å”¯ä¸€æœ€å°å€¼ã€‚ç”±äºæœ€å°å€¼æ˜¯å”¯ä¸€çš„ï¼Œåˆ™$x^1=x^*,\phi^1=-r(x^*)=\phi^*$ã€‚</p><h2 id="2-MIRROR-DESCENT-FOLLOWS-THE-LEADER"><a href="#2-MIRROR-DESCENT-FOLLOWS-THE-LEADER" class="headerlink" title="2 MIRROR DESCENT FOLLOWS THE LEADER"></a>2 MIRROR DESCENT FOLLOWS THE LEADER</h2><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200706155201563.png" alt="image-20200706155201563"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘äº†é•œåƒä¸‹é™ç®—æ³•ï¼ˆæœ€ç®€å•çš„ç¤ºä¾‹æ˜¯åœ¨çº¿æ¢¯åº¦ä¸‹é™ï¼‰å’ŒFTRLç®—æ³•ä¹‹é—´çš„å…³ç³»ã€‚ä»¤$f_t(x)=g_tx+\Psi(x)$ï¼Œå…¶ä¸­$g_t \in \partial l_t(x_t)$ã€‚ä»¤$R_1$å¼ºå‡¸ï¼Œæ‰€æœ‰$R_t$å‡¸ã€‚ é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æˆ‘ä»¬å‡è®¾$\min_xR_1(x)= 0$ï¼Œå¹¶å‡è®¾$x = 0$æ˜¯å”¯ä¸€çš„æœ€å°å€¼ã€‚</p><h3 id="FTRL"><a href="#FTRL" class="headerlink" title="FTRL"></a>FTRL</h3><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200706160046298.png" alt="image-20200706160046298"></p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200706160105113.png" alt="image-20200706160105113"></p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200706160119257.png" alt="image-20200706160119257"></p><p>ã€è¯‘æ–‡ã€‘</p><p><strong>FTRLï¼š</strong>æœ€ç®€å•çš„éµå¾ªæ­£è§„é¢†å¯¼ç®—æ³•å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_{1:t}x+\frac{\sigma_{1:t}}{2}||x||_2^2}</script><p>å¯¹$t=1$ï¼Œæˆ‘ä»¬é€šå¸¸å–$x_1=0$ã€‚æˆ‘ä»¬å¯ä»¥å°†$\frac{1}{2}||x||_2^2$æ›¿æ¢æˆä»»æ„å¼ºå‡¸å‡½æ•°$R$ï¼Œå¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_{1:t}x+\sigma_{1:t}R(x)}</script><p>æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ª$t$ç‹¬ç«‹é€‰æ‹©$\sigma_{1:t}$ï¼Œä½†æ˜¯éœ€è¦å®ƒæ˜¯éå‡çš„ï¼Œå› æ­¤å°†å…¶å†™æˆæ¯è½®å¢é‡$\sigma_t \ge 0$çš„æ€»å’Œæ˜¯åˆç†çš„ã€‚æ›´ä¸€èˆ¬çš„æ›´æ–°å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_{1:t}x+R_{1:t}(x)}</script><p>åœ¨æ¯ä¸ªå›åˆä¸Šæ·»åŠ ä¸€ä¸ªé¢å¤–çš„å‡¸å‡½æ•°$R_t$ã€‚ ä»¤$R_t(x)=\sigma_tR(x)$æ¢å¤å…ˆå‰çš„å…¬å¼(6)ã€‚</p><p>â€‹    å½“$\arg_{x\in R^n}\min{R_t(x)=0}$ï¼Œæˆ‘ä»¬ç§°å‡½æ•°$R_t$ä¸º<strong>origin-centered</strong>ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰$FTRL^1$çš„<strong>proximal</strong>ç‰ˆæœ¬ï¼Œå°†å…¶ä»–æ­£åˆ™åŒ–æ”¾åœ¨å½“å‰ç‚¹è€Œä¸æ˜¯åŸç‚¹çš„ä¸­å¿ƒã€‚åœ¨è¿™èŠ‚ï¼Œæˆ‘ä»¬ä¿ç•™$R_t$çš„å®šä¹‰å¹¶å†™å‡ºå…¶<strong>origin-centered</strong>å‡½æ•°$\tilde{R}_t(x)=R_t(x-x_t)$ã€‚è¯·æ³¨æ„ï¼Œä»…éœ€è¦$\tilde{R}_t$æ¥é€‰æ‹©$x_{t+1}$ï¼Œå¹¶ä¸”æ­¤æ—¶$x_t$æ˜¯ç®—æ³•å·²çŸ¥çš„ï¼Œä»è€Œç¡®ä¿ç®—æ³•åœ¨è®¡ç®—$x_{t+1}$æ—¶ä»…éœ€è¦è®¿é—®ç¬¬ä¸€ä¸ªtæŸå¤±å‡½æ•°ï¼ˆæ ¹æ®éœ€è¦ï¼‰ã€‚ ä¸€èˆ¬æ›´æ–°å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_{1:t}x+\tilde{R}_{1:t}(x)}</script><p>æœ€ç®€å•çš„æƒ…å½¢å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_{1:t}x+\sum_{s=1}^t{\frac{\sigma_s}{2}||x-x_s||_2^2}}</script><h3 id="Mirror-Descent"><a href="#Mirror-Descent" class="headerlink" title="Mirror Descent"></a>Mirror Descent</h3><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200706173107216.png" alt="image-20200706173107216"></p><p>ã€è¯‘æ–‡ã€‘</p><p><strong>Mirror Descentï¼š</strong>æœ€ç®€å•çš„mirror descentç‰ˆæœ¬æ˜¯ä»¥åŒä¸€æ­¥é•¿$\eta$çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œå¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=x_t-\eta g_t = -\eta g_{1:t}</script><p>ä¸ºäº†å¾—åˆ°ä½æƒ©ç½šï¼Œ$T$å¿…é¡»äº‹å…ˆçŸ¥é“ï¼Œä»¥ä¾¿å¯ä»¥ç›¸åº”çš„é€‰æ‹©$\eta$ã€‚ä½†æ˜¯ï¼Œç”±äºæœ‰ä¸€ä¸ªå…³äºåœ¨ç‚¹$x_{t+1}$ä¸Šçš„$g_{1:t}$å’Œ$\eta$çš„å°é—­å½¢å¼è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å°†æ­¤å½’çº³ä¸ºä¸€ä¸ªâ€œrevisionistâ€ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨æ¯ä¸€è½®ä¸­éƒ½æ‰®æ¼”ç€è¿™æ ·çš„è§‚ç‚¹ï¼šå¦‚æœåœ¨ç¬¬1åˆ°$t-1$è½®ä¸­ä½¿ç”¨äº†æ­¥é•¿$\eta_t$ï¼Œåˆ™å…·æœ‰æ’å®šæ­¥é•¿çš„æ¢¯åº¦ä¸‹é™å°†å‘æŒ¥ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯$x_{t+1}=-\eta_tg_{1:t}$ã€‚å½“$R_t(x)=\frac{\sigma_t}{2}||x||_2^2$ä¸”$\eta_t=\frac{1}{\sigma_{1:t}}$ï¼Œè¿™ç­‰ä»·äºFTRLã€‚</p><p>â€‹    æ›´ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬å°†å¯¹æ¢¯åº¦ä¸‹é™ç®—æ³•æ›´æ„Ÿå…´è¶£ï¼Œè¯¥ç®—æ³•ä½¿ç”¨çš„è‡ªé€‚åº”æ­¥é•¿è‡³å°‘ï¼ˆå–å†³äºï¼‰è½®æ•°$t$ã€‚ åœ¨æ¯ä¸ªå›åˆä¸­ä½¿ç”¨å¯å˜æ­¥é•¿$t$è¿›è¡Œæ¢¯åº¦ä¸‹é™å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=x_t-\eta_t g_t</script><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200707143210278.png" alt="image-20200707143210278"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    è¿™ç§æ›´æ–°çš„ç›´è§‰æ¥è‡ªäºå®ƒå¯ä»¥è¢«é‡å†™ä¸ºå¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_tx+\frac{1}{2\eta_t}||x-x_t||_2^2}</script><p>è¿™ä¸ªç‰ˆæœ¬æŠ“ä½äº†è¿™æ ·ä¸€ä¸ªæ¦‚å¿µ(åœ¨çº¿å­¦ä¹ æœ¯è¯­)ï¼Œå³æˆ‘ä»¬ä¸æƒ³è¿‡å¤šåœ°æ”¹å˜æˆ‘ä»¬çš„å‡è®¾$x_t$(å› ä¸ºå®³æ€•å¯¹æˆ‘ä»¬å·²ç»çœ‹åˆ°çš„ä¾‹å­åšå‡ºé”™è¯¯çš„é¢„æµ‹)ï¼Œä½†æˆ‘ä»¬ç¡®å®æƒ³æœç€å‡å°‘æˆ‘ä»¬æœ€è¿‘çœ‹åˆ°çš„ä¾‹å­çš„å‡è®¾æŸå¤±çš„æ–¹å‘å‰è¿›(è¿™æ˜¯ç”±çº¿æ€§å‡½æ•°$g_t$è¿‘ä¼¼å¾—å‡ºçš„)ã€‚</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200707144406205.png" alt="image-20200707144406205"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    é•œåƒä¸‹é™ç®—æ³•åˆ©ç”¨äº†è¿™ç§ç›´è§‰ï¼Œç”¨ä»»æ„çš„Bregmanç¦»æ•£æ”¶æ•›æ›¿æ¢äº†$L_2$å¹³æ–¹æƒ©ç½šã€‚å¯¹äºå¯å¾®çš„ï¼Œä¸¥æ ¼å‡¸çš„ï¼Œå“åº”çš„Bregmanæ•£åº¦ä¸ºï¼š</p><script type="math/tex; mode=display">\Beta_R(x,y)=R(x)-(R(y)+\nabla R(y)*(x-y))</script><p>å¯¹ä»»æ„çš„$x,y\in R^n$ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹æ›´æ–°ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_tx+\frac{1}{\eta_t}\Beta_R(x,x_t)}</script><p>æˆ–è€…æ›´æ˜ç¡®åœ°ï¼ˆé€šè¿‡å°†ï¼ˆ14ï¼‰çš„æ¢¯åº¦è®¾ç½®ä¸º0ï¼‰ï¼š</p><script type="math/tex; mode=display">x_{t+1}=r^{-1}(r(x_t)-\eta_tg_t)</script><p>å…¶ä¸­$r=\nabla R$ã€‚ä»¤$R(x)=\frac{1}{2}||x||_2^2$ä»¥ä½¿$\Beta_R(x, x_t)=\frac{1}{2}||x-x_t||_2^2$æ¢å¤å…¬å¼ï¼ˆ13ï¼‰çš„ç®—æ³•ã€‚çœ‹åˆ°è¿™ç§æƒ…å†µçš„ä¸€ç§æ–¹å¼æ˜¯æ³¨æ„åœ¨è¿™ç§æƒ…å†µä¸‹$r(x)=r^{-1}(x)=x$ã€‚</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200707151519532.png" alt="image-20200707151519532"></p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200707160925823.png" alt="image-20200707160925823"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ¯ä¸€è½®çš„Bergmanæ•£åº¦ä¸­åŠ å…¥ä¸€ä¸ªæ–°çš„å¼ºå‡¸å‡½æ•°$R_t$æ¥è¿›ä¸€æ­¥æ¨å¹¿å®ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè®©ï¼š</p><script type="math/tex; mode=display">\Beta_{1:t}(x,y)=\sum_{s=1}^t{\Beta_{R_s}(x,y)}</script><p>æ‰€ä»¥æ›´æ–°å˜æˆï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_tx+\Beta_{1:t}(x,x_t)}</script><p>æˆ–ç­‰ä»·äº$x_{t+1}=(r_{1:t})^{-1}(r_{1:t}(x_t)-g_t)$ï¼Œå…¶ä¸­$r_{1:t}=\sum_{s=1}^t{\nabla R_t}=\nabla R_{1:t}$ä»¥åŠ$(r_{1:t})^{-1}$æ˜¯$r_{1:t}$çš„åå‡½æ•°ã€‚æ­¥é•¿$\eta_t$éšè—ç¼–ç åœ¨$R_t$çš„é€‰æ‹©ä¸­ã€‚</p><p>â€‹    COMIDå°†$\Psi$å‡½æ•°åŠ å…¥æ¯ä¸€è½®è¿­ä»£ï¼š$f_t(x)=g_tx+\Psi(x)$ã€‚ç„¶åæ›´æ–°å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{\eta g_tx+\Beta(x,x_t)+\eta \Psi(x)}</script><p>å¯ä»¥æ¨å¹¿æˆå¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_tx+\Psi(x)+\Beta_{1:t}(x,x_t)}</script><p>å…¶ä¸­å­¦ä¹ ç‡$\eta$è¢«å®šä¹‰åœ¨$R_1,â€¦,R_t$ã€‚å¦‚æœé€‰æ‹©$\Psi$ä½œä¸ºå‡¸é›†ä¸Šçš„æŒ‡æ ‡å‡½æ•°ï¼Œåˆ™COMIDå¯é€šè¿‡è´ªå©ªæŠ•å½±å°†æ ‡å‡†ä¸‹é™åˆ°é•œé¢ä¸‹é™ã€‚</p><h3 id="2-1-An-Equivalence-Theorem-for-Proximal-Regularization"><a href="#2-1-An-Equivalence-Theorem-for-Proximal-Regularization" class="headerlink" title="2.1 An Equivalence Theorem for Proximal Regularization"></a>2.1 An Equivalence Theorem for Proximal Regularization</h3><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200707161708239.png" alt="image-20200707161708239"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    åœ¨å®šç†2ä¸­ï¼Œæˆ‘ä»¬è¡¨æ˜é•œåƒä¸‹é™ç®—æ³•å¯ä»¥è¢«è§†ä¸ºFTRLç®—æ³•ã€‚</p><p><strong>å®šç†2ï¼š</strong>ä»¤$R_t$æ˜¯ä¸€ç»„å¯å¾®åˆ†çš„åŸç‚¹ä¸­å¿ƒå‡¸å‡½æ•°ï¼ˆ$\nabla R_t(0)=0$ï¼‰ï¼Œ$R_1$æ˜¯å¼ºå‡¸çš„ï¼Œä¸”ä»¤$\Psi$æ˜¯ä»»æ„å‡¸å‡½æ•°ã€‚ä»¤$x_1=\hat{x}_1=0$ã€‚å¯¹ä¸€ç»„æŸå¤±å‡½æ•°$f_t(x)=g_tx+\Psi(x)$ï¼Œåœ¨ä¸€ç»„ç‚¹ä¸Šçš„å¤åˆç›®æ ‡é•œåƒæ¢¯åº¦ç®—æ³•å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\hat{x}_{t+1}=\arg_x\min{g_t+\Psi(x)+\tilde{\Beta}_{1:t}(x,\hat{x}_t)}</script><p>å…¶ä¸­$\tilde{R}_t(x)=R_t(x-\hat{x}_t)$ï¼Œä»¥åŠ$\tilde{\Beta}_t=\Beta_{\tilde{R}_t}$ï¼Œæ‰€ä»¥$\tilde{\Beta}_{1:t}$æ˜¯å…³äº$\tilde{R}_1+Â·Â·+ \tilde{R}_t$çš„Bregmanæ•£åº¦ã€‚è€ƒè™‘åœ¨å¦å¤–ä¸€ç»„ç‚¹$x_t$ä¸Šçš„FTRLç®—æ³•ï¼Œ</p><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{(g_{1:t}+\phi_{1:t-1})x+\tilde{R}_{1:t}(x)+\Psi(x)}</script><p>å…¶ä¸­$\phi_t\in\partial{\Psi(x_{t+1})}$ä»¥è‡´äº$g_{1:t}+\phi_{1:t-1}+\nabla{\tilde{R}_{1:t}(x_{t+1})}+\phi_t=0$ã€‚é‚£ä¹ˆï¼Œè¿™äº›ç®—æ³•æ˜¯ç­‰ä»·çš„ï¼Œå³å¯¹æ‰€æœ‰$t&gt;0$ï¼Œæœ‰$x_t=\hat{x}_t$ã€‚</p><p>ã€åŸæ–‡ã€‘</p><p><img src="/2020/06/04/ji-qi-xue-xi-zhi-ftrl-fang-fa/image-20200707172308338.png" alt="image-20200707172308338"></p><p>ã€è¯‘æ–‡ã€‘</p><p>â€‹    é•œåƒä¸‹é™å®šç†ä¸­ä½¿ç”¨çš„Bregmanæ•£åº¦æ˜¯å…³äºè¿‘ç«¯å‡½æ•°$\tilde{R}_{1:t}$ï¼Œè€Œé€šå¸¸(å¦‚æ–¹ç¨‹(17))è¿™äº›å‡½æ•°å°†ä¸ä¾èµ–äºä¹‹å‰çš„ç‚¹å‘æŒ¥ã€‚æˆ‘ä»¬å°†è¯æ˜å½“$R_t(x)=\frac{1}{2}||Q_t^{1/2}x||_2^2$æ—¶ï¼Œè¿™äº›é—®é¢˜å°†ä¸å­˜åœ¨ã€‚è€ƒè™‘ä»»æ„$\Psi$å‡½æ•°ä¹Ÿä¼šä½¿å®šç†é™ˆè¿°æœ‰äº›å¤æ‚ã€‚ä»¥ä¸‹æ¨è®ºå›é¿äº†è¿™äº›å¤æ‚æ€§ï¼Œä»¥é™ˆè¿°ç®€å•çš„ç›´æ¥ç­‰ä»·ç»“æœ</p><p><strong>æ¨è®º3ï¼š</strong>ä»¤$f_t(x)=g_tx$ã€‚ç„¶åï¼Œä»¥ä¸‹ç®—æ³•å‘æŒ¥ç›¸åŒçš„ä½œç”¨ï¼š</p><ul><li><p>ä½¿ç”¨åŠæ­£å®šå­¦ä¹ é€Ÿç‡$Q_t$çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼š</p><script type="math/tex; mode=display">x_{t+1}=x_t-Q_{1:t}^{-1}{g_t}</script></li><li><p>FTRLç®—æ³•</p></li></ul><script type="math/tex; mode=display">x_{t+1}=\arg_x\min{g_{1:t}x+\tilde{R}_{1:t}(x)}\\\tilde{R}_t(x)=\frac{1}{2}||Q_t^{1/2}(x-x_t)||_2^2</script><hr><h1 id="å·¥ç¨‹å®ç°"><a href="#å·¥ç¨‹å®ç°" class="headerlink" title="å·¥ç¨‹å®ç°"></a>å·¥ç¨‹å®ç°</h1>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FTRL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹MapReduce</title>
      <link href="/2020/06/03/shi-yong-gong-ju-zhi-mapreduce/"/>
      <url>/2020/06/03/shi-yong-gong-ju-zhi-mapreduce/</url>
      
        <content type="html"><![CDATA[<h1 id="Title"><a href="#Title" class="headerlink" title="Title"></a>Title</h1><p><img src="/2020/06/03/shi-yong-gong-ju-zhi-mapreduce/image-20200603093104618.png" alt="image-20200603093104618"></p><p>ã€è¯‘æ–‡ã€‘</p><ul><li>MapReduceï¼šå¤§å‹é›†ç¾¤ä¸Šçš„ç®€åŒ–æ•°æ®å¤„ç†</li></ul><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>ã€åŸæ–‡ã€‘</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    MapReduce is a programming model and an associated implementation for processing and generating large data sets. Users specify a map function that processes a key/value pair to generate a set of intermediate key/value pairs, and a reduce function that merges all intermediate values associated with the same intermediate key. Many real world tasks are expressible in this model, as shown in the paper.    Programs written in this functional style are automatically parallelized and executed on a large cluster of commodity machines. The run-time system takes care of the details of partitioning the input data, scheduling the programâ€™s execution across a set of machines, handling machine failures, and managing the required inter-machine communication. This allows programmers without any experience with parallel and distributed systems to easily utilize the resources of a large distributed system.    Our implementation of MapReduce runs on a large cluster of commodity machines and is highly scalable: a typical MapReduce computation processes many terabytes of data on thousands of machines. Programmers find the system easy to use: hundreds of MapReduce programs have been implemented and upwards of one thousand MapReduce jobs are executed on Googleâ€™s clusters every day.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ã€è¯‘æ–‡ã€‘</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    MapReduceæ˜¯ç”¨äºå¤„ç†å’Œç”Ÿæˆå¤§æ•°æ®é›†çš„ç¼–ç¨‹æ¨¡å‹ï¼ˆç›¸å…³çš„å®ç°ï¼‰ã€‚ ç”¨æˆ·æŒ‡å®škey\valueå¯¹ä»¥ç”Ÿæˆä¸€ç»„ä¸­é—´key\valueå¯¹çš„mapå‡½æ•°ï¼Œä»¥åŠæŒ‡å®šå½’çº³ä¸åŒä¸€ä¸­é—´key\valueå…³è”çš„æ‰€æœ‰ä¸­é—´key\valueçš„reduceå‡½æ•°ã€‚ å¦‚æœ¬æ–‡æ‰€ç¤ºï¼Œè®¸å¤šç°å®ä¸–ç•Œçš„ä»»åŠ¡åœ¨è¿™ç§æ¨¡å‹ä¸­éƒ½æ˜¯å¯ä»¥è¡¨è¾¾çš„ã€‚    ç”¨è¿™ç§å‡½æ•°å¼ç¼–å†™çš„ç¨‹åºä¼šè‡ªåŠ¨å¹¶è¡ŒåŒ–ï¼Œå¹¶åœ¨å¤§å‹è®¡ç®—æœºé›†ç¾¤ä¸Šæ‰§è¡Œã€‚è¿è¡Œæ—¶ç³»ç»Ÿè´Ÿè´£å¯¹è¾“å…¥æ•°æ®è¿›è¡Œåˆ†åŒºã€å®‰æ’è·¨æœºå™¨çš„ç¨‹åºæ‰§è¡Œã€å¤„ç†æœºå™¨æ•…éšœå’Œç®¡ç†æ‰€éœ€çš„æœºå™¨é—´é€šä¿¡ç­‰ç»†èŠ‚ã€‚è¿™ä½¿å¾—æ²¡æœ‰ä»»ä½•å¹¶è¡Œå’Œåˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒçš„ç¨‹åºå‘˜å¯ä»¥è½»æ¾åœ°åˆ©ç”¨å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„èµ„æºã€‚    æˆ‘ä»¬çš„MapReduceå®ç°è¿è¡Œåœ¨å¤§é‡çš„æ™®é€šæœºå™¨ä¸Šï¼Œå¹¶ä¸”å…·æœ‰é«˜åº¦çš„å¯ä¼¸ç¼©æ€§:å…¸å‹çš„MapReduceè®¡ç®—åœ¨æ•°åƒå°æœºå™¨ä¸Šå¤„ç†è®¸å¤šTBçº§çš„æ•°æ®ã€‚ç¨‹åºå‘˜å‘ç°è¿™ä¸ªç³»ç»Ÿå¾ˆå®¹æ˜“ä½¿ç”¨:å·²ç»å®ç°äº†æ•°ç™¾ä¸ªMapReduceç¨‹åºï¼Œæ¯å¤©åœ¨è°·æ­Œé›†ç¾¤ä¸Šæ‰§è¡Œçš„MapReduceä»»åŠ¡éƒ½è¶…è¿‡1000ä¸ªã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ã€é‡ç‚¹ã€‘</p><ul><li>MapReduceæ˜¯ç”¨äºå¤„ç†å’Œç”Ÿæˆå¤§æ•°æ®é›†çš„ç¼–ç¨‹æ¨¡å‹ï¼ˆç›¸å…³çš„å®ç°ï¼‰</li><li>åŒ…å«mapå‡½æ•°å’Œreduceå‡½æ•°ï¼Œä½¿ç”¨key\valueå¯¹</li><li>é«˜åº¦çš„å¯ä¼¸ç¼©æ€§</li></ul><h2 id="1ã€Introduction"><a href="#1ã€Introduction" class="headerlink" title="1ã€Introduction"></a>1ã€Introduction</h2><p>ã€åŸæ–‡ã€‘</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    Over the past five years, the authors and many others at Google have implemented hundreds of special-purpose computations that process large amounts of raw data, such as crawled documents, web request logs, etc., to compute various kinds of derived data, such as inverted indices, various representations of the graph structure of web documents, summaries of the number of pages crawled per host, the set of most frequent queries in a given day, etc. Most such computations are conceptually straightforward. However, the input data is usually large and the computations have to be distributed across hundreds or thousands of machines in order to finish in a reasonable amount of time. The issues of how to parallelize the computation, distribute the data, and handle failures conspire to obscure the original simple computation with large amounts of complex code to deal with these issues.    As a reaction to this complexity, we designed a new abstraction that allows us to express the simple computations we were trying to perform but hides the messy details of parallelization, fault-tolerance, data distribution and load balancing in a library. Our abstraction is inspired by the map and reduce primitives present in Lisp and many other functional languages. We realized that most of our computations involved applying a map operation to each logical â€œrecordâ€ in our input in order to compute a set of intermediate key/value pairs, and then applying a reduce operation to all the values that shared the same key, in order to combine the derived data appropriately. Our use of a functional model with userspecified map and reduce operations allows us to parallelize large computations easily and to use re-execution as the primary mechanism for fault tolerance.    The major contributions of this work are a simple and powerful interface that enables automatic parallelization and distribution of large-scale computations, combined with an implementation of this interface that achieves high performance on large clusters of commodity PCs.    Section 2 describes the basic programming model and gives several examples. Section 3 describes an implementation of the MapReduce interface tailored towards our cluster-based computing environment. Section 4 describes several refinements of the programming model that we have found useful. Section 5 has performance measurements of our implementation for a variety of tasks. Section 6 explores the use of MapReduce within Google including our experiences in using it as the basis for a rewrite of our production indexing system. Section 7 discusses related and future work.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ã€è¯‘æ–‡ã€‘</p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">    åœ¨è¿‡å»çš„äº”å¹´ä¸­ï¼ŒGoogleçš„ä½œè€…å’Œè®¸å¤šå…¶ä»–äººå·²ç»å®ç°äº†æ•°ç™¾ç§ç‰¹æ®Šç”¨é€”çš„è®¡ç®—ï¼Œè¿™äº›è®¡ç®—å¤„ç†å¤§é‡çš„åŸå§‹æ•°æ®ï¼ˆä¾‹å¦‚æŠ“å–çš„æ–‡æ¡£ï¼ŒWebè¯·æ±‚æ—¥å¿—ç­‰ï¼‰ï¼Œä»¥è®¡ç®—å„ç§æ´¾ç”Ÿæ•°æ®ï¼Œä¾‹å¦‚ï¼šä½œä¸ºåå‘ç´¢å¼•ï¼ŒWebæ–‡æ¡£çš„å›¾å½¢ç»“æ„çš„å„ç§è¡¨ç¤ºå½¢å¼ï¼Œæ¯ä¸ªä¸»æœºçˆ¬å–çš„ç½‘é¡µæ‘˜è¦ï¼Œç»™å®šä¸€å¤©ä¸­æœ€é¢‘ç¹çš„æŸ¥è¯¢é›†ç­‰ã€‚å¤§å¤šæ•°æ­¤ç±»è®¡ç®—åœ¨æ¦‚å¿µä¸Šéƒ½å¾ˆç®€å•ã€‚ ä½†æ˜¯ï¼Œè¾“å…¥æ•°æ®é€šå¸¸å¾ˆå¤§ï¼Œå¹¶ä¸”å¿…é¡»åœ¨æ•°ç™¾æˆ–æ•°åƒå°è®¡ç®—æœºä¸Šåˆ†å¸ƒè®¡ç®—ï¼Œæ‰èƒ½åœ¨åˆç†çš„æ—¶é—´å†…å®Œæˆè®¡ç®—ã€‚ å¦‚ä½•å¹¶è¡ŒåŒ–è®¡ç®—ï¼Œåˆ†é…æ•°æ®å’Œå¤„ç†æ•…éšœçš„é—®é¢˜ï¼Œç”¨å¤§é‡å¤æ‚çš„ä»£ç æ¥å¤„ç†è¿™äº›é—®é¢˜ï¼Œä½¿åŸæ¥ç®€å•çš„è®¡ç®—å˜å¾—æ¨¡ç³Šä¸æ¸…ã€‚    ä¸ºäº†åº”å¯¹è¿™ç§å¤æ‚æ€§ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªæ–°çš„æŠ½è±¡ï¼Œè¯¥æŠ½è±¡ä½¿æˆ‘ä»¬èƒ½å¤Ÿè¡¨è¾¾æˆ‘ä»¬è¯•å›¾æ‰§è¡Œçš„ç®€å•è®¡ç®—ï¼Œä½†åœ¨åº“ä¸­éšè—äº†å¹¶è¡ŒåŒ–ï¼Œå®¹é”™ï¼Œæ•°æ®åˆ†å‘å’Œè´Ÿè½½å¹³è¡¡çš„æ··ä¹±ç»†èŠ‚ã€‚ Lispå’Œè®¸å¤šå…¶ä»–åŠŸèƒ½è¯­è¨€ä¸­çš„mapå’ŒreduceåŸè¯­å¯å‘äº†æˆ‘ä»¬çš„æŠ½è±¡ã€‚ æˆ‘ä»¬æ„è¯†åˆ°ï¼Œå¤§å¤šæ•°è®¡ç®—éƒ½æ¶‰åŠå¯¹è¾“å…¥ä¸­çš„æ¯ä¸ªé€»è¾‘â€œè®°å½•â€åº”ç”¨æ˜ å°„æ“ä½œï¼Œä»¥ä¾¿è®¡ç®—ä¸€ç»„key/valueé”®/å€¼å¯¹ï¼Œç„¶åå¯¹å…±äº«åŒä¸€keyçš„æ‰€æœ‰å€¼åº”ç”¨å½’çº¦æ“ä½œï¼Œé€‚å½“åœ°ç»„åˆå¾—å‡ºçš„æ•°æ®ã€‚æˆ‘ä»¬ä½¿ç”¨å…·æœ‰ç”¨æˆ·æŒ‡å®šçš„æ˜ å°„å’Œå½’çº¦è¿ç®—çš„åŠŸèƒ½æ¨¡å‹ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾åœ°å¹¶è¡Œè¿›è¡Œå¤§å‹è®¡ç®—ï¼Œå¹¶å°†é‡æ–°æ‰§è¡Œç”¨ä½œå®¹é”™çš„ä¸»è¦æœºåˆ¶ã€‚    è¿™é¡¹å·¥ä½œçš„ä¸»è¦è´¡çŒ®æ˜¯ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„ç•Œé¢ï¼Œè¯¥ç•Œé¢å¯å®ç°å¤§è§„æ¨¡è®¡ç®—çš„è‡ªåŠ¨å¹¶è¡ŒåŒ–å’Œåˆ†é…ï¼Œå¹¶ç»“åˆäº†è¯¥ç•Œé¢çš„å®ç°ï¼Œå¯åœ¨å¤§å‹å•†ç”¨PCé›†ç¾¤ä¸Šå®ç°é«˜æ€§èƒ½ã€‚    ç¬¬2èŠ‚æè¿°äº†åŸºæœ¬çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¹¶ç»™å‡ºäº†ä¸€äº›ç¤ºä¾‹ã€‚ ç¬¬3èŠ‚ä»‹ç»äº†é’ˆå¯¹æˆ‘ä»¬åŸºäºé›†ç¾¤çš„è®¡ç®—ç¯å¢ƒé‡èº«å®šåˆ¶çš„MapReduceæ¥å£çš„å®ç°ã€‚ ç¬¬4èŠ‚æè¿°äº†ä¸€äº›æœ‰ç”¨çš„ç¼–ç¨‹æ¨¡å‹æ”¹è¿›ã€‚ ç¬¬5èŠ‚å¯¹æˆ‘ä»¬æ‰§è¡Œå„ç§ä»»åŠ¡çš„æ€§èƒ½è¿›è¡Œäº†åº¦é‡ã€‚ ç¬¬6èŠ‚æ¢è®¨äº†MapReduceåœ¨Googleä¸­çš„ç”¨æ³•ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä½¿ç”¨å®ƒä½œä¸ºé‡å†™ç”Ÿäº§ç´¢å¼•ç³»ç»ŸåŸºç¡€çš„ç»éªŒã€‚ ç¬¬7èŠ‚è®¨è®ºç›¸å…³å’Œæœªæ¥çš„å·¥ä½œã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="MRçš„Javaå®ç°"><a href="#MRçš„Javaå®ç°" class="headerlink" title="MRçš„Javaå®ç°"></a>MRçš„Javaå®ç°</h1><h2 id="friendRecommendDriver-java"><a href="#friendRecommendDriver-java" class="headerlink" title="friendRecommendDriver.java"></a>friendRecommendDriver.java</h2><pre class="line-numbers language-lang-java"><code class="language-lang-java">package friendrecommend;import utils.HDFSUtils;import org.apache.hadoop.conf.Configured;import org.apache.hadoop.fs.*;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import org.apache.hadoop.util.Tool;import org.apache.hadoop.util.ToolRunner;import org.slf4j.Logger;import org.slf4j.LoggerFactory;/** * Author:  * Email:  * Date: 2020/9/14 * Desc: å¥½å‹æ¨èï¼Œè®¡ç®—ä¸¤ä¸¤ç”¨æˆ·çš„å¥½å‹æ¨èå¾—åˆ†ï¼Œå¾—åˆ†è¶Šé«˜è¶Šå€¼å¾—æ¨è */public class FriendRecommendDriver extends Configured implements Tool {    //ä¸€äº›å˜é‡    private static final Logger LOG = LoggerFactory.getLogger(FriendRecommendDriver.class);  //Return a logger named corresponding to the class passed as parameter, using the statically bound ILoggerFactory instance.    //ä¸€äº›ä¿¡æ¯    private static final String JOB_NAME_PREFIX = "friend_recommend1";  //é¡¹ç›®è‡ªå®šä¹‰å    //ä¸€äº›è·¯å¾„    private static String INPUT_PATH = "";  //è¾“å…¥æ–‡ä»¶è·¯å¾„    private static String OUTPUT_PATH = "";  // è¾“å‡ºè·¯å¾„    // mrè¿è¡Œå‡½æ•°    @Override    public int run(String[] strings) throws Exception {        //åˆ é™¤è¾“å‡ºè·¯å¾„        HDFSUtils.deleteFile(OUTPUT_PATH);        //jobé…ç½®        Job FriendRecommendJob = Job.getInstance();  //Creates a new Job with no particular Cluster . A Cluster will be created with a generic Configuration.        FriendRecommendJob.setJarByClass(FriendRecommendDriver.class);  //Set the Jar by finding where a given class came from.        FriendRecommendJob.setJobName(JOB_NAME_PREFIX);  //Set the user-specified job name.        FileInputFormat.addInputPath(FriendRecommendJob, new Path(INPUT_PATH));  //Add a Path to the list of inputs for the map-reduce job.        FileOutputFormat.setOutputPath(FriendRecommendJob, new Path(OUTPUT_PATH));  //Set the Path of the output directory for the map-reduce job.        FriendRecommendJob.setMapperClass(FriendRecommendMapper.class);  //Set the Mapper for the job.        FriendRecommendJob.setReducerClass(FriendRecommendReducer.class);  //Set the Reducer for the job.        FriendRecommendJob.setNumReduceTasks(300);  //todo 1 Set the number of reduce tasks for the job.        //FriendRecommendJob.setInputFormatClass(SequenceFileInputFormat.class);  //Set the InputFormat for the job.        FriendRecommendJob.setMapOutputKeyClass(Text.class);  //Set the key class for the map output data. This allows the user to specify the map output key class to be different than the final output value class.        FriendRecommendJob.setMapOutputValueClass(Text.class);  //Set the value class for the map output data. This allows the user to specify the map output value class to be different than the final output value class.        FriendRecommendJob.setOutputKeyClass(Text.class);  //Set the key class for the job output data.        FriendRecommendJob.setOutputValueClass(Text.class);  //Set the value class for job outputs.        FriendRecommendJob.getConfiguration().set("INPUT_PATH", INPUT_PATH);        //Submit the job to the cluster and wait for it to finish.        if (!FriendRecommendJob.waitForCompletion(true)) {            return 1;        }        return 0;    }    //mainå‡½æ•°    public static void main(String[] args) throws Exception {        //å¯åŠ¨        long start = System.currentTimeMillis();        //åˆ¤æ–­è¾“å…¥å‚æ•°æ˜¯å¦åˆè§„        if (args.length != 2) {            System.err.println("Usage: friend_recommend <input path> <output path>");            System.exit(-1);        }        //è¯»å–è¾“å…¥å‚æ•°        INPUT_PATH = args[0];        OUTPUT_PATH = args[1];        LOG.info("Begin to calc {}", JOB_NAME_PREFIX);        LOG.info("inputFile:{}, outputPath:{}", INPUT_PATH, OUTPUT_PATH);        //å¼€å§‹è·‘MR        ToolRunner.run(new FriendRecommendDriver(), args);        //å®Œæˆå¹¶æ‰“å°æ—¶é—´        long finish = System.currentTimeMillis();        System.out.println("Time in ms: " + (finish - start));    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="friendRecommendMapper-java"><a href="#friendRecommendMapper-java" class="headerlink" title="friendRecommendMapper.java"></a>friendRecommendMapper.java</h2><pre class="line-numbers language-lang-java"><code class="language-lang-java">package friendrecommend;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Mapper;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import java.io.IOException;/** * Author:  * Email:  * Date: 2020/9/14 * Desc: */public class FriendRecommendMapper extends Mapper<LongWritable, Text, Text, Text> {    private final Logger LOG = LoggerFactory.getLogger(FriendRecommendMapper.class);    //åˆ†éš”ç¬¦    private static final String TAB_SEP = "\t";    @Override    protected void setup(Context context) {        //åœ¨mapperå¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡        LOG.info("setup mapper...");    }    @Override    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {        // æ¯ä¸ªmapperçš„ä¸»é€»è¾‘        //è¯»å–æ•°æ®        String[] contents = value.toString().trim().split(TAB_SEP, 2);        //è§£ææ¯è¡Œ        String udid = contents[0];        String other_format = contents[1];        context.write(new Text(udid), new Text(other_format));    }    @Override    protected void cleanup(Context context) {        //åœ¨mapperç»“æŸæ—¶æ‰§è¡Œä¸€æ¬¡    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="friendRecommendReducer-java"><a href="#friendRecommendReducer-java" class="headerlink" title="friendRecommendReducer.java"></a>friendRecommendReducer.java</h2><pre class="line-numbers language-lang-java"><code class="language-lang-java">package friendrecommend;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Reducer;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import java.io.IOException;import java.util.*;/** * Author:  * Email:  * Date: 2020/9/14 * Desc: reduceræ¯ç±»åªè¾“å‡ºåˆ†æ•°é å‰çš„100ä¸ª */public class FriendRecommendReducer extends Reducer<Text, Text, Text, Text> {    private final Logger LOG = LoggerFactory.getLogger(FriendRecommendReducer.class);    //åˆ†éš”ç¬¦    private static final String TAB_SEP = "\t";    private static final String COMMA_SEP = ",";    private static final int output_limit = 100;    private static Map<String, String> udid_format_Map = new HashMap<>();    @Override    protected void setup(Context context) {        //åœ¨reducerå¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡        LOG.info("setup reducer...");        //ä¸€äº›å˜é‡        String udid_format_file_path = context.getConfiguration().get("INPUT_PATH");        udid_format_Map = FriendRecommendUtils.load_udid_format(udid_format_file_path);    }    @Override    protected void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {        //reduceä¸»é€»è¾‘        //ä¸€äº›å˜é‡        //å¤„ç†        for (Text value : values) {            //è§£æ            String[] contents1 = value.toString().replace("~", "\"").split(TAB_SEP);            String udid1 = key.toString();            //åˆ¤æ–­æ˜¯å¦æ˜¯-2            if (contents1[1].equals("-2")){                contents1[1] = "{}";            }            if (contents1[3].equals("-2")){                contents1[3] = "{}";            }            //formatè§£æ            //String role_id1 = contents1[0];            JSONObject social_format1 = JSON.parseObject(contents1[1]);            String label_format1 = contents1[2];            JSONObject game_format1 = JSON.parseObject(contents1[3]);            String friend_format1 = contents1[4];            //ç¤¾äº¤å±æ€§è§£æ            //Double board1 = social_format1.getDoubleValue("board");  //å‘åšç‚¹èµè¯„è®ºæ¬¡æ•°            double chat1 = social_format1.getDoubleValue("chat");  //ç¤¾äº¤äººæ•°            double follow1 = social_format1.getDoubleValue("follow");  //ä¸»åŠ¨æ·»åŠ å¥½å‹æ¬¡æ•°            double follow_room1 = social_format1.getDoubleValue("followRoom");  //è·Ÿæˆ¿äººæ•°            //double enter1 = social_format1.getDoubleValue("enter");  //è¿›å…¥æˆ¿é—´é€”å¾„â€”â€”æŒ‡å®šfollow_room            double gift1 = social_format1.getDoubleValue("gift");  //ä¸»åŠ¨é€ç¤¼äººæ•°            String sex1 = social_format1.getString("sex");  //æ€§åˆ«            //æ¸¸æˆè¡Œä¸ºè§£æ            String cash1 = game_format1.getString("cash");  // ç´¯è®¡å……å€¼é¢            String level1 = game_format1.getString("level");  //ç­‰çº§            String hour_label1 = game_format1.getString("hour_label");  //åœ¨çº¿æ—¶ç‚¹å‡ºç°æ¬¡æ•°            String age1 = game_format1.getString("age");  //å¹´é¾„            String sect1 = game_format1.getString("sect");  //é—¨æ´¾            //String master1 = game_format1.getString("master");  //å¤§å¸ˆåœºæ¯”ä¾‹            String room_label1 = game_format1.getString("room_label");  //room_modeå‚ä¸æ¬¡æ•°            String log_lat1 = game_format1.getString("log_lat");  //ç»çº¬åº¦            //ä¸€äº›å­—æ®µåˆå§‹åŒ–            Map<String, Double> score_Map = new HashMap<>();  //å¾—åˆ†map            int count1 = 0;            int count2 = 0;            int count3 = 0;            int count4 = 0;            Map<String, String> category1 = new HashMap<>();  //å„ç±»åˆ«è®¡æ•°            Map<String, String> category2 = new HashMap<>();            Map<String, String> category3 = new HashMap<>();            Map<String, String> category4 = new HashMap<>();            //ç¤¾äº¤æ´»è·ƒåº¦å¾—åˆ†            //æ—¥å‡ç§èŠäººæ•°            double score_chat = FriendRecommendUtils.calc_score_chat(chat1);            score_Map.put("chat", score_chat);            //æ—¥å‡å¼€å±€äººæ•°            double score_begin = FriendRecommendUtils.calc_score_begin(follow_room1);            score_Map.put("begin", score_begin);            //æ—¥å‡é€ç¤¼äººæ•°            double score_gift = FriendRecommendUtils.calc_score_gift(gift1);            score_Map.put("gift", score_gift);            //å¼€å§‹å¾ªç¯            for (Map.Entry<String, String> entry : udid_format_Map.entrySet()) {                //åŒä¸€ä¸ªäººä¸è®¡ç®—                String udid2 = entry.getKey();                if (udid1.equals(udid2)){                    continue;                }                //è§£æ                String[] contents2 = entry.getValue().replace("~", "\"").split(TAB_SEP);                //åˆ¤æ–­æ˜¯å¦æ˜¯-2                if (contents2[1].equals("-2")){                    contents2[1] = "{}";                }                if (contents2[3].equals("-2")){                    contents2[3] = "{}";                }                //formatè§£æ                String role_id2 = contents2[0];                JSONObject social_format2 = JSON.parseObject(contents2[1]);                String label_format2 = contents2[2];                JSONObject game_format2 = JSON.parseObject(contents2[3]);                String friend_format2 = contents2[4];                //ç¤¾äº¤å±æ€§è§£æ                //Double board2 = social_format2.getDoubleValue("board");  //å‘åšç‚¹èµè¯„è®ºæ¬¡æ•°                //double chat2 = social_format2.getDoubleValue("chat");  //ç¤¾äº¤äººæ•°                double follow2 = social_format2.getDoubleValue("follow");  //ä¸»åŠ¨æ·»åŠ å¥½å‹æ¬¡æ•°                //Double follow_room2 = social_format2.getDoubleValue("followRoom");  //è·Ÿæˆ¿äººæ•°                //double enter2 = social_format2.getDoubleValue("enter");  //è¿›å…¥æˆ¿é—´é€”å¾„â€”â€”æŒ‡å®šfollow_room                double gift2 = social_format2.getDoubleValue("gift");  //ä¸»åŠ¨é€ç¤¼äººæ•°                String sex2 = social_format2.getString("sex");  //æ€§åˆ«                //æ¸¸æˆè¡Œä¸ºè§£æ                String cash2 = game_format2.getString("cash");  // ç´¯è®¡å……å€¼é¢                String level2 = game_format2.getString("level");  //ç­‰çº§                String hour_label2 = game_format2.getString("hour_label");  //åœ¨çº¿æ—¶ç‚¹å‡ºç°æ¬¡æ•°                String age2 = game_format2.getString("age");  //å¹´é¾„                String sect2 = game_format2.getString("sect");  //é—¨æ´¾                //String master2 = game_format2.getString("master");  //å¤§å¸ˆåœºæ¯”ä¾‹                String room_label2 = game_format2.getString("room_label");  //room_modeå‚ä¸æ¬¡æ•°                String log_lat2 = game_format2.getString("log_lat");  //ç»çº¬åº¦                //åˆ¤æ–­ä»–ä¿©æ˜¯ä¸æ˜¯å¥½å‹ï¼Œæ˜¯å¥½å‹åˆ™ä¸å†è®¡ç®—                String flag = "0";                if (!role_id2.equals("-2") && !friend_format1.equals("[]")){                    for (String s:role_id2.split(COMMA_SEP)){                        if (friend_format1.contains(s)){                            flag = "1";                            break;                        }                    }                }                if (flag.equals("1")){                    //System.out.println("friends");                    continue;                }                //äº’è¡¥æ€§å¾—åˆ†                //ä¸»åŠ¨æ·»åŠ å¥½å‹æ•°                double score_follow = FriendRecommendUtils.calc_score_follow_friend(follow1, follow2);                score_Map.put("follow", score_follow);                //ä¸»åŠ¨é€ç¤¼æ¬¡æ•°                double score_give_gift = FriendRecommendUtils.calc_score_give_gift(gift1, gift2);                score_Map.put("gift2", score_give_gift);                //æ€§åˆ«æ˜¯å¦ç›¸åŒ                double score_sex = FriendRecommendUtils.calc_score_sex(sex1, sex2);                score_Map.put("sex", score_sex);                //åŒ¹é…åº¦å¾—åˆ†                //å…´è¶£çˆ±å¥½                //å…´è¶£æ ‡ç­¾äº¤é›†                double score_label = FriendRecommendUtils.calc_score_label(label_format1, label_format2);                score_Map.put("label", score_label);                //score_Map.put("label_weibo", score_label_weibo);                //æ¸¸æˆè¡Œä¸º                //ç­‰çº§                double score_level = FriendRecommendUtils.calc_score_level(level1, level2);                score_Map.put("level", score_level);                //åœ¨çº¿æ—¶ç‚¹é‡åˆåº¦                double score_hour = FriendRecommendUtils.calc_score_hour(hour_label1, hour_label2);                score_Map.put("hour", score_hour);                //é—¨æ´¾                double score_sect = FriendRecommendUtils.calc_score_sect(sect1, sect2);                score_Map.put("sect", score_sect);                //å†å²ç´¯è®¡å……å€¼é¢                double score_cash = FriendRecommendUtils.calc_score_cash(cash1, cash2);                score_Map.put("cash", score_cash);                //å¤§å¸ˆåœºå æ¯”                //double score_master = FriendRecommendUtils.calc_score_master(master1, master2);                //score_Map.put("master", score_master);                //å‚ä¸room_modeé‡åˆåº¦                double score_room = FriendRecommendUtils.calc_score_room(room_label1, room_label2);                score_Map.put("room", score_room);                //å¹´é¾„                double score_age = FriendRecommendUtils.calc_score_age(age1, age2);                score_Map.put("age", score_age);                //lbs                double score_lbs = FriendRecommendUtils.calc_score_lbs(log_lat1, log_lat2);                score_Map.put("lbs", score_lbs);                //å¥½å‹é“¾æ¡è·ç¦»                double score_friend = FriendRecommendUtils.calc_score_friend_distance(friend_format1, friend_format2);                score_Map.put("friend", score_friend);                //æ‰“ä¸Šæ ‡ç­¾                String label = FriendRecommendUtils.get_label(score_chat, score_begin, score_gift, score_follow,                        score_give_gift, score_sex, score_level, score_sect, score_cash, score_label,                        score_age, score_lbs, score_hour, score_room);                //å¾—åˆ†æ±‚å’Œ                double score_sum = FriendRecommendUtils.get_score_sum(score_Map);                //ä¸€äº›å­—æ®µ                String key_ = udid1 + TAB_SEP + udid2;                String value_ = score_sum + TAB_SEP + label + TAB_SEP + score_Map;                //åˆ¤æ–­æ˜¯å±äºå“ªç±»                switch (label.split(COMMA_SEP, 2)[0]) {                    case "1":                        count1 ++;                        FriendRecommendUtils.get_category(count1, output_limit, category1, key_, value_, score_sum);                        break;                    case "2":                        count2 ++;                        FriendRecommendUtils.get_category(count2, output_limit, category2, key_, value_, score_sum);                        break;                    case "3":                        count3 ++;                        FriendRecommendUtils.get_category(count3, output_limit, category3, key_, value_, score_sum);                        break;                    default:                        count4 ++;                        FriendRecommendUtils.get_category(count4, output_limit, category4, key_, value_, score_sum);                        break;                }            }            //è¾“å‡º            for (Map.Entry<String, String> tmp:category1.entrySet()){                context.write(new Text(tmp.getKey()), new Text(tmp.getValue()));            }            for (Map.Entry<String, String> tmp:category2.entrySet()){                context.write(new Text(tmp.getKey()), new Text(tmp.getValue()));            }            for (Map.Entry<String, String> tmp:category3.entrySet()){                context.write(new Text(tmp.getKey()), new Text(tmp.getValue()));            }            for (Map.Entry<String, String> tmp:category4.entrySet()){                context.write(new Text(tmp.getKey()), new Text(tmp.getValue()));            }            //context.write(key, value);        }    }    @Override    protected void cleanup(Context context) {    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="friendRecommendUtils-java"><a href="#friendRecommendUtils-java" class="headerlink" title="friendRecommendUtils.java"></a>friendRecommendUtils.java</h2><pre class="line-numbers language-lang-java"><code class="language-lang-java">package friendrecommend;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import utils.HDFSUtils;import utils.LBSUtils;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.FSDataInputStream;import org.apache.hadoop.fs.FileSystem;import org.apache.hadoop.fs.Path;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import java.io.BufferedReader;import java.io.InputStreamReader;import java.net.URI;import java.nio.charset.StandardCharsets;import java.util.*;/** * Author:  * Email:  * Date: 2020/9/16 * Desc: æ”¯æŒå‡½æ•° */public class FriendRecommendUtils {    private static final Logger LOG = LoggerFactory.getLogger(FriendRecommendUtils.class);    private static final Map<String, String> udid_format_Map = new HashMap<>();    private static final String TAB_SEP = "\t";    private static final String COMMA_SEP = ",";    public static Map<String, String> load_udid_format(String filePath) {        LOG.info("begin to load udid format");        Configuration conf = new Configuration();        try {            FileSystem fs = FileSystem.get(URI.create(filePath), conf);            List<String> list = HDFSUtils.getAllHdfsFile(filePath);            for (String dsf : list) {                LOG.debug(dsf);                FSDataInputStream hdfsInStream = fs.open(new Path(dsf));                String line;                BufferedReader in = new BufferedReader(new InputStreamReader(hdfsInStream, StandardCharsets.UTF_8));                while ((line = in.readLine()) != null) {                    String[] contents = line.trim().split(TAB_SEP, 2);                    //è§£ææ¯è¡Œ                    String udid = contents[0];                    String other_format = contents[1];                    //è¾“å‡º                    udid_format_Map.put(udid, other_format);                }            }        } catch (Exception e) {            e.printStackTrace();        }        return udid_format_Map;    }    public static String[] intersect(String[] arr1, String[] arr2) {        Map<String, Boolean> map = new HashMap<>();        List<String> list = new ArrayList<>();        for (String str : arr1) {            if (!map.containsKey(str)) {                map.put(str, Boolean.FALSE);            }        }        for (String str : arr2) {            if (map.containsKey(str)) {                map.put(str, Boolean.TRUE);            }        }        for (Map.Entry<String, Boolean> e : map.entrySet()) {            if (e.getValue().equals(Boolean.TRUE) && !e.getKey().equals("-2")) {                list.add(e.getKey());            }        }        String[] result = {};        return list.toArray(result);    }    public static void main(String[] args) {    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="HDFSUtils-java"><a href="#HDFSUtils-java" class="headerlink" title="HDFSUtils.java"></a>HDFSUtils.java</h2><pre class="line-numbers language-lang-java"><code class="language-lang-java">package utils;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.*;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import java.io.IOException;import java.net.URI;import java.util.ArrayList;import java.util.List;import java.util.Set;/** * AUTHOR: LUJINHONG * CREATED ON: 17/1/9 17:24 * PROJECT NAME: etl_hadoop_aplus * DESCRIPTION: */public class HDFSUtils {    private static Logger LOG = LoggerFactory.getLogger(HDFSUtils.class);    public static List<String> getFileNameList(String dir) throws IOException {        List<String> list = new ArrayList<>();        Configuration conf = new Configuration();        FileSystem fs = FileSystem.get(conf);        FileStatus[] stats = fs.listStatus(new Path(dir));        for (int i = 0; i < stats.length; ++i) {            if (!stats[i].isDirectory()) {                // regular file                list.add(stats[i].getPath().toString());                //LOG.debug("Load file : {}", stats[i].getPath().toString());            } else {                // dir                LOG.info("Ignore directory : {}", stats[i].getPath().toString());            }        }        fs.close();        return list;    }    /**     * é€’å½’åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ï¼Œæˆ–è€…å…¶é›†åˆ     * @param fileNameSet     */    public static void  deleteFile(Set<String> fileNameSet){        //å¤šæ¬¡æ„å»ºFileSystemå¯¹è±¡ï¼Œå¦‚æœè°ƒç”¨å¾ˆé¢‘ç¹çš„è¯è€ƒè™‘ç”¨å•ä¾‹ã€‚        for(String fileName : fileNameSet){            deleteFile(fileName);        }    }    public static void  deleteFile(String fileName){        try(FileSystem fs = FileSystem.get(URI.create(fileName),new Configuration())){            if(fs.exists(new Path(fileName))){                fs.delete(new Path(fileName),true);                LOG.info("{} deleted.",fileName);            }        }catch (IOException e){            LOG.info("Error happens when deleting file: {}.", fileName);            e.printStackTrace();        }    }    //é€’å½’åˆ—å‡ºç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚    public static List<String> getAllHdfsFile(String dir) throws IOException {        List<String> fileList = new ArrayList<>();        Configuration conf = new Configuration();        FileSystem fs = FileSystem.get(URI.create(dir), conf);        RemoteIterator<LocatedFileStatus> iterator = fs.listFiles(                new Path(dir), true);        while (iterator.hasNext()) {            LocatedFileStatus fileStatus = iterator.next();            fileList.add(fileStatus.getPath().toString());        }        return fileList;    }    /**     * æ–‡ä»¶æ£€æµ‹å¹¶åˆ é™¤     *     * @param path     * @param conf     * @return     */    public static boolean checkAndDel(final String path, Configuration conf) {        Path dstPath = new Path(path);        try {            FileSystem fs = dstPath.getFileSystem(conf);            if (fs.exists(dstPath)) {                fs.delete(dstPath, true);            } else {                return false;            }        } catch (IOException ie) {            ie.printStackTrace();            return false;        }        return true;    }    public boolean checkHdfsFiledir(final String path, Configuration conf) {        Path dstPath = new Path(path);        try {            FileSystem dhfs = dstPath.getFileSystem(conf);            if (dhfs.exists(dstPath)) {                return true;            } else {                return false;            }        } catch (IOException ie) {            ie.printStackTrace();            return false;        }    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MapReduce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹flask</title>
      <link href="/2020/05/18/shi-yong-gong-ju-zhi-flask/"/>
      <url>/2020/05/18/shi-yong-gong-ju-zhi-flask/</url>
      
        <content type="html"><![CDATA[<h1 id="flaskåŸºç¡€"><a href="#flaskåŸºç¡€" class="headerlink" title="flaskåŸºç¡€"></a>flaskåŸºç¡€</h1><h1 id="flaskè¿›é˜¶"><a href="#flaskè¿›é˜¶" class="headerlink" title="flaskè¿›é˜¶"></a>flaskè¿›é˜¶</h1><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="https://www.w3cschool.cn/flask/" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></li><li><a href="https://www.yiibai.com/flask" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥2</a>â€”â€”æ¯”è¾ƒé è°±</li></ol><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flask </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯»ä¹¦ç¬”è®°ä¹‹é‡‘å­—å¡”åŸç†</title>
      <link href="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/"/>
      <url>/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/</url>
      
        <content type="html"><![CDATA[<p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20210621161324696.png" alt="image-20210621161324696"></p><h1 id="ç¬¬ä¸€ç¯‡ï¼šè¡¨è¾¾çš„é€»è¾‘"><a href="#ç¬¬ä¸€ç¯‡ï¼šè¡¨è¾¾çš„é€»è¾‘" class="headerlink" title="ç¬¬ä¸€ç¯‡ï¼šè¡¨è¾¾çš„é€»è¾‘"></a>ç¬¬ä¸€ç¯‡ï¼šè¡¨è¾¾çš„é€»è¾‘</h1><ul><li>å£å¤´æ²Ÿé€šèƒ½åŠ›</li><li>åŸ¹è®­è®²è¯¾èƒ½åŠ›</li><li>æ¼”è®²èƒ½åŠ›</li><li>ä¹¦é¢æ²Ÿé€šèƒ½åŠ›</li><li>å†™ä½œèƒ½åŠ›</li></ul><h2 id="ç¬¬1ç« ï¼šä¸ºä»€ä¹ˆè¦ç”¨é‡‘å­—å¡”ç»“æ„"><a href="#ç¬¬1ç« ï¼šä¸ºä»€ä¹ˆè¦ç”¨é‡‘å­—å¡”ç»“æ„" class="headerlink" title="ç¬¬1ç« ï¼šä¸ºä»€ä¹ˆè¦ç”¨é‡‘å­—å¡”ç»“æ„"></a>ç¬¬1ç« ï¼šä¸ºä»€ä¹ˆè¦ç”¨é‡‘å­—å¡”ç»“æ„</h2><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg1.jpg" alt="ä¾‹å­1"></p><h3 id="äººç±»æ€ç»´çš„åŸºæœ¬è§„å¾‹"><a href="#äººç±»æ€ç»´çš„åŸºæœ¬è§„å¾‹" class="headerlink" title="äººç±»æ€ç»´çš„åŸºæœ¬è§„å¾‹"></a>äººç±»æ€ç»´çš„åŸºæœ¬è§„å¾‹</h3><ul><li>å¤§è„‘è‡ªåŠ¨å°†ä¿¡æ¯å½’çº³åˆ°é‡‘å­—å¡”ç»“æ„çš„å„ç»„ä¸­ï¼Œä»¥ä¾¿äºç†è§£å’Œè®°å¿†</li><li>é¢„å…ˆå½’çº³åˆ°é‡‘å­—å¡”ç»“æ„ä¸­çš„æ²Ÿé€šå†…å®¹ï¼Œéƒ½æ›´å®¹æ˜“è¢«äººç†è§£å’Œè®°å¿†</li><li>åº”è¯¥æœ‰æ„å°†æ²Ÿé€šå†…å®¹ç»„ç»‡æˆé‡‘å­—å¡”ç»“æ„ï¼ŒåŒ…æ‹¬å£å¤´å’Œä¹¦é¢è¡¨è¾¾</li><li>==å¤§è„‘çš„ä¸¤ä¸ªéœ€æ±‚â€”â€”åªæœ‰é‡‘å­—å¡”ç»“æ„æ»¡è¶³==<ul><li>ä¸€æ¬¡è®°å¿†ä¸è¶…è¿‡7ä¸ªæ€æƒ³ã€æ¦‚å¿µæˆ–é¡¹ç›®</li><li>è‡ªåŠ¨å¯»æ‰¾åˆ†ææ–‡ç« é€»è¾‘å…³ç³»</li></ul></li></ul><h2 id="ç¬¬2ç« ï¼šé‡‘å­—å¡”å†…éƒ¨ç»“æ„"><a href="#ç¬¬2ç« ï¼šé‡‘å­—å¡”å†…éƒ¨ç»“æ„" class="headerlink" title="ç¬¬2ç« ï¼šé‡‘å­—å¡”å†…éƒ¨ç»“æ„"></a>ç¬¬2ç« ï¼šé‡‘å­—å¡”å†…éƒ¨ç»“æ„</h2><h3 id="çºµå‘å…³ç³»"><a href="#çºµå‘å…³ç³»" class="headerlink" title="çºµå‘å…³ç³»"></a>çºµå‘å…³ç³»</h3><h3 id="æ¨ªå‘å…³ç³»"><a href="#æ¨ªå‘å…³ç³»" class="headerlink" title="æ¨ªå‘å…³ç³»"></a>æ¨ªå‘å…³ç³»</h3><p>$\beta$</p><h3 id="å•ä¸€æ€æƒ³ç»Ÿé¢†çš„é‡‘å­—å¡”ç»“æ„"><a href="#å•ä¸€æ€æƒ³ç»Ÿé¢†çš„é‡‘å­—å¡”ç»“æ„" class="headerlink" title="å•ä¸€æ€æƒ³ç»Ÿé¢†çš„é‡‘å­—å¡”ç»“æ„"></a>å•ä¸€æ€æƒ³ç»Ÿé¢†çš„é‡‘å­—å¡”ç»“æ„</h3><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg2.jpg" alt="ä¾‹å­2"></p><h2 id="ç¬¬3ç« ï¼šå¦‚ä½•æ„å»ºé‡‘å­—å¡”"><a href="#ç¬¬3ç« ï¼šå¦‚ä½•æ„å»ºé‡‘å­—å¡”" class="headerlink" title="ç¬¬3ç« ï¼šå¦‚ä½•æ„å»ºé‡‘å­—å¡”"></a>ç¬¬3ç« ï¼šå¦‚ä½•æ„å»ºé‡‘å­—å¡”</h2><h3 id="å½’ç±»åˆ†ç»„ï¼Œå°†æ€æƒ³ç»„ç»‡æˆé‡‘å­—å¡”"><a href="#å½’ç±»åˆ†ç»„ï¼Œå°†æ€æƒ³ç»„ç»‡æˆé‡‘å­—å¡”" class="headerlink" title="å½’ç±»åˆ†ç»„ï¼Œå°†æ€æƒ³ç»„ç»‡æˆé‡‘å­—å¡”"></a>å½’ç±»åˆ†ç»„ï¼Œå°†æ€æƒ³ç»„ç»‡æˆé‡‘å­—å¡”</h3><h3 id="è‡ªä¸Šè€Œä¸‹è¡¨è¾¾ï¼Œç»“è®ºå…ˆè¡Œ"><a href="#è‡ªä¸Šè€Œä¸‹è¡¨è¾¾ï¼Œç»“è®ºå…ˆè¡Œ" class="headerlink" title="è‡ªä¸Šè€Œä¸‹è¡¨è¾¾ï¼Œç»“è®ºå…ˆè¡Œ"></a>è‡ªä¸Šè€Œä¸‹è¡¨è¾¾ï¼Œç»“è®ºå…ˆè¡Œ</h3><h3 id="è‡ªä¸‹è€Œä¸Šæ€è€ƒï¼Œæ€»ç»“æ¦‚æ‹¬"><a href="#è‡ªä¸‹è€Œä¸Šæ€è€ƒï¼Œæ€»ç»“æ¦‚æ‹¬" class="headerlink" title="è‡ªä¸‹è€Œä¸Šæ€è€ƒï¼Œæ€»ç»“æ¦‚æ‹¬"></a>è‡ªä¸‹è€Œä¸Šæ€è€ƒï¼Œæ€»ç»“æ¦‚æ‹¬</h3><h3 id="åˆå­¦è€…æ³¨æ„äº‹é¡¹"><a href="#åˆå­¦è€…æ³¨æ„äº‹é¡¹" class="headerlink" title="åˆå­¦è€…æ³¨æ„äº‹é¡¹"></a>åˆå­¦è€…æ³¨æ„äº‹é¡¹</h3><h3 id="æ¢³ç†æ€æƒ³"><a href="#æ¢³ç†æ€æƒ³" class="headerlink" title="æ¢³ç†æ€æƒ³"></a>æ¢³ç†æ€æƒ³</h3><ul><li>ä¸è¦ä¸€åä¸‹æ¥å°±å¼€å§‹å°†æ€æƒ³å¾€é‡‘å­—å¡”ç»“æ„é‡Œé¢å¥—</li><li>è€Œæ˜¯åº”è¯¥å…ˆæ¢³ç†ä½ æƒ³è¦è¡¨è¾¾çš„æ€æƒ³</li><li>ä¸ºäº†å¸å¼•è¯»è€…çš„å…¨éƒ¨æ³¨æ„åŠ›ï¼Œä½ å¿…é¡»åœ¨åšå¥½å›ç­”é—®é¢˜çš„å‡†å¤‡ä¹‹å‰ï¼Œ==é¿å…å¼•èµ·è¯»è€…çš„ç–‘é—®==ï¼›ä¹Ÿå¿…é¡»åœ¨å¼•èµ·è¯»è€…ç–‘é—®ä¹‹å‰ï¼Œé¿å…å…ˆç»™å‡ºå¯¹è¯¥é—®é¢˜çš„ç­”æ¡ˆ</li></ul><h5 id="é‡‘å­—å¡”æ€æƒ³çš„å…³è”æ–¹å¼"><a href="#é‡‘å­—å¡”æ€æƒ³çš„å…³è”æ–¹å¼" class="headerlink" title="é‡‘å­—å¡”æ€æƒ³çš„å…³è”æ–¹å¼"></a>é‡‘å­—å¡”æ€æƒ³çš„å…³è”æ–¹å¼</h5><h6 id="çºµå‘ï¼šæ–‡ç« ä¸­ä»»ä¸€å±‚æ¬¡ä¸Šçš„æ€æƒ³å¿…é¡»æ˜¯å…¶ä¸‹ä¸€å±‚æ¬¡æ€æƒ³çš„æ¦‚æ‹¬"><a href="#çºµå‘ï¼šæ–‡ç« ä¸­ä»»ä¸€å±‚æ¬¡ä¸Šçš„æ€æƒ³å¿…é¡»æ˜¯å…¶ä¸‹ä¸€å±‚æ¬¡æ€æƒ³çš„æ¦‚æ‹¬" class="headerlink" title="çºµå‘ï¼šæ–‡ç« ä¸­ä»»ä¸€å±‚æ¬¡ä¸Šçš„æ€æƒ³å¿…é¡»æ˜¯å…¶ä¸‹ä¸€å±‚æ¬¡æ€æƒ³çš„æ¦‚æ‹¬"></a>çºµå‘ï¼šæ–‡ç« ä¸­ä»»ä¸€å±‚æ¬¡ä¸Šçš„æ€æƒ³å¿…é¡»æ˜¯å…¶ä¸‹ä¸€å±‚æ¬¡æ€æƒ³çš„æ¦‚æ‹¬</h6><ul><li>å‘ä¸Š</li><li>å‘ä¸‹</li></ul><h6 id="æ¨ªå‘"><a href="#æ¨ªå‘" class="headerlink" title="æ¨ªå‘"></a>æ¨ªå‘</h6><ul><li>æ¯ç»„æ€æƒ³å¿…é¡»å±äºåŒä¸€é€»è¾‘èŒƒç•´</li><li>æ¯ç»„æ€æƒ³å¿…é¡»æŒ‰é€»è¾‘é¡ºåºç»„ç»‡ï¼Œå…·ä½“çš„é¡ºåºå–å†³äºè¯¥ç»„æ€æƒ³çš„é€»è¾‘å…³ç³»æ˜¯==æ¼”ç»æ¨ç†å…³ç³»è¿˜æ˜¯å½’çº³æ¨ç†å…³ç³»==</li><li>æ¼”ç»æ¨ç†ä¸å½’çº³æ¨ç†çš„åŒºåˆ«å¦‚ä¸‹å›¾</li><li>æ¼”ç»æ¨ç†çš„3ä¸ªæ­¥éª¤<ul><li>é˜è¿°ä¸–ç•Œä¸Šå·²å­˜åœ¨çš„æŸç§æƒ…å†µ</li><li>é˜è¿°ä¸–ç•Œä¸ŠåŒæ—¶å­˜åœ¨çš„ç›¸å…³æƒ…å†µã€‚å¦‚æœç¬¬äºŒä¸ªè¡¨è¿°æ˜¯é’ˆå¯¹ç¬¬ä¸€ä¸ªè¡¨è¿°çš„ä¸»è¯­æˆ–è€…è°“è¯­ï¼Œåˆ™è¯´æ˜ä¸¤ä¸ªè¡¨è¿°ç›¸å…³</li><li>è¯´æ˜è¿™ä¸¤ä¸ªè¡¨è¿°åŒæ—¶å­˜åœ¨æ—¶éšå«çš„æ„ä¹‰</li></ul></li><li>å½’çº³æ¨ç†çš„æ­¥éª¤<ul><li>æ‰¾åˆ°ä¸€ä¸ªèƒ½å¤Ÿè¡¨ç¤ºè¯¥ç»„æ‰€æœ‰æ€æƒ³å…±åŒç‚¹çš„åè¯ï¼Œå³æ­£ç¡®å®šä¹‰è¯¥ç»„æ€æƒ³</li><li>è¯†åˆ«å¹¶å‰”é™¤ä¸å±è¯¥ç»„ï¼Œä¸å…·æœ‰å…±åŒç‚¹çš„æ€æƒ³</li></ul></li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg10.jpg" alt="åŒºåˆ«"></p><h4 id="ç»„ç»‡æ€æƒ³çš„é€»è¾‘é¡ºåº"><a href="#ç»„ç»‡æ€æƒ³çš„é€»è¾‘é¡ºåº" class="headerlink" title="ç»„ç»‡æ€æƒ³çš„é€»è¾‘é¡ºåº"></a>ç»„ç»‡æ€æƒ³çš„é€»è¾‘é¡ºåº</h4><h5 id="æ¼”ç»å…³ç³»"><a href="#æ¼”ç»å…³ç³»" class="headerlink" title="æ¼”ç»å…³ç³»"></a>æ¼”ç»å…³ç³»</h5><ul><li>å¤§å‰æ</li><li>å°å‰æ</li><li>ç»“è®º</li></ul><h5 id="å½’çº³å…³ç³»"><a href="#å½’çº³å…³ç³»" class="headerlink" title="å½’çº³å…³ç³»"></a>å½’çº³å…³ç³»</h5><h6 id="æ—¶é—´é¡ºåºï¼šç¡®å®šå‰å› åæœå…³ç³»ï¼Œä»£è¡¨ä¸€ä¸ªè¿‡ç¨‹æˆ–ç³»ç»Ÿçš„ä¸€ç»„è¡Œä¸º"><a href="#æ—¶é—´é¡ºåºï¼šç¡®å®šå‰å› åæœå…³ç³»ï¼Œä»£è¡¨ä¸€ä¸ªè¿‡ç¨‹æˆ–ç³»ç»Ÿçš„ä¸€ç»„è¡Œä¸º" class="headerlink" title="æ—¶é—´é¡ºåºï¼šç¡®å®šå‰å› åæœå…³ç³»ï¼Œä»£è¡¨ä¸€ä¸ªè¿‡ç¨‹æˆ–ç³»ç»Ÿçš„ä¸€ç»„è¡Œä¸º"></a>æ—¶é—´é¡ºåºï¼šç¡®å®šå‰å› åæœå…³ç³»ï¼Œä»£è¡¨ä¸€ä¸ªè¿‡ç¨‹æˆ–ç³»ç»Ÿçš„ä¸€ç»„è¡Œä¸º</h6><ul><li>æ ¹æ®ç»“æœæ‰¾åŸå› ï¼ŒåŒºåˆ†åŸå› å’Œç»“æœ</li><li>ç»“æœ<ul><li>ç¬¬ä¸€ï¼ˆåŸå› ï¼‰</li><li>ç¬¬äºŒ</li><li>ç¬¬ä¸‰</li></ul></li><li>æ­ç¤ºéšå«çš„é€»è¾‘æ€è·¯</li><li>åœ¨æŒ‰ç…§æ—¶é—´é¡ºåºç»„ç»‡çš„æ€æƒ³ç»„ä¸­ï¼Œä½ è¦æŒ‰ç…§é‡‡å–è¡ŒåŠ¨çš„é¡ºåºï¼ˆç¬¬ä¸€æ­¥ã€ç¬¬äºŒæ­¥ã€ç¬¬ä¸‰æ­¥ï¼‰ä¾æ¬¡è¡¨è¿°è¾¾åˆ°æŸä¸€ä¸ªç»“æœå¿…é¡»é‡‡å–çš„è¡ŒåŠ¨</li></ul><h6 id="ç©ºé—´é¡ºåºï¼šå°†æ•´ä½“åˆ†å‰²æˆéƒ¨åˆ†ï¼Œæˆ–å°†éƒ¨åˆ†ç»„æˆæ•´ä½“"><a href="#ç©ºé—´é¡ºåºï¼šå°†æ•´ä½“åˆ†å‰²æˆéƒ¨åˆ†ï¼Œæˆ–å°†éƒ¨åˆ†ç»„æˆæ•´ä½“" class="headerlink" title="ç©ºé—´é¡ºåºï¼šå°†æ•´ä½“åˆ†å‰²æˆéƒ¨åˆ†ï¼Œæˆ–å°†éƒ¨åˆ†ç»„æˆæ•´ä½“"></a>ç©ºé—´é¡ºåºï¼šå°†æ•´ä½“åˆ†å‰²æˆéƒ¨åˆ†ï¼Œæˆ–å°†éƒ¨åˆ†ç»„æˆæ•´ä½“</h6><ul><li>ç»“æ„é¡ºåºå°±æ˜¯å½“ä½ ä½¿ç”¨ç¤ºæ„å›¾ã€åœ°å›¾ã€å›¾ç”»æˆ–ç…§ç‰‡æƒ³è±¡æŸäº‹åŠ¡æ—¶çš„é¡ºåº</li><li>åˆ›å»ºé€»è¾‘ç»“æ„<ul><li>å„éƒ¨åˆ†ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œæ²¡æœ‰é‡å ï¼Œæœ‰æ’ä»–æ€§</li><li>æ‰€æœ‰éƒ¨åˆ†å®Œå…¨ç©·å°½ï¼Œæ²¡æœ‰é—æ¼</li></ul></li><li>åˆ’åˆ†ç»„ç»‡æ´»åŠ¨çš„æ–¹å¼<ul><li>æ ¹æ®æ´»åŠ¨æœ¬èº«ï¼ˆç ”å‘ã€ç”Ÿäº§ã€å¸‚åœºï¼‰</li><li>æ ¹æ®æ´»åŠ¨å‘ç”Ÿåœ°ç‚¹ï¼ˆå›½å®¶ä¸œéƒ¨ã€å›½å®¶ä¸­è¥¿éƒ¨ï¼‰</li><li>æ ¹æ®é’ˆå¯¹ç‰¹å®šäº§å“ã€å¸‚åœºæˆ–å®¢æˆ·æ´»åŠ¨çš„é›†åˆï¼ˆå„äº‹ä¸šéƒ¨ã€å„ä¸šåŠ¡å•å…ƒï¼‰</li></ul></li><li>æè¿°é€»è¾‘ç»“æ„<ul><li>è‡ªä¸Šè€Œä¸‹</li><li>è‡ªä½œè€Œå³</li></ul></li><li>ä¿®æ”¹é€»è¾‘ç»“æ„</li><li>ç”¨ç»“æ„é¡ºåºæ¦‚å¿µæ£€æŸ¥æ€è·¯</li><li>åœ°å›¾<ul><li>åŒ—äº¬</li><li>ä¸Šæµ·</li><li>å¹¿å·</li><li>æ·±åœ³</li></ul></li></ul><h6 id="é‡è¦æ€§é¡ºåºï¼šå°†ç±»ä¼¼äº‹åŠ¡æŒ‰é‡è¦æ€§å½’ä¸ºä¸€ç»„"><a href="#é‡è¦æ€§é¡ºåºï¼šå°†ç±»ä¼¼äº‹åŠ¡æŒ‰é‡è¦æ€§å½’ä¸ºä¸€ç»„" class="headerlink" title="é‡è¦æ€§é¡ºåºï¼šå°†ç±»ä¼¼äº‹åŠ¡æŒ‰é‡è¦æ€§å½’ä¸ºä¸€ç»„"></a>é‡è¦æ€§é¡ºåºï¼šå°†ç±»ä¼¼äº‹åŠ¡æŒ‰é‡è¦æ€§å½’ä¸ºä¸€ç»„</h6><ul><li>æ˜ç¡®æŒ‡æ˜æ¯ç»„ä¸­çš„é¡¹ç›®å…·æœ‰å…±åŒç‰¹æ€§ï¼Œç¡®ä¿å°†æ‰€æœ‰å…·æœ‰è¯¥ç‰¹æ€§çš„é¡¹ç›®åˆ—å…¥è¯¥ç»„</li><li>åœ¨æ¯ç»„ä¸­ï¼Œæ ¹æ®å„ä¸ªé—®é¢˜å…·æœ‰è¯¥ç‰¹æ€§çš„é«˜ä½æ’åºâ€”â€”æœ€å…·æœ‰è¯¥ç‰¹æ€§çš„é—®é¢˜æ’ç¬¬ä¸€ï¼Œå…ˆå¼ºåå¼±ï¼Œå…ˆé‡è¦åæ¬¡è¦</li><li>åˆ›å»ºé€‚å½“çš„åˆ†ç»„</li><li>æœ€é‡è¦</li><li>æ¬¡é‡è¦</li><li>ä¸é‡è¦</li></ul><h3 id="è‡ªä¸Šè€Œä¸‹æ³•"><a href="#è‡ªä¸Šè€Œä¸‹æ³•" class="headerlink" title="è‡ªä¸Šè€Œä¸‹æ³•"></a>è‡ªä¸Šè€Œä¸‹æ³•</h3><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg3.jpg" alt="è‡ªä¸Šè€Œä¸‹æ­å»ºæ­¥éª¤"></p><h4 id="ç”»å‡ºä¸»é¢˜æ–¹æ¡†â€”â€”æå‡ºä¸»é¢˜æ€æƒ³"><a href="#ç”»å‡ºä¸»é¢˜æ–¹æ¡†â€”â€”æå‡ºä¸»é¢˜æ€æƒ³" class="headerlink" title="ç”»å‡ºä¸»é¢˜æ–¹æ¡†â€”â€”æå‡ºä¸»é¢˜æ€æƒ³"></a>ç”»å‡ºä¸»é¢˜æ–¹æ¡†â€”â€”æå‡ºä¸»é¢˜æ€æƒ³</h4><ul><li>è¦è®¨è®ºä»€ä¹ˆä¸»é¢˜ï¼ŒçŸ¥é“åˆ™å¡«å…¥ï¼Œä¸çŸ¥é“åˆ™åˆ°æ­¥éª¤2</li></ul><h4 id="è®¾æƒ³ä¸»è¦ç–‘é—®â€”â€”è®¾æƒ³å—ä¼—çš„ä¸»è¦ç–‘é—®"><a href="#è®¾æƒ³ä¸»è¦ç–‘é—®â€”â€”è®¾æƒ³å—ä¼—çš„ä¸»è¦ç–‘é—®" class="headerlink" title="è®¾æƒ³ä¸»è¦ç–‘é—®â€”â€”è®¾æƒ³å—ä¼—çš„ä¸»è¦ç–‘é—®"></a>è®¾æƒ³ä¸»è¦ç–‘é—®â€”â€”è®¾æƒ³å—ä¼—çš„ä¸»è¦ç–‘é—®</h4><ul><li>ç¡®å®šæ–‡ç« çš„è¯»è€…ï¼Œå°†é¢å¯¹å“ªäº›å¯¹è±¡</li><li>å¸Œæœ›å›ç­”å…³äºä¸»é¢˜çš„å“ªäº›ç–‘é—®ï¼Œæ²¡æœ‰åˆ™åˆ°æ­¥éª¤4</li></ul><h4 id="å†™å‡ºå¯¹è¯¥ç–‘é—®çš„å›ç­”â€”â€”å†™åºè¨€ï¼šèƒŒæ™¯ã€å†²çªã€ç–‘é—®ã€å›ç­”"><a href="#å†™å‡ºå¯¹è¯¥ç–‘é—®çš„å›ç­”â€”â€”å†™åºè¨€ï¼šèƒŒæ™¯ã€å†²çªã€ç–‘é—®ã€å›ç­”" class="headerlink" title="å†™å‡ºå¯¹è¯¥ç–‘é—®çš„å›ç­”â€”â€”å†™åºè¨€ï¼šèƒŒæ™¯ã€å†²çªã€ç–‘é—®ã€å›ç­”"></a>å†™å‡ºå¯¹è¯¥ç–‘é—®çš„å›ç­”â€”â€”å†™åºè¨€ï¼šèƒŒæ™¯ã€å†²çªã€ç–‘é—®ã€å›ç­”</h4><ul><li>å¦‚æœå†™ä¸å‡ºï¼Œåˆ™æ³¨æ˜æœ‰èƒ½åŠ›å›ç­”è¯¥ç–‘é—®</li></ul><h4 id="è¯´æ˜â€œèƒŒæ™¯â€"><a href="#è¯´æ˜â€œèƒŒæ™¯â€" class="headerlink" title="è¯´æ˜â€œèƒŒæ™¯â€"></a>è¯´æ˜â€œèƒŒæ™¯â€</h4><ul><li>æŠŠè¦è®¨è®ºçš„ä¸»é¢˜ä¸â€œèƒŒæ™¯â€ç›¸ç»“åˆï¼Œä½œå‡ºå…³äºè¯¥ä¸»é¢˜çš„ç¬¬ä¸€ä¸ªä¸ä¼šå¼•èµ·äº‰è®®çš„è¡¨è¿°</li></ul><h4 id="æŒ‡å‡ºâ€œå†²çªâ€â€”â€”ä¸å—ä¼—è¿›è¡Œç–‘é—®-å›ç­”å¼å¯¹è¯"><a href="#æŒ‡å‡ºâ€œå†²çªâ€â€”â€”ä¸å—ä¼—è¿›è¡Œç–‘é—®-å›ç­”å¼å¯¹è¯" class="headerlink" title="æŒ‡å‡ºâ€œå†²çªâ€â€”â€”ä¸å—ä¼—è¿›è¡Œç–‘é—®/å›ç­”å¼å¯¹è¯"></a>æŒ‡å‡ºâ€œå†²çªâ€â€”â€”ä¸å—ä¼—è¿›è¡Œç–‘é—®/å›ç­”å¼å¯¹è¯</h4><ul><li>è¿›è¡Œç–‘é—®/å›ç­”å¼å¯¹è¯</li><li>è€ƒè™‘â€œèƒŒæ™¯â€ä¸­å‘ç”Ÿäº†å“ªäº›èƒ½ä½¿è¯»è€…äº§ç”Ÿç–‘é—®çš„â€œå†²çªâ€</li><li>ä¾‹å¦‚å‘ç”Ÿäº†è¯»è€…ä¸çŸ¥é“çš„æ„å¤–ï¼Œå‡ºç°äº†æŸä¸ªé—®é¢˜ç­‰</li></ul><h4 id="æ£€æŸ¥â€œä¸»è¦ç–‘é—®â€å’Œâ€œç­”æ¡ˆâ€â€”â€”é‡å¤è¿›è¡Œç–‘é—®-å›ç­”å¼å¯¹è¯"><a href="#æ£€æŸ¥â€œä¸»è¦ç–‘é—®â€å’Œâ€œç­”æ¡ˆâ€â€”â€”é‡å¤è¿›è¡Œç–‘é—®-å›ç­”å¼å¯¹è¯" class="headerlink" title="æ£€æŸ¥â€œä¸»è¦ç–‘é—®â€å’Œâ€œç­”æ¡ˆâ€â€”â€”é‡å¤è¿›è¡Œç–‘é—®/å›ç­”å¼å¯¹è¯"></a>æ£€æŸ¥â€œä¸»è¦ç–‘é—®â€å’Œâ€œç­”æ¡ˆâ€â€”â€”é‡å¤è¿›è¡Œç–‘é—®/å›ç­”å¼å¯¹è¯</h4><ul><li>å¯¹â€œèƒŒæ™¯â€ä¸­â€œå†²çªâ€çš„ä»‹ç»ï¼Œåº”å½“ç›´æ¥å¯¼è‡´è¯»è€…æå‡ºä¸»è¦ç–‘é—®</li><li>å¦åˆ™åº”è¯¥é‡æ–°ä»‹ç»â€œèƒŒæ™¯â€ä¸­çš„â€œå†²çªâ€ï¼Œä½¿ä¹‹å¯ä»¥ç›´æ¥å¯¼è‡´è¯»è€…æå‡ºä¸»è¦ç–‘é—®</li></ul><h3 id="è‡ªä¸‹è€Œä¸Šæ³•"><a href="#è‡ªä¸‹è€Œä¸Šæ³•" class="headerlink" title="è‡ªä¸‹è€Œä¸Šæ³•"></a>è‡ªä¸‹è€Œä¸Šæ³•</h3><ul><li>åˆ—å‡ºä½ æƒ³è¡¨è¾¾çš„æ‰€æœ‰æ€æƒ³è¦ç‚¹</li><li>æ‰¾å‡ºå„è¦ç‚¹ä¹‹é—´çš„é€»è¾‘å…³ç³»</li><li>å¾—å‡ºç»“è®º</li></ul><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li>ä¸€å®šå…ˆæ­ç»“æ„ï¼Œå…ˆå°è¯•è‡ªä¸Šè€Œä¸‹æ³•</li><li>åºè¨€å…ˆå†™èƒŒæ™¯ï¼Œå°†èƒŒæ™¯ä½œä¸ºåºè¨€çš„èµ·ç‚¹</li><li>å…ˆå¤šèŠ±æ—¶é—´æ€è€ƒåºè¨€ï¼Œä¸è¦çœç•¥</li><li>å°†å†å²èƒŒæ™¯æ”¾åœ¨åºè¨€ä¸­</li><li>åºè¨€ä»…æ¶‰åŠè¯»è€…ä¸ä¼šå¯¹å…¶çœŸå®æ€§æå‡ºè´¨ç–‘çš„å†…å®¹</li><li>åœ¨å…³é”®å¥å±‚æ¬¡ä¸Šï¼Œæ›´å®œé€‰æ‹©å½’çº³æ¨ç†æ³•è€Œéæ¼”ç»è®ºè¯æ³•</li></ul><h2 id="ç¬¬4ç« ï¼šåºè¨€çš„ç»“æ„ä»¥åŠå¦‚ä½•å†™"><a href="#ç¬¬4ç« ï¼šåºè¨€çš„ç»“æ„ä»¥åŠå¦‚ä½•å†™" class="headerlink" title="ç¬¬4ç« ï¼šåºè¨€çš„ç»“æ„ä»¥åŠå¦‚ä½•å†™"></a>ç¬¬4ç« ï¼šåºè¨€çš„ç»“æ„ä»¥åŠå¦‚ä½•å†™</h2><h3 id="åºè¨€çš„ç»“æ„"><a href="#åºè¨€çš„ç»“æ„" class="headerlink" title="åºè¨€çš„ç»“æ„"></a>åºè¨€çš„ç»“æ„</h3><h3 id="åºè¨€å¦‚ä½•å†™"><a href="#åºè¨€å¦‚ä½•å†™" class="headerlink" title="åºè¨€å¦‚ä½•å†™"></a>åºè¨€å¦‚ä½•å†™</h3><h3 id="åºè¨€çš„å¸¸è§æ¨¡å¼"><a href="#åºè¨€çš„å¸¸è§æ¨¡å¼" class="headerlink" title="åºè¨€çš„å¸¸è§æ¨¡å¼"></a>åºè¨€çš„å¸¸è§æ¨¡å¼</h3><ul><li>ä¸ºä»€ä¹ˆåºè¨€å¿…é¡»æ˜¯å°†æ•…äº‹ï¼Ÿ<ul><li>è®©è¯»è€…æŠ›å¼€å¤æ‚çš„æ€æƒ³ï¼Œä¸“æ³¨äºä½ çš„æ–‡ç« </li><li>å¼•èµ·è¯»è€…çš„å…´è¶£ï¼Œå¸å¼•æ³¨æ„åŠ›</li></ul></li><li>ä¸ºä»€ä¹ˆåºè¨€å¿…é¡»æ˜¯è¯»è€…å·²çŸ¥çš„ä¿¡æ¯ï¼Ÿ<ul><li>è¿™æ ·æ‰ä¸ä¼šè®©è¯»è€…äº§ç”Ÿè´¨ç–‘</li></ul></li></ul><h3 id="åºè¨€çš„ç»“æ„-1"><a href="#åºè¨€çš„ç»“æ„-1" class="headerlink" title="åºè¨€çš„ç»“æ„"></a>åºè¨€çš„ç»“æ„</h3><h4 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg4.jpg" alt="å†²çª"></p><ul><li>èƒŒæ™¯ï¼ˆSï¼‰<ul><li>ä½•æ—¶å¼•å…¥ï¼Ÿ</li><li>åœ¨ä½ èƒ½å¤Ÿä½œå‡ºå…³äºæ–‡ç« ä¸»é¢˜ç‹¬ç«‹ã€æ— äº‰è®®çš„è¡¨è¿°çš„æ—¶å€™</li><li>æ‰€æœ‰å¼•å‡ºâ€œèƒŒæ™¯â€çš„å¥å­éƒ½èƒ½é”å®šåœ¨ç‰¹å®šçš„æ—¶é—´å’Œç©ºé—´</li></ul></li><li>å†²çªï¼ˆCï¼‰<ul><li>èƒ½å¤Ÿä¿ƒä½¿è¯»è€…æå‡ºâ€œç–‘é—®â€çš„å³æ˜¯å†²çª</li><li>æ¨åŠ¨æ•…äº‹æƒ…èŠ‚å‘å±•</li></ul></li><li>ç–‘é—®ï¼ˆQï¼‰</li><li>å›ç­”ï¼ˆAï¼‰â€”â€”å…³é”®å¥è¦ç‚¹<ul><li>ä¸ä»…è¦å›ç­”==æ–‡ç« ä¸»é¢˜æ€æƒ³==å¼•èµ·è¯»è€…çš„ç–‘é—®</li><li>è¿˜è¦å‘ˆç°æ–‡ç« çš„æ¡†æ¶ç»“æ„</li><li>ç„¶åæœ¬ç« å¼€å§‹ä»¥å…³é”®å¥è¦ç‚¹ä¸€ç« ä¸€ç« çš„è®²è¿°â€”â€”åŒæ ·é‡‡å–èƒŒæ™¯+å†²çª+å›ç­”çš„æ ¼å¼</li></ul></li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg5.jpg" alt="åºè¨€ç»“æ„"></p><h4 id="åŸºæœ¬ç»“æ„å¼•å‡ºçš„å½¢å¼"><a href="#åŸºæœ¬ç»“æ„å¼•å‡ºçš„å½¢å¼" class="headerlink" title="åŸºæœ¬ç»“æ„å¼•å‡ºçš„å½¢å¼"></a>åŸºæœ¬ç»“æ„å¼•å‡ºçš„å½¢å¼</h4><ul><li>æ ‡å‡†å¼ï¼šèƒŒæ™¯â€”â€”å†²çªâ€”â€”ç­”æ¡ˆ</li><li>å¼€é—¨è§å±±å¼ï¼šç­”æ¡ˆâ€”â€”èƒŒæ™¯â€”â€”å†²çª</li><li>çªå‡ºå¿§è™‘å¼ï¼šå†²çªâ€”â€”èƒŒæ™¯â€”â€”ç­”æ¡ˆ</li><li>çªå‡ºä¿¡å¿ƒå¼ï¼šç–‘é—®â€”â€”èƒŒæ™¯â€”â€”å†²çªâ€”â€”ç­”æ¡ˆ</li></ul><h3 id="å¥½åºè¨€çš„åŸåˆ™"><a href="#å¥½åºè¨€çš„åŸåˆ™" class="headerlink" title="å¥½åºè¨€çš„åŸåˆ™"></a>å¥½åºè¨€çš„åŸåˆ™</h3><ul><li>åºè¨€çš„ç›®çš„æ˜¯==æç¤º==è¯»è€…è€Œä¸æ˜¯==å‘Šè¯‰==è¯»è€…æŸäº›ä¿¡æ¯<ul><li>ä¸åº”è¯¥å«æœ‰è¯»è€…éœ€è¦è¯æ˜åæ‰èƒ½æ¥å—çš„ä¿¡æ¯</li><li>ä¸åº”å½“å«æœ‰å›¾è¡¨</li></ul></li><li>åºè¨€å¿…é¡»åŒ…å«è®²æ•…äº‹çš„3ä¸ªè¦ç´ +èƒŒæ™¯+å†²çª+ç­”æ¡ˆ</li><li>åºè¨€çš„é•¿åº¦å–å†³äºè¯»è€…å’Œä¸»é¢˜çš„éœ€è¦</li></ul><h3 id="åºè¨€çš„å¸¸è§æ¨¡å¼-1"><a href="#åºè¨€çš„å¸¸è§æ¨¡å¼-1" class="headerlink" title="åºè¨€çš„å¸¸è§æ¨¡å¼"></a>åºè¨€çš„å¸¸è§æ¨¡å¼</h3><h4 id="å‘å‡ºæŒ‡ç¤ºå¼"><a href="#å‘å‡ºæŒ‡ç¤ºå¼" class="headerlink" title="å‘å‡ºæŒ‡ç¤ºå¼"></a>å‘å‡ºæŒ‡ç¤ºå¼</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg6.jpg" alt="å‘å‡ºæŒ‡ç¤ºå¼"></p><h4 id="è¯·æ±‚æ”¯æŒå¼"><a href="#è¯·æ±‚æ”¯æŒå¼" class="headerlink" title="è¯·æ±‚æ”¯æŒå¼"></a>è¯·æ±‚æ”¯æŒå¼</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg7.jpg" alt="è¯·æ±‚æ”¯æŒå¼"></p><h4 id="è§£é‡Šåšæ³•å¼"><a href="#è§£é‡Šåšæ³•å¼" class="headerlink" title="è§£é‡Šåšæ³•å¼"></a>è§£é‡Šåšæ³•å¼</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg8.jpg" alt="è§£é‡Šåšæ³•å¼"></p><h4 id="æ¯”è¾ƒé€‰æ‹©å¼"><a href="#æ¯”è¾ƒé€‰æ‹©å¼" class="headerlink" title="æ¯”è¾ƒé€‰æ‹©å¼"></a>æ¯”è¾ƒé€‰æ‹©å¼</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg9.jpg" alt="æ¯”è¾ƒé€‰æ‹©å¼"></p><h2 id="ç¬¬5ç« ï¼šæ¼”ç»æ¨ç†ä¸å½’çº³æ¨ç†"><a href="#ç¬¬5ç« ï¼šæ¼”ç»æ¨ç†ä¸å½’çº³æ¨ç†" class="headerlink" title="ç¬¬5ç« ï¼šæ¼”ç»æ¨ç†ä¸å½’çº³æ¨ç†"></a>ç¬¬5ç« ï¼šæ¼”ç»æ¨ç†ä¸å½’çº³æ¨ç†</h2><h3 id="æ¼”ç»æ¨ç†"><a href="#æ¼”ç»æ¨ç†" class="headerlink" title="æ¼”ç»æ¨ç†"></a>æ¼”ç»æ¨ç†</h3><h3 id="å½’çº³æ¨ç†"><a href="#å½’çº³æ¨ç†" class="headerlink" title="å½’çº³æ¨ç†"></a>å½’çº³æ¨ç†</h3><h3 id="å®ƒä»¬çš„åŒºåˆ«"><a href="#å®ƒä»¬çš„åŒºåˆ«" class="headerlink" title="å®ƒä»¬çš„åŒºåˆ«"></a>å®ƒä»¬çš„åŒºåˆ«</h3><h1 id="ç¬¬äºŒç¯‡ï¼šæ€è€ƒçš„é€»è¾‘"><a href="#ç¬¬äºŒç¯‡ï¼šæ€è€ƒçš„é€»è¾‘" class="headerlink" title="ç¬¬äºŒç¯‡ï¼šæ€è€ƒçš„é€»è¾‘"></a>ç¬¬äºŒç¯‡ï¼šæ€è€ƒçš„é€»è¾‘</h1><ul><li>å¦‚ä½•æ‰èƒ½ä»åŸæ–‡ç½—åˆ—çš„ä¿¡æ¯ï¼Œæ•´ç†å‡ºä¿®æ”¹åç½—åˆ—çš„ç»“è®ºå‘¢ï¼Ÿ</li><li>æœ¬ç¯‡å°†è®¨è®ºæœ‰å…³çš„å®ç”¨æŠ€å·§</li><li>è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º==å†·é™æ€è€ƒ==</li></ul><h2 id="ç¬¬6ç« ï¼šåº”ç”¨é€»è¾‘é¡ºåº"><a href="#ç¬¬6ç« ï¼šåº”ç”¨é€»è¾‘é¡ºåº" class="headerlink" title="ç¬¬6ç« ï¼šåº”ç”¨é€»è¾‘é¡ºåº"></a>ç¬¬6ç« ï¼šåº”ç”¨é€»è¾‘é¡ºåº</h2><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg11.jpg" alt="å¤§è„‘å½’çº³åˆ†ææ´»åŠ¨"></p><h2 id="ç¬¬7ç« ï¼šæ¦‚æ‹¬å„ç»„æ€æƒ³"><a href="#ç¬¬7ç« ï¼šæ¦‚æ‹¬å„ç»„æ€æƒ³" class="headerlink" title="ç¬¬7ç« ï¼šæ¦‚æ‹¬å„ç»„æ€æƒ³"></a>ç¬¬7ç« ï¼šæ¦‚æ‹¬å„ç»„æ€æƒ³</h2><ul><li>æ¦‚æ‹¬å„ç»„æ€æƒ³</li><li>ç¡®ä¿æ€æƒ³å±äºåŒä¸€ç»„ï¼Œåº”æŠ½è±¡ã€æç‚¼ã€æ¦‚æ‹¬æ€æƒ³ç²¾å</li><li><p>æ€»ç»“å¥é¿å…ä½¿ç”¨â€œç¼ºä¹æ€æƒ³â€çš„å¥å­ï¼Œæ€»ç»“å¥åº”è¯¥åŒ…å«æ¦‚æ‹¬çš„æ€æƒ³</p><ul><li>ä¾‹å¦‚ï¼šè¯¥å…¬å¸å­˜åœ¨2ä¸ªé—®é¢˜</li></ul></li><li><p>æ€æƒ³çš„è¡¨è¾¾æ–¹å¼å¯ä»¥æ˜¯==è¡ŒåŠ¨æ€§è¯­å¥==ï¼Œå³å‘Šè¯‰è¯»è€…ä»€ä¹ˆäº‹ï¼Œä¹Ÿå¯ä»¥æ˜¯==æè¿°æ€§è¯­å¥==ï¼Œå³å‘Šè¯‰è¯»è€…å…³äºæŸäº›äº‹çš„æƒ…å†µ</p><ul><li><p>æ¦‚æ‹¬è¡ŒåŠ¨æ€§æ€æƒ³ï¼ˆä»‹ç»é‡‡å–çš„è¡ŒåŠ¨ã€è¡Œä¸ºã€æ­¥éª¤ã€æµç¨‹ï¼‰æ—¶ï¼Œåº”è¯´æ˜é‡‡å–è¡ŒåŠ¨åå–å¾—çš„â€œç»“æœâ€ï¼ˆæ•ˆæœã€è¾¾åˆ°çš„ç›®æ ‡ï¼‰</p><ul><li>åœ¨å°†å„è¡ŒåŠ¨ï¼ˆæ­¥éª¤ã€æµç¨‹ç­‰ï¼‰è”ç³»èµ·æ¥ä¹‹å‰ï¼Œå…ˆç”¨æ˜ç¡®çš„è¯­å¥æè¿°å„è¡ŒåŠ¨</li><li>æ‰¾å‡ºæ˜æ˜¾çš„å› æœå…³ç³»ç»„åˆï¼Œå°½é‡å°†æ¯ä¸€ç»„ä¸­çš„è¡ŒåŠ¨ã€æ­¥éª¤æ§åˆ¶åœ¨5ä¸ªä»¥ä¸‹<ul><li>åŒºåˆ†è¡ŒåŠ¨æ­¥éª¤çš„å±‚æ¬¡<br><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg12.jpg" alt="åŒºåˆ†å±‚æ¬¡"></li></ul></li><li>ç›´æ¥ä»è¿™äº›è¡ŒåŠ¨ã€æ­¥éª¤ã€æµç¨‹ï¼Œæ€»ç»“ã€æ¦‚æ‹¬è¡ŒåŠ¨çš„ç»“æœã€ç›®æ ‡</li></ul></li><li><p>æ¦‚æ‹¬æè¿°æ€§æ€æƒ³ï¼ˆä»‹ç»èƒŒæ™¯ã€ä¿¡æ¯ï¼‰æ—¶ï¼Œåº”è¯¥è¯´æ˜è¿™äº›æ€æƒ³å…·æœ‰çš„â€œå…±åŒç‚¹çš„å«ä¹‰â€</p></li></ul></li></ul><h3 id="äº†è§£æŸä¸€ç»„æ€æƒ³çœŸæ­£æƒ³è¡¨è¾¾çš„æ€æƒ³è§‚ç‚¹"><a href="#äº†è§£æŸä¸€ç»„æ€æƒ³çœŸæ­£æƒ³è¡¨è¾¾çš„æ€æƒ³è§‚ç‚¹" class="headerlink" title="äº†è§£æŸä¸€ç»„æ€æƒ³çœŸæ­£æƒ³è¡¨è¾¾çš„æ€æƒ³è§‚ç‚¹"></a>äº†è§£æŸä¸€ç»„æ€æƒ³çœŸæ­£æƒ³è¡¨è¾¾çš„æ€æƒ³è§‚ç‚¹</h3><h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h4><ul><li>ç¡®å®šè¯¥ç»„æ€æƒ³çš„ç±»å‹ï¼ˆç±»åˆ«ï¼‰</li><li>å°†åŒä¸€ç±»åˆ«çš„æ€æƒ³å½’ç±»ã€åˆ†ç»„</li><li>æ‰¾å‡ºå„ç±»åˆ«æ€æƒ³ä¹‹é—´çš„é¡ºåº</li></ul><h3 id="æ€»ç»“å¥é¿å…ä½¿ç”¨â€œç¼ºä¹æ€æƒ³â€çš„å¥å­"><a href="#æ€»ç»“å¥é¿å…ä½¿ç”¨â€œç¼ºä¹æ€æƒ³â€çš„å¥å­" class="headerlink" title="æ€»ç»“å¥é¿å…ä½¿ç”¨â€œç¼ºä¹æ€æƒ³â€çš„å¥å­"></a>æ€»ç»“å¥é¿å…ä½¿ç”¨â€œç¼ºä¹æ€æƒ³â€çš„å¥å­</h3><h3 id="æ€»ç»“å¥è¦è¯´æ˜è¡ŒåŠ¨äº§ç”Ÿçš„ç»“æœ-ç›®æ ‡"><a href="#æ€»ç»“å¥è¦è¯´æ˜è¡ŒåŠ¨äº§ç”Ÿçš„ç»“æœ-ç›®æ ‡" class="headerlink" title="æ€»ç»“å¥è¦è¯´æ˜è¡ŒåŠ¨äº§ç”Ÿçš„ç»“æœ/ç›®æ ‡"></a>æ€»ç»“å¥è¦è¯´æ˜è¡ŒåŠ¨äº§ç”Ÿçš„ç»“æœ/ç›®æ ‡</h3><h3 id="æ‰¾å‡ºå„ç»“è®ºä¹‹é—´çš„å…±æ€§"><a href="#æ‰¾å‡ºå„ç»“è®ºä¹‹é—´çš„å…±æ€§" class="headerlink" title="æ‰¾å‡ºå„ç»“è®ºä¹‹é—´çš„å…±æ€§"></a>æ‰¾å‡ºå„ç»“è®ºä¹‹é—´çš„å…±æ€§</h3><h1 id="ç¬¬ä¸‰ç¯‡ï¼šè§£å†³é—®é¢˜çš„é€»è¾‘"><a href="#ç¬¬ä¸‰ç¯‡ï¼šè§£å†³é—®é¢˜çš„é€»è¾‘" class="headerlink" title="ç¬¬ä¸‰ç¯‡ï¼šè§£å†³é—®é¢˜çš„é€»è¾‘"></a>ç¬¬ä¸‰ç¯‡ï¼šè§£å†³é—®é¢˜çš„é€»è¾‘</h1><h2 id="ç¬¬8ç« ï¼šç•Œå®šé—®é¢˜"><a href="#ç¬¬8ç« ï¼šç•Œå®šé—®é¢˜" class="headerlink" title="ç¬¬8ç« ï¼šç•Œå®šé—®é¢˜"></a>ç¬¬8ç« ï¼šç•Œå®šé—®é¢˜</h2><ul><li>â€œé—®é¢˜â€æ˜¯æŒ‡ä½ ä¸å–œæ¬¢æŸä¸€ç»“æœ-éæœŸæœ›ç»“æœR1ï¼ˆæ¯”å¦‚é”€å”®é¢é™ä½ï¼‰ï¼Œæƒ³å¾—åˆ°å…¶ä»–ç»“æœ-æœŸæœ›ç»“æœR2ï¼ˆæ¯”å¦‚é”€å”®é¢å¢é•¿ï¼‰</li><li>è§£å†³æ–¹æ¡ˆåˆ™æ˜¯æŒ‡å¦‚ä½•ä»ç°çŠ¶R1åˆ°ç›®æ ‡R2</li></ul><ol><li>ç•Œå®šé—®é¢˜çš„æ¡†æ¶</li><li>å±•å¼€é—®é¢˜çš„å„è¦ç´ </li><li>å‘æ˜è¯»è€…çš„ç–‘é—®</li><li>å¼€å§‹å†™åºè¨€</li><li>å®æˆ˜æ¡ˆä¾‹</li></ol><h3 id="ç•Œå®šé—®é¢˜çš„æ¡†æ¶"><a href="#ç•Œå®šé—®é¢˜çš„æ¡†æ¶" class="headerlink" title="ç•Œå®šé—®é¢˜çš„æ¡†æ¶"></a>ç•Œå®šé—®é¢˜çš„æ¡†æ¶</h3><h4 id="å±•å¼€è¯´æ˜æ¡†æ¶ä¸­çš„å„è¦ç´ "><a href="#å±•å¼€è¯´æ˜æ¡†æ¶ä¸­çš„å„è¦ç´ " class="headerlink" title="å±•å¼€è¯´æ˜æ¡†æ¶ä¸­çš„å„è¦ç´ "></a>å±•å¼€è¯´æ˜æ¡†æ¶ä¸­çš„å„è¦ç´ </h4><ul><li>ç•Œå®šé—®é¢˜çš„æ¡†æ¶éœ€è¦å›ç­”3ä¸ªé—®é¢˜<ul><li>å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿï¼ˆèƒŒæ™¯ã€åˆ‡å…¥ç‚¹+å›°æ‰°ã€‘ï¼‰</li><li>æˆ‘ä»¬ä¸å–œæ¬¢å®ƒä»€ä¹ˆï¼Ÿï¼ˆéæœŸæœ›ç»“æœR1ï¼‰</li><li>æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆï¼Ÿï¼ˆæœŸæœ›ç»“æœR2ï¼‰</li></ul></li></ul><h4 id="æŠŠâ€œç•Œå®šçš„é—®é¢˜â€å†™æˆåºè¨€"><a href="#æŠŠâ€œç•Œå®šçš„é—®é¢˜â€å†™æˆåºè¨€" class="headerlink" title="æŠŠâ€œç•Œå®šçš„é—®é¢˜â€å†™æˆåºè¨€"></a>æŠŠâ€œç•Œå®šçš„é—®é¢˜â€å†™æˆåºè¨€</h4><ul><li>ç•Œå®šé—®é¢˜çš„æ¡†æ¶å¯ä»¥éµå¾ªä»¥ä¸‹5ä¸ªæ­¥éª¤<ul><li>å±•å¼€é—®é¢˜çš„åŸºæœ¬éƒ¨åˆ†</li><li>ä½ çš„è§£å†³æ–¹æ¡ˆå¤„äºå“ªä¸€é˜¶æ®µï¼ˆå·²ç»æå‡ºäº†ï¼Œè¿˜æ˜¯å·²ç»è¢«æ¥å—äº†ï¼‰</li><li>æå‡ºé€‚å½“çš„ç–‘é—®</li><li>æ£€æŸ¥åºè¨€æ˜¯å¦å‘ˆç°äº†ç•Œå®šçš„é—®é¢˜</li><li>æ£€æŸ¥é‡‘å­—å¡”æ˜¯å¦å›ç­”äº†ç–‘é—®</li></ul></li></ul><h3 id="å±•å¼€é—®é¢˜çš„å„è¦ç´ "><a href="#å±•å¼€é—®é¢˜çš„å„è¦ç´ " class="headerlink" title="å±•å¼€é—®é¢˜çš„å„è¦ç´ "></a>å±•å¼€é—®é¢˜çš„å„è¦ç´ </h3><ul><li>ç¡®å®šä»¥ä¸‹4ä¸ªè¦ç´ æ‰èƒ½ç•Œå®šé—®é¢˜<ul><li>åˆ‡å…¥ç‚¹/åºå¹•</li><li>å›°æ‰°/å›°æƒ‘</li><li>ç°çŠ¶ï¼ŒéæœŸæœ›ç»“æœ</li><li>ç›®æ ‡ï¼ŒæœŸæœ›ç»“æœ</li></ul></li></ul><h4 id="åˆ‡å…¥ç‚¹-åºå¹•"><a href="#åˆ‡å…¥ç‚¹-åºå¹•" class="headerlink" title="åˆ‡å…¥ç‚¹/åºå¹•"></a>åˆ‡å…¥ç‚¹/åºå¹•</h4><ul><li>è®¾æƒ³è‡ªå·±é™é™çš„ååœ¨ä¸€ä¸ªé»‘æš—çš„å‰§åœºé‡Œã€‚å¤§å¹•æ‹‰å¼€ï¼Œèˆå°å¸ƒæ™¯æç»˜çš„æ˜¯æŸä¸€ç‰¹å®šæ—¶åˆ»çš„æŸä¸€ç‰¹å®šåœ°ç‚¹ï¼Œè¿™å°±æ˜¯åˆ‡å…¥ç‚¹æˆ–åºå¹•</li><li>åœ¨åºå¹•é˜¶æ®µï¼Œå°½é‡ä½œç®€å•çš„è®¾æƒ³å’Œç®€çŸ­çš„æè¿°ï¼Œç­‰åˆ°å†™åºè¨€æ—¶å†å±•å¼€</li></ul><h4 id="å›°æ‰°-å›°æƒ‘"><a href="#å›°æ‰°-å›°æƒ‘" class="headerlink" title="å›°æ‰°/å›°æƒ‘"></a>å›°æ‰°/å›°æƒ‘</h4><ul><li>æŸä¸€äº‹ä»¶çš„å‘ç”Ÿä½¿å‰§æƒ…å¾—ä»¥å±•å¼€ï¼Œå¹¶å¼•å‘äº†éæœŸæœ›ç»“æœR1ï¼Œè¿™å°±æ˜¯å›°æ‰°/å›°æƒ‘</li><li>äº§ç”Ÿçš„åŸå› æœ‰ä»¥ä¸‹3ç§<ul><li>å¤–éƒ¨åŸå› </li><li>å†…éƒ¨åŸå› </li><li>è¿‘æœŸè®¤è¯†åˆ°çš„å…¶ä»–åŸå› </li></ul></li></ul><h4 id="R1ï¼ˆç°çŠ¶ã€éæœŸæœ›ç»“æœï¼‰"><a href="#R1ï¼ˆç°çŠ¶ã€éæœŸæœ›ç»“æœï¼‰" class="headerlink" title="R1ï¼ˆç°çŠ¶ã€éæœŸæœ›ç»“æœï¼‰"></a>R1ï¼ˆç°çŠ¶ã€éæœŸæœ›ç»“æœï¼‰</h4><ul><li>R1æ˜¯æŒ‡è¯»è€…éœ€è¦è®¾æ³•è§£å†³æˆ–æœ‰å¯èƒ½é¢ä¸´çš„é—®é¢˜ï¼Œæˆ–è€…æ˜¯æœ‰å¯èƒ½æŠ“ä½çš„æœºä¼š</li><li>å›°æ‰°å¸¦æ¥çš„R1å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥åœ¨ç¤ºæ„å›¾é‡Œå°½å¯èƒ½ç®€çŸ­çš„æ–‡å­—åŠ ä»¥è¯´æ˜</li></ul><h4 id="R2ï¼ˆç›®æ ‡ï¼ŒæœŸæœ›ç»“æœï¼‰"><a href="#R2ï¼ˆç›®æ ‡ï¼ŒæœŸæœ›ç»“æœï¼‰" class="headerlink" title="R2ï¼ˆç›®æ ‡ï¼ŒæœŸæœ›ç»“æœï¼‰"></a>R2ï¼ˆç›®æ ‡ï¼ŒæœŸæœ›ç»“æœï¼‰</h4><ul><li>å¯¹R2å‡†ç¡®åˆ°ä½çš„æè¿°ï¼Œå¯ä»¥ç”¨å…·ä½“çš„æ•°å­—ï¼Œä¹Ÿå¯ä»¥ç”¨å…·ä½“çš„æœ€ç»ˆç»“æœ</li><li>æœ‰æ—¶ä½ å¯èƒ½æ— æ³•å…·ä½“æè¿°R2çš„æœ€ç»ˆç»“æœï¼Œæˆ–è€…æ ¹æœ¬ä¸èƒ½æè¿°ï¼Œè¿™ç§æƒ…å†µï¼Œåªéœ€åœ¨R2éƒ¨åˆ†å†™ï¼šå¦‚æœé—®é¢˜å¾—åˆ°è§£å†³ï¼Œä½ å¸Œæœ›è¾¾åˆ°çš„çŠ¶æ€</li></ul><h3 id="å‘æ˜è¯»è€…çš„ç–‘é—®"><a href="#å‘æ˜è¯»è€…çš„ç–‘é—®" class="headerlink" title="å‘æ˜è¯»è€…çš„ç–‘é—®"></a>å‘æ˜è¯»è€…çš„ç–‘é—®</h3><ul><li>å±•å¼€é—®é¢˜çš„åŸºæœ¬å†…å®¹åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¯»æ‰¾è¯»è€…çš„ç–‘é—®</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg13.jpg" alt="è¯»è€…å¸Œæœ›è§£å†³çš„é—®é¢˜å¤§æ¦‚"></p><h3 id="å¼€å§‹å†™åºè¨€"><a href="#å¼€å§‹å†™åºè¨€" class="headerlink" title="å¼€å§‹å†™åºè¨€"></a>å¼€å§‹å†™åºè¨€</h3><ul><li>é’ˆå¯¹ä¸Šå›¾7ç§é—®é¢˜ï¼Œå†™å‡ºä¸åŒçš„åºè¨€</li></ul><h4 id="1ã€æˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ"><a href="#1ã€æˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ" class="headerlink" title="1ã€æˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ"></a>1ã€æˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg14.jpg" alt="1"></p><h4 id="2ã€æˆ‘ä»¬æ˜¯å¦åº”è¯¥åšæˆ‘ä»¬æƒ³åšçš„äº‹"><a href="#2ã€æˆ‘ä»¬æ˜¯å¦åº”è¯¥åšæˆ‘ä»¬æƒ³åšçš„äº‹" class="headerlink" title="2ã€æˆ‘ä»¬æ˜¯å¦åº”è¯¥åšæˆ‘ä»¬æƒ³åšçš„äº‹"></a>2ã€æˆ‘ä»¬æ˜¯å¦åº”è¯¥åšæˆ‘ä»¬æƒ³åšçš„äº‹</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg14.jpg" alt="2"></p><h4 id="3ã€æˆ‘ä»¬åº”è¯¥å¦‚ä½•åšæˆ‘ä»¬æƒ³åšçš„äº‹"><a href="#3ã€æˆ‘ä»¬åº”è¯¥å¦‚ä½•åšæˆ‘ä»¬æƒ³åšçš„äº‹" class="headerlink" title="3ã€æˆ‘ä»¬åº”è¯¥å¦‚ä½•åšæˆ‘ä»¬æƒ³åšçš„äº‹"></a>3ã€æˆ‘ä»¬åº”è¯¥å¦‚ä½•åšæˆ‘ä»¬æƒ³åšçš„äº‹</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg16.jpg" alt="3"></p><h4 id="4ã€è§£å†³æ–¹æ¡ˆè¡Œä¸é€šï¼Œæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ"><a href="#4ã€è§£å†³æ–¹æ¡ˆè¡Œä¸é€šï¼Œæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ" class="headerlink" title="4ã€è§£å†³æ–¹æ¡ˆè¡Œä¸é€šï¼Œæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ"></a>4ã€è§£å†³æ–¹æ¡ˆè¡Œä¸é€šï¼Œæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg17.jpg" alt="4"></p><h4 id="5ã€æˆ‘ä»¬åº”è¯¥é€‰å“ªç§æ–¹æ¡ˆ"><a href="#5ã€æˆ‘ä»¬åº”è¯¥é€‰å“ªç§æ–¹æ¡ˆ" class="headerlink" title="5ã€æˆ‘ä»¬åº”è¯¥é€‰å“ªç§æ–¹æ¡ˆ"></a>5ã€æˆ‘ä»¬åº”è¯¥é€‰å“ªç§æ–¹æ¡ˆ</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg18.jpg" alt="5"></p><h4 id="6ã€æˆ‘ä»¬åº”è¯¥é‡‡ç”¨å“ªäº›æˆ˜ç•¥"><a href="#6ã€æˆ‘ä»¬åº”è¯¥é‡‡ç”¨å“ªäº›æˆ˜ç•¥" class="headerlink" title="6ã€æˆ‘ä»¬åº”è¯¥é‡‡ç”¨å“ªäº›æˆ˜ç•¥"></a>6ã€æˆ‘ä»¬åº”è¯¥é‡‡ç”¨å“ªäº›æˆ˜ç•¥</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg19.jpg" alt="6"></p><h4 id="7ã€æˆ‘ä»¬å­˜åœ¨é—®é¢˜å—"><a href="#7ã€æˆ‘ä»¬å­˜åœ¨é—®é¢˜å—" class="headerlink" title="7ã€æˆ‘ä»¬å­˜åœ¨é—®é¢˜å—"></a>7ã€æˆ‘ä»¬å­˜åœ¨é—®é¢˜å—</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg20.jpg" alt="7"></p><h3 id="å®æˆ˜æ¡ˆä¾‹"><a href="#å®æˆ˜æ¡ˆä¾‹" class="headerlink" title="å®æˆ˜æ¡ˆä¾‹"></a>å®æˆ˜æ¡ˆä¾‹</h3><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg21.jpg" alt="8"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg22.jpg" alt="9"></p><h2 id="ç¬¬9ç« ï¼šç»“æ„åŒ–åˆ†æé—®é¢˜"><a href="#ç¬¬9ç« ï¼šç»“æ„åŒ–åˆ†æé—®é¢˜" class="headerlink" title="ç¬¬9ç« ï¼šç»“æ„åŒ–åˆ†æé—®é¢˜"></a>ç¬¬9ç« ï¼šç»“æ„åŒ–åˆ†æé—®é¢˜</h2><ul><li>åˆ†æé—®é¢˜çš„æ ‡å‡†æµç¨‹ï¼š<ol><li>æ”¶é›†ä¿¡æ¯</li><li>æè¿°å‘ç°</li><li>å¾—å‡ºç»“è®º</li><li>æå‡ºæ–¹æ¡ˆ</li></ol></li></ul><h3 id="ä»ä¿¡æ¯èµ„æ–™å…¥æ‰‹-ä¸€èˆ¬çš„æ–¹æ³•"><a href="#ä»ä¿¡æ¯èµ„æ–™å…¥æ‰‹-ä¸€èˆ¬çš„æ–¹æ³•" class="headerlink" title="ä»ä¿¡æ¯èµ„æ–™å…¥æ‰‹-ä¸€èˆ¬çš„æ–¹æ³•"></a>ä»ä¿¡æ¯èµ„æ–™å…¥æ‰‹-ä¸€èˆ¬çš„æ–¹æ³•</h3><ul><li>ä¸è®ºå®¢æˆ·å­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Œéƒ½ä»å…¨å…¬å¸æˆ–å…¨è¡Œä¸šåˆ†æå…¥æ‰‹</li><li>æ”¶é›†å¤§é‡èµ„æ–™å†è¿›è¡Œåˆ†æä¼šè€—è´¹å¤§é‡çš„æ—¶é—´å’Œé‡‘é’±</li></ul><h3 id="è®¾è®¡è¯Šæ–­æ¡†æ¶-ä½œè€…æå‡ºçš„ç»“æ„åŒ–åˆ†ææ–¹æ³•"><a href="#è®¾è®¡è¯Šæ–­æ¡†æ¶-ä½œè€…æå‡ºçš„ç»“æ„åŒ–åˆ†ææ–¹æ³•" class="headerlink" title="è®¾è®¡è¯Šæ–­æ¡†æ¶-ä½œè€…æå‡ºçš„ç»“æ„åŒ–åˆ†ææ–¹æ³•"></a>è®¾è®¡è¯Šæ–­æ¡†æ¶-ä½œè€…æå‡ºçš„ç»“æ„åŒ–åˆ†ææ–¹æ³•</h3><ul><li>ç»“æ„åŒ–åˆ†æçš„æ–¹æ³•æœ‰3ç§<ol><li>å‘ˆç°æœ‰å½¢çš„ç»“æ„</li><li>å¯»æ‰¾å› æœå…³ç³»å’Œå½’ç±»åˆ†ç»„</li><li>ä¸ºäº†æ‰¾å‡ºäº§ç”Ÿé—®é¢˜çš„åŸå› </li></ol></li></ul><h4 id="å‘ˆç°æœ‰å½¢çš„ç»“æ„"><a href="#å‘ˆç°æœ‰å½¢çš„ç»“æ„" class="headerlink" title="å‘ˆç°æœ‰å½¢çš„ç»“æ„"></a>å‘ˆç°æœ‰å½¢çš„ç»“æ„</h4><ul><li>ä»»ä½•ä¸€å®¶ä¼ä¸šæˆ–è¡Œä¸šçš„å…·ä½“é¢†åŸŸéƒ½åº”è¯¥æœ‰æ¸…æ™°çš„ç»“æ„</li><li>å³åŒ…æ‹¬ç”±ä¸åŒå•ä½ç»„æˆçš„ç³»ç»Ÿï¼Œå„è‡ªå®Œæˆç‰¹å®šçš„åŠŸèƒ½</li><li>ç”»ä¸€å¹…ç³»ç»Ÿçš„ç°å†µæˆ–ç†æƒ³çŠ¶å†µçš„å›¾ï¼Œå¸®åŠ©ä½ åˆ†æå’Œè§£å†³é—®é¢˜</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg23.jpg" alt="è¡Œä¸šä¸šåŠ¡æµç¨‹"></p><h4 id="å¯»æ‰¾å› æœå…³ç³»"><a href="#å¯»æ‰¾å› æœå…³ç³»" class="headerlink" title="å¯»æ‰¾å› æœå…³ç³»"></a>å¯»æ‰¾å› æœå…³ç³»</h4><ul><li>è¯Šæ–­é—®é¢˜çš„ç¬¬äºŒç§æ–¹æ³•æ˜¯å¯»æ‰¾å…·æœ‰å› æœå…³ç³»çš„è¦ç´ ï¼Œè¡Œä¸ºæˆ–ä»»åŠ¡ï¼Œå¾—å‡ºè¯Šæ–­ç»“æœ</li></ul><h4 id="å°†äº§ç”Ÿé—®é¢˜çš„å¯èƒ½åŸå› åˆ†ç±»"><a href="#å°†äº§ç”Ÿé—®é¢˜çš„å¯èƒ½åŸå› åˆ†ç±»" class="headerlink" title="å°†äº§ç”Ÿé—®é¢˜çš„å¯èƒ½åŸå› åˆ†ç±»"></a>å°†äº§ç”Ÿé—®é¢˜çš„å¯èƒ½åŸå› åˆ†ç±»</h4><ul><li>ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯å°†æ‰€æœ‰å¯èƒ½çš„åŸå› æŒ‰ç›¸ä¼¼æ€§åˆ†ç±»</li></ul><h3 id="ä½¿ç”¨è¯Šæ–­æ¡†æ¶"><a href="#ä½¿ç”¨è¯Šæ–­æ¡†æ¶" class="headerlink" title="ä½¿ç”¨è¯Šæ–­æ¡†æ¶"></a>ä½¿ç”¨è¯Šæ–­æ¡†æ¶</h3><h3 id="å»ºç«‹é€»è¾‘æ ‘"><a href="#å»ºç«‹é€»è¾‘æ ‘" class="headerlink" title="å»ºç«‹é€»è¾‘æ ‘"></a>å»ºç«‹é€»è¾‘æ ‘</h3><ul><li>é€»è¾‘æ ‘å¯ä»¥è§£å†³æˆ‘ä»¬èƒ½åšä»€ä¹ˆï¼Ÿæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆçš„é—®é¢˜</li><li>ä½¿ç”¨é€»è¾‘æ ‘å¯ä»¥ä»é€»è¾‘ä¸Šæ‰¾å‡ºè§£å†³é—®é¢˜çš„å¯èƒ½æ–¹æ¡ˆ</li><li>ç”¨é€»è¾‘æ ‘å±•ç¤ºå„ç»„æ´»åŠ¨çš„ç»„ä¸ç»„ä¹‹é—´çš„ç›¸äº’å…³ç³»çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œé€»è¾‘åˆ†æï¼Œæ‰¾å‡ºå„ç»„æ€æƒ³çš„ç¼ºé™·</li></ul><h3 id="æ˜¯éé—®é¢˜åˆ†æ"><a href="#æ˜¯éé—®é¢˜åˆ†æ" class="headerlink" title="æ˜¯éé—®é¢˜åˆ†æ"></a>æ˜¯éé—®é¢˜åˆ†æ</h3><ul><li>å»ºç«‹è¯Šæ–­æ¡†æ¶çš„è¿‡ç¨‹æœ‰æ—¶å€™è¢«ç§°ä¸ºâ€œæ˜¯éé—®é¢˜åˆ†æâ€ã€‚ä½†æ˜¯â€œæ˜¯éé—®é¢˜åˆ†æâ€ä¸€è¯å¹¿ä¹‰ä¸ŠæŒ‡å‡ ä¹æ‰€æœ‰çš„é€»è¾‘æ ‘</li></ul><h1 id="ç¬¬å››ç¯‡ï¼šæ¼”ç¤ºçš„é€»è¾‘"><a href="#ç¬¬å››ç¯‡ï¼šæ¼”ç¤ºçš„é€»è¾‘" class="headerlink" title="ç¬¬å››ç¯‡ï¼šæ¼”ç¤ºçš„é€»è¾‘"></a>ç¬¬å››ç¯‡ï¼šæ¼”ç¤ºçš„é€»è¾‘</h1><h2 id="ç¬¬10ç« ï¼šåœ¨ä¹¦é¢ä¸Šå‘ˆç°é‡‘å­—å¡”"><a href="#ç¬¬10ç« ï¼šåœ¨ä¹¦é¢ä¸Šå‘ˆç°é‡‘å­—å¡”" class="headerlink" title="ç¬¬10ç« ï¼šåœ¨ä¹¦é¢ä¸Šå‘ˆç°é‡‘å­—å¡”"></a>ç¬¬10ç« ï¼šåœ¨ä¹¦é¢ä¸Šå‘ˆç°é‡‘å­—å¡”</h2><p>å†™é•¿ç¯‡æ–‡ç« æ—¶ï¼Œåœ¨é¡µé¢ä¸Šå‘ˆç°é‡‘å­—å¡”å±‚çº§çš„æ–¹æ³•å¾ˆå¤šï¼Œå¸¸è§çš„æœ‰ï¼š</p><ol><li>å¤šçº§æ ‡é¢˜æ³•</li><li>ä¸‹åˆ’çº¿æ³•</li><li>æ•°å­—ç¼–å·æ³•</li><li>è¡Œé¦–ç¼©è¿›æ³•</li><li>é¡¹ç›®ç¬¦å·æ³•</li></ol><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg24.jpg" alt="å¤šçº§æ ‡é¢˜"></p><h3 id="çªå‡ºæ˜¾ç¤ºæ–‡ç« çš„æ¡†æ¶ç»“æ„"><a href="#çªå‡ºæ˜¾ç¤ºæ–‡ç« çš„æ¡†æ¶ç»“æ„" class="headerlink" title="çªå‡ºæ˜¾ç¤ºæ–‡ç« çš„æ¡†æ¶ç»“æ„"></a>çªå‡ºæ˜¾ç¤ºæ–‡ç« çš„æ¡†æ¶ç»“æ„</h3><ul><li>æ–‡ç« çŸ­ï¼Œæ”¯æŒæ¯ä¸€å…³é”®å¥è¦ç‚¹çš„æ®µè½å°‘äº2ä¸ªï¼Œè¯»è€…å¾ˆå®¹æ˜“æ˜ç™½æ–‡ä¸­è¦ç‚¹åŠå…¶ç›¸äº’å…³ç³»ï¼Œåˆ™ç»™==è¦ç‚¹åŠ ä¸Šä¸‹åˆ’çº¿==å³å¯</li><li>æ–‡ç« é•¿ï¼Œæ”¯æŒæ¯ä¸€å…³é”®å¥è¦ç‚¹çš„æ®µè½å¤šäº2ä¸ªï¼Œåˆ™ä½¿ç”¨==æ ‡é¢˜ä»‹ç»==æ¥é˜è¿°è§‚ç‚¹</li></ul><h4 id="å¤šçº§æ ‡é¢˜æ³•"><a href="#å¤šçº§æ ‡é¢˜æ³•" class="headerlink" title="å¤šçº§æ ‡é¢˜æ³•"></a>å¤šçº§æ ‡é¢˜æ³•</h4><ul><li>ä¸åŒå±‚æ¬¡çš„æ€æƒ³ç”¨ä¸åŒçš„æ ‡è®°åŒºåˆ†</li><li>å±‚æ¬¡è¶Šä½çš„æ€æƒ³ç¦»é¡µé¢çš„å³ç«¯è¶Šè¿‘</li><li>åŒä¸€å±‚æ¬¡çš„æ€æƒ³é‡‡ç”¨åŒä¸€è¡¨ç°å½¢å¼</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg25.jpg" alt="å¤šçº§æ ‡é¢˜æ³•"></p><p><strong>æ³¨æ„ç‚¹ï¼š</strong></p><ol><li>æ¯ä¸€å±‚çº§çš„æ ‡é¢˜ä¸å¯èƒ½åªæœ‰ä¸€ä¸ªï¼Œæ–‡ç« é‡Œä¸å¯èƒ½åªæœ‰ä¸€ä¸ªç« æ ‡é¢˜ï¼Œä¸€ä¸ªèŠ‚æ ‡é¢˜ï¼Œä¸€ä¸ªå°èŠ‚æ ‡é¢˜ï¼Œä¸€ä¸ªç¼–å·æ®µè½ç­‰ç­‰</li><li>ç›¸åŒçš„æ€æƒ³åº”ä½¿ç”¨ç›¸åŒçš„å¥å‹ï¼Œæ¯ä¸€ç»„æ€æƒ³éƒ½æ˜¯åŒä¸€ç±»çš„æ€æƒ³ï¼Œä¸ºäº†å¼ºè°ƒä¸€è‡´æ€§ï¼Œä¸€ç»„ä¸­çš„æ‰€æœ‰æ ‡é¢˜åº”è¯¥é‡‡ç”¨åŒæ ·çš„å¥å­é¡ºåºï¼Œå³å¯¹ä»—ã€‚å¦‚æœç¬¬ä¸€å°èŠ‚çš„æ ‡é¢˜ä¸­ç¬¬ä¸€ä¸ªè¯æ˜¯åè¯ï¼Œå…¶ä»–å„å°èŠ‚æ ‡é¢˜çš„ç¬¬ä¸€ä¸ªè¯ä¹Ÿåº”è¯¥æ˜¯åè¯</li><li>æ ‡é¢˜ç”¨è¯åº”æç‚¼æ€æƒ³çš„ç²¾é«“ï¼Œå°½é‡ç®€æ˜æ‰¼è¦</li><li>æ ‡é¢˜ä¸æ­£æ–‡åº”åˆ†å¼€è€ƒè™‘ï¼Œæ ‡é¢˜ä¸ºçœ¼çƒï¼Œæ­£æ–‡ä¸ºå¤´è„‘</li><li>æ¯ç»„æ ‡é¢˜åº”æå‰é›†ä¸­ä»‹ç»ï¼Œä¸ºäº†è¯´æ˜è¯¥ç»„æ ‡é¢˜å°†è§£é‡Šæˆ–è®¨è®ºçš„æ³¨æ„è®ºç‚¹ï¼Œä»¥åŠå°†è¦æå‡ºçš„æ€æƒ³è§‚ç‚¹</li><li>ä¸è¦æ»¥ç”¨æ ‡é¢˜ï¼Œåªæœ‰å½“æ ‡é¢˜æœ‰åŠ©äºè¯´æ¸…æ¥šä½ æƒ³è¡¨è¾¾çš„ä¿¡æ¯ï¼Œæœ‰åŠ©äºè¯»è€…é¢†ä¼šä½ æ€æƒ³çš„ç»†èŠ‚æ—¶æ‰ä½¿ç”¨</li></ol><h4 id="ä¸‹åˆ’çº¿æ³•"><a href="#ä¸‹åˆ’çº¿æ³•" class="headerlink" title="ä¸‹åˆ’çº¿æ³•"></a>ä¸‹åˆ’çº¿æ³•</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg26.jpg" alt="ä¸‹åˆ’çº¿æ³•"></p><ul><li>å›¾ä¸­æ’ç‰ˆæ ¼å¼æ¯”è¾ƒéš¾çœ‹ï¼Œå¾ˆå¤šäººé‡‡ç”¨ä¸‹é¢çš„ä¸‹åˆ’çº¿æ³•</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg27.jpg" alt="ä¸‹åˆ’çº¿æ³•-1"></p><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>å¿…é¡»ä¸¥æ ¼ä½¿ç”¨ç–‘é—®/å›ç­”ç»“æ„</li><li>å¿…é¡»æ³¨æ„è®ºç‚¹çš„æªè¾ï¼Œè¯´æ˜è®ºç‚¹çš„ä¿¡æ¯è¶Šå°‘è¶Šå¥½</li><li>å¿…é¡»åšå†³æŠŠè®ºç‚¹é™åˆ¶åœ¨æ¼”ç»æ¨ç†å’Œå½’çº³æ¨ç†çš„æ¡†æ¶å†…</li></ol><h4 id="æ•°å­—ç¼–å·æ³•"><a href="#æ•°å­—ç¼–å·æ³•" class="headerlink" title="æ•°å­—ç¼–å·æ³•"></a>æ•°å­—ç¼–å·æ³•</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg28.jpg" alt="æ•°å­—ç¼–å·æ³•"></p><h4 id="è¡Œé¦–ç¼©è¿›æ³•"><a href="#è¡Œé¦–ç¼©è¿›æ³•" class="headerlink" title="è¡Œé¦–ç¼©è¿›æ³•"></a>è¡Œé¦–ç¼©è¿›æ³•</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg29.jpg" alt="è¡Œé¦–ç¼©è¿›æ³•"></p><ul><li>é‡‡ç”¨è¡Œé¦–ç¼©è¿›æ³•æ—¶ï¼Œè¦ç”¨ç›¸åŒçš„å¥å‹è¡¨è¾¾è§‚ç‚¹</li></ul><h4 id="é¡¹ç›®ç¬¦å·æ³•"><a href="#é¡¹ç›®ç¬¦å·æ³•" class="headerlink" title="é¡¹ç›®ç¬¦å·æ³•"></a>é¡¹ç›®ç¬¦å·æ³•</h4><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/eg30.jpg" alt="é¡¹ç›®ç¬¦å·æ³•"></p><h3 id="ä¸Šä¸‹æ–‡ä¹‹é—´è¦æœ‰è¿‡æ¸¡"><a href="#ä¸Šä¸‹æ–‡ä¹‹é—´è¦æœ‰è¿‡æ¸¡" class="headerlink" title="ä¸Šä¸‹æ–‡ä¹‹é—´è¦æœ‰è¿‡æ¸¡"></a>ä¸Šä¸‹æ–‡ä¹‹é—´è¦æœ‰è¿‡æ¸¡</h3><ul><li>å†™å®Œåºè¨€åï¼Œè¿›å…¥æ–‡ç« æ­£æ–‡ï¼Œéœ€è¦å†™ä¸€æ®µç®€çŸ­çš„æ–‡å­—ä»‹ç»æ¯ä¸€å…³é”®å¥è¦ç‚¹</li><li>ä¸è¦æŠŠä¸¤ä¸ªç« èŠ‚åœ¨åšä»€ä¹ˆè¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œåº”è¯¥æŠŠå®ƒä»¬è¯´çš„å†…å®¹ï¼ˆå³ä¸»è¦æ€æƒ³è§‚ç‚¹ï¼‰è¿æ¥åœ¨ä¸€èµ·</li></ul><h4 id="è®²æ•…äº‹"><a href="#è®²æ•…äº‹" class="headerlink" title="è®²æ•…äº‹"></a>è®²æ•…äº‹</h4><ul><li>ä¸€ç§æŠŠè¯»è€…å¸¦å…¥å…³é”®å¥è¦ç‚¹çš„å¥½æ–¹æ³•æ˜¯å‘ä»–è®²è¿°èƒŒæ™¯-å†²çª-ç–‘é—®ä¸‰éƒ¨æ›²ï¼Œè‡ªç„¶è€Œç„¶åœ°å¼•å‡ºå…³é”®å¥è¦ç‚¹ä½œä¸ºæ•…äº‹çš„ç­”æ¡ˆ</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200528092834833.png" alt="image-20200528092834833"></p><h4 id="æ‰¿ä¸Šå¯ä¸‹"><a href="#æ‰¿ä¸Šå¯ä¸‹" class="headerlink" title="æ‰¿ä¸Šå¯ä¸‹"></a>æ‰¿ä¸Šå¯ä¸‹</h4><ul><li>ä»é‡‘å­—å¡”ç»“æ„çš„å‰ä¸€éƒ¨åˆ†æŒ‘é€‰ä¸€ä¸ªè¯ã€ä¸€å¥çŸ­è¯­æˆ–æ€»ç»“å…¶ä¸­å¿ƒæ€æƒ³ï¼ŒæŠŠå®ƒç”¨åœ¨ä¸‹ä¸€éƒ¨åˆ†çš„èµ·å§‹å¥ä¸­</li></ul><h4 id="æ€»ç»“å„éƒ¨åˆ†å†…å®¹"><a href="#æ€»ç»“å„éƒ¨åˆ†å†…å®¹" class="headerlink" title="æ€»ç»“å„éƒ¨åˆ†å†…å®¹"></a>æ€»ç»“å„éƒ¨åˆ†å†…å®¹</h4><ul><li>æœ‰æ—¶é‡åˆ°ä¸€ä¸ªç« èŠ‚ç‰¹åˆ«é•¿æˆ–ç‰¹åˆ«å¤æ‚ï¼Œå¸Œæœ›åœä¸‹æ¥ä½œä¸€ä¸ªå®Œæ•´æ€»ç»“åå†ç»§ç»­å¾€ä¸‹å†™ã€‚è¿™æ—¶è®°ä½å…¶ç›®çš„æ˜¯å°½é‡å‡ç»ƒåœ°å¤è¿°å‰æ–‡çš„ä¸»è¦è®ºç‚¹å’ŒåŸºè°ƒ</li></ul><h4 id="å¾—å‡ºå®Œæ•´ç»“è®º"><a href="#å¾—å‡ºå®Œæ•´ç»“è®º" class="headerlink" title="å¾—å‡ºå®Œæ•´ç»“è®º"></a>å¾—å‡ºå®Œæ•´ç»“è®º</h4><ul><li>äºšé‡Œå£«å¤šå¾·å…³äºå¦‚ä½•ä¸‹ç»“è®ºçš„å¿ å‘Š</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200528094014157.png" alt="image-20200528094014157"></p><h4 id="è¯´æ˜ä¸‹ä¸€æ­¥è¡ŒåŠ¨"><a href="#è¯´æ˜ä¸‹ä¸€æ­¥è¡ŒåŠ¨" class="headerlink" title="è¯´æ˜ä¸‹ä¸€æ­¥è¡ŒåŠ¨"></a>è¯´æ˜ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h4><ul><li>å¦‚æœä½ çš„æ–‡ç« æ˜¯å»ºè®®è¯»è€…é‡‡å–ä¸€ç³»åˆ—ä½ è®¤ä¸ºä»–æœ‰å¯èƒ½é‡‡å–çš„è¡ŒåŠ¨ï¼Œè€Œä¸”ç¯‡å¹…è¾ƒé•¿ï¼Œå°±æœ‰å¿…è¦è¯´æ˜ä¸‹ä¸€æ­¥è¡ŒåŠ¨</li></ul><h2 id="ç¬¬11ç« ï¼šåœ¨PPTä¸­å‘ˆç°é‡‘å­—å¡”"><a href="#ç¬¬11ç« ï¼šåœ¨PPTä¸­å‘ˆç°é‡‘å­—å¡”" class="headerlink" title="ç¬¬11ç« ï¼šåœ¨PPTä¸­å‘ˆç°é‡‘å­—å¡”"></a>ç¬¬11ç« ï¼šåœ¨PPTä¸­å‘ˆç°é‡‘å­—å¡”</h2><p>è®¾è®¡PPTæ¼”ç¤ºæ–‡ç¨¿çš„äººå¿…é¡»äº†è§£å’ŒæŒæ¡çš„æœ€åŸºæœ¬è§„åˆ™ï¼š</p><ol><li>æ–‡å­—å¹»ç¯ç‰‡åº”åªåŒ…å«æœ€é‡è¦çš„ã€ç»è¿‡é€‚å½“åˆ†ç»„å’Œæ€»ç»“çš„æ€æƒ³ï¼Œå™è¿°æ—¶åº”å°½é‡ç®€æ´</li><li>æ¼”ç¤ºæ–‡ç¨¿åº”å›¾æ–‡å¹¶èŒ‚ï¼Œä½¿ç”¨å„ç§å›¾è¡¨ç›¸é…åˆ</li><li>æ¼”ç¤ºæ–‡ç¨¿åº”å‘ˆç°ç»è¿‡æ·±æ€ç†Ÿè™‘åçš„æ•…äº‹æ¢—æ¦‚å’Œå‰§æœ¬</li></ol><p>æ¼”ç¤ºæ–‡ç¨¿åŒ…æ‹¬ä¸¤ç±»å¹»ç¯ç‰‡ï¼š</p><ol><li>æ–‡å­—</li><li>å›¾è¡¨</li></ol><p>ç†æƒ³çš„æ¯”ä¾‹æ˜¯å›¾è¡¨å 90%ï¼Œæ–‡å­—å 10%ï¼Œå…¶å„è‡ªçš„ä½œç”¨æ˜¯ï¼š</p><ol><li>è¯´æ˜æ¼”ç¤ºæ–‡ç¨¿çš„æ¡†æ¶ç»“æ„ï¼ˆæ–‡å­—å¹»ç¯ç‰‡ï¼‰</li><li>å¼ºè°ƒé‡è¦çš„æ€æƒ³ã€è§‚ç‚¹ã€ç»“è®ºã€è®ºç‚¹ã€å»ºè®®æˆ–è¦é‡‡å–çš„æªæ–½ç­‰ï¼ˆæ–‡å­—å¹»ç¯ç‰‡ï¼‰</li><li>é˜æ˜å•ç”¨æ–‡å­—éš¾ä»¥è¯´æ¸…æ¥šçš„æ•°æ®ã€å…³ç³»ï¼ˆå›¾è¡¨ï¼‰</li></ol><h3 id="è®¾è®¡æ–‡å­—PPTå¹»ç¯ç‰‡"><a href="#è®¾è®¡æ–‡å­—PPTå¹»ç¯ç‰‡" class="headerlink" title="è®¾è®¡æ–‡å­—PPTå¹»ç¯ç‰‡"></a>è®¾è®¡æ–‡å­—PPTå¹»ç¯ç‰‡</h3><ul><li>ä½ æ‰€è¯´çš„å’Œä½ åœ¨å±å¹•ä¸Šæ¼”ç¤ºçš„åº”è¯¥æœ‰æ˜æ˜¾çš„åŒºåˆ«</li></ul><h4 id="æ¸…æ¥šä½ è¦è¯´çš„å†…å®¹"><a href="#æ¸…æ¥šä½ è¦è¯´çš„å†…å®¹" class="headerlink" title="æ¸…æ¥šä½ è¦è¯´çš„å†…å®¹"></a>æ¸…æ¥šä½ è¦è¯´çš„å†…å®¹</h4><ul><li>å¥½çš„å¹»ç¯ç‰‡æ€»æ˜¯å°½å¯èƒ½ç›´æ¥ç®€å•åœ°ä¼ é€’ä¿¡æ¯ï¼Œä¸æŠŠæ–‡å­—æµªè´¹åœ¨é‚£äº›å¯ä»¥é€šè¿‡å£å¤´è¡¨è¾¾çš„è½¬æŠ˜æ€§æˆ–ä»‹ç»æ€§è¯­è¨€ä¸Š</li><li>æ–‡å­—å¹»ç¯ç‰‡æœ€å¥½åªç”¨äºå¼ºè°ƒé‡‘å­—å¡”ä¸­çš„ä¸»è¦è®ºç‚¹ï¼Œå¦‚å›¾æ‰€ç¤º</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200529094300768.png" alt="image-20200529094300768"></p><h4 id="æ¸…æ¥šä½ è¦æ¼”ç¤ºçš„å†…å®¹"><a href="#æ¸…æ¥šä½ è¦æ¼”ç¤ºçš„å†…å®¹" class="headerlink" title="æ¸…æ¥šä½ è¦æ¼”ç¤ºçš„å†…å®¹"></a>æ¸…æ¥šä½ è¦æ¼”ç¤ºçš„å†…å®¹</h4><p>æŒ‡å¯¼æ€§åŸåˆ™</p><ol><li>æ¯æ¬¡åªæ¼”ç¤ºå’Œè¯´æ˜ä¸€ä¸ªè®ºç‚¹</li><li>è®ºç‚¹åº”ä½¿ç”¨å®Œæ•´çš„é™ˆè¿°å¥ï¼ˆé”€å”®å‰æ™¯çœ‹å¥½ï¼‰ï¼Œè€Œä¸æ˜¯æ ‡é¢˜æ€§è¯­è¨€ï¼ˆé”€å”®å‰æ™¯ï¼‰</li><li>æ–‡å­—åº”å°½é‡ç®€çŸ­</li><li>ä½¿ç”¨ç®€å•çš„è¯æ±‡å’Œæ•°å­—ã€æ¯”å¦‚490ä¸‡ç¾å…ƒå°±æ¯”4876987ç¾å…ƒå®¹æ˜“è®°</li><li>å­—å·åº”è¶³å¤Ÿå¤§ï¼Œæœ€è¿œä¸€ä½è§‚ä¼—åˆ°å±å¹•çš„è·ç¦»ï¼ˆè‹±å°ºï¼‰é™¤ä»¥32ï¼Œå¾—åˆ°çš„æ˜¯ä½ çš„PPTå¯ä»¥ç”¨çš„æœ€å°å­—å·ï¼ˆè‹±å¯¸ï¼‰</li><li>æ³¨æ„å¹»ç¯ç‰‡çš„è¶£å‘³æ€§</li><li>ç”¨é€çº§å±•å¼€å‘ˆç°ï¼Œæé«˜è¶£å‘³æ€§ï¼Œå¦‚ä¸‹å›¾</li></ol><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200601092702072.png" alt="image-20200601092702072"></p><h3 id="è®¾è®¡å›¾è¡¨PPTå¹»ç¯ç‰‡"><a href="#è®¾è®¡å›¾è¡¨PPTå¹»ç¯ç‰‡" class="headerlink" title="è®¾è®¡å›¾è¡¨PPTå¹»ç¯ç‰‡"></a>è®¾è®¡å›¾è¡¨PPTå¹»ç¯ç‰‡</h3><ul><li>å›¾è¡¨å¹»ç¯ç‰‡ä¼ é€’çš„ä¿¡æ¯åº”è¯¥å°½é‡ç®€å•æ˜“æ‡‚ï¼Œå› ä¸ºè§‚ä¼—æ²¡æœ‰æœºä¼šå¯¹å®ƒä»¬ä»”ç»†ç ”ç©¶å¹¶æ‰¾å‡ºå„ä¸ªéƒ¨åˆ†çš„å«ä¹‰</li><li>å›¾è¡¨å¹»ç¯ç‰‡é€šå¸¸ç”¨é¥¼å›¾ã€æ¡å½¢å›¾ã€æŸ±çŠ¶å›¾ã€æ›²çº¿å›¾æˆ–æ•£ç‚¹å›¾ï¼Œè¡¨ç¤ºæŸä¸€ç»“æ„æˆ–æµç¨‹çš„ç»„æˆéƒ¨åˆ†</li><li>åˆ¶ä½œå›¾è¡¨å¹»ç¯ç‰‡çš„è¯€çªæ˜¯ï¼šç¡®å®šä½ æƒ³ç”¨å›¾è¡¨å›ç­”çš„é—®é¢˜ï¼ŒæŠŠç­”æ¡ˆä½œä¸ºå›¾è¡¨çš„æ ‡é¢˜ï¼Œç„¶åé€‰æ‹©æœ€åˆé€‚è¡¨è¾¾è®ºç‚¹çš„å›¾è¡¨æ ·å¼</li></ul><h3 id="æ•…äº‹æ¢—æ¦‚"><a href="#æ•…äº‹æ¢—æ¦‚" class="headerlink" title="==æ•…äº‹æ¢—æ¦‚=="></a>==æ•…äº‹æ¢—æ¦‚==</h3><h4 id="å…·ä½“æ€ä¹ˆåš"><a href="#å…·ä½“æ€ä¹ˆåš" class="headerlink" title="å…·ä½“æ€ä¹ˆåš"></a>å…·ä½“æ€ä¹ˆåš</h4><p>ä»é‡‘å­—å¡”ç»“æ„åˆ°æ¼”ç¤ºæ–‡ç¨¿ï¼Œä½œè€…é€šå¸¸é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p><ol><li>åºè¨€å°½é‡å†™å¾—è¯¦ç»†ï¼ŒæŠŠæ¯ä¸ªæƒ³è¯´çš„è¯æ±‡æŒ‰ç…§å¸Œæœ›çš„é¡ºåºå†™ä¸‹æ¥</li><li>ç”¨å†™æ•…äº‹æ¢—æ¦‚çš„å½¢å¼ã€‚æ¯å¼ å¹»ç¯ç‰‡å†™ä½œçš„é¡ºåºï¼Œä»ä¸Šå¾€ä¸‹ä¾æ¬¡ä¸º<ol><li>åºè¨€å„è¦ç´ ã€</li><li>å…³é”®å¥è¦ç‚¹</li><li>å…³é”®å¥ä¸‹ä¸€å±‚æ¬¡çš„è®ºç‚¹</li></ol></li><li>åˆæ­¥å†³å®šä½ å‡†å¤‡é‡‡ç”¨çš„å‘ˆç°æ–¹æ³•ï¼Œåªè¦çŸ¥é“æ•°æ®çš„ç±»å‹å’Œæƒ³è¦è¡¨ç°ä½•ç§å…³ç³»å³å¯</li><li>å‡†å¤‡å¥½æ¯å¼ å¹»ç¯ç‰‡çš„è®²ç¨¿ï¼Œç¡®ä¿æ•´ä¸ªæ¼”ç¤ºåƒè®²æ•…äº‹ä¸€æ ·æµç•…</li><li>å®Œæˆå¹»ç¯ç‰‡çš„è®¾è®¡å’Œç»˜å›¾</li><li>æ’ç»ƒï¼Œæ’ç»ƒï¼Œå†æ’ç»ƒï¼</li></ol><p><strong>æç¤ºï¼š</strong>å¯ä»¥ç”¨ä¸€å¼ ç™½çº¸å†™æœ€ç®€å•çš„æ•…äº‹æ¢—æ¦‚ï¼ŒæŠŠå®ƒåˆ†æˆè‹¥å¹²ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸä»£è¡¨ä¸€å¼ ç©ºç™½å¹»ç¯ç‰‡ï¼Œå†™ä¸Šä½ æƒ³è¦é˜è¿°çš„è¦ç‚¹ï¼Œå¹¶è¯´æ˜å“ªäº›éœ€è¦ç”¨æ–‡å­—å¹»ç¯ç‰‡ï¼Œå“ªäº›éœ€è¦ç”¨å›¾ç‰‡å¹»ç¯ç‰‡</p><h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><ul><li>å°†ä»¥ä¸‹é‡‘å­—å¡”ç»“æ„å†™æˆå¹»ç¯ç‰‡</li><li>é‡‘å­—å¡”ç»“æ„</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200601094943816.png" alt="image-20200601094943816"></p><ul><li>å¹»ç¯ç‰‡</li></ul><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200601095046018.png" alt="image-20200601095046018"><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200601095102552.png" alt="image-20200601095102552"></p><h3 id="æœ¬ç« æ€»ç»“"><a href="#æœ¬ç« æ€»ç»“" class="headerlink" title="æœ¬ç« æ€»ç»“"></a>æœ¬ç« æ€»ç»“</h3><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200601095235815.png" alt="image-20200601095235815"></p><h2 id="ç¬¬12ç« ï¼šåœ¨å­—é‡Œè¡Œé—´å‘ˆç°é‡‘å­—å¡”"><a href="#ç¬¬12ç« ï¼šåœ¨å­—é‡Œè¡Œé—´å‘ˆç°é‡‘å­—å¡”" class="headerlink" title="ç¬¬12ç« ï¼šåœ¨å­—é‡Œè¡Œé—´å‘ˆç°é‡‘å­—å¡”"></a>ç¬¬12ç« ï¼šåœ¨å­—é‡Œè¡Œé—´å‘ˆç°é‡‘å­—å¡”</h2><p>åšåˆ°æ¡ç†æ¸…æ™°çš„ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul><li>é¦–å…ˆå†³å®šè¦è¯´æ˜çš„æ€æƒ³æˆ–è¦è¯æ˜çš„è®ºç‚¹</li><li>ç„¶åç”¨æ–‡å­—è¡¨ç°</li><li>å¼ºè¿«è‡ªå·±æƒ³è±¡å„ç§æ€æƒ³è§‚ç‚¹ä¹‹é—´çš„å†…åœ¨å…³ç³»ï¼Œå¤´è„‘é‡Œæœ‰äº†æ¸…æ™°çš„å›¾åƒåï¼Œå°±èƒ½ç«‹åˆ»æŠŠå®ƒè½¬æ¢æˆæ¸…æ¥šçš„å¥å­</li></ul><h3 id="ç”»è„‘å›¾"><a href="#ç”»è„‘å›¾" class="headerlink" title="ç”»è„‘å›¾"></a>ç”»è„‘å›¾</h3><ul><li>åˆ©ç”¨è„‘å›¾å¸®åŠ©è‡ªå·±è®°å¿†ï¼Œä¹Ÿè®©è‡ªå·±çš„æ–‡ç« èƒ½è¢«åˆ«äººè®°ä½</li></ul><h3 id="æŠŠå›¾åƒå¤åˆ¶æˆæ–‡å­—"><a href="#æŠŠå›¾åƒå¤åˆ¶æˆæ–‡å­—" class="headerlink" title="æŠŠå›¾åƒå¤åˆ¶æˆæ–‡å­—"></a>æŠŠå›¾åƒå¤åˆ¶æˆæ–‡å­—</h3><ul><li>æ–‡ç« è¦è®©è¯»è€…åœ¨é˜…è¯»æ—¶æ„Ÿåˆ°æ„‰æ‚¦ã€‚ç®€å•çš„æ–¹æ³•å°±æ˜¯ï¼šä¸»è§‚è‡†æƒ³é‚£äº›å½“åˆç”¨æ¥å¾—å‡ºæ€æƒ³çš„å›¾åƒ</li></ul><h1 id="é™„å½•ï¼šæœ¬ä¹¦è¦ç‚¹æ±‡æ€»"><a href="#é™„å½•ï¼šæœ¬ä¹¦è¦ç‚¹æ±‡æ€»" class="headerlink" title="é™„å½•ï¼šæœ¬ä¹¦è¦ç‚¹æ±‡æ€»"></a>é™„å½•ï¼šæœ¬ä¹¦è¦ç‚¹æ±‡æ€»</h1><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602093917094.png" alt="image-20200602093917094"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094149099.png" alt="image-20200602094149099"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094212128.png" alt="image-20200602094212128"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094234885.png" alt="image-20200602094234885"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094252755.png" alt="image-20200602094252755"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094323021.png" alt="image-20200602094323021"><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094340478.png" alt="image-20200602094340478"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094421615.png" alt="image-20200602094421615"><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094447994.png" alt="image-20200602094447994"><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094855941.png" alt="image-20200602094855941"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602094944007.png" alt="image-20200602094944007"><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602095019423.png" alt="image-20200602095019423"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602095102189.png" alt="image-20200602095102189"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602095118549.png" alt="image-20200602095118549"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602095128872.png" alt="image-20200602095128872"></p><p><img src="/2020/04/24/du-shu-bi-ji-zhi-jin-zi-ta-yuan-li/image-20200602095138041.png" alt="image-20200602095138041"></p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èŒåœºèƒ½åŠ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—å¹¿å‘Šä¹‹ç»†èŠ‚è¥é”€</title>
      <link href="/2020/04/14/ji-suan-guang-gao-zhi-xi-jie-ying-xiao/"/>
      <url>/2020/04/14/ji-suan-guang-gao-zhi-xi-jie-ying-xiao/</url>
      
        <content type="html"><![CDATA[<p><img src="/2020/04/14/ji-suan-guang-gao-zhi-xi-jie-ying-xiao/image-20210621155424363.png" alt="image-20210621155424363"></p><h1 id="ç¬¬ä¸€ç« ï¼šä½•ä¸ºå¸‚åœºè¥é”€"><a href="#ç¬¬ä¸€ç« ï¼šä½•ä¸ºå¸‚åœºè¥é”€" class="headerlink" title="ç¬¬ä¸€ç« ï¼šä½•ä¸ºå¸‚åœºè¥é”€"></a>ç¬¬ä¸€ç« ï¼šä½•ä¸ºå¸‚åœºè¥é”€</h1><h2 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><ul><li>å¸‚åœºè¥é”€åªæ˜¯å¸¸è¯†å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯çš„</li><li>å¸‚åœºè¥é”€åŸåˆ™é€‚ç”¨äºæ‰€æœ‰è¡Œä¸š</li><li>å¸‚åœºè¥é”€ä¸æ˜¯é”€å”®</li></ul><h2 id="è¯­å½•"><a href="#è¯­å½•" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>ä½ å¯ä»¥å€Ÿé‰´ä»»ä½•è¡Œä¸šä»»ä½•å…¬å¸çš„æˆåŠŸç»éªŒ</li><li>å¸‚åœºè¥é”€å·¥å…·ï¼ˆ4Pï¼‰è½¬åŒ–ä¸ºå®¢æˆ·ä½“éªŒï¼ˆ4Cï¼‰</li><li>å¸®åŠ©ä½ çš„å®¢æˆ·ï¼Œè®©ä»–ä»¬çš„ç”Ÿæ´»æ›´æ–¹ä¾¿ã€æ›´èˆ’é€‚ï¼Œè¿™æ ·åšä¼šå¸®ä½ çœé’±</li><li>ä¸€ä¸ªé—®é¢˜ä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ³•æœªå¿…å¤„äºåŒä¸€ä¸ªPçš„èŒƒç•´</li><li>å¯»æ‰¾æ— é¢˜ä¹‹è§£ï¼Œå¼€æ‹“åˆ›æ–°ä¹‹é“</li></ul><h2 id="4P-ç”Ÿäº§å•†çš„è§†è§’"><a href="#4P-ç”Ÿäº§å•†çš„è§†è§’" class="headerlink" title="4P-ç”Ÿäº§å•†çš„è§†è§’"></a>4P-ç”Ÿäº§å•†çš„è§†è§’</h2><ul><li>äº§å“</li><li>æ¸ é“</li><li>ä»·æ ¼</li><li>ä¿ƒé”€</li></ul><h2 id="4C-å®¢æˆ·çš„è§†è§’"><a href="#4C-å®¢æˆ·çš„è§†è§’" class="headerlink" title="4C-å®¢æˆ·çš„è§†è§’"></a>4C-å®¢æˆ·çš„è§†è§’</h2><ul><li>å®¢æˆ·çš„éœ€æ±‚ï¼Œè€Œä¸æ˜¯äº§å“</li><li>æˆæœ¬ï¼Œè€Œä¸æ˜¯ä»·æ ¼</li><li>æ²Ÿé€šï¼Œè€Œä¸æ˜¯ä¿ƒé”€</li><li>ä¾¿åˆ©ï¼Œè€Œä¸æ˜¯æ¸ é“</li></ul><p><img src="/2020/04/14/ji-suan-guang-gao-zhi-xi-jie-ying-xiao/4p_4c.jpg" alt="4P-4C"></p><h1 id="ç¬¬äºŒç« ï¼šå¸‚åœºè¥é”€çš„ç ”å‘"><a href="#ç¬¬äºŒç« ï¼šå¸‚åœºè¥é”€çš„ç ”å‘" class="headerlink" title="ç¬¬äºŒç« ï¼šå¸‚åœºè¥é”€çš„ç ”å‘"></a>ç¬¬äºŒç« ï¼šå¸‚åœºè¥é”€çš„ç ”å‘</h1><h2 id="è¯­å½•-1"><a href="#è¯­å½•-1" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>æ‰¾å‡ºä¸–ç•Œä¸Šæœ€æˆåŠŸçš„å…¬å¸ï¼Œç ”ç©¶å®ƒä»¬çš„å¸‚åœºè¥é”€æ–¹æ³•ï¼Œè°ƒæ•´ä¿®æ”¹ï¼Œä¸ºä½ æ‰€ç”¨</li><li>å¸‚åœºè¥é”€ä¸­ï¼Œå°åŠæ³•å¯ä»¥è§£å†³å¤§é—®é¢˜ï¼Œä½†æ˜¯ä½ å¿…é¡»å¾—åšä¸ªæœ‰å¿ƒäºº</li><li>ä½ çš„äº§å“ç¦»å¼€å·¥å‚åæƒ…å†µå¦‚ä½•å‘¢ï¼Ÿå¾—å»åšç ”å‘</li><li>å…¬å¸è‡³å°‘è¦æœ‰å‡ ä¸ªçœŸæ­£å¾—å¸‚åœºè¥é”€ç»ç†</li><li>å¯»æ‰¾è¯¥é—®å¾—é—®é¢˜</li><li>ä¸è¦è®©å¸‚åœºè¥é”€ç ”å‘æˆä¸ºç®¡ç†è€…äº‹ä¸šå‘å±•å¾—ç»Šè„šçŸ³</li><li>æŠŠè¿™ä¸€ç« å¾—å†…å®¹å°å‘ç»™å‘˜å·¥ï¼Œäººæ‰‹ä¸€å†Œ</li><li>æ„¿æ„å»è§‚å¯Ÿã€å°è¯•ã€æ¥å—æ–°æ–¹æ³•çš„äººæ˜¯å¾ˆå°‘çš„</li></ul><h1 id="ç¬¬ä¸‰ç« ï¼šä½œä¸ºä¸€ç§ç»è¥ç†å¿µçš„å¸‚åœºè¥é”€"><a href="#ç¬¬ä¸‰ç« ï¼šä½œä¸ºä¸€ç§ç»è¥ç†å¿µçš„å¸‚åœºè¥é”€" class="headerlink" title="ç¬¬ä¸‰ç« ï¼šä½œä¸ºä¸€ç§ç»è¥ç†å¿µçš„å¸‚åœºè¥é”€"></a>ç¬¬ä¸‰ç« ï¼šä½œä¸ºä¸€ç§ç»è¥ç†å¿µçš„å¸‚åœºè¥é”€</h1><h2 id="è¯­å½•-2"><a href="#è¯­å½•-2" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>ä¸€å®¶å…¬å¸çš„ä»·å€¼å–å†³äºå®ƒçš„å®¢æˆ·</li><li>å¦‚æœä½ å’Œä½ çš„å®¢æˆ·ç”Ÿæ´»åœ¨ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸–ç•Œï¼Œé‚£ä¹ˆä½ å¾ˆéš¾è§å…¶æ‰€è§</li><li>çˆ±å›è€…å”¯å›è€³</li><li>æ„ŸåŒèº«å—ï¼Œä½“ä¼šå®¢æˆ·çš„ç—›è‹¦</li><li>çœ‹æ¸…ç°å®</li><li>æ‰¾ä½ çš„å‰å®¢æˆ·è°ˆè°ˆ</li><li>ä»å®¢æˆ·ä¸­æ‹›è´¤çº³å£«</li><li>æœ€äº†è§£ä½ çš„å®¢æˆ·çš„ä¸“å®¶æ˜¯å®¢æˆ·è‡ªå·±</li><li>åšåšä½ è‡ªå·±çš„å®¢æˆ·</li><li>ä¹Ÿåšåšä½ ç«äº‰å¯¹æ‰‹çš„å®¢æˆ·</li><li>åŒèµ¢æ˜¯å¾ˆå¥½ï¼Œä½†åˆ°åº•ä½ èµ¢å¤šå°‘ï¼Œæˆ‘èµ¢å¤šå°‘å‘¢ï¼Ÿ</li><li>æˆ‘çš„å¸‚åœºè¥é”€åšå¾—å¾ˆå¥½ï¼Œå®¢æˆ·æ»¡æ„åº¦å°±è¶Šä¸é‡è¦</li></ul><h1 id="ç¬¬å››ç« ï¼šåšè¥é”€éœ€è¦è¥é”€çŸ¥è¯†å—"><a href="#ç¬¬å››ç« ï¼šåšè¥é”€éœ€è¦è¥é”€çŸ¥è¯†å—" class="headerlink" title="ç¬¬å››ç« ï¼šåšè¥é”€éœ€è¦è¥é”€çŸ¥è¯†å—"></a>ç¬¬å››ç« ï¼šåšè¥é”€éœ€è¦è¥é”€çŸ¥è¯†å—</h1><h2 id="è¯­å½•-3"><a href="#è¯­å½•-3" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>å¸‚åœºè¥é”€ä¸­æœ‰å¾ˆå¤šæ­£ç¡®ç­”æ¡ˆï¼Œä¹Ÿæœ‰å¾ˆå¤šé”™è¯¯ç­”æ¡ˆ</li><li>ç¡®å®šä¸€ä¸‹ä½ å‡†å¤‡è˜ä»»çš„é‚£ä½æ‰åæ¨ªæº¢çš„æ–°å¸‚åœºè¥é”€ç»ç†æ˜¯å¦æ‡‚å¸‚åœºè¥é”€</li><li>==å‘Šè¯‰æ½œåœ¨å®¢æˆ·å¦‚æœä»–ä¸ä¹°ä¼šå¤±å»ä»€ä¹ˆ==</li><li>â€œè®¨åŒå¤±å»â€çš„å€¾å‘å¼ºäºâ€œè®¨åŒé£é™©â€çš„å€¾å‘</li><li>åˆ†æ•£å®¢æˆ·çš„æ³¨æ„åŠ›ï¼Œä¸è®©ä»–ç”¨è„‘ï¼Œè®©ä»–è·Ÿç€æ„Ÿè§‰èµ°</li><li>æ‚²ä¼¤ä¹Ÿæœ‰åŠ©äºé™ä½å®¢æˆ·çš„ç†æ€§å†³ç­–èƒ½åŠ›</li><li>ä¸¤æ€§å¤§æˆ˜æ˜¯é¬¼è¯</li><li>è®©ç¾å¥³å»å–å¨å£«å¿Œï¼›è®©ä½ çš„å”å”å»å–ä¿é™©</li><li>å°æ©å°æƒ å¼•å‡ºå¤§æ©å¤§æƒ </li><li>å‘ç°ã€æµ‹è¯•ã€å®Œå–„ã€‚ä¸€ä¸ªä¼˜ç§€çš„å¸‚åœºè¥é”€ç»ç†åº”æ˜¯ä¸€ä¸ªå†·é™å®å¹²ã€ä¸æ–­è¯•éªŒçš„ç§‘å­¦å®¶</li><li>å¸‚åœºè¥é”€æˆåŠŸçš„ç§˜è¯€å°±æ˜¯å­¦ä»¥è‡´ç”¨</li><li>åœ¨å¸‚åœºè¥é”€ä¸­ï¼Œâ€œæ­£ç¡®â€çš„æ„æ€æ˜¯â€œè¶³å¤Ÿæ­£ç¡®â€</li><li>å¸‚åœºè¥é”€å°±åƒèµŒåšï¼Œèµ¢é¢æœ‰åˆ©äºä½ çš„æ—¶å€™ï¼ŒèµŒåšå¹¶ä¸å±é™©</li></ul><h1 id="ç¬¬äº”ç« ï¼šå¸‚åœºè¥é”€è€…çš„èŒè´£"><a href="#ç¬¬äº”ç« ï¼šå¸‚åœºè¥é”€è€…çš„èŒè´£" class="headerlink" title="ç¬¬äº”ç« ï¼šå¸‚åœºè¥é”€è€…çš„èŒè´£"></a>ç¬¬äº”ç« ï¼šå¸‚åœºè¥é”€è€…çš„èŒè´£</h1><h2 id="è¯­å½•-4"><a href="#è¯­å½•-4" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>æ ¹æ®ä¸€ä¸ªå…¬å¸çš„å®¢æˆ·åˆ¤æ–­è¿™ä¸ªå…¬å¸çš„æƒ…å†µ</li><li>å¸¸è¯†å‘Šè¯‰æˆ‘ä»¬ä¾›ä¸åº”æ±‚æ—¶å¸‚åœºè¥é”€çš„å¿…è¦æ€§ä¸‹é™==ï¼ˆæ°æ°ç›¸åâ€”â€”æ­¤æ—¶æ˜¯æœ€éœ€è¦å¸‚åœºè¥é”€çš„ã€‚ä¾›ä¸åº”æ±‚æ­£å¥½ç»™æˆ‘ä»¬æä¾›ä¸€ä¸ªç»å¥½çš„æœºä¼šæå‡æˆ‘ä»¬å®¢æˆ·ç»„åˆçš„è´¨é‡å’Œä»·å€¼ã€‚å®¢æˆ·æ˜¯æˆ‘ä»¬æœ€é‡è¦çš„èµ„äº§ï¼‰==</li><li>å¸¸è¯†é”™è¯¯ï¼šä¾›ä¸åº”æ±‚æ—¶å¸‚åœºè¥é”€å›æŠ¥æœ€é«˜==ï¼ˆåœ¨ä¾›ä¸åº”æ±‚æ—¶ï¼Œå¸‚åœºè¥é”€æŠ•å…¥è¶Šå¤šï¼Œå›æŠ¥è¶Šå¤šï¼‰==</li><li>æ˜“è¡Œä¹‹é€”åˆ™æ™ºè€…å…ˆè‡³</li><li>å½“ä½ çš„äº§å“ä¸èƒ½å¤Ÿç»™ä½ å¸¦æ¥ä¼˜åŠ¿æ—¶ï¼Œä½ çš„å®¢æˆ·èƒ½ç»™ä½ å¸¦æ¥ä¼˜åŠ¿</li><li>å‘äººåŠ›èµ„æºå­¦ä¹ ï¼šè€ƒè¯„å®¢æˆ·ï¼Œæ’åºåˆ†ç±»</li></ul><h1 id="ç¬¬å…­ç« ï¼šç®¡ç†ä½ çš„å¸‚åœº"><a href="#ç¬¬å…­ç« ï¼šç®¡ç†ä½ çš„å¸‚åœº" class="headerlink" title="ç¬¬å…­ç« ï¼šç®¡ç†ä½ çš„å¸‚åœº"></a>ç¬¬å…­ç« ï¼šç®¡ç†ä½ çš„å¸‚åœº</h1><h2 id="è¯­å½•-5"><a href="#è¯­å½•-5" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>å¦‚æœä½ ä¸äº†è§£ç«äº‰å¯¹æ‰‹çš„å®¢æˆ·ï¼Œé‚£ä¹ˆä½ å°±ä¸äº†è§£ä½ è‡ªå·±çš„å®¢æˆ·</li><li>äº†è§£å¸‚åœºï¼Œäº†è§£è‡ªå·±ï¼Œæ£€éªŒå‡è®¾</li><li>è¦ç¡®ä¿å…¬å¸çš„CEOå’Œå¸‚åœºè¥é”€ç»ç†ä»¬çŸ¥é“è°æ˜¯ä½ ä»¬çš„å®¢æˆ·</li><li>ä¸è¦åªæ˜¯é˜…è¯»æœ‰å…³å®¢æˆ·çš„èµ„æ–™ï¼Œç›´æ¥å»å¯»è®¿å®¢æˆ·ï¼Œçœ¼è§ä¸ºå®</li><li>æ£€éªŒä½ çš„å‡è®¾ï¼Œæµ‹é‡ä½ çš„å¸‚åœº</li><li>å½“ä½ è§‰å¾—æ•°æ®ä¸å¯ç½®ä¿¡æ—¶ï¼Œä¹Ÿè®¸å®ƒä»¬åœ¨è®²è¿°ç€ä¸€ä¸ªä½ æ‰€ä¸çŸ¥é“çš„æ•…äº‹</li><li>ç§¯æä¸»åŠ¨åœ°ç®¡ç†å½±å“ä½ åœ¨è¡Œä¸šç»†åˆ†å¸‚åœºä¸Šè·åˆ©èƒ½åŠ›çš„äº”åŠ›<ul><li>è¿›å…¥å£å’ï¼šç«äº‰å¯¹æ‰‹è¿›å…¥ä½ çš„å¸‚åœºéš¾åº¦å¦‚ä½•ï¼Ÿâ€”â€”ä¸è¦è¿›å…¥åˆ«äººä¹Ÿèƒ½è¿›å…¥çš„å¸‚åœºï¼ˆ==ç°åœ¨è…¾è®¯é˜¿é‡Œå“ªä¸ªå¸‚åœºä¸èƒ½è¿›å…¥ï¼Ÿ==ï¼‰</li><li>ç°æœ‰ç«äº‰ï¼šåœ¨æœ‰äº›è¡Œä¸šï¼Œé¾™å¤´è€å¤§ä¹‹é—´ç›¸æ•¬å¦‚å®¾â€”â€”åˆ«æ‰¾æ‰“ï¼Œç‰¹åˆ«æ—¶åœ¨ä¸ªå„¿æ¯”ä½ å¤§çš„äººé¢å‰</li><li>æ›¿ä»£å“ï¼šç«äº‰å¯¹æ‰‹èƒ½ä¼¤ä½ ï¼Œè€Œæ›¿ä»£å“èƒ½æ¯äº†ä½ â€”â€”æŠ€æœ¯å£å’</li><li>ä¹°æ–¹åŠ›é‡ï¼šå¦‚æœä¹°æ–¹æœ‰æœºä¼šå°†ä½ çš„é’±å¼„åˆ°ä»–è‡ªå·±çš„è…°åŒ…ï¼Œä»–æ˜¯ä¸ä¼šé”™è¿‡è¿™ä¸ªæœºä¼šçš„</li><li>å–æ–¹åŠ›é‡ï¼šä½ è‹¥ä¸èƒ½æ§åˆ¶ä¾›åº”å•†çš„è®®ä»·èƒ½åŠ›ï¼Œä½ å°±èµšä¸äº†é’±â€”â€”å¦‚æœä¾›åº”å•†æœ‰æœºä¼šå°†ä½ çš„é’±å¼„åˆ°ä»–è‡ªå·±çš„è…°åŒ…ï¼Œä»–ä¹Ÿä¸ä¼šé”™è¿‡è¿™ä¸ªæœºä¼šçš„</li></ul></li><li>å¯»æ‰¾å“€é¸¿éé‡çš„æˆ˜åœºâ€”â€”å¯»æ‰¾æœ€ç³Ÿç³•çš„è¡Œä¸šè¿›å…¥</li><li>ç«äº‰å¹¶ä¸å‘ç”Ÿåœ¨è¡Œä¸šå±‚é¢ï¼Œè€Œæ˜¯å‘ç”Ÿåœ¨ç»†åˆ†å¸‚åœºå±‚é¢â€”â€”==è¿›å…¥æŸä¸ªè¡Œä¸šå…ˆé—®ä»¥ä¸‹é—®é¢˜ï¼š==<ul><li>ä½ è¿›å…¥è¿™ä¸ªè¡Œä¸šåå‡†å¤‡æ€ä¹ˆåšï¼Ÿ</li><li>ä½ ä¼šåˆ›å»ºå“ªäº›æ–°çš„ç»†åˆ†å¸‚åœºï¼Ÿ</li><li>ä½ çš„è“æµ·åœ¨å“ªé‡Œï¼Ÿ</li></ul></li><li>ä¸æ±‚æ›´å¥½ï¼Œä½†æ±‚ä¸åŒï¼Œè‡ªç«‹é—¨æˆ·ï¼Œè‡ªåˆ›å±±å¤´</li><li>å¦å¤–ä¸‰å¤§æ ‡å‡†<ul><li>è§„æ¨¡åˆé€‚ï¼šä¸€ä¸ªç»†åˆ†å¸‚åœºï¼Œè§„æ¨¡å¿…é¡»è¶³å¤Ÿå¤§ï¼Œä»¥çº³ä½ é›„å¿ƒï¼Œä½†ä¹Ÿä¸èƒ½å¤ªå¤§â€”â€”==è¦ä¹ˆç¬¬ä¸€ã€è¦ä¹ˆç¬¬äºŒï¼Œä¸ç„¶ä¿®ã€å…³ã€å–==</li><li>å¢é•¿èƒ½åŠ›å’Œè·åˆ©èƒ½åŠ›</li><li>æ˜“å¾—æ€§ï¼šä¸å…¶å…ˆç¡®å®šç›®æ ‡äººç¾¤å¾—å¹´é¾„å†æ‰¾å¯»ä»¥è¿™ä¸ªå¹´é¾„ä¸ºå—ä¼—çš„åª’ä½“åšå¹¿å‘Šï¼Œä¸å¦‚å»æ‰¾å¯»ç›®æ ‡å®¢æˆ·ï¼Œç›´æ¥é—®ä»–ä»¬çœ‹åˆ°ä»€ä¹ˆåª’ä½“</li></ul></li><li>å¦‚æœä¸å†æœ‰äººèƒ½å¤ŸæŒ‡å‡ºä½ çš„é”™è¯¯ï¼Œè¯´æ˜ä½ è¯¥é€€ä¼‘äº†</li></ul><h1 id="ç¬¬ä¸ƒç« ï¼šå¸‚åœºç»†åˆ†æ–°æ€æƒ³"><a href="#ç¬¬ä¸ƒç« ï¼šå¸‚åœºç»†åˆ†æ–°æ€æƒ³" class="headerlink" title="ç¬¬ä¸ƒç« ï¼šå¸‚åœºç»†åˆ†æ–°æ€æƒ³"></a>ç¬¬ä¸ƒç« ï¼šå¸‚åœºç»†åˆ†æ–°æ€æƒ³</h1><h2 id="è¯­å½•-6"><a href="#è¯­å½•-6" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>ä½ éœ€è¦è°æˆä¸ºä½ çš„å®¢æˆ·ï¼Ÿ</li><li>æ›´å¥½çš„äº§å“éœ€è¦å…·å¤‡èƒ½å¤Ÿå¸å¼•æ›´å¥½çš„å®¢æˆ·çš„å±æ€§</li><li>å®¢æˆ·ä¸å“ç‰Œå…³ç³»å¦‚ä¸‹ï¼š<ul><li>å¿ è¯šçš„å®¢æˆ·</li><li>äºæˆ‘æœ‰åˆ©çš„å“ç‰Œè½¬æ¢è€…</li><li>äºæˆ‘ä¸åˆ©çš„å“ç‰Œè½¬æ¢è€…</li><li>ç«äº‰å¯¹æ‰‹å“ç‰Œçš„å¿ è¯šå®¢æˆ·</li><li>ä¸ç”¨æ­¤ç±»äº§å“çš„äºº</li></ul></li><li>å¦‚æœä½ æŒªåŠ¨ä¸€ä¸ªå®¢æˆ·ï¼Œé‚£ä¹ˆä»ä»–ç«™çš„åœ°æ–¹å¼€å§‹</li><li>é‡ç‚¹çªå‡ºï¼Œåšå¼ºåšå¤§</li><li>å®ä¸ºé¸¡é¦–ï¼Œåˆ«åšå‡¤å°¾</li><li>æ–°äº§å“çš„ç ”å‘æ˜¯å¥½äº‹ï¼Œä½†æ˜¯æ–°å¸‚åœºçš„ç ”å‘æ›´å¥½</li><li>å¤±å»å¥½å®¢æˆ·æ˜¯åäº‹ï¼Œæ‰”æ‰åå®¢æˆ·æ˜¯å¥½äº‹</li><li>æˆ˜äº‰æ˜¯åœ°ç‹±ï¼Œèƒ½èº²å°±èº²</li></ul><h1 id="ç¬¬å…«ç« ï¼šå¤±å»ä½ çš„å®¢æˆ·"><a href="#ç¬¬å…«ç« ï¼šå¤±å»ä½ çš„å®¢æˆ·" class="headerlink" title="ç¬¬å…«ç« ï¼šå¤±å»ä½ çš„å®¢æˆ·"></a>ç¬¬å…«ç« ï¼šå¤±å»ä½ çš„å®¢æˆ·</h1><h2 id="è¯­å½•-7"><a href="#è¯­å½•-7" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>æ‰¾å‡ºä½ çš„å‰å®¢æˆ·æ˜¯è°ï¼Œæ‰¾åˆ°ä»–ä»¬çš„ä¸‹è½</li><li>å®¢æˆ·æµå¤±ç‡é™ä½ä¸€åŠï¼Œå…¬å¸ä»·å€¼ç¿»ä¸€ç•ª</li><li>æ‰¾å‡ºè°æ˜¯ä½ æœ€å¥½çš„å®¢æˆ·ï¼Œç¡®ä¿ä»–ä»¬æœ‰çˆ±ä½ çš„ç†ç”±</li><li>å‘MBNAå­¦ä¹ â€”â€”MBNAï¼ˆç¾ä¿¡é“¶è¡Œï¼‰1982å¹´å°†é™ä½å®¢æˆ·æµå¤±ç‡ä½œä¸ºé¦–è¦ä»»åŠ¡æ¥æŠ“ï¼ŒåŠªåŠ›èµ¢å¾—å‰å®¢æˆ·</li><li>æé†’å®¢æˆ·ä½ çš„å­˜åœ¨</li><li>ä¸è¦è®©ä½ çš„å¿ è¯šè®¡åˆ’å–ä»£å¿ è¯šæœ¬èº«</li><li>è®¾è®¡é«˜ç²˜åº¦çš„å®¢æˆ·å…³ç³»</li></ul><h1 id="ç¬¬ä¹ç« ï¼šä½ æˆ‘éƒ½ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å¥½å¹¿å‘Š"><a href="#ç¬¬ä¹ç« ï¼šä½ æˆ‘éƒ½ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å¥½å¹¿å‘Š" class="headerlink" title="ç¬¬ä¹ç« ï¼šä½ æˆ‘éƒ½ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å¥½å¹¿å‘Š"></a>ç¬¬ä¹ç« ï¼šä½ æˆ‘éƒ½ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å¥½å¹¿å‘Š</h1><h2 id="è¯­å½•-8"><a href="#è¯­å½•-8" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>å‘Šè¯‰å®¢æˆ·ä½ æ˜¯åšä»€ä¹ˆçš„</li><li>å’Œå®¢æˆ·è°ˆè°ˆ</li><li>ä¸è¦è‡ªè¨€è‡ªè¯­</li><li>å…¬å¸å’Œå®ƒçš„å¹¿å‘Šå…¬å¸æ˜¯æœ€ä¸èƒ½è¯„åˆ¤å…¶å¹¿å‘Šå¥½åçš„ï¼Œå®ƒä»¬çŸ¥é“å¾—å¤ªå¤šäº†</li><li>è¯„åˆ¤å¹¿å‘Šçš„æœ€ä½³äººé€‰æ˜¯ä½ çš„æ½œåœ¨å®¢æˆ·</li><li>è¯•éªŒå¥½æ¯”ä¹°ä¾¿å®œçš„ä¿é™©ï¼Œä¸çŠ¯é”™è¯¯ï¼Œå°±ä¸å¿…å¸å–æ•™è®­äº†</li></ul><h1 id="ç¬¬åç« ï¼šå¥½å¹¿å‘Šçš„è¦ç´ "><a href="#ç¬¬åç« ï¼šå¥½å¹¿å‘Šçš„è¦ç´ " class="headerlink" title="ç¬¬åç« ï¼šå¥½å¹¿å‘Šçš„è¦ç´ "></a>ç¬¬åç« ï¼šå¥½å¹¿å‘Šçš„è¦ç´ </h1><ul><li>ä¸åŒçš„é”€å”®æƒ…å½¢é€‚ç”¨ä¸åŒçš„å¹¿å‘Š</li><li>å“ç‰ŒçŸ¥ååº¦æ˜¯ç¬¬ä¸€å¤§æŒ‘æˆ˜</li><li>å“ç‰ŒçŸ¥ååº¦æœ‰ä¸¤ç§ï¼šè®°å¾—å’Œè®¤å¾—</li><li>è®¤å¾—ï¼š<ul><li>ç¡®ä¿å“ç‰ŒåŒ…è£…å’Œåç§°åœ¨å¹¿å‘Šä¸­å¾—åˆ°å……åˆ†å±•ç¤º</li><li>å¿…é¡»é˜è¿°æ­¤ç±»äº§å“çš„åŠŸèƒ½ç”¨é€”</li><li>ç¬¬ä¸€æ¬¡å®£ä¼ åˆ°åšå¾—å£°åŠ¿æµ©å¤§</li></ul></li><li>è®°å¾—ï¼š<ul><li>å¹¿å‘Šæ­£æ–‡ä¸»é¢˜å¥å¿…é¡»åŒ…æ‹¬äº§å“ç”¨é€”ã€å“ç‰Œåè¯å’Œç¬¬äºŒäººç§°å‘¼è¯­</li><li>ä¸æ–­é‡å¤ä¸»é¢˜å¥</li><li>ä¿æŒè¾ƒé«˜çš„å‡ºé•œç‡</li></ul></li><li>å“ç‰Œæ€åº¦æ˜¯ç¬¬äºŒå¤§æŒ‘æˆ˜â€”â€”å“ç‰Œæ€åº¦æ˜¯æŒ‡å®¢æˆ·å¯¹å…¶æ‰€çŸ¥äº§å“çš„å¥½æ¶æ€åº¦<br><img src="/2020/04/14/ji-suan-guang-gao-zhi-xi-jie-ying-xiao/4_imp.jpg" alt="4_imp"></li><li>å“ç‰Œæ€åº¦å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ç±»ä»¥åŠå¯¹åº”å¹¿å‘Šè§„åˆ™ï¼š<ul><li>é‡è¦ &amp; æ¶ˆæåŠ¨æœºï¼š<ul><li>åœ¨äº§å“ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸï¼Œæ­£ç¡®æç»˜ä¸è´­ä¹°åŠ¨æœºç›¸å»åˆçš„æƒ…ç»ª</li><li>å¾—è®©ç›®æ ‡å®¢æˆ·æ¥å—å¹¿å‘Šå¾—ä¸»è¦æ„æ€</li><li>ç›®æ ‡å—ä¼—å¯¹å“ç‰Œçš„å·²æœ‰æ€åº¦å¿…é¡»æ˜¯é¦–è¦è€ƒè™‘çš„é—®é¢˜</li></ul></li><li>é‡è¦ &amp; ç§¯æåŠ¨æœºï¼š <ul><li>æƒ…æ„Ÿçš„çœŸå®æ€§æ˜¯æœ€ä¸ºé‡è¦çš„ï¼Œå¹¿å‘Šå¿…é¡»ç¬¦åˆç›®æ ‡å—ä¼—æ‰€åœ¨çš„ç¾¤ä½“çš„æƒ…ç»ªçŠ¶æ€å’Œç”Ÿæ´»æ–¹å¼</li><li>å¿…é¡»è®©äººä»¬æŠŠè‡ªå·±å’Œå¹¿å‘Šä¸­çš„äº§å“åœ¨ä¸€èµ·ï¼Œäº§ç”Ÿå½’å±æ„Ÿ</li><li>å½“å—ä¼—ç¼ºä¹æœ‰å…³äº§å“çš„äº‹å®ä¿¡æ¯æ—¶ï¼Œå°±åº”è¯¥ç»™ä»–ä»¬æä¾›ä¿¡æ¯</li><li>è¦å¤¸å¼ æ¸²æŸ“ï¼Œè¨€è¿‡å…¶å®ï¼Œä¸è¦è°¦è™š</li></ul></li><li>ä¸é‡è¦ &amp; æ¶ˆæåŠ¨æœº<ul><li>ä½¿ç”¨â€œé—®é¢˜ä¸è§£å†³åŠæ³•â€çš„ç®€å•å“¦å…¬å¼ï¼Œä¿æŒå¹¿å‘Šå•åˆ€ç›´å…¥</li><li>æœªå¿…è¦è®©å®¢æˆ·å–œæ¬¢ä½ çš„å¹¿å‘Š</li><li>å…³äºäº§å“çš„å¥½å¤„è£¨ç›Šï¼Œè¦ç«­å°½æ¸²æŸ“ä¹‹èƒ½äº‹</li></ul></li><li>ä¸é‡è¦ &amp; ç§¯æåŠ¨æœº<ul><li>æƒ…æ„Ÿçš„å…±é¸£å¾ˆé‡è¦</li><li>å“ç‰Œæ‰€äº§ç”Ÿçš„è”æƒ³ï¼Œæƒ…æ„Ÿå¿…é¡»æ˜¯ç‹¬ç‰¹çš„â€”â€”ä¸‡å®è·¯å°±æ˜¯ä¸ªå¾ˆå¥½ä¾‹å­</li><li>ç›®æ ‡å—ä¼—å¿…é¡»å–œæ¬¢è¿™ä¸ªå¹¿å‘Š</li><li>é€šè¿‡è”æƒ³å¡‘é€ å“ç‰Œå½¢è±¡</li></ul></li></ul></li><li>äº†è§£ä½ é¢ä¸´çš„é”€å”®æƒ…å½¢ï¼Œé€‰æ‹©ç›¸åº”çš„å¹¿å‘Šè§„åˆ™ï¼Œå› åŠ¿åˆ©å¯¼</li><li>è¦æ‰“ç ´å¸¸è§„ï¼Œé¦–å…ˆå¿…é¡»æŒæ¡å¸¸è§„â€”â€”é©¬å…‹åæ¸©</li><li>å¦‚æœä½ çš„å¹¿å‘Šä»£ç†å…¬å¸åªä¼šæ•…å¼„ç„è™šï¼Œè®¾è®¡ä¸€ä¸ªå¹¿å‘Šçš„ç›®çš„æ˜¯æ¿€å‘å—ä¼—çš„å¥½å¥‡å¿ƒï¼Œé‚£å°±è§£é›‡ä»–</li></ul><h1 id="ç¬¬åä¸€ç« ï¼šåº”è¯¥åœ¨å“ªé‡Œåšå¹¿å‘Š"><a href="#ç¬¬åä¸€ç« ï¼šåº”è¯¥åœ¨å“ªé‡Œåšå¹¿å‘Š" class="headerlink" title="ç¬¬åä¸€ç« ï¼šåº”è¯¥åœ¨å“ªé‡Œåšå¹¿å‘Š"></a>ç¬¬åä¸€ç« ï¼šåº”è¯¥åœ¨å“ªé‡Œåšå¹¿å‘Š</h1><h2 id="è¯­å½•-9"><a href="#è¯­å½•-9" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>åœ¨å“ªé‡Œåšå¹¿å‘Šï¼Ÿâ€”â€”é—®é—®ä½ çš„ï¼ˆæ½œåœ¨ï¼‰å®¢æˆ·</li><li>ä¸è¦å‘åŒä¸€ä¸ªå®¢æˆ·é‡å¤åšå¹¿å‘Š</li><li>å¦‚æœä½ çš„å¹¿å‘Šé›†ä¸­åœ¨å•ä¸ªåª’ä½“æ¸ é“ï¼Œé‚£ä¹ˆé‡å å’Œæµªè´¹äº§ç”Ÿçš„æ¦‚ç‡æ›´å¤§</li><li>åˆ†æ¸…ä¸»æ¬¡ï¼šåª’ä½“-ä¿¡æ¯-æ‰§è¡Œ</li></ul><h1 id="ç¬¬åäºŒç« ï¼šä½ çš„å¹¿å‘Šå…¬å¸ä¸æ˜¯ä½ çš„åˆä½œä¼™ä¼´"><a href="#ç¬¬åäºŒç« ï¼šä½ çš„å¹¿å‘Šå…¬å¸ä¸æ˜¯ä½ çš„åˆä½œä¼™ä¼´" class="headerlink" title="ç¬¬åäºŒç« ï¼šä½ çš„å¹¿å‘Šå…¬å¸ä¸æ˜¯ä½ çš„åˆä½œä¼™ä¼´"></a>ç¬¬åäºŒç« ï¼šä½ çš„å¹¿å‘Šå…¬å¸ä¸æ˜¯ä½ çš„åˆä½œä¼™ä¼´</h1><h2 id="è¯­å½•-10"><a href="#è¯­å½•-10" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>å¦‚æœä½ ç›¸ä¿¡ä½ çš„å¹¿å‘Šå…¬å¸ï¼Œé‚£ä¹ˆä½ å°†ä¸€æ— æ‰€è·</li><li>å¹¿å‘Šå…¬å¸æ‰€è°“çš„å…è´¹è°ƒç ”æ˜¯â€œç¾Šæ¯›å‡ºåœ¨ç¾Šèº«ä¸Šâ€ï¼Œä¸å€¼å¾—å»å è¿™ä¸ªä¾¿å®œ</li><li>å¦‚æœå¹¿å‘Šå…¬å¸æ˜¯ä½ çš„æˆ˜ç•¥å®£ä¼ ä¼™ä¼´ï¼Œé‚£ä¹ˆæ±½è½¦é”€å”®å‘˜å°±æ˜¯ä½ çš„æˆ˜ç•¥äº¤é€šä¼™ä¼´â€”â€”è¿™å²‚ä¸è’å”</li><li>ä¸è¦åªç”¨ä¸€å®¶å¹¿å‘Šå…¬å¸</li><li>ä¸¾åŠå¹¿å‘Šå¤§èµ›ï¼Œè·å¾—æ›´å¥½å¾—åˆ›æ„</li><li>æ¯”ç…§æµ‹è¯•å¤šä¸ªåˆ›æ„æ–¹æ¡ˆ</li></ul><h1 id="ç¬¬åä¸‰ç« ï¼šä¸è¦é—®ä½ çš„å“ç‰Œèƒ½ä¸ºä½ åšäº›ä»€ä¹ˆ"><a href="#ç¬¬åä¸‰ç« ï¼šä¸è¦é—®ä½ çš„å“ç‰Œèƒ½ä¸ºä½ åšäº›ä»€ä¹ˆ" class="headerlink" title="ç¬¬åä¸‰ç« ï¼šä¸è¦é—®ä½ çš„å“ç‰Œèƒ½ä¸ºä½ åšäº›ä»€ä¹ˆ"></a>ç¬¬åä¸‰ç« ï¼šä¸è¦é—®ä½ çš„å“ç‰Œèƒ½ä¸ºä½ åšäº›ä»€ä¹ˆ</h1><h2 id="è¯­å½•-11"><a href="#è¯­å½•-11" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>å“ç‰Œä½¿å¾—å†³ç­–æ›´å®¹æ˜“</li><li>å“ç‰Œå¯ä»¥é™ä½é£é™©</li><li>å“ç‰Œå¯ä»¥è®©æˆ‘è·å¾—ä»–äººå¾—å°Šé‡</li><li>å“ç‰Œå¸®åŠ©å®¢æˆ·åˆ›é€ æ›´ç†æƒ³å¾—ç°å®ä¸–ç•Œ</li><li>ä½ çš„äº§å“å’ŒæœåŠ¡è®©ä½ æœ‰é’±ï¼Œè®©ä½ çš„å“ç‰Œå‡ºå</li><li>å“ç‰Œä¸æ˜¯ä¸°åšåˆ©æ¶¦çš„å”¯ä¸€æ¥æº</li><li>å½“å“ç‰Œå¯¹ä½ å¾ˆé‡è¦æ—¶ï¼Œå“ç‰Œä»·å€¼ä¸é«˜çš„ä»£ä»·ååˆ†é«˜æ˜‚</li><li>å½“å“ç‰Œå¯¹ä½ å¾ˆé‡è¦æ—¶ï¼Œä½ å¿…é¡»èº«ä½“åŠ›è¡Œä½ çš„å“ç‰Œ</li><li>å“ç‰Œè¯´ï¼šâ€œæˆ‘èƒ½åšçš„ä½ éƒ½èƒ½åšï¼Œä½†ä½ ä¸æ˜¯æˆ‘â€â€”â€”å½“å…¶ä»–å…¬å¸ä»¿ç…§ä½ çš„å“ç‰Œæ—¶ï¼Œä½ çš„å“ç‰Œèƒ½åè¿‡æ¥ä¿æŠ¤ä½ </li><li>å…¬å¸æˆ˜ç•¥å’Œå“ç‰Œæˆ˜ç•¥ä¸è°‹è€Œåˆâ€”â€”å…¬å¸æˆ˜ç•¥å’Œå“ç‰Œæˆ˜ç•¥åº”è¯¥æ˜¯ç»Ÿä¸€çš„</li><li>å°å¿ƒè¯»å¸‚åœºè¥é”€çš„å·¥ç¨‹å¸ˆâ€”â€”æŠ€æœ¯æ€§å¸‚åœºè¥é”€</li></ul><h1 id="ç¬¬åå››ç« ï¼šè¥é”€æ•°å­¦"><a href="#ç¬¬åå››ç« ï¼šè¥é”€æ•°å­¦" class="headerlink" title="ç¬¬åå››ç« ï¼šè¥é”€æ•°å­¦"></a>ç¬¬åå››ç« ï¼šè¥é”€æ•°å­¦</h1><h2 id="è¯­å½•-12"><a href="#è¯­å½•-12" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>åœ¨å¸‚åœºè¥é”€ä¸­æ²¡æœ‰æ¯”æé«˜æ•ˆç‡æ›´å®¹æ˜“çš„äº‹æƒ…äº†</li><li>å¸‚åœºè¥é”€æ æ†åº•çº¿æ˜¯è¥é”€å†³ç­–è¦è€ƒè™‘çš„å…³é”®æ¯”ä¾‹ï¼Œæ˜¯è¥é”€æŠ•èµ„å†³ç­–çš„è¯•é‡‘çŸ³</li><li>é™ä»·æ˜¯æœ€æ˜‚è´µçš„å¸‚åœºè¥é”€ç­–ç•¥</li><li>ä¿æŒä½æˆæœ¬æ˜¯ç”Ÿäº§æˆæœ¬çš„èŒè´£</li><li>ä¿æŒé«˜ä»·æ ¼æ˜¯è¥é”€éƒ¨é—¨çš„èŒè´£</li><li>åˆ©æ¶¦é«˜äºå¸‚åœºä»½é¢ï¼Œä¹Ÿä¼šå¸¦æ¥å¸‚åœºä»½é¢</li><li>è¿½æ±‚çŸ­æœŸåˆ©æ¶¦æ— å¯åšéï¼Œæœ‰äº†çŸ­æœŸæ‰æœ‰é•¿æœŸ</li><li>ä½ çš„é”€å”®ä»£è¡¨å¹²æ´»å–åŠ›ä¸å–åŠ›ï¼Œä¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€”â€”å¦‚æœå–åŠ›å¹²æ´»åŠ è–ªæ‹¿å¥–é‡‘ä¸åˆ’ç®—çš„è¯ï¼Œä»–å°±ä¸ä¼šå–åŠ›</li></ul><h1 id="ç¬¬åäº”ç« ï¼šå®šä»·ç­–ç•¥"><a href="#ç¬¬åäº”ç« ï¼šå®šä»·ç­–ç•¥" class="headerlink" title="ç¬¬åäº”ç« ï¼šå®šä»·ç­–ç•¥"></a>ç¬¬åäº”ç« ï¼šå®šä»·ç­–ç•¥</h1><h2 id="è¯­å½•-13"><a href="#è¯­å½•-13" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>æ‰“æŠ˜æ—¶å°†ç»å¯¹é‡‘é¢</li><li>æ”¶è´¹æ—¶è®²ç™¾åˆ†æ¯”</li><li>å¼€å‘ä»·å€¼ï¼Œå®£ä¼ ä»·å€¼</li><li>è¦è°ˆä»·å€¼ï¼Œè€Œä¸æ˜¯ä»·æ ¼</li><li>ä»·æ ¼æ°¸è¿œä¸æ˜¯ç¬¬ä¸€ä¸ªP</li><li>ä½ä»·æ ¼ä¿¡å·å¯¹ä¹°æ–¹ç®¡ç”¨ï¼Œæ‰€ä»¥å¯¹å–æ–¹ä¹Ÿç®¡ç”¨</li><li>ä»·æ ¼å®é™…æ˜¯ä½çš„ï¼Œä½†æ˜¯çœ‹ç€ä¸ä½ï¼Œè¿™æ‹›å¯èƒ½å¯¹ä½ ç®¡ç”¨</li><li>ä»·æ ¼å°¾æ•°æ˜¯9ï¼Œå¾ˆå¥½ï¼Œ5ä¹Ÿä¸é”™ï¼Œåœ¨äºšæ´²ï¼Œ8ä¹Ÿå¾ˆå¥½</li><li>ä¸è¦è‡ªä½œèªæ˜â€”â€”ä»¥ä¸ºè‡ªå·±å¯ä»¥å ä¾¿å®œ</li><li>ä»·æ ¼è¦å› äººè€Œå¼‚â€”â€”ä»·æ ¼æ­§è§†</li><li>è¿ç”¨åˆ›é€ åŠ›ã€æ–°å‘æ˜ã€ç ”å‘æ¥å¯»æ‰¾ä»·æ ¼æ­§è§†æ–°æ–¹æ³•</li><li>å®šä»·å¾ˆé‡è¦</li></ul><h1 id="ç¬¬åå…­ç« ï¼šåˆ†é”€"><a href="#ç¬¬åå…­ç« ï¼šåˆ†é”€" class="headerlink" title="ç¬¬åå…­ç« ï¼šåˆ†é”€"></a>ç¬¬åå…­ç« ï¼šåˆ†é”€</h1><h2 id="è¯­å½•-14"><a href="#è¯­å½•-14" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>å½“ä¼—å¤šå…¬å¸åˆä½œå…±äº‹æ—¶ï¼Œé«˜æ•ˆç‡å¹¶éæ˜¯è‡ªç„¶è€Œç„¶åœ°ç»“æœ</li><li>ä¸ªæ€§ç†æ€§åœ°å†³ç­–æœªå¿…èƒ½ç»™é›†ä½“å¸¦æ¥å¥½ç»“æœ</li><li>æˆä¸ºä½ çš„æ¸ é“ç³»ç»Ÿåœ°â€œé»‘æ‰‹å…šæ•™çˆ¶â€</li><li>æŠŠé’±ç»™ç»é”€å•†å¹¶èƒ½è¯æ˜ä½ çš„æ”¯é…åŠ›</li></ul><h1 id="ç¬¬åä¸ƒç« ï¼šæ”¯é…åŠ›"><a href="#ç¬¬åä¸ƒç« ï¼šæ”¯é…åŠ›" class="headerlink" title="ç¬¬åä¸ƒç« ï¼šæ”¯é…åŠ›"></a>ç¬¬åä¸ƒç« ï¼šæ”¯é…åŠ›</h1><h2 id="è¯­å½•-15"><a href="#è¯­å½•-15" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>==å·¥ä½œå’Œæ”¶å…¥æ˜¯è´Ÿç›¸å…³å…³ç³»==</li><li>å…¬å¸åº”è¯¥æé«˜å¯¹æƒåŠ›ç®¡ç†çš„é‡è§†ç¨‹åº¦</li><li>æ•ˆç‡æé«˜å¯¹å¥´éš¶è€Œè¨€æ²¡æœ‰ä»»ä½•å¥½å¤„</li><li>ç§¯æç®¡ç†å…³ç³»ï¼Œå°½é‡å¢å¼ºæ¸ é“ä¼™ä¼´å¯¹ä½ çš„ä¾èµ–æ€§</li><li>åº”è‡ªå·±å»åšé‚£äº›èƒ½å¢å¼ºæ¸ é“æ”¯é…åŠ›çš„åˆ†é”€å·¥ä½œ</li><li>ä»»ä½•ä¸€ä¸ªPéƒ½å¯ä»¥å¸¦æ¥ä»»ä½•ä¸€ä¸ªCï¼šä¿ƒé”€å¯ä»¥å¢å¼ºæ¸ é“æ”¯é…åŠ›</li></ul><h1 id="ç¬¬åå…«ç« ï¼šè¥é”€æ–°æ¦‚å¿µâ€”â€”è¯šä¿¡"><a href="#ç¬¬åå…«ç« ï¼šè¥é”€æ–°æ¦‚å¿µâ€”â€”è¯šä¿¡" class="headerlink" title="ç¬¬åå…«ç« ï¼šè¥é”€æ–°æ¦‚å¿µâ€”â€”è¯šä¿¡"></a>ç¬¬åå…«ç« ï¼šè¥é”€æ–°æ¦‚å¿µâ€”â€”è¯šä¿¡</h1><h2 id="è¯­å½•-16"><a href="#è¯­å½•-16" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>è¯šå®æ˜¯å…¬å¸æœ€å®è´µçš„èµ„äº§</li><li>ä½ çš„å®¢æˆ·ã€æŠ•èµ„è€…ã€å‘˜å·¥è®¤ä¸ºä½ çš„å…¬å¸æœ‰å¤šè¯šå®ï¼Œå°±æœ‰å¤šå–å‘½</li><li>ä¸è¯šå®æ˜¯æ»‘å¡å¼çš„ç¾éš¾</li><li>åƒæŠ˜ç£¨å®¢æˆ·é‚£æ ·æŠ˜ç£¨è‡ªå·±ï¼Œæ„ŸåŒèº«å—</li><li>å·é’±æ˜¯ä¸å¯¹çš„ï¼Œå·æ—¶é—´ä¹Ÿæ˜¯ä¸å¯¹çš„</li><li>å·ä½ å®¢æˆ·çš„æ—¶é—´å’Œé‡‘é’±æ˜¯å¾ˆå±é™©çš„ç”Ÿæ„</li><li>æ£€éªŒå®¢æˆ·æœåŠ¡çš„ç®€å•æ ‡å‡†ï¼šä½ ä¼šè¿™æ ·å¯¹å¾…ä½ çš„æ¯äº²å—ï¼Ÿ</li><li>è¯šå®â€”â€”ä¸€ä¸ªå…¨æ–°çš„æ¦‚å¿µ</li></ul><h1 id="ç¬¬åä¹ç« ï¼šå¤–é¢çš„ä¸–ç•Œ"><a href="#ç¬¬åä¹ç« ï¼šå¤–é¢çš„ä¸–ç•Œ" class="headerlink" title="ç¬¬åä¹ç« ï¼šå¤–é¢çš„ä¸–ç•Œ"></a>ç¬¬åä¹ç« ï¼šå¤–é¢çš„ä¸–ç•Œ</h1><h2 id="è¯­å½•-17"><a href="#è¯­å½•-17" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>ç»„ç»‡æ¶æ„å›¾åº”è¯¥æ˜¾ç¤ºæ‰€æœ‰å‚ä¸è¥é”€ä½ çš„äº§å“çš„äººå’Œå…¬å¸</li><li>ä»»ä½•ä¸€ä¸ªå¯¹äºä½ äº§å“çš„æˆåŠŸæœ‰ç€ç›´æ¥æˆ–é—´æ¥å½±å“çš„äººéƒ½åº”è¯¥æ˜¯ä½ å®è´µçš„å®¢æˆ·</li><li>ä½ å¸®åŠ©äº†æ¸ é“ä¹Ÿå°±æ˜¯å¸®åŠ©äº†è‡ªå·±</li><li>å°äº‹åšå¥½äº†ï¼Œå¤§äº‹è‡ªç„¶æ°´åˆ°æ¸ æˆ</li><li>ç®¡ç†ä½ çš„å•†åº—</li><li>å¦‚æœä½ å·æœ‹å‹çš„é’±ï¼Œé‚£ä¹ˆä½ å°†æ²¡æœ‹å‹</li><li>åœ¨ä»·å€¼é“¾å„ä¸ªç¯èŠ‚æä¾›å¢å€¼ï¼Œé¦–å…ˆå…³å¿ƒä½ å®¢æˆ·çš„å•†ä¸šæ¨¡å¼</li><li>è§£å†³äº†å®¢æˆ·çš„é—®é¢˜ä¹Ÿå°±è§£å†³äº†è‡ªå·±çš„é—®é¢˜</li><li>å¤æ‚çš„å…¬å¼å¸®ä¸äº†ä½ ï¼Œå¦‚æœè¾“å…¥æ˜¯é”™è¯¯å‚æ•°çš„è¯</li><li>å¸®åŠ©å®¢æˆ·è¾¾åˆ°åˆ©æ¶¦æœ€å¤§åŒ–ï¼Œä½ çš„åˆ©æ¶¦è‡ªç„¶ä¹Ÿå°±æœ€å¤§åŒ–äº†</li><li>ä¸è¦å¿™äºç®¡ç†ï¼Œè€Œå¿˜äº†å»å¯»æ‰¾å¹¶ç•™ä½å®¢æˆ·</li><li>å¸‚åœºè¥é”€çš„æˆè´¥å–å†³äºå…¬å¸å¤–éƒ¨ï¼Œè€Œä¸æ˜¯å†…éƒ¨</li><li>ä¸è¦ä¸ºäº†èŠ‚çœå°é’±ï¼Œæå¾—å®¢æˆ·æ°‘æ€¨æ²¸è…¾</li></ul><h1 id="ç¬¬äºŒåç« ï¼šæœ€æ–°çš„æ€è€ƒ"><a href="#ç¬¬äºŒåç« ï¼šæœ€æ–°çš„æ€è€ƒ" class="headerlink" title="ç¬¬äºŒåç« ï¼šæœ€æ–°çš„æ€è€ƒ"></a>ç¬¬äºŒåç« ï¼šæœ€æ–°çš„æ€è€ƒ</h1><h2 id="è¯­å½•-18"><a href="#è¯­å½•-18" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>ä½ è€ƒè™‘è¿‡ä½ çš„è¥é”€å¯¹è±¡å—</li><li>æ”¹å˜ä½ çš„æ”¶è´¹æ ‡å‡†</li><li>ç»æµä½è¿·æ—¶çš„å¸‚åœºè¥é”€</li><li>åšåˆ°å…¼å®¹å¹¶è“„</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—å¹¿å‘Š </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯»ä¹¦ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯»ä¹¦ç¬”è®°ä¹‹å¯Œçˆ¸çˆ¸ç©·çˆ¸çˆ¸</title>
      <link href="/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/"/>
      <url>/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/</url>
      
        <content type="html"><![CDATA[<p><img src="/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/image-20210621161440823.png" alt="image-20210621161440823"></p><h1 id="ç¬¬ä¸€ç« ï¼šå¯Œäººä¸ä¸ºé’±å·¥ä½œ"><a href="#ç¬¬ä¸€ç« ï¼šå¯Œäººä¸ä¸ºé’±å·¥ä½œ" class="headerlink" title="ç¬¬ä¸€ç« ï¼šå¯Œäººä¸ä¸ºé’±å·¥ä½œ"></a>ç¬¬ä¸€ç« ï¼šå¯Œäººä¸ä¸ºé’±å·¥ä½œ</h1><h2 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="å·¦è„‘æ—¶åˆ»"><a href="#å·¦è„‘æ—¶åˆ»" class="headerlink" title="å·¦è„‘æ—¶åˆ»"></a>å·¦è„‘æ—¶åˆ»</h3><ul><li>å°½ç®¡æœ‰ä¸€ä»½é«˜æ”¶å…¥çš„å·¥ä½œï¼Œåƒç©·çˆ¸çˆ¸ä¸€æ ·çš„äººä»åªèƒ½å‹‰å¼ºç»´æŒç€æ”¶æ”¯å¹³è¡¡</li></ul><h3 id="å³è„‘æ—¶åˆ»"><a href="#å³è„‘æ—¶åˆ»" class="headerlink" title="å³è„‘æ—¶åˆ»"></a>å³è„‘æ—¶åˆ»</h3><ul><li>ç”¨ä¸€ä¸ªæ–°é¢–çš„ã€å…·æœ‰åˆ›é€ æ€§çš„æ–¹æ³•çœ‹å¾…åºŸå¼ƒçš„è¿ç¯ç”»å¯ä»¥å¸¦æ¥å•†æœº</li></ul><h3 id="æ½œæ„è¯†æ—¶åˆ»"><a href="#æ½œæ„è¯†æ—¶åˆ»" class="headerlink" title="æ½œæ„è¯†æ—¶åˆ»"></a>æ½œæ„è¯†æ—¶åˆ»</h3><ul><li>äººä»¬è®©ææƒ§å’Œè´ªå©ªæ§åˆ¶äº†è‡ªå·±çš„äººç”Ÿ</li></ul><h2 id="è¯­å½•"><a href="#è¯­å½•" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>ç©·äººå’Œä¸­äº§é˜¶çº§ä¸ºé’±è€Œå·¥ä½œï¼Œå¯Œäººè®©é’±ä¸ºä»–å·¥ä½œ</li><li>ç”Ÿæ´»æ¨ç€æˆ‘ä»¬æ‰€æœ‰çš„äººï¼Œæœ‰äº›äººæ”¾å¼ƒäº†ï¼Œæœ‰äº›äººåœ¨æŠ—äº‰ï¼Œå°‘æ•°äººå­¦ä¼šäº†è¿™é—¨è¯¾ç¨‹ï¼Œå–å¾—äº†è¿›æ­¥ï¼Œä»–ä»¬æ¬¢è¿ç”Ÿæ´»æ¨åŠ¨ç€ä»–ä»¬</li><li>è¯´åˆ°é’±ï¼Œå¤§å¤šæ•°äººéƒ½å¸Œæœ›ç¨³ç¨³å¦¥å¦¥çš„èµšé’±ï¼Œè¿™æ ·ä»–ä»¬æ„Ÿåˆ°å®‰å…¨ã€‚å…³äºé’±ï¼Œä»–ä»¬æ²¡æœ‰æ¿€æƒ…ï¼Œæœ‰çš„åªæ˜¯ææƒ§</li><li>æ­£æ˜¯å‡ºäºææƒ§çš„å¿ƒç†ï¼Œäººä»¬æ‰æƒ³æ‰¾ä¸€ä»½å®‰ç¨³çš„å·¥ä½œã€‚è¿™äº›ææƒ§æœ‰ï¼šå®³æ€•ä»˜ä¸èµ·è´¦å•ï¼Œå®³æ€•è¢«è§£é›‡ï¼Œå®³æ€•æ²¡æœ‰è¶³å¤Ÿçš„é’±ï¼Œå®³æ€•é‡æ–°å¼€å§‹ã€‚ä¸ºäº†å¯»æ±‚ä¿éšœï¼Œä»–ä»¬å­¦ä¹ æŸç§ä¸“ä¸šï¼Œæˆ–æ˜¯åšç”Ÿæ„ï¼Œæ‹¼å‘½ä¸ºé’±å·¥ä½œã€‚å¤§å¤šæ•°äººæˆäº†é’±çš„å¥´éš¶ï¼Œç„¶åæŠŠæ€’æ°”å‘æ³„åˆ°ä»–ä»¬è€æ¿èº«ä¸Š</li><li>å¤§å¤šæ•°äººå¹¶ä¸çŸ¥é“æ˜¯ä»–ä»¬çš„æ„Ÿæƒ…ä»£æ›¿äº†ä»–ä»¬è¿›è¡Œæ€è€ƒ</li><li>å°±åƒä¸€å¹…ç”»è¡¨ç°çš„ï¼šé©´å­æ‹‰è½¦ï¼Œå› ä¸ºä¸»äººåœ¨å®ƒé¢å‰æŒ‚äº†ä¸ªèƒ¡èåœã€‚ä¸»äººæ¸…æ¥šè‡ªå·±æƒ³è¦å»å“ªé‡Œï¼Œè€Œé©´å­å´åªæ˜¯åœ¨è¿½é€ä¸€ä¸ªå¹»å½±ã€‚ä½†ç¬¬äºŒå¤©é©´å­ä¾æ—§ä¼šå»æ‹‰è½¦ï¼Œå› ä¸ºåˆæœ‰èƒ¡èåœæ”¾åœ¨å®ƒçš„é¢å‰==æˆ‘ä»¬å¤§å¤šæ•°äººå°±æ˜¯é‚£åªé©´å­==</li></ul><h2 id="åæ€"><a href="#åæ€" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>ä»å°çš„æ•™è‚²å°±æ˜¯è®©æˆ‘ä»¬è®¤çœŸå­¦ä¹ ï¼Œé€šè¿‡é«˜è€ƒè¿›å…¥å¥½çš„å¤§å­¦ï¼Œç„¶åå­¦ä¹ ä¸€é—¨çƒ­é—¨çš„ä¸“ä¸šï¼Œå†è¿›å…¥ç¤¾ä¼šä¸ºé’±å·¥ä½œï¼Œç„¶åå·¥ä½œã€èµšé’±ã€æ”¯ä»˜è´¦å•ã€å†å·¥ä½œã€‚å·¥èµ„è¶Šé«˜ã€èŠ±è´¹è¶Šé«˜ï¼Œæ…¢æ…¢çš„å°±å˜æˆäº†é‚£åªé©´å­</li><li>ææƒ§æ˜¯æˆ‘ä»¬å®³æ€•é‡æ–°å¼€å§‹ï¼Œå®³æ€•å»å†’é™©ã€‚å®¶åº­è´£ä»»ã€æ”¯ä»˜ä¸å®Œçš„è´¦å•ã€æ²¡é’±è®©æˆ‘ä»¬è¶Šæ¥è¶Šç•ç•ç¼©ç¼©ã€‚ä½†æ˜¯æˆ‘ä»¬åˆè´ªå©ªï¼Œæ¸´æœ›æœ‰é’±ï¼Œæ‰€ä»¥å¾ˆå¤šäººä¹°å½©ç¥¨ï¼Œæ¸´æœ›ä¸€å¤œæš´å¯Œï¼Œå´å¾ˆå°‘å»å­¦ä¹ ç†è´¢çŸ¥è¯†ï¼ŒæŠ•èµ„è‡ªå·±</li></ul><h1 id="ç¬¬äºŒç« ï¼šä¸ºä»€ä¹ˆè¦æ•™æˆè´¢åŠ¡çŸ¥è¯†"><a href="#ç¬¬äºŒç« ï¼šä¸ºä»€ä¹ˆè¦æ•™æˆè´¢åŠ¡çŸ¥è¯†" class="headerlink" title="ç¬¬äºŒç« ï¼šä¸ºä»€ä¹ˆè¦æ•™æˆè´¢åŠ¡çŸ¥è¯†"></a>ç¬¬äºŒç« ï¼šä¸ºä»€ä¹ˆè¦æ•™æˆè´¢åŠ¡çŸ¥è¯†</h1><h2 id="æœ¬ç« å°ç»“-1"><a href="#æœ¬ç« å°ç»“-1" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="å·¦è„‘æ—¶åˆ»-1"><a href="#å·¦è„‘æ—¶åˆ»-1" class="headerlink" title="å·¦è„‘æ—¶åˆ»"></a>å·¦è„‘æ—¶åˆ»</h3><ul><li>è§‚å¯Ÿè¿™äº›æ•°å­—å¹¶å­¦ä¹ ä»–ä»¬æ‰€è®²çš„æ•…äº‹</li><li>==èµ„äº§æŠŠé’±æ”¾å…¥ä½ çš„å£è¢‹==</li><li>å¦‚æœæœ‰ä¸œè¥¿æŠŠé’±ä»ä½ çš„å£è¢‹é‡Œæ‹¿å‡ºæ¥ï¼Œå®ƒå°±æ˜¯è´Ÿå€º</li></ul><h3 id="å³è„‘æ—¶åˆ»-1"><a href="#å³è„‘æ—¶åˆ»-1" class="headerlink" title="å³è„‘æ—¶åˆ»"></a>å³è„‘æ—¶åˆ»</h3><ul><li>èµ„äº§è´Ÿå€ºè¡¨æ¸…æ¥šçš„è§£é‡Šäº†é’±åœ¨ä¸åŒäººçš„ç”Ÿæ´»ä¸­çš„æ´»åŠ¨è§„å¾‹</li></ul><h3 id="æ½œæ„è¯†æ—¶åˆ»-1"><a href="#æ½œæ„è¯†æ—¶åˆ»-1" class="headerlink" title="æ½œæ„è¯†æ—¶åˆ»"></a>æ½œæ„è¯†æ—¶åˆ»</h3><ul><li>è¢«æ’æ–¥çš„ææƒ§å¯¼è‡´äººä»¬é¡ºä»ï¼Œä»ä¸æå‡ºè´¨ç–‘ï¼Œæ™®éæ¥å—åˆ«äººçš„è§‚ç‚¹å’Œæµè¡Œè¶‹åŠ¿ï¼Œæœ€åå´ä½¿è‡ªå·±çš„è´¢ç‰©å—åˆ°æŸå®³</li></ul><h3 id="å‡ å¼ å›¾"><a href="#å‡ å¼ å›¾" class="headerlink" title="å‡ å¼ å›¾"></a>å‡ å¼ å›¾</h3><p><img src="/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/zichan.jpg" alt="èµ„äº§ç°é‡‘æµæ¨¡å¼å›¾"></p><p><img src="/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/fuzhai.jpg" alt="è´Ÿå€ºç°é‡‘æµæ¨¡å¼å›¾"></p><p><img src="/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/qiongzhongfu.jpg" alt="ç©·äººä¸­äº§å¯Œäººå›¾"></p><h2 id="è¯­å½•-1"><a href="#è¯­å½•-1" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>é‡è¦çš„ä¸æ˜¯ä½ æŒ£äº†å¤šå°‘é’±ï¼Œè€Œæ˜¯ä½ èƒ½ç•™ä¸‹å¤šå°‘é’±</li><li>åªæœ‰çŸ¥è¯†æ‰èƒ½è§£å†³é—®é¢˜å¹¶åˆ›é€ è´¢å¯Œï¼Œé‚£äº›ä¸æ˜¯é è´¢åŠ¡çŸ¥è¯†æŒ£æ¥çš„é’±ä¹Ÿä¸ä¼šé•¿ä¹…</li><li>å¯Œäººè·å¾—èµ„äº§ï¼Œè€Œç©·äººå’Œä¸­äº§é˜¶çº§è·å¾—è´Ÿå€ºï¼Œåªä¸è¿‡ä»–ä»¬ä»¥ä¸ºé‚£äº›è´Ÿå€ºæ˜¯èµ„äº§</li></ul><h2 id="åæ€-1"><a href="#åæ€-1" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>æˆ‘çš„è´¢åŠ¡æ•™è‚²å¯ä»¥è¯´å‡ ä¹æ²¡æœ‰ï¼Œå› ä¸ºä»¥å‰æ²¡é’±ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æƒ³ç€å»å­¦ä¹ è¿™äº›çŸ¥è¯†ï¼Œç°åœ¨çœ‹æ¥æ˜¯å¤šä¹ˆçš„æ„šè ¢</li><li>ä½œè€…å¯¹èµ„äº§å’Œè´Ÿå€ºçš„å®šä¹‰ç›¸å½“ç®€å•é€å½»ï¼Œæˆ‘ä»¬å¤§å¤šæ•°äººçš„ä¸€ç”Ÿæ˜¯å·¥ä½œã€ä¹°æˆ¿ã€ä¹°è½¦ã€å¨¶å¦»ã€ç”Ÿå­ï¼Œä½†æ˜¯è´·æ¬¾ä¹°çš„æˆ¿è½¦è®©è‡ªå·±èƒŒä¸Šäº†30å¹´çš„è´Ÿå€ºï¼Œå†µä¸”å°å­©çš„èŠ±è´¹ï¼Œåªä¼šè®©è‡ªå·±å‹åŠ›è¶Šæ¥è¶Šå¤§ï¼Œè¶Šæ¥è¶Šç©·</li><li>ç°åœ¨çš„æˆ‘å°±æ˜¯ç©·äººçš„ç°é‡‘æµæ¨¡å¼ï¼Œäº‰å–å¾€å¯Œäººæ–¹å‘å‘å±•</li></ul><h1 id="ç¬¬ä¸‰ç« ï¼šå…³æ³¨è‡ªå·±çš„äº‹ä¸š"><a href="#ç¬¬ä¸‰ç« ï¼šå…³æ³¨è‡ªå·±çš„äº‹ä¸š" class="headerlink" title="ç¬¬ä¸‰ç« ï¼šå…³æ³¨è‡ªå·±çš„äº‹ä¸š"></a>ç¬¬ä¸‰ç« ï¼šå…³æ³¨è‡ªå·±çš„äº‹ä¸š</h1><h2 id="æœ¬ç« å°ç»“-2"><a href="#æœ¬ç« å°ç»“-2" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="å·¦è„‘æ—¶åˆ»-2"><a href="#å·¦è„‘æ—¶åˆ»-2" class="headerlink" title="å·¦è„‘æ—¶åˆ»"></a>å·¦è„‘æ—¶åˆ»</h3><ul><li>å½“èµ„äº§äº§ç”Ÿçš„æ”¶å…¥èƒ½å¤Ÿæ”¯ä»˜å¥¢ä¾ˆå“æ—¶ï¼Œæ‰æ˜¯ä½ å¯ä»¥å»è´­ä¹°å®ƒä»¬çš„æ—¶å€™</li></ul><h3 id="å³è„‘æ—¶åˆ»-2"><a href="#å³è„‘æ—¶åˆ»-2" class="headerlink" title="å³è„‘æ—¶åˆ»"></a>å³è„‘æ—¶åˆ»</h3><ul><li>åˆ›é€ æ€§çš„å»æƒ³ä¸€æƒ³ä»€ä¹ˆæ‰æ˜¯ä½ çš„äº‹ä¸šï¼Œè€Œä¸æ˜¯ä½ çš„èŒä¸š</li></ul><h3 id="æ½œæ„è¯†æ—¶åˆ»-2"><a href="#æ½œæ„è¯†æ—¶åˆ»-2" class="headerlink" title="æ½œæ„è¯†æ—¶åˆ»"></a>æ½œæ„è¯†æ—¶åˆ»</h3><ul><li>è·å¾—ä½ æ‰€å–œæ¬¢çš„èµ„äº§ï¼Œè¿™æ ·ä½ æ‰èƒ½å¾ˆå¥½çš„æ‰“ç†ä»–ä»¬ï¼Œäº«å—å…¶ä¸­çš„å­¦ä¹ è¿‡ç¨‹</li></ul><h3 id="èµ„äº§åˆ†ç±»"><a href="#èµ„äº§åˆ†ç±»" class="headerlink" title="èµ„äº§åˆ†ç±»"></a>èµ„äº§åˆ†ç±»</h3><ul><li>ä¸éœ€è¦æˆ‘åˆ°åœºå°±å¯ä»¥æ­£å¸¸è¿ä½œçš„ä¸šåŠ¡ã€‚æˆ‘æ‹¥æœ‰å®ƒä»¬ï¼Œä½†æ˜¯ç”±åˆ«äººç»è¥å’Œç®¡ç†ã€‚å¦‚æœ==æˆ‘å¿…é¡»åœ¨é‚£å·¥ä½œï¼Œé‚£å®ƒå°±ä¸æ˜¯æˆ‘çš„äº‹ä¸šï¼Œè€Œæ˜¯æˆ‘çš„èŒä¸š==</li><li>è‚¡ç¥¨</li><li>å€ºåˆ¸</li><li>èƒ½å¤Ÿäº§ç”Ÿæ”¶å…¥çš„æˆ¿åœ°äº§</li><li>ç¥¨æ®ï¼ˆå€Ÿæ®ï¼‰</li><li>ç‰ˆç¨ï¼Œå¦‚éŸ³ä¹ã€æ‰‹ç¨¿ã€ä¸“åˆ©</li><li>å…¶ä»–ä»»ä½•æœ‰ä»·å€¼ã€å¯äº§ç”Ÿæ”¶å…¥æˆ–æœ‰å¢å€¼æ½œåŠ›å¹¶ä¸”æœ‰å¾ˆå¥½é”€è·¯çš„ä¸œè¥¿</li></ul><h2 id="è¯­å½•-2"><a href="#è¯­å½•-2" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>ä¸ºäº†è´¢åŠ¡å®‰å…¨ï¼Œäººä»¬éœ€è¦å…³æ³¨è‡ªå·±çš„äº‹ä¸šï¼Œè€Œä¸æ˜¯èŒä¸š</li><li>å¯Œäººå…³å¿ƒçš„ç„¦ç‚¹æ˜¯èµ„äº§è€Œå…¶ä»–äººå…³å¿ƒçš„æ˜¯æ”¶å…¥</li><li>å­˜åœ¨è´¢åŠ¡é—®é¢˜çš„äººç»å¸¸è€—è´¹ä¸€ç”Ÿä¸ºåˆ«äººå·¥ä½œï¼Œå…¶ä¸­è®¸å¤šäººåœ¨ä»–ä»¬ä¸èƒ½å·¥ä½œæ—¶å°±å˜å¾—ä¸€æ— æ‰€æœ‰</li><li>ä¸€æ—¦æŠŠ1ç¾å…ƒæŠ•å…¥äº†èµ„äº§é¡¹ï¼Œå°±ä¸è¦è®©å®ƒå‡ºæ¥ã€‚ä½ åº”è¯¥è¿™ä¹ˆæƒ³ï¼šè¿™1ç¾å…ƒè¿›äº†ä½ çš„èµ„äº§é¡¹ï¼Œå®ƒå°±æˆäº†ä½ çš„é›‡å‘˜ã€‚å…³äºé’±ï¼Œæœ€å¦™çš„å°±æ˜¯è®©å®ƒå¯ä»¥ä¸€å¤©24å°æ—¶ä¸é—´æ–­å·¥ä½œï¼Œè¿˜èƒ½ä¸ºä½ çš„å­å­™åä»£æœåŠ¡</li><li>ä¸€ä¸ªé‡è¦çš„åŒºåˆ«å°±æ˜¯ï¼šå¯Œäººæœ€åæ‰ä¹°å¥¢ä¾ˆå“ï¼Œç©·äººå’Œä¸­äº§é˜¶çº§ä¼šå…ˆä¹°å¥¢ä¾ˆå“</li></ul><h2 id="åæ€-2"><a href="#åæ€-2" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>æˆ‘çš„èŒä¸šæ˜¯æ•°æ®æŒ–æ˜å·¥ç¨‹å¸ˆï¼Œæˆ‘çš„äº‹ä¸šæš‚æ—¶æ²¡æœ‰ï¼Œå¾—æ‰¾ä¸€ä»½äº‹ä¸šäº†</li><li>ç›®å‰ä¸ºæ­¢æ‹¥æœ‰çš„å‡€èµ„äº§ä¹Ÿå°±æ˜¯æˆ‘è„‘å­é‡Œé¢çš„çŸ¥è¯†äº†</li><li>å¤§å¤šæ•°æ—¶å€™æˆ‘çš„ç°é‡‘æµå¹¶ä¸é€‚åˆè´­ä¹°å¥¢ä¾ˆå“ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å»è´­ä¹°äº†ï¼Œå¹¶ä¸”è¿˜ç»å¸¸å»æ—…æ¸¸ç­‰</li></ul><h1 id="ç¬¬å››ç« ï¼šç¨æ”¶çš„å†å²å’Œå…¬å¸çš„åŠ›é‡"><a href="#ç¬¬å››ç« ï¼šç¨æ”¶çš„å†å²å’Œå…¬å¸çš„åŠ›é‡" class="headerlink" title="ç¬¬å››ç« ï¼šç¨æ”¶çš„å†å²å’Œå…¬å¸çš„åŠ›é‡"></a>ç¬¬å››ç« ï¼šç¨æ”¶çš„å†å²å’Œå…¬å¸çš„åŠ›é‡</h1><h2 id="æœ¬ç« å°ç»“-3"><a href="#æœ¬ç« å°ç»“-3" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="å·¦è„‘æ—¶åˆ»-3"><a href="#å·¦è„‘æ—¶åˆ»-3" class="headerlink" title="å·¦è„‘æ—¶åˆ»"></a>å·¦è„‘æ—¶åˆ»</h3><ul><li>ä¼šè®¡å°±æ˜¯è´¢åŠ¡çŸ¥è¯†æˆ–è€…è§£è¯»æ•°å­—çš„èƒ½åŠ›ã€‚å¦‚æœä½ æƒ³å»ºç«‹ä¸€ä¸ªå•†ä¸šå¸å›½ï¼Œè¿™é¡¹èƒ½åŠ›è‡³å…³é‡è¦ã€‚ä½ ç®¡ç†çš„é’±è¶Šå¤šï¼Œå°±è¶Šè¦ç²¾ç¡®ï¼Œå¦åˆ™ä½ çš„å¤§å¦å°±ä¼šå€’å¡Œ</li></ul><h3 id="å³è„‘æ—¶åˆ»-3"><a href="#å³è„‘æ—¶åˆ»-3" class="headerlink" title="å³è„‘æ—¶åˆ»"></a>å³è„‘æ—¶åˆ»</h3><ul><li>æŠ•èµ„å°±æ˜¯â€œé’±ç”Ÿé’±â€çš„ç§‘å­¦ã€‚è¿™åŒ…å«ç­–ç•¥å’Œæ–¹æ¡ˆï¼Œè¿™è¦ä½¿ç”¨å±äºåˆ›é€ çš„å³è„‘æ¥åš</li></ul><h3 id="æ½œæ„è¯†æ—¶åˆ»-3"><a href="#æ½œæ„è¯†æ—¶åˆ»-3" class="headerlink" title="æ½œæ„è¯†æ—¶åˆ»"></a>æ½œæ„è¯†æ—¶åˆ»</h3><ul><li>äº†è§£å¸‚åœºæ˜¯ä¾›ç»™ä¸éœ€æ±‚çš„ç§‘å­¦ã€‚åœ¨å¸‚åœºåŸºæœ¬é¢æˆ–è€…è¯´ä¸€é¡¹æŠ•èµ„çš„ç»æµæ„ä¹‰åŸºç¡€ä¸Šï¼Œä½ éœ€è¦äº†è§£å—æ„Ÿæƒ…é©±åŠ¨çš„å¸‚åœºçš„â€œæŠ€æœ¯é¢â€</li></ul><h3 id="æ‹¥æœ‰å…¬å¸çš„å¥½å¤„"><a href="#æ‹¥æœ‰å…¬å¸çš„å¥½å¤„" class="headerlink" title="æ‹¥æœ‰å…¬å¸çš„å¥½å¤„"></a>æ‹¥æœ‰å…¬å¸çš„å¥½å¤„</h3><ul><li>æ‹¥æœ‰å…¬å¸çš„å¯Œäººæ˜¯ï¼šæŒ£é’±ã€æ”¯å‡ºã€ç¼´ç¨</li><li>ä¸ºå…¬å¸å·¥ä½œçš„äººæ˜¯ï¼šæŒ£é’±ã€ç¼´ç¨ã€æ”¯å‡º</li><li>ä¸¤è€…çš„åŒºåˆ«å°±æ˜¯ç¨èµ‹çš„å‹åŠ›è®©ä¸ºå…¬å¸å·¥ä½œçš„äººæŸå¤±å¾ˆå¤š</li></ul><h3 id="è´¢å•†çš„ç»„æˆ"><a href="#è´¢å•†çš„ç»„æˆ" class="headerlink" title="è´¢å•†çš„ç»„æˆ"></a>è´¢å•†çš„ç»„æˆ</h3><ul><li>ä¼šè®¡ï¼ˆè´¢åŠ¡çŸ¥è¯†ï¼‰</li><li>æŠ•èµ„ï¼ˆé’±ç”Ÿé’±çš„ç§‘å­¦å’Œç­–ç•¥ï¼‰</li><li>äº†è§£å¸‚åœºï¼ˆä¾›ç»™ä¸éœ€æ±‚çš„ç§‘å­¦ä»¥åŠå¸‚åœºæ¡ä»¶ï¼‰</li><li>æ³•å¾‹ï¼ˆå‡ç¨ä¼˜æƒ å’Œåœ¨è¯‰è®¼ä¸­è·å¾—ä¿æŠ¤ï¼‰</li></ul><h2 id="è¯­å½•-3"><a href="#è¯­å½•-3" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>äº‹å®ä¸Šå¯Œäººå¹¶æœªè¢«å¾ç¨ï¼Œæ˜¯ä¸­äº§é˜¶çº§å°¤å…¶æ˜¯å—è¿‡è‰¯å¥½æ•™è‚²çš„é«˜æ”¶å…¥çš„ä¸­äº§é˜¶çº§åœ¨ä¸ºç©·äººæ”¯ä»˜ç¨é‡‘</li><li>å¦‚æœä½ ä¸ºé’±å·¥ä½œï¼Œä½ å°±æŠŠåŠ›é‡ç»™äº†ä½ çš„è€æ¿ï¼Œå¦‚æœè®©é’±ä¸ºä½ å·¥ä½œï¼Œä½ å°±èƒ½æ§åˆ¶è¿™ç§åŠ›é‡</li><li>äº†è§£å‡ç¨ä¼˜æƒ æ”¿ç­–å’Œå…¬å¸æ³•çš„äººä¼šæ¯”é›‡å‘˜å’Œå°ä¸šä¸»æ›´å¿«è‡´å¯Œ</li></ul><h2 id="åæ€-3"><a href="#åæ€-3" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>ä¸­å›½çš„ç¨æ”¶æ”¿ç­–å¯èƒ½è·Ÿä¹¦ä¸­æ‰€è¯´ä¸ä¸€æ ·ï¼Œç°åœ¨å¯¹ä¸ªäººä¹Ÿæœ‰å¾ˆå¤šå‡ç¨ä¼˜æƒ </li></ul><h1 id="ç¬¬äº”ç« ï¼šå¯Œäººçš„æŠ•èµ„"><a href="#ç¬¬äº”ç« ï¼šå¯Œäººçš„æŠ•èµ„" class="headerlink" title="ç¬¬äº”ç« ï¼šå¯Œäººçš„æŠ•èµ„"></a>ç¬¬äº”ç« ï¼šå¯Œäººçš„æŠ•èµ„</h1><h2 id="æœ¬ç« å°ç»“-4"><a href="#æœ¬ç« å°ç»“-4" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="å·¦è„‘æ—¶åˆ»-4"><a href="#å·¦è„‘æ—¶åˆ»-4" class="headerlink" title="å·¦è„‘æ—¶åˆ»"></a>å·¦è„‘æ—¶åˆ»</h3><ul><li>ä¸€å°ç¬”é’±å¯ä»¥é€šè¿‡ç²¾æ˜çš„ã€å¥½çš„æŠ•èµ„å˜æˆä¸€å¤§ç¬”é’±</li></ul><h3 id="å³è„‘æ—¶åˆ»-4"><a href="#å³è„‘æ—¶åˆ»-4" class="headerlink" title="å³è„‘æ—¶åˆ»"></a>å³è„‘æ—¶åˆ»</h3><ul><li>ä½œè€…å¸¸å¸¸é¼“åŠ±ä»–çš„æˆäººå­¦ç”Ÿè¦ä»ã€Šå¯Œçˆ¸çˆ¸ç°é‡‘æµã€‹æ¸¸æˆä¸­å‘ç°å“ªäº›æƒ…å†µæ˜¯ä»–ä»¬æ‰€çŸ¥é“çš„ï¼Œå“ªäº›æ˜¯ä»–ä»¬è¿˜éœ€è¦å­¦ä¹ çš„ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªæ¸¸æˆèƒ½åæ˜ ä¸€ä¸ªäººçš„è¡Œä¸ºæ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®æ—¶çš„åé¦ˆç³»ç»Ÿã€‚å®ƒä¸éœ€è¦è€å¸ˆä»¬ä¸åœçš„äº¤æ¥ï¼Œå®ƒå°±åƒæ˜¯ä¸€åœºä¸ªäººé—´çš„å¯¹è¯ï¼Œå®Œå…¨æŒ‰ç…§ä½ çš„ä¹ æƒ¯å®šåˆ¶</li></ul><h3 id="æ½œæ„è¯†æ—¶åˆ»-4"><a href="#æ½œæ„è¯†æ—¶åˆ»-4" class="headerlink" title="æ½œæ„è¯†æ—¶åˆ»"></a>æ½œæ„è¯†æ—¶åˆ»</h3><ul><li>æˆ‘ä»¬éƒ½æ‹¥æœ‰å·¨å¤§çš„æ½œèƒ½â€”â€”è¿™æ˜¯ä¸Šå¤©èµèµçš„ç¤¼ç‰©ã€‚æˆ‘ä»¬éƒ½æˆ–å¤šæˆ–å°‘åœ°å­˜åœ¨ç€æŸç§è‡ªæˆ‘æ€€ç–‘çš„å¿ƒç†ï¼Œä»è€Œé˜»ç¢å‰è¡Œçš„æ­¥ä¼ã€‚==è¿™ç§éšœç¢å¾ˆå°‘æ˜¯ç¼ºä¹æŸç§æŠ€æœ¯æ€§çš„ä¸œè¥¿ï¼Œæ›´å¤šæ˜¯ç¼ºä¹è‡ªä¿¡==</li></ul><h3 id="æŠ•èµ„è€…ç±»å‹"><a href="#æŠ•èµ„è€…ç±»å‹" class="headerlink" title="æŠ•èµ„è€…ç±»å‹"></a>æŠ•èµ„è€…ç±»å‹</h3><ul><li>è¿›è¡Œä¸€æ½å­æŠ•èµ„çš„äººï¼ˆæ¯”å¦‚è´¢åŠ¡è§„åˆ’å¸ˆï¼‰</li><li>è‡ªå·±åˆ›é€ æŠ•èµ„æœºä¼šçš„äººï¼ˆèŒä¸šæŠ•èµ„è€…ï¼‰ï¼Œè¦æƒ³æˆä¸ºè¿™ç§ç±»å‹çš„äººï¼Œå¿…é¡»å­¦ä¼šä»¥ä¸‹ä¸‰ç§æŠ€èƒ½<ul><li>å¦‚ä½•æ‰¾åˆ°åˆ«äººé”™å¤±çš„æœºä¼š</li><li>å¦‚ä½•ç­¹æªèµ„é‡‘</li><li>å¦‚ä½•æŠŠç²¾æ˜çš„äººç»„ç»‡èµ·æ¥å¹¶é›‡ä½£ä»–ä»¬ä¸ºä½ å·¥ä½œã€‚==é£é™©æ— å¤„ä¸åœ¨ï¼Œè¦å­¦ä¼šé©¾é©­é£é™©ï¼Œåˆ«æ€»æƒ³å›é¿é£é™©==</li></ul></li></ul><h2 id="è¯­å½•-4"><a href="#è¯­å½•-4" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œäººä»¬å¾€å¾€æ˜¯ä¾é å‹‡æ°”è€Œä¸æ˜¯æ™ºæ…§å»å–å¾—é¢†å…ˆçš„ä½ç½®çš„</li><li>é™ˆæ—§çš„æ€æƒ³æ˜¯é‚£äº›åœ¨è´«å›°çº¿ä¸Šè‹¦è‹¦æŒ£æ‰çš„äººèƒŒè´Ÿçš„æœ€å¤§å€ºåŠ¡ã€‚åŸå› å¾ˆç®€å•ï¼šä»–ä»¬æ²¡æœ‰æ„è¯†åˆ°å·²æœ‰çš„æŸç§æ€æƒ³æˆ–æ–¹æ³•åœ¨æ˜¨å¤©è¿˜æ˜¯ä¸€ç§èµ„äº§ï¼Œä»Šå¤©å´å·²ç»å˜æˆäº†è´Ÿå€º</li><li>æˆ‘ä»¬å”¯ä¸€çš„ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„èµ„äº§æ˜¯æˆ‘ä»¬çš„å¤´è„‘ã€‚å¦‚æœä½¿å…¶å¾—åˆ°è‰¯å¥½çš„è®­ç»ƒï¼Œå®ƒè½¬ç¬é—´å°±èƒ½åˆ›é€ å¤§é‡çš„è´¢å¯Œã€‚è€Œæœªç»è®­ç»ƒçš„å¤´è„‘æœ‰å¯èƒ½åˆ›é€ æ— æ•°çš„è´«ç©·æ¥æ‹–å®ä¸€ä¸ªå®¶åº­ï¼Œç”šè‡³å‡ ä»£äºº</li></ul><h2 id="åæ€-4"><a href="#åæ€-4" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>ä½œè€…è¯´å¾—å¯¹ï¼Œé˜»ç¢æˆ‘ä»¬å‰è¿›çš„å¹¶éæŠ€æœ¯æ€§çŸ¥è¯†çš„ç¼ºä¹ï¼Œè€Œæ˜¯è‡ªæˆ‘æ€€ç–‘å’Œè‡ªä¿¡çš„ç¼ºä¹ã€‚æˆ‘å¹³æ—¶æ€»æ˜¯å°½é‡é¿å…é£é™©ï¼Œæ€»æ˜¯å®³æ€•è¡€æœ¬æ— å½’ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯è‡ªå·±æ²¡æ‘¸æ¸…å…¶å¥—è·¯</li><li>å¦‚æœå‡å°‘å¯¹å¤±è´¥çš„ææƒ§ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå¾…åŠªåŠ›</li></ul><h1 id="ç¬¬å…­ç« ï¼šå­¦ä¼šä¸ä¸ºé’±å·¥ä½œ"><a href="#ç¬¬å…­ç« ï¼šå­¦ä¼šä¸ä¸ºé’±å·¥ä½œ" class="headerlink" title="ç¬¬å…­ç« ï¼šå­¦ä¼šä¸ä¸ºé’±å·¥ä½œ"></a>ç¬¬å…­ç« ï¼šå­¦ä¼šä¸ä¸ºé’±å·¥ä½œ</h1><h2 id="æœ¬ç« å°ç»“-5"><a href="#æœ¬ç« å°ç»“-5" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="å·¦è„‘æ—¶åˆ»-5"><a href="#å·¦è„‘æ—¶åˆ»-5" class="headerlink" title="å·¦è„‘æ—¶åˆ»"></a>å·¦è„‘æ—¶åˆ»</h3><ul><li>è¾å»ä¸€ä»½çœ‹ä¼¼æœ‰å‰é€”çš„å·¥ä½œè€Œå»è¿½æ±‚å¦ä¸€ä»½å·¥ä½œï¼ŒçŸ­æœŸæ¥çœ‹ï¼Œä½ çš„è–ªæ°´å¯èƒ½ä¼šå‡å°‘ï¼›ä½†ä»é•¿è¿œæ¥çœ‹ï¼Œä½ å°†ä»ä¸­è·å¾—å·¨å¤§çš„æ”¶ç›Š</li></ul><h3 id="å³è„‘æ—¶åˆ»-5"><a href="#å³è„‘æ—¶åˆ»-5" class="headerlink" title="å³è„‘æ—¶åˆ»"></a>å³è„‘æ—¶åˆ»</h3><ul><li>==å­¦ä¹ ä¸“ä¸šä»¥å¤–çš„å…¶ä»–æŠ€èƒ½å°†ä¼šä½¿ä½ å—ç›Š==</li></ul><h3 id="æ½œæ„è¯†æ—¶åˆ»-5"><a href="#æ½œæ„è¯†æ—¶åˆ»-5" class="headerlink" title="æ½œæ„è¯†æ—¶åˆ»"></a>æ½œæ„è¯†æ—¶åˆ»</h3><ul><li>é¢å¯¹ä½ éœ€è¦å­¦ä¹ çš„æ–°æŠ€èƒ½ï¼Œè¯·åŠ¡å¿…å…‹æœå†…å¿ƒçš„ææƒ§å’Œæ‡’æƒ°ã€‚è€Œä¸”ä½ å¿…é¡»å¼ºè¿«è‡ªå·±å»å­¦ä¹ ï¼Œåƒå»å¥èº«æˆ¿ä¸€æ ·ï¼Œå½“ä½ åšåˆ°ä¹‹åï¼Œä½ ä¼šæ„Ÿåˆ°å¾ˆé«˜å…´</li></ul><h3 id="æˆåŠŸå¿…éœ€ç®¡ç†æŠ€èƒ½"><a href="#æˆåŠŸå¿…éœ€ç®¡ç†æŠ€èƒ½" class="headerlink" title="æˆåŠŸå¿…éœ€ç®¡ç†æŠ€èƒ½"></a>æˆåŠŸå¿…éœ€ç®¡ç†æŠ€èƒ½</h3><ul><li>ç°é‡‘æµç®¡ç†</li><li>ç³»ç»Ÿç®¡ç†</li><li>äººå‘˜ç®¡ç†</li><li>é”€å”®æŠ€èƒ½</li><li>è¥é”€æŠ€èƒ½</li><li>æ²Ÿé€šèƒ½åŠ›</li></ul><h2 id="è¯­å½•-5"><a href="#è¯­å½•-5" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>å·¥ä½œæ¯”ç ´äº§å¼ºä¸€ç‚¹</li><li>å¹´è½»äººåœ¨æ‰¾å·¥ä½œæ—¶è¦çœ‹èƒ½ä»ä¸­å­¦åˆ°ä»€ä¹ˆï¼Œè€Œä¸æ˜¯åªçœ‹èƒ½æŒ£å¤šå°‘é’±</li><li>ä»˜å‡ºé‡‘é’±æ˜¯é‚£äº›éå¸¸å¯Œæœ‰çš„å®¶åº­ä¿æŒå¯Œæœ‰çš„ç§˜è¯€</li></ul><h2 id="åæ€-5"><a href="#åæ€-5" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>ç²¾é€šä¸“ä¸šæŠ€èƒ½æ—¢æ˜¯ä¼˜åŠ¿ä¹Ÿæ˜¯å¼±ç‚¹ï¼Œæ‰¾å·¥ä½œçš„æ—¶å€™åªçœ‹èƒ½æŒ£å¤šå°‘é’±ï¼Œè€Œæ²¡æœ‰å»å…³æ³¨å…¶ä¸­èƒ½å­¦åˆ°çš„ä¸œè¥¿ï¼Œå¾—æ”¹</li><li>å¹³æ—¶ä¸æ„¿æ„èŠ±é’±å»å­¦ä¹ æ–°çš„çŸ¥è¯†ï¼Œä¸æ„¿å»çœ‹ä¹¦ã€å¥èº«ï¼Œè‡ªå·±çš„æƒ°æ€§æ—¶åˆ»åœ¨ä½œæ€ªï¼Œè¿˜æ˜¯æ²¡æœ‰ä¸‹å®šå†³å¿ƒçš„å‹‡æ°”</li></ul><h1 id="ç¬¬å…«ç« ï¼šå¼€å§‹è¡ŒåŠ¨"><a href="#ç¬¬å…«ç« ï¼šå¼€å§‹è¡ŒåŠ¨" class="headerlink" title="ç¬¬å…«ç« ï¼šå¼€å§‹è¡ŒåŠ¨"></a>ç¬¬å…«ç« ï¼šå¼€å§‹è¡ŒåŠ¨</h1><h2 id="æœ¬ç« å°ç»“-6"><a href="#æœ¬ç« å°ç»“-6" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="å·¦è„‘æ—¶åˆ»-6"><a href="#å·¦è„‘æ—¶åˆ»-6" class="headerlink" title="å·¦è„‘æ—¶åˆ»"></a>å·¦è„‘æ—¶åˆ»</h3><ul><li>ç”¨è‡ªå¾‹ç²¾ç¥è·µè¡Œâ€œé¦–å…ˆæ”¯ä»˜è‡ªå·±â€è¿™ä¸€æ³•åˆ™ï¼Œä»¥ç¡®ä¿æ°¸è¿œæŠŠâ€œå¢åŠ èµ„äº§é¡¹â€æ”¾åœ¨ç¬¬ä¸€ä½</li></ul><h3 id="å³è„‘æ—¶åˆ»-6"><a href="#å³è„‘æ—¶åˆ»-6" class="headerlink" title="å³è„‘æ—¶åˆ»"></a>å³è„‘æ—¶åˆ»</h3><ul><li>è®©ä½ çš„å¤´è„‘å¯¹æ–°çš„æƒ³æ³•å’Œæ–°çš„åšäº‹æ–¹å¼ä¿æŒå¼€æ”¾ï¼Œä»¥ä¾¿è®©æ–°æ—§æƒ³æ³•å’Œæ–¹å¼äº¤é”‹ï¼Œæ“¦å‡ºæ€æƒ³çš„ç«èŠ±</li></ul><h3 id="æ½œæ„è¯†æ—¶åˆ»-6"><a href="#æ½œæ„è¯†æ—¶åˆ»-6" class="headerlink" title="æ½œæ„è¯†æ—¶åˆ»"></a>æ½œæ„è¯†æ—¶åˆ»</h3><ul><li>æŒ–æ˜â€œæˆ‘æƒ³å˜å¾—å¯Œæœ‰â€çš„ç†ç”±å’Œç›®æ ‡ï¼Œå¹¶ä¸æ–­å¢å¼ºè¿™äº›æ·±å±‚æ¬¡çš„ç²¾ç¥åŠ¨åŠ›ã€‚å®ƒä»¬å°†å¸®åŠ©ä½ æ‰«é™¤é€šå¾€è´¢åŠ¡è‡ªç”±ä¹‹è·¯ä¸Šçš„ä¸€åˆ‡éšœç¢</li></ul><h3 id="å”¤é†’ç†è´¢å¤©èµ‹çš„åä¸ªæ­¥éª¤"><a href="#å”¤é†’ç†è´¢å¤©èµ‹çš„åä¸ªæ­¥éª¤" class="headerlink" title="å”¤é†’ç†è´¢å¤©èµ‹çš„åä¸ªæ­¥éª¤"></a>å”¤é†’ç†è´¢å¤©èµ‹çš„åä¸ªæ­¥éª¤</h3><h4 id="ç²¾ç¥çš„åŠ›é‡â€”â€”éœ€è¦ä¸€ä¸ªè¶…ç°å®çš„ç†ç”±"><a href="#ç²¾ç¥çš„åŠ›é‡â€”â€”éœ€è¦ä¸€ä¸ªè¶…ç°å®çš„ç†ç”±" class="headerlink" title="ç²¾ç¥çš„åŠ›é‡â€”â€”éœ€è¦ä¸€ä¸ªè¶…ç°å®çš„ç†ç”±"></a>ç²¾ç¥çš„åŠ›é‡â€”â€”éœ€è¦ä¸€ä¸ªè¶…ç°å®çš„ç†ç”±</h4><ul><li>å®šä¸€ä¸ªå¼ºæœ‰åŠ›çš„ç†ç”±å’Œç›®æ ‡æ¥æ‰«é™¤ä¸€åˆ‡éšœç¢</li><li>è¿™äº›ç†ç”±å’Œç›®æ ‡æ˜¯â€œæƒ³è¦â€å’Œâ€œä¸æƒ³è¦â€çš„ç»“åˆä½“</li></ul><h4 id="é€‰æ‹©çš„åŠ›é‡â€”â€”æ¯å¤©åšå‡ºè‡ªå·±çš„é€‰æ‹©"><a href="#é€‰æ‹©çš„åŠ›é‡â€”â€”æ¯å¤©åšå‡ºè‡ªå·±çš„é€‰æ‹©" class="headerlink" title="é€‰æ‹©çš„åŠ›é‡â€”â€”æ¯å¤©åšå‡ºè‡ªå·±çš„é€‰æ‹©"></a>é€‰æ‹©çš„åŠ›é‡â€”â€”æ¯å¤©åšå‡ºè‡ªå·±çš„é€‰æ‹©</h4><ul><li>é¦–å…ˆé€‰æ‹©æŠ•èµ„æ•™è‚²ï¼Œå› ä¸ºæˆ‘ä»¬çš„å¤´è„‘æ˜¯æœ€å¼ºå¤§çš„å·¥å…·</li><li>å¤šå¬ï¼Œå¤šå­¦ä¹ ã€‚ä»¥é•¿è¿œçš„çœ¼å…‰æ¥çœ‹å¾…è´¢å¯Œï¼Œä¸è¦æœ‰ä¸€å¤œæš´å¯Œçš„å¿µå¤´</li><li>é€‰æ‹©å­¦ä¹ ä¸åŒæ–°çŸ¥è¯†ï¼Œé€‰æ‹©è¿åŠ¨ï¼Œé€‰æ‹©æŠ•èµ„é¢†åŸŸç­‰ç­‰</li></ul><h4 id="å…³ç³»çš„åŠ›é‡â€”â€”æ…é‡åœ°é€‰æ‹©æœ‹å‹"><a href="#å…³ç³»çš„åŠ›é‡â€”â€”æ…é‡åœ°é€‰æ‹©æœ‹å‹" class="headerlink" title="å…³ç³»çš„åŠ›é‡â€”â€”æ…é‡åœ°é€‰æ‹©æœ‹å‹"></a>å…³ç³»çš„åŠ›é‡â€”â€”æ…é‡åœ°é€‰æ‹©æœ‹å‹</h4><ul><li>ä¸è¦å¬è´«ç©·æˆ–è€…èƒ†å°çš„äººçš„è¯ï¼Œå› ä¸ºä»–ä»¬æ€»ä¼šå‘Šè¯‰ä½ è¿™ä»¶äº‹ä¸ºä»€ä¹ˆä¸è¡Œ</li><li>å°½é‡è·Ÿâ€œå†…çº¿äººå‘˜â€æ‰“äº¤é“ï¼Œå› ä¸ºä»–ä»¬çŸ¥é“ä¸€äº›å†…å¹•æ¶ˆæ¯</li></ul><h4 id="å¿«é€Ÿå­¦ä¹ çš„åŠ›é‡â€”â€”æŒæ¡ä¸€ç§æ¨¡å¼ï¼Œç„¶åå†å­¦ä¹ ä¸€ç§æ–°çš„æ¨¡å¼"><a href="#å¿«é€Ÿå­¦ä¹ çš„åŠ›é‡â€”â€”æŒæ¡ä¸€ç§æ¨¡å¼ï¼Œç„¶åå†å­¦ä¹ ä¸€ç§æ–°çš„æ¨¡å¼" class="headerlink" title="å¿«é€Ÿå­¦ä¹ çš„åŠ›é‡â€”â€”æŒæ¡ä¸€ç§æ¨¡å¼ï¼Œç„¶åå†å­¦ä¹ ä¸€ç§æ–°çš„æ¨¡å¼"></a>å¿«é€Ÿå­¦ä¹ çš„åŠ›é‡â€”â€”æŒæ¡ä¸€ç§æ¨¡å¼ï¼Œç„¶åå†å­¦ä¹ ä¸€ç§æ–°çš„æ¨¡å¼</h4><ul><li>ä½ å­¦åˆ°äº†ä»€ä¹ˆï¼Œå°±ä¼šæˆä¸ºä»€ä¹ˆæ ·çš„äºº</li><li>å¤§å¤šæ•°äººçš„èµšé’±æ¨¡å¼<ul><li>ä¸Šç­</li><li>èµšé’±</li><li>æ”¯ä»˜è´¦å•</li><li>å¹³è¡¡æ”¯ç¥¨è–„</li><li>è´­ä¹°å…±åŒåŸºé‡‘</li><li>ç„¶åå†ä¸Šç­</li></ul></li><li>å¦‚æœæŒ£é’±ä¸å¤Ÿå¤šï¼Œåˆ™éœ€è¦æ¢å¯»æ–°çš„èµšé’±æ¨¡å¼</li></ul><h4 id="è‡ªå¾‹çš„åŠ›é‡â€”â€”é¦–å…ˆæ”¯ä»˜è‡ªå·±"><a href="#è‡ªå¾‹çš„åŠ›é‡â€”â€”é¦–å…ˆæ”¯ä»˜è‡ªå·±" class="headerlink" title="è‡ªå¾‹çš„åŠ›é‡â€”â€”é¦–å…ˆæ”¯ä»˜è‡ªå·±"></a>è‡ªå¾‹çš„åŠ›é‡â€”â€”é¦–å…ˆæ”¯ä»˜è‡ªå·±</h4><ul><li>èƒ½å¤Ÿè‡ªå¾‹æ˜¯å°†å¯Œäººã€ç©·äººåˆ†å¼€çš„é¦–è¦å› ç´ </li><li>å¼€åˆ›äº‹ä¸šæ‰€å¿…å¤‡çš„3ç§ç®¡ç†æŠ€èƒ½<ul><li>ç°é‡‘æµç®¡ç†</li><li>äººäº‹ç®¡ç†</li><li>æ—¶é—´ç®¡ç†</li></ul></li><li>ä½•ä¸ºé¦–å…ˆæ”¯ä»˜è‡ªå·±ï¼Œè¯·çœ‹ä¸‹å›¾</li><li>é¦–å…ˆæ”¯ä»˜è‡ªå·±çš„ä¸¤ä¸ªæ³•åˆ™<ul><li>ä¸è¦è®©è‡ªå·±èƒŒä¸Šæ•°é¢è¿‡å¤§çš„å€ºåŠ¡åŒ…è¢±ã€‚ä¿æŒä½æ”¯å‡ºã€‚é¦–å…ˆå»ºç«‹èµ„äº§é¡¹ï¼Œç„¶åå†ç”¨èµ„äº§é¡¹è´­ä¹°å¤§æˆ¿å­å’Œè±ªè½¦</li><li>å½“ä½ èµ„é‡‘çŸ­ç¼ºæ—¶ï¼Œè®©å‹åŠ›å»å‘æŒ¥ä½œç”¨ï¼Œä¸è¦åŠ¨ç”¨ä½ çš„å‚¨è“„æˆ–æŠ•èµ„ã€‚åˆ©ç”¨å‹åŠ›æ¿€å‘ä½ çš„ç†è´¢å¤©èµ‹ï¼Œæƒ³å‡ºæ–°çš„èµšé’±æ–¹æ³•ï¼Œç„¶åæ”¯ä»˜ä½ çš„è´¦å•ã€‚è¿™æ ·ä¸ä½†èƒ½è®©ä½ èµšåˆ°é’±ï¼Œè¿˜å¯ä»¥æé«˜ä½ çš„è´¢å•†</li></ul></li></ul><p><img src="/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/zhifuziji.jpg" alt="é¦–å…ˆæ”¯ä»˜è‡ªå·±"></p><p><img src="/2020/04/07/du-shu-bi-ji-zhi-fu-ba-ba-qiong-ba-ba/zhifubieren.jpg" alt="é¦–å…ˆæ”¯ä»˜åˆ«äºº"></p><h4 id="å¥½å»ºè®®çš„åŠ›é‡â€”â€”ç»™ä½ çš„ç»çºªäººä»¥ä¼˜åšçš„æŠ¥ä»‡"><a href="#å¥½å»ºè®®çš„åŠ›é‡â€”â€”ç»™ä½ çš„ç»çºªäººä»¥ä¼˜åšçš„æŠ¥ä»‡" class="headerlink" title="å¥½å»ºè®®çš„åŠ›é‡â€”â€”ç»™ä½ çš„ç»çºªäººä»¥ä¼˜åšçš„æŠ¥ä»‡"></a>å¥½å»ºè®®çš„åŠ›é‡â€”â€”ç»™ä½ çš„ç»çºªäººä»¥ä¼˜åšçš„æŠ¥ä»‡</h4><ul><li>ä¿¡æ¯æ˜¯æ— ä»·çš„ï¼Œä¸€ä½å¥½çš„ç»çºªäººä¸ä»…ä¸ºä½ æä¾›ä¿¡æ¯ï¼Œè¿˜èƒ½è®©ä½ èµšé’±</li><li>æ‰€æœ‰çš„ç»çºªäººçš„èƒ½åŠ›å¹¶ééƒ½ä¸€æ ·ã€‚ä¸ä»–ä»¬äº¤æµï¼Œäº†è§£ä»–ä»¬æ‹¥æœ‰å¤šå°‘è´¢äº§æˆ–æŠ•èµ„ã€‚è¦æ‰¾ä»¥ä¸ºå¾ˆå…³å¿ƒä½ çš„åˆ©ç›Šçš„ç»çºªäººï¼Œå¹¶ä¸”æ…·æ…¨çš„å¯¹å¾…ä»–</li></ul><h4 id="æ— ç§çš„åŠ›é‡â€”â€”åšä¸€ä¸ªâ€œå°ç¬¬å®‰ç»™äºˆè€…â€"><a href="#æ— ç§çš„åŠ›é‡â€”â€”åšä¸€ä¸ªâ€œå°ç¬¬å®‰ç»™äºˆè€…â€" class="headerlink" title="æ— ç§çš„åŠ›é‡â€”â€”åšä¸€ä¸ªâ€œå°ç¬¬å®‰ç»™äºˆè€…â€"></a>æ— ç§çš„åŠ›é‡â€”â€”åšä¸€ä¸ªâ€œå°ç¬¬å®‰ç»™äºˆè€…â€</h4><ul><li>è®©ä½ çš„åˆå§‹æŠ•èµ„å›æœ¬ï¼Œå¹¶ä¸”è¦å¿«é€Ÿå›æœ¬</li><li>â€œå°ç¬¬å®‰ç»™äºˆè€…â€ï¼šå°ç¬¬å®‰äººç»™ç™½äººä¸€æ¡æ¯¯å­ï¼Œç™½äººä»¥ä¸ºæ˜¯ç¤¼ç‰©ï¼Œä½†æ˜¯å°ç¬¬å®‰äººä¼šè¦å›æ¯¯å­ï¼</li></ul><h4 id="ä¸“æ³¨çš„åŠ›é‡â€”â€”ç”¨èµ„äº§è´­ä¹°å¥¢ä¾ˆå“"><a href="#ä¸“æ³¨çš„åŠ›é‡â€”â€”ç”¨èµ„äº§è´­ä¹°å¥¢ä¾ˆå“" class="headerlink" title="ä¸“æ³¨çš„åŠ›é‡â€”â€”ç”¨èµ„äº§è´­ä¹°å¥¢ä¾ˆå“"></a>ä¸“æ³¨çš„åŠ›é‡â€”â€”ç”¨èµ„äº§è´­ä¹°å¥¢ä¾ˆå“</h4><ul><li>å¢åŠ èµ„äº§ä»¥æ”¯ä»˜è‡ªå·±æƒ³è¦çš„ä¸œè¥¿</li></ul><h4 id="ç¥è¯çš„åŠ›é‡â€”â€”å¯¹è‹±é›„çš„å´‡æ‹œ"><a href="#ç¥è¯çš„åŠ›é‡â€”â€”å¯¹è‹±é›„çš„å´‡æ‹œ" class="headerlink" title="ç¥è¯çš„åŠ›é‡â€”â€”å¯¹è‹±é›„çš„å´‡æ‹œ"></a>ç¥è¯çš„åŠ›é‡â€”â€”å¯¹è‹±é›„çš„å´‡æ‹œ</h4><ul><li>ä¿ƒä½¿å­©å­å­¦ä¹ çš„æœ€æœ‰æ•ˆæ–¹æ³•ä¹‹ä¸€ä¾¿æ˜¯å‡è£…è‡ªå·±å˜æˆäº†è‡ªå·±æœ€å´‡æ‹œçš„è‹±é›„</li><li>é€šè¿‡å¶åƒçš„æ¨¡èŒƒä½œç”¨ï¼ŒæŒ–æ˜æˆ‘ä»¬è‡ªèº«çš„æ— é™æ½œèƒ½</li></ul><h4 id="ç»™äºˆçš„åŠ›é‡â€”â€”å…ˆäºˆåå–"><a href="#ç»™äºˆçš„åŠ›é‡â€”â€”å…ˆäºˆåå–" class="headerlink" title="ç»™äºˆçš„åŠ›é‡â€”â€”å…ˆäºˆåå–"></a>ç»™äºˆçš„åŠ›é‡â€”â€”å…ˆäºˆåå–</h4><ul><li>å¦‚æœæƒ³è·å¾—ï¼Œå°±è¦å…ˆç»™äºˆ</li><li>ä½ ç»™åˆ«äººçš„è¶Šå¤šï¼Œä½ å­¦åˆ°çš„ä¹Ÿè¶Šå¤šã€</li></ul><h2 id="è¯­å½•-6"><a href="#è¯­å½•-6" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h2><ul><li>é‡‘çŸ¿åˆ°å¤„éƒ½æ˜¯ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†äººæ²¡æœ‰ç»è¿‡ç›¸åº”çš„åŸ¹è®­ï¼Œæ‰€ä»¥å‘ç°ä¸äº†ä»–ä»¬</li><li>æ²¡æœ‰å¼ºæœ‰åŠ›çš„ç†ç”±å’Œç›®æ ‡ï¼Œä»»ä½•äº‹æƒ…éƒ½ä¼šå˜å¾—éå¸¸å›°éš¾</li><li>ä»ç†è´¢è§’åº¦æ¥è¯´ï¼Œæˆ‘ä»¬æ¯æŒ£åˆ°ä¸€ç¾å…ƒï¼Œå°±å¾—åˆ°ä¸€æ¬¡é€‰æ‹©è‡ªå·±ç§°ä¸ºå¯Œäººã€ç©·äººçš„æœºä¼š</li><li>è½»æ¾çš„é“è·¯ä¼šè¶Šèµ°è¶Šè‰°éš¾ï¼Œè€Œè‰°éš¾çš„é“è·¯ä¼šè¶Šèµ°è¶Šè½»æ¾</li></ul><h2 id="åæ€-6"><a href="#åæ€-6" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li>ä¸ºä»€ä¹ˆè¦å˜å¾—å¯Œæœ‰ï¼Œå› ä¸ºå®¶åº­çš„è´£ä»»ï¼Œçˆ¶æ¯çš„å»ºåº·ï¼Œå­©å­çš„æ•™è‚²ï¼Œå¦¹å­çš„å¥¢ä¾ˆ</li><li>ç›®å‰çš„æ¶ˆè´¹ä¹ æƒ¯æ˜¯æ‹¿ä¸€éƒ¨åˆ†é’±ä¹°åŸºé‡‘ï¼Œæ‹¿ä¸€éƒ¨åˆ†é’±æ¯ä¸ªæœˆå‡ºå»åƒä¸€ä¸¤é¡¿ï¼Œæ¯å¹´å‡ºå»ä¸¤ä¸‰æ¬¡æ—…æ¸¸ï¼Œè¿™æ ·çš„æ¶ˆè´¹ä¹ æƒ¯åº”è¯¥æ˜¯æ²¡æ³•è®©è‡ªå·±å˜å¯Œçš„</li><li>è‡ªå·±çš„è‡ªå¾‹ä¹ æƒ¯è¿˜æ˜¯å¾—å¥½å¥½é”»ç‚¼ä¸€ä¸‹</li></ul><h1 id="ç¬¬ä¹ç« ï¼šè¦åšçš„äº‹æƒ…"><a href="#ç¬¬ä¹ç« ï¼šè¦åšçš„äº‹æƒ…" class="headerlink" title="ç¬¬ä¹ç« ï¼šè¦åšçš„äº‹æƒ…"></a>ç¬¬ä¹ç« ï¼šè¦åšçš„äº‹æƒ…</h1><h2 id="æœ¬ç« å°ç»“-7"><a href="#æœ¬ç« å°ç»“-7" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><h3 id="è¡ŒåŠ¨æŒ‡å—æ¸…å•"><a href="#è¡ŒåŠ¨æŒ‡å—æ¸…å•" class="headerlink" title="è¡ŒåŠ¨æŒ‡å—æ¸…å•"></a>è¡ŒåŠ¨æŒ‡å—æ¸…å•</h3><h4 id="åœä¸‹æ‰‹å¤´çš„æ´»å„¿"><a href="#åœä¸‹æ‰‹å¤´çš„æ´»å„¿" class="headerlink" title="åœä¸‹æ‰‹å¤´çš„æ´»å„¿"></a>åœä¸‹æ‰‹å¤´çš„æ´»å„¿</h4><ul><li>ä¼‘æ¯ä¸€ä¸‹ï¼Œè¯„ä¼°ä¸€ä¸‹ä½ çš„åšæ³•ä¸­å“ªäº›æœ‰æ•ˆï¼Œå“ªäº›æ— æ•ˆ</li></ul><h4 id="å¯»æ‰¾æ–°çš„æ€æƒ³"><a href="#å¯»æ‰¾æ–°çš„æ€æƒ³" class="headerlink" title="å¯»æ‰¾æ–°çš„æ€æƒ³"></a>å¯»æ‰¾æ–°çš„æ€æƒ³</h4><ul><li>åˆ°ä¹¦åº—æœå¯»èƒ½æä¾›ç‹¬ç‰¹ã€ä¸ä¼—ä¸åŒè¿™ç±»ä¸»å¼ çš„ä¹¦</li></ul><h4 id="æ‰¾ä¸€äº›åšè¿‡ä½ æƒ³åšçš„äº‹æƒ…çš„äºº"><a href="#æ‰¾ä¸€äº›åšè¿‡ä½ æƒ³åšçš„äº‹æƒ…çš„äºº" class="headerlink" title="æ‰¾ä¸€äº›åšè¿‡ä½ æƒ³åšçš„äº‹æƒ…çš„äºº"></a>æ‰¾ä¸€äº›åšè¿‡ä½ æƒ³åšçš„äº‹æƒ…çš„äºº</h4><ul><li>è¯·ä»–ä»¬å’Œä½ ä¸€èµ·å…±è¿›åˆé¤ï¼Œå‘ä»–ä»¬è¯·æ•™ä¸€äº›è¯€çªå’ŒæŠ€å·§</li></ul><h4 id="å‚åŠ è¾…å¯¼ç­ã€é˜…è¯»å’Œç ”è®¨ä¼š"><a href="#å‚åŠ è¾…å¯¼ç­ã€é˜…è¯»å’Œç ”è®¨ä¼š" class="headerlink" title="å‚åŠ è¾…å¯¼ç­ã€é˜…è¯»å’Œç ”è®¨ä¼š"></a>å‚åŠ è¾…å¯¼ç­ã€é˜…è¯»å’Œç ”è®¨ä¼š</h4><ul><li>ä»äº’è”ç½‘ä¸Šæœç´¢æ–°çš„ã€æœ‰è¶£çš„è¯¾ç¨‹å¹¶å‚åŠ </li></ul><h4 id="æå‡ºå¤šä»½æŠ¥ä»·"><a href="#æå‡ºå¤šä»½æŠ¥ä»·" class="headerlink" title="æå‡ºå¤šä»½æŠ¥ä»·"></a>æå‡ºå¤šä»½æŠ¥ä»·</h4><ul><li>å¤§éƒ¨åˆ†å–ä¸»çš„è¦ä»·è¿‡é«˜ï¼Œå¾ˆå°‘æœ‰è¦ä»·ä½äºæ ‡çš„ç‰©çš„å®é™…ä»·å€¼</li><li>æå‡ºå¤šä»½æŠ¥ä»·ï¼Œæ€»ä¼šæœ‰äººè·Ÿä½ è¾¾æˆè´­ä¹°æ„å‘ï¼Œä¾‹å¦‚ä½ æå‡ºä¸€ä¸ªä½çš„æŠ¥ä»·ï¼Œè¯´ä¸å®šå¯¹æ–¹å°±åŒæ„äº†å‘¢</li><li>è®°å¾—ä½¿ç”¨â€œå…è´£æ¡æ¬¾â€æ¥åšæŠ¥ä»·ã€‚ä¾‹å¦‚ï¼šåˆåŒä¸ŠåŠ ä¸€æ¡ï¼Œå¦‚æœæˆ‘çš„åˆä¼™äººä¸åŒæ„æˆ–è€…å…¶ä»–ä¸å¯æŠ—åŠ›å› ç´ ï¼Œæˆ‘æœ‰æƒå–æ¶ˆåˆåŒï¼ˆè™½ç„¶ä½ ä¸ä¸€å®šæœ‰åˆä¼™äººï¼Œæˆ–è€…åˆä¼™äººä¹Ÿæœ‰å¯èƒ½æ˜¯ä½ çš„çŒ«ï¼‰</li></ul><h4 id="æ¯æœˆåœ¨æŸä¸€åœ°åŒºæ…¢è·‘ã€æ•£æ­¥æˆ–é©¾è½¦10åˆ†é’Ÿå·¦å³"><a href="#æ¯æœˆåœ¨æŸä¸€åœ°åŒºæ…¢è·‘ã€æ•£æ­¥æˆ–é©¾è½¦10åˆ†é’Ÿå·¦å³" class="headerlink" title="æ¯æœˆåœ¨æŸä¸€åœ°åŒºæ…¢è·‘ã€æ•£æ­¥æˆ–é©¾è½¦10åˆ†é’Ÿå·¦å³"></a>æ¯æœˆåœ¨æŸä¸€åœ°åŒºæ…¢è·‘ã€æ•£æ­¥æˆ–é©¾è½¦10åˆ†é’Ÿå·¦å³</h4><ul><li>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç°å¯ä»¥æŠ•èµ„çš„é¡¹ç›®</li><li>ä¸€æ¡©äº¤æ˜“è¦ç›ˆåˆ©ï¼Œå¾—å…·å¤‡ä¸¤ä¸ªæ¡ä»¶ï¼š<ul><li>ä¸€æ˜¯å»‰ä»·</li><li>äºŒæ˜¯æœ‰å˜åŒ–ï¼Œä»·æ ¼å˜åŠ¨ç­‰</li></ul></li></ul><h4 id="ä¸ºä»€ä¹ˆæ¶ˆè´¹è€…æ€»æ˜¯ç©·äººï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæ¶ˆè´¹è€…æ€»æ˜¯ç©·äººï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæ¶ˆè´¹è€…æ€»æ˜¯ç©·äººï¼Ÿ"></a>ä¸ºä»€ä¹ˆæ¶ˆè´¹è€…æ€»æ˜¯ç©·äººï¼Ÿ</h4><ul><li>åˆ©æ¶¦åœ¨è´­ä¹°æ—¶å°±å·²ç¡®å®šï¼Œè€Œä¸æ˜¯åœ¨å‡ºå”®æ—¶è·å¾—çš„</li><li>å½“è‚¡å¸‚ä¸‹é™æ—¶ï¼Œä¸è¦æ€¥äºé€ƒå‡º</li></ul><h4 id="å…³æ³¨é€‚å½“çš„åœ°æ–¹"><a href="#å…³æ³¨é€‚å½“çš„åœ°æ–¹" class="headerlink" title="å…³æ³¨é€‚å½“çš„åœ°æ–¹"></a>å…³æ³¨é€‚å½“çš„åœ°æ–¹</h4><ul><li>å­¦ä¹ ã€å…³æ³¨æ„Ÿå…´è¶£çš„é¢†åŸŸ</li></ul><h4 id="é¦–å…ˆå¯»æ‰¾æƒ³ä¹°è¿›çš„äººï¼Œç„¶åæ‰å»æ‰¾æƒ³å–å‡ºçš„äºº"><a href="#é¦–å…ˆå¯»æ‰¾æƒ³ä¹°è¿›çš„äººï¼Œç„¶åæ‰å»æ‰¾æƒ³å–å‡ºçš„äºº" class="headerlink" title="é¦–å…ˆå¯»æ‰¾æƒ³ä¹°è¿›çš„äººï¼Œç„¶åæ‰å»æ‰¾æƒ³å–å‡ºçš„äºº"></a>é¦–å…ˆå¯»æ‰¾æƒ³ä¹°è¿›çš„äººï¼Œç„¶åæ‰å»æ‰¾æƒ³å–å‡ºçš„äºº</h4><ul><li>åªç›¯ç€å°ç”Ÿæ„çš„äººæ˜¯ä¸ä¼šæœ‰å¾ˆå¤§çªç ´çš„ï¼Œå¾—è€ƒè™‘ä¹°ä¸‹ä¸€ä¸ªå¤§çš„é¦…é¥¼ï¼Œåˆ’åˆ†æˆå‡ å°å—ï¼Œå‡ºå”®ç»™ä¸åŒäºº</li></ul><h4 id="è€ƒè™‘å¤§ç”Ÿæ„"><a href="#è€ƒè™‘å¤§ç”Ÿæ„" class="headerlink" title="è€ƒè™‘å¤§ç”Ÿæ„"></a>è€ƒè™‘å¤§ç”Ÿæ„</h4><ul><li>å¤šè€ƒè™‘å¤§ç”Ÿæ„</li></ul><h4 id="å­¦ä¹ å‰äººç»éªŒ"><a href="#å­¦ä¹ å‰äººç»éªŒ" class="headerlink" title="å­¦ä¹ å‰äººç»éªŒ"></a>å­¦ä¹ å‰äººç»éªŒ</h4><ul><li>å­¦ä¹ å¯Œäºº</li></ul><h4 id="è¡ŒåŠ¨èµ·æ¥"><a href="#è¡ŒåŠ¨èµ·æ¥" class="headerlink" title="è¡ŒåŠ¨èµ·æ¥"></a>è¡ŒåŠ¨èµ·æ¥</h4><ul><li>å¼€å§‹åŠ¨èµ·æ¥</li></ul>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç†è´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—å¹¿å‘Šä¹‹ä¸šåŠ¡</title>
      <link href="/2020/03/20/ji-suan-guang-gao-zhi-ye-wu/"/>
      <url>/2020/03/20/ji-suan-guang-gao-zhi-ye-wu/</url>
      
        <content type="html"><![CDATA[<p><img src="/2020/03/20/ji-suan-guang-gao-zhi-ye-wu/image-20210621155031003.png" alt="image-20210621155031003"></p><h1 id="æŠ•æ”¾æµç¨‹å›¾"><a href="#æŠ•æ”¾æµç¨‹å›¾" class="headerlink" title="æŠ•æ”¾æµç¨‹å›¾"></a>æŠ•æ”¾æµç¨‹å›¾</h1><p><img src="/2020/03/20/ji-suan-guang-gao-zhi-ye-wu/toufang.jpg" alt="æŠ•æ”¾æµç¨‹å›¾"></p><h1 id="CTRé¢„ä¼°"><a href="#CTRé¢„ä¼°" class="headerlink" title="CTRé¢„ä¼°"></a>CTRé¢„ä¼°</h1><h2 id="FTRL"><a href="#FTRL" class="headerlink" title="FTRL"></a>FTRL</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/55135954" target="_blank" rel="noopener">LR+FTRLç®—æ³•åŸç†ä»¥åŠå·¥ç¨‹åŒ–å®ç°</a></li></ul><h1 id="æµé‡åˆ†é…"><a href="#æµé‡åˆ†é…" class="headerlink" title="æµé‡åˆ†é…"></a>æµé‡åˆ†é…</h1><h2 id="ä»€ä¹ˆæ˜¯æµé‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æµé‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æµé‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æµé‡ï¼Ÿ</h2><ul><li>æµé‡å°±æ˜¯åª’ä½“æ‹¥æœ‰çš„ç”¨æˆ·æ•°æ®ï¼Œä¾‹å¦‚ï¼šæŠ–éŸ³çš„ç”¨æˆ·æ•°æ®</li></ul><h2 id="ä»€ä¹ˆæ˜¯æµé‡åˆ†é…ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æµé‡åˆ†é…ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æµé‡åˆ†é…ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æµé‡åˆ†é…ï¼Ÿ</h2><ul><li><p>DSPæ ¹æ®åª’ä½“ç»™çš„æµé‡ç»™ä¸åŒçš„å¹¿å‘Šä¸»åˆ†é…å…¶éœ€è¦çš„æµé‡</p></li><li><p>ç»“åˆè½¬åŒ–å‡½æ•°ä¸å¹¿å‘Šä¸»å¯¼é‡è¦æ±‚æ¥åˆ†é…æµé‡</p></li></ul><h1 id="å‡ºä»·"><a href="#å‡ºä»·" class="headerlink" title="å‡ºä»·"></a>å‡ºä»·</h1>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—å¹¿å‘Š </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸šåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹Kafka</title>
      <link href="/2020/01/02/shi-yong-gong-ju-zhi-kafka/"/>
      <url>/2020/01/02/shi-yong-gong-ju-zhi-kafka/</url>
      
        <content type="html"><![CDATA[<p><img src="/2020/01/02/shi-yong-gong-ju-zhi-kafka/image-20210621145318002.png" alt="image-20210621145318002"></p><h1 id="KafkaåŸºç¡€"><a href="#KafkaåŸºç¡€" class="headerlink" title="KafkaåŸºç¡€"></a>KafkaåŸºç¡€</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="Kafkaæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Kafkaæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Kafkaæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Kafkaæ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>Apache Kafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æµå¹³å°</li><li>Kafkaä½œä¸ºä¸€ä¸ªé›†ç¾¤è¿è¡Œåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œè¿™äº›æœåŠ¡å™¨å¯ä»¥è·¨è¶Šå¤šä¸ªæ•°æ®ä¸­å¿ƒ</li><li>Kafkaé›†ç¾¤å°†è®°å½•æµå­˜å‚¨åœ¨ç§°ä¸ºä¸»é¢˜<code>Topic</code>çš„ç±»åˆ«ä¸­</li><li><strong>æ¯ä¸ªè®°å½•ç”±ä¸€ä¸ªé”®<code>key</code>ã€ä¸€ä¸ªå€¼<code>value</code>å’Œä¸€ä¸ªæ—¶é—´æˆ³<code>timestamp</code>ç»„æˆ</strong></li></ul><h3 id="æµå¹³å°çš„å…³é”®ç‰¹æ€§"><a href="#æµå¹³å°çš„å…³é”®ç‰¹æ€§" class="headerlink" title="æµå¹³å°çš„å…³é”®ç‰¹æ€§"></a>æµå¹³å°çš„å…³é”®ç‰¹æ€§</h3><ul><li>å‘å¸ƒå’Œè®¢é˜…è®°å½•æµï¼Œç±»ä¼¼äºæ¶ˆæ¯é˜Ÿåˆ—æˆ–ä¼ä¸šæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ</li><li>ä»¥å®¹é”™çš„æŒä¹…æ–¹å¼å­˜å‚¨è®°å½•æµ</li><li>å¤„ç†è®°å½•æµï¼ˆå½“å®ƒä»¬å‘ç”Ÿæ—¶ï¼‰</li></ul><h3 id="Kafkaçš„åº”ç”¨é¢†åŸŸ"><a href="#Kafkaçš„åº”ç”¨é¢†åŸŸ" class="headerlink" title="Kafkaçš„åº”ç”¨é¢†åŸŸ"></a>Kafkaçš„åº”ç”¨é¢†åŸŸ</h3><ul><li>æ„å»ºå®æ—¶æµæ•°æ®ç®¡é“ï¼Œåœ¨ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºä¹‹é—´å¯é åœ°è·å–æ•°æ®</li><li>æ„å»ºè½¬æ¢æˆ–å“åº”æ•°æ®æµçš„å®æ—¶æµåº”ç”¨ç¨‹åº</li></ul><h3 id="Kafkaçš„å››ä¸ªæ ¸å¿ƒAPI"><a href="#Kafkaçš„å››ä¸ªæ ¸å¿ƒAPI" class="headerlink" title="Kafkaçš„å››ä¸ªæ ¸å¿ƒAPI"></a>Kafkaçš„å››ä¸ªæ ¸å¿ƒAPI</h3><p><img src="/2020/01/02/shi-yong-gong-ju-zhi-kafka/kafka-apis.png" alt="Kafka-APIs"></p><ul><li><a href="https://kafka.apache.org/documentation.html#producerapi" target="_blank" rel="noopener">Producer API</a>ï¼šå…è®¸åº”ç”¨ç¨‹åºå°†è®°å½•æµå‘å¸ƒåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªKafkaä¸»é¢˜<code>Topic</code></li><li><a href="https://kafka.apache.org/documentation.html#consumerapi" target="_blank" rel="noopener">Consumer API</a>ï¼šå…è®¸åº”ç”¨ç¨‹åºè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªä¸»é¢˜<code>Topic</code>ï¼Œå¹¶å¤„ç†äº§ç”Ÿç»™å®ƒä»¬çš„è®°å½•æµã€‚</li><li><a href="https://kafka.apache.org/documentation.html#connectapi" target="_blank" rel="noopener">Streams API</a>ï¼šå…è®¸åº”ç”¨ç¨‹åºå……å½“æµå¤„ç†å™¨ï¼Œä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªä¸»é¢˜<code>Topic</code>çš„è¾“å…¥æµï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºä¸»é¢˜<code>Topic</code>çš„è¾“å‡ºæµï¼Œä»è€Œæœ‰æ•ˆåœ°å°†è¾“å…¥æµè½¬æ¢ä¸ºè¾“å‡ºæµ</li><li><a href="https://kafka.apache.org/documentation.html#connectapi" target="_blank" rel="noopener">Connector API</a>ï¼šå…è®¸æ„å»ºå’Œè¿è¡Œå°†Kafkaä¸»é¢˜<code>Topic</code>è¿æ¥åˆ°ç°æœ‰åº”ç”¨ç¨‹åºæˆ–æ•°æ®åº“çš„å¯é‡ç”¨ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ã€‚ä¾‹å¦‚ï¼Œåˆ°å…³ç³»æ•°æ®åº“çš„è¿æ¥å™¨å¯èƒ½æ•è·å¯¹è¡¨çš„æ¯ä¸ªæ›´æ”¹ã€‚</li></ul><h3 id="é€šä¿¡åè®®"><a href="#é€šä¿¡åè®®" class="headerlink" title="é€šä¿¡åè®®"></a>é€šä¿¡åè®®</h3><ul><li>åœ¨Kafkaä¸­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡ä¸€ä¸ªç®€å•çš„ã€é«˜æ€§èƒ½çš„ã€è¯­è¨€æ— å…³çš„<code>TCP</code>åè®®æ¥å®Œæˆçš„ã€‚æ­¤åè®®ç»è¿‡ç‰ˆæœ¬æ§åˆ¶ï¼Œå¹¶ä¿æŒä¸æ—§ç‰ˆæœ¬çš„å‘åå…¼å®¹æ€§</li></ul><h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="ä¸»é¢˜-Topics"><a href="#ä¸»é¢˜-Topics" class="headerlink" title="ä¸»é¢˜[Topics]"></a>ä¸»é¢˜<code>[Topics]</code></h3><ul><li>ä¸»é¢˜æ˜¯è¢«å‘å¸ƒè®°å½•æ‰€å±ç±»åˆ«æˆ–è®¢é˜…æºçš„åè¯</li><li>ä¸€ä¸ªä¸»é¢˜å¯ä»¥æœ‰é›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆè´¹è€…æ¥è®¢é˜…å†™å…¥è¯¥ä¸»é¢˜çš„æ•°æ®</li></ul><h3 id="æ—¥å¿—-Logs"><a href="#æ—¥å¿—-Logs" class="headerlink" title="æ—¥å¿—[Logs]"></a>æ—¥å¿—<code>[Logs]</code></h3><ul><li>å¯¹äºæ¯ä¸ªä¸»é¢˜ï¼ŒKafkaé›†ç¾¤ç»´æŠ¤ä¸€ä¸ªç±»ä¼¼ä¸‹å›¾çš„åˆ†åŒºæ—¥å¿—</li></ul><p><img src="/2020/01/02/shi-yong-gong-ju-zhi-kafka/log_anatomy.png" alt="log_anatomy"></p><ul><li>æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯æœ‰åºçš„ï¼Œä¸å¯å˜çš„è®°å½•åºåˆ—ï¼Œè¿™äº›è®°å½•è¿ç»­åœ°é™„åŠ åˆ°ç»“æ„åŒ–çš„æäº¤æ—¥å¿—ä¸­</li><li>æ¯ä¸ªåˆ†åŒºä¸­çš„è®°å½•éƒ½åˆ†é…æœ‰ä¸€ä¸ªç§°ä¸º<strong>åç§»</strong>çš„é¡ºåºIDå·ï¼Œè¯¥IDå”¯ä¸€åœ°æ ‡è¯†åˆ†åŒºä¸­çš„æ¯ä¸ªè®°å½•</li><li>Kafkaé›†ç¾¤ä½¿ç”¨å¯é…ç½®çš„ä¿ç•™æœŸé™æŒä¹…ä¿ç•™æ‰€æœ‰å·²å‘å¸ƒè®°å½•ï¼ˆæ— è®ºæ˜¯å¦å·²ä½¿ç”¨å®ƒä»¬ï¼‰ï¼Œè¶…è¿‡ä¿ç•™æœŸé™åï¼Œè®°å½•å°†è¢«ä¸¢å¼ƒä»¥é‡Šæ”¾ç©ºé—´</li><li><p>Kafkaçš„æ€§èƒ½åœ¨æ•°æ®å¤§å°æ–¹é¢æ˜¯ç¨³å®šçš„ï¼Œæ‰€ä»¥<strong>é•¿æ—¶é—´å­˜å‚¨æ•°æ®ä¸æ˜¯é—®é¢˜</strong></p></li><li><p>å¦‚ä¸‹å›¾ï¼Œåç§»é‡ç”±ä½¿ç”¨è€…æ§åˆ¶ï¼šé€šå¸¸ï¼Œä½¿ç”¨è€…åœ¨è¯»å–è®°å½•æ—¶ä¼šçº¿æ€§åœ°æ¨è¿›å…¶åç§»é‡ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œç”±äºä½ç½®æ˜¯ç”±ä½¿ç”¨è€…æ§åˆ¶çš„ï¼Œå› æ­¤å®ƒå¯ä»¥æŒ‰å–œæ¬¢çš„ä»»ä½•é¡ºåºä½¿ç”¨è®°å½•ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨è€…å¯ä»¥é‡ç½®åˆ°è¾ƒæ—§çš„åç§»é‡ä»¥é‡æ–°å¤„ç†è¿‡å»çš„æ•°æ®ï¼Œæˆ–è€…è·³åˆ°æœ€è¿‘çš„è®°å½•å¹¶ä»â€œç°åœ¨â€å¼€å§‹ä½¿ç”¨ã€‚</p></li></ul><p><img src="/2020/01/02/shi-yong-gong-ju-zhi-kafka/log_consumer.png" alt="log_consumer"></p><ul><li>è¿™äº›ç‰¹æ€§çš„ç»„åˆæ„å‘³ç€Kafkaæ¶ˆè´¹è€…éå¸¸ä¾¿å®œï¼Œä»–ä»¬å¯ä»¥æ¥å»è‡ªå¦‚ï¼Œå¯¹é›†ç¾¤æˆ–å…¶ä»–æ¶ˆè´¹è€…æ²¡æœ‰å¤ªå¤§å½±å“ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·â€œè·Ÿè¸ªâ€ä»»ä½•ä¸»é¢˜çš„å†…å®¹ï¼Œè€Œä¸éœ€è¦æ›´æ”¹ä»»ä½•ç°æœ‰ä½¿ç”¨è€…æ‰€ä½¿ç”¨çš„å†…å®¹</li><li>æ—¥å¿—ä¸­çš„åˆ†åŒºæœ‰å¤šç§ç”¨é€”ã€‚ é¦–å…ˆï¼Œå®ƒä»¬å…è®¸æ—¥å¿—æ‰©å±•åˆ°è¶…å‡ºå•ä¸ªæœåŠ¡å™¨æ‰€èƒ½å®¹çº³çš„å¤§å°ã€‚ æ¯ä¸ªå•ç‹¬çš„åˆ†åŒºéƒ½å¿…é¡»é€‚åˆæ‰˜ç®¡å®ƒçš„æœåŠ¡å™¨ï¼Œä½†æ˜¯ä¸€ä¸ªä¸»é¢˜å¯èƒ½æœ‰å¾ˆå¤šåˆ†åŒºï¼Œå› æ­¤å®ƒå¯ä»¥å¤„ç†ä»»æ„æ•°é‡çš„æ•°æ®ã€‚ å…¶æ¬¡ï¼Œå®ƒä»¬å……å½“å¹¶è¡Œæ€§çš„å•å…ƒ</li></ul><h3 id="åˆ†å¸ƒ-Distribution"><a href="#åˆ†å¸ƒ-Distribution" class="headerlink" title="åˆ†å¸ƒ[Distribution]"></a>åˆ†å¸ƒ<code>[Distribution]</code></h3><ul><li>æ—¥å¿—çš„åˆ†åŒºåˆ†å¸ƒåœ¨Kafkaç¾¤é›†ä¸­çš„æœåŠ¡å™¨ä¸Šï¼Œæ¯ä¸ªæœåŠ¡å™¨å¤„ç†æ•°æ®å¹¶è¦æ±‚å…±äº«åˆ†åŒºã€‚ </li><li>æ¯ä¸ªåˆ†åŒºéƒ½åœ¨å¯é…ç½®æ•°é‡çš„æœåŠ¡å™¨ä¹‹é—´å¤åˆ¶ï¼Œä»¥å®ç°å®¹é”™åŠŸèƒ½</li><li>æ¯ä¸ªåˆ†åŒºæœ‰ä¸€ä¸ªå……å½“â€œé¢†å¯¼è€…â€çš„æœåŠ¡å™¨å’Œé›¶ä¸ªæˆ–å¤šä¸ªå……å½“â€œè¿½éšè€…â€çš„æœåŠ¡å™¨</li><li>é¢†å¯¼è€…å¤„ç†è¯¥åˆ†åŒºçš„æ‰€æœ‰è¯»å†™è¯·æ±‚ï¼Œè€Œè¿½éšè€…åˆ™è¢«åŠ¨å¤åˆ¶é¢†å¯¼è€…</li><li>å¦‚æœé¢†å¯¼è€…å¤±è´¥ï¼Œåˆ™è¿½éšè€…ä¹‹ä¸€å°†è‡ªåŠ¨æˆä¸ºæ–°é¢†å¯¼è€…</li><li>æ¯ä¸ªæœåŠ¡å™¨æ—¢å……å½“æŸäº›åˆ†åŒºçš„é¢†å¯¼è€…ï¼Œåˆå……å½“å…¶ä»–åˆ†åŒºçš„è¿½éšè€…ï¼Œè¿™æ ·é›†ç¾¤ä¸­çš„è´Ÿè½½å¾—åˆ°äº†å¾ˆå¥½çš„å¹³è¡¡</li></ul><h3 id="å¼‚åœ°å¤‡ä»½-Geo-Replication"><a href="#å¼‚åœ°å¤‡ä»½-Geo-Replication" class="headerlink" title="å¼‚åœ°å¤‡ä»½[Geo-Replication]"></a>å¼‚åœ°å¤‡ä»½<code>[Geo-Replication]</code></h3><ul><li>Kafka MirrorMakerä¸ºé›†ç¾¤æä¾›å¼‚åœ°å¤‡ä»½æ”¯æŒ</li><li>ä½¿ç”¨MirrorMakerï¼Œæ¶ˆæ¯å¯ä»¥è·¨å¤šä¸ªæ•°æ®ä¸­å¿ƒæˆ–äº‘åŒºåŸŸè¿›è¡Œå¤‡ä»½</li><li>æ‚¨å¯ä»¥åœ¨ä¸»åŠ¨/è¢«åŠ¨æ–¹æ¡ˆä¸­ä½¿ç”¨å®ƒè¿›è¡Œå¤‡ä»½å’Œæ¢å¤ï¼Œæˆ–åœ¨ä¸»åŠ¨/ä¸»åŠ¨æ–¹æ¡ˆä¸­å°†æ•°æ®æ”¾ç½®åœ¨ç¦»æ‚¨çš„ç”¨æˆ·æ›´è¿‘çš„ä½ç½®ï¼Œæˆ–æ”¯æŒæœ¬åœ°æ•°æ®éœ€æ±‚</li></ul><h3 id="ç”Ÿäº§è€…-Producers"><a href="#ç”Ÿäº§è€…-Producers" class="headerlink" title="ç”Ÿäº§è€…[Producers]"></a>ç”Ÿäº§è€…<code>[Producers]</code></h3><ul><li>ç”Ÿäº§è€…å°†æ•°æ®å‘å¸ƒåˆ°ä»–ä»¬é€‰æ‹©çš„ä¸»é¢˜</li><li>ç”Ÿäº§è€…è´Ÿè´£é€‰æ‹©å°†å“ªä¸ªè®°å½•åˆ†é…ç»™ä¸»é¢˜ä¸­çš„å“ªä¸ªåˆ†åŒº</li><li>è¿™å¯ä»¥ä»¥å¾ªç¯çš„æ–¹å¼æ¥å®Œæˆï¼Œåªæ˜¯ä¸ºäº†å¹³è¡¡è´Ÿè½½ï¼Œä¹Ÿå¯ä»¥æ ¹æ®æŸç§è¯­ä¹‰åˆ’åˆ†å‡½æ•°æ¥å®Œæˆ(æ¯”å¦‚åŸºäºè®°å½•ä¸­çš„æŸä¸ªé”®)</li></ul><h3 id="æ¶ˆè´¹è€…-Consumers"><a href="#æ¶ˆè´¹è€…-Consumers" class="headerlink" title="æ¶ˆè´¹è€…[Consumers]"></a>æ¶ˆè´¹è€…<code>[Consumers]</code></h3><ul><li>æ¶ˆè´¹è€…ä½¿ç”¨æ¶ˆè´¹è€…ç»„åç§°æ ‡è®°è‡ªå·±ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°ä¸»é¢˜çš„æ¯æ¡è®°å½•éƒ½ä¼šä¼ é€’åˆ°æ¯ä¸ªè®¢é˜…æ¶ˆè´¹è€…ç»„ä¸­çš„ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹</li><li>æ¶ˆè´¹è€…å®ä¾‹å¯ä»¥åœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­æˆ–åœ¨å•ç‹¬çš„æœºå™¨ä¸Š</li><li>å¦‚æœæ‰€æœ‰æ¶ˆè´¹è€…å®ä¾‹å…·æœ‰ç›¸åŒçš„æ¶ˆè´¹è€…ç»„ï¼Œé‚£ä¹ˆè®°å½•å°†æœ‰æ•ˆåœ°åœ¨æ¶ˆè´¹è€…å®ä¾‹ä¸Šè¿›è¡Œè´Ÿè½½å¹³è¡¡</li><li>å¦‚æœæ‰€æœ‰æ¶ˆè´¹è€…å®ä¾‹éƒ½æœ‰ä¸åŒçš„æ¶ˆè´¹è€…ç»„ï¼Œé‚£ä¹ˆæ¯ä¸ªè®°å½•å°†è¢«å¹¿æ’­åˆ°æ‰€æœ‰æ¶ˆè´¹è€…è¿›ç¨‹</li></ul><p><strong>ä¸¾ä¾‹å¦‚ä¸‹å›¾ï¼š</strong></p><p><img src="/2020/01/02/shi-yong-gong-ju-zhi-kafka/consumer-groups.png" alt="log_consumer"></p><ul><li>ä¸€ä¸ªåŒ…å«å››ä¸ªåˆ†åŒºï¼ˆP0-P3ï¼‰å’Œä¸¤ä¸ªæ¶ˆè´¹è€…ç»„çš„ä¸¤å°æœåŠ¡å™¨ã€Kafkaé›†ç¾¤ã€‘</li><li>æ¶ˆè´¹è€…ç»„Aæœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…å®ä¾‹ï¼ˆC1ã€C2ï¼‰ï¼Œè€Œç»„Bæœ‰å››ä¸ªï¼ˆC3-C6ï¼‰</li><li>Kafkaä¸­å®ç°æ¶ˆè´¹çš„æ–¹æ³•æ˜¯åœ¨æ¶ˆè´¹è€…å®ä¾‹çš„æ—¥å¿—ä¸­åˆ’åˆ†åˆ†åŒºï¼Œè¿™æ ·æ¯ä¸ªå®ä¾‹åœ¨ä»»ä½•æ—¶å€™éƒ½æ˜¯åˆ†åŒºâ€œå…¬å¹³å…±äº«â€çš„å”¯ä¸€æ¶ˆè´¹è€…</li><li>è¿™ä¸ªä¿æŒç»„æˆå‘˜èº«ä»½çš„è¿‡ç¨‹æ˜¯ç”±Kafkaåè®®åŠ¨æ€å¤„ç†çš„</li><li>å¦‚æœæ–°çš„å®ä¾‹åŠ å…¥ç»„ï¼Œå®ƒä»¬å°†ä»ç»„çš„å…¶ä»–æˆå‘˜é‚£é‡Œæ¥ç®¡ä¸€äº›åˆ†åŒº</li><li>å¦‚æœä¸€ä¸ªå®ä¾‹æ­»äº¡ï¼Œå®ƒçš„åˆ†åŒºå°†åˆ†é…ç»™å…¶ä½™çš„å®ä¾‹</li><li>å¦‚å›¾ä¸­ï¼šæ¶ˆè´¹è€…ç»„Aä¸­C1è´Ÿè´£P0\P3ï¼ŒC2è´Ÿè´£P1\P2ï¼›æ¶ˆè´¹è€…ç»„Bä¸­æ¯ä¸ªå®ä¾‹è´Ÿè´£ä¸€ä¸ªåˆ†åŒº</li><li>Kafkaåªæä¾›åˆ†åŒºå†…è®°å½•çš„æ€»é¡ºåºï¼Œè€Œä¸æä¾›ä¸»é¢˜ä¸­ä¸åŒåˆ†åŒºä¹‹é—´çš„æ€»é¡ºåº</li><li>å¯¹å¤§å¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒæŒ‰åˆ†åŒºæ’åºå’ŒæŒ‰é”®åˆ†åŒºæ•°æ®çš„èƒ½åŠ›å·²ç»è¶³å¤Ÿ</li><li>ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦è®°å½•çš„æ€»é¡ºåºï¼Œåˆ™å¯ä»¥ä½¿ç”¨åªæœ‰ä¸€ä¸ªåˆ†åŒºçš„ä¸»é¢˜æ¥å®ç°</li><li>å°½ç®¡è¿™æ„å‘³ç€æ¯ä¸ªä½¿ç”¨è€…ç»„åªæœ‰ä¸€ä¸ªä½¿ç”¨è€…è¿›ç¨‹ï¼ˆä¸€ä¸ªä½¿ç”¨è€…å®ä¾‹ï¼Ÿï¼‰</li></ul><h3 id="å¤šç§Ÿæˆ·-Multi-tenancy"><a href="#å¤šç§Ÿæˆ·-Multi-tenancy" class="headerlink" title="å¤šç§Ÿæˆ·[Multi-tenancy]"></a>å¤šç§Ÿæˆ·<code>[Multi-tenancy]</code></h3><ul><li>å¯ä»¥å°†Kafkaéƒ¨ç½²ä¸ºå¤šç§Ÿæˆ·è§£å†³æ–¹æ¡ˆ</li><li>é€šè¿‡é…ç½®å“ªäº›ä¸»é¢˜å¯ä»¥ç”Ÿæˆæˆ–ä½¿ç”¨æ•°æ®ï¼Œå¯ä»¥å¯ç”¨å¤šç§Ÿæˆ·</li><li>è¿˜æœ‰å¯¹é™é¢çš„æ“ä½œæ”¯æŒ</li><li>ç®¡ç†å‘˜å¯ä»¥å¯¹è¯·æ±‚å®šä¹‰å’Œå¼ºåˆ¶é…é¢ï¼Œä»¥æ§åˆ¶å®¢æˆ·ç«¯ä½¿ç”¨çš„ä»£ç†èµ„æº</li><li>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://kafka.apache.org/documentation/#security" target="_blank" rel="noopener">å®‰å…¨æ–‡æ¡£</a></li></ul><h3 id="ä¿è¯æ€§-Guarantees"><a href="#ä¿è¯æ€§-Guarantees" class="headerlink" title="ä¿è¯æ€§[Guarantees]"></a>ä¿è¯æ€§<code>[Guarantees]</code></h3><p>åœ¨è¾ƒé«˜çº§åˆ«ä¸Šï¼ŒKafkaæä¾›ä»¥ä¸‹ä¿è¯ï¼š</p><ul><li>ç”Ÿäº§è€…å‘é€åˆ°ç‰¹å®šä¸»é¢˜åˆ†åŒºçš„æ¶ˆæ¯å°†æŒ‰ç…§å‘é€çš„é¡ºåºè¿½åŠ <ol><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè®°å½•M1æ˜¯ç”±ä¸è®°å½•M2ç›¸åŒçš„ç”Ÿäº§è€…å‘é€çš„ï¼Œå¹¶ä¸”M1æ˜¯å…ˆå‘é€çš„ï¼Œé‚£ä¹ˆM1çš„åç§»é‡å°†æ¯”M2ä½ï¼Œå¹¶å‡ºç°åœ¨æ—¥å¿—çš„å‰é¢</li></ol></li><li>æ¶ˆè´¹è€…å®ä¾‹æŒ‰ã€è®°å½•åœ¨æ—¥å¿—ä¸­å­˜å‚¨çš„é¡ºåºã€‘æŸ¥çœ‹è®°å½•</li><li>å¯¹äºå…·æœ‰å¤åˆ¶å› å­Nçš„ä¸»é¢˜ï¼Œæˆ‘ä»¬å°†å®¹å¿è‡³å¤šN-1ä¸ªæœåŠ¡å™¨æ•…éšœï¼Œè€Œä¸ä¼šä¸¢å¤±æäº¤åˆ°æ—¥å¿—çš„ä»»ä½•è®°å½•</li></ul><h1 id="Kafkaè¿›é˜¶"><a href="#Kafkaè¿›é˜¶" class="headerlink" title="Kafkaè¿›é˜¶"></a>Kafkaè¿›é˜¶</h1><h2 id="Kafkaä½œä¸ºæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ-Kafka-as-a-Messaging-System"><a href="#Kafkaä½œä¸ºæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ-Kafka-as-a-Messaging-System" class="headerlink" title="Kafkaä½œä¸ºæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ[Kafka as a Messaging System]"></a>Kafkaä½œä¸ºæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ<code>[Kafka as a Messaging System]</code></h2><h3 id="ä¼ ç»Ÿçš„ä¼ä¸šæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ"><a href="#ä¼ ç»Ÿçš„ä¼ä¸šæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ" class="headerlink" title="ä¼ ç»Ÿçš„ä¼ä¸šæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ"></a>ä¼ ç»Ÿçš„ä¼ä¸šæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ</h3><p>ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿæ‹¥æœ‰ä¸¤ä¸ªæ¨¡å—ï¼š</p><h4 id="é˜Ÿåˆ—-queuing"><a href="#é˜Ÿåˆ—-queuing" class="headerlink" title="é˜Ÿåˆ—-queuing"></a>é˜Ÿåˆ—-queuing</h4><ul><li>åœ¨é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…æ± å¯ä»¥ä»æœåŠ¡å™¨è¯»å–æ•°æ®ï¼Œè€Œæ¯æ¡è®°å½•éƒ½å°†è¢«å‘é€åˆ°å…¶ä¸­çš„ä¸€ä½æ¶ˆè´¹è€…</li><li>é˜Ÿåˆ—çš„ä¼˜ç‚¹æ˜¯å®ƒå…è®¸åœ¨å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹ä¸Šåˆ’åˆ†æ•°æ®å¤„ç†</li><li>ä¸å¹¸çš„æ˜¯ï¼Œé˜Ÿåˆ—ä¸æ˜¯å¤šç”¨æˆ·çš„ï¼šä¸€æ—¦ä¸€ä¸ªè¿›ç¨‹è¯»å–äº†æ•°æ®ï¼Œå…¶ä»–ç”¨æˆ·å°±è¯»å–ä¸äº†äº†</li><li>ä¼ ç»Ÿé˜Ÿåˆ—åœ¨æœåŠ¡å™¨ä¸ŠæŒ‰é¡ºåºä¿ç•™è®°å½•ï¼Œå¦‚æœå¤šä¸ªä½¿ç”¨è€…ä»é˜Ÿåˆ—ä¸­æ¶ˆè´¹ï¼Œåˆ™æœåŠ¡å™¨æŒ‰å­˜å‚¨è®°å½•çš„é¡ºåºåˆ†å‘è®°å½•</li><li>ç„¶è€Œï¼Œå°½ç®¡æœåŠ¡å™¨æŒ‰é¡ºåºåˆ†å‘è®°å½•ï¼Œä½†è¿™äº›è®°å½•æ˜¯å¼‚æ­¥ä¼ é€’ç»™æ¶ˆè´¹è€…çš„ï¼Œå› æ­¤å®ƒä»¬å¯èƒ½åœ¨ä¸åŒçš„æ¶ˆè´¹è€…ä¸Šä¸æŒ‰é¡ºåºåˆ°è¾¾</li><li>è¿™å®é™…ä¸Šæ„å‘³ç€è®°å½•çš„é¡ºåºåœ¨å¹¶è¡Œä½¿ç”¨æ—¶ä¸¢å¤±</li><li>æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿé€šå¸¸é€šè¿‡â€œç‹¬å æ¶ˆè´¹è€…â€çš„æ¦‚å¿µæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯¥æ¦‚å¿µåªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä»é˜Ÿåˆ—ä¸­æ¶ˆè´¹ï¼Œä½†è¿™å½“ç„¶æ„å‘³ç€å¤„ç†ä¸­ä¸å­˜åœ¨å¹¶è¡Œæ€§</li></ul><h4 id="å‘å¸ƒ-è®¢é˜…-publish-subscribe"><a href="#å‘å¸ƒ-è®¢é˜…-publish-subscribe" class="headerlink" title="å‘å¸ƒ-è®¢é˜…-publish-subscribe"></a>å‘å¸ƒ-è®¢é˜…-publish-subscribe</h4><ul><li>åœ¨å‘å¸ƒ-è®¢é˜…ä¸­ï¼Œè®°å½•è¢«å¹¿æ’­ç»™æ‰€æœ‰æ¶ˆè´¹è€…</li><li>å‘å¸ƒ-è®¢é˜…å…è®¸å°†æ•°æ®å¹¿æ’­åˆ°å¤šä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯ç”±äºæ¯ä¸ªæ¶ˆæ¯éƒ½ä¼ é€’åˆ°æ¯ä¸ªè®¢é˜…è€…ï¼Œå› æ­¤æ— æ³•æ‰©å±•å¤„ç†</li></ul><h3 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h3><ul><li>Kafkaä¸­çš„æ¶ˆè´¹è€…ç»„æ¦‚å¿µæ¦‚æ‹¬äº†é˜Ÿåˆ—ï¼†å‘å¸ƒ-è®¢é˜…</li><li>ä¸é˜Ÿåˆ—ä¸€æ ·ï¼Œæ¶ˆè´¹è€…ç»„å…è®¸å°†å¤„ç†åˆ’åˆ†åˆ°ä¸€ç»„è¿›ç¨‹(æ¶ˆè´¹è€…ç»„çš„æˆå‘˜)ä¸Š</li><li>ä¸å‘å¸ƒ-è®¢é˜…ä¸€æ ·ï¼ŒKafkaå…è®¸å‘å¤šä¸ªæ¶ˆè´¹è€…ç»„å¹¿æ’­æ¶ˆæ¯</li><li>Kafkaä¹Ÿæ¯”ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿæœ‰æ›´å¼ºçš„è®¢è´­ä¿è¯</li><li>é€šè¿‡å¯¹ä¸»é¢˜å†…åˆ†åŒºçš„å¹¶è¡Œæ€§çš„æ¦‚å¿µï¼ŒKafkaèƒ½å¤Ÿåœ¨ç”¨æˆ·è¿›ç¨‹æ± ä¸Šæä¾›<strong>æ’åºä¿è¯</strong>å’Œ<strong>è´Ÿè½½å¹³è¡¡</strong></li><li>è¿™æ˜¯é€šè¿‡å°†ä¸»é¢˜ä¸­çš„åˆ†åŒºåˆ†é…ç»™æ¶ˆè´¹è€…ç»„ä¸­çš„æ¶ˆè´¹è€…å®ä¾‹æ¥å®ç°çš„ï¼Œè¿™æ ·æ¯ä¸ªåˆ†åŒºæ­£å¥½ç”±ç»„ä¸­çš„ä¸€ä¸ªæ¶ˆè´¹è€…ä½¿ç”¨</li><li>é€šè¿‡è¿™æ ·åšï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æ¶ˆè´¹è€…æ˜¯è¯¥åˆ†åŒºçš„å”¯ä¸€è¯»å–è€…ï¼Œå¹¶æŒ‰é¡ºåºä½¿ç”¨æ•°æ®</li><li>ç”±äºæœ‰è®¸å¤šåˆ†åŒºï¼Œè¿™ä»ç„¶å¯ä»¥åœ¨è®¸å¤šæ¶ˆè´¹è€…å®ä¾‹ä¸Šå¹³è¡¡è´Ÿè½½</li><li>ä½†æ˜¯è¯·æ³¨æ„ï¼Œåœ¨ä¸€ä¸ªæ¶ˆè´¹è€…ç»„ä¸­<strong>ä¸èƒ½æœ‰æ¯”åˆ†åŒºæ›´å¤š</strong>çš„æ¶ˆè´¹è€…å®ä¾‹</li></ul><h1 id="Kafkaæ“ä½œ"><a href="#Kafkaæ“ä½œ" class="headerlink" title="Kafkaæ“ä½œ"></a>Kafkaæ“ä½œ</h1><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="ä¸»é¢˜åˆ—è¡¨"><a href="#ä¸»é¢˜åˆ—è¡¨" class="headerlink" title="ä¸»é¢˜åˆ—è¡¨"></a>ä¸»é¢˜åˆ—è¡¨</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">bin/kafka-topics.sh --list --zookeeper localhost:2181<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æ¶ˆè´¹topic"><a href="#æ¶ˆè´¹topic" class="headerlink" title="æ¶ˆè´¹topic"></a>æ¶ˆè´¹topic</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic topic-name --from-beginning<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æŸ¥çœ‹topicåˆ†åŒºå’Œå‰¯æœ¬æƒ…å†µ"><a href="#æŸ¥çœ‹topicåˆ†åŒºå’Œå‰¯æœ¬æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹topicåˆ†åŒºå’Œå‰¯æœ¬æƒ…å†µ"></a>æŸ¥çœ‹topicåˆ†åŒºå’Œå‰¯æœ¬æƒ…å†µ</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">bin/kafka-topics.sh --describe --zookeeper 127.0.0.1:2181  --topic test0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æŸ¥çœ‹topicæ¶ˆè´¹åˆ°çš„offset"><a href="#æŸ¥çœ‹topicæ¶ˆè´¹åˆ°çš„offset" class="headerlink" title="æŸ¥çœ‹topicæ¶ˆè´¹åˆ°çš„offset"></a>æŸ¥çœ‹topicæ¶ˆè´¹åˆ°çš„offset</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list 127.0.0.1:9092 --topic test0 --time -1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æŸ¥çœ‹topicå„ä¸ªåˆ†åŒºçš„æ¶ˆæ¯çš„ä¿¡æ¯"><a href="#æŸ¥çœ‹topicå„ä¸ªåˆ†åŒºçš„æ¶ˆæ¯çš„ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹topicå„ä¸ªåˆ†åŒºçš„æ¶ˆæ¯çš„ä¿¡æ¯"></a>æŸ¥çœ‹topicå„ä¸ªåˆ†åŒºçš„æ¶ˆæ¯çš„ä¿¡æ¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">bin/kafka-run-class.sh kafka.tools.ConsumerOffsetChecker --group testgroup --topic test0 --zookeeper 127.0.0.1:2181<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>è¿è¡Œç»“æœï¼š</p><p>| GROUP    | TOPIC     | PID          | OFFSET           | LOGSIZE | LAG          |<br>| â€”â€”â€”â€” | â€”â€”â€”â€”- | â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”- | â€”â€”â€”â€”â€”â€” |<br>| æ¶ˆè´¹è€…ç»„ | topicåå­— | partition id | å½“å‰å·²æ¶ˆè´¹çš„æ¡æ•° | æ€»æ¡æ•°  | æœªæ¶ˆè´¹çš„æ¡æ•° |<br>|          |           |              |                  |         |              |</p></li></ul><h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://kafka.apache.org/documentation/" target="_blank" rel="noopener">å®˜ç½‘è‹±æ–‡æ–‡æ¡£</a></li><li><a href="https://kafka.apachecn.org/" target="_blank" rel="noopener">å®˜ç½‘ä¸­æ–‡æ–‡æ¡£</a></li><li><a href="https://www.w3cschool.cn/apache_kafka/" target="_blank" rel="noopener">w3school</a></li></ul><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹storm</title>
      <link href="/2019/12/17/shi-yong-gong-ju-zhi-storm/"/>
      <url>/2019/12/17/shi-yong-gong-ju-zhi-storm/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/12/17/shi-yong-gong-ju-zhi-storm/image-20210621144322474.png" alt="image-20210621144322474"></p><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="Stormæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Stormæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Stormæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Stormæ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>Stormæ˜¯Apacheä¸‹çš„ä¸€ä¸ª<strong>åˆ†å¸ƒå¼å®æ—¶</strong>å¤§æ•°æ®å¤„ç†ç³»ç»Ÿ</li></ul><h3 id="Stormä¼˜åŠ¿"><a href="#Stormä¼˜åŠ¿" class="headerlink" title="Stormä¼˜åŠ¿"></a>Stormä¼˜åŠ¿</h3><ul><li>å®æ—¶æµ</li><li>å¿«</li><li>æ•°æ®å¤„ç†ä¿è¯</li><li>å®¹é”™</li></ul><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><p><img src="/2019/12/17/shi-yong-gong-ju-zhi-storm/core_concept.jpg" alt="å›¾ï¼šstormæ‹“æ‰‘"></p><h4 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h4><ul><li>ä¸»è¦æ•°æ®ç»“æ„ï¼Œæœ‰åºå…ƒç´ çš„åˆ—è¡¨</li><li>é»˜è®¤æƒ…å†µæ”¯æŒæ‰€æœ‰æ•°æ®ç±»å‹</li><li>é€šå¸¸æ˜¯ä¸€ç»„é€—å·åˆ†éš”çš„å€¼</li></ul><h4 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h4><ul><li>Tupleçš„æ— åºåºåˆ—</li></ul><h4 id="Spouts"><a href="#Spouts" class="headerlink" title="Spouts"></a>Spouts</h4><ul><li>Streamçš„æºå¤´</li><li>é€šå¸¸ï¼ŒStormä»åŸå§‹æ•°æ®æºï¼ˆKafkaé˜Ÿåˆ—ç­‰ï¼‰æ¥å—æ•°æ®</li><li>ä¹Ÿå¯ä»¥é€šè¿‡ç¼–å†™Spoutsä»æ•°æ®æºè¯»å–æ•°æ®</li><li>â€œISpoutâ€æ˜¯å®ç°Spoutçš„æ ¸å¿ƒæ¥å£</li><li>ä¸€äº›ç‰¹å®šçš„æ¥å£åŒ…æ‹¬ï¼šIRichSpoutï¼ŒBaseRichSpoutï¼ŒKafkaSpoutç­‰</li></ul><h4 id="Bolts"><a href="#Bolts" class="headerlink" title="Bolts"></a>Bolts</h4><ul><li>é€»è¾‘å¤„ç†å•å…ƒ</li><li>å¯ä»¥æ‰§è¡Œè¿‡æ»¤ã€èšåˆç­‰æ•°æ®æ“ä½œ</li><li>â€œIBoltâ€æ˜¯å®ç°Boltçš„æ ¸å¿ƒæ¥å£</li><li>ä¸€äº›ç‰¹å®šçš„æ¥å£åŒ…æ‹¬ï¼šIRichBoltï¼ŒIBasicBoltç­‰</li></ul><h3 id="æ‹“æ‰‘"><a href="#æ‹“æ‰‘" class="headerlink" title="æ‹“æ‰‘"></a>æ‹“æ‰‘</h3><ul><li>å›¾ï¼šstormæ‹“æ‰‘å°±æ˜¯ä¸€ä¸ªæ‹“æ‰‘</li><li>Spoutså’ŒBoltsè¿æ¥å°±å½¢æˆæ‹“æ‰‘ç»“æ„</li><li>æ‹“æ‰‘æ˜¯æœ‰å‘å›¾ï¼Œé¡¶ç‚¹æ˜¯è®¡ç®—ï¼Œè¾¹æ˜¯æ•°æ®æµ</li><li>Stormå§‹ç»ˆä¿æŒæ‹“æ‰‘è¿è¡Œç›´åˆ°ä½ ç»ˆæ­¢ä¸”ä¸»è¦å·¥ä½œå°±æ˜¯è¿è¡Œæ‹“æ‰‘</li></ul><h3 id="ä»»åŠ¡"><a href="#ä»»åŠ¡" class="headerlink" title="ä»»åŠ¡"></a>ä»»åŠ¡</h3><ul><li>Stormæ‰§è¡Œçš„æ¯ä¸ªSpoutå’ŒBoltè¢«ç§°ä¸ºä»»åŠ¡</li></ul><h3 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h3><ul><li>ä¸€ä¸ªæ‹“æ‰‘ä¸­çš„é¡¶ç‚¹è¢«åˆ†å¸ƒåˆ°å¤šä¸ª<strong>å·¥ä½œèŠ‚ç‚¹</strong>ä¸Šåˆ†å¸ƒå¼è¿è¡Œ</li><li>Stormå°†æ‰€æœ‰å·¥ä½œèŠ‚ç‚¹ä¸Šçš„ä»»åŠ¡å‡åŒ€åˆ†å¸ƒ</li><li>å·¥ä½œèŠ‚ç‚¹çš„è§’è‰²æ˜¯ç›‘å¬ä½œä¸šï¼Œå¹¶åœ¨æ–°ä½œä¸šåˆ°è¾¾æ—¶å¯åŠ¨æˆ–åœæ­¢è¿›ç¨‹</li></ul><h3 id="æµåˆ†ç»„"><a href="#æµåˆ†ç»„" class="headerlink" title="æµåˆ†ç»„"></a>æµåˆ†ç»„</h3><p>æ•°æ®æµä»Spoutsæµåˆ°Boltsï¼Œæˆ–ä»ä¸€ä¸ªBoltsæµåˆ°å¦ä¸€ä¸ªBoltsæ—¶ï¼Œåˆ™éœ€è¦åˆ†ç»„æ§åˆ¶ï¼Œæœ‰ä»¥ä¸‹å››ç§åˆ†ç»„æ–¹å¼</p><h4 id="éšæœºåˆ†ç»„"><a href="#éšæœºåˆ†ç»„" class="headerlink" title="éšæœºåˆ†ç»„"></a>éšæœºåˆ†ç»„</h4><ul><li>ç›¸ç­‰æ•°é‡çš„Tupleséšæœºåˆ†å¸ƒåœ¨æ‰§è¡ŒBoltsçš„æ‰€æœ‰workerï¼ˆåŒ…å«å·¥ä½œèŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹è¿›ç¨‹ï¼‰ä¸­</li></ul><h4 id="å­—æ®µåˆ†ç»„"><a href="#å­—æ®µåˆ†ç»„" class="headerlink" title="å­—æ®µåˆ†ç»„"></a>å­—æ®µåˆ†ç»„</h4><ul><li>Tuplesä¸­å…·æœ‰ç›¸åŒå­—æ®µçš„åˆ†é…ç»™åŒä¸€ä¸ªworker</li></ul><h4 id="å…¨å±€åˆ†ç»„"><a href="#å…¨å±€åˆ†ç»„" class="headerlink" title="å…¨å±€åˆ†ç»„"></a>å…¨å±€åˆ†ç»„</h4><ul><li>æ‰€æœ‰Tuplesåˆ†é…ç»™åŒä¸€ä¸ªworker</li></ul><h4 id="æ‰€æœ‰åˆ†ç»„"><a href="#æ‰€æœ‰åˆ†ç»„" class="headerlink" title="æ‰€æœ‰åˆ†ç»„"></a>æ‰€æœ‰åˆ†ç»„</h4><ul><li>å°†æ‰€æœ‰Tupleséƒ½å»ºç«‹å‰¯æœ¬ï¼Œå¹¶åˆ†é…ç»™æ‰€æœ‰çš„worker</li></ul><h2 id="é›†ç¾¤æ¶æ„"><a href="#é›†ç¾¤æ¶æ„" class="headerlink" title="é›†ç¾¤æ¶æ„"></a>é›†ç¾¤æ¶æ„</h2><h3 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h3><p><img src="/2019/12/17/shi-yong-gong-ju-zhi-storm/storm_structure.jpg" alt="å›¾ï¼šstormé›†ç¾¤æ¶æ„"></p><h3 id="ç»„ä»¶-1"><a href="#ç»„ä»¶-1" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><h4 id="Nimbusï¼ˆä¸»èŠ‚ç‚¹ï¼‰"><a href="#Nimbusï¼ˆä¸»èŠ‚ç‚¹ï¼‰" class="headerlink" title="Nimbusï¼ˆä¸»èŠ‚ç‚¹ï¼‰"></a>Nimbusï¼ˆä¸»èŠ‚ç‚¹ï¼‰</h4><ul><li>é›†ç¾¤çš„ä¸»èŠ‚ç‚¹</li><li>è´Ÿè´£ç»™å·¥ä½œèŠ‚ç‚¹åˆ†å‘ä»»åŠ¡å’Œæ•°æ®</li><li>ç›‘å¬å„å·¥ä½œèŠ‚ç‚¹çš„æ•…éšœ</li></ul><h4 id="Supervisorï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰"><a href="#Supervisorï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰" class="headerlink" title="Supervisorï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰"></a>Supervisorï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰</h4><ul><li>é™¤äº†ä¸»èŠ‚ç‚¹çš„å…¶ä»–èŠ‚ç‚¹</li><li>å®Œæˆä¸»èŠ‚ç‚¹åˆ†é…ä»»åŠ¡çš„èŠ‚ç‚¹</li><li>è‡³å°‘æœ‰ä¸€ä¸ªå·¥ä½œè¿›ç¨‹</li></ul><h4 id="Worker-processï¼ˆå·¥ä½œè¿›ç¨‹ï¼‰"><a href="#Worker-processï¼ˆå·¥ä½œè¿›ç¨‹ï¼‰" class="headerlink" title="Worker processï¼ˆå·¥ä½œè¿›ç¨‹ï¼‰"></a>Worker processï¼ˆå·¥ä½œè¿›ç¨‹ï¼‰</h4><ul><li>æ‰§è¡Œä¸ç‰¹ç‚¹æ‹“æ‰‘ç›¸å…³çš„ä»»åŠ¡</li><li>ä¸ä¼šè‡ªå·±è¿è¡Œä»»åŠ¡</li><li>é€šè¿‡åˆ›å»ºæ‰§è¡Œå™¨Executoræ¥æ‰§è¡Œç‰¹ç‚¹çš„ä»»åŠ¡</li><li>æ‹¥æœ‰å¤šä¸ªæ‰§è¡Œå™¨Executor</li></ul><h4 id="Executorï¼ˆæ‰§è¡Œå™¨ï¼‰"><a href="#Executorï¼ˆæ‰§è¡Œå™¨ï¼‰" class="headerlink" title="Executorï¼ˆæ‰§è¡Œå™¨ï¼‰"></a>Executorï¼ˆæ‰§è¡Œå™¨ï¼‰</h4><ul><li>å·¥ä½œè¿›ç¨‹äº§ç”Ÿçš„å•ä¸ªçº¿ç¨‹</li><li>è‡³å°‘è¿è¡Œä¸€ä¸ªä»»åŠ¡</li><li>ä»…ç”¨äºç‰¹å®šçš„Spoutæˆ–Bolt</li></ul><h4 id="Taskï¼ˆä»»åŠ¡ï¼‰"><a href="#Taskï¼ˆä»»åŠ¡ï¼‰" class="headerlink" title="Taskï¼ˆä»»åŠ¡ï¼‰"></a>Taskï¼ˆä»»åŠ¡ï¼‰</h4><ul><li>å¤„ç†å®é™…çš„æ•°æ®</li><li>è¦ä¹ˆæ˜¯Spoutï¼Œè¦ä¹ˆæ˜¯Bolt</li></ul><h4 id="ZooKeeper"><a href="#ZooKeeper" class="headerlink" title="ZooKeeper"></a>ZooKeeper</h4><ul><li>Nimbusæ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰€ä»¥éœ€è¦ZooKeeperæ¥ç›‘è§†å·¥ä½œèŠ‚ç‚¹çš„çŠ¶æ€</li><li>é€šè¿‡ZooKeeperæ¥ç›‘è§†çŠ¶æ€ï¼Œè¿™æ ·æ•…éšœçš„ç½‘ç»œå°±å¯ä»¥é‡æ–°å¯åŠ¨</li></ul><h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><h3 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h3><p><img src="/2019/12/17/shi-yong-gong-ju-zhi-storm/storm_job_process.jpg" alt="å›¾ï¼šstormå·¥ä½œæµç¨‹"></p><h3 id="è¯¦ç»†æµç¨‹ä»‹ç»"><a href="#è¯¦ç»†æµç¨‹ä»‹ç»" class="headerlink" title="è¯¦ç»†æµç¨‹ä»‹ç»"></a>è¯¦ç»†æµç¨‹ä»‹ç»</h3><ol><li>Nimbusç­‰å¾…å®¢æˆ·ç«¯æäº¤æ‹“æ‰‘ä»»åŠ¡</li><li>Nimbusåˆ›å»ºä»»åŠ¡çš„æœ¬åœ°ç›®å½•å¹¶å°†ä»»åŠ¡ä¸Šä¼ è‡³<code>$STORM_HOME/tmp/nimbus/inbox/</code></li><li>Nimbusä»ZooKeeperç›‘æ§å·¥ä½œèŠ‚ç‚¹çš„å¿ƒè·³å¹¶è®¡ç®—æ‹“æ‰‘çš„å·¥ä½œé‡</li><li>Nimbuså°†ä»»åŠ¡åˆ†é…ä¿¡æ¯å†™å…¥ZooKeeper</li><li>å·¥ä½œèŠ‚ç‚¹ç›‘å¬ZooKeeperçš„ä¿¡æ¯ï¼Œå½“æœ‰ä»»åŠ¡åˆ†é…æ—¶ï¼Œå¯åŠ¨ä»»åŠ¡çš„æ‹“æ‰‘</li><li>å·¥ä½œèŠ‚ç‚¹å¯åŠ¨ä»»åŠ¡æ‹“æ‰‘åï¼Œå¯åŠ¨ç›¸åº”æ•°ç›®çš„workerè¿›ç¨‹</li><li>ç”±workerè¿›ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼ˆSpoutæˆ–Boltï¼‰</li></ol><h2 id="åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿ</h2><h3 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h3><ul><li>è¯¦æƒ…è¯·è§</li></ul><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://www.w3cschool.cn/apache_storm/" target="_blank" rel="noopener">Apache Stormæ•™ç¨‹</a></li></ul><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> storm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹spark</title>
      <link href="/2019/12/12/shi-yong-gong-ju-zhi-spark/"/>
      <url>/2019/12/12/shi-yong-gong-ju-zhi-spark/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/12/12/shi-yong-gong-ju-zhi-spark/image-20210621144836787.png" alt="image-20210621144836787"></p><h1 id="SparkåŸºç¡€"><a href="#SparkåŸºç¡€" class="headerlink" title="SparkåŸºç¡€"></a>SparkåŸºç¡€</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><ul><li>Sparkæ˜¯UC Berkeley AMP labæ‰€å¼€æºçš„ç±»ä¼¼Hadoop MapReduceçš„é€šç”¨å¹¶è¡Œæ¡†æ¶ï¼Œå®ƒèƒ½æ›´å¥½åœ°é€‚ç”¨äºæ•°æ®æŒ–æ˜ä¸æœºå™¨å­¦ä¹ ç­‰éœ€è¦è¿­ä»£çš„MapReduceçš„ç®—æ³•ã€‚</li></ul><h3 id="ä¸»è¦ç‰¹ç‚¹"><a href="#ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="ä¸»è¦ç‰¹ç‚¹"></a>ä¸»è¦ç‰¹ç‚¹</h3><h4 id="è¿è¡Œé€Ÿåº¦å¿«ï¼š"><a href="#è¿è¡Œé€Ÿåº¦å¿«ï¼š" class="headerlink" title="è¿è¡Œé€Ÿåº¦å¿«ï¼š"></a>è¿è¡Œé€Ÿåº¦å¿«ï¼š</h4><ul><li>Sparkä½¿ç”¨å…ˆè¿›çš„DAGï¼ˆDirected Acyclic Graphï¼Œæœ‰å‘æ— ç¯å›¾ï¼‰æ‰§è¡Œå¼•æ“ï¼Œä»¥æ”¯æŒå¾ªç¯æ•°æ®æµä¸å†…å­˜è®¡ç®—ï¼ŒåŸºäºå†…å­˜çš„æ‰§è¡Œé€Ÿåº¦å¯æ¯”Hadoop MapReduceå¿«ä¸Šç™¾å€ï¼ŒåŸºäºç£ç›˜çš„æ‰§è¡Œé€Ÿåº¦ä¹Ÿèƒ½å¿«åå€ï¼›</li></ul><h4 id="å®¹æ˜“ä½¿ç”¨ï¼š"><a href="#å®¹æ˜“ä½¿ç”¨ï¼š" class="headerlink" title="å®¹æ˜“ä½¿ç”¨ï¼š"></a>å®¹æ˜“ä½¿ç”¨ï¼š</h4><ul><li>Sparkæ”¯æŒä½¿ç”¨Scalaã€Javaã€Pythonå’ŒRè¯­è¨€è¿›è¡Œç¼–ç¨‹ï¼Œç®€æ´çš„APIè®¾è®¡æœ‰åŠ©äºç”¨æˆ·è½»æ¾æ„å»ºå¹¶è¡Œç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡Spark Shellè¿›è¡Œäº¤äº’å¼ç¼–ç¨‹ï¼›</li></ul><h4 id="é€šç”¨æ€§ï¼š"><a href="#é€šç”¨æ€§ï¼š" class="headerlink" title="é€šç”¨æ€§ï¼š"></a>é€šç”¨æ€§ï¼š</h4><ul><li>Sparkæä¾›äº†å®Œæ•´è€Œå¼ºå¤§çš„æŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬SQLæŸ¥è¯¢ã€æµå¼è®¡ç®—ã€æœºå™¨å­¦ä¹ å’Œå›¾ç®—æ³•ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥æ— ç¼æ•´åˆåœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­ï¼Œè¶³ä»¥åº”å¯¹å¤æ‚çš„è®¡ç®—ï¼›</li></ul><h4 id="è¿è¡Œæ¨¡å¼å¤šæ ·ï¼š"><a href="#è¿è¡Œæ¨¡å¼å¤šæ ·ï¼š" class="headerlink" title="è¿è¡Œæ¨¡å¼å¤šæ ·ï¼š"></a>è¿è¡Œæ¨¡å¼å¤šæ ·ï¼š</h4><ul><li>Sparkå¯è¿è¡Œäºç‹¬ç«‹çš„é›†ç¾¤æ¨¡å¼ä¸­ï¼Œæˆ–è€…è¿è¡ŒäºHadoopä¸­ï¼Œä¹Ÿå¯è¿è¡ŒäºAmazon EC2ç­‰äº‘ç¯å¢ƒä¸­ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®HDFSã€Cassandraã€HBaseã€Hiveç­‰å¤šç§æ•°æ®æºã€‚</li><li>Sparkçš„è®¡ç®—æ¨¡å¼ä¹Ÿå±äºMapReduceï¼Œä½†ä¸å±€é™äºMapå’ŒReduceæ“ä½œï¼Œè¿˜æä¾›äº†å¤šç§æ•°æ®é›†æ“ä½œç±»å‹ï¼Œç¼–ç¨‹æ¨¡å‹æ¯”MapReduceæ›´çµæ´»ï¼›</li><li>Sparkæä¾›äº†å†…å­˜è®¡ç®—ï¼Œä¸­é—´ç»“æœç›´æ¥æ”¾åˆ°å†…å­˜ä¸­ï¼Œå¸¦æ¥äº†æ›´é«˜çš„è¿­ä»£è¿ç®—æ•ˆç‡ï¼›</li><li>SparkåŸºäºDAGçš„ä»»åŠ¡è°ƒåº¦æ‰§è¡Œæœºåˆ¶ï¼Œè¦ä¼˜äºMapReduceçš„è¿­ä»£æ‰§è¡Œæœºåˆ¶ã€‚</li></ul><h2 id="ç”Ÿæ€ç³»ç»Ÿ"><a href="#ç”Ÿæ€ç³»ç»Ÿ" class="headerlink" title="ç”Ÿæ€ç³»ç»Ÿ"></a>ç”Ÿæ€ç³»ç»Ÿ</h2><h3 id="å¤§æ•°æ®å¤„ç†ç±»å‹"><a href="#å¤§æ•°æ®å¤„ç†ç±»å‹" class="headerlink" title="å¤§æ•°æ®å¤„ç†ç±»å‹"></a>å¤§æ•°æ®å¤„ç†ç±»å‹</h3><h4 id="å¤æ‚çš„æ‰¹é‡æ•°æ®å¤„ç†ï¼š"><a href="#å¤æ‚çš„æ‰¹é‡æ•°æ®å¤„ç†ï¼š" class="headerlink" title="å¤æ‚çš„æ‰¹é‡æ•°æ®å¤„ç†ï¼š"></a>å¤æ‚çš„æ‰¹é‡æ•°æ®å¤„ç†ï¼š</h4><ul><li>æ—¶é—´è·¨åº¦é€šå¸¸åœ¨æ•°ååˆ†é’Ÿåˆ°æ•°å°æ—¶ä¹‹é—´ï¼›</li><li>Hadoop MapReduce</li></ul><h4 id="åŸºäºå†å²æ•°æ®çš„äº¤äº’å¼æŸ¥è¯¢ï¼š"><a href="#åŸºäºå†å²æ•°æ®çš„äº¤äº’å¼æŸ¥è¯¢ï¼š" class="headerlink" title="åŸºäºå†å²æ•°æ®çš„äº¤äº’å¼æŸ¥è¯¢ï¼š"></a>åŸºäºå†å²æ•°æ®çš„äº¤äº’å¼æŸ¥è¯¢ï¼š</h4><ul><li>æ—¶é—´è·¨åº¦é€šå¸¸åœ¨æ•°åç§’åˆ°æ•°åˆ†é’Ÿä¹‹é—´ï¼›</li><li>Impalaï¼šImpalaä¸Hiveç›¸ä¼¼ï¼Œä½†åº•å±‚å¼•æ“ä¸åŒï¼Œæä¾›äº†å®æ—¶äº¤äº’å¼</li><li>SQLæŸ¥è¯¢</li></ul><h4 id="åŸºäºå®æ—¶æ•°æ®æµçš„æ•°æ®å¤„ç†ï¼š"><a href="#åŸºäºå®æ—¶æ•°æ®æµçš„æ•°æ®å¤„ç†ï¼š" class="headerlink" title="åŸºäºå®æ—¶æ•°æ®æµçš„æ•°æ®å¤„ç†ï¼š"></a>åŸºäºå®æ—¶æ•°æ®æµçš„æ•°æ®å¤„ç†ï¼š</h4><ul><li>æ—¶é—´è·¨åº¦é€šå¸¸åœ¨æ•°ç™¾æ¯«ç§’åˆ°æ•°ç§’ä¹‹é—´</li><li>Stormï¼šå¼€æºæµè®¡ç®—æ¡†æ¶</li></ul><h4 id="Sparkæ‰€æä¾›çš„ç”Ÿæ€ç³»ç»Ÿè¶³ä»¥åº”å¯¹ä¸Šè¿°ä¸‰ç§åœºæ™¯"><a href="#Sparkæ‰€æä¾›çš„ç”Ÿæ€ç³»ç»Ÿè¶³ä»¥åº”å¯¹ä¸Šè¿°ä¸‰ç§åœºæ™¯" class="headerlink" title="Sparkæ‰€æä¾›çš„ç”Ÿæ€ç³»ç»Ÿè¶³ä»¥åº”å¯¹ä¸Šè¿°ä¸‰ç§åœºæ™¯"></a>Sparkæ‰€æä¾›çš„ç”Ÿæ€ç³»ç»Ÿè¶³ä»¥åº”å¯¹ä¸Šè¿°ä¸‰ç§åœºæ™¯</h4><ul><li>å³åŒæ—¶æ”¯æŒæ‰¹å¤„ç†ã€äº¤äº’å¼æŸ¥è¯¢å’Œæµæ•°æ®å¤„ç†ã€‚</li></ul><h3 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h3><h4 id="è®¿é—®å’Œæ¥å£"><a href="#è®¿é—®å’Œæ¥å£" class="headerlink" title="è®¿é—®å’Œæ¥å£"></a>è®¿é—®å’Œæ¥å£</h4><h5 id="Spark-Streaming"><a href="#Spark-Streaming" class="headerlink" title="Spark Streaming"></a>Spark Streaming</h5><p><a href="https://spark.apache.org/docs/latest/streaming-programming-guide.html" target="_blank" rel="noopener">https://spark.apache.org/docs/latest/streaming-programming-guide.html</a></p><p>Spark Streamingæ”¯æŒé«˜ååé‡ã€å¯å®¹é”™å¤„ç†çš„å®æ—¶æµæ•°æ®å¤„ç†ï¼Œå…¶æ ¸å¿ƒæ€è·¯æ˜¯å°†æµå¼è®¡ç®—åˆ†è§£æˆä¸€ç³»åˆ—çŸ­å°çš„æ‰¹å¤„ç†ä½œä¸šã€‚Spark Streamingæ”¯æŒå¤šç§æ•°æ®è¾“å…¥æºï¼Œå¦‚Kafkaã€Flumeå’ŒTCPå¥—æ¥å­—ç­‰ï¼›</p><p>kafkaï¼š<a href="https://www.w3cschool.cn/apache_kafka/" target="_blank" rel="noopener">https://www.w3cschool.cn/apache_kafka/</a></p><p>Flumeï¼š<a href="https://juejin.im/post/5be4e549f265da61441f8dbe" target="_blank" rel="noopener">https://juejin.im/post/5be4e549f265da61441f8dbe</a></p><p>TCPï¼š<a href="http://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html</a></p><h5 id="BlinkDB"><a href="#BlinkDB" class="headerlink" title="BlinkDB"></a>BlinkDB</h5><ul><li>BlinkDB æ˜¯ä¸€ä¸ªç”¨äºåœ¨æµ·é‡æ•°æ®ä¸Šè¿è¡Œäº¤äº’å¼ SQL æŸ¥è¯¢çš„å¤§è§„æ¨¡å¹¶è¡ŒæŸ¥è¯¢å¼•æ“ã€‚</li></ul><h5 id="Spark-Sql"><a href="#Spark-Sql" class="headerlink" title="Spark Sql"></a>Spark Sql</h5><ul><li><a href="https://spark.apache.org/docs/latest/sql-programming-guide.html" target="_blank" rel="noopener">https://spark.apache.org/docs/latest/sql-programming-guide.html</a></li><li>Spark SQLå…è®¸å¼€å‘äººå‘˜ç›´æ¥å¤„ç†RDDï¼ŒåŒæ—¶ä¹Ÿå¯æŸ¥è¯¢Hiveã€HBaseç­‰å¤–éƒ¨æ•°æ®æºã€‚Spark SQLçš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯å…¶èƒ½å¤Ÿç»Ÿä¸€å¤„ç†å…³ç³»è¡¨å’ŒRDDï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°ä½¿ç”¨SQLå‘½ä»¤è¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶è¿›è¡Œæ›´å¤æ‚çš„æ•°æ®åˆ†æï¼›</li></ul><h5 id="GraphX"><a href="#GraphX" class="headerlink" title="GraphX"></a>GraphX</h5><ul><li><a href="https://spark.apache.org/docs/latest/graphx-programming-guide.html" target="_blank" rel="noopener">https://spark.apache.org/docs/latest/graphx-programming-guide.html</a></li><li>GraphXæ˜¯Sparkä¸­ç”¨äºå›¾è®¡ç®—çš„APIï¼Œå¯è®¤ä¸ºæ˜¯Pregelåœ¨Sparkä¸Šçš„é‡å†™åŠä¼˜åŒ–ï¼ŒGraphxæ€§èƒ½è‰¯å¥½ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„åŠŸèƒ½å’Œè¿ç®—ç¬¦ï¼Œèƒ½åœ¨æµ·é‡æ•°æ®ä¸Šè‡ªå¦‚åœ°è¿è¡Œå¤æ‚çš„å›¾ç®—æ³•ã€‚</li></ul><h5 id="MLBase"><a href="#MLBase" class="headerlink" title="MLBase"></a>MLBase</h5><ul><li><a href="https://amplab.cs.berkeley.edu/publication/mlbase-a-distributed-machine-learning-system/" target="_blank" rel="noopener">https://amplab.cs.berkeley.edu/publication/mlbase-a-distributed-machine-learning-system/</a></li></ul><h5 id="MlLib"><a href="#MlLib" class="headerlink" title="MlLib"></a>MlLib</h5><ul><li><a href="https://spark.apache.org/docs/latest/ml-guide.html" target="_blank" rel="noopener">https://spark.apache.org/docs/latest/ml-guide.html</a></li><li>MLlibæä¾›äº†å¸¸ç”¨æœºå™¨å­¦ä¹ ç®—æ³•çš„å®ç°ï¼ŒåŒ…æ‹¬èšç±»ã€åˆ†ç±»ã€å›å½’ã€ååŒè¿‡æ»¤ç­‰ï¼Œé™ä½äº†æœºå™¨å­¦ä¹ çš„é—¨æ§›ï¼Œå¼€å‘äººå‘˜åªè¦å…·å¤‡ä¸€å®šçš„ç†è®ºçŸ¥è¯†å°±èƒ½è¿›è¡Œæœºå™¨å­¦ä¹ çš„å·¥ä½œï¼›</li></ul><h4 id="å¤„ç†å¼•æ“"><a href="#å¤„ç†å¼•æ“" class="headerlink" title="å¤„ç†å¼•æ“"></a>å¤„ç†å¼•æ“</h4><h5 id="Spark-Core"><a href="#Spark-Core" class="headerlink" title="Spark Core"></a>Spark Core</h5><ul><li><a href="https://blog.csdn.net/bingoxubin/article/details/79076978" target="_blank" rel="noopener">https://blog.csdn.net/bingoxubin/article/details/79076978</a></li><li>Spark CoreåŒ…å«Sparkçš„åŸºæœ¬åŠŸèƒ½ï¼Œå¦‚å†…å­˜è®¡ç®—ã€ä»»åŠ¡è°ƒåº¦ã€éƒ¨ç½²æ¨¡å¼ã€æ•…éšœæ¢å¤ã€å­˜å‚¨ç®¡ç†ç­‰ã€‚Sparkå»ºç«‹åœ¨ç»Ÿä¸€çš„æŠ½è±¡RDDä¹‹ä¸Šï¼Œä½¿å…¶å¯ä»¥ä»¥åŸºæœ¬ä¸€è‡´çš„æ–¹å¼åº”å¯¹ä¸åŒçš„å¤§æ•°æ®å¤„ç†åœºæ™¯ï¼›é€šå¸¸æ‰€è¯´çš„Apache Sparkï¼Œå°±æ˜¯æŒ‡Spark Coreï¼›</li></ul><h4 id="å­˜å‚¨"><a href="#å­˜å‚¨" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h4><h5 id="Tachyon"><a href="#Tachyon" class="headerlink" title="Tachyon"></a>Tachyon</h5><ul><li><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-spark-tachyon/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/opensource/os-cn-spark-tachyon/</a></li></ul><h5 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h5><ul><li><a href="https://hadoop.apache.org/docs/r1.0.4/cn/hdfs_design.html" target="_blank" rel="noopener">https://hadoop.apache.org/docs/r1.0.4/cn/hdfs_design.html</a></li></ul><h5 id="Amazon-S3"><a href="#Amazon-S3" class="headerlink" title="Amazon S3"></a>Amazon S3</h5><ul><li><a href="https://aws.amazon.com/cn/s3/" target="_blank" rel="noopener">https://aws.amazon.com/cn/s3/</a></li></ul><h4 id="èµ„æºç®¡ç†è°ƒåº¦"><a href="#èµ„æºç®¡ç†è°ƒåº¦" class="headerlink" title="èµ„æºç®¡ç†è°ƒåº¦"></a>èµ„æºç®¡ç†è°ƒåº¦</h4><h5 id="Mesos"><a href="#Mesos" class="headerlink" title="Mesos"></a>Mesos</h5><ul><li><a href="http://mesos.apache.org/" target="_blank" rel="noopener">http://mesos.apache.org/</a></li></ul><h5 id="Hadoop-YARN"><a href="#Hadoop-YARN" class="headerlink" title="Hadoop YARN"></a>Hadoop YARN</h5><ul><li><a href="https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html" target="_blank" rel="noopener">https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html</a></li></ul><h2 id="è¿è¡Œæ¶æ„"><a href="#è¿è¡Œæ¶æ„" class="headerlink" title="è¿è¡Œæ¶æ„"></a>è¿è¡Œæ¶æ„</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><h4 id="RDDï¼š"><a href="#RDDï¼š" class="headerlink" title="RDDï¼š"></a>RDDï¼š</h4><ul><li>æ˜¯å¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†ï¼ˆResilient Distributed Datasetï¼‰çš„ç®€ç§°ï¼Œæ˜¯åˆ†å¸ƒå¼å†…å­˜çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œæä¾›äº†ä¸€ç§é«˜åº¦å—é™çš„å…±äº«å†…å­˜æ¨¡å‹ï¼›</li></ul><h4 id="DAGï¼š"><a href="#DAGï¼š" class="headerlink" title="DAGï¼š"></a>DAGï¼š</h4><ul><li>æ˜¯Directed Acyclic Graphï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰çš„ç®€ç§°ï¼Œåæ˜ RDDä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼›</li></ul><h4 id="Executorï¼š"><a href="#Executorï¼š" class="headerlink" title="Executorï¼š"></a>Executorï¼š</h4><ul><li>æ˜¯è¿è¡Œåœ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰ä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œè´Ÿè´£è¿è¡Œä»»åŠ¡ï¼Œå¹¶ä¸ºåº”ç”¨ç¨‹åºå­˜å‚¨æ•°æ®ï¼›</li></ul><h5 id="Sparkæ‰€é‡‡ç”¨çš„Executoræœ‰ä¸¤ä¸ªä¼˜ç‚¹"><a href="#Sparkæ‰€é‡‡ç”¨çš„Executoræœ‰ä¸¤ä¸ªä¼˜ç‚¹" class="headerlink" title="Sparkæ‰€é‡‡ç”¨çš„Executoræœ‰ä¸¤ä¸ªä¼˜ç‚¹"></a>Sparkæ‰€é‡‡ç”¨çš„Executoræœ‰ä¸¤ä¸ªä¼˜ç‚¹</h5><ul><li>ä¸€æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹æ¥æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡ï¼ˆHadoop MapReduceé‡‡ç”¨çš„æ˜¯è¿›ç¨‹æ¨¡å‹ï¼‰ï¼Œå‡å°‘ä»»åŠ¡çš„å¯åŠ¨å¼€é”€ï¼›</li><li>äºŒæ˜¯Executorä¸­æœ‰ä¸€ä¸ªBlockManagerå­˜å‚¨æ¨¡å—ï¼Œä¼šå°†å†…å­˜å’Œç£ç›˜å…±åŒä½œä¸ºå­˜å‚¨è®¾å¤‡ï¼Œå½“éœ€è¦å¤šè½®è¿­ä»£è®¡ç®—æ—¶ï¼Œå¯ä»¥å°†ä¸­é—´ç»“æœå­˜å‚¨åˆ°è¿™ä¸ªå­˜å‚¨æ¨¡å—é‡Œï¼Œä¸‹æ¬¡éœ€è¦æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥è¯»è¯¥å­˜å‚¨æ¨¡å—é‡Œçš„æ•°æ®ï¼Œè€Œä¸éœ€è¦è¯»å†™åˆ°HDFSç­‰æ–‡ä»¶ç³»ç»Ÿé‡Œï¼Œå› è€Œæœ‰æ•ˆå‡å°‘äº†IOå¼€é”€ï¼›æˆ–è€…åœ¨äº¤äº’å¼æŸ¥è¯¢åœºæ™¯ä¸‹ï¼Œé¢„å…ˆå°†è¡¨ç¼“å­˜åˆ°è¯¥å­˜å‚¨ç³»ç»Ÿä¸Šï¼Œä»è€Œå¯ä»¥æé«˜è¯»å†™IOæ€§èƒ½ã€‚</li></ul><h4 id="åº”ç”¨ï¼š"><a href="#åº”ç”¨ï¼š" class="headerlink" title="åº”ç”¨ï¼š"></a>åº”ç”¨ï¼š</h4><ul><li>ç”¨æˆ·ç¼–å†™çš„Sparkåº”ç”¨ç¨‹åºï¼›</li></ul><h4 id="ä»»åŠ¡ï¼š"><a href="#ä»»åŠ¡ï¼š" class="headerlink" title="ä»»åŠ¡ï¼š"></a>ä»»åŠ¡ï¼š</h4><ul><li>è¿è¡Œåœ¨Executorä¸Šçš„å·¥ä½œå•å…ƒï¼›</li></ul><h4 id="ä½œä¸šï¼š"><a href="#ä½œä¸šï¼š" class="headerlink" title="ä½œä¸šï¼š"></a>ä½œä¸šï¼š</h4><ul><li>ä¸€ä¸ªä½œä¸šåŒ…å«å¤šä¸ªRDDåŠä½œç”¨äºç›¸åº”RDDä¸Šçš„å„ç§æ“ä½œï¼›</li></ul><h4 id="é˜¶æ®µï¼š"><a href="#é˜¶æ®µï¼š" class="headerlink" title="é˜¶æ®µï¼š"></a>é˜¶æ®µï¼š</h4><ul><li>æ˜¯ä½œä¸šçš„åŸºæœ¬è°ƒåº¦å•ä½ï¼Œä¸€ä¸ªä½œä¸šä¼šåˆ†ä¸ºå¤šç»„ä»»åŠ¡ï¼Œæ¯ç»„ä»»åŠ¡è¢«ç§°ä¸ºâ€œé˜¶æ®µâ€ï¼Œæˆ–è€…ä¹Ÿè¢«ç§°ä¸ºâ€œä»»åŠ¡é›†â€ã€‚</li></ul><h3 id="æ¶æ„è®¾è®¡"><a href="#æ¶æ„è®¾è®¡" class="headerlink" title="æ¶æ„è®¾è®¡"></a>æ¶æ„è®¾è®¡</h3><h4 id="é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼ˆCluster-Managerï¼‰"><a href="#é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼ˆCluster-Managerï¼‰" class="headerlink" title="é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼ˆCluster Managerï¼‰"></a>é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼ˆCluster Managerï¼‰</h4><ul><li>å¯ä»¥æ˜¯Sparkè‡ªå¸¦çš„èµ„æºç®¡ç†å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯YARNæˆ–Mesosç­‰èµ„æºç®¡ç†æ¡†æ¶ã€‚</li></ul><h4 id="è¿è¡Œä½œä¸šä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker-Nodeï¼‰"><a href="#è¿è¡Œä½œä¸šä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker-Nodeï¼‰" class="headerlink" title="è¿è¡Œä½œä¸šä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰"></a>è¿è¡Œä½œä¸šä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰</h4><h4 id="æ¯ä¸ªåº”ç”¨çš„ä»»åŠ¡æ§åˆ¶èŠ‚ç‚¹ï¼ˆDriverï¼‰"><a href="#æ¯ä¸ªåº”ç”¨çš„ä»»åŠ¡æ§åˆ¶èŠ‚ç‚¹ï¼ˆDriverï¼‰" class="headerlink" title="æ¯ä¸ªåº”ç”¨çš„ä»»åŠ¡æ§åˆ¶èŠ‚ç‚¹ï¼ˆDriverï¼‰"></a>æ¯ä¸ªåº”ç”¨çš„ä»»åŠ¡æ§åˆ¶èŠ‚ç‚¹ï¼ˆDriverï¼‰</h4><h4 id="æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šè´Ÿè´£å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œè¿›ç¨‹ï¼ˆExecutorï¼‰"><a href="#æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šè´Ÿè´£å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œè¿›ç¨‹ï¼ˆExecutorï¼‰" class="headerlink" title="æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šè´Ÿè´£å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œè¿›ç¨‹ï¼ˆExecutorï¼‰"></a>æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šè´Ÿè´£å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œè¿›ç¨‹ï¼ˆExecutorï¼‰</h4><h3 id="è¿è¡Œæµç¨‹"><a href="#è¿è¡Œæµç¨‹" class="headerlink" title="è¿è¡Œæµç¨‹"></a>è¿è¡Œæµç¨‹</h3><ol><li>å½“ä¸€ä¸ªSparkåº”ç”¨è¢«æäº¤æ—¶ï¼Œé¦–å…ˆéœ€è¦ä¸ºè¿™ä¸ªåº”ç”¨æ„å»ºèµ·åŸºæœ¬çš„è¿è¡Œç¯å¢ƒï¼Œå³ç”±ä»»åŠ¡æ§åˆ¶èŠ‚ç‚¹ï¼ˆDriverï¼‰åˆ›å»ºä¸€ä¸ªSparkContextï¼Œç”±SparkContextè´Ÿè´£å’Œèµ„æºç®¡ç†å™¨ï¼ˆCluster Managerï¼‰çš„é€šä¿¡ä»¥åŠè¿›è¡Œèµ„æºçš„ç”³è¯·ã€ä»»åŠ¡çš„åˆ†é…å’Œç›‘æ§ç­‰ã€‚SparkContextä¼šå‘èµ„æºç®¡ç†å™¨æ³¨å†Œå¹¶ç”³è¯·è¿è¡ŒExecutorçš„èµ„æºï¼›</li><li>èµ„æºç®¡ç†å™¨ä¸ºExecutoråˆ†é…èµ„æºï¼Œå¹¶å¯åŠ¨Executorè¿›ç¨‹ï¼ŒExecutorè¿è¡Œæƒ…å†µå°†éšç€â€œå¿ƒè·³â€å‘é€åˆ°èµ„æºç®¡ç†å™¨ä¸Šï¼›</li><li>SparkContextæ ¹æ®RDDçš„ä¾èµ–å…³ç³»æ„å»ºDAGå›¾ï¼ŒDAGå›¾æäº¤ç»™DAGè°ƒåº¦å™¨ï¼ˆDAGSchedulerï¼‰è¿›è¡Œè§£æï¼Œå°†DAGå›¾åˆ†è§£æˆå¤šä¸ªâ€œé˜¶æ®µâ€ï¼ˆæ¯ä¸ªé˜¶æ®µéƒ½æ˜¯ä¸€ä¸ªä»»åŠ¡é›†ï¼‰ï¼Œå¹¶ä¸”è®¡ç®—å‡ºå„ä¸ªé˜¶æ®µä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç„¶åæŠŠä¸€ä¸ªä¸ªâ€œä»»åŠ¡é›†â€æäº¤ç»™åº•å±‚çš„ä»»åŠ¡è°ƒåº¦å™¨ï¼ˆTaskSchedulerï¼‰è¿›è¡Œå¤„ç†ï¼›Executorå‘SparkContextç”³è¯·ä»»åŠ¡ï¼Œä»»åŠ¡è°ƒåº¦å™¨å°†ä»»åŠ¡åˆ†å‘ç»™Executorè¿è¡Œï¼ŒåŒæ—¶ï¼ŒSparkContextå°†åº”ç”¨ç¨‹åºä»£ç å‘æ”¾ç»™Executorï¼›</li><li>ä»»åŠ¡åœ¨Executorä¸Šè¿è¡Œï¼ŒæŠŠæ‰§è¡Œç»“æœåé¦ˆç»™ä»»åŠ¡è°ƒåº¦å™¨ï¼Œç„¶ååé¦ˆç»™DAGè°ƒåº¦å™¨ï¼Œè¿è¡Œå®Œæ¯•åå†™å…¥æ•°æ®å¹¶é‡Šæ”¾æ‰€æœ‰èµ„æºã€‚</li></ol><h3 id="è¿è¡Œæ¶æ„ç‰¹ç‚¹"><a href="#è¿è¡Œæ¶æ„ç‰¹ç‚¹" class="headerlink" title="è¿è¡Œæ¶æ„ç‰¹ç‚¹"></a>è¿è¡Œæ¶æ„ç‰¹ç‚¹</h3><pre><code>        *  æ¯ä¸ªåº”ç”¨éƒ½æœ‰è‡ªå·±ä¸“å±çš„Executorè¿›ç¨‹ï¼Œå¹¶ä¸”è¯¥è¿›ç¨‹åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸€ç›´é©»ç•™ã€‚Executorè¿›ç¨‹ä»¥å¤šçº¿ç¨‹çš„æ–¹å¼è¿è¡Œä»»åŠ¡ï¼Œå‡å°‘äº†å¤šè¿›ç¨‹ä»»åŠ¡é¢‘ç¹çš„å¯åŠ¨å¼€é”€ï¼Œä½¿å¾—ä»»åŠ¡æ‰§è¡Œå˜å¾—éå¸¸é«˜æ•ˆå’Œå¯é ï¼›        *  Sparkè¿è¡Œè¿‡ç¨‹ä¸èµ„æºç®¡ç†å™¨æ— å…³ï¼Œåªè¦èƒ½å¤Ÿè·å–Executorè¿›ç¨‹å¹¶ä¿æŒé€šä¿¡å³å¯ï¼›        *  Executorä¸Šæœ‰ä¸€ä¸ªBlockManagerå­˜å‚¨æ¨¡å—ï¼Œç±»ä¼¼äºé”®å€¼å­˜å‚¨ç³»ç»Ÿï¼ˆæŠŠå†…å­˜å’Œç£ç›˜å…±åŒä½œä¸ºå­˜å‚¨è®¾å¤‡ï¼‰ï¼Œåœ¨å¤„ç†è¿­ä»£è®¡ç®—ä»»åŠ¡æ—¶ï¼Œä¸éœ€è¦æŠŠä¸­é—´ç»“æœå†™å…¥åˆ°HDFSç­‰æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯ç›´æ¥æ”¾åœ¨è¿™ä¸ªå­˜å‚¨ç³»ç»Ÿä¸Šï¼Œåç»­æœ‰éœ€è¦æ—¶å°±å¯ä»¥ç›´æ¥è¯»å–ï¼›åœ¨äº¤äº’å¼æŸ¥è¯¢åœºæ™¯ä¸‹ï¼Œä¹Ÿå¯ä»¥æŠŠè¡¨æå‰ç¼“å­˜åˆ°è¿™ä¸ªå­˜å‚¨ç³»ç»Ÿä¸Šï¼Œæé«˜è¯»å†™IOæ€§èƒ½ï¼›        *  ä»»åŠ¡é‡‡ç”¨äº†æ•°æ®æœ¬åœ°æ€§å’Œæ¨æµ‹æ‰§è¡Œç­‰ä¼˜åŒ–æœºåˆ¶ã€‚æ•°æ®æœ¬åœ°æ€§æ˜¯å°½é‡å°†è®¡ç®—ç§»åˆ°æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œï¼Œå³â€œè®¡ç®—å‘æ•°æ®é æ‹¢â€ï¼Œå› ä¸ºç§»åŠ¨è®¡ç®—æ¯”ç§»åŠ¨æ•°æ®æ‰€å çš„ç½‘ç»œèµ„æºè¦å°‘å¾—å¤šã€‚è€Œä¸”ï¼ŒSparké‡‡ç”¨äº†å»¶æ—¶è°ƒåº¦æœºåˆ¶ï¼Œå¯ä»¥åœ¨æ›´å¤§çš„ç¨‹åº¦ä¸Šå®ç°æ‰§è¡Œè¿‡ç¨‹ä¼˜åŒ–ã€‚æ¯”å¦‚ï¼Œæ‹¥æœ‰æ•°æ®çš„èŠ‚ç‚¹å½“å‰æ­£è¢«å…¶ä»–çš„ä»»åŠ¡å ç”¨ï¼Œé‚£ä¹ˆï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯å¦éœ€è¦å°†æ•°æ®ç§»åŠ¨åˆ°å…¶ä»–çš„ç©ºé—²èŠ‚ç‚¹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¸€å®šã€‚å› ä¸ºï¼Œå¦‚æœç»è¿‡é¢„æµ‹å‘ç°å½“å‰èŠ‚ç‚¹ç»“æŸå½“å‰ä»»åŠ¡çš„æ—¶é—´è¦æ¯”ç§»åŠ¨æ•°æ®çš„æ—¶é—´è¿˜è¦å°‘ï¼Œé‚£ä¹ˆï¼Œè°ƒåº¦å°±ä¼šç­‰å¾…ï¼Œç›´åˆ°å½“å‰èŠ‚ç‚¹å¯ç”¨ã€‚</code></pre><h2 id="RDDçš„è®¾è®¡ä¸è¿è¡ŒåŸç†"><a href="#RDDçš„è®¾è®¡ä¸è¿è¡ŒåŸç†" class="headerlink" title="RDDçš„è®¾è®¡ä¸è¿è¡ŒåŸç†"></a>RDDçš„è®¾è®¡ä¸è¿è¡ŒåŸç†</h2><h3 id="RDDæ¦‚å¿µ"><a href="#RDDæ¦‚å¿µ" class="headerlink" title="RDDæ¦‚å¿µ"></a>RDDæ¦‚å¿µ</h3><ul><li><p>ä¸€ä¸ªRDDå°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å¯¹è±¡é›†åˆï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåªè¯»çš„åˆ†åŒºè®°å½•é›†åˆï¼Œæ¯ä¸ªRDDå¯ä»¥åˆ†æˆå¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºå°±æ˜¯ä¸€ä¸ªæ•°æ®é›†ç‰‡æ®µï¼Œå¹¶ä¸”ä¸€ä¸ªRDDçš„ä¸åŒåˆ†åŒºå¯ä»¥è¢«ä¿å­˜åˆ°é›†ç¾¤ä¸­ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä»è€Œå¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä¸åŒèŠ‚ç‚¹ä¸Šè¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚</p></li><li><p>RDDæä¾›äº†ä¸€ç§é«˜åº¦å—é™çš„å…±äº«å†…å­˜æ¨¡å‹ï¼Œå³RDDæ˜¯åªè¯»çš„è®°å½•åˆ†åŒºçš„é›†åˆï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œåªèƒ½åŸºäºç¨³å®šçš„ç‰©ç†å­˜å‚¨ä¸­çš„æ•°æ®é›†æ¥åˆ›å»ºRDDï¼Œæˆ–è€…é€šè¿‡åœ¨å…¶ä»–RDDä¸Šæ‰§è¡Œç¡®å®šçš„è½¬æ¢æ“ä½œï¼ˆå¦‚mapã€joinå’ŒgroupByï¼‰è€Œåˆ›å»ºå¾—åˆ°æ–°çš„RDDã€‚</p></li><li><p>RDDæä¾›äº†ä¸€ç»„ä¸°å¯Œçš„æ“ä½œä»¥æ”¯æŒå¸¸è§çš„æ•°æ®è¿ç®—ï¼Œåˆ†ä¸ºâ€œè¡ŒåŠ¨â€ï¼ˆActionï¼‰å’Œâ€œè½¬æ¢â€ï¼ˆTransformationï¼‰ä¸¤ç§ç±»å‹ï¼Œ</p><ol><li>è¡ŒåŠ¨ï¼šè¡ŒåŠ¨æ“ä½œï¼ˆæ¯”å¦‚countã€collectç­‰ï¼‰æ¥å—RDDä½†æ˜¯è¿”å›éRDDï¼ˆå³è¾“å‡ºä¸€ä¸ªå€¼æˆ–ç»“æœï¼‰</li><li>è½¬æ¢ï¼šè½¬æ¢æ“ä½œï¼ˆæ¯”å¦‚mapã€filterã€groupByã€joinç­‰ï¼‰æ¥å—RDDå¹¶è¿”å›RDD</li></ol><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>é€‚åˆï¼šå¯¹äºæ•°æ®é›†ä¸­å…ƒç´ æ‰§è¡Œç›¸åŒæ“ä½œçš„æ‰¹å¤„ç†å¼åº”ç”¨</p><p>ä¸é€‚åˆï¼šä¸é€‚åˆç”¨äºéœ€è¦å¼‚æ­¥ã€ç»†ç²’åº¦çŠ¶æ€çš„åº”ç”¨ï¼Œæ¯”å¦‚Webåº”ç”¨ç³»ç»Ÿã€å¢é‡å¼çš„ç½‘é¡µçˆ¬è™«ç­‰</p></li></ul><h4 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><ul><li>RDDè¯»å…¥å¤–éƒ¨æ•°æ®æºï¼ˆæˆ–è€…å†…å­˜ä¸­çš„é›†åˆï¼‰è¿›è¡Œåˆ›å»ºï¼›</li><li>RDDç»è¿‡ä¸€ç³»åˆ—çš„â€œè½¬æ¢â€æ“ä½œï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šäº§ç”Ÿä¸åŒçš„RDDï¼Œä¾›ç»™ä¸‹ä¸€ä¸ªâ€œè½¬æ¢â€ä½¿ç”¨ï¼›</li><li>æœ€åä¸€ä¸ªRDDç»â€œè¡ŒåŠ¨â€æ“ä½œè¿›è¡Œå¤„ç†ï¼Œå¹¶è¾“å‡ºåˆ°å¤–éƒ¨æ•°æ®æºï¼ˆæˆ–è€…å˜æˆScalaé›†åˆæˆ–æ ‡é‡ï¼‰ã€‚</li></ul><h3 id="RDDç‰¹æ€§"><a href="#RDDç‰¹æ€§" class="headerlink" title="RDDç‰¹æ€§"></a>RDDç‰¹æ€§</h3><h4 id="é«˜æ•ˆçš„å®¹é”™æ€§ã€‚"><a href="#é«˜æ•ˆçš„å®¹é”™æ€§ã€‚" class="headerlink" title="é«˜æ•ˆçš„å®¹é”™æ€§ã€‚"></a>é«˜æ•ˆçš„å®¹é”™æ€§ã€‚</h4><ul><li>åœ¨RDDçš„è®¾è®¡ä¸­ï¼Œæ•°æ®åªè¯»ï¼Œä¸å¯ä¿®æ”¹ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹æ•°æ®ï¼Œå¿…é¡»ä»çˆ¶RDDè½¬æ¢åˆ°å­RDDï¼Œç”±æ­¤åœ¨ä¸åŒRDDä¹‹é—´å»ºç«‹äº†è¡€ç¼˜å…³ç³»ã€‚æ‰€ä»¥ï¼ŒRDDæ˜¯ä¸€ç§å¤©ç”Ÿå…·æœ‰å®¹é”™æœºåˆ¶çš„ç‰¹æ®Šé›†åˆï¼Œä¸éœ€è¦é€šè¿‡æ•°æ®å†—ä½™çš„æ–¹å¼ï¼ˆæ¯”å¦‚æ£€æŸ¥ç‚¹ï¼‰å®ç°å®¹é”™ï¼Œè€Œåªéœ€é€šè¿‡RDDçˆ¶å­ä¾èµ–ï¼ˆè¡€ç¼˜ï¼‰å…³ç³»é‡æ–°è®¡ç®—å¾—åˆ°ä¸¢å¤±çš„åˆ†åŒºæ¥å®ç°å®¹é”™ï¼Œæ— éœ€å›æ»šæ•´ä¸ªç³»ç»Ÿï¼Œè¿™æ ·å°±é¿å…äº†æ•°æ®å¤åˆ¶çš„é«˜å¼€é”€ï¼Œè€Œä¸”é‡ç®—è¿‡ç¨‹å¯ä»¥åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´å¹¶è¡Œè¿›è¡Œï¼Œå®ç°äº†é«˜æ•ˆçš„å®¹é”™ã€‚</li><li>RDDæä¾›çš„è½¬æ¢æ“ä½œéƒ½æ˜¯ä¸€äº›ç²—ç²’åº¦çš„æ“ä½œï¼ˆæ¯”å¦‚mapã€filterå’Œjoinï¼‰ï¼ŒRDDä¾èµ–å…³ç³»åªéœ€è¦è®°å½•è¿™ç§ç²—ç²’åº¦çš„è½¬æ¢æ“ä½œï¼Œè€Œä¸éœ€è¦è®°å½•å…·ä½“çš„æ•°æ®å’Œå„ç§ç»†ç²’åº¦æ“ä½œçš„æ—¥å¿—ï¼ˆæ¯”å¦‚å¯¹å“ªä¸ªæ•°æ®é¡¹è¿›è¡Œäº†ä¿®æ”¹ï¼‰ï¼Œè¿™å°±å¤§å¤§é™ä½äº†æ•°æ®å¯†é›†å‹åº”ç”¨ä¸­çš„å®¹é”™å¼€é”€ï¼›</li></ul><h4 id="ä¸­é—´ç»“æœæŒä¹…åŒ–åˆ°å†…å­˜ã€‚"><a href="#ä¸­é—´ç»“æœæŒä¹…åŒ–åˆ°å†…å­˜ã€‚" class="headerlink" title="ä¸­é—´ç»“æœæŒä¹…åŒ–åˆ°å†…å­˜ã€‚"></a>ä¸­é—´ç»“æœæŒä¹…åŒ–åˆ°å†…å­˜ã€‚</h4><ul><li>æ•°æ®åœ¨å†…å­˜ä¸­çš„å¤šä¸ªRDDæ“ä½œä¹‹é—´è¿›è¡Œä¼ é€’ï¼Œä¸éœ€è¦â€œè½åœ°â€åˆ°ç£ç›˜ä¸Šï¼Œé¿å…äº†ä¸å¿…è¦çš„è¯»å†™ç£ç›˜å¼€é”€ï¼›</li></ul><h4 id="å­˜æ”¾çš„æ•°æ®å¯ä»¥æ˜¯Javaå¯¹è±¡ï¼Œ"><a href="#å­˜æ”¾çš„æ•°æ®å¯ä»¥æ˜¯Javaå¯¹è±¡ï¼Œ" class="headerlink" title="å­˜æ”¾çš„æ•°æ®å¯ä»¥æ˜¯Javaå¯¹è±¡ï¼Œ"></a>å­˜æ”¾çš„æ•°æ®å¯ä»¥æ˜¯Javaå¯¹è±¡ï¼Œ</h4><ul><li>é¿å…äº†ä¸å¿…è¦çš„å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–å¼€é”€ã€‚</li></ul><h3 id="RDDé—´çš„ä¾èµ–å…³ç³»"><a href="#RDDé—´çš„ä¾èµ–å…³ç³»" class="headerlink" title="RDDé—´çš„ä¾èµ–å…³ç³»"></a>RDDé—´çš„ä¾èµ–å…³ç³»</h3><h4 id="çª„ä¾èµ–ï¼ˆNarrow-Dependencyï¼‰"><a href="#çª„ä¾èµ–ï¼ˆNarrow-Dependencyï¼‰" class="headerlink" title="çª„ä¾èµ–ï¼ˆNarrow Dependencyï¼‰"></a>çª„ä¾èµ–ï¼ˆNarrow Dependencyï¼‰</h4><ul><li>è¡¨ç°ä¸ºä¸€ä¸ªçˆ¶RDDçš„åˆ†åŒºå¯¹åº”äºä¸€ä¸ªå­RDDçš„åˆ†åŒºï¼Œæˆ–å¤šä¸ªçˆ¶RDDçš„åˆ†åŒºå¯¹åº”äºä¸€ä¸ªå­RDDçš„åˆ†åŒºï¼›</li><li>çª„ä¾èµ–å…¸å‹çš„æ“ä½œåŒ…æ‹¬mapã€filterã€unionç­‰</li><li>å¯¹äºçª„ä¾èµ–çš„RDDï¼Œå¯ä»¥ä»¥æµæ°´çº¿çš„æ–¹å¼è®¡ç®—æ‰€æœ‰çˆ¶åˆ†åŒºï¼Œä¸ä¼šé€ æˆç½‘ç»œä¹‹é—´çš„æ•°æ®æ··åˆã€‚</li></ul><h4 id="å®½ä¾èµ–ï¼ˆWide-Dependencyï¼‰"><a href="#å®½ä¾èµ–ï¼ˆWide-Dependencyï¼‰" class="headerlink" title="å®½ä¾èµ–ï¼ˆWide Dependencyï¼‰"></a>å®½ä¾èµ–ï¼ˆWide Dependencyï¼‰</h4><ul><li>è¡¨ç°ä¸ºå­˜åœ¨ä¸€ä¸ªçˆ¶RDDçš„ä¸€ä¸ªåˆ†åŒºå¯¹åº”ä¸€ä¸ªå­RDDçš„å¤šä¸ªåˆ†åŒº</li><li>å®½ä¾èµ–å…¸å‹çš„æ“ä½œåŒ…æ‹¬groupByKeyã€sortByKeyç­‰</li><li>å¯¹äºå®½ä¾èµ–çš„RDDï¼Œåˆ™é€šå¸¸ä¼´éšç€Shuffleæ“ä½œï¼Œå³é¦–å…ˆéœ€è¦è®¡ç®—å¥½æ‰€æœ‰çˆ¶åˆ†åŒºæ•°æ®ï¼Œç„¶ååœ¨èŠ‚ç‚¹ä¹‹é—´è¿›è¡ŒShuffleã€‚</li></ul><p><strong>æ¯”è¾ƒï¼š</strong></p><ul><li>ç›¸å¯¹è€Œè¨€ï¼Œåœ¨ä¸¤ç§ä¾èµ–å…³ç³»ä¸­ï¼Œçª„ä¾èµ–çš„å¤±è´¥æ¢å¤æ›´ä¸ºé«˜æ•ˆï¼Œå®ƒåªéœ€è¦æ ¹æ®çˆ¶RDDåˆ†åŒºé‡æ–°è®¡ç®—ä¸¢å¤±çš„åˆ†åŒºå³å¯ï¼ˆä¸éœ€è¦é‡æ–°è®¡ç®—æ‰€æœ‰åˆ†åŒºï¼‰ï¼Œè€Œä¸”å¯ä»¥å¹¶è¡Œåœ°åœ¨ä¸åŒèŠ‚ç‚¹è¿›è¡Œé‡æ–°è®¡ç®—ã€‚</li><li>è€Œå¯¹äºå®½ä¾èµ–è€Œè¨€ï¼Œå•ä¸ªèŠ‚ç‚¹å¤±æ•ˆé€šå¸¸æ„å‘³ç€é‡æ–°è®¡ç®—è¿‡ç¨‹ä¼šæ¶‰åŠå¤šä¸ªçˆ¶RDDåˆ†åŒºï¼Œå¼€é”€è¾ƒå¤§ã€‚</li><li>æ­¤å¤–ï¼ŒSparkè¿˜æä¾›äº†æ•°æ®æ£€æŸ¥ç‚¹å’Œè®°å½•æ—¥å¿—ï¼Œç”¨äºæŒä¹…åŒ–ä¸­é—´RDDï¼Œä»è€Œä½¿å¾—åœ¨è¿›è¡Œå¤±è´¥æ¢å¤æ—¶ä¸éœ€è¦è¿½æº¯åˆ°æœ€å¼€å§‹çš„é˜¶æ®µã€‚</li><li>åœ¨è¿›è¡Œæ•…éšœæ¢å¤æ—¶ï¼ŒSparkä¼šå¯¹æ•°æ®æ£€æŸ¥ç‚¹å¼€é”€å’Œé‡æ–°è®¡ç®—RDDåˆ†åŒºçš„å¼€é”€è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„æ¢å¤ç­–ç•¥ã€‚</li></ul><h3 id="é˜¶æ®µçš„åˆ’åˆ†"><a href="#é˜¶æ®µçš„åˆ’åˆ†" class="headerlink" title="é˜¶æ®µçš„åˆ’åˆ†"></a>é˜¶æ®µçš„åˆ’åˆ†</h3><ul><li>åœ¨DAGä¸­è¿›è¡Œåå‘è§£æï¼Œé‡åˆ°å®½ä¾èµ–å°±æ–­å¼€ï¼Œé‡åˆ°çª„ä¾èµ–å°±æŠŠå½“å‰çš„RDDåŠ å…¥åˆ°å½“å‰çš„é˜¶æ®µä¸­ï¼›å°†çª„ä¾èµ–å°½é‡åˆ’åˆ†åœ¨åŒä¸€ä¸ªé˜¶æ®µä¸­ï¼Œå¯ä»¥å®ç°æµæ°´çº¿è®¡ç®—ï¼ˆå…·ä½“çš„é˜¶æ®µåˆ’åˆ†ç®—æ³•è¯·å‚è§AMPå®éªŒå®¤å‘è¡¨çš„è®ºæ–‡ã€ŠResilient Distributed Datasets: A Fault-Tolerant Abstraction for In-Memory Cluster Computingã€‹ï¼‰</li></ul><h3 id="RDDè¿è¡Œè¿‡ç¨‹"><a href="#RDDè¿è¡Œè¿‡ç¨‹" class="headerlink" title="RDDè¿è¡Œè¿‡ç¨‹"></a>RDDè¿è¡Œè¿‡ç¨‹</h3><ol><li>åˆ›å»ºRDDå¯¹è±¡ï¼›</li><li>SparkContextè´Ÿè´£è®¡ç®—RDDä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ„å»ºDAGï¼›</li><li>DAGSchedulerè´Ÿè´£æŠŠDAGå›¾åˆ†è§£æˆå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µä¸­åŒ…å«äº†å¤šä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡ä¼šè¢«ä»»åŠ¡è°ƒåº¦å™¨åˆ†å‘ç»™å„ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰ä¸Šçš„Executorå»æ‰§è¡Œã€‚</li></ol><h2 id="SPARKçš„éƒ¨ç½²æ¨¡å¼"><a href="#SPARKçš„éƒ¨ç½²æ¨¡å¼" class="headerlink" title="SPARKçš„éƒ¨ç½²æ¨¡å¼"></a>SPARKçš„éƒ¨ç½²æ¨¡å¼</h2><h3 id="ä¸‰ç§éƒ¨ç½²æ¨¡å¼"><a href="#ä¸‰ç§éƒ¨ç½²æ¨¡å¼" class="headerlink" title="ä¸‰ç§éƒ¨ç½²æ¨¡å¼"></a>ä¸‰ç§éƒ¨ç½²æ¨¡å¼</h3><h4 id="standaloneæ¨¡å¼"><a href="#standaloneæ¨¡å¼" class="headerlink" title="standaloneæ¨¡å¼"></a>standaloneæ¨¡å¼</h4><ul><li>Sparkæ¡†æ¶æœ¬èº«ä¹Ÿè‡ªå¸¦äº†å®Œæ•´çš„èµ„æºè°ƒåº¦ç®¡ç†æœåŠ¡ï¼Œå¯ä»¥ç‹¬ç«‹éƒ¨ç½²åˆ°ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œè€Œä¸éœ€è¦ä¾èµ–å…¶ä»–ç³»ç»Ÿæ¥ä¸ºå…¶æä¾›èµ„æºç®¡ç†è°ƒåº¦æœåŠ¡ã€‚</li></ul><h4 id="Spark-on-Mesosæ¨¡å¼"><a href="#Spark-on-Mesosæ¨¡å¼" class="headerlink" title="Spark on Mesosæ¨¡å¼"></a>Spark on Mesosæ¨¡å¼</h4><ul><li>Sparkè¿è¡Œåœ¨Mesosä¸Šï¼Œè¦æ¯”è¿è¡Œåœ¨YARNä¸Šæ›´åŠ çµæ´»ã€è‡ªç„¶ã€‚ç›®å‰ï¼ŒSparkå®˜æ–¹æ¨èé‡‡ç”¨è¿™ç§æ¨¡å¼ï¼Œ</li></ul><h4 id="Spark-on-YARNæ¨¡å¼"><a href="#Spark-on-YARNæ¨¡å¼" class="headerlink" title="Spark on YARNæ¨¡å¼"></a>Spark on YARNæ¨¡å¼</h4><ul><li>Sparkå¯è¿è¡ŒäºYARNä¹‹ä¸Šï¼Œä¸Hadoopè¿›è¡Œç»Ÿä¸€éƒ¨ç½²ï¼Œå³â€œSpark on YARNâ€ï¼Œ</li></ul><h3 id="ä»â€œHadoop-Stormâ€æ¶æ„è½¬å‘Sparkæ¶æ„"><a href="#ä»â€œHadoop-Stormâ€æ¶æ„è½¬å‘Sparkæ¶æ„" class="headerlink" title="ä»â€œHadoop+Stormâ€æ¶æ„è½¬å‘Sparkæ¶æ„"></a>ä»â€œHadoop+Stormâ€æ¶æ„è½¬å‘Sparkæ¶æ„</h3><h4 id="é‡‡ç”¨â€œHadoop-Stormâ€éƒ¨ç½²æ–¹å¼çš„ä¸€ä¸ªæ¡ˆä¾‹"><a href="#é‡‡ç”¨â€œHadoop-Stormâ€éƒ¨ç½²æ–¹å¼çš„ä¸€ä¸ªæ¡ˆä¾‹" class="headerlink" title="é‡‡ç”¨â€œHadoop+Stormâ€éƒ¨ç½²æ–¹å¼çš„ä¸€ä¸ªæ¡ˆä¾‹"></a>é‡‡ç”¨â€œHadoop+Stormâ€éƒ¨ç½²æ–¹å¼çš„ä¸€ä¸ªæ¡ˆä¾‹</h4><p>â€‹                å¤§æ•°æ®å±‚<br>â€‹                    æ•°æ®å­˜å‚¨<br>â€‹                        HDFS<br>â€‹                        HBase<br>â€‹                        Cassandra<br>â€‹                    è°ƒåº¦å™¨<br>â€‹                        YARN<br>â€‹                        Mesos<br>â€‹                    å®æ—¶æŸ¥è¯¢<br>â€‹                        Redis<br>â€‹                        Solr<br>â€‹                        HBase<br>â€‹                    ç¦»çº¿åˆ†æ<br>â€‹                        Hive<br>â€‹                        Pig<br>â€‹                        Impala<br>â€‹                        MapReduce<br>â€‹                    ç”¨æˆ·è¡Œä¸ºå®æ—¶åˆ†æ<br>â€‹                        UV<br>â€‹                        PV<br>â€‹                    Stormå®æ—¶æµå¤„ç†<br>â€‹                        æ¬ºè¯ˆç›‘æ§<br>â€‹                        ç³»ç»ŸæŠ¥è­¦<br>â€‹                        ç‚¹å‡»æµæ¨è<br>â€‹                æ•°æ®æ”¶é›†<br>â€‹                    ä¸šåŠ¡æ•°æ®æ”¶é›†<br>â€‹                        Flume<br>â€‹                        Kafka<br>â€‹                        ETL<br>â€‹                    ç½‘ç«™æ•°æ®æ”¶é›†<br>â€‹                        Collector<br>â€‹                    ç”¨æˆ·è¡Œä¸ºæ•°æ®æ”¶é›†<br>â€‹                        PV/UV<br>â€‹                        ç‚¹å‡»æµä¿¡æ¯<br>â€‹                        å¯¼èˆªæ•°æ®æ”¶é›†<br>â€‹                ä¸šåŠ¡åº”ç”¨å±‚<br>â€‹                    åº”ç”¨æ•°æ®<br>â€‹                        å¯¼èˆªæ—¥å¿—<br>â€‹                        åº”ç”¨æ—¥å¿—<br>â€‹                    ç³»ç»Ÿæ•°æ®<br>â€‹                        ç³»ç»Ÿæ—¥å¿—<br>â€‹                        æŠ¥è­¦æ•°æ®<br>â€‹                ç¹çï¼</p><h4 id="Sparkæ¶æ„ä¼˜ç‚¹"><a href="#Sparkæ¶æ„ä¼˜ç‚¹" class="headerlink" title="Sparkæ¶æ„ä¼˜ç‚¹"></a>Sparkæ¶æ„ä¼˜ç‚¹</h4><ul><li>å®ç°ä¸€é”®å¼å®‰è£…å’Œé…ç½®ã€çº¿ç¨‹çº§åˆ«çš„ä»»åŠ¡ç›‘æ§å’Œå‘Šè­¦ï¼›</li><li>é™ä½ç¡¬ä»¶é›†ç¾¤ã€è½¯ä»¶ç»´æŠ¤ã€ä»»åŠ¡ç›‘æ§å’Œåº”ç”¨å¼€å‘çš„éš¾åº¦ï¼›</li><li>ä¾¿äºåšæˆç»Ÿä¸€çš„ç¡¬ä»¶ã€è®¡ç®—å¹³å°èµ„æºæ± ã€‚</li><li>Spark Streamingçš„åŸç†æ˜¯å°†æµæ•°æ®åˆ†è§£æˆä¸€ç³»åˆ—çŸ­å°çš„æ‰¹å¤„ç†ä½œä¸šï¼Œæ¯ä¸ªçŸ­å°çš„æ‰¹å¤„ç†ä½œä¸šä½¿ç”¨é¢å‘æ‰¹å¤„ç†çš„Spark Coreè¿›è¡Œå¤„ç†ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å˜ç›¸å®ç°æµè®¡ç®—ï¼Œè€Œä¸æ˜¯çœŸæ­£å®æ—¶çš„æµè®¡ç®—ï¼Œå› è€Œé€šå¸¸æ— æ³•å®ç°æ¯«ç§’çº§çš„å“åº”</li></ul><h4 id="Hadoopå’ŒSparkçš„ç»Ÿä¸€éƒ¨ç½²"><a href="#Hadoopå’ŒSparkçš„ç»Ÿä¸€éƒ¨ç½²" class="headerlink" title="Hadoopå’ŒSparkçš„ç»Ÿä¸€éƒ¨ç½²"></a>Hadoopå’ŒSparkçš„ç»Ÿä¸€éƒ¨ç½²</h4><ul><li>ä¸€æ–¹é¢ï¼Œç”±äºHadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€äº›ç»„ä»¶æ‰€å®ç°çš„åŠŸèƒ½ï¼Œç›®å‰è¿˜æ˜¯æ— æ³•ç”±Sparkå–ä»£çš„ï¼Œæ¯”å¦‚ï¼ŒStormå¯ä»¥å®ç°æ¯«ç§’çº§å“åº”çš„æµè®¡ç®—ï¼Œä½†æ˜¯ï¼ŒSparkåˆ™æ— æ³•åšåˆ°æ¯«ç§’çº§å“åº”ã€‚</li><li>å¦ä¸€æ–¹é¢ï¼Œä¼ä¸šä¸­å·²ç»æœ‰è®¸å¤šç°æœ‰çš„åº”ç”¨ï¼Œéƒ½æ˜¯åŸºäºç°æœ‰çš„Hadoopç»„ä»¶å¼€å‘çš„ï¼Œå®Œå…¨è½¬ç§»åˆ°Sparkä¸Šéœ€è¦ä¸€å®šçš„æˆæœ¬ã€‚</li><li>å®æ—¶è®¡ç®—å·¥å…·<ol><li>stormï¼š<a href="https://www.w3cschool.cn/apache_storm/" target="_blank" rel="noopener">https://www.w3cschool.cn/apache_storm/</a></li><li>flinkï¼š<a href="https://ci.apache.org/projects/flink/flink-docs-release-1.8/tutorials/local_setup.html" target="_blank" rel="noopener">https://ci.apache.org/projects/flink/flink-docs-release-1.8/tutorials/local_setup.html</a></li></ol></li></ul><h1 id="Sparkè¿›é˜¶"><a href="#Sparkè¿›é˜¶" class="headerlink" title="Sparkè¿›é˜¶"></a>Sparkè¿›é˜¶</h1><h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://study.163.com/course/courseMain.htm?courseId=1002887002" target="_blank" rel="noopener">å¤§æ•°æ®æŠ€æœ¯åŸç†ä¸åº”ç”¨</a></li><li><a href="https://study.163.com/course/courseMain.htm?courseId=1209408816" target="_blank" rel="noopener">SPARKç¼–ç¨‹æŒ‡å—-Python</a></li><li><a href="https://www.w3cschool.cn/spark/" target="_blank" rel="noopener">w3school</a></li><li><a href="http://dblab.xmu.edu.cn/blog/1709-2/" target="_blank" rel="noopener">å¦é—¨å¤§å­¦åšå®¢</a></li><li><a href="https://spark.apache.org/docs/latest/index.html" target="_blank" rel="noopener">SPARKå®˜ç½‘</a></li></ul><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹HDFS</title>
      <link href="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/"/>
      <url>/2019/11/27/shi-yong-gong-ju-zhi-hdfs/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/image-20210621151650243.png" alt="image-20210621151650243"></p><h1 id="HDFSåŸºç¡€"><a href="#HDFSåŸºç¡€" class="headerlink" title="HDFSåŸºç¡€"></a>HDFSåŸºç¡€</h1><h2 id="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</h2><ul><li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸæŠŠæ–‡ä»¶åˆ†å¸ƒå­˜å‚¨åœ¨å¤šä¸ªè®¡ç®—æœºèŠ‚ç‚¹ä¸Šï¼Œæˆåƒä¸Šä¸‡çš„è®¡ç®—æœºèŠ‚ç‚¹æ„æˆè®¡ç®—æœºé›†ç¾¤</li></ul><h2 id="HDFSç®€ä»‹ä¸ç›¸å…³æ¦‚å¿µ"><a href="#HDFSç®€ä»‹ä¸ç›¸å…³æ¦‚å¿µ" class="headerlink" title="HDFSç®€ä»‹ä¸ç›¸å…³æ¦‚å¿µ"></a>HDFSç®€ä»‹ä¸ç›¸å…³æ¦‚å¿µ</h2><h3 id="HDFSç®€ä»‹"><a href="#HDFSç®€ä»‹" class="headerlink" title="HDFSç®€ä»‹"></a>HDFSç®€ä»‹</h3><h4 id="å®ç°ç›®æ ‡ï¼š"><a href="#å®ç°ç›®æ ‡ï¼š" class="headerlink" title="å®ç°ç›®æ ‡ï¼š"></a>å®ç°ç›®æ ‡ï¼š</h4><ul><li>å…¼å®¹å»‰ä»·çš„ç¡¬ä»¶è®¾å¤‡</li><li>æµæ•°æ®è¯»å†™</li><li>å¤§æ•°æ®é›†</li><li>ç®€å•çš„æ–‡ä»¶æ¨¡å‹</li><li>å¼ºå¤§çš„è·¨å¹³å°å…¼å®¹æ€§</li></ul><h4 id="å±€é™"><a href="#å±€é™" class="headerlink" title="å±€é™"></a>å±€é™</h4><ul><li>ä¸é€‚åˆä½å»¶è¿Ÿæ•°æ®è®¿é—®</li><li>æ— æ³•é«˜æ•ˆå­˜å‚¨å¤§é‡å°æ–‡ä»¶</li><li>ä¸æ”¯æŒå¤šç”¨æˆ·å†™å…¥åŠä»»æ„ä¿®æ”¹æ–‡ä»¶</li></ul><h3 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h3><h4 id="å—"><a href="#å—" class="headerlink" title="å—"></a>å—</h4><ul><li>HDFSé»˜è®¤ä¸€ä¸ªå—64MBï¼Œä¸€ä¸ªæ–‡ä»¶è¢«åˆ†æˆå¤šä¸ªå—ï¼Œä»¥å—ä¸ºå­˜å‚¨å•ä½</li><li>å—çš„å¤§å°è¿œè¿œå¤§äºæ™®é€šæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æœ€å°åŒ–å¯»å€å¼€é”€</li><li>å—å¸¦æ¥çš„å¥½å¤„ï¼š<ol><li>æ”¯æŒå¤§è§„æ¨¡æ–‡ä»¶å­˜å‚¨ï¼šä¸€ä¸ªå¤§è§„æ¨¡æ–‡ä»¶å¯ä»¥åˆ†æˆè‹¥å¹²ä¸ªå—ï¼Œä¸åŒçš„å—åˆ†å‘åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Š</li><li>ç®€åŒ–ç³»ç»Ÿè®¾è®¡ï¼šå¤§å¤§ç®€åŒ–äº†å­˜å‚¨ç®¡ç†ä»¥åŠæ–¹ä¾¿äº†å…ƒæ•°æ®çš„ç®¡ç†ï¼Œå…ƒæ•°æ®ç®¡ç†å¯ä»¥ç”±å…¶ä»–ç³»ç»Ÿè´Ÿè´£</li><li>é€‚åˆæ•°æ®å¤‡ä»½ï¼šé‡‡ç”¨å†—ä½™å­˜å‚¨åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œæé«˜å®¹é”™æ€§å’Œå¯ç”¨æ€§</li></ol></li></ul><h4 id="NameNode"><a href="#NameNode" class="headerlink" title="NameNode"></a>NameNode</h4><h5 id="åŠŸèƒ½ï¼š"><a href="#åŠŸèƒ½ï¼š" class="headerlink" title="åŠŸèƒ½ï¼š"></a>åŠŸèƒ½ï¼š</h5><ul><li>å­˜å‚¨å…ƒæ•°æ®</li><li>å…ƒæ•°æ®ä¿å­˜åˆ°å†…å­˜ä¸­</li><li>ä¿å­˜æ–‡ä»¶ï¼Œblockï¼ŒDataNodeä¹‹é—´çš„æ˜ å°„å…³ç³»</li></ul><h5 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h5><p><img src="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/namenode_architecture.png" alt="å›¾ï¼šDataNodeæ•°æ®ç»“æ„"></p><ul><li>FsImageï¼šç»´æŠ¤ç³»ç»Ÿæ–‡ä»¶æ ‘ä»¥åŠæ‰€æœ‰å…ƒæ•°æ®ï¼ŒåŒ…å«æ–‡ä»¶çš„å¤åˆ¶ç­‰çº§ã€ä¿®æ”¹ã€è®¿é—®æ—¶é—´ã€è®¿é—®æƒé™ã€å—å¤§å°ä»¥åŠç»„æˆæ–‡ä»¶çš„å—ï¼Œç›®å½•çš„å­˜å‚¨ä¿®æ”¹æ—¶é—´ã€æƒé™å’Œé…é¢ã€‚æ²¡æœ‰è®°å½•å—å­˜å‚¨åœ¨å“ªä¸ªDataNodeï¼Œè€Œæ˜¯å­˜å‚¨æ˜ å°„å…³ç³»åˆ°å†…å­˜ã€‚æ¯æ¬¡å¢åŠ DataNodeåˆ°é›†ç¾¤æ—¶ï¼ŒDataNodeéƒ½ä¼šæŠŠè‡ªå·±åŒ…å«çš„å—åˆ—è¡¨å‘ŠçŸ¥NameNodeï¼Œç¡®ä¿æ˜ å°„æ˜¯æœ€æ–°</li><li>EditLogï¼šè®°å½•åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åç­‰æ“ä½œ</li></ul><h5 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h5><ul><li>å¯åŠ¨çš„æ—¶å€™ï¼Œå°†FsImageæ–‡ä»¶ä¸­çš„å†…å®¹åŠ è½½åˆ°å†…å­˜ï¼Œå†æ‰§è¡ŒEditLogä¸­çš„å„é¡¹æ“ä½œï¼Œä½¿å¾—å†…å­˜ä¸­çš„å…ƒæ•°æ®å’Œå®é™…çš„åŒæ­¥</li><li>ä¸€æ—¦å†…å­˜ä¸­æˆåŠŸå»ºç«‹æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„æ˜ å°„ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„FsImageå’Œä¸€ä¸ª<strong>ç©ºçš„</strong>EditLog</li><li>æ¯æ¬¡æ‰§è¡Œå†™æ“ä½œä¹‹åï¼Œä¸”åœ¨å‘å®¢æˆ·ç«¯å‘é€ä»£ç ä¹‹å‰ï¼ŒEditLogéƒ½éœ€è¦åŒæ­¥æ›´æ–°</li><li>å› ä¸ºFsImageæ–‡ä»¶ä¸€èˆ¬å¾ˆå¤§ï¼ˆGBå¸¸è§ï¼‰ï¼Œå¦‚æœæ‰€æœ‰çš„æ›´æ–°æ“ä½œéƒ½å¾€é‡ŒåŠ ï¼Œåˆ™ä¼šå¯¼è‡´ç³»ç»Ÿå˜æ…¢ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªä¸æ–­æ›´æ–°çš„EditLog</li><li>ä½†æ˜¯éšç€å¯¹æ–‡ä»¶ä¸æ–­çš„æ›´æ–°ï¼ŒEditLogä¹Ÿä¼šä¸æ–­çš„å¢å¤§ï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ<strong><em>ä½¿ç”¨SecondaryNameNode</em></strong>ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š</li></ul><p><img src="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/editlog.png" alt="å›¾ï¼šEditLogè§£å†³"></p><h5 id="å†…å­˜å…¨æ™¯"><a href="#å†…å­˜å…¨æ™¯" class="headerlink" title="å†…å­˜å…¨æ™¯"></a>å†…å­˜å…¨æ™¯</h5><p><img src="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/namenode_memory.png" alt="å›¾ï¼šDataNodeå†…å­˜å…¨æ™¯"></p><ul><li>å‚è€ƒ<a href="https://tech.meituan.com/2016/08/26/namenode.html" target="_blank" rel="noopener">HDFS NameNodeå†…å­˜å…¨æ™¯</a></li></ul><h4 id="DatanNodeï¼ˆå»‰ä»·æœºå™¨ï¼‰"><a href="#DatanNodeï¼ˆå»‰ä»·æœºå™¨ï¼‰" class="headerlink" title="DatanNodeï¼ˆå»‰ä»·æœºå™¨ï¼‰"></a>DatanNodeï¼ˆå»‰ä»·æœºå™¨ï¼‰</h4><h5 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h5><ul><li>å­˜å‚¨æ–‡ä»¶å†…å®¹</li><li>æ–‡ä»¶å†…å®¹ä¿å­˜åˆ°ç£ç›˜</li><li>ç»´æŠ¤block idåˆ°DataNodeæœ¬åœ°æ–‡ä»¶çš„æ˜ å°„å…³ç³»</li></ul><h2 id="HDFSç»“æ„"><a href="#HDFSç»“æ„" class="headerlink" title="HDFSç»“æ„"></a>HDFSç»“æ„</h2><p><img src="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/hdfs_architecture.png" alt="å›¾ï¼šhdfsç»“æ„"></p><h3 id="HDFSå‘½åç©ºé—´ç®¡ç†"><a href="#HDFSå‘½åç©ºé—´ç®¡ç†" class="headerlink" title="HDFSå‘½åç©ºé—´ç®¡ç†"></a>HDFSå‘½åç©ºé—´ç®¡ç†</h3><ul><li>å‘½åç©ºé—´åŒ…å«ç›®å½•ã€æ–‡ä»¶å’Œå—</li><li>ä½¿ç”¨çš„æ˜¯ä¼ ç»Ÿçš„åˆ†çº§æ–‡ä»¶ä½“ç³»</li></ul><h3 id="é€šä¿¡åè®®"><a href="#é€šä¿¡åè®®" class="headerlink" title="é€šä¿¡åè®®"></a>é€šä¿¡åè®®</h3><ul><li>åœ¨TCP/TPåè®®ä¹‹ä¸Š</li><li>å®¢æˆ·ç«¯é€šè¿‡ä¸€ä¸ªå¯é…ç½®çš„ç«¯å£å‘NameNodeä¸»åŠ¨å‘èµ·TCPè¿æ¥ï¼Œå¹¶ä½¿ç”¨<strong>å®¢æˆ·ç«¯åè®®</strong>ä¸NameNodeè¿›è¡Œäº¤äº’</li><li>NameNodeä¸DataNodeä¹‹é—´ä½¿ç”¨<strong>æ•°æ®èŠ‚ç‚¹åè®®</strong>äº¤äº’</li><li>å®¢æˆ·ç«¯ä¸DataNodeä½¿ç”¨RPCï¼ˆremote procedure callï¼‰å®ç°</li></ul><h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><ul><li>HDFSåœ¨éƒ¨ç½²æ—¶æä¾›äº†å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯æ˜¯ä¸€ä¸ªåº“ï¼Œæš´éœ²HDFSæ–‡ä»¶ç³»ç»Ÿæ¥å£</li><li>å®¢æˆ·ç«¯æ”¯æŒæ‰“å¼€ã€è¯»å–ã€å†™å…¥ç­‰å¸¸è§æ“ä½œï¼Œæä¾›ç±»shellçš„å‘½ä»¤è¡Œè®¿é—®æ•°æ®</li></ul><h3 id="HDFS-1-0-å±€é™æ€§"><a href="#HDFS-1-0-å±€é™æ€§" class="headerlink" title="HDFS-1.0-å±€é™æ€§"></a>HDFS-1.0-å±€é™æ€§</h3><ul><li>å‘½åç©ºé—´çš„é™åˆ¶ï¼šNameNodeä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå—åˆ°å†…å­˜ç©ºé—´å¤§å°é™åˆ¶</li><li>æ€§èƒ½çš„ç“¶é¢ˆï¼šå—é™å•ä¸ªNameNodeçš„ååé‡</li><li>éš”ç¦»é—®é¢˜ï¼šé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªNameNodeï¼Œåªæœ‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œå› æ­¤æ²¡æ³•å¯¹ä¸åŒç¨‹åºè¿›è¡Œéš”ç¦»</li><li>é›†ç¾¤çš„å¯ç”¨æ€§ï¼šä¸€æ—¦å”¯ä¸€çš„NameNodeå‘ç”Ÿæ•…éšœï¼Œåˆ™å¯¼è‡´æ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨</li></ul><h2 id="HDFSå­˜å‚¨åŸç†"><a href="#HDFSå­˜å‚¨åŸç†" class="headerlink" title="HDFSå­˜å‚¨åŸç†"></a>HDFSå­˜å‚¨åŸç†</h2><h3 id="å†—ä½™æ•°æ®ä¿å­˜"><a href="#å†—ä½™æ•°æ®ä¿å­˜" class="headerlink" title="å†—ä½™æ•°æ®ä¿å­˜"></a>å†—ä½™æ•°æ®ä¿å­˜</h3><ul><li>å¤šå‰¯æœ¬å¯¹æ•°æ®è¿›è¡Œå†—ä½™ä¿å­˜ï¼Œä¸€èˆ¬é»˜è®¤å†—ä½™ä¿å­˜3ä»½</li><li>ä¼˜ç‚¹<ol><li>åŠ å¿«æ•°æ®ä¼ è¾“é€Ÿåº¦</li><li>å®¹æ˜“æ£€æŸ¥æ•°æ®é”™è¯¯</li><li>ä¿è¯æ•°æ®å¯é æ€§</li></ol></li></ul><h3 id="æ•°æ®å­˜å–ç­–ç•¥"><a href="#æ•°æ®å­˜å–ç­–ç•¥" class="headerlink" title="æ•°æ®å­˜å–ç­–ç•¥"></a>æ•°æ®å­˜å–ç­–ç•¥</h3><h4 id="æ•°æ®å­˜æ”¾"><a href="#æ•°æ®å­˜æ”¾" class="headerlink" title="æ•°æ®å­˜æ”¾"></a>æ•°æ®å­˜æ”¾</h4><ul><li>ç¬¬ä¸€ä¸ªå‰¯æœ¬ï¼šæ”¾ç½®åœ¨ä¸Šä¼ æ–‡ä»¶çš„æ•°æ®èŠ‚ç‚¹ï¼›å¦‚æœåœ¨é›†ç¾¤å¤–æäº¤ï¼Œåˆ™éšæœºæŒ‘é€‰æœºå™¨å­˜æ”¾</li><li>ç¬¬äºŒä¸ªå‰¯æœ¬ï¼šæ”¾ç½®åœ¨ä¸ç¬¬ä¸€ä¸ªå‰¯æœ¬<strong>ä¸åŒçš„æœºæ¶</strong>ï¼ˆrackï¼‰çš„èŠ‚ç‚¹ä¸Š</li><li>ç¬¬ä¸‰ä¸ªå‰¯æœ¬ï¼šä¸ç¬¬ä¸€ä¸ªå‰¯æœ¬<strong>ç›¸åŒæœºæ¶</strong>çš„ä¸åŒèŠ‚ç‚¹ä¸Š</li></ul><h4 id="æ•°æ®è¯»å–"><a href="#æ•°æ®è¯»å–" class="headerlink" title="æ•°æ®è¯»å–"></a>æ•°æ®è¯»å–</h4><ul><li>å½“å®¢æˆ·ç«¯è¯»å–æ•°æ®æ—¶ï¼Œä»NameNodeè·å¾—æ•°æ®å—ä¸åŒå‰¯æœ¬çš„å­˜æ”¾ä½ç½®åˆ—è¡¨ï¼Œé€šè¿‡APIæ¥è·å–è¿™äº›å­˜æ”¾ä½ç½®çš„æœºæ¶IDä¸å®¢æˆ·ç«¯å¯¹åº”æœºæ¶IDï¼Œå¦‚æœIDç›¸åŒï¼Œåˆ™ä¼˜å…ˆé€‰æ‹©è¯¥å‰¯æœ¬ï¼Œåä¹‹éšæœºè¯»å–</li></ul><h3 id="æ•°æ®é”™è¯¯ä¸æ¢å¤"><a href="#æ•°æ®é”™è¯¯ä¸æ¢å¤" class="headerlink" title="æ•°æ®é”™è¯¯ä¸æ¢å¤"></a>æ•°æ®é”™è¯¯ä¸æ¢å¤</h3><h4 id="NameNodeå‡ºé”™"><a href="#NameNodeå‡ºé”™" class="headerlink" title="NameNodeå‡ºé”™"></a>NameNodeå‡ºé”™</h4><ul><li>ä½¿ç”¨SecondaryNameNodeè¿›è¡Œæ•°æ®æ¢å¤</li></ul><h4 id="DataNodeå‡ºé”™"><a href="#DataNodeå‡ºé”™" class="headerlink" title="DataNodeå‡ºé”™"></a>DataNodeå‡ºé”™</h4><ul><li>å¿ƒè·³æœºåˆ¶ï¼šæ¯ä¸ªDataNodeä¼šå®šæœŸå‘NameNodeå‘é€å¿ƒè·³ä¿¡æ¯</li><li>å½“DataNodeå‡ºé”™æ—¶ï¼ŒNameNodeæ”¶ä¸åˆ°å¿ƒè·³ï¼Œåˆ™ä¼šå°†ä»–ä»¬æ ‡è®°ä¸ºâ€œå®•æœºâ€ï¼Œå…¶èŠ‚ç‚¹ä¸Šæ‰€æœ‰æ•°æ®æ ‡è®°ä¸ºâ€œä¸å¯è¯»â€ï¼Œä¹Ÿä¸ä¼šå†ç»™ä»–ä»¬å‘é€ä»»ä½•IOè¯·æ±‚</li><li>NameNodeè¿˜ä¼šæ£€æŸ¥ï¼Œå½“æŸä¸ªæ•°æ®åº“çš„å‰¯æœ¬æ•°é‡å°äºå†—ä½™å› å­ï¼Œå°±ä¼šå¯åŠ¨<strong>æ•°æ®å†—ä½™å¤åˆ¶</strong>ï¼Œäº§ç”Ÿæ–°å‰¯æœ¬</li></ul><h4 id="æ•°æ®å‡ºé”™"><a href="#æ•°æ®å‡ºé”™" class="headerlink" title="æ•°æ®å‡ºé”™"></a>æ•°æ®å‡ºé”™</h4><ul><li>ç½‘ç»œä¼ è¾“å’Œç£ç›˜é”™è¯¯ç­‰å› ç´ ï¼Œä¼šé€ æˆæ•°æ®é”™è¯¯</li><li>å½“æ–‡ä»¶æœ¬åˆ›å»ºæ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå¯¹æ¯ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œä¿¡æ¯æ‘˜å½•ï¼Œå¹¶å†™å…¥åˆ°åŒä¸€è·¯å¾„çš„éšè—æ–‡ä»¶ä¸­</li><li>å½“å®¢æˆ·ç«¯è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šå…ˆè¯»å–ä¿¡æ¯æ‘˜å½•æ–‡ä»¶ï¼Œç„¶åå¯¹è¯»å–çš„æ•°æ®å—è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ£€éªŒå‡ºé”™ï¼Œå®¢æˆ·ç«¯åˆ™ä¼š<strong>è¯·æ±‚åˆ°å¦å¤–ä¸€ä¸ªDataNodeè¯»å–æ–‡ä»¶å—</strong>ï¼Œå¹¶å‘NameNodeæŠ¥å‘Šè¿™ä¸ªæ–‡ä»¶å—æœ‰é”™è¯¯ï¼Œç„¶åNameNodeä¼šé‡æ–°å¤åˆ¶è¿™ä¸ªå—</li></ul><h2 id="HDFSæ•°æ®è¯»å†™è¿‡ç¨‹"><a href="#HDFSæ•°æ®è¯»å†™è¿‡ç¨‹" class="headerlink" title="HDFSæ•°æ®è¯»å†™è¿‡ç¨‹"></a>HDFSæ•°æ®è¯»å†™è¿‡ç¨‹</h2><h3 id="è¯»è¿‡ç¨‹-JAVA"><a href="#è¯»è¿‡ç¨‹-JAVA" class="headerlink" title="è¯»è¿‡ç¨‹-JAVA"></a>è¯»è¿‡ç¨‹-JAVA</h3><ul><li>JAVAè¯»è¿‡ç¨‹</li></ul><p><img src="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/java_read_hdfs.png" alt="å›¾ï¼šJAVAè¯»HDFSè¿‡ç¨‹"></p><h3 id="å†™è¿‡ç¨‹-JAVA"><a href="#å†™è¿‡ç¨‹-JAVA" class="headerlink" title="å†™è¿‡ç¨‹-JAVA"></a>å†™è¿‡ç¨‹-JAVA</h3><ul><li>JAVAå†™è¿‡ç¨‹</li></ul><p><img src="/2019/11/27/shi-yong-gong-ju-zhi-hdfs/java_write_hdfs.png" alt="å›¾ï¼šJAVAå†™HDFSè¿‡ç¨‹"></p><h1 id="HDFSè¿›é˜¶"><a href="#HDFSè¿›é˜¶" class="headerlink" title="HDFSè¿›é˜¶"></a>HDFSè¿›é˜¶</h1><h2 id="HDFSç¼–ç¨‹å®è·µ"><a href="#HDFSç¼–ç¨‹å®è·µ" class="headerlink" title="HDFSç¼–ç¨‹å®è·µ"></a>HDFSç¼–ç¨‹å®è·µ</h2><ul><li><a href="http://dblab.xmu.edu.cn/blog/290-2/" target="_blank" rel="noopener">ç¼–ç¨‹å®è·µ</a></li></ul><h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://study.163.com/course/courseMain.htm?courseId=1002887002" target="_blank" rel="noopener">å¤§æ•°æ®æŠ€æœ¯åŸç†ä¸åº”ç”¨</a></li></ul><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HDFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—å¹¿å‘Šä¹‹ç†è®º</title>
      <link href="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/"/>
      <url>/2019/11/22/ji-suan-guang-gao-zhi-li-lun/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/image-20210621160249789.png" alt="image-20210621160249789"></p><h1 id="å¹¿å‘Šçš„åŸºæœ¬çŸ¥è¯†"><a href="#å¹¿å‘Šçš„åŸºæœ¬çŸ¥è¯†" class="headerlink" title="å¹¿å‘Šçš„åŸºæœ¬çŸ¥è¯†"></a>å¹¿å‘Šçš„åŸºæœ¬çŸ¥è¯†</h1><h2 id="å¹¿å‘Šçš„ç›®çš„"><a href="#å¹¿å‘Šçš„ç›®çš„" class="headerlink" title="å¹¿å‘Šçš„ç›®çš„"></a>å¹¿å‘Šçš„ç›®çš„</h2><h3 id="ä»€ä¹ˆæ˜¯å¹¿å‘Šï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¹¿å‘Šï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹¿å‘Šï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¹¿å‘Šï¼Ÿ</h3><h4 id="å¹¿å‘Šçš„å®šä¹‰"><a href="#å¹¿å‘Šçš„å®šä¹‰" class="headerlink" title="å¹¿å‘Šçš„å®šä¹‰"></a>å¹¿å‘Šçš„å®šä¹‰</h4><ul><li>å¹¿å‘Šæ˜¯ç”±å·²ç¡®å®šçš„å‡ºèµ„äººé€šè¿‡å„ç§åª’ä»‹è¿›è¡Œçš„æœ‰å…³äº§å“çš„ã€é€šå¸¸æœ‰å¿ã€æœ‰ç»„ç»‡ã€ç»¼åˆçš„ã€åŠæœæ€§çš„éäººå‘˜ä¿¡æ¯ä¼ æ’­æ´»åŠ¨ã€‚</li></ul><h4 id="å¹¿å‘Šçš„ä¸»ä½“"><a href="#å¹¿å‘Šçš„ä¸»ä½“" class="headerlink" title="å¹¿å‘Šçš„ä¸»ä½“"></a>å¹¿å‘Šçš„ä¸»ä½“</h4><ul><li>å‡ºèµ„äººï¼šå¹¿å‘Šä¸»</li><li>åª’ä»‹</li><li>å—ä¼—</li></ul><h4 id="å¹¿å‘Šçš„æœ¬è´¨åŠŸèƒ½"><a href="#å¹¿å‘Šçš„æœ¬è´¨åŠŸèƒ½" class="headerlink" title="å¹¿å‘Šçš„æœ¬è´¨åŠŸèƒ½"></a>å¹¿å‘Šçš„æœ¬è´¨åŠŸèƒ½</h4><ul><li>å€ŸåŠ©åª’ä»‹çš„åŠ›é‡ï¼Œå®Œæˆè¾ƒä½æˆæœ¬çš„ç”¨æˆ·æ¥è§¦</li></ul><h2 id="å¹¿å‘Šçš„æœ‰æ•ˆæ€§æ¨¡å‹"><a href="#å¹¿å‘Šçš„æœ‰æ•ˆæ€§æ¨¡å‹" class="headerlink" title="å¹¿å‘Šçš„æœ‰æ•ˆæ€§æ¨¡å‹"></a>å¹¿å‘Šçš„æœ‰æ•ˆæ€§æ¨¡å‹</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/guanggaoyouxiaoxing.png" alt="å›¾ï¼šå¹¿å‘Šæœ‰æ•ˆæ€§æ¨¡å‹"></p><h2 id="å¹¿å‘Šä¸è¥é”€çš„åŒºåˆ«"><a href="#å¹¿å‘Šä¸è¥é”€çš„åŒºåˆ«" class="headerlink" title="å¹¿å‘Šä¸è¥é”€çš„åŒºåˆ«"></a>å¹¿å‘Šä¸è¥é”€çš„åŒºåˆ«</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/guanggaoyuxiaoshoudifferent.png" alt="å›¾ï¼šå¹¿å‘Šä¸é”€å”®åŒºåˆ«"></p><h2 id="åœ¨çº¿å¹¿å‘Šçš„ç‰¹ç‚¹"><a href="#åœ¨çº¿å¹¿å‘Šçš„ç‰¹ç‚¹" class="headerlink" title="åœ¨çº¿å¹¿å‘Šçš„ç‰¹ç‚¹"></a>åœ¨çº¿å¹¿å‘Šçš„ç‰¹ç‚¹</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/zaixianguanggaodutexing.png" alt="å›¾ï¼šåœ¨çº¿å¹¿å‘Šç‹¬ç‰¹æ€§"></p><h2 id="åœ¨çº¿å¹¿å‘Šå¸‚åœº"><a href="#åœ¨çº¿å¹¿å‘Šå¸‚åœº" class="headerlink" title="åœ¨çº¿å¹¿å‘Šå¸‚åœº"></a>åœ¨çº¿å¹¿å‘Šå¸‚åœº</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/ads_online.png" alt="å›¾ï¼šåœ¨çº¿å¹¿å‘Šç»“æ„"></p><p><strong>åª’ä½“ä¸‰ç§å˜ç°æ–¹å¼ï¼š</strong></p><ol><li>ç›´æ¥ç»™å¹¿å‘Šç½‘ç»œ</li><li>é€šè¿‡ADX</li><li>é€šè¿‡SSP</li></ol><ul><li>éœ€æ±‚æ–¹ï¼šå¹¿å‘Šä¸»ç­‰ç­‰</li><li>ä¾›ç»™æ–¹ï¼šåª’ä½“ç­‰ç­‰</li></ul><h2 id="è®¡ç®—å¹¿å‘Šæ ¸å¿ƒé—®é¢˜å’ŒæŒ‘æˆ˜"><a href="#è®¡ç®—å¹¿å‘Šæ ¸å¿ƒé—®é¢˜å’ŒæŒ‘æˆ˜" class="headerlink" title="è®¡ç®—å¹¿å‘Šæ ¸å¿ƒé—®é¢˜å’ŒæŒ‘æˆ˜"></a>è®¡ç®—å¹¿å‘Šæ ¸å¿ƒé—®é¢˜å’ŒæŒ‘æˆ˜</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/tiaozhan.png" alt="å›¾ï¼šæ ¸å¿ƒè®¡ç®—é—®é¢˜"></p><p><strong>æŒ‘æˆ˜ï¼š</strong></p><ul><li>å¤§è§„æ¨¡ï¼šç”¨æˆ·é‡å¤§ï¼Œé«˜å¹¶å‘åœ¨çº¿æŠ•æ”¾ç³»ç»Ÿ</li><li>åŠ¨æ€æ€§ï¼šç”¨æˆ·çš„å…´è¶£éšæ—¶å˜åŒ–</li><li>ä¸°å¯Œçš„æŸ¥è¯¢ä¿¡æ¯ï¼šéœ€è¦æŠŠç”¨æˆ·å’Œä¸Šä¸‹æ–‡çš„å¤šæ ·ä¿¡å·ä¸€èµ·ç»¼åˆ</li><li>æ¢ç´¢ä¸å‘ç°ï¼šéœ€è¦ä¸»åŠ¨æ¢ç´¢æœªçŸ¥çš„æ•°æ®ï¼Œä¾‹å¦‚ç”¨æˆ·çš„å…¶ä»–æœªå±•ç¤ºä¿¡æ¯</li></ul><h2 id="å¹¿å‘Šã€æœç´¢å’Œæ¨èçš„æ¯”è¾ƒ"><a href="#å¹¿å‘Šã€æœç´¢å’Œæ¨èçš„æ¯”è¾ƒ" class="headerlink" title="å¹¿å‘Šã€æœç´¢å’Œæ¨èçš„æ¯”è¾ƒ"></a>å¹¿å‘Šã€æœç´¢å’Œæ¨èçš„æ¯”è¾ƒ</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/qubie.png" alt="å›¾ï¼šåŒºåˆ«"></p><h2 id="æŠ•èµ„å›æŠ¥ï¼ˆROIï¼‰åˆ†æ"><a href="#æŠ•èµ„å›æŠ¥ï¼ˆROIï¼‰åˆ†æ" class="headerlink" title="æŠ•èµ„å›æŠ¥ï¼ˆROIï¼‰åˆ†æ"></a>æŠ•èµ„å›æŠ¥ï¼ˆROIï¼‰åˆ†æ</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/roi.png" alt="å›¾ï¼šROI"></p><p><strong>å‚æ•°è§£é‡Šï¼š</strong></p><ol><li><p>$a_i$ï¼šå¹¿å‘Š</p></li><li><p>$u_i$ï¼šç”¨æˆ·</p></li><li>$c_i$ï¼šä¸Šä¸‹æ–‡</li></ol><h2 id="åœ¨çº¿å¹¿å‘Šç³»ç»Ÿç»“æ„"><a href="#åœ¨çº¿å¹¿å‘Šç³»ç»Ÿç»“æ„" class="headerlink" title="åœ¨çº¿å¹¿å‘Šç³»ç»Ÿç»“æ„"></a>åœ¨çº¿å¹¿å‘Šç³»ç»Ÿç»“æ„</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/ads_system.png" alt="å›¾ï¼šåœ¨çº¿å¹¿å‘Šç³»ç»Ÿç»“æ„"></p><h1 id="åˆçº¦å¹¿å‘Šç³»ç»Ÿ"><a href="#åˆçº¦å¹¿å‘Šç³»ç»Ÿ" class="headerlink" title="åˆçº¦å¹¿å‘Šç³»ç»Ÿ"></a>åˆçº¦å¹¿å‘Šç³»ç»Ÿ</h1><h2 id="å¸¸ç”¨å¹¿å‘Šç³»ç»Ÿå¼€æºå·¥å…·"><a href="#å¸¸ç”¨å¹¿å‘Šç³»ç»Ÿå¼€æºå·¥å…·" class="headerlink" title="å¸¸ç”¨å¹¿å‘Šç³»ç»Ÿå¼€æºå·¥å…·"></a>å¸¸ç”¨å¹¿å‘Šç³»ç»Ÿå¼€æºå·¥å…·</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/tool.png" alt="å›¾ï¼šå¼€æºå·¥å…·"></p><ul><li>GFS</li><li>Thrift</li></ul><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/thrift.png" alt="å›¾ï¼šthriftå·¥å…·"></p><ul><li>Storm</li><li>Scribe</li><li>Flume</li><li>Chubby</li><li>Hadoop</li><li>HDFS</li><li>MapReduce</li><li>Avro</li><li>Chuhwa</li><li>ZooKeeper</li><li>HBase</li><li>Oozie</li><li>Pig</li><li>Hive</li><li>BigTable</li><li>HYPERTABLE</li><li>Cassandra</li><li>mahout</li><li>Elephant-bird</li></ul><h2 id="åˆçº¦å¹¿å‘Šç®€ä»‹"><a href="#åˆçº¦å¹¿å‘Šç®€ä»‹" class="headerlink" title="åˆçº¦å¹¿å‘Šç®€ä»‹"></a>åˆçº¦å¹¿å‘Šç®€ä»‹</h2><h3 id="ç›´æ¥åª’ä½“è´­ä¹°"><a href="#ç›´æ¥åª’ä½“è´­ä¹°" class="headerlink" title="ç›´æ¥åª’ä½“è´­ä¹°"></a>ç›´æ¥åª’ä½“è´­ä¹°</h3><ul><li>ä¾›ç»™æ–¹ï¼šå¹¿å‘Šæ’æœŸç³»ç»Ÿï¼Œå¸®åŠ©åª’ä½“è‡ªåŠ¨æ‰§è¡Œå¤šä¸ªåˆåŒçš„æ’æœŸï¼Œä¸æä¾›å—ä¼—å®šå‘</li><li>éœ€æ±‚æ–¹ï¼šä»£ç†å•†ï¼Œå¸®åŠ©å¹¿å‘Šå•†ç­–åˆ’å’Œæ‰§è¡Œæ’æœŸï¼Œç”¨ç»éªŒå’Œäººå·¥æ»¡è¶³å¹¿å‘Šå•†çš„è´¨é‡éœ€æ±‚</li><li>ä»£è¡¨ï¼š4Aå…¬å¸</li></ul><h3 id="æ‹…ä¿å¼æŠ•é€ä¸å¹¿å‘ŠæŠ•æ”¾"><a href="#æ‹…ä¿å¼æŠ•é€ä¸å¹¿å‘ŠæŠ•æ”¾" class="headerlink" title="æ‹…ä¿å¼æŠ•é€ä¸å¹¿å‘ŠæŠ•æ”¾"></a>æ‹…ä¿å¼æŠ•é€ä¸å¹¿å‘ŠæŠ•æ”¾</h3><ul><li>æ‹…ä¿å¼æŠ•é€ï¼ˆguaranteed deliveryï¼‰ï¼ˆä¿è¯é‡ï¼‰ï¼šåŸºäºåˆçº¦çš„å¹¿å‘Šæœºåˆ¶ï¼Œé‡ä¼˜äºè´¨çš„é”€å”®æ–¹å¼ï¼Œé‡‡ç”¨CPMçš„æ–¹å¼ç»“ç®—</li><li>å¹¿å‘ŠæŠ•æ”¾æœºï¼ˆAd serverï¼‰ï¼ˆå¸Œæœ›å¸®å¹¿å‘Šå•†åšä¸€äº›ä¼˜åŒ–ï¼Œä¼˜åŒ–è´¨ï¼‰ï¼šCPMå¿…ç„¶è¦æ±‚å¹¿å‘ŠæŠ•é€ç”±æœåŠ¡å™¨å®Œæˆå†³ç­–ï¼Œå—ä¼—å®šå‘ã€CTRé¢„æµ‹å’Œæµé‡é¢„æµ‹æ˜¯å¹¿å‘ŠæŠ•æ”¾æœºçš„åŸºç¡€ï¼Œæ‹…ä¿å¼æŠ•é€ä¸‹ï¼ŒæŠ•æ”¾æœºæ»¡è¶³å„åˆçº¦çš„é‡ï¼Œå¹¶å°½å¯èƒ½ä¼˜åŒ–å„å¹¿å‘Šä¸»æµé‡çš„è´¨</li></ul><h2 id="åœ¨çº¿åˆ†é…é—®é¢˜"><a href="#åœ¨çº¿åˆ†é…é—®é¢˜" class="headerlink" title="åœ¨çº¿åˆ†é…é—®é¢˜"></a>åœ¨çº¿åˆ†é…é—®é¢˜</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/online_allocation.png" alt="å›¾ï¼šåœ¨çº¿åˆ†é…é—®é¢˜"></p><ul><li>ç”¨æ‹‰æ ¼æœ—æ—¥æ–¹æ³•æ±‚è§£</li></ul><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/method1.png" alt="å›¾ï¼šæ‹‰æ ¼æœ—æ—¥æ–¹æ³•"></p><ul><li>$b_{ia}$ï¼šç¬¬iä¸ªimpressionï¼ˆæ›å…‰ï¼‰æ‹¿åˆ°å¹¿å‘Šaçš„æ”¶ç›Š</li><li>$x_{ia}$ï¼šæµé‡åˆ†é…ä»¥åŠé¢„ç®—æ§åˆ¶</li><li>display ad problemï¼šæœ‰é‡çš„éœ€æ±‚ï¼Œé‡çš„ä¸‹é™æˆ–é¢„ç®—ï¼ˆä¸Šé™ï¼‰çš„éœ€æ±‚</li><li>adwords problemï¼šæ²¡æœ‰æ˜ç¡®çš„é‡éœ€æ±‚</li><li>NGDï¼šnon-guaranteed deliveryï¼ˆä¸Šé™çš„éœ€æ±‚ï¼‰</li><li>æµé‡é¢„æµ‹ä¸‹çš„GDåœ¨çº¿åˆ†é…</li></ul><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/method2.png" alt="å›¾ï¼šGDåœ¨çº¿åˆ†é…"></p><h2 id="Hadoopä»‹ç»"><a href="#Hadoopä»‹ç»" class="headerlink" title="Hadoopä»‹ç»"></a>Hadoopä»‹ç»</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/mapreduce.png" alt="å›¾ï¼šmapreduceåœ¨ç»Ÿè®¡ä¸­åº”ç”¨"></p><h1 id="å—ä¼—å®šå‘ï¼ˆaudience-targetingï¼‰-åœ¨çº¿å¹¿å‘Šçš„æ ¸å¿ƒ"><a href="#å—ä¼—å®šå‘ï¼ˆaudience-targetingï¼‰-åœ¨çº¿å¹¿å‘Šçš„æ ¸å¿ƒ" class="headerlink" title="å—ä¼—å®šå‘ï¼ˆaudience targetingï¼‰-åœ¨çº¿å¹¿å‘Šçš„æ ¸å¿ƒ"></a>å—ä¼—å®šå‘ï¼ˆaudience targetingï¼‰-åœ¨çº¿å¹¿å‘Šçš„æ ¸å¿ƒ</h1><h2 id="å—ä¼—å®šå‘æ¦‚å¿µ"><a href="#å—ä¼—å®šå‘æ¦‚å¿µ" class="headerlink" title="å—ä¼—å®šå‘æ¦‚å¿µ"></a>å—ä¼—å®šå‘æ¦‚å¿µ</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/audience_targeting.png" alt="å›¾ï¼šå—ä¼—å®šå‘"></p><h3 id="å¸¸è§å—ä¼—å®šå‘æ–¹å¼"><a href="#å¸¸è§å—ä¼—å®šå‘æ–¹å¼" class="headerlink" title="å¸¸è§å—ä¼—å®šå‘æ–¹å¼"></a>å¸¸è§å—ä¼—å®šå‘æ–¹å¼</h3><ul><li>$f(a,u)$ï¼š<ol><li><strong>é‡å®šå‘</strong>ï¼Œå¦‚æœæŸä¸ªç”¨æˆ·è®¿é—®æŸä¸ªå¹¿å‘Šï¼Œåˆ™ç»™è¯¥ç”¨æˆ·æˆ–è¯¥å¹¿å‘Šæ‰“ä¸ŠæŸä¸€ä¸ªæ ‡ç­¾</li><li><strong>lookalike</strong>ï¼Œä»æµ·é‡æ•°æ®ä¸­æ‰¾åˆ°ä¸å·²æœ‰ç§å­ç”¨æˆ·ç›¸ä¼¼çš„ç”¨æˆ·</li></ol></li><li>$f(u)$ï¼šè¡Œä¸ºå®šå‘</li><li>$f(c)$ï¼šä¸Šä¸‹æ–‡å®šå‘</li></ul><h2 id="è¡Œä¸ºå®šå‘-å¯¹useræ‰“æ ‡ç­¾"><a href="#è¡Œä¸ºå®šå‘-å¯¹useræ‰“æ ‡ç­¾" class="headerlink" title="è¡Œä¸ºå®šå‘-å¯¹useræ‰“æ ‡ç­¾"></a>è¡Œä¸ºå®šå‘-å¯¹useræ‰“æ ‡ç­¾</h2><h3 id="ä¹ç§é‡è¦çš„åŸå§‹è¡Œä¸ºï¼ˆæŒ‰ä¿¡æ¯å¼ºåº¦æ’åºï¼‰"><a href="#ä¹ç§é‡è¦çš„åŸå§‹è¡Œä¸ºï¼ˆæŒ‰ä¿¡æ¯å¼ºåº¦æ’åºï¼‰" class="headerlink" title="ä¹ç§é‡è¦çš„åŸå§‹è¡Œä¸ºï¼ˆæŒ‰ä¿¡æ¯å¼ºåº¦æ’åºï¼‰"></a>ä¹ç§é‡è¦çš„åŸå§‹è¡Œä¸ºï¼ˆæŒ‰ä¿¡æ¯å¼ºåº¦æ’åºï¼‰</h3><ul><li>transactionï¼šäº¤æ˜“ä¿¡æ¯</li><li>pre-transactionï¼šé¢„äº¤æ˜“ä¿¡æ¯</li><li>paid search clickï¼šä»˜æ¬¾ç‚¹å‡»ä¿¡æ¯</li><li>ad clickï¼šå¹¿å‘Šç‚¹å‡»ä¿¡æ¯</li><li>search clickï¼šæœç´¢ç‚¹å‡»ä¿¡æ¯</li><li>searchï¼š æœç´¢ä¿¡æ¯</li><li>shareï¼šåˆ†äº«ä¿¡æ¯</li><li>page viewï¼šç½‘é¡µæµè§ˆä¿¡æ¯</li><li>ad viewï¼šå¹¿å‘Šæµé‡ä¿¡æ¯</li></ul><p><strong>è¡Œä¸ºå®šå‘è®¡ç®—ï¼š</strong>ä¸ºç”¨æˆ·çš„æ¯ä¸ªè¡Œä¸ºæ ‡ç­¾è®¡ç®—ä¸€ä¸ªå€¼ï¼ˆå¼ºåº¦ï¼‰</p><h3 id="è¡Œä¸ºå®šå‘å…¶ä»–æ ‡ç­¾"><a href="#è¡Œä¸ºå®šå‘å…¶ä»–æ ‡ç­¾" class="headerlink" title="è¡Œä¸ºå®šå‘å…¶ä»–æ ‡ç­¾"></a>è¡Œä¸ºå®šå‘å…¶ä»–æ ‡ç­¾</h3><ul><li>session logï¼šä»¥ç”¨æˆ·IDä¸ºkeyçš„å½¢å¼ï¼Œå¯ä»¥å°†targetingå˜æˆå±€éƒ¨è¿ç®—</li><li>long-termï¼šå¤šæ—¥æ ‡ç­¾ç´¯è®¡è®¡ç®—ï¼Œé‡‡ç”¨æ—¶é—´è¡°å‡æ–¹å¼ï¼Œä»…éœ€æ˜¨å¤©çš„få’Œä»Šå¤©çš„t</li></ul><h2 id="ä¸Šä¸‹æ–‡å®šå‘-å³æ—¶æ ‡ç­¾"><a href="#ä¸Šä¸‹æ–‡å®šå‘-å³æ—¶æ ‡ç­¾" class="headerlink" title="ä¸Šä¸‹æ–‡å®šå‘-å³æ—¶æ ‡ç­¾"></a>ä¸Šä¸‹æ–‡å®šå‘-å³æ—¶æ ‡ç­¾</h2><p><strong>ä»¥urlä¸¾ä¾‹ï¼š</strong></p><ul><li>ç”¨åœ¨çº¿cacheç³»ç»Ÿå­˜å‚¨url</li><li>ä¸é¢„å…ˆåŠ è½½ä»»ä½•cacheå†…å®¹ï¼Œå¯¹cacheä¸­ä¸å­˜åœ¨çš„urlï¼Œç«‹åˆ»è¿”å›ç©ºç‰¹å¾ï¼ŒåŒæ—¶è§¦å‘ç›¸åº”çš„é¡µé¢çˆ¬è™«å’Œç‰¹å¾æå–</li><li>è®¾ç½®cacheç³»ç»Ÿåˆé€‚çš„å¤±æ•ˆæ—¶é—´ä»¥å®Œæˆç‰¹å¾è‡ªåŠ¨æ›´æ–°</li></ul><h2 id="Topic-Model-ä¸Šä¸‹æ–‡ï¼ˆé¡µé¢ä¸»é¢˜åˆ†æï¼‰"><a href="#Topic-Model-ä¸Šä¸‹æ–‡ï¼ˆé¡µé¢ä¸»é¢˜åˆ†æï¼‰" class="headerlink" title="Topic Model-ä¸Šä¸‹æ–‡ï¼ˆé¡µé¢ä¸»é¢˜åˆ†æï¼‰"></a>Topic Model-ä¸Šä¸‹æ–‡ï¼ˆé¡µé¢ä¸»é¢˜åˆ†æï¼‰</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/topic_model.png" alt="å›¾ï¼šå¸¸ç”¨æ¨¡å‹å›¾"></p><p><strong>å‚æ•°è§£é‡Šï¼š</strong></p><ul><li>$\pi$ï¼šå…ˆéªŒåˆ†å¸ƒ</li><li>$z$ï¼šéšå«ä¸»é¢˜</li><li>$w$ï¼šè¯word</li></ul><h2 id="æ•°æ®åŠ å·¥å’Œäº¤æ˜“"><a href="#æ•°æ®åŠ å·¥å’Œäº¤æ˜“" class="headerlink" title="æ•°æ®åŠ å·¥å’Œäº¤æ˜“"></a>æ•°æ®åŠ å·¥å’Œäº¤æ˜“</h2><h3 id="ç²¾å‡†å¹¿å‘Šä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ç²¾å‡†å¹¿å‘Šä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç²¾å‡†å¹¿å‘Šä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ç²¾å‡†å¹¿å‘Šä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>æ•°æ®æºâ€”â€”ç”¨æˆ·è¡Œä¸ºâ€”â€”å®šå‘ç³»ç»Ÿâ€”â€”ç”¨æˆ·æ ‡ç­¾â€”â€”æŠ•æ”¾æœº</li></ul><h3 id="æœ‰ä»·å€¼çš„æ•°æ®"><a href="#æœ‰ä»·å€¼çš„æ•°æ®" class="headerlink" title="æœ‰ä»·å€¼çš„æ•°æ®"></a>æœ‰ä»·å€¼çš„æ•°æ®</h3><ul><li>ç”¨æˆ·æ ‡è¯†</li><li>ç”¨æˆ·è¡Œä¸º</li></ul><h3 id="æ•°æ®ç®¡ç†å¹³å°ï¼ˆDMPï¼‰"><a href="#æ•°æ®ç®¡ç†å¹³å°ï¼ˆDMPï¼‰" class="headerlink" title="æ•°æ®ç®¡ç†å¹³å°ï¼ˆDMPï¼‰"></a>æ•°æ®ç®¡ç†å¹³å°ï¼ˆDMPï¼‰</h3><ul><li>ç›®çš„ï¼š<ol><li>ä¸ºç½‘ç«™æä¾›æ•°æ®åŠ å·¥å’Œå¯¹å¤–äº¤æ˜“èƒ½åŠ›</li><li>åŠ å·¥è·¨åª’ä½“ç”¨æˆ·æ ‡ç­¾ï¼Œåœ¨äº¤æ˜“å¸‚åœºä¸­å”®å–</li><li>æ˜¯å¦åº”ç›´æ¥ä»äº‹å¹¿å‘Šäº¤æ˜“å­˜åœ¨äº‰è®®</li></ol></li><li>å…³é”®ç‰¹å¾ï¼š<ol><li>å®šåˆ¶åŒ–ç”¨æˆ·åˆ’åˆ†</li><li>ç»Ÿä¸€çš„å¯¹å¤–æ•°æ®æ¥å£</li></ol></li></ul><h3 id="data-highwayå·¥å…·"><a href="#data-highwayå·¥å…·" class="headerlink" title="data highwayå·¥å…·"></a>data highwayå·¥å…·</h3><ul><li>scribeï¼šå¤§è§„æ¨¡åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†ç³»ç»Ÿ</li><li><strong>flume</strong></li><li>chukwa</li></ul><h1 id="ç«ä»·å¹¿å‘Šç³»ç»Ÿï¼ˆsupplyç«¯ï¼‰"><a href="#ç«ä»·å¹¿å‘Šç³»ç»Ÿï¼ˆsupplyç«¯ï¼‰" class="headerlink" title="ç«ä»·å¹¿å‘Šç³»ç»Ÿï¼ˆsupplyç«¯ï¼‰"></a>ç«ä»·å¹¿å‘Šç³»ç»Ÿï¼ˆsupplyç«¯ï¼‰</h1><h2 id="ä½ç½®æ‹å–ç†è®º"><a href="#ä½ç½®æ‹å–ç†è®º" class="headerlink" title="ä½ç½®æ‹å–ç†è®º"></a>ä½ç½®æ‹å–ç†è®º</h2><h4 id="ç«ä»·ç³»ç»Ÿç†è®º"><a href="#ç«ä»·ç³»ç»Ÿç†è®º" class="headerlink" title="ç«ä»·ç³»ç»Ÿç†è®º"></a>ç«ä»·ç³»ç»Ÿç†è®º</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/bid_theory.png" alt="å›¾ï¼šç«ä»·ç³»ç»Ÿç†è®º"></p><h4 id="å®šä»·æœºåˆ¶"><a href="#å®šä»·æœºåˆ¶" class="headerlink" title="å®šä»·æœºåˆ¶"></a>å®šä»·æœºåˆ¶</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/bid_theory1.png" alt="å›¾ï¼šå®šä»·æœºåˆ¶"></p><h2 id="å¹¿å‘Šç½‘ç»œæ¦‚å¿µ"><a href="#å¹¿å‘Šç½‘ç»œæ¦‚å¿µ" class="headerlink" title="å¹¿å‘Šç½‘ç»œæ¦‚å¿µ"></a>å¹¿å‘Šç½‘ç»œæ¦‚å¿µ</h2><h4 id="å¹¿å‘Šç½‘ç»œ"><a href="#å¹¿å‘Šç½‘ç»œ" class="headerlink" title="å¹¿å‘Šç½‘ç»œ"></a>å¹¿å‘Šç½‘ç»œ</h4><ul><li>connect advertisers to web sites that want to host advertisements</li><li>è‡ªè¡Œä¼°è®¡ç»™å®šï¼ˆa,u,cï¼‰ç»„åˆçš„CTR</li></ul><h4 id="ä¸»è¦ç‰¹å¾"><a href="#ä¸»è¦ç‰¹å¾" class="headerlink" title="ä¸»è¦ç‰¹å¾"></a>ä¸»è¦ç‰¹å¾</h4><ul><li>ç«ä»·ç³»ç»Ÿ</li><li>æ·¡åŒ–å¹¿å‘Šä½æ¦‚å¿µ</li><li>æœ€åˆé€‚çš„è®¡ä»·æ–¹å¼æ˜¯CPC</li><li>ä¸æ˜“æ”¯æŒå®šåˆ¶åŒ–ç”¨æˆ·åˆ’åˆ†</li></ul><h2 id="å¹¿å‘Šæ£€ç´¢"><a href="#å¹¿å‘Šæ£€ç´¢" class="headerlink" title="å¹¿å‘Šæ£€ç´¢"></a>å¹¿å‘Šæ£€ç´¢</h2><h4 id="å¸ƒå°”è¡¨è¾¾å¼æ£€ç´¢"><a href="#å¸ƒå°”è¡¨è¾¾å¼æ£€ç´¢" class="headerlink" title="å¸ƒå°”è¡¨è¾¾å¼æ£€ç´¢"></a>å¸ƒå°”è¡¨è¾¾å¼æ£€ç´¢</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/search.png" alt="å›¾ï¼šå¸ƒå°”è¡¨è¾¾å¼æ£€ç´¢"></p><ul><li>indexç®—æ³•</li></ul><h4 id="é•¿queryæƒ…å†µä¸‹çš„ç›¸å…³æ€§æ£€ç´¢"><a href="#é•¿queryæƒ…å†µä¸‹çš„ç›¸å…³æ€§æ£€ç´¢" class="headerlink" title="é•¿queryæƒ…å†µä¸‹çš„ç›¸å…³æ€§æ£€ç´¢"></a>é•¿queryæƒ…å†µä¸‹çš„ç›¸å…³æ€§æ£€ç´¢</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/search1.png" alt="å›¾ï¼šé•¿queryæ£€ç´¢"></p><ul><li>weigth-andï¼ˆwandï¼‰æ£€ç´¢ç®—æ³•</li></ul><h2 id="æµé‡é¢„æµ‹"><a href="#æµé‡é¢„æµ‹" class="headerlink" title="æµé‡é¢„æµ‹"></a>æµé‡é¢„æµ‹</h2><ul><li>å¯ä»¥è§†queryä¸ºaï¼Œå¯¹ï¼ˆu,cï¼‰è¿›è¡Œæ£€ç´¢çš„åå‘æ£€ç´¢ï¼ˆretrievalï¼‰é—®é¢˜</li><li>ç”±äºï¼ˆu,cï¼‰è”åˆç©ºé—´è§„æ¨¡è¿‡å¤§ï¼Œéœ€è¦è¿›è¡Œé¢„å¤„ç†</li></ul><h4 id="é¢„æµ‹è¿‡ç¨‹"><a href="#é¢„æµ‹è¿‡ç¨‹" class="headerlink" title="é¢„æµ‹è¿‡ç¨‹"></a>é¢„æµ‹è¿‡ç¨‹</h4><ul><li>ç»™å®šaï¼Œé¦–å…ˆé€šè¿‡cçš„ç´¢å¼•æ‰¾å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶cçš„é›†åˆ</li><li>å¯¹æ¯ä¸ªcä¼°è®¡eCPM(a,c)ï¼Œå¹¶æ ¹æ®eCPMå¾—åˆ°aåœ¨cä¸Šèƒœå‡ºçš„ç™¾åˆ†æ¯”å¹¶ç´¯åŠ åˆ™å¾—åˆ°açš„æµé‡é¢„æµ‹å€¼</li></ul><h2 id="ZooKeeperä»‹ç»-åˆ†å¸ƒå¼åŒæ­¥æœåŠ¡"><a href="#ZooKeeperä»‹ç»-åˆ†å¸ƒå¼åŒæ­¥æœåŠ¡" class="headerlink" title="ZooKeeperä»‹ç»-åˆ†å¸ƒå¼åŒæ­¥æœåŠ¡"></a>ZooKeeperä»‹ç»-åˆ†å¸ƒå¼åŒæ­¥æœåŠ¡</h2><ul><li>åœ¨åŸºäºæ¶ˆæ¯ä¼ é€’é€šä¿¡æ¨¡å‹çš„åˆ†å¸ƒå¼ç¯å¢ƒä¸‹è§£å†³ä¸€è‡´æ€§é—®é¢˜çš„åŸºç¡€æœåŠ¡</li><li>ç”¨å±‚æ¬¡å¼namespaceç»´æŠ¤åŒæ­¥éœ€è¦çš„çŠ¶æ€ç©ºé—´</li><li>ä¿è¯å®ç°ç‰¹æ€§ï¼štimelinessç­‰</li><li>è¾ƒå¤æ‚çš„åŒæ­¥æ¨¡å¼éœ€è¦åˆ©ç”¨APIç¼–ç¨‹å®ç°</li><li>Paxosç®—æ³•</li></ul><h2 id="ç‚¹å‡»ç‡é¢„æµ‹ä¸é€»è¾‘å›å½’"><a href="#ç‚¹å‡»ç‡é¢„æµ‹ä¸é€»è¾‘å›å½’" class="headerlink" title="ç‚¹å‡»ç‡é¢„æµ‹ä¸é€»è¾‘å›å½’"></a>ç‚¹å‡»ç‡é¢„æµ‹ä¸é€»è¾‘å›å½’</h2><h4 id="ç‚¹å‡»ç‡é¢„æµ‹"><a href="#ç‚¹å‡»ç‡é¢„æµ‹" class="headerlink" title="ç‚¹å‡»ç‡é¢„æµ‹"></a>ç‚¹å‡»ç‡é¢„æµ‹</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/ctr.png" alt="å›¾ï¼šç‚¹å‡»ç‡é¢„æµ‹"></p><h2 id="é€»è¾‘å›å½’ä¼˜åŒ–æ–¹æ³•ä»‹ç»"><a href="#é€»è¾‘å›å½’ä¼˜åŒ–æ–¹æ³•ä»‹ç»" class="headerlink" title="é€»è¾‘å›å½’ä¼˜åŒ–æ–¹æ³•ä»‹ç»"></a>é€»è¾‘å›å½’ä¼˜åŒ–æ–¹æ³•ä»‹ç»</h2><h4 id="L-BFGS"><a href="#L-BFGS" class="headerlink" title="L-BFGS"></a>L-BFGS</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/lbfgs.png" alt="å›¾ï¼šä¼˜åŒ–æ–¹æ³•"></p><h4 id="ADMMæ–¹æ³•"><a href="#ADMMæ–¹æ³•" class="headerlink" title="ADMMæ–¹æ³•"></a>ADMMæ–¹æ³•</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/admm.png" alt="å›¾ï¼šadmm"></p><h2 id="åŠ¨æ€ç‰¹å¾"><a href="#åŠ¨æ€ç‰¹å¾" class="headerlink" title="åŠ¨æ€ç‰¹å¾"></a>åŠ¨æ€ç‰¹å¾</h2><h4 id="å¤šå±‚æ¬¡ç‚¹å‡»åé¦ˆ"><a href="#å¤šå±‚æ¬¡ç‚¹å‡»åé¦ˆ" class="headerlink" title="å¤šå±‚æ¬¡ç‚¹å‡»åé¦ˆ"></a>å¤šå±‚æ¬¡ç‚¹å‡»åé¦ˆ</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/feature.png" alt="å›¾ï¼šå¤šå±‚æ¬¡ç‚¹å‡»"></p><h1 id="æ¢ç´¢å¹¿å‘Šä¸å¹¿å‘Šç½‘ç»œï¼ˆsuppyç«¯ï¼‰"><a href="#æ¢ç´¢å¹¿å‘Šä¸å¹¿å‘Šç½‘ç»œï¼ˆsuppyç«¯ï¼‰" class="headerlink" title="æ¢ç´¢å¹¿å‘Šä¸å¹¿å‘Šç½‘ç»œï¼ˆsuppyç«¯ï¼‰"></a>æ¢ç´¢å¹¿å‘Šä¸å¹¿å‘Šç½‘ç»œï¼ˆsuppyç«¯ï¼‰</h1><h2 id="æ¢ç´¢ä¸åˆ©ç”¨"><a href="#æ¢ç´¢ä¸åˆ©ç”¨" class="headerlink" title="æ¢ç´¢ä¸åˆ©ç”¨"></a>æ¢ç´¢ä¸åˆ©ç”¨</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/explore.png" alt="å›¾ï¼šæ¢ç´¢ä¸åˆ©ç”¨"></p><h4 id="UCB"><a href="#UCB" class="headerlink" title="UCB"></a>UCB</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/ucb.png" alt="å›¾ï¼šucb"></p><h4 id="Contextual-Bandit"><a href="#Contextual-Bandit" class="headerlink" title="Contextual Bandit"></a>Contextual Bandit</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/contextual.png" alt="å›¾ï¼šcontextual bandit"></p><h2 id="æœç´¢å¹¿å‘Š"><a href="#æœç´¢å¹¿å‘Š" class="headerlink" title="æœç´¢å¹¿å‘Š"></a>æœç´¢å¹¿å‘Š</h2><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>å¹¿å‘Šç½‘ç»œçš„ç‰¹æ®Šå½¢å¼<ol><li>ç”¨æˆ·å®šå‘æ ‡ç­¾</li><li>sessionå†…çš„çŸ­æ—¶é—´ç”¨æˆ·æœç´¢è¡Œä¸ºæ›´é‡è¦</li><li>ä¸Šä¸‹æ–‡å®šå‘æ ‡ç­¾</li></ol></li><li>å…¸å‹ä½ç½®ç«ä»·æ¨¡å¼<ol><li>åˆ†å—åŒºã€åŒ—åŒºã€ä¸œåŒºç­‰</li></ol></li></ul><h4 id="æŸ¥è¯¢è¯æ‰©å±•"><a href="#æŸ¥è¯¢è¯æ‰©å±•" class="headerlink" title="æŸ¥è¯¢è¯æ‰©å±•"></a>æŸ¥è¯¢è¯æ‰©å±•</h4><ul><li>åŸºäºæ¨èçš„æ–¹æ³•<ol><li>æŒ–æ˜çŸ©é˜µæ‰¾åˆ°ç›¸å…³query</li></ol></li><li>åŸºäºè¯­ä¹‰çš„æ–¹æ³•<ol><li>topic model</li></ol></li><li>åŸºäºæ”¶ç›Šçš„æ–¹æ³•<ol><li>æ ¹æ®eCPMç»Ÿè®¡å¾—åˆ°è¡¨ç°è¾ƒå¥½çš„ç›¸å…³query</li></ol></li></ul><h4 id="ç”¨æˆ·ç›¸å…³çš„æœç´¢å¹¿å‘Šå†³ç­–"><a href="#ç”¨æˆ·ç›¸å…³çš„æœç´¢å¹¿å‘Šå†³ç­–" class="headerlink" title="ç”¨æˆ·ç›¸å…³çš„æœç´¢å¹¿å‘Šå†³ç­–"></a>ç”¨æˆ·ç›¸å…³çš„æœç´¢å¹¿å‘Šå†³ç­–</h4><ul><li>ç»“æœä¸ªæ€§åŒ–å¯¹äºæœç´¢å¹¿å‘Šä½œç”¨æœ‰é™</li><li>å¹¿å‘Šå±•ç¤ºæ¡æ•°æ˜¯å¯ä»¥æ·±åº¦ä¸ªæ€§åŒ–çš„</li><li>å¯ä»¥æ ¹æ®ç»Ÿä¸€sessionå†…çš„è¡Œä¸ºè°ƒæ•´å¹¿å‘Šç»“æœ</li></ul><h4 id="çŸ­æ—¶ç”¨æˆ·è¡Œä¸ºåé¦ˆ"><a href="#çŸ­æ—¶ç”¨æˆ·è¡Œä¸ºåé¦ˆ" class="headerlink" title="çŸ­æ—¶ç”¨æˆ·è¡Œä¸ºåé¦ˆ"></a>çŸ­æ—¶ç”¨æˆ·è¡Œä¸ºåé¦ˆ</h4><ul><li>çŸ­æ—¶ç”¨æˆ·è¡Œä¸º</li><li>çŸ­æ—¶ç”¨æˆ·è¡Œä¸ºåé¦ˆ<ol><li>çŸ­æ—¶å—ä¼—å®šå‘</li><li>çŸ­æ—¶ç‚¹å‡»åé¦ˆ</li></ol></li><li>çŸ­æ—¶ç”¨æˆ·è¡Œä¸ºè®¡ç®—<ol><li>éœ€è¦å‡†å®æ—¶å¯¹ç”¨æˆ·è¡Œä¸ºåŠ å·¥ï¼Œä¸é€‚åˆåœ¨Hadoopä¸Šè¿›è¡Œ</li></ol></li></ul><h2 id="æµå¼è®¡ç®—å¹³å°"><a href="#æµå¼è®¡ç®—å¹³å°" class="headerlink" title="æµå¼è®¡ç®—å¹³å°"></a>æµå¼è®¡ç®—å¹³å°</h2><h4 id="Storm"><a href="#Storm" class="headerlink" title="Storm"></a>Storm</h4><ul><li>å¤§è§„æ¨¡å®æ—¶æ•°æ®å¤„ç†æ¡†æ¶ï¼Œè‡ªåŠ¨å®Œæˆæ•°æ®åˆ†å‘å’Œå¯é æ€§ç®¡ç†ï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨å¤„ç†é€»è¾‘</li><li>æ•°æ®æµåŸºæœ¬åœ¨ç½‘ç»œå’Œå†…å­˜è¿›è¡Œ</li><li>è®¡ç®—é€»è¾‘ç±»ä¼¼mapreduceï¼ŒåŒºåˆ«åœ¨äº<strong>è°ƒåº¦æ•°æ®è€Œéè°ƒåº¦è®¡ç®—</strong>ï¼Œhadoopå´æ˜¯<strong>è°ƒåº¦è®¡ç®—</strong></li></ul><h2 id="å¹¿å‘Šè´­ä¹°å¹³å°ï¼ˆdemandç«¯ï¼‰-trading-desk"><a href="#å¹¿å‘Šè´­ä¹°å¹³å°ï¼ˆdemandç«¯ï¼‰-trading-desk" class="headerlink" title="å¹¿å‘Šè´­ä¹°å¹³å°ï¼ˆdemandç«¯ï¼‰-trading desk"></a>å¹¿å‘Šè´­ä¹°å¹³å°ï¼ˆdemandç«¯ï¼‰-trading desk</h2><h4 id="å…³é”®ç‰¹å¾"><a href="#å…³é”®ç‰¹å¾" class="headerlink" title="å…³é”®ç‰¹å¾"></a>å…³é”®ç‰¹å¾</h4><ul><li>è¿æ¥åˆ°ä¸åŒåª’ä½“å’Œå¹¿å‘Šç½‘ç»œï¼Œä¸ºå¹¿å‘Šå•†æä¾›universal marketplace</li><li>éå®æ—¶ç«ä»·campaignçš„ROIä¼˜åŒ–èƒ½åŠ›</li><li>ç»å¸¸ç”±ä»£ç†å…¬å¸å­µåŒ–å‡ºæ¥</li></ul><h4 id="éRTBæµé‡çš„ROIä¼˜åŒ–"><a href="#éRTBæµé‡çš„ROIä¼˜åŒ–" class="headerlink" title="éRTBæµé‡çš„ROIä¼˜åŒ–"></a>éRTBæµé‡çš„ROIä¼˜åŒ–</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/non_rtb_roi.png" alt="å›¾ï¼šnon_rtb_roi"></p><h1 id="å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆADXï¼‰"><a href="#å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆADXï¼‰" class="headerlink" title="å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆADXï¼‰"></a>å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆADXï¼‰</h1><h2 id="å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆad-exchangeï¼‰"><a href="#å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆad-exchangeï¼‰" class="headerlink" title="å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆad-exchangeï¼‰"></a>å¹¿å‘Šäº¤æ˜“å¸‚åœºï¼ˆad-exchangeï¼‰</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/adx.png" alt="å›¾ï¼šadx"></p><p><strong>ä¸»è¦æµç¨‹ï¼š</strong></p><ul><li>æŸä¸ª User è®¿é—®æŸä¸ªç½‘ç«™ï¼Œç½‘ç«™é€šçŸ¥ Adx ç›®å‰æœ‰ä¸€æ¬¡å±•ç¤ºæœºä¼š</li><li>Adx é€šè¿‡ RTBD æ¥å£å‘å„ä¸ª DSP è¯¢ä»·ï¼Œä»è€Œè·å– DSPæä¾›çš„å„ä¸ªå¹¿å‘Šï¼ˆç›¸å½“äºå›¾ä¸­çš„ Ad retrievalï¼‰</li><li>Adx é€šè¿‡å‡ºä»·è¿›è¡Œæ’åºï¼Œå¹¶é€‰æ‹©å‡ºä»·æœ€é«˜çš„å¹¿å‘Šå±•ç¤ºç»™ç”¨æˆ·ï¼ˆç›¸å½“äºå›¾ä¸­çš„ Ad rankingï¼‰</li><li>Adx åœ¨æ—¥å¿—ä¸­è®°å½•è¯¥å¹¿å‘Šçš„å±•ç¤ºè®°å½•</li></ul><h4 id="å…³é”®ç‰¹å¾-1"><a href="#å…³é”®ç‰¹å¾-1" class="headerlink" title="å…³é”®ç‰¹å¾"></a>å…³é”®ç‰¹å¾</h4><ul><li>ç”¨å®æ—¶ç«ä»·æ–¹å¼è¿æ¥å¹¿å‘Šå’Œä¸Šä¸‹æ–‡ã€ç”¨æˆ·</li><li>æŒ‰ç…§å±•ç¤ºä¸Šçš„ç«ä»·æ”¶å–å¹¿å‘Šä¸»è´¹ç”¨</li></ul><h2 id="å®æ—¶ç«ä»·-RTB"><a href="#å®æ—¶ç«ä»·-RTB" class="headerlink" title="å®æ—¶ç«ä»·-RTB"></a>å®æ—¶ç«ä»·-RTB</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/rtb.png" alt="å›¾ï¼šrtb"></p><h2 id="cookie-mapping"><a href="#cookie-mapping" class="headerlink" title="cookie mapping"></a>cookie mapping</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/cookie_mapping.png" alt="å›¾ï¼šcookie mapping"></p><h2 id="supply-side-platform-ä¾›åº”æ–¹å¹³å°"><a href="#supply-side-platform-ä¾›åº”æ–¹å¹³å°" class="headerlink" title="supply side platform-ä¾›åº”æ–¹å¹³å°"></a>supply side platform-ä¾›åº”æ–¹å¹³å°</h2><h4 id="åª’ä½“æµé‡å˜ç°æ–¹å¼"><a href="#åª’ä½“æµé‡å˜ç°æ–¹å¼" class="headerlink" title="åª’ä½“æµé‡å˜ç°æ–¹å¼"></a>åª’ä½“æµé‡å˜ç°æ–¹å¼</h4><ul><li>åˆçº¦å¹¿å‘Šï¼Œä¸å¹¿å‘Šä¸»ç­¾è®¢åˆçº¦è¿›è¡ŒæŠ•æ”¾ï¼ˆCPM ç»“ç®—ï¼‰</li><li>ç«ä»·å¹¿å‘Šï¼Œå°†å¹¿å‘Šä½æ‰˜ç®¡ç»™å¹¿å‘Šç½‘ç»œï¼Œå¹¿å‘Šç½‘ç»œæ ¹æ®äººç¾¤å”®å–ç»™å¹¿å‘Šä¸»ï¼ˆCPC ç»“ç®—ï¼‰</li><li>å®æ—¶ç«ä»·ï¼ˆæŒ‰å±•ç¤ºç»“ç®—ï¼‰</li></ul><h4 id="å…³é”®ç‰¹å¾-2"><a href="#å…³é”®ç‰¹å¾-2" class="headerlink" title="å…³é”®ç‰¹å¾"></a>å…³é”®ç‰¹å¾</h4><ul><li>æä¾›åª’ä½“ç«¯çš„ç”¨æˆ·åˆ’åˆ†å’Œå”®å–èƒ½åŠ›</li><li>å¯ä»¥çµæ´»æ¥å…¥å¤šç§å˜ç°æ–¹å¼</li><li>æ”¶ç›Šç®¡ç†ï¼šç»Ÿä¸€ç½‘ç»œä¼˜åŒ–å’ŒRTBï¼Œä¼˜åŒ–åª’ä½“åˆ©ç›Š</li></ul><h2 id="demand-side-platform-éœ€æ±‚æ–¹å¹³å°ï¼ˆäº¤æ˜“å¸‚åœºdemandç«¯æŠ€æœ¯ï¼‰"><a href="#demand-side-platform-éœ€æ±‚æ–¹å¹³å°ï¼ˆäº¤æ˜“å¸‚åœºdemandç«¯æŠ€æœ¯ï¼‰" class="headerlink" title="demand side platform-éœ€æ±‚æ–¹å¹³å°ï¼ˆäº¤æ˜“å¸‚åœºdemandç«¯æŠ€æœ¯ï¼‰"></a>demand side platform-éœ€æ±‚æ–¹å¹³å°ï¼ˆäº¤æ˜“å¸‚åœºdemandç«¯æŠ€æœ¯ï¼‰</h2><h4 id="å…³é”®ç‰¹å¾ï¼š"><a href="#å…³é”®ç‰¹å¾ï¼š" class="headerlink" title="å…³é”®ç‰¹å¾ï¼š"></a>å…³é”®ç‰¹å¾ï¼š</h4><ul><li>å®šåˆ¶åŒ–ç”¨æˆ·åˆ’åˆ†</li><li>è·¨åª’ä½“æµé‡é‡‡è´­</li><li>é€šè¿‡ROIä¼°è®¡æ¥æ”¯æŒRTB</li></ul><h4 id="ç»“æ„å›¾"><a href="#ç»“æ„å›¾" class="headerlink" title="ç»“æ„å›¾"></a>ç»“æ„å›¾</h4><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/dsp.png" alt="å›¾ï¼šdsp"></p><p><strong>éš¾ç‚¹ï¼š</strong>è¦ä¼°è®¡ <strong>eCPM = CTR * clickValue</strong>ï¼ŒADXä¸æ˜¯å¯¹å…¨éƒ¨DSPè¯¢ä»·ï¼Œè€Œæ˜¯ä¼šé¢„ä¼°æ¯ä¸ªDSPä¼šä¸ä¼šå‡ºä»·ï¼Œä»è€Œå‡è½»è¯¢ä»·æˆæœ¬ï¼ˆå¸¦å®½æˆæœ¬ï¼‰ã€‚</p><h2 id="DSPæµé‡é¢„æµ‹"><a href="#DSPæµé‡é¢„æµ‹" class="headerlink" title="DSPæµé‡é¢„æµ‹"></a>DSPæµé‡é¢„æµ‹</h2><h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h4><ul><li>DSPéœ€è¦é¢„æµ‹æµé‡ä»¥å†³å®šé‡‡ä¹°ç­–ç•¥</li><li>DSPæ‹¿åˆ°æµé‡å°±æ˜¯bidçš„å‡½æ•°ï¼Œç§°ä¸ºbid landscape</li></ul><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><ul><li>ç”±äºDSP<strong>æ— æ³•æ‹¿åˆ°æ‰€æœ‰æµé‡æƒ…å†µ</strong>ï¼Œå› æ­¤æ— æ³•åƒä¾›ç»™æ–¹sspé‚£æ ·è¿›è¡Œæµé‡é¢„æµ‹</li><li>å¦‚ä½•åˆ©ç”¨å†å²æŠ•æ”¾æ•°æ®ä»ç„¶æ˜¯å…³é”®</li></ul><h2 id="DSPç‚¹å‡»ä»·å€¼ä¼°è®¡"><a href="#DSPç‚¹å‡»ä»·å€¼ä¼°è®¡" class="headerlink" title="DSPç‚¹å‡»ä»·å€¼ä¼°è®¡"></a>DSPç‚¹å‡»ä»·å€¼ä¼°è®¡</h2><h4 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>DSPçš„å®æ—¶å‡ºä»·</li><li>å¹¿å‘Šç½‘ç»œä¸­çš„å‡ºä»·å·¥å…·</li><li>æ™ºèƒ½å®šä»·</li></ul><h4 id="æŒ‘æˆ˜"><a href="#æŒ‘æˆ˜" class="headerlink" title="æŒ‘æˆ˜"></a>æŒ‘æˆ˜</h4><ul><li>éå¸¸ç¨€ç–çš„è®­ç»ƒæ•°æ®</li><li>ä¸å¹¿å‘Šä¸»ç±»å‹å¼ºçƒˆç›¸å…³çš„è¡Œä¸ºæ¨¡å¼</li></ul><h4 id="ç‚¹å‡»ä»·å€¼ä¼°è®¡è‹¥å¹²åŸåˆ™"><a href="#ç‚¹å‡»ä»·å€¼ä¼°è®¡è‹¥å¹²åŸåˆ™" class="headerlink" title="ç‚¹å‡»ä»·å€¼ä¼°è®¡è‹¥å¹²åŸåˆ™"></a>ç‚¹å‡»ä»·å€¼ä¼°è®¡è‹¥å¹²åŸåˆ™</h4><ul><li>æ¨¡å‹ä¼°è®¡æ—¶ï¼Œç”¨è¾ƒå¤§çš„biasæ¢è¾ƒå°çš„varianceï¼Œä»¥è¾¾åˆ°ç¨³å¥ä¼°è®¡çš„ç›®çš„</li><li>å……åˆ†åˆ©ç”¨å¹¿å‘Šå•†ç±»å‹çš„å±‚çº§ç»“æ„ï¼Œä»¥åŠè½¬åŒ–æµç¨‹ä¸Šçš„ç‰¹å¾</li></ul><h2 id="DSPé‡å®šå‘ï¼ˆretargetingï¼‰"><a href="#DSPé‡å®šå‘ï¼ˆretargetingï¼‰" class="headerlink" title="DSPé‡å®šå‘ï¼ˆretargetingï¼‰"></a>DSPé‡å®šå‘ï¼ˆretargetingï¼‰</h2><p><strong>é‡ç‚¹ï¼š</strong></p><ul><li>å½“ä¸€ä¸ªç”¨æˆ·æµè§ˆè¿‡æˆ‘ä»¬çš„äº§å“æˆ–å®˜ç½‘ï¼Œä½†æ˜¯ä»–æ²¡æœ‰å½¢æˆè½¬åŒ–ï¼Œä½†ä¹‹åä»–å»æµè§ˆå…¶ä»–åª’ä½“çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ä»–æŠ•æ”¾å¹¿å‘Šåˆ™å¯ä»¥åŠ å¤§å…¶è½¬åŒ–å¯èƒ½</li></ul><h4 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h4><ul><li>ç½‘ç«™é‡å®šå‘</li><li>æœç´¢é‡å®šå‘</li><li>ä¸ªæ€§åŒ–é‡å®šå‘<ol><li>æ ¹æ®ç”¨æˆ·å…³æ³¨æˆ–è´­ä¹°ï¼Œæ¨é€å•†å“ç²’åº¦çš„å¹¿å‘Š</li><li>å·²è´­ä¹°çš„ï¼Œæ¨èç›¸å…³äº§å“</li><li>ç«™å¤–æ¨è</li></ol></li></ul><h4 id="æ¨èç®—æ³•"><a href="#æ¨èç®—æ³•" class="headerlink" title="æ¨èç®—æ³•"></a>æ¨èç®—æ³•</h4><ul><li>ååŒè¿‡æ»¤ç®—æ³•<ol><li>å†…å­˜æ–¹æ³•æˆ–éå‚æ•°æ–¹æ³•ï¼šè¿‘é‚»ã€Item-based/user-based</li><li>æ¨¡å‹æ–¹æ³•æˆ–å‚æ•°æ–¹æ³•ï¼šçŸ©é˜µåˆ†è§£ã€è´å¶æ–¯</li></ol></li><li>åŸºäºå†…å®¹ç®—æ³•</li><li>SVD++ç®—æ³•</li></ul><h4 id="æ–°å®¢æ¨è-lookalike"><a href="#æ–°å®¢æ¨è-lookalike" class="headerlink" title="æ–°å®¢æ¨è-lookalike"></a>æ–°å®¢æ¨è-lookalike</h4><ul><li>ç”±å¹¿å‘Šå•†æä¾›ä¸€éƒ¨åˆ†ç§å­ç”¨æˆ·ï¼ŒDSPé€šè¿‡ç½‘ç»œè¡Œä¸ºçš„ç›¸ä¼¼æ€§æ¥æ‰¾åˆ°æ½œåœ¨ç”¨æˆ·</li><li>æ˜¯ä¸€ç§å¹¿å‘Šå•†è‡ªå®šä¹‰æ ‡ç­¾ï¼Œå¯ä»¥è§†ä¸ºæ‰©å±•çš„é‡å®šå‘</li><li>åœ¨åŒæ ·reachæ°´å¹³ä¸‹ï¼Œæ•ˆæœå¥½äºé€šç”¨æ ‡ç­¾</li><li>å°½é‡åˆ©ç”¨édemandæ•°æ®ï¼Œæ³¨æ„é¿å…åœ¨ç«äº‰å¯¹æ‰‹ä¹‹é—´å€’å–ç”¨æˆ·</li></ul><h2 id="éœ€æ±‚ç«¯æ¨èæ–¹æ³•"><a href="#éœ€æ±‚ç«¯æ¨èæ–¹æ³•" class="headerlink" title="éœ€æ±‚ç«¯æ¨èæ–¹æ³•"></a>éœ€æ±‚ç«¯æ¨èæ–¹æ³•</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/recommend.png" alt="å›¾ï¼šrecommend"></p><h2 id="å¹¿å‘Šæµé‡äº¤æ˜“æ–¹å¼"><a href="#å¹¿å‘Šæµé‡äº¤æ˜“æ–¹å¼" class="headerlink" title="å¹¿å‘Šæµé‡äº¤æ˜“æ–¹å¼"></a>å¹¿å‘Šæµé‡äº¤æ˜“æ–¹å¼</h2><p><img src="/2019/11/22/ji-suan-guang-gao-zhi-li-lun/trade.png" alt="å›¾ï¼štrade"></p><p><strong>ä¼˜å…ˆé”€å”®ï¼š</strong></p><ul><li>CPTç»“ç®—</li><li>GDï¼ˆæ‹…ä¿å¼æŠ•æ”¾ï¼‰ï¼šCPM ç»“ç®— + äººç¾¤å®šå‘</li></ul><p><strong>ç¨‹åºäº¤æ˜“ï¼š</strong></p><ul><li>ç«ä»·å¹¿å‘Šï¼ˆAd networkï¼‰</li><li><p>å®æ—¶ç«ä»·å¹¿å‘Šï¼ˆAdxï¼‰</p></li><li><p>DSPï¼šnetwork optimization + RTBD</p></li><li>SSPï¼športfolio selection + RTBS</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—å¹¿å‘Š </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç†è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŒåœºé€šç”¨æŠ€èƒ½ä¹‹èŒä¸šè§„åˆ’</title>
      <link href="/2019/11/21/zhi-chang-tong-yong-ji-neng-zhi-zhi-ye-gui-hua/"/>
      <url>/2019/11/21/zhi-chang-tong-yong-ji-neng-zhi-zhi-ye-gui-hua/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/21/zhi-chang-tong-yong-ji-neng-zhi-zhi-ye-gui-hua/image-20210621144229801.png" alt="image-20210621144229801"></p><h1 id="ä¸€ã€ç¬”è®°"><a href="#ä¸€ã€ç¬”è®°" class="headerlink" title="ä¸€ã€ç¬”è®°"></a>ä¸€ã€ç¬”è®°</h1><h2 id="1ã€èŒä¸šä¸èŒä¸šç”Ÿæ¶¯"><a href="#1ã€èŒä¸šä¸èŒä¸šç”Ÿæ¶¯" class="headerlink" title="1ã€èŒä¸šä¸èŒä¸šç”Ÿæ¶¯"></a>1ã€èŒä¸šä¸èŒä¸šç”Ÿæ¶¯</h2><h3 id="ï¼ˆ1ï¼‰æˆ‘ä»¬å¦‚ä½•å¯¹å¾…èŒä¸šï¼ŒèŒä¸šä¹Ÿå°±å¦‚ä½•å¯¹å¾…æˆ‘ä»¬"><a href="#ï¼ˆ1ï¼‰æˆ‘ä»¬å¦‚ä½•å¯¹å¾…èŒä¸šï¼ŒèŒä¸šä¹Ÿå°±å¦‚ä½•å¯¹å¾…æˆ‘ä»¬" class="headerlink" title="ï¼ˆ1ï¼‰æˆ‘ä»¬å¦‚ä½•å¯¹å¾…èŒä¸šï¼ŒèŒä¸šä¹Ÿå°±å¦‚ä½•å¯¹å¾…æˆ‘ä»¬"></a>ï¼ˆ1ï¼‰æˆ‘ä»¬å¦‚ä½•å¯¹å¾…èŒä¸šï¼ŒèŒä¸šä¹Ÿå°±å¦‚ä½•å¯¹å¾…æˆ‘ä»¬</h3><ul><li>èŒä¸šå®ƒæ˜¯ä»˜å‡ºä¸å›æŠ¥çš„å…³ç³»ï¼Œä½ ä»˜å‡ºå¤šå°‘ï¼Œå®ƒå°±å›æŠ¥å¤šå°‘</li></ul><h3 id="ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯èŒä¸šç”Ÿæ¶¯ï¼ŒèŒä¸šç”Ÿæ¶¯åˆ†ç±»"><a href="#ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯èŒä¸šç”Ÿæ¶¯ï¼ŒèŒä¸šç”Ÿæ¶¯åˆ†ç±»" class="headerlink" title="ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯èŒä¸šç”Ÿæ¶¯ï¼ŒèŒä¸šç”Ÿæ¶¯åˆ†ç±»"></a>ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯èŒä¸šç”Ÿæ¶¯ï¼ŒèŒä¸šç”Ÿæ¶¯åˆ†ç±»</h3><ul><li>èŒä¸šç”Ÿæ¶¯å°±æ˜¯ä¸€ä¸ªäººçš„èŒä¸šç»å†</li><li>èŒä¸šç”Ÿæ¶¯åˆ†ä¸ºå¤–èŒä¸šç”Ÿæ¶¯ï¼ˆåˆ«äººç»™äºˆå’Œå†³å®šçš„ç»å†ï¼‰å’Œå†…èŒä¸šç”Ÿæ¶¯ï¼ˆè‡ªå·±ç»™è‡ªå·±çš„ç»å†ï¼‰</li><li>å†…èŒä¸šç”Ÿæ¶¯çš„å‘å±•æ˜¯å¤–èŒä¸šç”Ÿæ¶¯å‘å±•çš„å‰æï¼Œå¤–èŒä¸šç”Ÿæ¶¯ä¿ƒè¿›å†…èŒä¸šç”Ÿæ¶¯çš„å‘å±•</li></ul><h3 id="ï¼ˆ3ï¼‰å­¦ä¼šä¸ºè‡ªå·±å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯"><a href="#ï¼ˆ3ï¼‰å­¦ä¼šä¸ºè‡ªå·±å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯" class="headerlink" title="ï¼ˆ3ï¼‰å­¦ä¼šä¸ºè‡ªå·±å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯"></a>ï¼ˆ3ï¼‰å­¦ä¼šä¸ºè‡ªå·±å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯</h3><ul><li>ä¸ºè‡ªå·±å·¥ä½œï¼šä½ çš„å·¥ä½œçƒ­æƒ…å’Œç¨‹åº¦ä¸ä¸ºå…¶ä»–æ¡ä»¶è€Œæ‰€åŠ¨åˆ™æ˜¯ä¸ºè‡ªå·±å·¥ä½œï¼Œè®¸ä¸‰å¤šå°±æ˜¯ä¸ºè‡ªå·±å½“å…µ</li></ul><h3 id="ï¼ˆ4ï¼‰ç§¯æçš„é¢å¯¹å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯"><a href="#ï¼ˆ4ï¼‰ç§¯æçš„é¢å¯¹å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯" class="headerlink" title="ï¼ˆ4ï¼‰ç§¯æçš„é¢å¯¹å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯"></a>ï¼ˆ4ï¼‰ç§¯æçš„é¢å¯¹å·¥ä½œå¯ä»¥æé«˜å†…èŒä¸šç”Ÿæ¶¯</h3><ul><li>ç§¯æé¢å¯¹å·¥ä½œï¼š</li></ul><h2 id="2ã€èŒä¸šç”Ÿæ¶¯è§„åˆ’"><a href="#2ã€èŒä¸šç”Ÿæ¶¯è§„åˆ’" class="headerlink" title="2ã€èŒä¸šç”Ÿæ¶¯è§„åˆ’"></a>2ã€èŒä¸šç”Ÿæ¶¯è§„åˆ’</h2><h3 id="ï¼ˆ1ï¼‰èŒä¸šç”Ÿæ¶¯è§„åˆ’å®šä¹‰"><a href="#ï¼ˆ1ï¼‰èŒä¸šç”Ÿæ¶¯è§„åˆ’å®šä¹‰" class="headerlink" title="ï¼ˆ1ï¼‰èŒä¸šç”Ÿæ¶¯è§„åˆ’å®šä¹‰"></a>ï¼ˆ1ï¼‰èŒä¸šç”Ÿæ¶¯è§„åˆ’å®šä¹‰</h3><ul><li>æ ¹æ®ä¸»è§‚å’Œå®¢è§‚çš„æ–¹é¢å»è§„åˆ’èŒä¸šç”Ÿæ¶¯</li></ul><h3 id="ï¼ˆ2ï¼‰è¯¯åŒº"><a href="#ï¼ˆ2ï¼‰è¯¯åŒº" class="headerlink" title="ï¼ˆ2ï¼‰è¯¯åŒº"></a>ï¼ˆ2ï¼‰è¯¯åŒº</h3><ul><li>å±€éƒ¨æ€ç»´</li><li>è¦è€ƒè™‘å…¨å±€ï¼Œæ•´ä¸ªè¡Œä¸šï¼Œ<strong>è¦æƒ³åˆ°æœªæ¥çš„å½¢åŠ¿</strong></li><li>é™æ€æ€ç»´ï¼šåº”è¯¥æ˜¯åŠ¨æ€æ€ç»´ï¼Œéšç€æ—¶é—´åŠ¨æ€å‘å±•çš„</li><li>ä»ä¼—æ€ç»´ï¼šä¸è¦ä»ä¼—ï¼Œåˆ‡å¿Œäººäº‘äº¦äº‘</li></ul><h3 id="ï¼ˆ3ï¼‰å½±å“èŒä¸šç”Ÿæ¶¯çš„å› ç´ "><a href="#ï¼ˆ3ï¼‰å½±å“èŒä¸šç”Ÿæ¶¯çš„å› ç´ " class="headerlink" title="ï¼ˆ3ï¼‰å½±å“èŒä¸šç”Ÿæ¶¯çš„å› ç´ "></a>ï¼ˆ3ï¼‰å½±å“èŒä¸šç”Ÿæ¶¯çš„å› ç´ </h3><ul><li>ä¹ æƒ¯</li><li>æƒ…ç»ª</li><li>å…´è¶£</li><li>ç‰¹é•¿</li></ul><h2 id="3ã€åˆ¶å®šèŒä¸šç”Ÿæ¶¯"><a href="#3ã€åˆ¶å®šèŒä¸šç”Ÿæ¶¯" class="headerlink" title="3ã€åˆ¶å®šèŒä¸šç”Ÿæ¶¯"></a>3ã€åˆ¶å®šèŒä¸šç”Ÿæ¶¯</h2><h3 id="ï¼ˆ1ï¼‰æ˜ç¡®ç›®æ ‡"><a href="#ï¼ˆ1ï¼‰æ˜ç¡®ç›®æ ‡" class="headerlink" title="ï¼ˆ1ï¼‰æ˜ç¡®ç›®æ ‡"></a>ï¼ˆ1ï¼‰æ˜ç¡®ç›®æ ‡</h3><ul><li>ç›®æ ‡å¯¼å‘ã€ä»¥å§‹ä¸ºç»ˆ</li><li>æ–‡å­—è®°è½½ã€éšæ—¶æé†’</li></ul><h3 id="ï¼ˆ2ï¼‰è¯¦ç»†è®¡åˆ’"><a href="#ï¼ˆ2ï¼‰è¯¦ç»†è®¡åˆ’" class="headerlink" title="ï¼ˆ2ï¼‰è¯¦ç»†è®¡åˆ’"></a>ï¼ˆ2ï¼‰è¯¦ç»†è®¡åˆ’</h3><ul><li>æ€§æ ¼åˆ†æï¼šæ„Ÿæ€§è¿˜æ˜¯ç†æ€§</li><li>èŒä¸šç”Ÿæ¶¯è·¯å¾„åˆ†æï¼šå†³å®šè‡ªå·±æ˜¯èµ°å“ªæ¡è·¯ï¼Œåˆ›ä¸šè¿˜æ˜¯å…¢å…¢ä¸šä¸š</li><li>è‡ªæˆ‘swotåˆ†æï¼šæ‰¬é•¿é¿çŸ­</li><li>æ—¶é—´åˆ†è§£å’Œè‡ªæˆ‘åæ€ï¼šè‡ªå·±ç¼ºä»€ä¹ˆèµ¶å¿«è¡¥ä»€ä¹ˆ</li><li>æé«˜å­¦ä¹ åŠ›çš„ç»†åˆ†æ¨¡å‹ï¼šæ€»æ˜¯å¿†å¾€æ˜”ï¼Œè¯´æ˜ä½ è¿˜åœ¨åŸåœ°è¸æ­¥</li><li>ä»˜è¯¸è¡ŒåŠ¨å’Œåšå‡ºç»“æœï¼šä¸€å®šè¦åšï¼Œä¸åšä¸€å®šä¸ä¼šæˆåŠŸ</li></ul><h1 id="äºŒã€å‚è€ƒè¯¾ç¨‹"><a href="#äºŒã€å‚è€ƒè¯¾ç¨‹" class="headerlink" title="äºŒã€å‚è€ƒè¯¾ç¨‹"></a>äºŒã€å‚è€ƒè¯¾ç¨‹</h1><ul><li><a href="https://study.163.com/course/courseMain.htm?courseId=1003599028" target="_blank" rel="noopener">èŒä¸šç”Ÿæ¶¯è§„åˆ’</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> èŒåœºé€šç”¨æŠ€èƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èŒä¸šè§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŒåœºé€šç”¨æŠ€èƒ½ä¹‹èŒä¸šå½¢è±¡</title>
      <link href="/2019/11/20/zhi-chang-tong-yong-ji-neng-zhi-zhi-ye-xing-xiang/"/>
      <url>/2019/11/20/zhi-chang-tong-yong-ji-neng-zhi-zhi-ye-xing-xiang/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/20/zhi-chang-tong-yong-ji-neng-zhi-zhi-ye-xing-xiang/image-20210621144208497.png" alt="image-20210621144208497"></p><h1 id="ä¸€ã€ç¬”è®°"><a href="#ä¸€ã€ç¬”è®°" class="headerlink" title="ä¸€ã€ç¬”è®°"></a>ä¸€ã€ç¬”è®°</h1><h2 id="1ã€å½¢è±¡ç®¡ç†æ¦‚è®º"><a href="#1ã€å½¢è±¡ç®¡ç†æ¦‚è®º" class="headerlink" title="1ã€å½¢è±¡ç®¡ç†æ¦‚è®º"></a>1ã€å½¢è±¡ç®¡ç†æ¦‚è®º</h2><h3 id="ï¼ˆ1ï¼‰å½¢è±¡çš„å®šä¹‰"><a href="#ï¼ˆ1ï¼‰å½¢è±¡çš„å®šä¹‰" class="headerlink" title="ï¼ˆ1ï¼‰å½¢è±¡çš„å®šä¹‰"></a>ï¼ˆ1ï¼‰å½¢è±¡çš„å®šä¹‰</h3><ul><li>ä»–äººçœ¼ä¸­çš„è‡ªå·±</li></ul><h3 id="ï¼ˆ2ï¼‰å½¢è±¡çš„å½¢æˆå˜æ•°"><a href="#ï¼ˆ2ï¼‰å½¢è±¡çš„å½¢æˆå˜æ•°" class="headerlink" title="ï¼ˆ2ï¼‰å½¢è±¡çš„å½¢æˆå˜æ•°"></a>ï¼ˆ2ï¼‰å½¢è±¡çš„å½¢æˆå˜æ•°</h3><ul><li>æ€§åˆ«</li><li>å¹´é¾„</li><li>æ•™è‚²ç¨‹åº¦</li><li>èŒä¸šå’Œå·¥ä½œæ€§è´¨</li><li>å·¥ä½œå’Œå±…ä½åœ°ç¼˜</li><li>æ–‡åŒ–èƒŒæ™¯</li></ul><h3 id="ï¼ˆ3ï¼‰å½¢è±¡ç®¡ç†çš„ä¸‰ä¸ªæ­¥éª¤"><a href="#ï¼ˆ3ï¼‰å½¢è±¡ç®¡ç†çš„ä¸‰ä¸ªæ­¥éª¤" class="headerlink" title="ï¼ˆ3ï¼‰å½¢è±¡ç®¡ç†çš„ä¸‰ä¸ªæ­¥éª¤"></a>ï¼ˆ3ï¼‰å½¢è±¡ç®¡ç†çš„ä¸‰ä¸ªæ­¥éª¤</h3><ul><li>å†…åœ¨</li><li>è¡¨è¾¾ï¼šæ–‡å­—ã€è¯­è¨€ã€è§†è§‰ã€è¡Œä¸º</li><li>å…¬å…³ï¼šäº¤é™…</li></ul><h2 id="2ã€æœä»ªç®¡ç†"><a href="#2ã€æœä»ªç®¡ç†" class="headerlink" title="2ã€æœä»ªç®¡ç†"></a>2ã€æœä»ªç®¡ç†</h2><h3 id="ï¼ˆ1ï¼‰è£…æ‰®çš„ä¸‰ä¸ªå±‚é¢"><a href="#ï¼ˆ1ï¼‰è£…æ‰®çš„ä¸‰ä¸ªå±‚é¢" class="headerlink" title="ï¼ˆ1ï¼‰è£…æ‰®çš„ä¸‰ä¸ªå±‚é¢"></a>ï¼ˆ1ï¼‰è£…æ‰®çš„ä¸‰ä¸ªå±‚é¢</h3><ul><li>å¿ƒç†</li><li>ç”Ÿç†</li><li>ç¤¾ä¼š</li></ul><h3 id="ï¼ˆ2ï¼‰ä¸»æµå®¡ç¾è§‚"><a href="#ï¼ˆ2ï¼‰ä¸»æµå®¡ç¾è§‚" class="headerlink" title="ï¼ˆ2ï¼‰ä¸»æµå®¡ç¾è§‚"></a>ï¼ˆ2ï¼‰ä¸»æµå®¡ç¾è§‚</h3><ul><li>å½¢è±¡è¢«ä¸€åŠä»¥ä¸Šäººè®¤åŒï¼Œå°±æ˜¯ä¸»æµå®¡ç¾è§‚</li></ul><h3 id="ï¼ˆ3ï¼‰ç¤¾ä¼šæœŸæœ›å€¼"><a href="#ï¼ˆ3ï¼‰ç¤¾ä¼šæœŸæœ›å€¼" class="headerlink" title="ï¼ˆ3ï¼‰ç¤¾ä¼šæœŸæœ›å€¼"></a>ï¼ˆ3ï¼‰ç¤¾ä¼šæœŸæœ›å€¼</h3><ul><li>å½¢è±¡é£é™©ï¼Œä»€ä¹ˆè¡Œä¸šå°±ç©¿ç¬¦åˆè¯¥è¡Œä¸šçš„æœè£…</li><li>é€‚åˆå·¥ä½œçš„æœè£…ï¼Œå’Œä¸é€‚åˆå·¥ä½œçš„æœè£…</li></ul><h3 id="ï¼ˆ4ï¼‰ç©¿ç€çš„TPO"><a href="#ï¼ˆ4ï¼‰ç©¿ç€çš„TPO" class="headerlink" title="ï¼ˆ4ï¼‰ç©¿ç€çš„TPO"></a>ï¼ˆ4ï¼‰ç©¿ç€çš„TPO</h3><ul><li>æ—¶é—´</li><li>åœ°ç‚¹</li><li>åœºåˆ</li></ul><h3 id="ï¼ˆ5ï¼‰ç”·å£«æœè£…é£æ ¼åˆ†æ"><a href="#ï¼ˆ5ï¼‰ç”·å£«æœè£…é£æ ¼åˆ†æ" class="headerlink" title="ï¼ˆ5ï¼‰ç”·å£«æœè£…é£æ ¼åˆ†æ"></a>ï¼ˆ5ï¼‰ç”·å£«æœè£…é£æ ¼åˆ†æ</h3><ul><li>ä¼‘é—²æœ</li><li>å•†åŠ¡è£…</li><li>å•†åŠ¡ä¼‘é—²è£…</li></ul><h3 id="ï¼ˆ6ï¼‰å¥³å£«æœè£…é£æ ¼åˆ†æ"><a href="#ï¼ˆ6ï¼‰å¥³å£«æœè£…é£æ ¼åˆ†æ" class="headerlink" title="ï¼ˆ6ï¼‰å¥³å£«æœè£…é£æ ¼åˆ†æ"></a>ï¼ˆ6ï¼‰å¥³å£«æœè£…é£æ ¼åˆ†æ</h3><h3 id="ï¼ˆ7ï¼‰èº«æåˆ†æ"><a href="#ï¼ˆ7ï¼‰èº«æåˆ†æ" class="headerlink" title="ï¼ˆ7ï¼‰èº«æåˆ†æ"></a>ï¼ˆ7ï¼‰èº«æåˆ†æ</h3><ul><li>æ¯”ä¾‹ï¼šå¤´èº«ï¼Œè¶´ç€ç¡å’Œæ–œç€ç¡ï¼Œèººç€ç¡ä¼šè®©è„¸æ¨ªå‘å‘å±•</li><li>æ›²çº¿ï¼ˆå¥³ç”Ÿï¼‰</li></ul><h3 id="ï¼ˆ8ï¼‰ä»¥æœè£…ä¿®é¥°èº«æ"><a href="#ï¼ˆ8ï¼‰ä»¥æœè£…ä¿®é¥°èº«æ" class="headerlink" title="ï¼ˆ8ï¼‰ä»¥æœè£…ä¿®é¥°èº«æ"></a>ï¼ˆ8ï¼‰ä»¥æœè£…ä¿®é¥°èº«æ</h3><ul><li><a href="https://www.zhihu.com/question/20872048" target="_blank" rel="noopener">çŸ¥ä¹å›ç­”</a></li></ul><h3 id="ï¼ˆ9ï¼‰è‰²å½©æ­é…åŸç†"><a href="#ï¼ˆ9ï¼‰è‰²å½©æ­é…åŸç†" class="headerlink" title="ï¼ˆ9ï¼‰è‰²å½©æ­é…åŸç†"></a>ï¼ˆ9ï¼‰è‰²å½©æ­é…åŸç†</h3><ul><li><a href="https://zh.wikihow.com/æ­é…è¡£æœé¢œè‰²" target="_blank" rel="noopener">wikihow</a></li></ul><h2 id="3ã€ä»ªæ€ç¾å­¦"><a href="#3ã€ä»ªæ€ç¾å­¦" class="headerlink" title="3ã€ä»ªæ€ç¾å­¦"></a>3ã€ä»ªæ€ç¾å­¦</h2><h3 id="ï¼ˆ1ï¼‰åŸºæœ¬ç«™å§¿"><a href="#ï¼ˆ1ï¼‰åŸºæœ¬ç«™å§¿" class="headerlink" title="ï¼ˆ1ï¼‰åŸºæœ¬ç«™å§¿"></a>ï¼ˆ1ï¼‰åŸºæœ¬ç«™å§¿</h3><h3 id="ï¼ˆ2ï¼‰ä¼˜é›…åå§¿"><a href="#ï¼ˆ2ï¼‰ä¼˜é›…åå§¿" class="headerlink" title="ï¼ˆ2ï¼‰ä¼˜é›…åå§¿"></a>ï¼ˆ2ï¼‰ä¼˜é›…åå§¿</h3><h2 id="4ã€è¡Œä¸ºå½¢è±¡"><a href="#4ã€è¡Œä¸ºå½¢è±¡" class="headerlink" title="4ã€è¡Œä¸ºå½¢è±¡"></a>4ã€è¡Œä¸ºå½¢è±¡</h2><h3 id="ï¼ˆ1ï¼‰ç¤¼è²Œé—®é¢˜"><a href="#ï¼ˆ1ï¼‰ç¤¼è²Œé—®é¢˜" class="headerlink" title="ï¼ˆ1ï¼‰ç¤¼è²Œé—®é¢˜"></a>ï¼ˆ1ï¼‰ç¤¼è²Œé—®é¢˜</h3><ul><li>çŸ¥è¯†</li><li>å¸¸è¯†</li><li>åŒç†å¿ƒï¼ˆåŸºç¡€ï¼‰</li></ul><h3 id="ï¼ˆ2ï¼‰ä¸ªäººéšç§"><a href="#ï¼ˆ2ï¼‰ä¸ªäººéšç§" class="headerlink" title="ï¼ˆ2ï¼‰ä¸ªäººéšç§"></a>ï¼ˆ2ï¼‰ä¸ªäººéšç§</h3><ul><li>èº«é«˜</li><li>å¹´é¾„</li></ul><h1 id="äºŒã€å‚è€ƒè¯¾ç¨‹ä¿¡æ¯"><a href="#äºŒã€å‚è€ƒè¯¾ç¨‹ä¿¡æ¯" class="headerlink" title="äºŒã€å‚è€ƒè¯¾ç¨‹ä¿¡æ¯"></a>äºŒã€å‚è€ƒè¯¾ç¨‹ä¿¡æ¯</h1><ul><li><a href="https://study.163.com/course/courseMain.htm?courseId=680003" target="_blank" rel="noopener">ç¾ä¸½ç™¾åˆ†ç™¾-ä¸ªäººå½¢è±¡ç®¡ç†</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> èŒåœºé€šç”¨æŠ€èƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èŒä¸šå½¢è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹sql</title>
      <link href="/2019/11/19/shi-yong-gong-ju-zhi-sql/"/>
      <url>/2019/11/19/shi-yong-gong-ju-zhi-sql/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/19/shi-yong-gong-ju-zhi-sql/image-20210621144823221.png" alt="image-20210621144823221"></p><h1 id="ä¸€ã€SqlåŸºç¡€"><a href="#ä¸€ã€SqlåŸºç¡€" class="headerlink" title="ä¸€ã€SqlåŸºç¡€"></a>ä¸€ã€SqlåŸºç¡€</h1><p><a href="llljl.md">git</a></p>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹MySQL</title>
      <link href="/2019/11/18/shi-yong-gong-ju-zhi-mysql/"/>
      <url>/2019/11/18/shi-yong-gong-ju-zhi-mysql/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/18/shi-yong-gong-ju-zhi-mysql/image-20210621145055259.png" alt="image-20210621145055259"></p><h1 id="ä¸€ã€MySqlåŸºç¡€"><a href="#ä¸€ã€MySqlåŸºç¡€" class="headerlink" title="ä¸€ã€MySqlåŸºç¡€"></a>ä¸€ã€MySqlåŸºç¡€</h1><h2 id="1ã€MySqlç®€ä»‹"><a href="#1ã€MySqlç®€ä»‹" class="headerlink" title="1ã€MySqlç®€ä»‹"></a>1ã€MySqlç®€ä»‹</h2><h3 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯MySqlï¼Ÿ"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯MySqlï¼Ÿ" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯MySqlï¼Ÿ"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯MySqlï¼Ÿ</h3><ul><li>MySqlè½¯ä»¶æä¾›äº†ä¸€ä¸ªéå¸¸å¿«é€Ÿã€å¤šçº¿ç¨‹ã€å¤šç”¨æˆ·å’Œå¥å£®çš„Sqlæ•°æ®åº“æœåŠ¡å™¨ï¼ˆç»“æ„åŒ–æŸ¥è¯¢ï¼‰ã€‚MySqlæœåŠ¡å™¨é€‚ç”¨äºä»»åŠ¡å…³é”®å‹ã€é«˜è´Ÿè½½çš„ç”Ÿäº§ç³»ç»Ÿä»¥åŠåµŒå…¥åˆ°å¤§è§„æ¨¡éƒ¨ç½²çš„è½¯ä»¶ä¸­ã€‚</li></ul><h3 id="ï¼ˆ2ï¼‰å®‰è£…"><a href="#ï¼ˆ2ï¼‰å®‰è£…" class="headerlink" title="ï¼ˆ2ï¼‰å®‰è£…"></a>ï¼ˆ2ï¼‰å®‰è£…</h3><ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/installing.html" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a></li></ul><h3 id="ï¼ˆ3ï¼‰å¯åŠ¨"><a href="#ï¼ˆ3ï¼‰å¯åŠ¨" class="headerlink" title="ï¼ˆ3ï¼‰å¯åŠ¨"></a>ï¼ˆ3ï¼‰å¯åŠ¨</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">mysql -h host -u user -p# Enter password: ********<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="ï¼ˆ4ï¼‰é€€å‡º"><a href="#ï¼ˆ4ï¼‰é€€å‡º" class="headerlink" title="ï¼ˆ4ï¼‰é€€å‡º"></a>ï¼ˆ4ï¼‰é€€å‡º</h3><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">QUIT<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2ã€"><a href="#2ã€" class="headerlink" title="2ã€"></a>2ã€</h2><h1 id="äºŒã€MySqlè¿›é˜¶"><a href="#äºŒã€MySqlè¿›é˜¶" class="headerlink" title="äºŒã€MySqlè¿›é˜¶"></a>äºŒã€MySqlè¿›é˜¶</h1><h1 id="ä¸‰ã€å‚è€ƒä¹¦ç±"><a href="#ä¸‰ã€å‚è€ƒä¹¦ç±" class="headerlink" title="ä¸‰ã€å‚è€ƒä¹¦ç±"></a>ä¸‰ã€å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/" target="_blank" rel="noopener">å®˜æ–¹æ•™ç¨‹</a></li></ul><h1 id="å››ã€ç–‘éš¾è§£ç­”"><a href="#å››ã€ç–‘éš¾è§£ç­”" class="headerlink" title="å››ã€ç–‘éš¾è§£ç­”"></a>å››ã€ç–‘éš¾è§£ç­”</h1><h2 id="MySQLå†™å‡ºæ–‡ä»¶"><a href="#MySQLå†™å‡ºæ–‡ä»¶" class="headerlink" title="MySQLå†™å‡ºæ–‡ä»¶"></a>MySQLå†™å‡ºæ–‡ä»¶</h2><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">mysql -hhost -uuser -ppassword db -A --default-character-set=latin1 -e 'mysql' >> ~/dongtai.xls<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹git</title>
      <link href="/2019/11/12/shi-yong-gong-ju-zhi-git/"/>
      <url>/2019/11/12/shi-yong-gong-ju-zhi-git/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/image-20210621152942100.png" alt="image-20210621152942100"></p><h1 id="GitåŸºç¡€"><a href="#GitåŸºç¡€" class="headerlink" title="GitåŸºç¡€"></a>GitåŸºç¡€</h1><h2 id="1ã€Gitç®€ä»‹"><a href="#1ã€Gitç®€ä»‹" class="headerlink" title="1ã€Gitç®€ä»‹"></a>1ã€Gitç®€ä»‹</h2><h3 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Gitï¼Ÿ"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Gitï¼Ÿ" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Gitï¼Ÿ"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Gitï¼Ÿ</h3><ul><li>Gitæ˜¯è¿„ä»Šä¸ºæ­¢æœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</li></ul><h3 id="ï¼ˆ2ï¼‰Gitå®‰è£…"><a href="#ï¼ˆ2ï¼‰Gitå®‰è£…" class="headerlink" title="ï¼ˆ2ï¼‰Gitå®‰è£…"></a>ï¼ˆ2ï¼‰Gitå®‰è£…</h3><ul><li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener">å®‰è£…æ•™ç¨‹</a></li></ul><h3 id="ï¼ˆ3ï¼‰Gitè®¾ç½®"><a href="#ï¼ˆ3ï¼‰Gitè®¾ç½®" class="headerlink" title="ï¼ˆ3ï¼‰Gitè®¾ç½®"></a>ï¼ˆ3ï¼‰Gitè®¾ç½®</h3><ol><li>checking your settings</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git config --list  # æŸ¥çœ‹gitçš„æ‰€æœ‰é…ç½®<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ4ï¼‰GitLabå’ŒGitHubä¸€èµ·ä½¿ç”¨"><a href="#ï¼ˆ4ï¼‰GitLabå’ŒGitHubä¸€èµ·ä½¿ç”¨" class="headerlink" title="ï¼ˆ4ï¼‰GitLabå’ŒGitHubä¸€èµ·ä½¿ç”¨"></a>ï¼ˆ4ï¼‰GitLabå’ŒGitHubä¸€èµ·ä½¿ç”¨</h3><ul><li><p>é€šå¸¸å…¬å¸æ˜¯ä½¿ç”¨GitLabï¼Œè€Œä¸ªäººæ˜¯ä½¿ç”¨GitHubã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šåœ¨ä¸€å°ç”µè„‘ä¸ŠåŒæ—¶ä½¿ç”¨GitLabå’ŒGitHubåº”è¯¥å¦‚ä½•é…ç½®ï¼Ÿ</p><p>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p></li></ul><ol><li>ç”Ÿæˆå…¬é’¥ã€å¯†é’¥</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># GitLabssh-keygen -t rsa -C "æ³¨å†Œçš„GitLabé‚®ç®±"  # å…¬é’¥ã€å¯†é’¥åè¾“å…¥gitlab_id_rsaï¼Œå…¶ä»–ä¸€å¾‹å›è½¦# GitHubssh-keygen -t rsa -C "æ³¨å†Œçš„GitHubé‚®ç®±"  # å…¬é’¥ã€å¯†é’¥åè¾“å…¥github_id_rsaï¼Œå…¶ä»–ä¸€å¾‹å›è½¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¤‡æ³¨ï¼š</strong></p><ol><li>ä¸Šè¿°ä»£ç å®Œæˆåä¼šåœ¨<code>~/.ssh/</code>ç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼šgithub_id_rsaã€github_id_rsa.pubã€gitlab_id_rsaã€gitlab_id_rsa.pub</li><li>å°†github_id_rsa.pubçš„å†…å®¹é…ç½®åˆ°GitHubç½‘ç«™çš„sshkeyä¸­ï¼Œå°†gitlab_id_rsa.pubçš„å†…å®¹é…ç½®åˆ°GitLabç½‘ç«™çš„sshkeyä¸­</li><li>åœ¨<code>~/.ssh/</code>ç›®å½•ä¸‹åˆ›å»ºconfigæ–‡ä»¶ï¼Œå‘Šè¯‰gitä¸åŒå¹³å°ä½¿ç”¨ä¸åŒkey</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">cd ~/.ssh  # cd åˆ°keyç›®å½•vi config  # åˆ›å»ºå¹¶ç¼–è¾‘config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># configå†…å®¹å¦‚ä¸‹# gitlabHost gitlab.yourcompany.comHostName gitlab.yourcompany.comUser gitPort yourportPreferredAuthentications publickeyIdentityFile ~/.ssh/gitlab_id_rsa# githubHost github.comHostName github.comPreferredAuthentications publickeyIdentityFile ~/.ssh/github_id_rsa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¤‡æ³¨ï¼š</strong></p><ul><li>Hostæ˜¯åˆ«åï¼Œå»ºè®®ä¸HostNameåå­—ä¸€è‡´ï¼</li><li>æŠŠå·¥ä½œç”¨çš„GitLabçš„<code>git config</code>é…ç½®æˆglobal</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">cd ~/workspace/gitlab  # gitlabçš„å·¥ä½œä»“åº“git initgit config --global user.name 'personal'git config --global user.email 'personal@company.com'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æŠŠä¸ªäººç”¨çš„GitHubçš„<code>git config</code>é…ç½®æˆlocal</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">cd ~/workspace/github  # githubçš„å·¥ä½œä»“åº“git initgit config --local user.name 'yourname'git config --local user.email 'youremail'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>user.eamil</code>å»ºè®®ä½¿ç”¨ç½‘ç«™æä¾›çš„<strong>åŠ å¯†é‚®ç®±</strong>ï¼Œä¾‹å¦‚GitHubçš„åŠ å¯†é‚®ç®±å¯ä»¥ä»GitHubç½‘ç«™çš„ä¸ªäººsettingä¸­çš„Emailsæ ç›®ä¸­æ‰¾åˆ°ã€‚å¦‚ä¸‹ï¼š</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">*@users.noreply.github.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2ã€åˆ›å»ºç‰ˆæœ¬åº“"><a href="#2ã€åˆ›å»ºç‰ˆæœ¬åº“" class="headerlink" title="2ã€åˆ›å»ºç‰ˆæœ¬åº“"></a>2ã€åˆ›å»ºç‰ˆæœ¬åº“</h2><h3 id="ï¼ˆ1ï¼‰å°†å·²æœ‰æ–‡ä»¶å¤¹å˜ä¸ºç‰ˆæœ¬åº“"><a href="#ï¼ˆ1ï¼‰å°†å·²æœ‰æ–‡ä»¶å¤¹å˜ä¸ºç‰ˆæœ¬åº“" class="headerlink" title="ï¼ˆ1ï¼‰å°†å·²æœ‰æ–‡ä»¶å¤¹å˜ä¸ºç‰ˆæœ¬åº“"></a>ï¼ˆ1ï¼‰å°†å·²æœ‰æ–‡ä»¶å¤¹å˜ä¸ºç‰ˆæœ¬åº“</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">cd /home/user/my_project  # åˆ‡æ¢åˆ°æƒ³è¦åˆå§‹åŒ–çš„æ–‡ä»¶å¤¹git init  # åˆå§‹åŒ–ä¸ºç‰ˆæœ¬åº“ï¼Œæ–‡ä»¶å¤¹ä¼šå‡ºç°.gitçš„éšè—æ–‡ä»¶å¤¹git remote add origin ssh://git@github.com:myhaa/How-To-Ask-Questions-The-Smart-Way.gitgit add .  # æ·»åŠ æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºgit commit -m "your commit description"  # æäº¤æš‚å­˜åŒºæ‰€æœ‰æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“å¹¶ä¿å­˜æäº¤è®°å½•<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ï¼ˆ2ï¼‰ä»è¿œå¤„ä»“åº“ï¼ˆGitLab-GitHubï¼‰å…‹éš†"><a href="#ï¼ˆ2ï¼‰ä»è¿œå¤„ä»“åº“ï¼ˆGitLab-GitHubï¼‰å…‹éš†" class="headerlink" title="ï¼ˆ2ï¼‰ä»è¿œå¤„ä»“åº“ï¼ˆGitLab\GitHubï¼‰å…‹éš†"></a>ï¼ˆ2ï¼‰ä»è¿œå¤„ä»“åº“ï¼ˆGitLab\GitHubï¼‰å…‹éš†</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">cd /home/user/my_project  # åˆ‡æ¢åˆ°æƒ³è¦å­˜æ”¾ç‰ˆæœ¬åº“çš„æ–‡ä»¶å¤¹git clone https://github.com/myhaa/How-To-Ask-Questions-The-Smart-Way.git  # clone httpsåœ°å€git clone ssh://git@github.com:myhaa/How-To-Ask-Questions-The-Smart-Way.git  # clone sshåœ°å€cd How-To-Ask-Questions-The-Smart-Way  # è¿›å…¥cloneçš„ç‰ˆæœ¬åº“æ–‡ä»¶å¤¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€æ“ä½œç‰ˆæœ¬åº“"><a href="#3ã€æ“ä½œç‰ˆæœ¬åº“" class="headerlink" title="3ã€æ“ä½œç‰ˆæœ¬åº“"></a>3ã€æ“ä½œç‰ˆæœ¬åº“</h2><h3 id="ï¼ˆ1ï¼‰ç‰ˆæœ¬åº“ä¸­æ–‡ä»¶çš„ä¸¤ç§çŠ¶æ€"><a href="#ï¼ˆ1ï¼‰ç‰ˆæœ¬åº“ä¸­æ–‡ä»¶çš„ä¸¤ç§çŠ¶æ€" class="headerlink" title="ï¼ˆ1ï¼‰ç‰ˆæœ¬åº“ä¸­æ–‡ä»¶çš„ä¸¤ç§çŠ¶æ€"></a>ï¼ˆ1ï¼‰ç‰ˆæœ¬åº“ä¸­æ–‡ä»¶çš„ä¸¤ç§çŠ¶æ€</h3><ol><li>æœªè¿½è¸ªçŠ¶æ€ï¼ˆ<em>untracked</em>ï¼‰ï¼šä»æœª<strong>add+commit</strong>çš„æ–‡ä»¶ï¼ˆUntracked files:ï¼‰</li><li>è¿½è¸ªçŠ¶æ€ï¼ˆ<em>tracked</em>ï¼‰ï¼šæ›¾ç»<strong>add+commit</strong>è¿‡çš„æ–‡ä»¶<ul><li>æœªä¿®æ”¹ï¼ˆunmodifiedï¼‰ï¼šåœ¨ç‰ˆæœ¬åº“ä¸­</li><li>å·²ä¿®æ”¹ï¼ˆmodifiedï¼‰ï¼šChanges not staged for commit:</li><li>æš‚å­˜ï¼ˆstagedï¼‰ï¼šChanges to be committed:</li></ul></li><li>è¯¦æƒ…å¦‚ä¸‹å›¾ï¼ˆå›¾æ¥è‡ªï¼š<a href="https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository" target="_blank" rel="noopener">https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository</a>ï¼‰</li></ol><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/lifecycle.png" alt="å›¾1ï¼šç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶çŠ¶æ€"></p><h3 id="ï¼ˆ2ï¼‰Tracking-New-Files-untracked"><a href="#ï¼ˆ2ï¼‰Tracking-New-Files-untracked" class="headerlink" title="ï¼ˆ2ï¼‰Tracking New Files(untracked)"></a>ï¼ˆ2ï¼‰Tracking New Files(untracked)</h3><ol><li>æŸ¥çœ‹ç‰ˆæœ¬åº“çŠ¶æ€å‘ç°READMEæ–‡ä»¶æ˜¯<code>Untracked file</code>ã€‚</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">$ git statusOn branch masterYour branch is up-to-date with 'origin/master'.Untracked files:  (use "git add <file>..." to include in what will be committed)    READMEnothing added to commit but untracked files present (use "git add" to track)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>å°†READMEæ·»åŠ åˆ°æš‚å­˜åŒºå¹¶æäº¤åˆ°ç‰ˆæœ¬åº“</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git add README  # æ·»åŠ åˆ°æš‚å­˜åŒºï¼ˆstagedï¼‰å‘ç°READMEçŠ¶æ€ä¸ºï¼ˆChanges to be committed: new fileï¼‰git commit -m "add README"  # æäº¤åˆ°ç‰ˆæœ¬åº“<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="ï¼ˆ3ï¼‰Staging-Modified-Files-tracked"><a href="#ï¼ˆ3ï¼‰Staging-Modified-Files-tracked" class="headerlink" title="ï¼ˆ3ï¼‰Staging Modified Files(tracked)"></a>ï¼ˆ3ï¼‰Staging Modified Files(tracked)</h3><ol><li>ä¿®æ”¹åˆšåˆšæäº¤åˆ°ç‰ˆæœ¬åº“çš„READMEæ–‡ä»¶</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">vi README  # ç”¨vimä¿®æ”¹READMEæ–‡ä»¶git status  # æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€å‘ç°READMEçš„çŠ¶æ€ä¸ºï¼ˆChanges not staged for commit: modifiedï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>å°†READMEæ·»åŠ åˆ°æš‚å­˜åŒºå¹¶æäº¤åˆ°ç‰ˆæœ¬åº“</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git add README  # æ·»åŠ åˆ°æš‚å­˜åŒºï¼ˆstagedï¼‰git commit -m "update README"  # æäº¤åˆ°ç‰ˆæœ¬åº“<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="ï¼ˆ4ï¼‰Viewing-Your-Staged-and-Unstaged-Changes"><a href="#ï¼ˆ4ï¼‰Viewing-Your-Staged-and-Unstaged-Changes" class="headerlink" title="ï¼ˆ4ï¼‰Viewing Your Staged and Unstaged Changes"></a>ï¼ˆ4ï¼‰Viewing Your Staged and Unstaged Changes</h3><ol><li>æ¯”è¾ƒ<code>Changes not staged for commit:</code>ä¸‹çš„æ–‡ä»¶ä¸æœ¬åœ°æœ€æ–°ç‰ˆæœ¬åº“çš„å·®åˆ«ï¼š</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git diff<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>æ¯”è¾ƒ<code>Changes to be committed:</code>ä¸‹çš„æ–‡ä»¶ä¸æœ¬åœ°æœ€æ–°ç‰ˆæœ¬åº“çš„å·®åˆ«ï¼š</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git diff --stagedgit diff --cached<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>æ¯”è¾ƒ<code>Changes not staged for commit:</code>å’Œ<code>Changes to be committed:</code>ä¸‹åŒåæ–‡ä»¶çš„å·®åˆ«</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git diff<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ5ï¼‰é…ç½®å¿½ç•¥æ–‡ä»¶ï¼ˆIgnoring-Filesï¼‰"><a href="#ï¼ˆ5ï¼‰é…ç½®å¿½ç•¥æ–‡ä»¶ï¼ˆIgnoring-Filesï¼‰" class="headerlink" title="ï¼ˆ5ï¼‰é…ç½®å¿½ç•¥æ–‡ä»¶ï¼ˆIgnoring Filesï¼‰"></a>ï¼ˆ5ï¼‰é…ç½®å¿½ç•¥æ–‡ä»¶ï¼ˆIgnoring Filesï¼‰</h3><ul><li><p>é€šå¸¸ä¼šæœ‰ä¸€ç±»æ–‡ä»¶æ˜¯ä½ ä¸å¸Œæœ›Gitè‡ªåŠ¨æ·»åŠ æˆ–æ˜¾ç¤ºä¸ºæœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼Œä¾‹å¦‚æ—¥å¿—æ–‡ä»¶æˆ–æ„å»ºç³»ç»Ÿç”Ÿæˆçš„æ–‡ä»¶ã€‚ è¿™ç§æƒ…å†µä¸‹å¯ä»¥åˆ›å»ºå¿½ç•¥æ–‡ä»¶<code>.gitignore</code>æ¥é¿å…ã€‚ </p></li><li><p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹.gitignoreæ–‡ä»¶ï¼š</p></li></ul><pre class="line-numbers language-lang-txt"><code class="language-lang-txt"># ignore all .a files*.a# but do track lib.a, even though you're ignoring .a files above!lib.a# only ignore the TODO file in the current directory, not subdir/TODO/TODO# ignore all files in any directory named buildbuild/# ignore doc/notes.txt, but not doc/server/arch.txtdoc/*.txt# ignore all .pdf files in the doc/ directory and any of its subdirectoriesdoc/**/*.pdf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ï¼ˆ6ï¼‰Removing-and-Moving-files"><a href="#ï¼ˆ6ï¼‰Removing-and-Moving-files" class="headerlink" title="ï¼ˆ6ï¼‰Removing and Moving files"></a>ï¼ˆ6ï¼‰Removing and Moving files</h3><ol><li>short status</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git status -s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>skipping the staging area</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git commit -a -m 'added new benchmarks'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>removing files</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># ç¬¬ä¸€ç§æƒ…å†µï¼šæ‰‹åŠ¨åˆ é™¤æˆ–ä½¿ç”¨rmå‘½ä»¤rm PROJECTS.mdgit add PROJECTS.mdgit commit "rm PROJECTS.md"# ç¬¬äºŒç§æƒ…å†µï¼šä½¿ç”¨git rmå‘½ä»¤åˆ é™¤git rm PROJECTS.mdgit commit "git rm PROJECTS.md"# ç¬¬ä¸‰ç§æƒ…å†µï¼šåˆ é™¤Changes to be committed:æˆ–è€…Changes not staged for commit:ä¸‹æ˜¾ç¤ºçš„æ–‡ä»¶git rm -f PROJECTS.mdgit commit "git rm -f PROJECTS.md"# ç¬¬å››ç§æƒ…å†µï¼šæ‚¨å¯èƒ½æƒ³è¦åšçš„æ˜¯å°†æ–‡ä»¶ä¿ç•™åœ¨å·¥ä½œæ ‘ä¸­ï¼Œä½†å°†å…¶ä»æš‚å­˜åŒºä¸­åˆ é™¤ã€‚æ¢å¥è¯è¯´ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†æ–‡ä»¶ä¿ç•™åœ¨ç¡¬ç›˜ä¸Šï¼Œä½†ä¸å†éœ€è¦Gitå¯¹å…¶è¿›è¡Œè·Ÿè¸ªã€‚git rm --cached PROJECTS.mdgit commit "git rm --cached PROJECTS.md"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>moving files</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git mv file_from file_to  # é‡å‘½åfile_fromä¸ºfile_togit commit -m "rename file_from"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="ï¼ˆ7ï¼‰æŸ¥çœ‹ç‰ˆæœ¬åº“æäº¤å†å²"><a href="#ï¼ˆ7ï¼‰æŸ¥çœ‹ç‰ˆæœ¬åº“æäº¤å†å²" class="headerlink" title="ï¼ˆ7ï¼‰æŸ¥çœ‹ç‰ˆæœ¬åº“æäº¤å†å²"></a>ï¼ˆ7ï¼‰æŸ¥çœ‹ç‰ˆæœ¬åº“æäº¤å†å²</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git log  # æŸ¥çœ‹å†å²git log -p -2  # æŸ¥çœ‹æœ€æ–°2ä¸ªcommitçš„å†å²ï¼ˆåŒ…å«git diffç»“æœï¼‰git log --stat  # æŸ¥çœ‹æäº¤å†å²çš„ä¸€äº›ç®€çŸ­ç»Ÿè®¡ä¿¡æ¯git log --pretty=oneline  # æ¯ä¸ªcommitç”¨ä¸€è¡Œè¾“å‡ºgit log --pretty=format:"%h - %an, %ar : %s"  # æŒ‰æŒ‡å®šæ ¼å¼è¾“å‡ºgit log --pretty=format:"%h %s" --graph  # å›¾å½¢åŒ–git log --since=2.weeks  # è¿‡å»2å‘¨çš„æäº¤å†å²git log --pretty="%h - %s" --author='Junio C Hamano' --since="2008-10-01" --before="2008-11-01" --no-merges -- t/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>æ³¨æ„ï¼š</strong>æ›´å¤šè¯¦æƒ…è¯·è§<a href="https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History" target="_blank" rel="noopener">git log</a></li></ul><h3 id="ï¼ˆ8ï¼‰å›é€€æ“ä½œï¼ˆundoing-thingsï¼‰"><a href="#ï¼ˆ8ï¼‰å›é€€æ“ä½œï¼ˆundoing-thingsï¼‰" class="headerlink" title="ï¼ˆ8ï¼‰å›é€€æ“ä½œï¼ˆundoing thingsï¼‰"></a>ï¼ˆ8ï¼‰å›é€€æ“ä½œï¼ˆundoing thingsï¼‰</h3><ol><li>å½“ä½ commitåå‘ç°æ­¤æ¬¡commitçš„messageå‡ºç°é”™è¯¯æˆ–è€…å¿˜è®°addä¸€äº›æ–‡ä»¶æ—¶ï¼š</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git commit --amend  # ä¿®æ”¹commitä¿¡æ¯ï¼Œctrl+oä¿å­˜ï¼Œå›è½¦ï¼Œctrl+xé€€å‡º<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>unstaging a staged file(Changes to be committed:)</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git reset HEAD CONTRIBUTING.md  # å°†æš‚å­˜åŒºçš„æŸä¸€ä¸ªæ–‡ä»¶é€€å›åˆ°å·¥ä½œåŒº<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>unmodifying a modified file(Changes not staged for commit:)</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git checkout -- CONTRIBUTING.md  # æ’¤é”€å¯¹æŸæ–‡ä»¶çš„ä¿®æ”¹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><strong>æ³¨æ„ï¼š</strong>å›é€€æ“ä½œå¼‚å¸¸å±é™©ï¼Œè°¨æ…ä½¿ç”¨ï¼ï¼ï¼</li></ul><h3 id="ï¼ˆ9ï¼‰è¿œç¨‹ä»“åº“æ“ä½œ"><a href="#ï¼ˆ9ï¼‰è¿œç¨‹ä»“åº“æ“ä½œ" class="headerlink" title="ï¼ˆ9ï¼‰è¿œç¨‹ä»“åº“æ“ä½œ"></a>ï¼ˆ9ï¼‰è¿œç¨‹ä»“åº“æ“ä½œ</h3><ol><li>showing your remotes</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git remotegit remote -v  # è¯¦ç»†ä¿¡æ¯git remote show origin  # è¯¦ç»†ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol><li>æ·»åŠ è¿œç¨‹ä»“åº“</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git remote add <shortname> <url>  # é€šç”¨ä»£ç git remote add pb https://github.com/paulboone/ticgit  # pb æ˜¯ç»™è¯¥è¿œç¨‹ä»“åº“è®¾å®šçš„åˆ«å<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°ä½†ä¸è‡ªåŠ¨merge</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git fetch <remote>  # é€šç”¨ä»£ç git fetch origingit fetch pb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol><li>ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°å¹¶è‡ªåŠ¨merge</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git pull <remote>  # é€šç”¨ä»£ç git pull origingit pull pb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol><li>å°†æœ¬åœ°åº“æ¨é€è¿œç¨‹ä»“åº“</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git push <remote> <branch>  # é€šç”¨ä»£ç git push origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>å°†è¿œç¨‹ä»“åº“é‡å‘½å</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git remote rename pb paul  # å°†pbé‡å‘½åä¸ºpaul<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>ç§»é™¤æŸä¸ªè¿œç¨‹ä»“åº“</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git remote remove paul  # ç§»é™¤paulè¿™ä¸ªè¿œç¨‹ä»“åº“<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ10ï¼‰æ ‡ç­¾æ“ä½œ"><a href="#ï¼ˆ10ï¼‰æ ‡ç­¾æ“ä½œ" class="headerlink" title="ï¼ˆ10ï¼‰æ ‡ç­¾æ“ä½œ"></a>ï¼ˆ10ï¼‰æ ‡ç­¾æ“ä½œ</h3><ol><li>åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git taggit tag -l "v1.8.5*"  # åˆ—å‡ºæµ…é†‰æ˜¯v1.8.5çš„æ ‡ç­¾<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>åˆ›å»ºå¸¦æ³¨é‡Šçš„æ ‡ç­¾ï¼ˆAnnotated Tagsï¼‰</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git tag -a v1.4 -m "my version 1.4"git show v1.4  # æ˜¾ç¤ºè¿™ä¸ªæ ‡ç­¾å¯¹åº”çš„commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>åˆ›å»ºè½»é‡çº§æ ‡ç­¾ï¼ˆLightweight Tagsï¼‰</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git tag v1.4-lwgit show v1.4-lw  # åªæœ‰commitä¿¡æ¯ï¼Œæ²¡æœ‰tagä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>è¡¥æ ‡ç­¾</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git log --pretty=oneline  # æƒ³ä¸ºæŸæ¬¡commitè¡¥ä¸Šæ ‡ç­¾git tag -a v1.2 9fceb02  # 9fceb02 æ˜¯commit-id<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>åˆ†äº«æ ‡ç­¾åˆ°è¿œç¨‹</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git push origin v1.5  # pushæŸä¸€ä¸ªgit push origin --tags  # pushå…¨éƒ¨tags<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol><li>åˆ é™¤æ ‡ç­¾</li></ol><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># ç¬¬ä¸€ç§æ–¹æ³•git tag -d v1.4-lwgit push origin :refs/tags/v1.4-lw# ç¬¬äºŒç§æ–¹æ³•git push origin --delete <tagname><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Gitè¿›é˜¶-åˆ†æ”¯"><a href="#Gitè¿›é˜¶-åˆ†æ”¯" class="headerlink" title="Gitè¿›é˜¶-åˆ†æ”¯"></a>Gitè¿›é˜¶-åˆ†æ”¯</h1><h2 id="1ã€-åˆ†æ”¯ç®€ä»‹"><a href="#1ã€-åˆ†æ”¯ç®€ä»‹" class="headerlink" title="1ã€ åˆ†æ”¯ç®€ä»‹"></a>1ã€ åˆ†æ”¯ç®€ä»‹</h2><h3 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯åˆ†æ”¯ï¼Ÿ"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯åˆ†æ”¯ï¼Ÿ" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯åˆ†æ”¯ï¼Ÿ"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯åˆ†æ”¯ï¼Ÿ</h3><ul><li>å¦‚ä¸‹å›¾ï¼Œmasteræ˜¯é»˜è®¤åˆ†æ”¯ï¼Œtestingæ˜¯å…¶ä»–åˆ†æ”¯ã€‚</li><li>åˆ†æ”¯çš„å­˜åœ¨æ˜¯è®©ä½ å¯ä»¥æŠŠmasterä½œä¸ºæ­£å¼ç¯å¢ƒï¼ŒæŠŠtestingä½œä¸ºå¼€å‘ç¯å¢ƒï¼Œå½“å¼€å‘ç¯å¢ƒçš„ä»£ç éœ€è¦ä¸Šçº¿æ—¶å°±å°†å…¶åˆå¹¶åˆ°æ­£å¼ç¯å¢ƒmasterã€‚</li></ul><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/branch.png" alt="å›¾2ï¼šåˆ†æ”¯"></p><h3 id="ï¼ˆ2ï¼‰é»˜è®¤åˆ†æ”¯"><a href="#ï¼ˆ2ï¼‰é»˜è®¤åˆ†æ”¯" class="headerlink" title="ï¼ˆ2ï¼‰é»˜è®¤åˆ†æ”¯"></a>ï¼ˆ2ï¼‰é»˜è®¤åˆ†æ”¯</h3><ul><li>master</li></ul><h3 id="ï¼ˆ3ï¼‰åˆ†æ”¯è¯¦ç»†è¯´æ˜"><a href="#ï¼ˆ3ï¼‰åˆ†æ”¯è¯¦ç»†è¯´æ˜" class="headerlink" title="ï¼ˆ3ï¼‰åˆ†æ”¯è¯¦ç»†è¯´æ˜"></a>ï¼ˆ3ï¼‰åˆ†æ”¯è¯¦ç»†è¯´æ˜</h3><ul><li><a href="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a></li></ul><h2 id="2ã€æœ¬åœ°åˆ†æ”¯æ“ä½œ"><a href="#2ã€æœ¬åœ°åˆ†æ”¯æ“ä½œ" class="headerlink" title="2ã€æœ¬åœ°åˆ†æ”¯æ“ä½œ"></a>2ã€æœ¬åœ°åˆ†æ”¯æ“ä½œ</h2><h3 id="ï¼ˆ1ï¼‰åˆ›å»ºåˆ†æ”¯"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºåˆ†æ”¯" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºåˆ†æ”¯"></a>ï¼ˆ1ï¼‰åˆ›å»ºåˆ†æ”¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git branch test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ2ï¼‰åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯"><a href="#ï¼ˆ2ï¼‰åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯" class="headerlink" title="ï¼ˆ2ï¼‰åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯"></a>ï¼ˆ2ï¼‰åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</h3><ul><li>å½“åˆ†æ”¯è¿˜å­˜åœ¨æ–‡ä»¶æ²¡æœ‰add+commitçš„æ—¶å€™ï¼Œæ˜¯æ²¡æ³•è¿›è¡Œåˆ†æ”¯åˆ‡æ¢çš„ã€‚</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git checkout test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ3ï¼‰åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ä¸€æ­¥åˆ°ä½"><a href="#ï¼ˆ3ï¼‰åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ä¸€æ­¥åˆ°ä½" class="headerlink" title="ï¼ˆ3ï¼‰åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ä¸€æ­¥åˆ°ä½"></a>ï¼ˆ3ï¼‰åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ä¸€æ­¥åˆ°ä½</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git checkout -b test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ4ï¼‰æŸ¥çœ‹åˆ†æ”¯"><a href="#ï¼ˆ4ï¼‰æŸ¥çœ‹åˆ†æ”¯" class="headerlink" title="ï¼ˆ4ï¼‰æŸ¥çœ‹åˆ†æ”¯"></a>ï¼ˆ4ï¼‰æŸ¥çœ‹åˆ†æ”¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git branch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ5ï¼‰åˆå¹¶åˆ†æ”¯"><a href="#ï¼ˆ5ï¼‰åˆå¹¶åˆ†æ”¯" class="headerlink" title="ï¼ˆ5ï¼‰åˆå¹¶åˆ†æ”¯"></a>ï¼ˆ5ï¼‰åˆå¹¶åˆ†æ”¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git merge test  # åœ¨masteråˆ†æ”¯ä¸Šå°†teståˆ†æ”¯åˆå¹¶è¿‡æ¥git merge master  # åœ¨teståˆ†æ”¯ä¸Šå°†masteråˆ†æ”¯åˆå¹¶è¿‡æ¥<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="ï¼ˆ6ï¼‰åˆ†æ”¯å†²çªè§£å†³"><a href="#ï¼ˆ6ï¼‰åˆ†æ”¯å†²çªè§£å†³" class="headerlink" title="ï¼ˆ6ï¼‰åˆ†æ”¯å†²çªè§£å†³"></a>ï¼ˆ6ï¼‰åˆ†æ”¯å†²çªè§£å†³</h3><ul><li>å½“ä¸¤ä¸ªåˆ†æ”¯çš„åŒä¸€æ–‡ä»¶éƒ½è¢«ä¿®æ”¹æäº¤æ—¶ï¼Œè¿™æ—¶åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯å°±ä¼šå‡ºç°å†²çªï¼Œé‚£ä¹ˆè§£å†³å†²çªçš„åŠæ³•å°±æ˜¯æ‰‹åŠ¨ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶ï¼Œä½¿å…¶ä¸€è‡´ã€‚</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git mergetool  # æŸ¥çœ‹åˆå¹¶å†²çª<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ7ï¼‰åˆ é™¤åˆ†æ”¯"><a href="#ï¼ˆ7ï¼‰åˆ é™¤åˆ†æ”¯" class="headerlink" title="ï¼ˆ7ï¼‰åˆ é™¤åˆ†æ”¯"></a>ï¼ˆ7ï¼‰åˆ é™¤åˆ†æ”¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git branch -d test  # åœ¨masteråˆ†æ”¯ä¸Šåˆ é™¤teståˆ†æ”¯<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ8ï¼‰æŸ¥çœ‹è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯"><a href="#ï¼ˆ8ï¼‰æŸ¥çœ‹è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯" class="headerlink" title="ï¼ˆ8ï¼‰æŸ¥çœ‹è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯"></a>ï¼ˆ8ï¼‰æŸ¥çœ‹è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git branch --merged<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ9ï¼‰æŸ¥çœ‹æœªè¢«åˆå¹¶è¿‡çš„åˆ†æ”¯"><a href="#ï¼ˆ9ï¼‰æŸ¥çœ‹æœªè¢«åˆå¹¶è¿‡çš„åˆ†æ”¯" class="headerlink" title="ï¼ˆ9ï¼‰æŸ¥çœ‹æœªè¢«åˆå¹¶è¿‡çš„åˆ†æ”¯"></a>ï¼ˆ9ï¼‰æŸ¥çœ‹æœªè¢«åˆå¹¶è¿‡çš„åˆ†æ”¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git branch --no-merged<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3ã€è¿œç¨‹åˆ†æ”¯æ“ä½œ"><a href="#3ã€è¿œç¨‹åˆ†æ”¯æ“ä½œ" class="headerlink" title="3ã€è¿œç¨‹åˆ†æ”¯æ“ä½œ"></a>3ã€è¿œç¨‹åˆ†æ”¯æ“ä½œ</h2><h3 id="ï¼ˆ1ï¼‰å…‹éš†è¿œç¨‹ä»“åº“"><a href="#ï¼ˆ1ï¼‰å…‹éš†è¿œç¨‹ä»“åº“" class="headerlink" title="ï¼ˆ1ï¼‰å…‹éš†è¿œç¨‹ä»“åº“"></a>ï¼ˆ1ï¼‰å…‹éš†è¿œç¨‹ä»“åº“</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/remote_branch.png" alt="å›¾3ï¼šå…‹éš†åçš„è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“"></p><ul><li>å›¾ç‰‡æ¥æºäº<a href="https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches" target="_blank" rel="noopener">å®˜ç½‘</a></li></ul><h3 id="ï¼ˆ2ï¼‰å½“è¿œç¨‹ä»“åº“è¢«ä¿®æ”¹å"><a href="#ï¼ˆ2ï¼‰å½“è¿œç¨‹ä»“åº“è¢«ä¿®æ”¹å" class="headerlink" title="ï¼ˆ2ï¼‰å½“è¿œç¨‹ä»“åº“è¢«ä¿®æ”¹å"></a>ï¼ˆ2ï¼‰å½“è¿œç¨‹ä»“åº“è¢«ä¿®æ”¹å</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/remote_branch1.png" alt="å›¾4ï¼šè¢«åˆ«äººä¿®æ”¹åçš„è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“"></p><ul><li>å›¾ç‰‡æ¥æºäº<a href="https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches" target="_blank" rel="noopener">å®˜ç½‘</a></li></ul><h3 id="ï¼ˆ3ï¼‰git-fetch-originåçš„è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“"><a href="#ï¼ˆ3ï¼‰git-fetch-originåçš„è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“" class="headerlink" title="ï¼ˆ3ï¼‰git fetch originåçš„è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“"></a>ï¼ˆ3ï¼‰git fetch originåçš„è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/remote_branch2.png" alt="å›¾5ï¼šfetchè¿‡åçš„ä»“åº“"></p><ul><li>å›¾ç‰‡æ¥æºäº<a href="https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches" target="_blank" rel="noopener">å®˜ç½‘</a></li></ul><h3 id="ï¼ˆ4ï¼‰å¤šä¸ªè¿œç¨‹ä»“åº“"><a href="#ï¼ˆ4ï¼‰å¤šä¸ªè¿œç¨‹ä»“åº“" class="headerlink" title="ï¼ˆ4ï¼‰å¤šä¸ªè¿œç¨‹ä»“åº“"></a>ï¼ˆ4ï¼‰å¤šä¸ªè¿œç¨‹ä»“åº“</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/remote_branch3.png" alt="å›¾6ï¼šå¤šä¸ªè¿œç¨‹ä»“åº“"></p><ul><li>å›¾ç‰‡æ¥æºäº<a href="https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches" target="_blank" rel="noopener">å®˜ç½‘</a></li></ul><h3 id="ï¼ˆ5ï¼‰pushåˆ†æ”¯åˆ°è¿œç¨‹"><a href="#ï¼ˆ5ï¼‰pushåˆ†æ”¯åˆ°è¿œç¨‹" class="headerlink" title="ï¼ˆ5ï¼‰pushåˆ†æ”¯åˆ°è¿œç¨‹"></a>ï¼ˆ5ï¼‰pushåˆ†æ”¯åˆ°è¿œç¨‹</h3><ul><li>åªæ¨é€ä½ æƒ³è·Ÿåˆ«äººå…±äº«çš„åˆ†æ”¯deploy</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git push origin deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ6ï¼‰åœ¨æœ¬åœ°ä»“åº“å»ºç«‹ä¸€ä¸ªæ–°åˆ†æ”¯å¹¶ä¸è¿œç¨‹ä»“åº“å¯¹åº”"><a href="#ï¼ˆ6ï¼‰åœ¨æœ¬åœ°ä»“åº“å»ºç«‹ä¸€ä¸ªæ–°åˆ†æ”¯å¹¶ä¸è¿œç¨‹ä»“åº“å¯¹åº”" class="headerlink" title="ï¼ˆ6ï¼‰åœ¨æœ¬åœ°ä»“åº“å»ºç«‹ä¸€ä¸ªæ–°åˆ†æ”¯å¹¶ä¸è¿œç¨‹ä»“åº“å¯¹åº”"></a>ï¼ˆ6ï¼‰åœ¨æœ¬åœ°ä»“åº“å»ºç«‹ä¸€ä¸ªæ–°åˆ†æ”¯å¹¶ä¸è¿œç¨‹ä»“åº“å¯¹åº”</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git checkout -b serverfix origin/serverfixgit checkout -b sf origin/serverfixgit checkout --track origin/serverfix<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ï¼ˆ7ï¼‰æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯è·Ÿè¸ªçš„æ˜¯å“ªä¸ªè¿œç¨‹åˆ†æ”¯åŠå…·ä½“ä¿¡æ¯"><a href="#ï¼ˆ7ï¼‰æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯è·Ÿè¸ªçš„æ˜¯å“ªä¸ªè¿œç¨‹åˆ†æ”¯åŠå…·ä½“ä¿¡æ¯" class="headerlink" title="ï¼ˆ7ï¼‰æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯è·Ÿè¸ªçš„æ˜¯å“ªä¸ªè¿œç¨‹åˆ†æ”¯åŠå…·ä½“ä¿¡æ¯"></a>ï¼ˆ7ï¼‰æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯è·Ÿè¸ªçš„æ˜¯å“ªä¸ªè¿œç¨‹åˆ†æ”¯åŠå…·ä½“ä¿¡æ¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># å¦‚æœæƒ³æŸ¥çœ‹è¿œç¨‹æœ€æ–°ä¿¡æ¯åˆ™å…ˆç”¨fetchå‘½ä»¤# git fetch --all  git branch -vv<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ï¼ˆ8ï¼‰åˆ é™¤è¿œç¨‹åˆ†æ”¯"><a href="#ï¼ˆ8ï¼‰åˆ é™¤è¿œç¨‹åˆ†æ”¯" class="headerlink" title="ï¼ˆ8ï¼‰åˆ é™¤è¿œç¨‹åˆ†æ”¯"></a>ï¼ˆ8ï¼‰åˆ é™¤è¿œç¨‹åˆ†æ”¯</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git push origin --delete serverfix<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ³¨æ„ï¼š</strong>Basically all this does is remove the pointer from the server. The Git server will generally keep the data there for a while until a garbage collection runs, so if it was accidentally deleted, itâ€™s often easy to recover.</p><h2 id="4ã€Rebasing"><a href="#4ã€Rebasing" class="headerlink" title="4ã€Rebasing"></a>4ã€Rebasing</h2><h3 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Rebasingï¼Ÿ"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Rebasingï¼Ÿ" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Rebasingï¼Ÿ"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯Rebasingï¼Ÿ</h3><ul><li>In Git, there are two main ways to integrate changes from one branch into another: the <code>merge</code> and the <code>rebase</code>. </li></ul><h3 id="ï¼ˆ2ï¼‰merge"><a href="#ï¼ˆ2ï¼‰merge" class="headerlink" title="ï¼ˆ2ï¼‰merge"></a>ï¼ˆ2ï¼‰merge</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/merge.png" alt="å›¾7ï¼šmerge"></p><h3 id="ï¼ˆ3ï¼‰Rebasing"><a href="#ï¼ˆ3ï¼‰Rebasing" class="headerlink" title="ï¼ˆ3ï¼‰Rebasing"></a>ï¼ˆ3ï¼‰Rebasing</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/rebasing.png" alt="å›¾8ï¼šrebasing"></p><ul><li>å¦‚ä¸Šå›¾ï¼Œrebasingç›¸å½“äºæ˜¯æŠŠc4è¿™ä¸ªcommit_idæŠ¹å»ï¼Œè¿™æ ·ä¼šå¯¼è‡´è¿™ä¸ªæäº¤ä¿¡æ¯è¢«æ¸…é™¤ï¼Œ<strong>æœ‰åˆ©ä¹Ÿæœ‰å¼Š</strong>ã€‚</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>Do not rebase commits that exist outside your repository and people may have based work on them.</li><li>å³ä¸è¦rebaseåˆ«äººçš„æäº¤ä¿¡æ¯ï¼Œå¯¼è‡´æ··æ·†äº§ç”Ÿã€‚</li></ul><h3 id="ï¼ˆ4ï¼‰merge-vs-rebasing"><a href="#ï¼ˆ4ï¼‰merge-vs-rebasing" class="headerlink" title="ï¼ˆ4ï¼‰merge vs rebasing"></a>ï¼ˆ4ï¼‰merge vs rebasing</h3><ul><li>ä¸ªäººè¿˜æ˜¯è§‰å¾—mergeå¥½ï¼Œä½†æ˜¯å¦‚æœåˆå¹¶å†å²å¤ªå¤šï¼Œå¯ä»¥é…Œæƒ…ä½¿ç”¨rebasing</li></ul><h1 id="Gitè¿›é˜¶-Git-Flow"><a href="#Gitè¿›é˜¶-Git-Flow" class="headerlink" title="Gitè¿›é˜¶-Git Flow"></a>Gitè¿›é˜¶-Git Flow</h1><h2 id="Git-Flowç®€ä»‹"><a href="#Git-Flowç®€ä»‹" class="headerlink" title="Git Flowç®€ä»‹"></a>Git Flowç®€ä»‹</h2><h3 id="Git-Flowæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Git-Flowæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Git Flowæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Git Flowæ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>å›¢é˜Ÿåˆä½œå¼€å‘æ—¶ï¼Œä¸»åˆ†æ”¯ã€å¼€å‘åˆ†æ”¯ã€åŠŸèƒ½åˆ†æ”¯ã€bugåˆ†æ”¯ç­‰ç­‰å¿…ä¸å¯å°‘ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<strong>å¤šäººå¤šåˆ†æ”¯çš„æƒ…å†µåº”è¯¥å¦‚ä½•åˆ¶å®šä¸€ä¸ªå·¥ä½œæµç¨‹æ‰ä¸äº§ç”Ÿå†²çªå‘¢ï¼Ÿ</strong>ç­”æ¡ˆæ˜¯ï¼š<ol><li>Git Flow</li><li>GitHub Flow</li><li>GitLab Flow</li></ol></li><li>Git Flowè®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„ç®¡ç†ä¸€ä¸ªé¡¹ç›®</li></ul><h3 id="Git-Flowå®‰è£…"><a href="#Git-Flowå®‰è£…" class="headerlink" title="Git Flowå®‰è£…"></a>Git Flowå®‰è£…</h3><ul><li><p>For Windows users, <a href="https://github.com/petervanderdoes/gitflow-avh/wiki/Installing-on-Windows#git-for-windows" target="_blank" rel="noopener">Git for Windows</a> is the recommended method.</p><h2 id="Git-for-Windows"><a href="#Git-for-Windows" class="headerlink" title="Git for Windows"></a>Git for Windows</h2><p>Follow the instructions on the <a href="https://git-for-windows.github.io/" target="_blank" rel="noopener">Git for Windows homepage</a> to install Git for Windows. As of Git for Windows 2.6.4, GitFlow (AVH edition) is included, so youâ€™re all done.</p></li></ul><h2 id="Git-Flowæ“ä½œ"><a href="#Git-Flowæ“ä½œ" class="headerlink" title="Git Flowæ“ä½œ"></a>Git Flowæ“ä½œ</h2><h3 id="å¯»æ±‚å¸®åŠ©"><a href="#å¯»æ±‚å¸®åŠ©" class="headerlink" title="å¯»æ±‚å¸®åŠ©"></a>å¯»æ±‚å¸®åŠ©</h3><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow help  # æŸ¥çœ‹å‘½ä»¤å¸®åŠ©<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åœ¨ä»“åº“ä¸­è®¾ç½®git-flow"><a href="#åœ¨ä»“åº“ä¸­è®¾ç½®git-flow" class="headerlink" title="åœ¨ä»“åº“ä¸­è®¾ç½®git-flow"></a>åœ¨ä»“åº“ä¸­è®¾ç½®git-flow</h3><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>æŠŠé¡¹ç›®åˆ‡æ¢åˆ°git-flowæ—¶ï¼Œå°±ç”¨git-flowå‘½ä»¤æ“ä½œ</li><li>æ™®é€šçš„gitå‘½ä»¤å’Œgit-flowå‘½ä»¤äº’ä¸å†²çª</li><li>git-flowä¸ä¼šæ”¹å˜ä»“åº“</li><li>ä½¿ç”¨<code>git flow init</code>å‘½ä»¤æ—¶ï¼Œå®é™…ä¸Šåªæ˜¯åœ¨<strong>å½“å‰åˆ†æ”¯é…ç½®äº†ä¸€äº›å‘½åè§„åˆ™</strong></li></ol><h3 id="åˆ†æ”¯çš„æ¨¡å¼"><a href="#åˆ†æ”¯çš„æ¨¡å¼" class="headerlink" title="åˆ†æ”¯çš„æ¨¡å¼"></a>åˆ†æ”¯çš„æ¨¡å¼</h3><h4 id="é•¿æœŸåˆ†æ”¯"><a href="#é•¿æœŸåˆ†æ”¯" class="headerlink" title="é•¿æœŸåˆ†æ”¯"></a>é•¿æœŸåˆ†æ”¯</h4><p>git-flowä¼šé¢„è®¾ä¸¤ä¸ªä¸»åˆ†æ”¯åœ¨ä»“åº“ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´è¦åŒæ—¶ç»´æŠ¤ä¸¤ä¸ªåˆ†æ”¯</p><ul><li>masterï¼šæ­£å¼ç¯å¢ƒä»£ç ï¼Œä¸èƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå·¥ä½œ</li><li>developï¼š å¼€å‘åˆ†æ”¯ï¼Œä»¥è¯¥åˆ†æ”¯ä¸ºåŸºç¡€åˆ†æ”¯æ¥è¿›è¡ŒåŠŸèƒ½å¼€å‘ç­‰ç­‰</li></ul><h4 id="çŸ­æœŸåˆ†æ”¯"><a href="#çŸ­æœŸåˆ†æ”¯" class="headerlink" title="çŸ­æœŸåˆ†æ”¯"></a>çŸ­æœŸåˆ†æ”¯</h4><p>çŸ­æœŸåˆ†æ”¯åªæ˜¯ä¸´æ—¶å­˜åœ¨ï¼Œå½“å¼€å‘å®Œæˆåˆ™å¯ä»¥åˆ é™¤è¯¥åˆ†æ”¯</p><ul><li>featureï¼šåŠŸèƒ½å¼€å‘åˆ†æ”¯</li><li>hotfixï¼šbugä¿®å¤åˆ†æ”¯</li><li>releaseï¼šç‰ˆæœ¬å‘å¸ƒåˆ†æ”¯</li></ul><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-git/git_flow_branch.png" alt="å›¾ï¼šgit-flowåˆ†æ”¯æ¨¡å¼"></p><h3 id="åŠŸèƒ½å¼€å‘åˆ†æ”¯-feature"><a href="#åŠŸèƒ½å¼€å‘åˆ†æ”¯-feature" class="headerlink" title="åŠŸèƒ½å¼€å‘åˆ†æ”¯-feature"></a>åŠŸèƒ½å¼€å‘åˆ†æ”¯-feature</h3><p>featureåˆ†æ”¯åŸºäºdevelopåˆ†æ”¯</p><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow feature start concat  # æ–°å¢ç•™è¨€åŠŸèƒ½<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>git flow feature start new_feature</code>å‘½ä»¤ä¼šåœ¨developåˆ†æ”¯ä¸Šåˆ›å»ºä¸€ä¸ªnew_featureåˆ†æ”¯ï¼Œç„¶åå°±å¯ä»¥åœ¨è¯¥åˆ†æ”¯ä¸Šè¿›è¡ŒåŠŸèƒ½å¼€å‘</li><li>å½“å®ŒæˆåŠŸèƒ½å¼€å‘åï¼Œåˆå¹¶ä¸åˆ é™¤åˆ†æ”¯å‘½ä»¤å¦‚ä¸‹</li></ul><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow feature finish concat  # å®ŒæˆåŠŸèƒ½å¼€å‘<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>git flow feature finsih concat</code>å‘½ä»¤ä¼šæŠŠconcatåˆ†æ”¯å¼€å‘çš„å†…å®¹æ•´åˆåˆ°developåˆ†æ”¯ä¸­ï¼Œå¹¶æŠŠconcatåˆ†æ”¯åˆ é™¤</li></ul><h3 id="ç‰ˆæœ¬ç®¡ç†-release"><a href="#ç‰ˆæœ¬ç®¡ç†-release" class="headerlink" title="ç‰ˆæœ¬ç®¡ç†-release"></a>ç‰ˆæœ¬ç®¡ç†-release</h3><p>releaseåˆ†æ”¯åŸºäºdevelopåˆ†æ”¯</p><p>å½“developåˆ†æ”¯çš„ä»£ç å·²ç»æˆç†Ÿæ—¶ï¼Œå°±å¯ä»¥æŠŠ<strong>è¿™éƒ¨åˆ†å·¥ä½œç”Ÿæˆä¸€ä¸ªè¦å‘å¸ƒçš„ç‰ˆæœ¬</strong>ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆç‰ˆæœ¬å·ä»¥åŠç‰ˆæœ¬ç®¡ç†</p><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow release start 1.1.1  # ç‰ˆæœ¬å·1.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ä¸Šè¿°å‘½ä»¤äº§ç”Ÿreleaseåˆ†æ”¯åï¼Œå†å¯¹è¯¥åˆ†æ”¯çš„ä¸€äº›æ–‡ä»¶è®°å½•ç‰ˆæœ¬å·åˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç‰ˆæœ¬å‘å¸ƒ</li></ul><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow release finish 1.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>git flow release finish 1.1.1</code>å‘½ä»¤ä¼šåšå¦‚ä¸‹æ“ä½œ<ol><li>æ‹‰å–è¿œç¨‹ä»“åº“ï¼Œç¡®ä¿æœ¬åœ°ä»“åº“æ˜¯æœ€æ–°</li><li>releaseåˆ†æ”¯çš„å†…å®¹ä¼šåˆå¹¶åˆ°masterå’Œdevelopåˆ†æ”¯ä¸Š</li><li>åˆ é™¤releaseåˆ†æ”¯ï¼Œå¹¶å›åˆ°developåˆ†æ”¯</li></ol></li></ul><h3 id="bugä¿®å¤-hotfix"><a href="#bugä¿®å¤-hotfix" class="headerlink" title="bugä¿®å¤-hotfix"></a>bugä¿®å¤-hotfix</h3><h4 id="åˆ›å»ºhotfix"><a href="#åˆ›å»ºhotfix" class="headerlink" title="åˆ›å»ºhotfix"></a>åˆ›å»ºhotfix</h4><p>hotfixåˆ†æ”¯æ˜¯åŸºäºmasteråˆ†æ”¯çš„ï¼Œå¯¹å·²å‘å¸ƒçš„ä»£ç ä¿®å¤bug</p><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow hotfix start bug1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å®Œæˆhotfixåˆ†æ”¯"><a href="#å®Œæˆhotfixåˆ†æ”¯" class="headerlink" title="å®Œæˆhotfixåˆ†æ”¯"></a>å®Œæˆhotfixåˆ†æ”¯</h4><pre class="line-numbers language-lang-gitbash"><code class="language-lang-gitbash">git flow hotfix finish bug1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>git flow hotfix finish bug1</code>å†…éƒ¨æ“ä½œå¦‚ä¸‹<ol><li>å®Œæˆçš„æ”¹åŠ¨ä¼šåˆå¹¶åˆ°masterå’Œdevelopåˆ†æ”¯ä¸Š</li><li>è¿™ä¸ªhotfixç¨‹åºå°†è¢«æ ‡è®°</li><li>hotfixåˆ†æ”¯è¢«åˆ é™¤ï¼Œç„¶åå›åˆ°developåˆ†æ”¯</li><li><strong>ç„¶ååˆ©ç”¨releaseåˆ†æ”¯æ“ä½œå‘å¸ƒç‰ˆæœ¬</strong></li></ol></li></ul><h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://git-scm.com/book/en/v2" target="_blank" rel="noopener">å®˜æ–¹æ•™ç¨‹</a></li><li><a href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener">å»–å¤§ç¥</a></li></ul><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1><h2 id="æ¸…é™¤å†å²æäº¤ä¸­çš„æ•æ„Ÿä¿¡æ¯"><a href="#æ¸…é™¤å†å²æäº¤ä¸­çš„æ•æ„Ÿä¿¡æ¯" class="headerlink" title="æ¸…é™¤å†å²æäº¤ä¸­çš„æ•æ„Ÿä¿¡æ¯"></a>æ¸…é™¤å†å²æäº¤ä¸­çš„æ•æ„Ÿä¿¡æ¯</h2><h3 id="é—®é¢˜ä»‹ç»"><a href="#é—®é¢˜ä»‹ç»" class="headerlink" title="é—®é¢˜ä»‹ç»"></a>é—®é¢˜ä»‹ç»</h3><ul><li>æŸæ¬¡æäº¤æŠŠç§äººä¿¡æ¯ï¼ˆå¯†ç æˆ–ç§é’¥ç­‰ï¼‰æäº¤åˆ°äº†è¿œç¨‹ä»“åº“ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</li></ul><h3 id="å¤„ç†æ–¹å¼"><a href="#å¤„ç†æ–¹å¼" class="headerlink" title="å¤„ç†æ–¹å¼"></a>å¤„ç†æ–¹å¼</h3><h4 id="ç¬¬ä¸€ç§æƒ…å†µ"><a href="#ç¬¬ä¸€ç§æƒ…å†µ" class="headerlink" title="ç¬¬ä¸€ç§æƒ…å†µ"></a>ç¬¬ä¸€ç§æƒ…å†µ</h4><ul><li>æäº¤çš„æ•æ„Ÿä¿¡æ¯<strong>è¿˜æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹ä»“åº“</strong></li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># ä¿®æ”¹ä»£ç git commit --amend<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="ç¬¬äºŒç§æƒ…å†µ"><a href="#ç¬¬äºŒç§æƒ…å†µ" class="headerlink" title="ç¬¬äºŒç§æƒ…å†µ"></a>ç¬¬äºŒç§æƒ…å†µ</h4><ul><li>æäº¤çš„æ•æ„Ÿä¿¡æ¯<strong>å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“</strong></li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch your_want_to_rm_file_name' --prune-empty --tag-name-filter cat -- --allgit add .git commit -m "rm some files"git push origin --force --all<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://stackoverflow.com/questions/872565/remove-sensitive-files-and-their-commits-from-git-history" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></li></ul><h2 id="2ã€git-commit-æäº¤è§„èŒƒ"><a href="#2ã€git-commit-æäº¤è§„èŒƒ" class="headerlink" title="2ã€git commit æäº¤è§„èŒƒ"></a>2ã€git commit æäº¤è§„èŒƒ</h2><p><a href="https://github.com/conventional-changelog/conventional-changelog/blob/v0.5.3/conventions/angular.md" target="_blank" rel="noopener">å‚è€ƒ</a></p><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">* æ¨¡æ¿å¦‚ä¸‹ï¼š\<type>(\<scope>): \<subject>\<BLANK LINE>\<body>\<BLANK LINE>\<footer>* è¯´æ˜1) typecommitç±»å‹ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š1. feat: æ–°åŠŸèƒ½2. fix: ä¿®å¤é—®é¢˜3. docs: ä¿®æ”¹æ–‡æ¡£4. style: ä¿®æ”¹ä»£ç æ ¼å¼ï¼Œä¸å½±å“ä»£ç é€»è¾‘5. refactor: é‡æ„ä»£ç ï¼Œç†è®ºä¸Šä¸å½±å“ç°æœ‰åŠŸèƒ½6. perf: æå‡æ€§èƒ½7. test: å¢åŠ ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹8. chore: ä¿®æ”¹å·¥å…·ç›¸å…³ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºæ–‡æ¡£ã€ä»£ç ç”Ÿæˆç­‰ï¼‰2) scopeä¿®æ”¹æ–‡ä»¶çš„èŒƒå›´3) subjectcommitçš„ç®€çŸ­æè¿°ï¼šç”¨ä¸€å¥è¯æè¿°è¿™æ¬¡æäº¤åšäº†ä»€ä¹ˆ4) bodysubjectçš„è¯¦ç»†è¯´æ˜5 ) footerå½“æœ‰Breaking Changeæ—¶å¿…é¡»åœ¨è¿™é‡Œæè¿°æ¸…æ¥šå…³é—­issueæˆ–æ˜¯é“¾æ¥åˆ°ç›¸å…³æ–‡æ¡£ï¼Œå¦‚ Closes #1, Closes #2, #36 ) BLANK LINE ç©ºä¸€è¡Œ7) IntelliJ IDEA æ’ä»¶æ¨èä½¿ç”¨ï¼šGit Commit Template<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹Hadoop</title>
      <link href="/2019/11/12/shi-yong-gong-ju-zhi-hadoop/"/>
      <url>/2019/11/12/shi-yong-gong-ju-zhi-hadoop/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hadoop/image-20210621152803717.png" alt="image-20210621152803717"></p><h1 id="Hadoopä»‹ç»"><a href="#Hadoopä»‹ç»" class="headerlink" title="Hadoopä»‹ç»"></a>Hadoopä»‹ç»</h1><h2 id="ç¬¬ä¸€éƒ¨åˆ†-ç®€ä»‹"><a href="#ç¬¬ä¸€éƒ¨åˆ†-ç®€ä»‹" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†-ç®€ä»‹"></a>ç¬¬ä¸€éƒ¨åˆ†-ç®€ä»‹</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><ul><li>Hadoopæ˜¯apacheä¸‹çš„ä¸€ä¸ªå¼€æºåˆ†å¸ƒå¼è®¡ç®—å¹³å°</li><li>åŸºäºJavaå¼€å‘ï¼Œè·¨å¹³å°ç‰¹æ€§å¥½ï¼ˆå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼‰ï¼Œå¯ä»¥éƒ¨ç½²å†å»‰ä»·çš„è®¡ç®—æœºé›†ç¾¤ä¸­</li><li>æ ¸å¿ƒæ˜¯HDFSï¼ˆåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰å’ŒMapReduce</li></ul><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ul><li>é«˜å¯é æ€§ï¼šå†—ä½™å‰¯æœ¬å’Œå®¹é”™æœºåˆ¶</li><li>é«˜æ•ˆæ€§ï¼šæŠŠæˆç™¾ä¸Šåƒçš„æœåŠ¡å™¨é›†ä¸­èµ·æ¥åšåˆ†å¸ƒå¼å¤„ç†</li><li>é«˜å¯æ‰©å±•æ€§ï¼šå‡ ä¸ªåˆ°ä¸Šåƒä¸ªèŠ‚ç‚¹</li><li>é«˜å®¹é”™æ€§ï¼šå†—ä½™å‰¯æœ¬å’Œå®¹é”™æœºåˆ¶</li><li>æˆæœ¬ä½ï¼šæ•´ä¸ªæœºå™¨é›†ç¾¤å¯ä»¥æ˜¯å¾ˆå¤šä½ç«¯æœº</li><li>è¿è¡Œåœ¨Linuxå¹³å°ä¸Šï¼šåŸç”Ÿæ˜¯Linux</li><li>æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼šåŸºäºJavaå¼€å‘ï¼Œä½†è¿˜å¯ä»¥å¤šç§è¯­è¨€å¼€å‘</li></ul><h2 id="ç¬¬äºŒéƒ¨åˆ†-ç»“æ„"><a href="#ç¬¬äºŒéƒ¨åˆ†-ç»“æ„" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†-ç»“æ„"></a>ç¬¬äºŒéƒ¨åˆ†-ç»“æ„</h2><h3 id="ä¼ä¸šåº”ç”¨æ¶æ„"><a href="#ä¼ä¸šåº”ç”¨æ¶æ„" class="headerlink" title="ä¼ä¸šåº”ç”¨æ¶æ„"></a>ä¼ä¸šåº”ç”¨æ¶æ„</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hadoop/hadoop_structure.png" alt="å›¾ï¼šHadoopåœ¨ä¼ä¸šåº”ç”¨ç»“æ„"></p><h3 id="å„ç§ç‰ˆæœ¬"><a href="#å„ç§ç‰ˆæœ¬" class="headerlink" title="å„ç§ç‰ˆæœ¬"></a>å„ç§ç‰ˆæœ¬</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hadoop/hadoop_version.png" alt="å›¾ï¼šHadoopç‰ˆæœ¬"></p><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hadoop/hadoop_project_structure.jpg" alt="å›¾ï¼šHadoopé¡¹ç›®ç»“æ„"></p><ul><li>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ-HDFSï¼šæ€ä¹ˆç”¨æˆç™¾ä¸Šåƒçš„æœºå™¨å»å­˜å‚¨æ–‡ä»¶ï¼Œè¯¦æƒ…è¯·è§</li><li>åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶-YARNï¼šè´Ÿè´£è®¡ç®—èµ„æºè°ƒåº¦ï¼Œå†…å­˜ã€CPUã€å¸¦å®½ç­‰ç­‰</li><li>ç¦»çº¿è®¡ç®—-MapReduceï¼šåˆ†å¸ƒå¼å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ï¼Œç¦»çº¿è®¡ç®—ã€æ‰¹å¤„ç†ï¼ŒåŸºäºç£ç›˜ï¼Œè¯¦æƒ…è¯·è§</li><li>DAGè®¡ç®—-Tezï¼šè¿è¡Œåœ¨YARNä¹‹ä¸Šçš„ä¸‹ä¸€ä»£HadoopæŸ¥è¯¢å¤„ç†æ¡†æ¶ï¼Œå°†å¾ˆå¤šçš„MapReduceä½œä¸šè¿›è¡Œåˆ†æä¼˜åŒ–ä»¥åæ„å»ºæˆä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œä¿è¯è·å¾—æœ€å¥½çš„å¤„ç†æ•ˆç‡ï¼Œè¯¦æƒ…è¯·è§</li><li>å†…å­˜è®¡ç®—-Sparkï¼šç±»ä¼¼MapReduceçš„é€šç”¨å¹¶è¡Œæ¡†æ¶ï¼ŒåŸºäºå†…å­˜è®¡ç®—ï¼Œæ€§èƒ½æ¯”MapReduceé«˜ï¼Œè¯¦æƒ…è¯·è§</li><li>Hiveï¼šHadoopä¸Šçš„æ•°æ®ä»“åº“ï¼ŒæŠŠå¤§é‡çš„å†å²æ•°æ®ä¿å­˜åˆ°æ•°æ®ä»“åº“ä¸­ï¼Œå»ºç«‹å„ç§ç»´åº¦ï¼Œä¸“é—¨ç”¨äºä¼ä¸šå†³ç­–åˆ†æï¼Œæ”¯æŒSQLè¯­å¥ï¼Œä¼šå°†SQLè¯­å¥è½¬åŒ–ä¸ºMapReduceä½œä¸šå»æ‰§è¡Œï¼Œè¯¦æƒ…è¯·è§</li><li>Pigï¼šåŸºäºHadoopçš„å¤§è§„æ¨¡æ•°æ®åˆ†æå¹³å°ï¼Œæä¾›ç±»ä¼¼SQLçš„æŸ¥è¯¢è¯­è¨€Pig Latinï¼Œæµæ•°æ®å¤„ç†ï¼Œè½»é‡çº§åˆ†æï¼Œç”¨ä¸€ä¸¤è¡Œè¯­å¥å°±å¯ä»¥è·Ÿå¤æ‚çš„MapReduceè¯­å¥å¾—åˆ°ä¸€æ ·çš„ç»“æœï¼Œè¯¦æƒ…è¯·è§</li><li>ä½œä¸šæµè°ƒåº¦ç³»ç»Ÿ-Oozieï¼šæŠŠå¾ˆå¤šä¸ªå·¥ä½œç¯èŠ‚è¿›è¡Œè°ƒåº¦ï¼Œè¯¦æƒ…è¯·è§</li><li>åˆ†å¸ƒå¼åè°ƒæœåŠ¡-ZooKeeperï¼šæä¾›åˆ†å¸ƒå¼åè°ƒä¸€è‡´æ€§æœåŠ¡ï¼Œåˆ†å¸ƒå¼é”ï¼Œé›†ç¾¤ç®¡ç†ç­‰æ“ä½œï¼Œè¯¦æƒ…è¯·è§</li><li>åˆ†å¸ƒå¼æ•°æ®åº“-HBaseï¼šHadoopä¸Šçš„éå…³ç³»å‹åˆ†å¸ƒå¼æ•°æ®åº“ï¼ŒåŸºäºåˆ—çš„å­˜å‚¨ï¼Œéšæœºè¯»å†™ï¼Œæ”¯æŒå®æ—¶åº”ç”¨ï¼Œè¯¦æƒ…è¯·è§</li><li>æ—¥å¿—æ”¶é›†-Flumeï¼šé«˜å¯ç”¨ã€é«˜å¯é ã€åˆ†å¸ƒå¼çš„æµ·é‡æ—¥å¿—é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„ç³»ç»Ÿï¼Œè¯¦æƒ…è¯·è§</li><li>æ•°æ®åº“TELå·¥å…·-Sqoopï¼šç”¨äºåœ¨Hadoopä¸ä¼ ç»Ÿæ•°æ®åº“ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼Œå®Œæˆæ•°æ®å¯¼å…¥å¯¼å‡ºï¼Œè¯¦æƒ…è¯·è§</li><li>å®‰è£…éƒ¨ç½²å·¥å…·-Ambariï¼šå¿«é€Ÿéƒ¨ç½²å·¥å…·ï¼Œæ”¯æŒHadoopé›†ç¾¤çš„ä¾›åº”ã€ç®¡ç†å’Œç›‘æ§ï¼Œè¯¦æƒ…è¯·è§</li></ul><h2 id="ç¬¬ä¸‰éƒ¨åˆ†-æœ¬æœºå®‰è£…"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-æœ¬æœºå®‰è£…" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†-æœ¬æœºå®‰è£…"></a>ç¬¬ä¸‰éƒ¨åˆ†-æœ¬æœºå®‰è£…</h2><h3 id="apache-Hadoopå®‰è£…ä¸ä½¿ç”¨"><a href="#apache-Hadoopå®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="apache Hadoopå®‰è£…ä¸ä½¿ç”¨"></a>apache Hadoopå®‰è£…ä¸ä½¿ç”¨</h3><ul><li><a href="http://dblab.xmu.edu.cn/blog/285/" target="_blank" rel="noopener">å¤§æ•°æ®æŠ€æœ¯åŸç†ä¸åº”ç”¨æä¾›çš„å®‰è£…æ•™ç¨‹</a></li></ul><h3 id="Hadoopä¸‰ç§shellå‘½ä»¤çš„åŒºåˆ«"><a href="#Hadoopä¸‰ç§shellå‘½ä»¤çš„åŒºåˆ«" class="headerlink" title="Hadoopä¸‰ç§shellå‘½ä»¤çš„åŒºåˆ«"></a>Hadoopä¸‰ç§shellå‘½ä»¤çš„åŒºåˆ«</h3><ul><li>hadoop fs é€‚ç”¨äºä»»ä½•ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿ</li><li>hadoop dfs åªèƒ½é€‚ç”¨äºHDFSæ–‡ä»¶ç³»ç»Ÿ</li><li>hdfs dfs åªèƒ½é€‚ç”¨äºHDFSæ–‡ä»¶ç³»ç»Ÿ</li></ul><h2 id="ç¬¬å››éƒ¨åˆ†-é›†ç¾¤éƒ¨ç½²"><a href="#ç¬¬å››éƒ¨åˆ†-é›†ç¾¤éƒ¨ç½²" class="headerlink" title="ç¬¬å››éƒ¨åˆ†-é›†ç¾¤éƒ¨ç½²"></a>ç¬¬å››éƒ¨åˆ†-é›†ç¾¤éƒ¨ç½²</h2><h3 id="é›†ç¾¤èŠ‚ç‚¹ç±»å‹åŠç¡¬ä»¶é…ç½®"><a href="#é›†ç¾¤èŠ‚ç‚¹ç±»å‹åŠç¡¬ä»¶é…ç½®" class="headerlink" title="é›†ç¾¤èŠ‚ç‚¹ç±»å‹åŠç¡¬ä»¶é…ç½®"></a>é›†ç¾¤èŠ‚ç‚¹ç±»å‹åŠç¡¬ä»¶é…ç½®</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hadoop/hdfs_architecture.png" alt="å›¾ï¼šHDFSç»“æ„"></p><ul><li>NameNodeï¼šè´Ÿè´£åè°ƒé›†ç¾¤ä¸­çš„æ•°æ®å­˜å‚¨ï¼Œè·å¾—æ•°æ®çš„åœ°å€ä¿¡æ¯ï¼Œå“ªå—åœ¨å“ªä¸ªæœºå™¨è¿™æ ·å­ï¼ˆHDFSèŠ‚ç‚¹ï¼‰</li><li>DataNodeï¼šå­˜å‚¨è¢«æ‹†åˆ†çš„æ•°æ®å—ï¼ˆHDFSèŠ‚ç‚¹ï¼‰</li><li>JobTrackerï¼šåè°ƒæ•°æ®è®¡ç®—ä»»åŠ¡ï¼ˆMapReduceèŠ‚ç‚¹ï¼‰</li><li>TaskTrackerï¼šè´Ÿè´£æ‰§è¡Œç”±JobTrackeræŒ‡æ´¾çš„ä»»åŠ¡ï¼ˆMapReduceèŠ‚ç‚¹ï¼‰</li><li>SecondaryNameNodeï¼ˆå†·å¤‡ä»½ï¼‰ï¼šå¸®åŠ©NameNodeæ”¶é›†æ–‡ä»¶ç³»ç»Ÿè¿è¡Œçš„çŠ¶æ€ä¿¡æ¯ï¼ˆHDFSèŠ‚ç‚¹ï¼‰</li></ul><p>é›†ç¾¤è§„æ¨¡å¯å¤§å¯å°ï¼Œå¯ä»¥ä¸€æ­¥ä¸€æ­¥å¾€ä¸ŠåŠ æœºå™¨ã€‚</p><p>åœ¨é›†ç¾¤ä¸­ï¼Œå¤§éƒ¨åˆ†çš„æœºå™¨æ˜¯ä½œä¸ºDataNodeå’ŒTaskTrackerå·¥ä½œçš„ï¼Œæ‰€ä»¥DataNodeå’ŒTaskTrackerçš„ç¡¬ä»¶è§„åˆ™å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š</p><ul><li>4ä¸ªç£ç›˜é©±åŠ¨å™¨ï¼ˆå•ç›˜1-2Tï¼‰ï¼Œæ”¯æŒJBODï¼ˆjust a bunch of disksï¼Œç£ç›˜ç°‡ï¼‰</li><li>2ä¸ª4æ ¸CPUï¼Œè‡³å°‘2-2.5GHz</li><li>16-24GBå†…å­˜</li><li>åƒå…†ä»¥å¤ªç½‘</li></ul><p>NameNodeæä¾›æ•´ä¸ªHDFSæ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´ç®¡ç†ã€å—ç®¡ç†ç­‰æ‰€æœ‰æœåŠ¡ï¼Œæ‰€ä»¥éœ€è¦æ›´å¤šçš„RAMï¼Œå¹¶ä¸”éœ€è¦ä¼˜åŒ–RAMçš„å†…å­˜é€šé“å¸¦å®½ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š</p><ul><li>8-12ä¸ªç£ç›˜é©±åŠ¨å™¨ï¼ˆå•ç›˜1-2Tï¼‰</li><li>2ä¸ª4æ ¸/8æ ¸CPU</li><li>16-72GBå†…å­˜</li><li>åƒå…†/ä¸‡å…†ä»¥å¤ªç½‘</li></ul><p>SecondaryNameNodeåœ¨å°å‹é›†ç¾¤å¯ä»¥å’ŒNameNodeå…±ç”¨ä¸€å°æœºå™¨ï¼Œè¾ƒå¤§çš„é›†ç¾¤å¯ä»¥é‡‡ç”¨ä¸NameNodeä¸€æ ·çš„ç¡¬ä»¶</p><h3 id="é›†ç¾¤ç½‘ç»œæ‹“æ‰‘"><a href="#é›†ç¾¤ç½‘ç»œæ‹“æ‰‘" class="headerlink" title="é›†ç¾¤ç½‘ç»œæ‹“æ‰‘"></a>é›†ç¾¤ç½‘ç»œæ‹“æ‰‘</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hadoop/network_tuo.png" alt="å›¾ï¼šç½‘ç»œæ‹“æ‰‘"></p><h3 id="é›†ç¾¤å»ºç«‹ä¸å®‰è£…"><a href="#é›†ç¾¤å»ºç«‹ä¸å®‰è£…" class="headerlink" title="é›†ç¾¤å»ºç«‹ä¸å®‰è£…"></a>é›†ç¾¤å»ºç«‹ä¸å®‰è£…</h3><ul><li>è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šDockerç­‰</li></ul><h3 id="é›†ç¾¤åŸºå‡†æµ‹è¯•"><a href="#é›†ç¾¤åŸºå‡†æµ‹è¯•" class="headerlink" title="é›†ç¾¤åŸºå‡†æµ‹è¯•"></a>é›†ç¾¤åŸºå‡†æµ‹è¯•</h3><ul><li>Hadoopè‡ªå¸¦ä¸€äº›åŸºå‡†æµ‹è¯•ç¨‹åº</li></ul><h3 id="åœ¨äº‘è®¡ç®—ç¯å¢ƒä¸­å®ç”¨Hadoop"><a href="#åœ¨äº‘è®¡ç®—ç¯å¢ƒä¸­å®ç”¨Hadoop" class="headerlink" title="åœ¨äº‘è®¡ç®—ç¯å¢ƒä¸­å®ç”¨Hadoop"></a>åœ¨äº‘è®¡ç®—ç¯å¢ƒä¸­å®ç”¨Hadoop</h3><p>ä¼ä¸šä¸éœ€è¦è‡ªå·±éƒ¨ç½²é›†ç¾¤ï¼Œç›´æ¥åœ¨äº‘ä¸Šéƒ¨ç½²</p><ul><li>å¯ä»¥åœ¨Amazon EC2ä¸­è¿è¡ŒHadoop</li></ul><h1 id="Hadoopè¿›é˜¶"><a href="#Hadoopè¿›é˜¶" class="headerlink" title="Hadoopè¿›é˜¶"></a>Hadoopè¿›é˜¶</h1><h1 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://study.163.com/course/courseMain.htm?courseId=1002887002" target="_blank" rel="noopener">å¤§æ•°æ®æŠ€æœ¯åŸç†ä¸åº”ç”¨</a></li></ul><h1 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h1>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹hexo</title>
      <link href="/2019/11/12/shi-yong-gong-ju-zhi-hexo/"/>
      <url>/2019/11/12/shi-yong-gong-ju-zhi-hexo/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/image-20210621151156147.png" alt="image-20210621151156147"></p><h1 id="ä¸€ã€Hexoä»‹ç»"><a href="#ä¸€ã€Hexoä»‹ç»" class="headerlink" title="ä¸€ã€Hexoä»‹ç»"></a>ä¸€ã€Hexoä»‹ç»</h1><h2 id="1ã€å®˜ç½‘"><a href="#1ã€å®˜ç½‘" class="headerlink" title="1ã€å®˜ç½‘"></a>1ã€å®˜ç½‘</h2><p><a href="https://hexo.io/zh-cn/index.html" target="_blank" rel="noopener">Hexo</a></p><h2 id="2ã€å®‰è£…"><a href="#2ã€å®‰è£…" class="headerlink" title="2ã€å®‰è£…"></a>2ã€å®‰è£…</h2><h3 id="ï¼ˆ1ï¼‰Node-jsï¼ˆWindowsï¼‰"><a href="#ï¼ˆ1ï¼‰Node-jsï¼ˆWindowsï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰Node.jsï¼ˆWindowsï¼‰"></a>ï¼ˆ1ï¼‰Node.jsï¼ˆWindowsï¼‰</h3><ol><li><p><a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬</p></li><li><p>å®‰è£…é€‰æ‹©å…¨éƒ¨é»˜è®¤ï¼ˆä¹Ÿå¯ä»¥è‡ªå·±è®¾å®šå®‰è£…ä½ç½®ï¼‰</p></li><li><p>å®‰è£…å®Œï¼Œé”®ç›˜ä¸Š<code>Win+R</code>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å‡ºç°ç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸ</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">node -vnpm -v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h3 id="ï¼ˆ2ï¼‰Gitï¼ˆWindowsï¼‰"><a href="#ï¼ˆ2ï¼‰Gitï¼ˆWindowsï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰Gitï¼ˆWindowsï¼‰"></a>ï¼ˆ2ï¼‰Gitï¼ˆWindowsï¼‰</h3><ol><li><p><a href="https://git-scm.com/" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬</p></li><li><p>å®‰è£…é€‰æ‹©å…¨éƒ¨é»˜è®¤ï¼ˆä¹Ÿå¯ä»¥è‡ªå·±è®¾å®šå®‰è£…ä½ç½®ï¼‰</p></li><li><p>æœ€åä¸€æ­¥ä¹Ÿå¯ä»¥é€‰æ‹©<code>Use Git from the Windows Command Prompt</code>ï¼Œè¿™æ ·å°±å¯ä»¥å‘½ä»¤è¡Œæ‰“å¼€<code>git</code></p></li><li><p>å®‰è£…å®Œï¼Œå‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å‡ºç°ç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸ</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h3 id="ï¼ˆ3ï¼‰Hexoï¼ˆWindowsï¼‰"><a href="#ï¼ˆ3ï¼‰Hexoï¼ˆWindowsï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰Hexoï¼ˆWindowsï¼‰"></a>ï¼ˆ3ï¼‰Hexoï¼ˆWindowsï¼‰</h3><ol><li><p>ã€å®‰è£…åˆ°Cç›˜ã€‘åœ¨Windowsä¸Šé€‰å®šä¸€ä¸ªç›®å½•ä½œä¸ºåšå®¢ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹å³é”®ç‚¹å‡»<code>Git Bash Here</code>ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨gitæ§åˆ¶å°è¿›è¡ŒHexoçš„å®‰è£…</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">npm i hexo-cli -ghexo -v  # éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>ã€å®‰è£…åˆ°æŒ‡å®šç›®å½•ã€‘åœ¨npmå®‰è£…ç›®å½•å³é”®ç‚¹å‡»<code>Git Bash Here</code>ï¼Œç„¶åè¾“å…¥</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">npm install --prefix . hexo-cli -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h1 id="äºŒã€GitHub"><a href="#äºŒã€GitHub" class="headerlink" title="äºŒã€GitHub"></a>äºŒã€GitHub</h1><h2 id="1ã€å®˜ç½‘-1"><a href="#1ã€å®˜ç½‘-1" class="headerlink" title="1ã€å®˜ç½‘"></a>1ã€å®˜ç½‘</h2><p><a href="https://github.com/" target="_blank" rel="noopener">GitHub</a></p><h2 id="2ã€æ³¨å†Œ"><a href="#2ã€æ³¨å†Œ" class="headerlink" title="2ã€æ³¨å†Œ"></a>2ã€æ³¨å†Œ</h2><p>å®˜ç½‘è·Ÿç€æŒ‡å¼•æ³¨å†Œå°±OK</p><h2 id="3ã€åˆ›å»ºåšå®¢ä»“åº“"><a href="#3ã€åˆ›å»ºåšå®¢ä»“åº“" class="headerlink" title="3ã€åˆ›å»ºåšå®¢ä»“åº“"></a>3ã€åˆ›å»ºåšå®¢ä»“åº“</h2><h3 id="ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ"><a href="#ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ" class="headerlink" title="ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ"></a>ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/create1.png" alt="å›¾1"></p><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/create2.png" alt="å›¾2"></p><h3 id="ï¼ˆ2ï¼‰æ³¨æ„äº‹é¡¹"><a href="#ï¼ˆ2ï¼‰æ³¨æ„äº‹é¡¹" class="headerlink" title="ï¼ˆ2ï¼‰æ³¨æ„äº‹é¡¹"></a>ï¼ˆ2ï¼‰æ³¨æ„äº‹é¡¹</h3><ol><li>ç¬¬äºŒå¼ å›¾ä¸­çš„ç¬¬ä¸€æ­¥yournameä¸€å®šè¦è·ŸOwnerçš„åå­—ä¸€æ ·ï¼Œä¸”ä¸€å®šè¦åŠ <code>.github.io</code>åç¼€ï¼ˆè‡³äºä¸ºä»€ä¹ˆï¼Œæˆ‘ä¹Ÿä¸å¾—è€ŒçŸ¥ï¼‰</li></ol><h2 id="4ã€ç»™ä»“åº“é€‰æ‹©ä¸»é¢˜"><a href="#4ã€ç»™ä»“åº“é€‰æ‹©ä¸»é¢˜" class="headerlink" title="4ã€ç»™ä»“åº“é€‰æ‹©ä¸»é¢˜"></a>4ã€ç»™ä»“åº“é€‰æ‹©ä¸»é¢˜</h2><h3 id="ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ-1"><a href="#ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ-1" class="headerlink" title="ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ"></a>ï¼ˆ1ï¼‰å¦‚å›¾æ“ä½œ</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/create3.png" alt="å›¾3"></p><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/create4.png" alt="å›¾4"></p><h1 id="ä¸‰ã€å†™åšå®¢å¹¶å‘å¸ƒåˆ°GitHub"><a href="#ä¸‰ã€å†™åšå®¢å¹¶å‘å¸ƒåˆ°GitHub" class="headerlink" title="ä¸‰ã€å†™åšå®¢å¹¶å‘å¸ƒåˆ°GitHub"></a>ä¸‰ã€å†™åšå®¢å¹¶å‘å¸ƒåˆ°GitHub</h1><h2 id="1ã€æœ¬åœ°ç½‘ç«™é…ç½®"><a href="#1ã€æœ¬åœ°ç½‘ç«™é…ç½®" class="headerlink" title="1ã€æœ¬åœ°ç½‘ç«™é…ç½®"></a>1ã€æœ¬åœ°ç½‘ç«™é…ç½®</h2><h3 id="ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰"><a href="#ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰"></a>ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">hexo init  # åˆå§‹åŒ–è¯¥ç›®å½•npm install  # å®‰è£…å¿…å¤‡çš„ç»„ä»¶hexo g  # ç”Ÿæˆé™æ€ç½‘é¡µhexo s  # æ‰“å¼€æœ¬åœ°æœåŠ¡å™¨å¹¶å¤åˆ¶åœ°å€åˆ°chromeæ‰“å¼€ctrl c  # å…³é—­æœ¬åœ°æœåŠ¡å™¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ï¼ˆ2ï¼‰chromeæ‰“å¼€æœ¬åœ°ç½‘ç«™åœ°å€"><a href="#ï¼ˆ2ï¼‰chromeæ‰“å¼€æœ¬åœ°ç½‘ç«™åœ°å€" class="headerlink" title="ï¼ˆ2ï¼‰chromeæ‰“å¼€æœ¬åœ°ç½‘ç«™åœ°å€"></a>ï¼ˆ2ï¼‰chromeæ‰“å¼€æœ¬åœ°ç½‘ç«™åœ°å€</h3><ol><li><a href="http://localhost:4000/" target="_blank" rel="noopener"><a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a></a></li></ol><h2 id="2ã€-å†™æ–°æ–‡ç« "><a href="#2ã€-å†™æ–°æ–‡ç« " class="headerlink" title="2ã€ å†™æ–°æ–‡ç« "></a>2ã€ å†™æ–°æ–‡ç« </h2><h3 id="ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰-1"><a href="#ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰-1" class="headerlink" title="ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰"></a>ï¼ˆ1ï¼‰å‘½ä»¤å¦‚ä¸‹ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">npm i hexo-deployer-git  # å®‰è£…æ‹“å±•hexo new post "new md file"  # æ–°å»ºä¸€ç¯‡æ–‡ç« # ä¿®æ”¹./source/_postsä¸‹çš„mdæ–‡ä»¶hexo ghexo sctrl c<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€è¿æ¥GitHub"><a href="#3ã€è¿æ¥GitHub" class="headerlink" title="3ã€è¿æ¥GitHub"></a>3ã€è¿æ¥GitHub</h2><h3 id="ï¼ˆ1ï¼‰å¦‚ä½•é…ç½®è¿æ¥"><a href="#ï¼ˆ1ï¼‰å¦‚ä½•é…ç½®è¿æ¥" class="headerlink" title="ï¼ˆ1ï¼‰å¦‚ä½•é…ç½®è¿æ¥"></a>ï¼ˆ1ï¼‰å¦‚ä½•é…ç½®è¿æ¥</h3><ol><li>è¯¦æƒ…è¯·è§å¦ä¸€ç¯‡æ–‡ç« ï¼š</li></ol><h3 id="ï¼ˆ2ï¼‰ä¿®æ”¹é…ç½®"><a href="#ï¼ˆ2ï¼‰ä¿®æ”¹é…ç½®" class="headerlink" title="ï¼ˆ2ï¼‰ä¿®æ”¹é…ç½®"></a>ï¼ˆ2ï¼‰ä¿®æ”¹é…ç½®</h3><ol><li><p>å‘½ä»¤ï¼ˆåœ¨åšå®¢ç›®å½•ä¸‹ï¼‰</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">vi _config.ymla  # ä¿®æ”¹# å¦‚ä¸‹å›¾ä¿®æ”¹æœ€åå‡ è¡ŒEsc  # é€€å‡ºä¿®æ”¹:wq!  # ä¿å­˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å¦‚å›¾</p></li></ol><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/create5.png" alt="å›¾5"></p><ol><li>æ³¨æ„ï¼šä¿®æ”¹å›¾ä¸­æ ‡çº¢çš„åœ°æ–¹å°±OKï¼Œæ¢æˆä½ è‡ªå·±çš„name</li></ol><h3 id="ï¼ˆ3ï¼‰é…ç½®å…¨å±€git-name-and-email"><a href="#ï¼ˆ3ï¼‰é…ç½®å…¨å±€git-name-and-email" class="headerlink" title="ï¼ˆ3ï¼‰é…ç½®å…¨å±€git name and email"></a>ï¼ˆ3ï¼‰é…ç½®å…¨å±€git name and email</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git config --global user.name "your github name"git config --global user.email "your github private email"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>â€‹    <strong>æ³¨æ„ï¼š</strong><code>your github private email</code>æ€ä¹ˆé…ç½®è¯·çœ‹</p><h3 id="ï¼ˆ4ï¼‰å‘å¸ƒåˆ°GitHub"><a href="#ï¼ˆ4ï¼‰å‘å¸ƒåˆ°GitHub" class="headerlink" title="ï¼ˆ4ï¼‰å‘å¸ƒåˆ°GitHub"></a>ï¼ˆ4ï¼‰å‘å¸ƒåˆ°GitHub</h3><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ï¼ˆ5ï¼‰åŒæ—¶æ‹¥æœ‰gitlab-and-githubè´¦å·æ—¶"><a href="#ï¼ˆ5ï¼‰åŒæ—¶æ‹¥æœ‰gitlab-and-githubè´¦å·æ—¶" class="headerlink" title="ï¼ˆ5ï¼‰åŒæ—¶æ‹¥æœ‰gitlab and githubè´¦å·æ—¶"></a>ï¼ˆ5ï¼‰åŒæ—¶æ‹¥æœ‰gitlab and githubè´¦å·æ—¶</h3><ol><li><p>å‘å¸ƒå®Œåï¼Œå°†å…¨å±€git name and emailæ”¹ä¸ºgitlabè´¦å·</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">git config --global user.name "your gitlab name"git config --global user.email "your gitlab private email"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>è¿›å…¥<code>.deploy_git</code>é…ç½®å±€éƒ¨è´¦å·å³githubè´¦å·</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">cd .deploy_git  # æ ¹ç›®å½•ä¸‹è¿›å…¥.deploy_git# é…ç½®git config --local user.name "your github name"git config --local user.email "your github private email"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¿™æ ·é…ç½®åï¼Œhexo då°±æ˜¯ç”¨githubè´¦å·pushï¼Œå¯¹gitlab pushå°±æ˜¯ç”¨gitlabè´¦å·</p></li></ol><h2 id="4ã€æ–°çš„æ–‡ç« "><a href="#4ã€æ–°çš„æ–‡ç« " class="headerlink" title="4ã€æ–°çš„æ–‡ç« "></a>4ã€æ–°çš„æ–‡ç« </h2><h3 id="ï¼ˆ1ï¼‰æ·»åŠ æ–°md"><a href="#ï¼ˆ1ï¼‰æ·»åŠ æ–°md" class="headerlink" title="ï¼ˆ1ï¼‰æ·»åŠ æ–°md"></a>ï¼ˆ1ï¼‰æ·»åŠ æ–°md</h3><ol><li><p>åœ¨./source/_postsä¸‹æ·»åŠ æ–°çš„mdæ–‡ä»¶</p></li><li><p>ä½¿ç”¨å‘½ä»¤push</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">hexo ghexo d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h3 id="ï¼ˆ2ï¼‰æ’å…¥å›¾ç‰‡"><a href="#ï¼ˆ2ï¼‰æ’å…¥å›¾ç‰‡" class="headerlink" title="ï¼ˆ2ï¼‰æ’å…¥å›¾ç‰‡"></a>ï¼ˆ2ï¼‰æ’å…¥å›¾ç‰‡</h3><ol><li><p>å®‰è£…æ’ä»¶</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">npm install https://github.com/CodeFalling/hexo-asset-image --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><ol><li><p>ä¿®æ”¹<code>_config_yml</code>é…ç½®</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">post_asset_folder: true  # å°†falseæ”¹ä¸ºtrue<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>åœ¨<code>./source/_posts</code>ä¸­æ–°å»ºä¸€ä¸ªmdæ–‡ä»¶æ—¶ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªä¸mdæ–‡ä»¶åŒåçš„æ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾è¯¥mdæ–‡ä»¶æ‰€éœ€å›¾ç‰‡</p></li><li>æ¥ç€åœ¨mdæ–‡ä»¶ä¸­ä»¥<code>![](/mdæ–‡ä»¶å/1.png)</code>çš„æ ¼å¼æ’å…¥å›¾ç‰‡</li><li>è¯¦ç»†æ•™ç¨‹è¯·è§<a href="http://etrd.org/2017/01/23/hexoä¸­å®Œç¾æ’å…¥æœ¬åœ°å›¾ç‰‡/" target="_blank" rel="noopener">ETRDåšå®¢</a></li></ol><h3 id="ï¼ˆ3ï¼‰æ’å…¥markdown"><a href="#ï¼ˆ3ï¼‰æ’å…¥markdown" class="headerlink" title="ï¼ˆ3ï¼‰æ’å…¥markdown"></a>ï¼ˆ3ï¼‰æ’å…¥markdown</h3><ol><li><p>Hexoçš„<a href="https://hexo.io/zh-cn/docs/tag-plugins.html" target="_blank" rel="noopener">æ ‡ç­¾æ’ä»¶</a></p></li><li><p>å¼•ç”¨ç«™å†…æ–‡ç« </p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">{% post_path filename %}{% post_link filename [title] [escape] %}{% post_link hexo-3-8-released %} # é“¾æ¥ä½¿ç”¨æ–‡ç« çš„æ ‡é¢˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>åœ¨ä½¿ç”¨æ­¤æ ‡ç­¾æ—¶å¯ä»¥å¿½ç•¥æ–‡ç« æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æˆ–è€…æ–‡ç« çš„æ°¸ä¹…é“¾æ¥ä¿¡æ¯ã€å¦‚è¯­è¨€ã€æ—¥æœŸã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨æ–‡ç« ä¸­ä½¿ç”¨ <code></code> æ—¶ï¼Œåªéœ€æœ‰ä¸€ä¸ªåä¸º <code>how-to-bake-a-cake.md</code> çš„æ–‡ç« æ–‡ä»¶å³å¯ã€‚å³ä½¿è¿™ä¸ªæ–‡ä»¶ä½äºç«™ç‚¹æ–‡ä»¶å¤¹çš„ <code>source/posts/2015-02-my-family-holiday</code> ç›®å½•ä¸‹ã€æˆ–è€…æ–‡ç« çš„æ°¸ä¹…é“¾æ¥æ˜¯ <code>2018/en/how-to-bake-a-cake</code>ï¼Œéƒ½æ²¡æœ‰å½±å“ã€‚</p><p>é»˜è®¤é“¾æ¥æ–‡å­—æ˜¯æ–‡ç« çš„æ ‡é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¦æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚æ­¤æ—¶ä¸åº”è¯¥ä½¿ç”¨ Markdown è¯­æ³• <code>[]()</code>ã€‚</p><p>é»˜è®¤å¯¹æ–‡ç« çš„æ ‡é¢˜å’Œè‡ªå®šä¹‰æ ‡é¢˜é‡Œçš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚å¯ä»¥ä½¿ç”¨<code>escape</code>é€‰é¡¹ï¼Œç¦æ­¢å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚</p></li><li><p><a href="https://www.jibing57.com/2017/10/30/how-to-use-post-link-on-hexo/" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p></li></ol><h2 id="5ã€æ›´æ¢ä¸»é¢˜"><a href="#5ã€æ›´æ¢ä¸»é¢˜" class="headerlink" title="5ã€æ›´æ¢ä¸»é¢˜"></a>5ã€æ›´æ¢ä¸»é¢˜</h2><ul><li><a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank" rel="noopener">hexo-theme-matery</a></li></ul><h3 id="ï¼ˆ1ï¼‰è®¾ç½®æ–‡ç« å¤´-ä¸€åŠ³æ°¸é€¸"><a href="#ï¼ˆ1ï¼‰è®¾ç½®æ–‡ç« å¤´-ä¸€åŠ³æ°¸é€¸" class="headerlink" title="ï¼ˆ1ï¼‰è®¾ç½®æ–‡ç« å¤´-ä¸€åŠ³æ°¸é€¸"></a>ï¼ˆ1ï¼‰è®¾ç½®æ–‡ç« å¤´-ä¸€åŠ³æ°¸é€¸</h3><ul><li>ä¿®æ”¹<code>/scaffolds/post.md</code>ä»£ç å¦‚ä¸‹ï¼š</li></ul><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">---title: {{ title }}date: {{ date }}author: Myhaaimg:top: falsecover: falsecoverImg:password:toc: truemathjax: falsesummary: categories: tags:  - ---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ï¼ˆ2ï¼‰ä¿®æ”¹subtitle"><a href="#ï¼ˆ2ï¼‰ä¿®æ”¹subtitle" class="headerlink" title="ï¼ˆ2ï¼‰ä¿®æ”¹subtitle"></a>ï¼ˆ2ï¼‰ä¿®æ”¹subtitle</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/xiugaisubtitle.png" alt="å›¾ï¼šä¿®æ”¹subtitle"></p><p><strong>æ³¨æ„ï¼š</strong>ç¬¬ä¸€æ­¥ä¿®æ”¹åº”è¯¥æ˜¯åœ¨<code>bg-cover-content.ejs</code>ä¸­</p><h3 id="ï¼ˆ3ï¼‰ä¿®æ”¹dream"><a href="#ï¼ˆ3ï¼‰ä¿®æ”¹dream" class="headerlink" title="ï¼ˆ3ï¼‰ä¿®æ”¹dream"></a>ï¼ˆ3ï¼‰ä¿®æ”¹dream</h3><p><img src="/2019/11/12/shi-yong-gong-ju-zhi-hexo/xiugaidream.png" alt="å›¾ï¼šä¿®æ”¹dream"></p><h2 id="6ã€è®©HEXOæ­å»ºçš„åšå®¢æ”¯æŒLatex"><a href="#6ã€è®©HEXOæ­å»ºçš„åšå®¢æ”¯æŒLatex" class="headerlink" title="6ã€è®©HEXOæ­å»ºçš„åšå®¢æ”¯æŒLatex"></a>6ã€è®©HEXOæ­å»ºçš„åšå®¢æ”¯æŒLatex</h2><p><a href="https://cps.ninja/2019/03/16/hexo-with-latex/" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h3><p>å®‰è£… <a href="https://github.com/hexojs/hexo-math" target="_blank" rel="noopener">hexo-math</a> æ’ä»¶ï¼Œè¯¥æ’ä»¶ï¼ˆpluginï¼‰å¯æ”¯æŒä½¿ç”¨ <a href="https://www.mathjax.org/" target="_blank" rel="noopener">MathJax</a> æˆ– <a href="https://katex.org/" target="_blank" rel="noopener">KaTeX</a> æ¥å®ç° LaTeX æ’ç‰ˆç³»ç»Ÿï¼Œè¿›è€Œåœ¨ç½‘é¡µä¸Šæ¸²æŸ“å‡ºæ•°å­¦è¡¨è¾¾å¼ï¼ˆæœ¬æ–‡ä»¥ MathJax ä¸ºä¾‹ï¼‰ã€‚</p><pre class="line-numbers language-lang-bash"><code class="language-lang-bash">## æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ hexo åšå®¢æ‰€åœ¨æ–‡ä»¶å¤¹$ cd ~/blog## å®‰è£… hexo ï¼› --save å‚æ•°ä¼šè®© npm åœ¨å®‰è£… hexo-math ä¹‹åè‡ªåŠ¨å°†å®ƒå†™å…¥ package.json æ–‡ä»¶é‡Œï¼Œä»¥ä¾¿ä¹‹åå¤šç”µè„‘åŒæ­¥æ—¶ä½¿ç”¨$ npm install hexo-math --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°† Hexo é»˜è®¤çš„ markdown æ¸²æŸ“å¼•æ“ <a href="https://github.com/hexojs/hexo-renderer-marked" target="_blank" rel="noopener">hexo-renderer-marked</a> æ›´æ¢ä¸º <a href="https://github.com/sun11/hexo-renderer-kramed" target="_blank" rel="noopener">hexo-renderer-kramed</a> ï¼Œå¼•æ“æ˜¯åœ¨é»˜è®¤çš„æ¸²æŸ“å¼•æ“çš„åŸºç¡€ä¸Šä¿®æ”¹äº†ä¸€äº› bug è€Œå·²ã€‚æ­¤å¤„ä¸æ›´æ¢ä¹Ÿæ²¡é—®é¢˜ï¼Œæœ¬æ–‡ä»¥æ›´æ¢ä¸ºä¾‹ã€‚</p><pre class="line-numbers language-lang-bash"><code class="language-lang-bash">## å¸è½½é»˜è®¤ markdown æ¸²æŸ“å¼•æ“ hexo-renderer-markedï¼›è‹¥ä¸å¸è½½ï¼Œä¼šå’Œæ–°çš„å¼•æ“å‘ç”Ÿå†²çªï¼ˆconflictï¼‰$ npm uninstall hexo-renderer-marked --save## å®‰è£…æ–°å¼•æ“ hexo-renderer-kramed $ npm install hexo-renderer-kramed --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="ä¿®æ”¹-kramed-é…ç½®ï¼Œè§£å†³è¯­ä¹‰å†²çª"><a href="#ä¿®æ”¹-kramed-é…ç½®ï¼Œè§£å†³è¯­ä¹‰å†²çª" class="headerlink" title="ä¿®æ”¹ kramed é…ç½®ï¼Œè§£å†³è¯­ä¹‰å†²çª"></a>ä¿®æ”¹ kramed é…ç½®ï¼Œè§£å†³è¯­ä¹‰å†²çª</h3><p>ç”±äº LaTeX ä¸ Markdown è¯­æ³•å­˜åœ¨å†²çªï¼ˆä¾‹å¦‚åœ¨ markdown ä¸­ï¼Œ<em>æ–œä½“</em>å¯ä»¥ç”¨ <code>*</code> æˆ–è€… <code>_</code> è¡¨ç¤ºï¼Œè€Œ LaTeX ä¹Ÿä¼šç”¨åˆ° <code>_</code> ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¯¹ kramed é»˜è®¤çš„è¯­æ³•è§„åˆ™è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™ä¹‹åä¼šå‡ºç°å¾ˆå¤šå¥‡æ€ªçš„æ’ç‰ˆæ ·å¼ã€‚</p><p>æ‰“å¼€ <code>~/blog/node_modules\kramed\lib\rules\inline.js</code> æ–‡ä»¶ï¼ˆHexo åšå®¢æ‰€åœ¨æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹çš„ <code>node_modules</code> æ–‡ä»¶å¤¹ï¼‰ï¼ŒæŠŠç¬¬ 11 è¡Œçš„ <code>escape</code> å˜é‡çš„å€¼ä¿®æ”¹ä¸ºï¼š</p><pre class="line-numbers language-lang-javascript"><code class="language-lang-javascript">escape: /^\\([`*\[\]()#$+\-.!_>])/,<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åŒæ—¶æŠŠç¬¬ 20 è¡Œçš„ <code>em</code> å˜é‡ä¿®æ”¹ä¸ºï¼š</p><pre class="line-numbers language-lang-javascript"><code class="language-lang-javascript">em: /^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="è®¾ç½®-config-yml-å¼€å¯-MathJax-æ¸²æŸ“å¼•æ“ï¼ˆ-é‡è¦-ï¼‰"><a href="#è®¾ç½®-config-yml-å¼€å¯-MathJax-æ¸²æŸ“å¼•æ“ï¼ˆ-é‡è¦-ï¼‰" class="headerlink" title="è®¾ç½® _config.yml å¼€å¯ MathJax æ¸²æŸ“å¼•æ“ï¼ˆ==é‡è¦==ï¼‰"></a>è®¾ç½® _config.yml å¼€å¯ MathJax æ¸²æŸ“å¼•æ“ï¼ˆ==é‡è¦==ï¼‰</h3><p>åœ¨ <code>~/blog/_config.yml</code> æ–‡ä»¶ï¼ˆæ³¨æ„ï¼Œæ˜¯ Hexo åšå®¢æ–‡ä»¶å¤¹<strong>æ ¹ç›®å½•</strong>ä¸­çš„ <code>/_config.yml</code> è€Œä¸æ˜¯ä¸»é¢˜ç›®å½•ä¸‹çš„ <code>/themes/next/_config.yml</code>ï¼‰ä¸­å¢åŠ  MathJax çš„æ”¯æŒï¼Œå¹¶æ‰‹åŠ¨è®¾ç½®ä¸‹é¢çš„ srcï¼ˆè¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œä½¿ç”¨é»˜è®¤çš„ src ä¼šå¯¼è‡´æ•°å­¦è¡¨è¾¾å¼æ¸²æŸ“æ˜¾ç¤ºå¤±è´¥ã€‚è¿™é‡Œçš„å…³é”®æ˜¯ src ä¸­çš„ <code>?config=TeX-MML-AM_CHTML</code> è¿™ä¸ªå­—æ®µï¼‰</p><pre class="line-numbers language-lang-yml"><code class="language-lang-yml">......# MathJaxmath:  engine: 'mathjax'  mathjax:    src: https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML   ......<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨èç³»ç»Ÿä¹‹ç®—æ³•ä»‹ç»</title>
      <link href="/2019/10/17/tui-jian-xi-tong-zhi-suan-fa-jie-shao/"/>
      <url>/2019/10/17/tui-jian-xi-tong-zhi-suan-fa-jie-shao/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€CF-Collaborative-Filtering"><a href="#ä¸€ã€CF-Collaborative-Filtering" class="headerlink" title="ä¸€ã€CF(Collaborative-Filtering)"></a>ä¸€ã€CF(Collaborative-Filtering)</h1><p>ä¸»è¦æ€æƒ³ï¼š</p><p>ååŒè¿‡æ»¤æ¨èæ–¹æ³•çš„ä¸»è¦æ€æƒ³æ˜¯ï¼šåˆ©ç”¨å·²æœ‰ç”¨æˆ·ç¾¤è¿‡å»çš„è¡Œä¸ºæˆ–æ„è§é¢„æµ‹å½“å‰ç”¨æˆ·æœ€å¯èƒ½å–œæ¬¢å“ªäº›ä¸œè¥¿æˆ–å¯¹å“ªäº›ä¸œè¥¿æ„Ÿå…´è¶£ã€‚</p><h2 id="1ã€åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤"><a href="#1ã€åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤" class="headerlink" title="1ã€åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤"></a>1ã€åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤</h2><p>æ½œåœ¨å‡è®¾ï¼š</p><ul><li>å¦‚æœç”¨æˆ·è¿‡å»æœ‰ç›¸ä¼¼çš„åå¥½ï¼Œé‚£ä¹ˆä»–ä»¬æœªæ¥ä¹Ÿä¼šæœ‰ç›¸ä¼¼çš„åå¥½ï¼›</li><li>ç”¨æˆ·åå¥½ä¸ä¼šéšæ—¶é—´è€Œå˜åŒ–</li></ul><p>ä¸»è¦æ€æƒ³ï¼š</p><ul><li>é¦–å…ˆï¼Œç»™å®šä¸€ä¸ªè¯„åˆ†æ•°æ®é›†å’Œå½“å‰ç”¨æˆ·çš„IDä½œä¸ºè¾“å…¥ï¼Œæ‰¾å‡ºä¸å½“å‰ç”¨æˆ·è¿‡å»æœ‰ç›¸ä¼¼åå¥½çš„å…¶ä»–ç”¨æˆ·ï¼›</li><li>ç„¶åï¼Œå¯¹å½“å‰ç”¨æˆ·æ²¡æœ‰è¯„ä»·è¿‡çš„ç‰©å“ï¼Œåˆ©ç”¨æœ€è¿‘é‚»å¯¹ç‰©å“çš„è¯„åˆ†è®¡ç®—é¢„æµ‹å€¼ã€‚</li></ul><p>ï¼ˆ1ï¼‰ååŒæ¨èçš„è¯„åˆ†æ•°æ®åº“ï¼ˆä¾‹å­1ï¼‰</p><div class="table-container"><table><thead><tr><th></th><th>ç‰©å“1</th><th>ç‰©å“2</th><th>ç‰©å“3</th></tr></thead><tbody><tr><td>ç”¨æˆ·1</td><td>5</td><td>4</td><td>ï¼Ÿ</td></tr><tr><td>ç”¨æˆ·2</td><td>3</td><td>4</td><td>5</td></tr><tr><td>ç”¨æˆ·3</td><td>4</td><td>5</td><td>3</td></tr></tbody></table></div><p>ï¼ˆ2ï¼‰ç®—æ³•æ­¥éª¤</p><ul><li>åˆ©ç”¨ç”¨æˆ·å·²æœ‰çš„ç‰©å“è¯„åˆ†<code>rate</code>è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦$sim(a, b)$ï¼Œç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•å¯ä»¥æ˜¯<strong><code>pearson</code>ç›¸å…³ç³»æ•°ã€æ”¹è¿›ä½™å¼¦ç›¸ä¼¼åº¦ã€<code>spearman</code>ç§©ç›¸å…³ç³»æ•°ã€å‡æ–¹å·®ç­‰</strong>ã€‚ï¼ˆè®¡ç®—ç›¸ä¼¼åº¦æ˜¯ç”¨ä¸¤ä¸ªç”¨æˆ·æ‹¥æœ‰å…±åŒè¡Œä¸ºç‰©å“çš„è¯„åˆ†æ¥è®¡ç®—ï¼‰</li><li>é’ˆå¯¹è¦é¢„æµ‹çš„æ¯ä¸ªç”¨æˆ·ï¼Œé€‰æ‹©ä¸å…¶ç›¸ä¼¼åº¦æ’åæœ€é å‰çš„<code>k</code>ä¸ªç”¨æˆ·å¯¹æŒ‡å®šç‰©å“çš„è¯„åˆ†åšåŠ æƒè®¡ç®—æ¥å¾—åˆ°è¯¥ç”¨æˆ·å¯¹è¯¥ç‰©å“çš„è¯„åˆ†ã€‚</li></ul><p>ï¼ˆ3ï¼‰é¢ä¸´çš„æŒ‘æˆ˜</p><ul><li>ç”¨æˆ·é‡å’Œç‰©å“é‡å¾ˆå¤§æ—¶ï¼Œç®—æ³•æ€§èƒ½ä¸é«˜</li><li>å½“éœ€è¦æ‰«æå¤§é‡æ½œåœ¨è¿‘é‚»æ—¶ï¼Œå¾ˆéš¾åšåˆ°å®æ—¶è®¡ç®—é¢„æµ‹å€¼</li></ul><h2 id="2ã€åŸºäºç‰©å“çš„ååŒè¿‡æ»¤"><a href="#2ã€åŸºäºç‰©å“çš„ååŒè¿‡æ»¤" class="headerlink" title="2ã€åŸºäºç‰©å“çš„ååŒè¿‡æ»¤"></a>2ã€åŸºäºç‰©å“çš„ååŒè¿‡æ»¤</h2><p>ä¸»è¦æ€æƒ³ï¼š</p><ul><li>åˆ©ç”¨ç‰©å“é—´çš„ç›¸ä¼¼åº¦æ¥è®¡ç®—é¢„æµ‹å€¼</li></ul><h2 id="3ã€ç–‘éš¾è§£ç­”"><a href="#3ã€ç–‘éš¾è§£ç­”" class="headerlink" title="3ã€ç–‘éš¾è§£ç­”"></a>3ã€ç–‘éš¾è§£ç­”</h2><h3 id="1-ç›¸ä¼¼åº¦çš„æ”¹è¿›-çƒ­é—¨itemæˆ–è€…æ´»è·ƒuserå¸¦æ¥çš„é—®é¢˜"><a href="#1-ç›¸ä¼¼åº¦çš„æ”¹è¿›-çƒ­é—¨itemæˆ–è€…æ´»è·ƒuserå¸¦æ¥çš„é—®é¢˜" class="headerlink" title="1. ç›¸ä¼¼åº¦çš„æ”¹è¿›=çƒ­é—¨itemæˆ–è€…æ´»è·ƒuserå¸¦æ¥çš„é—®é¢˜"></a>1. ç›¸ä¼¼åº¦çš„æ”¹è¿›=çƒ­é—¨itemæˆ–è€…æ´»è·ƒuserå¸¦æ¥çš„é—®é¢˜</h3><ul><li><a href="chrome-extension://cdonnmffkdaoajfknoeeecmchibpmkmg/assets/pdf/web/viewer.html?file=https%3A%2F%2Farxiv.org%2Fftp%2Farxiv%2Fpapers%2F1301%2F1301.7363.pdf" target="_blank" rel="noopener">å‚è€ƒè®ºæ–‡: Empirical Analysis of Predictive Algorithm for Collaborative Filtering</a></li><li><a href="https://blog.csdn.net/songbinxu/article/details/79917267" target="_blank" rel="noopener">æ”¹è¿›åŠæ³•å‚è€ƒåšå®¢é“¾æ¥</a></li></ul><h1 id="äºŒã€LR-Logistic-Regression-FTRL"><a href="#äºŒã€LR-Logistic-Regression-FTRL" class="headerlink" title="äºŒã€LR(Logistic Regression)+FTRL"></a>äºŒã€LR(Logistic Regression)+FTRL</h1><h2 id="1ã€é€»è¾‘å›å½’"><a href="#1ã€é€»è¾‘å›å½’" class="headerlink" title="1ã€é€»è¾‘å›å½’"></a>1ã€é€»è¾‘å›å½’</h2><p>FTRLæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ä¼˜åŒ–æ–¹æ³•ï¼Œæœ€æ—©ç”±googleæå‡ºå¹¶ç”¨äºCTRé¢„ä¼°ã€‚å¸¸è¢«ç”¨äºé€»è¾‘å›å½’çš„ä¼˜åŒ–ï¼Œå› æ­¤å…ˆç®€å•ä»‹ç»ä¸€ä¸‹é€»è¾‘å›å½’çš„å†…å®¹ã€‚</p><h3 id="1-1-sigmoidå‡½æ•°"><a href="#1-1-sigmoidå‡½æ•°" class="headerlink" title="1.1 sigmoidå‡½æ•°"></a>1.1 sigmoidå‡½æ•°</h3><p>ç”±äºäºŒåˆ†ç±»ç»“æœæ˜¯1æˆ–è€…0ï¼Œè¿™ä¸æ•°å­¦çš„é˜¶è·ƒå‡½æ•°å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯é˜¶è·ƒå‡½æ•°åœ¨x=0çš„ä½ç½®ä¼šå‘ç”Ÿçªå˜ï¼Œè¿™ä¸ªçªå˜åœ¨æ•°å­¦ä¸Šå¾ˆéš¾å¤„ç†ã€‚æ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨sigmoidå‡½æ•°æ¥æ‹Ÿåˆï¼š</p><script type="math/tex; mode=display">g(z)={\frac 1{1+e^{-z}}} \qquad(1)</script><p>å…·ä½“åº”ç”¨åˆ°é€»è¾‘å›å½’ç®—æ³•ä¸­ï¼š</p><script type="math/tex; mode=display">z={\omega}_0+{\omega}_1x_1+{\omega}_2x_2+......+{\omega}_nx_n=\sum_{i=0}^n{\omega}_ix_i=\mathbf{\omega^TX}   \qquad(2)</script><p>å…¶ä¸­<script type="math/tex">x_i</script>è¡¨ç¤ºæ ·æœ¬å±æ€§ï¼ˆå¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œå°±æ˜¯æ ‡ç­¾IPï¼‰çš„å€¼ï¼Œ <script type="math/tex">\omega_i</script>è¡¨ç¤ºè¿™ä¸ªå±æ€§å¯¹åº”çš„ç³»æ•°ï¼ˆä¹Ÿå°±æ˜¯ç®—æ³•éœ€è¦è®¡ç®—çš„å†…å®¹ï¼‰ã€‚æ³¨æ„è¿™é‡Œå°†<script type="math/tex">x_0</script>ä¸<script type="math/tex">\omega_0</script>ä¹Ÿä»£å…¥äº†ä¸Šè¿°å…¬å¼ï¼Œå…¶ä¸­å‰è€…æ’ä¸º1ã€‚äºæ˜¯é—®é¢˜å°±å˜æˆäº†åœ¨è®­ç»ƒæ ·æœ¬ä¸­ï¼Œå·²çŸ¥å±æ€§xä¸æœ€ç»ˆåˆ†ç±»ç»“æœyï¼ˆ1æˆ–è€…0ï¼‰æ—¶ï¼Œå¦‚ä½•æ±‚å¾—è¿™äº›ç³»æ•° <script type="math/tex">\omega_i</script>ï¼Œä½¿å¾—æŸå¤±æœ€å°ã€‚</p><h3 id="1-2-æå¤§ä¼¼ç„¶ä¼°è®¡MLEä¸æŸå¤±å‡½æ•°"><a href="#1-2-æå¤§ä¼¼ç„¶ä¼°è®¡MLEä¸æŸå¤±å‡½æ•°" class="headerlink" title="1.2 æå¤§ä¼¼ç„¶ä¼°è®¡MLEä¸æŸå¤±å‡½æ•°"></a>1.2 æå¤§ä¼¼ç„¶ä¼°è®¡MLEä¸æŸå¤±å‡½æ•°</h3><p>åœ¨æœºå™¨å­¦ä¹ ç†è®ºä¸­ï¼ŒæŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰æ˜¯ç”¨æ¥è¡¡é‡æ¨¡å‹çš„é¢„æµ‹å€¼<script type="math/tex">f(x)</script>ä¸çœŸå®å€¼<script type="math/tex">Y</script>çš„ä¸ä¸€è‡´ç¨‹åº¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªéè´Ÿå®å€¼å‡½æ•°ï¼ŒæŸå¤±å‡½æ•°è¶Šå°ï¼Œæ¨¡å‹è¶Šä¼˜ï¼ˆè¿˜éœ€è€ƒè™‘è¿‡æ‹Ÿåˆç­‰é—®é¢˜ï¼‰ã€‚æŸå¤±å‡½æ•°æ˜¯ç»éªŒé£é™©å‡½æ•°çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¹Ÿæ˜¯ç»“æ„é£é™©å‡½æ•°é‡è¦ç»„æˆéƒ¨åˆ†ã€‚æ¨¡å‹çš„ç»“æ„é£é™©å‡½æ•°åŒ…æ‹¬äº†ç»éªŒé£é™©é¡¹å’Œæ­£åˆ™é¡¹ï¼Œé€šå¸¸å¯ä»¥è¡¨ç¤ºæˆå¦‚ä¸‹å¼å­</p><script type="math/tex; mode=display">\omega^* = \arg \min_\omega \frac{1}{m}{}\sum_{i=1}^{m} L(y_i, f(x_i; \omega)) + \lambda\  \Phi(\omega)  \qquad(3)</script><p>å…¶ä¸­mè¡¨ç¤ºæ ·æœ¬çš„æ•°é‡ã€‚å¯¹äºé€»è¾‘å›å½’ï¼Œå…¶loss functionæ˜¯logæŸå¤±ï¼Œè¿™å¯ä»¥é€šè¿‡æå¤§ä¼¼ç„¶ä¼°è®¡è¿›è¡Œæ¨å¯¼å¾—åˆ°ã€‚</p><p>é¦–å…ˆï¼Œç»™å®šä¸€ä¸ªæ ·æœ¬<script type="math/tex">x</script>ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªçº¿æ€§å‡½æ•°å¯¹è‡ªå˜é‡è¿›è¡Œçº¿æ€§ç»„åˆï¼Œå³ä¸Šè¿°çš„ï¼ˆ2ï¼‰å¼å­ï¼š</p><script type="math/tex; mode=display">z={\omega}_0+{\omega}_1x_1+{\omega}_2x_2+......+{\omega}_nx_n=\sum_{i=0}^n{\omega}_ix_i=\mathbf{\omega^TX} \qquad(4)</script><p>æ ¹æ®sigmoidå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºé¢„æµ‹å‡½æ•°çš„è¡¨è¾¾å¼ä¸ºï¼š</p><script type="math/tex; mode=display">h_{\omega}(x) = g(\omega^Tx) = \frac{1}{1 + e^{-\omega^Tx}}  \qquad(5)</script><p>ä¸Šå¼è¡¨ç¤º<script type="math/tex">y=1</script>çš„é¢„æµ‹å‡½æ•°ä¸º<script type="math/tex">h_{\omega}(x)</script>ã€‚åœ¨è¿™é‡Œï¼Œå‡è®¾å› å˜é‡<script type="math/tex">y</script>æœä»ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°ä¸‹åˆ—ä¸¤ä¸ªå¼å­ï¼š</p><script type="math/tex; mode=display">\begin{aligned}p(y=1 | x) &= h_{\omega} (x)         \quad\qquad(6)\\p(y=0 | x) &= 1 - h_{\omega} (x)      \qquad(7)\end{aligned}</script><p>è€Œå¯¹äºä¸Šé¢çš„ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œé€šè¿‡è§‚å¯Ÿï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¯ä»¥å°†å…¶åˆå¹¶ä¸ºä»¥ä¸‹è¡¨è¾¾å¼ï¼š</p><script type="math/tex; mode=display">p(y | x) = h_{\omega} (x)^y (1-h_{\omega} (x))^{1-y} \qquad(8)</script><p>æ ¹æ®ä¸Šé¢çš„å¼å­ï¼Œç»™å®šä¸€å®šçš„æ ·æœ¬ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ å‡ºä¼¼ç„¶å‡½æ•°ï¼Œç„¶åå¯ä»¥ä½¿ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡MLEçš„æ€æƒ³æ¥æ±‚è§£å‚æ•°ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æ»¡è¶³æœ€å°åŒ–é£é™©ç†è®ºï¼Œæˆ‘ä»¬å¯ä»¥å°†MLEçš„æ€æƒ³è½¬åŒ–ä¸ºæœ€å°åŒ–é£é™©åŒ–ç†è®ºï¼Œæœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°å…¶å®å°±ç­‰ä»·äºæœ€å°åŒ–è´Ÿçš„ä¼¼ç„¶å‡½æ•°ã€‚å¯¹äºMLEï¼Œå°±æ˜¯åˆ©ç”¨å·²çŸ¥çš„æ ·æœ¬åˆ†å¸ƒï¼Œæ‰¾åˆ°æœ€æœ‰å¯èƒ½ï¼ˆå³æœ€å¤§æ¦‚ç‡ï¼‰å¯¼è‡´è¿™ç§åˆ†å¸ƒçš„å‚æ•°å€¼ï¼›æˆ–è€…è¯´æ˜¯ä»€ä¹ˆæ ·çš„å‚æ•°æ‰èƒ½ä½¿æˆ‘ä»¬è§‚æµ‹åˆ°ç›®å‰è¿™ç»„æ•°æ®çš„æ¦‚ç‡æœ€å¤§ã€‚ä½¿ç”¨MLEæ¨å¯¼LRçš„loss functionçš„è¿‡ç¨‹å¦‚ä¸‹ã€‚<br>é¦–å…ˆï¼Œæ ¹æ®ä¸Šé¢çš„å‡è®¾ï¼Œå†™å‡ºç›¸åº”çš„æå¤§ä¼¼ç„¶å‡½æ•°ï¼ˆå‡å®šæœ‰<script type="math/tex">m</script>ä¸ªæ ·æœ¬ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}L(\omega)&=  \prod_{i=1}^{m} p(y_i | x_i; \omega)  \\&=  \prod_{i=1}^{m} h_{\omega} (x_i)^{y_i} (1-h_{\omega} (x_i)^{1-y_i} \\\end{aligned}   \qquad(9)</script><p>ä¸Šè¿°å¼å­ä¸­çš„<script type="math/tex">\omega</script>åŠ<script type="math/tex">x_i</script>å‡ä¸ºå‘é‡ï¼Œå¹¶æœªæ˜¾ç¤ºå…¶è½¬ç½®ã€‚</p><p>ç›´æ¥å¯¹ä¸Šé¢çš„å¼å­æ±‚å¯¼ä¼šä¸æ–¹ä¾¿ï¼Œå› æ­¤ï¼Œä¸ºäº†ä¾¿äºè®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä¼¼ç„¶å‡½æ•°å–å¯¹æ•°ï¼Œç»è¿‡åŒ–ç®€å¯ä»¥å¾—åˆ°ä¸‹å¼çš„æ¨å¯¼ç»“æœï¼š</p><script type="math/tex; mode=display">\begin{aligned}\log L(\omega)&= \sum_{i=1}^{m} \log \left [ (h_{\omega} (x_i)^{y_i} (1-h_{\omega} (x_i))^{1-y_i}) \right ] \\&= \sum_{i=1}^{m} \left [ y_i \log h_{\omega} (x_i) +  (1-y_i) \log(1-h_{\omega} (x_i)) \right ]  \\\end{aligned}  \qquad(10)</script><p>å› æ­¤ï¼ŒæŸå¤±å‡½æ•°å¯ä»¥é€šè¿‡æœ€å°åŒ–è´Ÿçš„ä¼¼ç„¶å‡½æ•°å¾—åˆ°ï¼Œå³ä¸‹å¼ï¼š</p><script type="math/tex; mode=display">J(\omega) = - \frac{1}{m} \sum_{i=1}^m \left [ y_i \log h_{\omega}(x_i) + (1-y_i) \log(1-h_{\omega}(x_i)  \right ]   \qquad(11)</script><p>åœ¨å‘¨å¿—åç‰ˆçš„æœºå™¨å­¦ä¹ ä¸­ï¼Œå°†sigmiodå‡½æ•°ä»£å…¥<script type="math/tex">h_{\omega}(x_i)</script>ï¼Œå¹¶ä½¿ç”¨lnä»£æ›¿logï¼Œä¸Šè¿°å…¬å¼è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}J(\omega) &= - \frac{1}{m} \sum_{i=1}^m \left [ y_i \ln h_{\omega}(x_i) + (1-y_i) \ln(1-h_{\omega}(x_i)  \right ]\\&=- \frac{1}{m} \sum_{i=1}^m \left [ y_i\ln  \frac{1}{1+e^{-\omega x_i}}+(1-y_i)\ln \frac{e^{-\omega x_i}}{1+e^{-\omega x_i}}\right ]\\&=- \frac{1}{m} \sum_{i=1}^m \left [ \ln \frac{1}{1+e^{\omega x_i}} + y_i \ln \frac{1}{e^{-\omega x_i}}\right ]\\&= \frac{1}{m} \sum_{i=1}^m \left [ -y_iwx_i + \ln(1+e^{\omega x_i})\right ]\end{aligned}  \qquad(12)</script><p>åœ¨æŸäº›èµ„æ–™ä¸Šï¼Œè¿˜æœ‰å¦ä¸€ç§æŸå¤±å‡½æ•°çš„è¡¨è¾¾å½¢å¼ï¼Œä½†æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸‹ã€æ¨å¯¼è§ä¸‹é¢1.4ã€‘ï¼š</p><script type="math/tex; mode=display">J(\omega) = \frac{1}{m} \sum_{i=1}^m log(1 + e^{-y_i \omega x}) \qquad(13)</script><h3 id="1-3-æ¢¯åº¦ä¸‹é™"><a href="#1-3-æ¢¯åº¦ä¸‹é™" class="headerlink" title="1.3 æ¢¯åº¦ä¸‹é™"></a>1.3 æ¢¯åº¦ä¸‹é™</h3><p>æˆ‘ä»¬ä»¥æ¢¯åº¦ä¸‹é™ä¸ºä¾‹å¯¹é€»è¾‘å›å½’è¿›è¡Œæ±‚è§£ï¼Œå…¶è¿­ä»£å…¬å¼çš„æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\frac{ \partial J(\omega)} {\partial \omega_j}&= -\frac{1}{m} \sum_{i}^{m} \left [ y_i(1 - h_{\omega}(x_i)) \cdot (-x_{i,j}) + (1 - y_i) h_{\omega} (x_i)  \cdot (x_{i,j}) \right ]\\& = - \frac{1}{m} \sum_{i}^{m}  (-y_i \cdot x_{i,j} + h_{\omega}(x_i) \cdot x_{i,j})  \\& = -\frac{1}{m} \sum_{i}^{m} (h_{\omega}(x_i) - y_i) x_{i,j}\end{aligned}  \qquad(14)</script><p>ä¸Šè¿°ä¸­<script type="math/tex">x_{i,j}</script>è¡¨ç¤ºç¬¬<script type="math/tex">i</script>ä¸ªæ ·æœ¬çš„ç¬¬<script type="math/tex">j</script>ä¸ªå±æ€§çš„å–å€¼ã€‚<br>äºæ˜¯ï¼Œ<script type="math/tex">\omega</script>çš„æ›´æ–°æ–¹å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\omega_{j+1} = \omega_j - \alpha \sum_{i=1}^{m} (h_{\omega}(x_i) - y_i) x_{x,j}</script><p>å¯¹äºéšæœºæ¢¯åº¦ä¸‹é™ï¼Œæ¯æ¬¡åªå–ä¸€ä¸ªæ ·æœ¬ï¼Œåˆ™<script type="math/tex">\omega</script>çš„æ›´æ–°æ–¹å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\omega_{j+1} = \omega_j - \alpha (h_{\omega}(x)- y) x_{j}</script><p>å…¶ä¸­<script type="math/tex">x</script>ä¸ºè¿™ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼ï¼Œ<script type="math/tex">y</script>ä¸ºè¿™ä¸ªæ ·æœ¬çš„çœŸå®å€¼ï¼Œ<script type="math/tex">x_j</script>ä¸ºè¿™ä¸ªæ ·æœ¬ç¬¬<script type="math/tex">j</script>ä¸ªå±æ€§çš„å€¼ã€‚</p><p>ä½¿ç”¨å‘¨å¿—åç‰ˆçš„æŸå¤±å‡½æ•°æ›´å®¹æ˜“å¾—å‡ºè¿™ä¸ªç»“è®ºã€‚</p><h3 id="1-4-å¦ä¸€ç§å½¢å¼çš„æŸå¤±å‡½æ•°åŠå…¶æ¢¯åº¦"><a href="#1-4-å¦ä¸€ç§å½¢å¼çš„æŸå¤±å‡½æ•°åŠå…¶æ¢¯åº¦" class="headerlink" title="1.4 å¦ä¸€ç§å½¢å¼çš„æŸå¤±å‡½æ•°åŠå…¶æ¢¯åº¦"></a>1.4 å¦ä¸€ç§å½¢å¼çš„æŸå¤±å‡½æ•°åŠå…¶æ¢¯åº¦</h3><p>ä¸ä¸Šé¢ç›¸åŒï¼Œæ ¹æ®sigmoidå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºé¢„æµ‹å‡½æ•°çš„è¡¨è¾¾å¼ä¸ºï¼š</p><script type="math/tex; mode=display">h_{\omega}(x) = g(\omega^Tx) = \frac{1}{1 + e^{-\omega^Tx}}</script><p>ä¸Šå¼è¡¨ç¤º<script type="math/tex">y=1</script>çš„é¢„æµ‹å‡½æ•°ä¸º<script type="math/tex">h_{\omega}(x)</script>ã€‚<br>ä½†ä¸ä¸Šé¢ä¸åŒï¼Œæˆ‘ä»¬å‡è®¾æ ·æœ¬çš„åˆ†å¸ƒä¸º{-1,1}ï¼Œåˆ™</p><script type="math/tex; mode=display">p(y=1 | x) = h_{\omega} (x)</script><script type="math/tex; mode=display">p(y=-1 | x) = 1 - h_{\omega} (x)</script><p>å¯¹äºsigmoidå‡½æ•°ï¼Œæœ‰ä»¥ä¸‹ç‰¹æ€§ï¼ˆç®€å•æ¨å¯¼ä¸€ä¸‹å°±å¯ä»¥å¾—åˆ°ï¼‰ï¼š</p><script type="math/tex; mode=display">h(-x) = 1 - h(x)</script><p>äºæ˜¯(14)(15)å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">p(y|x) = h_\omega(yx)</script><p>åŒæ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨MLEä½œä¼°è®¡ï¼Œ</p><script type="math/tex; mode=display">\begin{aligned}L(\omega)&=  \prod_{i=1}^{m} p(y_i | x_i; \omega)  \\&=  \prod_{i=1}^{m} h_\omega(y_i x_i)\\&= \prod_{i=1}^{m} \frac{1}{1+e^{-y_iwx_i}}\end{aligned}</script><p>å¯¹ä¸Šå¼å–å¯¹æ•°åŠè´Ÿå€¼ï¼Œå¾—åˆ°æŸå¤±ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}-\log L(\omega)&= -\log \prod_{i=1}^{m} p(y_i | x_i; \omega)  \\&=  -\sum_{i=1}^{m} \log p(y_i | x_i; \omega)  \\&=  -\sum_{i=1}^{m} \log \frac{1}{1+e^{-y_iwx_i}}\\&=  \sum_{i=1}^{m} \log(1+e^{-y_iwx_i})\\\end{aligned}</script><p>å³å¯¹äºæ¯ä¸€ä¸ªæ ·æœ¬ï¼ŒæŸå¤±å‡½æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">L(\omega)=\log(1+e^{-y_iwx_i})</script><p>å¯¹ä¸Šå¼æ±‚æ¢¯åº¦ï¼Œå®¹æ˜“å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\frac{ \partial J(\omega)} {\partial \omega_j}&= \frac{-y_i x_i}{1+e^{y_i \omega x_i}}\end{aligned}</script><h2 id="2ã€FOBOSä¸RDA"><a href="#2ã€FOBOSä¸RDA" class="headerlink" title="2ã€FOBOSä¸RDA"></a>2ã€FOBOSä¸RDA</h2><h3 id="2-1-FOBOSåŸºæœ¬åŸç†"><a href="#2-1-FOBOSåŸºæœ¬åŸç†" class="headerlink" title="2.1 FOBOSåŸºæœ¬åŸç†"></a>2.1 FOBOSåŸºæœ¬åŸç†</h3><p>FOBOSç®—æ³•ç”±John Duchiå’ŒYoram Singeræå‡ºï¼Œæ˜¯æ¢¯åº¦ä¸‹é™çš„ä¸€ä¸ªå˜ç§ã€‚<br>ä¸æ¢¯åº¦ä¸‹é™ä¸åŒï¼Œå®ƒå°†æƒé‡çš„æ›´æ–°åˆ†ä¸º2ä¸ªæ­¥éª¤ï¼š</p><script type="math/tex; mode=display">\begin{aligned}W_{t+\frac{1}{2}}&=W_t-\eta_tG_t   \\nW_{t+1}&=\arg\min\{\frac{1}{2}\|W-W_{t+\frac{1}{2}}\|^2+\eta_{(t+\frac{1}{2})}\psi(W)\}\end{aligned}</script><p>ä»ä¸Šé¢çš„2ä¸ªæ­¥éª¤å¯ä»¥çœ‹å‡ºï¼š<br>ç¬¬ä¸€ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ¢¯åº¦ä¸‹é™ã€‚<br>ç¬¬äºŒä¸ªæ­¥éª¤æ˜¯å¯¹æ¢¯åº¦ä¸‹é™çš„ç»“æœè¿›è¡Œå¾®è°ƒã€‚è¿™é‡Œå¯ä»¥åˆ†ä¸º2éƒ¨åˆ†ï¼šï¼ˆ1ï¼‰å‰åŠéƒ¨åˆ†ä¿è¯äº†å¾®è°ƒå‘ç”Ÿåœ¨ç¬¬ä¸€ä¸ªæ­¥éª¤ç»“æœï¼ˆå–æ¢¯åº¦ä¸‹é™ç»“æœï¼‰çš„é™„è¿‘ã€‚ï¼ˆ2ï¼‰ååŠéƒ¨åˆ†ç”¨äºå¤„ç†æ­£åˆ™åŒ–ï¼Œäº§ç”Ÿç¨€ç–æ€§ã€‚</p><p>æ ¹æ®æ¬¡æ¢¯åº¦ç†è®ºçš„æ¨æ–­ï¼Œå¯ä»¥å¾—å‡º<script type="math/tex">W_{(t+1)}</script>ä¸ä»…ä»…ä¸è¿­ä»£å‰çš„çŠ¶æ€<script type="math/tex">W_t</script>æœ‰å…³ï¼Œè€Œä¸”ä¸è¿­ä»£åçš„ç›¸å…³</p><h3 id="2-2-L1-FOBOS"><a href="#2-2-L1-FOBOS" class="headerlink" title="2.2 L1-FOBOS"></a>2.2 L1-FOBOS</h3><p>FOBOSåœ¨L1æ­£åˆ™åŒ–æ¡ä»¶ä¸‹ï¼Œç‰¹å¾æƒé‡çš„æ›´æ–°æ–¹å¼ä¸ºï¼šï¼ˆæ¨å¯¼è¿‡ç¨‹æš‚ç•¥ï¼‰</p><script type="math/tex; mode=display">\omega_{t+1,i}=sgn(\omega_{t,i}-\eta_tg_{t,i})max\{0,|\omega_{t,i}-\eta_tg_{t,i}|-\eta_{t+\frac{1}{2}}\lambda\}</script><p>å…¶ä¸­<script type="math/tex">g_{t,i}</script>ä¸ºæ¢¯åº¦åœ¨ç»´åº¦iä¸Šçš„å–å€¼</p><h3 id="2-3-RDAåŸºæœ¬åŸç†"><a href="#2-3-RDAåŸºæœ¬åŸç†" class="headerlink" title="2.3 RDAåŸºæœ¬åŸç†"></a>2.3 RDAåŸºæœ¬åŸç†</h3><p>ç®€å•æˆªæ–­ã€TGã€FOBOSéƒ½æ˜¯å»ºç«‹åœ¨SGDåŸºç¡€ä¸Šçš„ä¸€ä¸ªå˜ç§ï¼Œå±äºæ¢¯åº¦ä¸‹é™ç±»å‹çš„æ–¹æ³•ï¼Œè¿™ç±»æ–¹æ³•çš„ç²¾åº¦æ¯”è¾ƒé«˜ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¾—åˆ°ä¸€å®šçš„ç¨€ç–æ€§ã€‚è€ŒRDAæ˜¯ä»å¦ä¸€ä¸ªæ–¹é¢æ¥æ±‚è§£ï¼Œå®ƒçš„ç²¾åº¦æ¯”FOBOSç­‰ç•¥å·®ï¼Œä½†å®ƒæ›´æœ‰æ•ˆçš„æå‡äº†ç¨€ç–æ€§ã€‚</p><p>åœ¨RDAä¸­ï¼Œç‰¹å¾æƒé‡çš„æ›´æ–°ç­–ç•¥ä¸ºï¼š</p><script type="math/tex; mode=display">W_{t+1}=\arg\min\{\frac{1}{t}\sum_{r=1}^{t}<G^{r},W>+\psi(W)+\frac{\beta_t}{t}h(W)\}</script><p>å…¶ä¸­<script type="math/tex"><G^{r},W></script>è¡¨ç¤ºæ¢¯åº¦<script type="math/tex">G^r</script>å¯¹Wçš„ç§¯åˆ†å¹³å‡å€¼ï¼ˆç§¯åˆ†ä¸­å€¼ï¼‰ï¼›<script type="math/tex">\psi(W)</script>ä¸ºæ­£åˆ™é¡¹ï¼›<script type="math/tex">h(W)</script>ä¸ºä¸€ä¸ªè¾…åŠ©çš„ä¸¥æ ¼çš„å‡¸å‡½æ•°ï¼›<script type="math/tex">{\beta_t|t\ge1}</script>æ˜¯ä¸€ä¸ªéè´Ÿä¸”éè‡ªå‡åºåˆ—ã€‚</p><h3 id="2-4-L1-RDA"><a href="#2-4-L1-RDA" class="headerlink" title="2.4 L1-RDA"></a>2.4 L1-RDA</h3><p>åœ¨L1æ­£åˆ™åŒ–æ¡ä»¶ä¸‹ï¼ŒRDAçš„å„ä¸ªç»´åº¦çš„æƒé‡æ›´æ–°æ–¹å¼ä¸ºï¼š</p><p><img src="https://lujinhong-markdown.oss-cn-beijing.aliyuncs.com/md/%E6%88%AA%E5%B1%8F2020-09-04%20%E4%B8%8A%E5%8D%8810.17.20.png" alt></p><p>äº¦å³å½“æŸä¸ªç»´åº¦ä¸Šçš„ç´¯ç§¯æ¢¯åº¦å¹³å‡å€¼çš„ç»å¯¹å€¼ <script type="math/tex">|\overline g_{t,i}|</script>å°äºé˜ˆå€¼<script type="math/tex">\lambda</script>æ—¶ï¼Œè¯¥ç»´åº¦æƒé‡è¢«ç½®ä¸º0ã€‚</p><h2 id="3ã€FTRL"><a href="#3ã€FTRL" class="headerlink" title="3ã€FTRL"></a>3ã€FTRL</h2><p>ç†è®ºåŠå®éªŒå‡è¯æ˜ï¼ŒL1-FOBOSè¿™ç±»åŸºäºæ¢¯åº¦ä¸‹é™çš„ç®—æ³•æœ‰æ¯”è¾ƒé«˜çš„ç²¾åº¦ï¼Œä½†L1-RDAå´èƒ½åœ¨æŸå¤±ä¸€å®šç²¾åº¦çš„æƒ…å†µä¸‹äº§ç”Ÿæ›´å¥½çš„ç¨€ç–æ€§ã€‚<br>æŠŠè¿™äºŒè€…çš„ä¼˜ç‚¹ç»“åˆæˆä¸€ä¸ªç®—æ³•ï¼Œè¿™å°±æ˜¯FTRLç®—æ³•çš„æ¥æºã€‚</p><h3 id="3-1-ä»L1-FOBOSå’ŒL1-RDAæ¨å¯¼FTRL"><a href="#3-1-ä»L1-FOBOSå’ŒL1-RDAæ¨å¯¼FTRL" class="headerlink" title="3.1 ä»L1-FOBOSå’ŒL1-RDAæ¨å¯¼FTRL"></a>3.1 ä»L1-FOBOSå’ŒL1-RDAæ¨å¯¼FTRL</h3><p>æˆ‘ä»¬ä»¤<script type="math/tex">\eta_{t+\frac{1}{2}}=\eta_t=\Theta(\frac{1}{\sqrt{t}})</script>æ˜¯ä¸€ä¸ªéå¢æ­£åºåˆ—ï¼ŒåŒæ—¶ä»£å…¥L1æ­£åˆ™é¡¹ï¼Œå¾—åˆ°L1-FOBOSçš„å½¢å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\begin{aligned}W_{t+\frac{1}{2}}&=W_t-\eta_tG_t \\W_{t+1}&=\arg\min\{\frac{1}{2}\|W-W_{t+\frac{1}{2}}\|^2+\eta_{t}\lambda\|W\|_1\}\end{aligned}</script><p>å°†è¿™2ä¸ªå…¬å¼åˆå¹¶åˆ°ä¸€èµ·ï¼Œå¾—åˆ°L1-FOBOSçš„å½¢å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">W_{t+1}=\arg\min\{\frac{1}{2}\|W-W_t+\eta_tG_t\|^2+\eta_{t}\lambda\|W\|_1\}</script><p>å°†ä¸Šå¼åˆ†è§£ä¸ºNä¸ªç‹¬ç«‹çš„ç»´åº¦è¿›è¡Œæœ€ä¼˜åŒ–æ±‚è§£ï¼š</p><script type="math/tex; mode=display">\begin{aligned}w_i&=\arg\min\{\frac{1}{2}\|w_i-w_{t,i}+\eta_tg_{t,i}\|^2+\eta_{t}\lambda|w_{t,i}|_1\} \\&=\arg\min\{\frac{1}{2}(w_i-w_{t,i})^2+\frac{1}{2}(\eta_t g_{t,i})^2+w_i\eta_tg_{t,i}-w_{t,i}\eta_tg_{t,i}+\eta_t\lambda|w_i|\}\\&=\arg\min\{w_ig_{t,i}+\lambda|w_i|+\frac{1}{2\eta_t}(w_i-w_{t,i})^2+|\frac{\eta_t}{2}g_{t,i}^2-w_{t,i}g_{t,i}|\}\end{aligned}</script><ul><li>ä¸Šè¿°æ¨å¯¼çš„æœ€åä¸€æ­¥æ˜¯é€šè¿‡é™¤ä»¥<script type="math/tex">\eta_t</script>å¾—åˆ°çš„ã€‚<br>ç”±äºä¸Šå¼ä¸­çš„æœ€åä¸€é¡¹<script type="math/tex">|\frac{\eta_t}{2}g_{t,i}^2-w_{t,i}g_{t,i}|</script>æ˜¯ä¸€ä¸ªä¸<script type="math/tex">w_i</script>æ— å…³çš„é‡ï¼Œå› æ­¤ä¸Šå¼å¯ç®€åŒ–ä¸ºï¼š<script type="math/tex; mode=display">w_i=\arg\min\{w_ig_{t,i}+\lambda|w_i|+\frac{1}{2\eta_t}(w_i-w_{t,i})^2\}</script>æŠŠNä¸ªç‹¬ç«‹ä¼˜åŒ–çš„ç»´åº¦é‡æ–°åˆå¹¶ï¼ŒL1-FOBOSå¯å†™æˆä»¥ä¸‹å½¢å¼ï¼š<script type="math/tex; mode=display">W_{t+1}=\arg\min\{G_tW+\lambda\|W\|_1+\frac{1}{2\eta_t}\|W-W_t\|_2^2\}</script></li></ul><p>å¦ä¸€æ–¹é¢ï¼ŒL1-RDAå¯ä»¥è¡¨è¾¾ä¸ºï¼š</p><script type="math/tex; mode=display">W_{t+1}=\arg\min\{G_{(1:t)}W+t\lambda\|W\|_1+\frac{1}{2\eta_t}\|W-0\|_2^2\}</script><p>å…¶ä¸­<script type="math/tex">G_{(1:t)}=\sum_{s=1}{t}G_s</script>ã€‚<br>æˆ‘ä»¬ä»¤<script type="math/tex">\sigma_s=\frac{1}{\eta_s}-\frac{1}{\eta_{s-1}}</script>ï¼Œå¯ä»¥å¾—åˆ°<script type="math/tex">\sigma_{(1:t)}=\frac{1}{\eta_t}</script>ã€‚é‚£ä¹ˆL1-FOBOSä¸L1-RDAå¯ä»¥å†™ä¸ºä»¥ä¸‹æ ¼å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}W_{t+1}&=\arg\min\{G_tW+\lambda\|W\|_1+\frac{1}{2}\sigma_{(1:t)}\|W-W_t\|_2^2\}\\W_{t+1}&=\arg\min\{G_{(1:t)}W+t\lambda\|W\|_1+\frac{1}{2}\sigma_{(1:t)}\|W-0\|_2^2\}\end{aligned}</script><p>æ¯”è¾ƒä»¥ä¸Š2å¼çš„åŒºåˆ«ï¼š</p><ul><li>ï¼ˆ1ï¼‰L1-FOBOSè€ƒè™‘çš„æ˜¯å½“å‰æ¢¯åº¦çš„å½±å“ï¼ŒL1-RDAåˆ™è€ƒè™‘äº†ç´¯ç§¯å½±å“ã€‚</li><li>ï¼ˆ2ï¼‰L1-FOBOSé™åˆ¶<script type="math/tex">W_{t+1}</script>ä¸èƒ½ç¦»<script type="math/tex">W_t</script>å¤ªè¿œï¼Œè€ŒL1-RDAçš„Wåˆ™ä¸èƒ½ç¦»0å¤ªè¿œï¼Œå› æ­¤åè€…æ›´å®¹æ˜“äº§ç”Ÿç¨€ç–æ€§ã€‚</li></ul><h3 id="3-2-FTRLæƒé‡æ›´æ–°çš„æœ€ç»ˆå½¢å¼"><a href="#3-2-FTRLæƒé‡æ›´æ–°çš„æœ€ç»ˆå½¢å¼" class="headerlink" title="3.2 FTRLæƒé‡æ›´æ–°çš„æœ€ç»ˆå½¢å¼"></a>3.2 FTRLæƒé‡æ›´æ–°çš„æœ€ç»ˆå½¢å¼</h3><p>åœ¨google2010å…¬å¸ƒçš„ç†è®ºæ–‡ç« ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨L2æ­£åˆ™é¡¹ï¼Œä½†åœ¨2013å¹´å…¬å¸ƒå·¥ç¨‹å®æ–½æ–¹æ¡ˆæ—¶å¼•å…¥äº†L2ã€‚<br>å› æ­¤ï¼Œç»¼åˆä¸Šè¿°çš„L1-FOBOSåŠL1-RDAï¼ŒFTRLç®—æ³•çš„æƒé‡æ›´æ–°æ–¹å¼ä¸ºï¼š</p><script type="math/tex; mode=display">W_{t+1}=\arg\min\{G_{(1:t)}W+\lambda_1\|W\|_1+\lambda_2\|W\|_2^2+\frac{1}{2}\sum_{s=1}^t(\sigma_s\|W-W_s\|_2^2)\}</script><p>å°†ä¸Šå¼å±•å¼€ï¼Œå¾—åˆ°</p><script type="math/tex; mode=display">W_{t+1}=\arg\min\{(G_{(1:t)}-\sum_{s=1}^t\sigma_sW_s)W+\lambda_1\|W\|_1+\frac{1}{2}(\lambda_2+\sum_{s=1}^t\sigma_s)\|W\|^2+\frac{1}{2}\sum_{s=1}^{t}\sigma_s\|W_s\|_2^2\}</script><p>ç”±äºä¸Šå¼çš„æœ€åä¸€é¡¹ç›¸å¯¹äºWæ¥è¯´æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼ŒåŒæ—¶ä»¤<script type="math/tex">Z_t=G_{(1:t)}-\sum_{(s=1)}^t\sigma_sW_s</script>ï¼Œä¸Šå¼å¯è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">W_{t+1}=\arg\min\{Z_tW+\lambda_1\|W\|_1+\frac{1}{2}(\lambda_2+\sum_{s=1}^t\sigma_s)\|W\|^2\}</script><p>å„ä¸ªç»´åº¦å¯ä»¥ç‹¬ç«‹è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">w_{i+1}=\arg\min\{z_{t,i}w_i+\lambda_1|w_i|+\frac{1}{2}(\lambda_2+\sum_{s=1}^{t}\sigma_s)w_i^2\}</script><p>ä½¿ç”¨ä¸L1-FOBOSç›¸åŒçš„åˆ†ææ–¹æ³•å¯ä»¥å¾—åˆ°ï¼š<br><img src="https://lujinhong-markdown.oss-cn-beijing.aliyuncs.com/md/%E6%88%AA%E5%B1%8F2020-09-04%20%E4%B8%8A%E5%8D%8810.18.58.png" alt></p><p>æ ¹æ®ä¸Šé¢çš„å®šä¹‰:</p><script type="math/tex; mode=display">\sigma_{(1:t)}=\sum_{s=1}^t\sigma_s=\frac{1}{\eta_t}</script><p>æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢ä»‹ç»çš„å­¦ä¹ ç‡ï¼Œä»¥åŠä»¤<script type="math/tex">n_i=\sum g_i^2</script>ï¼Œåˆ™å¯ä»¥å¾—åˆ°FTRLçš„æœ€ç»ˆå½¢å¼ï¼š<br><img src="https://lujinhong-markdown.oss-cn-beijing.aliyuncs.com/md/%E6%88%AA%E5%B1%8F2020-09-04%20%E4%B8%8A%E5%8D%8810.19.50.png" alt></p><h3 id="3-3-å­¦ä¹ ç‡"><a href="#3-3-å­¦ä¹ ç‡" class="headerlink" title="3.3 å­¦ä¹ ç‡"></a>3.3 å­¦ä¹ ç‡</h3><p>1ã€per-coordinate learning rate<br>åœ¨FTRLä¸­ï¼Œå­¦ä¹ ç‡çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\eta_{t,i}=\frac{\alpha}{\beta+\sqrt{\sum_{s=1}^tg_{s,i}^2}}</script><p>å…¶ä¸­<script type="math/tex">\alpha\beta</script>æ˜¯è‡ªå®šä¹‰çš„å‚æ•°ã€‚</p><p>åœ¨ä¸€èˆ¬æ¢¯åº¦ä¸‹é™ç®—æ³•ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå…¨å±€çš„å­¦ä¹ ç‡ç­–ç•¥ï¼š<script type="math/tex">\eta_t=\frac{1}{\sqrt{t}}</script>ã€‚è¿™ä¸ªç­–ç•¥ä¿è¯äº†å­¦ä¹ ç‡æ˜¯ä¸€ä¸ªæ­£çš„éå¢åºåˆ—ï¼Œè¿™ä¸ªå€¼å¯¹äºæ¯ä¸€ä¸ªç‰¹å¾éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªæç«¯çš„æƒ…å†µï¼Œæˆ‘ä»¬æœ‰å¤šä¸ªç¨€ç–ç‰¹å¾ï¼Œå…¶ä¸­ä¸€ä¸ªç‰¹å¾<script type="math/tex">x_1</script>å‡ºç°éå¸¸é¢‘ç¹ï¼Œè€Œå¦ä¸€ä¸ªç‰¹å¾<script type="math/tex">x_2</script>å¾ˆå°‘å‡ºç°ã€‚æ¯”å¦‚ç¬¬ä¸€ä¸ªæ ·æœ¬ï¼Œ<script type="math/tex">x_1</script>å’Œ<script type="math/tex">x_2</script>åŒæ—¶å‡ºç°äº†ï¼Œä½†æ¥ä¸‹æ¥çš„99ä¸ªæ ·æœ¬éƒ½åªå‡ºç°äº†<script type="math/tex">x_1</script>ï¼Œç„¶åç¬¬100ä¸ªæ ·æœ¬<script type="math/tex">x_2</script>åˆå‡ºæ¥äº†ï¼Œç”±äºæ­¤æ—¶çš„å­¦ä¹ ç‡ä¸º<script type="math/tex">\frac{1}{\sqrt{100}}</script>ï¼Œè¿œå°äºç¬¬ä¸€ä¸ªæ ·çš„å½±å“äº†ã€‚ä¹Ÿå°±æ˜¯è¯´å‡å¦‚ç¬¬ä¸€ä¸ªæ ·æœ¬æ˜¯æ­£æ ·æœ¬ï¼Œç¬¬10ä¸ªæ ·æœ¬æ˜¯è´Ÿæ ·æœ¬ï¼Œæ­¤æ—¶ç”±äºå­¦ä¹ ç‡çš„ä¸åŒï¼Œæ¨¡å‹ä¼šè®¤ä¸º<script type="math/tex">x_2</script>ä¼šæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„æ­£ç›¸å…³çš„ç‰¹å¾ï¼Œå³<script type="math/tex">\omega>0</script>ã€‚ä½†äº‹å®ä¸Šï¼Œè¿™ä¸ªç‰¹å¾åªå‡ºç°äº†2æ¬¡ï¼Œè€Œä¸”ä¸€æ­£ä¸€è´Ÿï¼Œå› æ­¤è¿™åº”è¯¥æ˜¯ä¸€ä¸ªæ— ç”¨çš„ç‰¹å¾ï¼Œå³<script type="math/tex">\omega=0</script>ã€‚</p><p>åœ¨FTRLä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªç‰¹å¾çš„ç´¯ç§¯æ¢¯åº¦ï¼Œç”±äºä¸­é—´çš„99ä¸ªæ•°æ®æ²¡æœ‰è¿™ä¸ªç‰¹å¾ï¼Œå› æ­¤å…¶å¯¹åº”çš„æ¢¯åº¦ä¸º0ï¼Œå› æ­¤ç¬¬äºŒæ¬¡çš„è´Ÿæ ·æœ¬å¯¹åº”çš„å­¦ä¹ ç‡åªæ˜¯ç•¥å°äºç¬¬ä¸€ä¸ªæ­£æ ·æœ¬ã€‚</p><h3 id="3-4-å·¥ç¨‹å®ç°è®¡ç®—è¿‡ç¨‹"><a href="#3-4-å·¥ç¨‹å®ç°è®¡ç®—è¿‡ç¨‹" class="headerlink" title="3.4 å·¥ç¨‹å®ç°è®¡ç®—è¿‡ç¨‹"></a>3.4 å·¥ç¨‹å®ç°è®¡ç®—è¿‡ç¨‹</h3><h4 id="3-4-1-ä¸€äº›å®šä¹‰"><a href="#3-4-1-ä¸€äº›å®šä¹‰" class="headerlink" title="3.4.1 ä¸€äº›å®šä¹‰"></a>3.4.1 ä¸€äº›å®šä¹‰</h4><p>å¯¹äºæ¯ä¸€ä¸ªæ ·æœ¬ï¼Œæˆ‘ä»¬è®¡ç®—ä»¥ä¸‹æ•°å€¼ã€‚</p><p>ï¼ˆ1ï¼‰<script type="math/tex">p_t</script></p><p>ä½¿ç”¨å½“å‰çš„<script type="math/tex">\omega</script>ä»£å…¥sigmoidå‡½æ•°å¾—å‡ºçš„é¢„æµ‹å€¼ï¼Œå³ï¼š</p><script type="math/tex; mode=display">p=\frac{1}{1+e^{-(\sum_{i=1}^n\omega_ix_i)}}</script><p>ï¼ˆ2ï¼‰<script type="math/tex">g_i</script></p><p>æŸå¤±å‡½æ•°åœ¨æŸä¸€ä¸ªç»´åº¦ä¸Šçš„æ¢¯åº¦ï¼Œå¯¹äºé€»è¾‘å›å½’è€Œè¨€ï¼š</p><script type="math/tex; mode=display">g_i=(p-y)x_i</script><p>å…¶ä¸­yä¸ºå½“å‰æ ·æœ¬çš„å®é™…å€¼ï¼Œå³0æˆ–è€…1ã€‚</p><p>ï¼ˆ3ï¼‰<script type="math/tex">n_i</script></p><p>è¿™æ˜¯è¯¥ç»´åº¦æ¢¯åº¦<script type="math/tex">g_i^2</script>çš„ç´¯ç§¯å€¼ï¼Œå³ï¼š</p><script type="math/tex; mode=display">n_i=n_i+g_i^2</script><p>ï¼ˆ4ï¼‰<script type="math/tex">\eta_i</script></p><p>è¿™æ˜¯è¯¥ç»´åº¦çš„å­¦ä¹ ç‡ï¼Œå®ƒä¸ç´¯ç§¯æ¢¯åº¦æœ‰å…³ã€‚å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\eta_i=\frac{\alpha}{\beta+\sqrt{\sum_{s=1}^t(g_i^s)^2}}=\frac{\alpha}{\beta+\sqrt{n_i}}</script><p>å…¶ä¸­<script type="math/tex">\alpha\beta</script>ä¸ºç”¨æˆ·å®šä¹‰çš„2ä¸ªå‚æ•°ã€‚</p><p>ï¼ˆ5ï¼‰<script type="math/tex">\sigma_i</script></p><p>å…¶ä¸­<script type="math/tex">\sigma_i</script>æ˜¯ä¸€ä¸ªä¸­é—´è®¡ç®—å€¼ï¼Œæ²¡æœ‰å®é™…å«ä¹‰ï¼Œå…¶å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\sigma_i=\frac{1}{\eta_{t,i}}-\frac{1}{\eta_{t-1,i}}=\frac{1}{\alpha}(\sqrt{n_i+g_i^2}-\sqrt{n_i})</script><p>ï¼ˆ6ï¼‰<script type="math/tex">z_i</script></p><p>å…¶ä¸­<script type="math/tex">z_i</script>ä¹Ÿæ˜¯ä¸€ä¸ªè¾…åŠ©è®¡ç®—çš„ä¸­é—´å€¼ï¼Œå®ƒçš„å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">z_{t,i}=g^{(1:t)}-\sum_{s=1}^t{\sigma_{s,i}\omega_{s,i}}</script><p>äºæ˜¯<script type="math/tex">z_i</script>çš„æ›´æ–°ä¸ºï¼š</p><script type="math/tex; mode=display">z_t-z_{t-1}=g_t-\sigma_{t}\omega_{t}</script><p>å³ï¼š</p><script type="math/tex; mode=display">z_i=z_i+g_t-\sigma_i\omega_i</script><h4 id="3-4-2-FTRLç®—æ³•"><a href="#3-4-2-FTRLç®—æ³•" class="headerlink" title="3.4.2 FTRLç®—æ³•"></a>3.4.2 FTRLç®—æ³•</h4><p>ï¼ˆ1ï¼‰è®¾å®šä»¥ä¸‹4ä¸ªè¾“å…¥å‚æ•°ï¼Œè¿™äº›å‚æ•°æ ¹æ®ç»éªŒè€Œå®šï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ•°æ®ï¼š</p><script type="math/tex; mode=display">\alpha=0.1,\beta=1,\lambda_1=1,\lambda_2=1</script><p>ï¼ˆ2ï¼‰åˆå§‹åŒ–ä»¥ä¸‹æ•°å€¼ï¼š</p><script type="math/tex; mode=display">z_i=0,n_i=0</script><p>ï¼ˆ3ï¼‰å¯¹äº<strong>æ¯ä¸€ä¸ªæ ·æœ¬</strong>çš„æ‰€å¸¦çš„<strong>æ¯ä¸€ä¸ªç»´åº¦</strong>,æ›´æ–°<script type="math/tex">\omega</script><br><img src="https://lujinhong-markdown.oss-cn-beijing.aliyuncs.com/md/%E6%88%AA%E5%B1%8F2020-09-04%20%E4%B8%8A%E5%8D%8810.20.36.png" alt></p><p>ï¼ˆ4ï¼‰ä½¿ç”¨ä¸Šé¢æ›´æ–°åçš„<script type="math/tex">\omega</script>ï¼Œé¢„æµ‹<strong>è¿™ä¸ªæ ·æœ¬</strong>çš„å€¼ï¼Œå³ä»£å…¥sigmoidå‡½æ•°è®¡ç®—<script type="math/tex">p_t</script></p><script type="math/tex; mode=display">p=\frac{1}{1+e^{-(\sum_{i=1}^n\omega_ix_i)}}</script><p>ï¼ˆ5ï¼‰å¯¹äº<strong>æ¯ä¸€ä¸ªæ ·æœ¬</strong>çš„<strong>æ¯ä¸€ä¸ªç»´åº¦</strong>ï¼Œæ›´æ–°<script type="math/tex">g_i,\sigma_i,z_i,n_i</script>ï¼Œå³ä¸Šé¢æ‰€è¯´çš„ï¼š</p><script type="math/tex; mode=display">\begin{aligned}g_i&=(p-y)x_i \\\sigma_i&=\frac{1}{\alpha}(\sqrt{n_i+g_i^2}-\sqrt{n_i})\\z_i&=z_i+g_t-\sigma_i\omega_i\\n_i&=n_i+g_i^2\end{aligned}</script><h4 id="3-4-3-ç‰¹å¾çš„ç‹¬ç«‹æ€§"><a href="#3-4-3-ç‰¹å¾çš„ç‹¬ç«‹æ€§" class="headerlink" title="3.4.3 ç‰¹å¾çš„ç‹¬ç«‹æ€§"></a>3.4.3 ç‰¹å¾çš„ç‹¬ç«‹æ€§</h4><p>å¦‚æœç‰¹å¾æ˜¯éç‹¬ç«‹çš„ï¼Œä¼šå¯¼è‡´ç‰¹å¾çš„æƒé‡ä¸ç¬¦åˆé¢„æœŸã€‚<br>æ¯”å¦‚ï¼Œæœ‰2ä¸ªç‰¹å¾Aå’ŒBï¼Œç„¶ååŠ äº†ä¸€ä¸ªç»„åˆæ ‡ç­¾A&amp;Bï¼Œå‡å¦‚Aå’ŒBéƒ½æ˜¯å’Œlabeléå¸¸æ­£ç›¸å…³çš„ï¼ŒA&amp;Bæ•ˆæœæ›´å¥½ã€‚ä½†ç»“æœä¼šå‘ç°A&amp;Bè¿™ä¸ªæ ‡ç­¾çš„æƒé‡å€¼å¯èƒ½è¿˜ä¸å¦‚Aæˆ–è€…Bçš„æƒé‡é«˜ã€‚<br>è¿™æ˜¯å› ä¸ºï¼Œå¸¦äº†A&amp;Bæ ‡ç­¾çš„ï¼Œå¿…ç„¶å¸¦Aæˆ–è€…Bï¼Œå¤§æ¦‚ç‡è¢«é¢„æµ‹æˆé«˜æ¦‚ç‡å€¼ï¼Œè€ŒLRæ¢¯åº¦ä¸ºï¼š</p><script type="math/tex; mode=display">(p-y)x_i</script><p>å¯¹äºæ­£æ ·æœ¬ï¼Œ<script type="math/tex">y=1</script>ï¼Œåˆ™æ¢¯åº¦å¹¶ä¸å¤§ï¼Œæ‰€ä»¥A&amp;Bæå‡å¹¶ä¸å¤§ï¼›è€Œå¯¹äºè´Ÿæ ·æœ¬ï¼Œ<script type="math/tex">y=0</script>ï¼Œåˆ™æ¢¯åº¦éå¸¸å¤§ï¼Œå¯¼è‡´æƒ©ç½šå¾ˆå¤§ï¼Œæƒé‡é™ä½å¾ˆå¤šã€‚</p><p>æ‰€ä»¥æœ€ç»ˆç»“æœAå’ŒBçš„æƒé‡éƒ½å¯èƒ½æ¯”A&amp;Bè¦å¤§ï¼Œä½†å¯¹äºå¸¦A&amp;Bæ ‡ç­¾çš„ç”¨æˆ·æ¥è¯´ï¼Œä»–ç”±äºåŒæ—¶å¸¦3ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥é¢„æµ‹æ¦‚ç‡å€¼è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p><p>å½“ç„¶æœ€å¥½çš„åŠæ³•æ˜¯å°½é‡é¿å…è¿™ç§å…³è”æ€§å¤ªå¼ºçš„ç‰¹å¾ã€‚</p><h2 id="4ã€FTRLçš„å·¥ç¨‹åº”ç”¨"><a href="#4ã€FTRLçš„å·¥ç¨‹åº”ç”¨" class="headerlink" title="4ã€FTRLçš„å·¥ç¨‹åº”ç”¨"></a>4ã€FTRLçš„å·¥ç¨‹åº”ç”¨</h2><p>è¿™é‡Œåªåˆ—å‡ºäº†googleæä¾›çš„ä¸€äº›å»ºè®®ï¼Œæˆ‘ä»¬è‡ªèº«çš„å·¥ç¨‹åº”ç”¨å¹¶ä¸åŒ…å«åœ¨å†…ã€‚</p><p>ï¼ˆ1ï¼‰å‡å°‘æ ·æœ¬çš„æ•°é‡</p><ul><li>Poisson Inclusionï¼šä»¥pçš„æ¦‚ç‡æ¥å—æ ·æœ¬</li><li>Bloom Filter Inclusionï¼šåªæœ‰å½“ç‰¹å¾å‡ºç°æ¬¡æ•°è¾¾åˆ°ä¸€å®šæ•°é‡åï¼Œç‰¹å¾æ‰ä¼šè¢«åŠ å…¥æ¨¡å‹</li></ul><p>ï¼ˆ2ï¼‰ä½¿ç”¨æ›´å°‘çš„ä½æ¥è¿›è¡Œæµ®ç‚¹æ•°ç¼–ç <br>ä¸€èˆ¬è€Œè¨€ï¼Œç‰¹å¾å¯¹åº”çš„<script type="math/tex">\omega</script>åœ¨(-2,2)ä¹‹é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†32ï¼Œæˆ–è€…64ä½çš„æµ®ç‚¹æ•°ç¼–ç è§„åˆ™æ”¹ä¸ºq2.13ç¼–ç æ–¹å¼ï¼Œå³2ä½æ•´æ•°ï¼Œ1ä½å°æ•°ç‚¹ï¼Œ13ä½å°æ•°ã€‚</p><p>ï¼ˆ3ï¼‰å¤šä¸ªç±»ä¼¼çš„æ¨¡å‹<br>æŠŠå¤šä¸ªåŒç±»å‹/ç›¸ä¼¼çš„æ¨¡å‹æ”¾åœ¨ä¸€èµ·ä¿å­˜ï¼Œå¯ä»¥ä¸éœ€è¦è®°å½•å¤šä¸ªkeyï¼Œåªéœ€è¦è®°å½•ä¸€æ¬¡Keyï¼Œä»¥åŠå„ä¸ªæ¨¡å‹ä¸­çš„<script type="math/tex">\omega</script>ã€‚è¿™å¯ä»¥èŠ‚çœå†…å­˜ã€å¸¦å®½ã€CPUã€å­˜å‚¨ã€‚</p><p>ï¼ˆ4ï¼‰åªä¿å­˜ä¸€ä¸ªæ¨¡å‹<br> åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ›´è¿›ä¸€æ­¥ï¼Œæ‰€æœ‰æ¨¡å‹å…±ç”¨ä¸€ä»½<script type="math/tex">\omega</script>ï¼Œä»¥åŠä»¥ä¸€ä¸ªbitæ¥è®°å½•æœ¬æ¨¡å‹æœ‰å“ªäº›ç‰¹å¾ã€‚å½“æ¨¡å‹æ›´æ–°æŸä¸ª<script type="math/tex">\omega</script>åï¼Œå–å®ƒä¸ä¹‹å‰é‚£ä¸ªå€¼çš„å¹³å‡å€¼ã€‚<br>ä¸å…±ç”¨ä¸€ä¸ªæ¨¡å‹å¯¹æ¯”ï¼Œå¥½å¤„æ˜¯è®°å½•äº†è¿™ä¸ªæ¨¡å‹æœ‰å“ªäº›æœ‰æ•ˆç‰¹å¾ï¼Œå…±ç”¨æ¨¡å‹å°±æ— æ³•åŒºåˆ†äº†ã€‚</p><p>ï¼ˆ5ï¼‰è¿‘ä¼¼è®¡ç®—å­¦ä¹ ç‡<br>åªä½¿ç”¨æ­£æ ·æœ¬Pä¸è´Ÿæ ·æœ¬æ•°æ®Næ¥è¿‘ä¼¼ä¼°è®¡æ¢¯åº¦çš„å¹³æ–¹å’Œï¼Œå‰ææ˜¯å‡è®¾ç‰¹å¾æœ‰ç±»ä¼¼çš„åˆ†å¸ƒã€‚</p><script type="math/tex; mode=display">\sum{g_i^2}=\frac{PN}{P+N}</script><p>ï¼ˆ6ï¼‰å‡å°‘è´Ÿæ ·æœ¬æ•°é‡<br>å‡å°‘è´Ÿæ ·æœ¬æ•°é‡ï¼Œç„¶ååœ¨è®­ç»ƒæ—¶å¼¥è¡¥å…¶æŸå¤±ã€‚</p><h1 id="ä¸‰ã€FM-Factorization-Machine"><a href="#ä¸‰ã€FM-Factorization-Machine" class="headerlink" title="ä¸‰ã€FM(Factorization Machine)"></a>ä¸‰ã€FM(Factorization Machine)</h1><h2 id="1-1-èƒŒæ™¯"><a href="#1-1-èƒŒæ™¯" class="headerlink" title="1.1 èƒŒæ™¯"></a>1.1 èƒŒæ™¯</h2><h3 id="1-1-1-çº¿æ€§æ¨¡å‹"><a href="#1-1-1-çº¿æ€§æ¨¡å‹" class="headerlink" title="1.1.1 çº¿æ€§æ¨¡å‹"></a>1.1.1 çº¿æ€§æ¨¡å‹</h3><p>å¸¸è§çš„çº¿æ€§æ¨¡å‹ï¼Œæ¯”å¦‚çº¿æ€§å›å½’ã€é€»è¾‘å›å½’ç­‰ï¼Œå®ƒåªè€ƒè™‘äº†æ¯ä¸ªç‰¹å¾å¯¹ç»“æœçš„å•ç‹¬å½±å“ï¼Œè€Œæ²¡æœ‰è€ƒè™‘ç‰¹å¾é—´çš„ç»„åˆå¯¹ç»“æœçš„å½±å“ã€‚</p><p>å¯¹äºä¸€ä¸ªæœ‰nç»´ç‰¹å¾çš„æ¨¡å‹ï¼Œçº¿æ€§å›å½’çš„å½¢å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\begin{aligned}f(x) &= \omega_0 + \omega_1x_1+\omega_2x_2+...+\omega_nx_n \\ &=\omega_0+\sum_{i=1}^n{\omega_ix_i} \end{aligned}       \qquad (1)</script><p>å…¶ä¸­<script type="math/tex">(\omega_0,\omega_1...\omega_n)</script>ä¸ºæ¨¡å‹å‚æ•°ï¼Œ<script type="math/tex">(x_1,x_2...x_n)</script>ä¸ºç‰¹å¾ã€‚<br>ä»(1)å¼å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ¨¡å‹çš„æœ€ç»ˆè®¡ç®—ç»“æœæ˜¯å„ä¸ªç‰¹å¾çš„ç‹¬ç«‹è®¡ç®—ç»“æœï¼Œå¹¶æ²¡æœ‰è€ƒè™‘ç‰¹å¾ä¹‹é—´çš„ç›¸äº’å…³ç³»ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è®¤ä¸ºâ€œUSAâ€ä¸â€Thanksgivingâ€ï¼Œâ€Chinaâ€ä¸â€œChinese new yearâ€è¿™æ ·çš„ç»„åˆç‰¹å¾æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ï¼Œåœ¨è¿™æ ·çš„ç»„åˆç‰¹å¾ä¸‹ï¼Œä¼šå¯¹æŸäº›å•†å“è¡¨ç°å‡ºæ›´å¼ºçš„è´­ä¹°æ„æ„¿ï¼Œè€Œå•ç‹¬è€ƒè™‘å›½å®¶åŠèŠ‚æ—¥éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p><h2 id="1-1-2-äºŒé¡¹å¼æ¨¡å‹"><a href="#1-1-2-äºŒé¡¹å¼æ¨¡å‹" class="headerlink" title="1.1.2 äºŒé¡¹å¼æ¨¡å‹"></a>1.1.2 äºŒé¡¹å¼æ¨¡å‹</h2><p>æˆ‘ä»¬åœ¨ï¼ˆ1ï¼‰å¼çš„åŸºç¡€ä¸Šï¼Œè€ƒè™‘ä»»æ„2ä¸ªç‰¹å¾åˆ†é‡ä¹‹é—´çš„å…³ç³»ï¼Œå¾—å‡ºä»¥ä¸‹æ¨¡å‹ï¼š</p><script type="math/tex; mode=display">f(x)=\omega_0+\sum_{i=1}^n\omega_ix_i+\sum_{i=1}^{n-1}\sum_{j=i+1}^n\omega_{ij}x_ix_j               \qquad (2)</script><p>è¿™ä¸ªæ¨¡å‹è€ƒè™‘äº†ä»»æ„2ä¸ªç‰¹å¾åˆ†é‡ä¹‹é—´çš„å…³ç³»ï¼Œä½†å¹¶æœªè€ƒè™‘æ›´é«˜é˜¶çš„å…³ç³»ã€‚<br>æ¨¡å‹æ¶‰åŠçš„å‚æ•°æ•°é‡ä¸ºï¼š</p><script type="math/tex; mode=display">1+n+\frac{n(n-1)}{2}=\frac{1}{2}(n^2+n+2)  \qquad (3)</script><p>å¯¹äºå‚æ•°<script type="math/tex">\omega_i</script>çš„è®­ç»ƒï¼Œåªè¦è¿™ä¸ªæ ·æœ¬ä¸­å¯¹åº”çš„<script type="math/tex">x_i</script>ä¸ä¸º0ï¼Œåˆ™å¯ä»¥å®Œæˆä¸€æ¬¡è®­ç»ƒã€‚<br>ä½†å¯¹äºå‚æ•°<script type="math/tex">\omega_{ij}</script>çš„è®­ç»ƒï¼Œéœ€è¦è¿™ä¸ªæ ·æœ¬ä¸­çš„<script type="math/tex">x_i</script>å’Œ<script type="math/tex">x_j</script>åŒæ—¶ä¸ä¸º0ï¼Œæ‰å¯ä»¥å®Œæˆä¸€æ¬¡è®­ç»ƒã€‚<br>åœ¨æ•°æ®ç¨€ç–çš„å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼ŒäºŒæ¬¡é¡¹<script type="math/tex">\omega_{ij}</script>çš„è®­ç»ƒæ˜¯éå¸¸å›°éš¾çš„ã€‚å› ä¸ºæ¯ä¸ª<script type="math/tex">\omega_{ij}</script>éƒ½éœ€è¦å¤§é‡<script type="math/tex">x_i</script>å’Œ<script type="math/tex">x_j</script>éƒ½ä¸ä¸º0çš„æ ·æœ¬ã€‚ä½†åœ¨æ•°æ®ç¨€ç–æ€§æ¯”è¾ƒæ˜æ˜¾çš„æ ·æœ¬ä¸­ï¼Œ<script type="math/tex">x_i</script>å’Œ<script type="math/tex">x_j</script>éƒ½ä¸ä¸º0çš„æ ·æœ¬ä¼šéå¸¸ç¨€å°‘ï¼Œè¿™ä¼šå¯¼è‡´<script type="math/tex">\omega_{ij}</script>ä¸èƒ½å¾—åˆ°è¶³å¤Ÿçš„è®­ç»ƒï¼Œä»è€Œä¸å‡†ç¡®ã€‚</p><h2 id="1-2-FM"><a href="#1-2-FM" class="headerlink" title="1.2 FM"></a>1.2 FM</h2><h3 id="1-2-1-FMåŸºæœ¬åŸç†"><a href="#1-2-1-FMåŸºæœ¬åŸç†" class="headerlink" title="1.2.1 FMåŸºæœ¬åŸç†"></a>1.2.1 FMåŸºæœ¬åŸç†</h3><p>ä¸ºäº†è§£å†³äºŒé¡¹å¼æ¨¡å‹ä¸­ç”±äºæ•°æ®ç¨€ç–å¼•èµ·çš„è®­ç»ƒä¸è¶³çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç‰¹å¾ç»´åº¦<script type="math/tex">x_i</script>å¼•å…¥ä¸€ä¸ªè¾…åŠ©å‘é‡ï¼š</p><script type="math/tex; mode=display">V_i = (v_{i1},v_{i2},v_{i3},...,v_{ik})^T\in \mathbb R^k, i=1,2,3,...,n  \qquad(4)</script><p>å…¶ä¸­<script type="math/tex">k</script>ä¸ºè¾…åŠ©å˜é‡çš„ç»´åº¦ï¼Œä¾ç»éªŒè€Œå®šï¼Œä¸€èˆ¬è€Œè¨€ï¼Œå¯¹äºç‰¹å¾ç»´åº¦è¶³å¤Ÿå¤šçš„æ ·æœ¬ï¼Œ<script type="math/tex">k<<n</script>ã€‚<br>å°†<script type="math/tex">\omega_{ij}</script>è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\omega_{ij}=V_i^TV_j=\sum_{l=1}^kv_{il}v_{jl} \qquad(5)</script><p>ç®€å•çš„è¯´ï¼Œæˆ‘ä»¬ä¸å†ç®€å•çš„ä½¿ç”¨æ ·æœ¬è®­ç»ƒå…·ä½“çš„<script type="math/tex">\omega_{ij}</script>ï¼Œè€Œæ˜¯å…ˆè®­ç»ƒ2ä¸ªéšå˜é‡<script type="math/tex">V_i</script>ä»¥åŠ<script type="math/tex">V_j</script>ï¼Œç„¶åä½¿ç”¨å¼ï¼ˆ5ï¼‰æ±‚å‡ºæœ€ç»ˆçš„<script type="math/tex">\omega_{ij}</script>ã€‚</p><p>å…·ä½“è€Œè¨€ï¼Œ<script type="math/tex">\omega_{ij}=V_i^TV_j</script>ä¸<script type="math/tex">\omega_{hi}=V_h^TV_i</script>æœ‰ç›¸åŒçš„é¡¹<script type="math/tex">V_i</script>ï¼Œä¹Ÿå°±æ˜¯åªè¦æ ·æœ¬ä¸­çš„<script type="math/tex">x_i</script>ä¸ä¸º0ï¼Œä¸”æœ€å°‘å…·æœ‰ä¸€ä¸ªå…¶å®ƒç‰¹å¾ï¼Œåˆ™è¿™ä¸ªæ ·æœ¬åˆ™å¯ç”¨äºè®­ç»ƒ<script type="math/tex">V_i</script>ï¼Œè¿™å°±è§£å†³äº†æ•°æ®ç¨€ç–æ€§å¯¼è‡´çš„é—®é¢˜ã€‚</p><p>äºæ˜¯ï¼Œåœ¨FMä¸­ï¼Œæ¨¡å‹å¯ä»¥è¡¨è¾¾ä¸ºï¼š</p><script type="math/tex; mode=display">f(x) = \omega_0+\sum_{i=1}^n\omega_ix_i+\sum_{i=1}^{n-1}\sum_{j=i+1}^n(V_i^TV_j)x_ix_j \qquad(6)</script><h3 id="1-2-2-æ•°æ®åˆ†æ"><a href="#1-2-2-æ•°æ®åˆ†æ" class="headerlink" title="1.2.2 æ•°æ®åˆ†æ"></a>1.2.2 æ•°æ®åˆ†æ</h3><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è¦æ±‚å¾—ä»¥ä¸‹äº¤äº’çŸ©é˜µWï¼š</p><script type="math/tex; mode=display">W=        \begin{pmatrix}        \omega_{11} & \omega_{12}& ... &\omega_{1n} \\        \omega_{21} & \omega_{22}& ... &\omega_{2n} \\        \vdots &\vdots &\ddots &\vdots\\       \omega_{n1} & \omega_{n2}& ... &\omega_{nn} \\        \end{pmatrix}_{n\times n} \qquad(7)</script><p>ç”±äºç›´æ¥æ±‚è§£Wä¸æ–¹ä¾¿ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥éšå˜é‡Vï¼š</p><script type="math/tex; mode=display">V=        \begin{pmatrix}        v_{11} & v_{12}& ... &v_{1k} \\        v_{21} & v_{22}& ... &v_{2k} \\        \vdots &\vdots &\ddots &\vdots\\       v_{n1} & v_{n2}& ... &v_{nk} \\        \end{pmatrix}_{n\times k}=\begin{pmatrix}V_1^T\\V_2^T\\\cdots \\V_n^T\\\end{pmatrix} \qquad(8)</script><p>ä»¤</p><script type="math/tex; mode=display">VV^T = W \qquad(9)</script><p>å¦‚æœæˆ‘ä»¬å…ˆå¾—åˆ°Vï¼Œåˆ™å¯ä»¥å¾—åˆ°Wäº†ã€‚<br>ç°åœ¨åªå‰©ä¸‹ä¸€ä¸ªé—®é¢˜äº†ï¼Œæ˜¯å¦ä¸€ä¸ªå­˜åœ¨Vï¼Œä½¿å¾—ä¸Šè¿°å¼ï¼ˆ9ï¼‰æˆç«‹ã€‚<br>ç†è®ºç ”ç©¶è¡¨æ˜ï¼šå½“kè¶³å¤Ÿå¤§æ—¶ï¼Œå¯¹äºä»»æ„å¯¹ç§°æ­£å®šçš„å®çŸ©é˜µ<script type="math/tex">W\in \mathbb R^{n \times  n}</script>ï¼Œå‡å­˜åœ¨å®çŸ©é˜µ<script type="math/tex">V\in \mathbb R^{n \times  k}</script>ï¼Œä½¿å¾—<script type="math/tex">W=VV^T</script>ã€‚</p><p>ç†è®ºåˆ†æä¸­è¦æ±‚å‚æ•°kè¶³å¤Ÿçš„å¤§ï¼Œä½†åœ¨é«˜åº¦ç¨€ç–æ•°æ®çš„åœºæ™¯ä¸­ï¼Œç”±äº æ²¡æœ‰è¶³å¤Ÿçš„æ ·æœ¬ï¼Œå› æ­¤ké€šå¸¸å–è¾ƒå°çš„å€¼ã€‚äº‹å®ä¸Šï¼Œå¯¹å‚æ•°<script type="math/tex">k</script>çš„é™åˆ¶ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><h3 id="1-2-3å‚æ•°ä¸ªæ•°"><a href="#1-2-3å‚æ•°ä¸ªæ•°" class="headerlink" title="1.2.3å‚æ•°ä¸ªæ•°"></a>1.2.3å‚æ•°ä¸ªæ•°</h3><p>å‡è®¾æ ·æœ¬ä¸­æœ‰nä¸ªç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾å¯¹åº”çš„éšå˜é‡ç»´åº¦ä¸ºkï¼Œåˆ™å‚æ•°ä¸ªæ•°ä¸º<script type="math/tex">1+n+nk</script>ã€‚<br>æ­£å¦‚ä¸Šé¢æ‰€è¨€ï¼Œå¯¹äºç‰¹å¾ç»´åº¦è¶³å¤Ÿå¤šçš„æ ·æœ¬ï¼Œ<script type="math/tex">k<<n</script>ã€‚</p><h3 id="1-2-4-è®¡ç®—æ—¶é—´å¤æ‚åº¦"><a href="#1-2-4-è®¡ç®—æ—¶é—´å¤æ‚åº¦" class="headerlink" title="1.2.4 è®¡ç®—æ—¶é—´å¤æ‚åº¦"></a>1.2.4 è®¡ç®—æ—¶é—´å¤æ‚åº¦</h3><p>ä¸‹é¢æˆ‘ä»¬åˆ†æä¸€ä¸‹å·²ç»çŸ¥é“æ‰€æœ‰å‚æ•°ï¼Œä»£å…¥å¼ï¼ˆ6ï¼‰è®¡ç®—é¢„æµ‹å€¼æ—¶çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»å¼ï¼ˆ6ï¼‰ä¸­ä¸€çœ‹ï¼Œ</p><script type="math/tex; mode=display">f(x) = \omega_0+\sum_{i=1}^n\omega_ix_i+\sum_{i=1}^{n-1}\sum_{j=i+1}^n(V_i^TV_j)x_ix_j \qquad(6)</script><p>å¯ä»¥çœ‹å‡ºæ—¶é—´å¤æ‚åº¦æ˜¯<script type="math/tex">O(kn^2)</script>ã€‚ä½†æˆ‘ä»¬å¯¹ä¸Šè¿°å¼å­çš„æœ€åä¸€é¡¹ä½œå˜æ¢åï¼Œå¯ä»¥å¾—å‡ºä¸€ä¸ª<script type="math/tex">O(kn)</script>çš„æ—¶é—´å¤æ‚åº¦è¡¨è¾¾å¼ã€‚</p><script type="math/tex; mode=display">\begin{aligned}\sum_{i=1}^{n-1}\sum_{j=i+1}^n(V_i^TV_j)x_ix_j&= \frac{1}{2}\left(\sum_{i=1}^n\sum_{j=1}^n(V_i^TV_j)x_ix_j-\sum_{i=1}^n(V_i^TV_i)x_ix_i\right) \\&=\frac{1}{2}\left(\sum_{i=1}^n\sum_{j=1}^n\sum_{l=1}^kv_{il}v_{jl}x_ix_j-\sum_{i=1}^n\sum_{l=1}^k v_{il}^2x_i^2\right)\\&=\frac{1}{2}\sum_{l=1}^k\left(\sum_{i=1}^n(v_{il}x_i)\sum_{j=1}^n(v_{jl}x_j)-\sum_{i=1}^nv_{il}^2x_i^2\right)\\&=\frac{1}{2}\sum_{l=1}^k\left(\left(\sum_{i=1}^n(v_{il}x_i)\right)^2-\sum_{i=1}^nv_{il}^2x_i^2\right)\end{aligned} \qquad(10)</script><p>ä¸Šè¿°å¼å­ä¸­çš„<script type="math/tex">\sum_{i=1}^n(v_{il}x_i)</script>åªéœ€è¦è®¡ç®—ä¸€æ¬¡å°±å¥½ï¼Œå› æ­¤ï¼Œå¯ä»¥çœ‹å‡ºä¸Šè¿°æ¨¡å‹çš„å¤æ‚åº¦ä¸º<script type="math/tex">O(kn)</script>ã€‚<br>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸è¦ç›´æ¥ä½¿ç”¨å¼ï¼ˆ6ï¼‰æ¥è®¡ç®—é¢„æµ‹ç»“æœï¼Œè€Œåº”è¯¥ä½¿ç”¨å¼ï¼ˆ10ï¼‰ï¼Œè¿™æ ·çš„è®¡ç®—æ•ˆç‡æ›´é«˜ã€‚</p><h3 id="1-2-5-æ¢¯åº¦"><a href="#1-2-5-æ¢¯åº¦" class="headerlink" title="1.2.5 æ¢¯åº¦"></a>1.2.5 æ¢¯åº¦</h3><p>FMæœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼šmultilinearityï¼šè‹¥è®°<script type="math/tex">\Theta=(\omega_0,\omega_1,\omega_2,...,\omega_n,v_{11},v_{12},...,v_{nk})</script>è¡¨ç¤ºFMæ¨¡å‹çš„æ‰€æœ‰å‚æ•°ï¼Œåˆ™å¯¹äºä»»æ„çš„<script type="math/tex">\theta \in \Theta</script>ï¼Œå­˜åœ¨ä¸<script type="math/tex">\theta</script>æ— å…³çš„<script type="math/tex">g(x)</script>ä¸<script type="math/tex">h(x)</script>ï¼Œä½¿å¾—å¼ï¼ˆ6ï¼‰å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">f(x) = g(x) + \theta h(x) \qquad(11)</script><p>ä»å¼ï¼ˆ11ï¼‰ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæˆ‘ä»¬å¾—åˆ°äº†<script type="math/tex">g(x)</script>ä¸<script type="math/tex">h(x)</script>ï¼Œåˆ™å¯¹äºå‚æ•°<script type="math/tex">\theta</script>çš„æ¢¯åº¦ä¸º<script type="math/tex">h(x)</script>ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†æƒ…å†µè®¨è®ºã€‚</p><ul><li><p>å½“ <script type="math/tex">\theta=\omega_0</script>æ—¶ï¼Œå¼ï¼ˆ6ï¼‰å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">f(x) = \color{blue}{\sum_{i=1}^n\omega_ix_i+\sum_{i=1}^{n-1}\sum_{j=i+1}^n(V_i^TV_j)x_ix_j} +\omega_0 \times \color{red}{1} \qquad(12)</script><p>ä¸Šè¿°ä¸­çš„è“è‰²è¡¨ç¤º<script type="math/tex">g(x)</script>ï¼Œçº¢è‰²è¡¨ç¤º<script type="math/tex">h(x)</script>ã€‚ä¸‹åŒã€‚<br>ä»ä¸Šè¿°å¼å­å¯ä»¥çœ‹å‡ºæ­¤æ—¶çš„æ¢¯åº¦ä¸º1.</p></li><li><p>å½“<script type="math/tex">\theta=\omega_l, l \in (1,2,...,n)</script>æ—¶ï¼Œ</p><script type="math/tex; mode=display">f(x) = \color{blue}{\omega_0+\sum_{i=1,\ i \ne l}^n\omega_ix_i+\sum_{i=1}^{n-1}\sum_{j=i+1}^n(V_i^TV_j)x_ix_j}+\omega_l \times \color{red}{x_l} \qquad(13)</script><p>æ­¤æ—¶æ¢¯åº¦ä¸º<script type="math/tex">x_l</script>ã€‚</p></li><li><p>å½“<script type="math/tex">\theta=v_{lm}</script>æ—¶</p><script type="math/tex; mode=display">f(x) =\color{blue}{ \omega_0+\sum_{i=1}^n\omega_ix_i+\sum_{i=1}^{n-1}\sum_{j=i+1}^n(\sum_{s=1 , is \ne lm ,js \ne lm}^k v_{is}v_{js})x_ix_j }+v_{lm}\times \color{red}{x_l\sum_{i=1,i \ne l }^n v_{im}x_i} \qquad(14)</script><p>æ­¤æ—¶æ¢¯åº¦ä¸º<script type="math/tex">x_l\sum_{i \ne l } v_{im}x_i</script>ã€‚</p></li></ul><p>ç»¼åˆä¸Šè¿°ç»“è®ºï¼Œ<script type="math/tex">f(x)</script>å…³äº<script type="math/tex">\theta</script>çš„åå¯¼æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">\frac{\partial f(x)}{\partial \theta}  =\begin{cases}1,  & \theta=\omega_0 \\x_l, & \theta=\omega_l, l \in (1,2,...,n) \\x_l\sum_{i=1,i \ne l }^n v_{im}x_i & \theta=v_{lm}\end{cases}   \qquad(15)</script><h3 id="1-2-6-è®­ç»ƒæ—¶é—´å¤æ‚åº¦"><a href="#1-2-6-è®­ç»ƒæ—¶é—´å¤æ‚åº¦" class="headerlink" title="1.2.6 è®­ç»ƒæ—¶é—´å¤æ‚åº¦"></a>1.2.6 è®­ç»ƒæ—¶é—´å¤æ‚åº¦</h3><p>ç”±ä¸Šè¿°å¼ï¼ˆ15ï¼‰å¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">x_l\sum_{i=1,i \ne l }^n v_{im}x_i = x_l\sum_{i=1}^n v_{im}x_i-v_{lm}x_l^2 \qquad(16)</script><p>å¯¹äºä¸Šå¼ä¸­çš„å‰åŠéƒ¨åˆ†<script type="math/tex">\sum_{i=1}^n v_{im}x_i</script>ï¼Œå¯¹äºæ¯ä¸ªæ ·æœ¬åªéœ€è¦è®¡ç®—ä¸€æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º<script type="math/tex">O(n)</script>ï¼Œå¯¹äºkä¸ªéšå˜é‡çš„ç»´åº¦åˆ†åˆ«è®¡ç®—ä¸€æ¬¡ï¼Œåˆ™å¤æ‚åº¦ä¸º<script type="math/tex">O(kn)</script>ã€‚å…¶å®ƒé¡¹çš„æ—¶é—´å¤æ‚åº¦éƒ½å°äºè¿™ä¸€é¡¹ï¼Œå› æ­¤ï¼Œæ¨¡å‹è®­ç»ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º<script type="math/tex">O(kn)</script>ã€‚</p><p>è¯¦ç»†ä¸€ç‚¹è§£é‡Šï¼š<br>ï¼ˆ1ï¼‰æˆ‘ä»¬é¦–å…ˆè®¡ç®—<script type="math/tex">\sum_{i=1}^n v_{im}x_i</script>ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºnï¼Œè¿™ä¸ªå€¼å¯¹äºæ‰€æœ‰ç‰¹å¾å¯¹åº”çš„éšå˜é‡çš„æŸä¸€ä¸ªç»´åº¦æ˜¯ç›¸åŒçš„ã€‚æˆ‘ä»¬è®¾è¿™å€¼ä¸ºCã€‚</p><p>ï¼ˆ2ï¼‰è®¡ç®—æ¯ä¸€ä¸ªç‰¹å¾å¯¹åº”çš„<script type="math/tex">x_l\sum_{i=1}^n v_{im}x_i-v_{lm}x_l^2 =Cx_l-v_{lm}x_l^2</script>ï¼Œç”±äºæ€»å…±æœ‰nä¸ªç‰¹å¾ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºnï¼Œè‡³æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦ä¸ºn+nã€‚</p><p>ï¼ˆ3ï¼‰ä¸Šè¿°åªæ˜¯è®¡ç®—äº†éšå˜é‡çš„å…¶ä¸­ä¸€ä¸ªç»´åº¦ï¼Œæˆ‘ä»¬æ€»å…±æœ‰kä¸ªç»´åº¦ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º<script type="math/tex">k(n+n)=O(kn)</script>.</p><h1 id="å››ã€FFM-Field-Factorization-Machine"><a href="#å››ã€FFM-Field-Factorization-Machine" class="headerlink" title="å››ã€FFM(Field Factorization Machine)"></a>å››ã€FFM(Field Factorization Machine)</h1><h2 id="2-1-èƒŒæ™¯åŠåŸºæœ¬åŸç†"><a href="#2-1-èƒŒæ™¯åŠåŸºæœ¬åŸç†" class="headerlink" title="2.1 èƒŒæ™¯åŠåŸºæœ¬åŸç†"></a>2.1 èƒŒæ™¯åŠåŸºæœ¬åŸç†</h2><p>åœ¨FMæ¨¡å‹ä¸­ï¼Œæ¯ä¸€ä¸ªç‰¹å¾ä¼šå¯¹åº”ä¸€ä¸ªéšå˜é‡ï¼Œä½†åœ¨FFMæ¨¡å‹ä¸­ï¼Œè®¤ä¸ºåº”è¯¥å°†ç‰¹å¾åˆ†ä¸ºå¤šä¸ªfieldï¼Œæ¯ä¸ªç‰¹å¾å¯¹åº”æ¯ä¸ªfieldåˆ†åˆ«æœ‰ä¸€ä¸ªéšå˜é‡ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çš„æ ·æœ¬æœ‰3ç§ç±»å‹çš„å­—æ®µï¼špublisher, advertiser, genderï¼Œåˆ†åˆ«å¯ä»¥ä»£è¡¨åª’ä½“ï¼Œå¹¿å‘Šä¸»æˆ–è€…æ˜¯å…·ä½“çš„å•†å“ï¼Œæ€§åˆ«ã€‚å…¶ä¸­publisheræœ‰5ç§æ•°æ®ï¼Œadvertiseræœ‰10ç§æ•°æ®ï¼Œgenderæœ‰ç”·å¥³2ç§ï¼Œç»è¿‡one-hotç¼–ç ä»¥åï¼Œæ¯ä¸ªæ ·æœ¬æœ‰17ä¸ªç‰¹å¾ï¼Œå…¶ä¸­åªæœ‰3ä¸ªç‰¹å¾éç©ºã€‚</p><p>å¦‚æœä½¿ç”¨FMæ¨¡å‹ï¼Œåˆ™17ä¸ªç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾å¯¹åº”ä¸€ä¸ªéšå˜é‡ã€‚<br>å¦‚æœä½¿ç”¨FFMæ¨¡å‹ï¼Œåˆ™17ä¸ªç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾å¯¹åº”3ä¸ªéšå˜é‡ï¼Œå³æ¯ä¸ªç±»å‹å¯¹åº”ä¸€ä¸ªéšå˜é‡ï¼Œå…·ä½“è€Œè¨€ï¼Œå°±æ˜¯å¯¹åº”publisher, advertiser, genderä¸‰ä¸ªfieldå„æœ‰ä¸€ä¸ªéšå˜é‡ã€‚</p><h2 id="2-2æ¨¡å‹ä¸æœ€ä¼˜åŒ–é—®é¢˜"><a href="#2-2æ¨¡å‹ä¸æœ€ä¼˜åŒ–é—®é¢˜" class="headerlink" title="2.2æ¨¡å‹ä¸æœ€ä¼˜åŒ–é—®é¢˜"></a>2.2æ¨¡å‹ä¸æœ€ä¼˜åŒ–é—®é¢˜</h2><h3 id="2-2-1-æ¨¡å‹"><a href="#2-2-1-æ¨¡å‹" class="headerlink" title="2.2.1 æ¨¡å‹"></a>2.2.1 æ¨¡å‹</h3><p>æ ¹æ®ä¸Šé¢çš„æè¿°ï¼Œå¯ä»¥å¾—å‡ºFFMçš„æ¨¡å‹ä¸ºï¼š</p><script type="math/tex; mode=display">f(x) = \omega_0+\sum_{i=1}^n\omega_ix_i+\sum_{j1=1}^{n-1}\sum_{j2=j1+1}^n(V_{j1,f2}^TV_{j2,f1})x_{j1}x_{j2} \qquad(17)</script><p>å…¶ä¸­<script type="math/tex">j1,j2</script>è¡¨ç¤ºç‰¹å¾çš„ç´¢å¼•ã€‚æˆ‘ä»¬å‡è®¾<script type="math/tex">j1</script>ç‰¹å¾å±äº<script type="math/tex">f1</script>è¿™ä¸ªfieldï¼Œ<script type="math/tex">j2</script>ç‰¹å¾å±äº<script type="math/tex">f2</script>è¿™ä¸ªfieldï¼Œåˆ™<script type="math/tex">V_{j1,f2}</script>è¡¨ç¤º<script type="math/tex">j1</script>è¿™ä¸ªç‰¹å¾å¯¹åº”<script type="math/tex">f2</script>(<script type="math/tex">j2</script>æ‰€å±çš„field)çš„éšå˜é‡ï¼ŒåŒæ—¶<script type="math/tex">V_{j2,f1}</script>è¡¨ç¤º<script type="math/tex">j2</script>è¿™ä¸ªç‰¹å¾å¯¹åº”<script type="math/tex">f1</script>(<script type="math/tex">j1</script>æ‰€å±çš„field)çš„éšå˜é‡ã€‚</p><p>äº‹å®ä¸Šï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒFFMæ¨¡å‹åªä¿ç•™äº†äºŒæ¬¡é¡¹ï¼Œå³ï¼š</p><script type="math/tex; mode=display">\phi(V,x) =  \sum_{j1=1}^{n-1}\sum_{j2=j1+1}^n(V_{j1,f2}^TV_{j2,f1})x_{j1}x_{j2} \qquad(18)</script><h3 id="2-2-2-æœ€ä¼˜åŒ–é—®é¢˜"><a href="#2-2-2-æœ€ä¼˜åŒ–é—®é¢˜" class="headerlink" title="2.2.2 æœ€ä¼˜åŒ–é—®é¢˜"></a>2.2.2 æœ€ä¼˜åŒ–é—®é¢˜</h3><p>æ ¹æ®é€»è¾‘å›å½’çš„æŸå¤±å‡½æ•°åŠåˆ†æï¼Œå¯ä»¥å¾—å‡ºFFMçš„æœ€ä¼˜åŒ–é—®é¢˜ä¸ºï¼š</p><script type="math/tex; mode=display">\min \frac{\lambda}{2}||V||_2^2+\sum_{i=1}^{m}\log(1+exp(-y_i\phi(V,x))) \qquad(19)</script><p>ä¸Šé¢åŠ å·çš„å‰é¢éƒ¨åˆ†ä½¿ç”¨äº†L2èŒƒå¼ï¼Œåé¢éƒ¨åˆ†æ˜¯é€»è¾‘å›å½’çš„æŸå¤±å‡½æ•°ã€‚mè¡¨ç¤ºæ ·æœ¬çš„æ•°é‡ï¼Œ<script type="math/tex">y_i</script>è¡¨ç¤ºè®­ç»ƒæ ·æœ¬çš„çœŸå®å€¼ï¼ˆå¦‚æ˜¯å¦ç‚¹å‡»çš„-1/1ï¼‰ï¼Œ<script type="math/tex">\phi(V,x)</script>è¡¨ç¤ºä½¿ç”¨å½“å‰çš„Vä»£å…¥å¼ï¼ˆ18ï¼‰è®¡ç®—å¾—åˆ°çš„å€¼ã€‚</p><p><strong>æ³¨æ„ï¼Œä»¥ä¸Šçš„æŸå¤±å‡½æ•°é€‚ç”¨äºæ ·æœ¬åˆ†å¸ƒä¸º{-1,1}çš„æƒ…å†µã€‚</strong></p><h3 id="2-2-3-è‡ªé€‚åº”å­¦ä¹ ç‡"><a href="#2-2-3-è‡ªé€‚åº”å­¦ä¹ ç‡" class="headerlink" title="2.2.3 è‡ªé€‚åº”å­¦ä¹ ç‡"></a>2.2.3 è‡ªé€‚åº”å­¦ä¹ ç‡</h3><p>ä¸FTRLä¸€æ ·ï¼ŒFFMä¹Ÿä½¿ç”¨äº†ç´¯ç§¯æ¢¯åº¦ä½œä¸ºå­¦ä¹ ç‡çš„ä¸€éƒ¨åˆ†ï¼Œå³ï¼š</p><script type="math/tex; mode=display">V_{j1,f2} = V_{j1,f2} - \frac{\eta}{\sqrt{1+\sum_t(g_{v_{j1,f2}}^t)^2}}g_{v_{j1,f2}} \qquad(20)</script><p>å…¶ä¸­<script type="math/tex">g_{v_{j1,f2}}</script>è¡¨ç¤ºå¯¹äº<script type="math/tex">V_{j1,f2}</script>è¿™ä¸ªå˜é‡çš„æ¢¯åº¦å‘é‡ï¼Œå› ä¸º<script type="math/tex">V_{j1,f2}</script>æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå› æ­¤<script type="math/tex">g_{v_{j1,f2}}</script>ä¹Ÿæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå°ºå¯¸ä¸ºéšå˜é‡çš„ç»´åº¦å¤§å°ï¼Œå³kã€‚<br>è€Œ<script type="math/tex">\sum_t(g_{v_{j1,f2}}^t)^2</script>è¡¨ç¤ºä»ç¬¬ä¸€ä¸ªæ ·æœ¬åˆ°å½“å‰æ ·æœ¬ä¸€ç›´ä»¥æ¥çš„ç´¯ç§¯æ¢¯åº¦å¹³æ–¹å’Œã€‚</p><h3 id="2-2-4-FFMç®—æ³•çš„æœ€ç»ˆå½¢å¼"><a href="#2-2-4-FFMç®—æ³•çš„æœ€ç»ˆå½¢å¼" class="headerlink" title="2.2.4 FFMç®—æ³•çš„æœ€ç»ˆå½¢å¼"></a>2.2.4 FFMç®—æ³•çš„æœ€ç»ˆå½¢å¼</h3><script type="math/tex; mode=display">\begin{aligned}(V_{j1,f2})_d &=(V_{j1,f2})_{d-1}-\frac{\eta}{\sqrt{(G_{j1,f2})_d}} \cdot (g_{j1,f2})_d \\(V_{j2,f1})_d &=(V_{j2,f1})_{d-1}-\frac{\eta}{\sqrt{(G_{j2,f1})_d}} \cdot (g_{j2,f1})_d\end{aligned}</script><p>å…¶ä¸­Gä¸ºç´¯ç§¯æ¢¯åº¦å¹³æ–¹ï¼š</p><script type="math/tex; mode=display">(G_{j1,f2})_d=(G_{j1,f2})_{d-1}+(g_{j1,f2})_d^2(G_{j2,f1})_d=(G_{j2,f1})_{d-1}+(g_{j2,f1})_d^2</script><p>gä¸ºæ¢¯åº¦ï¼Œæ¯”å¦‚<script type="math/tex">g_{j1,f2}</script>ä¸º<script type="math/tex">j1</script>è¿™ä¸ªç‰¹å¾å¯¹åº”<script type="math/tex">f2</script>è¿™ä¸ªfieldçš„æ¢¯åº¦å‘é‡ï¼š</p><script type="math/tex; mode=display">g_{ji,f2}=\lambda \cdot V_{ji,f2} + \kappa \cdot V_{j2,f1}g_{j2,f1}=\lambda \cdot V_{j2,f1} + \kappa \cdot V_{j1,f2}</script><p>å…¶ä¸­<script type="math/tex">\kappa</script>ä¸ºï¼š</p><script type="math/tex; mode=display">\kappa=\frac{\partial\log(1+exp(-y_i\phi(V,x))) }{\partial \phi(V,x) }=\frac{-y}{1+\exp(y\phi(V,x) )}</script><h2 id="2-3å®Œæ•´ç®—æ³•æµç¨‹"><a href="#2-3å®Œæ•´ç®—æ³•æµç¨‹" class="headerlink" title="2.3å®Œæ•´ç®—æ³•æµç¨‹"></a>2.3å®Œæ•´ç®—æ³•æµç¨‹</h2><p>ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆSGDï¼‰è®­ç»ƒFFMæ¨¡å‹çš„å®Œæ•´è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><h3 id="2-3-1-è®¡ç®—æ¢¯åº¦"><a href="#2-3-1-è®¡ç®—æ¢¯åº¦" class="headerlink" title="2.3.1 è®¡ç®—æ¢¯åº¦"></a>2.3.1 è®¡ç®—æ¢¯åº¦</h3><p>å¯¹äºæ¯ä¸€ä¸ªæ ·æœ¬çš„æ¯ä¸€å¯¹ç‰¹å¾ç»„åˆéƒ½è¦è®¡ç®—ä»¥ä¸‹æ¢¯åº¦å‘é‡ã€‚</p><script type="math/tex; mode=display">\begin{aligned}g_{ji,f2}=\lambda \cdot V_{ji,f2} + \kappa \cdot V_{j2,f1} \\g_{j2,f1}=\lambda \cdot V_{j2,f1} + \kappa \cdot V_{j1,f2}\end{aligned}\qquad(21)</script><p>å…¶ä¸­<script type="math/tex">\kappa</script>ä¸ºå¼(19)ååŠéƒ¨åˆ†å¯¹åº”çš„æ¢¯åº¦ï¼Œå³ï¼š</p><script type="math/tex; mode=display">\kappa=\frac{\partial\log(1+exp(-y_i\phi(V,x))) }{\partial \phi(V,x) }=\frac{-y}{1+\exp(y\phi(V,x) )} \qquad(22)</script><p>å†é‡ç”³ä¸€æ¬¡ï¼Œ<script type="math/tex">g</script>ä¸<script type="math/tex">V</script>éƒ½æ˜¯kç»´çš„å‘é‡ï¼Œåœ¨pythonä¸­å¯ä»¥ä½œä¸ºä¸€ä¸ªå‘é‡è®¡ç®—ï¼Œåœ¨java/c++ç­‰éœ€è¦é€šè¿‡ä¸€ä¸ªå¾ªç¯è¿›è¡Œè®¡ç®—ã€‚</p><p>è¯¦ç»†æ¨å¯¼ï¼ˆ21ï¼‰å¼å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰åœ¨SGDä¸­ï¼Œå¼ï¼ˆ19ï¼‰å¯ä»¥è½¬åŒ–ä¸ºï¼š</p><script type="math/tex; mode=display">\min \frac{\lambda}{2}||V||_2^2+\log(1+exp(-y_i\phi(V,x))) \qquad(23)</script><p>ï¼ˆ2ï¼‰ä¸Šå¼å¯¹<script type="math/tex">V_{j1,f2}</script>æ±‚åå¯¼ï¼Œå¯å¾—ï¼š</p><script type="math/tex; mode=display">\begin{aligned}&\frac{\partial \frac{\lambda}{2}||V||_2^2+\log(1+exp(-y_i\phi(V,x)))}{\partial V_{j1,f2}} \\&=\lambda \cdot V_{j1,f2} + \frac{\partial \log(1+exp(-y_i\phi(V,x)))}{\partial V_{j1,f2}}\\&=\lambda \cdot V_{j1,f2} + \frac{\partial \log(1+exp(-y_i\phi(V,x)))}{\partial \phi} \cdot  \frac{\partial \phi}{V_{j1,f2}}\\&=\lambda \cdot V_{j1,f2} + \frac{-y}{1+\exp(y\phi(V,x) )}  \cdot V_{j2,f1}\end{aligned}\qquad(24)</script><h3 id="2-3-2-è®¡ç®—ç´¯ç§¯æ¢¯åº¦å¹³æ–¹å’Œ"><a href="#2-3-2-è®¡ç®—ç´¯ç§¯æ¢¯åº¦å¹³æ–¹å’Œ" class="headerlink" title="2.3.2 è®¡ç®—ç´¯ç§¯æ¢¯åº¦å¹³æ–¹å’Œ"></a>2.3.2 è®¡ç®—ç´¯ç§¯æ¢¯åº¦å¹³æ–¹å’Œ</h3><p>è®¡ç®—ä»ç¬¬ä¸€ä¸ªæ ·æœ¬ï¼Œåˆ°å½“å‰æ ·æœ¬ï¼ˆç¬¬dä¸ªï¼‰ä»¥æ¥çš„ç´¯ç§¯æ¢¯åº¦å¹³æ–¹å’Œï¼š</p><script type="math/tex; mode=display">\begin{aligned}(G_{j1,f2})_d=(G_{j1,f2})_{d-1}+(g_{j1,f2})_d^2 \\(G_{j2,f1})_d=(G_{j2,f1})_{d-1}+(g_{j2,f1})_d^2\end{aligned}\qquad(26)</script><h3 id="2-3-3-æ›´æ–°éšå˜é‡"><a href="#2-3-3-æ›´æ–°éšå˜é‡" class="headerlink" title="2.3.3 æ›´æ–°éšå˜é‡"></a>2.3.3 æ›´æ–°éšå˜é‡</h3><script type="math/tex; mode=display">\begin{aligned}(V_{j1,f2})_d=(V_{j1,f2})_{d-1}-\frac{\eta}{\sqrt{(G_{j1,f2})_d}} \cdot (g_{j1,f2})_d\\(V_{j2,f1})_d=(V_{j2,f1})_{d-1}-\frac{\eta}{\sqrt{(G_{j2,f1})_d}} \cdot (g_{j2,f1})_d\end{aligned}\qquad(26)</script><h3 id="2-3-4-å…³äºåˆå§‹å‚æ•°çš„è®¾å®š"><a href="#2-3-4-å…³äºåˆå§‹å‚æ•°çš„è®¾å®š" class="headerlink" title="2.3.4 å…³äºåˆå§‹å‚æ•°çš„è®¾å®š"></a>2.3.4 å…³äºåˆå§‹å‚æ•°çš„è®¾å®š</h3><p>æ–‡çŒ®1ä¸­å¦‚æ­¤å»ºè®®ï¼š<br>ï¼ˆ1ï¼‰<script type="math/tex">\eta</script>ï¼šæ²¡æœ‰å…·ä½“çš„å»ºè®®ï¼Œç”¨æˆ·æ ¹æ®ç»éªŒæŒ‡å®šå³å¯ï¼Œä¸€èˆ¬ä¼šå–0.1ï¼Œ0.01ï¼Œ0.001ã€‚</p><p>ï¼ˆ2ï¼‰<script type="math/tex">V</script>ï¼šåœ¨åŒºé—´<script type="math/tex">[0,1/\sqrt{k}]</script>é—´çš„éšæœºå€¼ï¼Œå‡åŒ€åˆ†å¸ƒå³å¯ã€‚</p><p>ï¼ˆ3ï¼‰<script type="math/tex">G</script>ï¼šè®¾ç½®ä¸º1ï¼Œä»¥é¿å…<script type="math/tex">(G_{j1,f2})_d^{-\frac{1}{2}}</script>å‡ºç°å¾ˆå¤§çš„å€¼ã€‚</p><h2 id="2-4-æ—¶é—´å¤æ‚åº¦"><a href="#2-4-æ—¶é—´å¤æ‚åº¦" class="headerlink" title="2.4 æ—¶é—´å¤æ‚åº¦"></a>2.4 æ—¶é—´å¤æ‚åº¦</h2><h3 id="2-4-1-è®¡ç®—æ—¶é—´å¤æ‚åº¦"><a href="#2-4-1-è®¡ç®—æ—¶é—´å¤æ‚åº¦" class="headerlink" title="2.4.1 è®¡ç®—æ—¶é—´å¤æ‚åº¦"></a>2.4.1 è®¡ç®—æ—¶é—´å¤æ‚åº¦</h3><p>ç”±äºå¼(18)æ— æ³•åšç±»ä¼¼äºå¼ï¼ˆ10ï¼‰çš„ç®€åŒ–ï¼Œå› æ­¤FFMçš„è®¡ç®—æ—¶é—´å¤æ‚åº¦ä¸º<script type="math/tex">O(kn^2)</script>ã€‚</p><h3 id="2-4-2-è®­ç»ƒæ—¶é—´å¤æ‚åº¦"><a href="#2-4-2-è®­ç»ƒæ—¶é—´å¤æ‚åº¦" class="headerlink" title="2.4.2 è®­ç»ƒæ—¶é—´å¤æ‚åº¦"></a>2.4.2 è®­ç»ƒæ—¶é—´å¤æ‚åº¦</h3><p>ç”±äºè®­ç»ƒæ—¶ï¼Œéœ€è¦å…ˆæ ¹æ®å¼ï¼ˆ18ï¼‰è®¡ç®—<script type="math/tex">\phi</script>ï¼Œå¤æ‚åº¦ä¸º<script type="math/tex">O(kn^2)</script>ï¼Œè®¡ç®—å¾—åˆ°<script type="math/tex">\phi</script>åï¼Œè¿˜éœ€è¦æŒ‰ç…§å¼ï¼ˆ22ï¼‰è®¡ç®—1æ¬¡ï¼ŒæŒ‰ç…§å¼ï¼ˆ21ï¼‰è®¡ç®—2kæ¬¡ï¼ŒæŒ‰ç…§å¼ï¼ˆ23ï¼‰è®¡ç®—2kæ¬¡ï¼ŒæŒ‰ç…§å¼ï¼ˆ24ï¼‰è®¡ç®—2kæ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ€»çš„è®­ç»ƒæ—¶é—´å¤æ‚åº¦ä¸ºï¼š</p><script type="math/tex; mode=display">O(kn^2) + 1 + 2k + 2k + 2k = O(kn^2)</script><p>å› æ­¤ï¼Œè®­ç»ƒæ—¶é—´å¤æ‚åº¦ä¸º<script type="math/tex">O(kn^2)</script>ã€‚</p><h2 id="2-5-è®¡ç®—é€Ÿåº¦ä¼˜åŒ–"><a href="#2-5-è®¡ç®—é€Ÿåº¦ä¼˜åŒ–" class="headerlink" title="2.5 è®¡ç®—é€Ÿåº¦ä¼˜åŒ–"></a>2.5 è®¡ç®—é€Ÿåº¦ä¼˜åŒ–</h2><h3 id="2-5-1-openMP"><a href="#2-5-1-openMP" class="headerlink" title="2.5.1 openMP"></a>2.5.1 openMP</h3><p>OpenMPæä¾›çš„è¿™ç§å¯¹äºå¹¶è¡Œæè¿°çš„é«˜å±‚æŠ½è±¡é™ä½äº†å¹¶è¡Œç¼–ç¨‹çš„éš¾åº¦å’Œå¤æ‚åº¦ï¼Œè¿™æ ·ç¨‹åºå‘˜å¯ä»¥æŠŠæ›´å¤šçš„ç²¾åŠ›æŠ•å…¥åˆ°å¹¶è¡Œç®—æ³•æœ¬èº«ï¼Œè€Œéå…¶å…·ä½“å®ç°ç»†èŠ‚ã€‚å¯¹åŸºäºæ•°æ®åˆ†é›†çš„å¤šçº¿ç¨‹ç¨‹åºè®¾è®¡ï¼ŒOpenMPæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚åŒæ—¶ï¼Œä½¿ç”¨OpenMPä¹Ÿæä¾›äº†æ›´å¼ºçš„çµæ´»æ€§ï¼Œå¯ä»¥è¾ƒå®¹æ˜“çš„é€‚åº”ä¸åŒçš„å¹¶è¡Œç³»ç»Ÿé…ç½®ã€‚çº¿ç¨‹ç²’åº¦å’Œè´Ÿè½½å¹³è¡¡ç­‰æ˜¯ä¼ ç»Ÿå¤šçº¿ç¨‹ç¨‹åºè®¾è®¡ä¸­çš„éš¾é¢˜ï¼Œä½†åœ¨OpenMPä¸­ï¼ŒOpenMPåº“ä»ç¨‹åºå‘˜æ‰‹ä¸­æ¥ç®¡äº†éƒ¨åˆ†è¿™ä¸¤æ–¹é¢çš„å·¥ä½œã€‚</p><p>openPMåŸç”Ÿæ”¯æŒC/C++/Fortranï¼Œä½†javaå¯ä»¥é€šè¿‡jompç­‰å¼•å…¥ï¼Œæœªæµ‹è¯•ã€‚</p><h3 id="2-5-2-SSE3"><a href="#2-5-2-SSE3" class="headerlink" title="2.5.2 SSE3"></a>2.5.2 SSE3</h3><p>SSE3 ä¸­13ä¸ªæ–°æŒ‡ä»¤çš„ä¸»è¦ç›®çš„æ˜¯æ”¹è¿›çº¿ç¨‹åŒæ­¥å’Œç‰¹å®šåº”ç”¨ç¨‹åºé¢†åŸŸï¼Œä¾‹å¦‚åª’ä½“å’Œæ¸¸æˆã€‚è¿™äº›æ–°å¢æŒ‡ä»¤å¼ºåŒ–äº†å¤„ç†å™¨åœ¨æµ®ç‚¹è½¬æ¢è‡³æ•´æ•°ã€å¤æ‚ç®—æ³•ã€è§†é¢‘ç¼–ç ã€SIMDæµ®ç‚¹å¯„å­˜å™¨æ“ä½œä»¥åŠçº¿ç¨‹åŒæ­¥ç­‰äº”ä¸ªæ–¹é¢çš„è¡¨ç°ï¼Œæœ€ç»ˆè¾¾åˆ°æå‡å¤šåª’ä½“å’Œæ¸¸æˆæ€§èƒ½çš„ç›®çš„ã€‚Intelæ˜¯ä»Prescottæ ¸å¿ƒçš„Pentium 4å¼€å§‹æ”¯æŒSSE3æŒ‡ä»¤é›†çš„ï¼Œè€ŒAMDåˆ™æ˜¯ä»2005å¹´ä¸‹åŠå¹´Troyæ ¸å¿ƒçš„Opteronå¼€å§‹æ‰æ”¯æŒSSE3çš„ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒAMDæ‰€æ”¯æŒçš„SSE3ä¸Intelçš„SSE3å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œä¸»è¦æ˜¯åˆ é™¤äº†é’ˆå¯¹Intelè¶…çº¿ç¨‹æŠ€æœ¯ä¼˜åŒ–çš„éƒ¨åˆ†æŒ‡ä»¤ã€‚<br>SSE3æŒ‡ä»¤é‡‡ç”¨128ä½çš„å¯„å­˜å™¨ï¼Œå¯ä»¥åŒæ—¶æ“ä½œ4ä¸ªå•ç²¾åº¦æµ®ç‚¹æ•°æˆ–è€…æ•´æ•°ï¼Œå› æ­¤éå¸¸ç±»ä¼¼äºå‘é‡è¿ç®—ã€‚è¿™å¯¹äºæœ‰å¤§é‡å‘é‡è®¡ç®—çš„çš„FFMæ¨¡å‹æ˜¯æœ‰ç”¨çš„ã€‚<br>ä½†äº‹å®ä¸Šï¼Œè®¡ç®—<script type="math/tex">\phi</script>æ˜¯å‡ ä¹æ— ç”¨ï¼Œè€Œè¿™æ˜¯æœ€è€—æ—¶é—´çš„éƒ¨åˆ†ã€‚</p><h3 id="2-5-3-ParameterServer"><a href="#2-5-3-ParameterServer" class="headerlink" title="2.5.3 ParameterServer"></a>2.5.3 ParameterServer</h3><p><a href="https://www.zybuluo.com/Dounm/note/517675" target="_blank" rel="noopener">https://www.zybuluo.com/Dounm/note/517675</a><br>Paraeter Serveræ¡†æ¶ä¸­ï¼Œæ¯ä¸ªserveréƒ½åªè´Ÿè´£åˆ†åˆ°çš„éƒ¨åˆ†å‚æ•°ï¼ˆserverå…±åŒç»´æŒä¸€ä¸ªå…¨å±€å…±äº«å‚æ•°ï¼‰ã€‚serverèŠ‚ç‚¹å¯ä»¥å’Œå…¶ä»–serverèŠ‚ç‚¹é€šä¿¡ï¼Œæ¯ä¸ªserverè´Ÿè´£è‡ªå·±åˆ†åˆ°çš„å‚æ•°ï¼Œserver groupå…±åŒç»´æŒæ‰€æœ‰å‚æ•°çš„æ›´æ–°ã€‚server manage nodeè´Ÿè´£ç»´æŠ¤ä¸€äº›å…ƒæ•°æ®çš„ä¸€è‡´æ€§ï¼Œä¾‹å¦‚å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ï¼Œå‚æ•°çš„åˆ†é…æƒ…å†µã€‚</p><h2 id="2-6æ¨¡å‹ä¼˜åŒ–"><a href="#2-6æ¨¡å‹ä¼˜åŒ–" class="headerlink" title="2.6æ¨¡å‹ä¼˜åŒ–"></a>2.6æ¨¡å‹ä¼˜åŒ–</h2><h3 id="2-6-1-ç‰¹å¾ç¼–ç è¿ç»­"><a href="#2-6-1-ç‰¹å¾ç¼–ç è¿ç»­" class="headerlink" title="2.6.1 ç‰¹å¾ç¼–ç è¿ç»­"></a>2.6.1 ç‰¹å¾ç¼–ç è¿ç»­</h3><p>å¦‚æœç‰¹å¾çš„ç¼–ç ä¸è¿ç»­ï¼Œæ¯”å¦‚ç¼–ç æ˜¯æœ‰æ„ä¹‰çš„ï¼Œæˆ–è€…é¢„ç•™ç©ºé—´ç»™ä¹‹åçš„ç¼–ç ã€‚å¦‚æœç›´æ¥ä½¿ç”¨æœ€å¤§ç¼–ç å€¼çš„ä½œä¸ºå‚æ•°æ•°æ®å°ºå¯¸ï¼Œåˆ™ä¼šå¯¼è‡´å¤§é‡å†…å­˜ç©ºé—´çš„æµªè´¹ï¼Œå› æ­¤æœ‰2ç§è§£å†³æ–¹æ¡ˆï¼š<br>ï¼ˆ1ï¼‰ä½¿ç”¨hashmapï¼Œè€Œéæ•°ç»„ã€‚<br>ï¼ˆ2ï¼‰å°†æœ‰æ„ä¹‰çš„ç¼–ç æ˜ å°„åˆ°ä¸€ä¸ªè¿ç»­çš„ç¼–ç ç©ºé—´ã€‚<br>ç›®å‰æˆ‘ä»¬ä½¿ç”¨æ–¹å¼ï¼ˆ1ï¼‰ï¼Œç†è®ºä¸Šæ–¹å¼ï¼ˆ2ï¼‰çš„è®¡ç®—é€Ÿåº¦ä¼šæ›´å¿«ã€‚</p><h3 id="2-6-2-ä¸€æ¬¡é¡¹ç¼ºå¤±çš„å½±å“"><a href="#2-6-2-ä¸€æ¬¡é¡¹ç¼ºå¤±çš„å½±å“" class="headerlink" title="2.6.2 ä¸€æ¬¡é¡¹ç¼ºå¤±çš„å½±å“"></a>2.6.2 ä¸€æ¬¡é¡¹ç¼ºå¤±çš„å½±å“</h3><p>æ­£å¦‚ä¸Šé¢å¼ï¼ˆ18ï¼‰æ‰€è¨€ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå¿½ç•¥äº†ä¸€æ¬¡é¡¹çš„å½±å“ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªæ ·æœ¬åŠ ä¸Šä¸€ä¸ªè¾…åŠ©ç‰¹å¾ï¼Œè¿™é¡¹ç‰¹å¾çš„å€¼æ’ä¸º1ï¼Œè¿™ç›¸å½“äºå¼•å…¥äº†ä¸€æ¬¡é¡¹ã€‚</p><h3 id="2-6-3-æ ·æœ¬å½’ä¸€åŒ–"><a href="#2-6-3-æ ·æœ¬å½’ä¸€åŒ–" class="headerlink" title="2.6.3 æ ·æœ¬å½’ä¸€åŒ–"></a>2.6.3 æ ·æœ¬å½’ä¸€åŒ–</h3><p>æ–‡çŒ®1è¿˜å»ºè®®ï¼Œå°†æ ·æœ¬å‘é‡çš„é•¿åº¦å½’ä¸€åŒ–åï¼Œæ€§èƒ½æœ‰å°‘é‡çš„æå‡ã€‚</p><script type="math/tex; mode=display">R[i]=\frac{1}{||X||}</script><h3 id="2-6-4-ç‰¹å¾å½’ä¸€åŒ–"><a href="#2-6-4-ç‰¹å¾å½’ä¸€åŒ–" class="headerlink" title="2.6.4 ç‰¹å¾å½’ä¸€åŒ–"></a>2.6.4 ç‰¹å¾å½’ä¸€åŒ–</h3><p>æŸäº›ç‰¹å¾ï¼ˆå¦‚è´­ä¹°ä¸ªæ•°ï¼‰æœ‰å¯èƒ½å¾ˆå¤§ï¼Œè€Œä¸€äº›ç±»åˆ«å‚æ•°åˆ™æ’ä¸º1ï¼Œè¿™å°†å¯¼è‡´ä¸åŒç‰¹å¾æœ€ç»ˆå¯¹æ¨¡å‹çš„å½±å“ç›¸å…³å¾ˆå¤§ï¼Œè¿™å¾ˆä¸åˆç†ã€‚</p><h1 id="äº”ã€DEEP-amp-WIDE"><a href="#äº”ã€DEEP-amp-WIDE" class="headerlink" title="äº”ã€DEEP &amp; WIDE"></a>äº”ã€DEEP &amp; WIDE</h1>]]></content>
      
      
      <categories>
          
          <category> æ¨èç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTRé¢„ä¼° </tag>
            
            <tag> ç®—æ³•ä»‹ç» </tag>
            
            <tag> ååŒè¿‡æ»¤ </tag>
            
            <tag> LR </tag>
            
            <tag> FM </tag>
            
            <tag> FFM </tag>
            
            <tag> DEEP &amp; WIDE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹python</title>
      <link href="/2019/10/15/shi-yong-gong-ju-zhi-python/"/>
      <url>/2019/10/15/shi-yong-gong-ju-zhi-python/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/10/15/shi-yong-gong-ju-zhi-python/image-20210621144956956.png" alt="image-20210621144956956"></p><h1 id="ä¸€ã€PythonåŸºç¡€"><a href="#ä¸€ã€PythonåŸºç¡€" class="headerlink" title="ä¸€ã€PythonåŸºç¡€"></a>ä¸€ã€PythonåŸºç¡€</h1><h1 id="äºŒã€Pythonè¿›é˜¶"><a href="#äºŒã€Pythonè¿›é˜¶" class="headerlink" title="äºŒã€Pythonè¿›é˜¶"></a>äºŒã€Pythonè¿›é˜¶</h1><h1 id="ä¸‰ã€å‚è€ƒä¹¦ç±"><a href="#ä¸‰ã€å‚è€ƒä¹¦ç±" class="headerlink" title="ä¸‰ã€å‚è€ƒä¹¦ç±"></a>ä¸‰ã€å‚è€ƒä¹¦ç±</h1><h1 id="å››ã€ç–‘éš¾è§£ç­”"><a href="#å››ã€ç–‘éš¾è§£ç­”" class="headerlink" title="å››ã€ç–‘éš¾è§£ç­”"></a>å››ã€ç–‘éš¾è§£ç­”</h1><h2 id="1ã€ç¼–ç é—®é¢˜"><a href="#1ã€ç¼–ç é—®é¢˜" class="headerlink" title="1ã€ç¼–ç é—®é¢˜"></a>1ã€ç¼–ç é—®é¢˜</h2><h3 id="Python2ç¼–ç é—®é¢˜"><a href="#Python2ç¼–ç é—®é¢˜" class="headerlink" title="Python2ç¼–ç é—®é¢˜"></a><code>Python2</code>ç¼–ç é—®é¢˜</h3><ul><li><a href="https://foofish.net/why-Python-encoding-is-tricky.html" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><h3 id="Python3ç¼–ç é—®é¢˜"><a href="#Python3ç¼–ç é—®é¢˜" class="headerlink" title="Python3ç¼–ç é—®é¢˜"></a><code>Python3</code>ç¼–ç é—®é¢˜</h3><ul><li>åœ¨<code>Python3</code>ç‰ˆæœ¬ä¸­ï¼ŒæŠŠ<code>&#39;xxx&#39;</code>å’Œ<code>u&#39;xxx&#39;</code>ç»Ÿä¸€æˆ<code>Unicode</code>ç¼–ç ï¼Œå³å†™ä¸å†™å‰ç¼€<code>u</code>éƒ½æ˜¯ä¸€æ ·çš„ã€‚</li><li>åœ¨<code>Python3</code>ç‰ˆæœ¬ä¸­ï¼Œæ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½æ˜¯ä½¿ç”¨<code>Unicode</code>ç¼–ç çš„å­—ç¬¦ä¸²åºåˆ—ã€‚</li><li><a href="https://foofish.net/how-Python3-handle-charset-encoding.html" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><h2 id="2ã€æ—¥æœŸæ“ä½œ"><a href="#2ã€æ—¥æœŸæ“ä½œ" class="headerlink" title="2ã€æ—¥æœŸæ“ä½œ"></a>2ã€æ—¥æœŸæ“ä½œ</h2><ul><li><a href="https://www.runoob.com/python/python-date-time.html" target="_blank" rel="noopener">å‚è€ƒèœé¸Ÿæ•™ç¨‹</a></li></ul><h3 id="äº§ç”Ÿä¸€æ®µæ—¶é—´çš„æ—¥æœŸ"><a href="#äº§ç”Ÿä¸€æ®µæ—¶é—´çš„æ—¥æœŸ" class="headerlink" title="äº§ç”Ÿä¸€æ®µæ—¶é—´çš„æ—¥æœŸ"></a>äº§ç”Ÿä¸€æ®µæ—¶é—´çš„æ—¥æœŸ</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">from datetime import datetime, date, timedeltaimport pandas as pddate_id_list = [datetime.strftime(x, '%Y%m%d') for x in list(pd.date_range(start='20190701', end='20190928'))]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="è·å–æŒ‡å®šæ—¥æœŸçš„å‰-åNå¤©"><a href="#è·å–æŒ‡å®šæ—¥æœŸçš„å‰-åNå¤©" class="headerlink" title="è·å–æŒ‡å®šæ—¥æœŸçš„å‰-åNå¤©"></a>è·å–æŒ‡å®šæ—¥æœŸçš„å‰-åNå¤©</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">import datetimen = 1tomorrow = datetime.datetime(2015, 10, 28) + datetime.timedelta(days=1)    # 2015-10-29 00:00:00tomorrow_format = tomorrow.strftime('%Y%m%d')    # '20151029'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€mrjobè¿è¡Œå‚æ•°è¯¦æƒ…"><a href="#3ã€mrjobè¿è¡Œå‚æ•°è¯¦æƒ…" class="headerlink" title="3ã€mrjobè¿è¡Œå‚æ•°è¯¦æƒ…"></a>3ã€mrjobè¿è¡Œå‚æ•°è¯¦æƒ…</h2><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">python xxx.py -r hadoop --local-tmp-dir 'xxx' --hadoop-tmp-dir 'hdfs:xxx' --file 'xxx.txt' --jobconf mapred.map.tasks=20 --jobconf mapred.reduce.tasks=2 input.txt -o output_dir<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</strong><a href="https://mrjob.readthedocs.io/en/latest/" target="_blank" rel="noopener">mrjob</a></p><h2 id="4ã€listä¸­æ’åˆ—ç»„åˆ"><a href="#4ã€listä¸­æ’åˆ—ç»„åˆ" class="headerlink" title="4ã€listä¸­æ’åˆ—ç»„åˆ"></a>4ã€listä¸­æ’åˆ—ç»„åˆ</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">from itertools import combinationscombine_2 = list(combinations([1,2,3,4], 2))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="5ã€æ–‡ä»¶æ“ä½œ"><a href="#5ã€æ–‡ä»¶æ“ä½œ" class="headerlink" title="5ã€æ–‡ä»¶æ“ä½œ"></a>5ã€æ–‡ä»¶æ“ä½œ</h2><h3 id="è·å–æŒ‡å®šç›®å½•ä¸‹æŒ‡å®šæ–‡ä»¶"><a href="#è·å–æŒ‡å®šç›®å½•ä¸‹æŒ‡å®šæ–‡ä»¶" class="headerlink" title="è·å–æŒ‡å®šç›®å½•ä¸‹æŒ‡å®šæ–‡ä»¶"></a>è·å–æŒ‡å®šç›®å½•ä¸‹æŒ‡å®šæ–‡ä»¶</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">import osL = []for root, dirs, files in os.walk(os.getcwd()):    for x in files:        if os.path.splitext(x)[1] == '.txt':            L.append(os.path.join(root, x))file_path = L[0]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="pandasè¯»å–excelæ–‡ä»¶"><a href="#pandasè¯»å–excelæ–‡ä»¶" class="headerlink" title="pandasè¯»å–excelæ–‡ä»¶"></a>pandasè¯»å–excelæ–‡ä»¶</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python">roc_data = pd.read_excel(file_path, sheet_name='20200323_10000')roc_data<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="6ã€å‘½ä»¤è¡Œå‚æ•°sys-argv-1-è§£æ"><a href="#6ã€å‘½ä»¤è¡Œå‚æ•°sys-argv-1-è§£æ" class="headerlink" title="6ã€å‘½ä»¤è¡Œå‚æ•°sys.argv[1:]è§£æ"></a>6ã€å‘½ä»¤è¡Œå‚æ•°<code>sys.argv[1:]</code>è§£æ</h2><ul><li><a href="https://www.cnblogs.com/itech/archive/2010/12/31/1919017.html" target="_blank" rel="noopener">pythonç±»åº“31â€”å‘½ä»¤è¡Œè§£æ</a></li></ul><h3 id="æ‰‹åŠ¨è§£æ"><a href="#æ‰‹åŠ¨è§£æ" class="headerlink" title="æ‰‹åŠ¨è§£æ"></a>æ‰‹åŠ¨è§£æ</h3><h3 id="getoptè§£æ"><a href="#getoptè§£æ" class="headerlink" title="getoptè§£æ"></a>getoptè§£æ</h3><h3 id="optionparserè§£æã€æ¨èã€‘"><a href="#optionparserè§£æã€æ¨èã€‘" class="headerlink" title="optionparserè§£æã€æ¨èã€‘"></a>optionparserè§£æã€æ¨èã€‘</h3><h2 id="7ã€å­—å…¸æ’åº"><a href="#7ã€å­—å…¸æ’åº" class="headerlink" title="7ã€å­—å…¸æ’åº"></a>7ã€å­—å…¸æ’åº</h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">result = {}sorted(result.items(), key=lambda x: x[1], reverse=True)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="8ã€pythonè‡ªåŠ¨ç™»å½•Linuxç­‰æœåŠ¡"><a href="#8ã€pythonè‡ªåŠ¨ç™»å½•Linuxç­‰æœåŠ¡" class="headerlink" title="8ã€pythonè‡ªåŠ¨ç™»å½•Linuxç­‰æœåŠ¡"></a>8ã€pythonè‡ªåŠ¨ç™»å½•Linuxç­‰æœåŠ¡</h2><p><a href="https://pexpect.readthedocs.io/en/stable/overview.html" target="_blank" rel="noopener">å‚è€ƒ</a></p><pre class="line-numbers language-lang-python"><code class="language-lang-python">import pexpectchild = pexpect.spawn('ftp ftp.openbsd.org')child.expect('Name .*: ')child.sendline('anonymous')child.expect('Password:')child.sendline('noah@example.com')child.expect('ftp> ')child.sendline('lcd /tmp')child.expect('ftp> ')child.sendline('cd pub/OpenBSD')child.expect('ftp> ')child.sendline('get README')child.expect('ftp> ')child.sendline('bye')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="9ã€-ç”Ÿæˆrequirements-txt"><a href="#9ã€-ç”Ÿæˆrequirements-txt" class="headerlink" title="9ã€ ç”Ÿæˆrequirements.txt"></a>9ã€ ç”Ÿæˆrequirements.txt</h2><h3 id="ç¬¬ä¸€ç§æ–¹æ³•ï¼šå¤ªå¤šå¤ªæ‚ï¼Œå¯¹æ•´ä¸ªè™šæ‹Ÿç¯å¢ƒçš„"><a href="#ç¬¬ä¸€ç§æ–¹æ³•ï¼šå¤ªå¤šå¤ªæ‚ï¼Œå¯¹æ•´ä¸ªè™šæ‹Ÿç¯å¢ƒçš„" class="headerlink" title="ç¬¬ä¸€ç§æ–¹æ³•ï¼šå¤ªå¤šå¤ªæ‚ï¼Œå¯¹æ•´ä¸ªè™šæ‹Ÿç¯å¢ƒçš„"></a>ç¬¬ä¸€ç§æ–¹æ³•ï¼šå¤ªå¤šå¤ªæ‚ï¼Œå¯¹æ•´ä¸ªè™šæ‹Ÿç¯å¢ƒçš„</h3><pre class="line-numbers language-lang-python"><code class="language-lang-python"># ç”Ÿæˆpip freeze > requirements.txt# å®‰è£…pip install -r requirements.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç¬¬äºŒç§æ–¹æ³•ï¼šéœ€è¦pipå®‰è£…æ¨¡å—ï¼Œä½†æ˜¯å¯ä»¥å¯¹æŒ‡å®šç›®å½•è¿›è¡Œç”Ÿæˆ"><a href="#ç¬¬äºŒç§æ–¹æ³•ï¼šéœ€è¦pipå®‰è£…æ¨¡å—ï¼Œä½†æ˜¯å¯ä»¥å¯¹æŒ‡å®šç›®å½•è¿›è¡Œç”Ÿæˆ" class="headerlink" title="ç¬¬äºŒç§æ–¹æ³•ï¼šéœ€è¦pipå®‰è£…æ¨¡å—ï¼Œä½†æ˜¯å¯ä»¥å¯¹æŒ‡å®šç›®å½•è¿›è¡Œç”Ÿæˆ"></a>ç¬¬äºŒç§æ–¹æ³•ï¼šéœ€è¦pipå®‰è£…æ¨¡å—ï¼Œä½†æ˜¯å¯ä»¥å¯¹æŒ‡å®šç›®å½•è¿›è¡Œç”Ÿæˆ</h3><pre><code># pip å®‰è£…æ¨¡å—pip3 install pipreqs# å¯¹æŒ‡å®šç›®å½•è¿›è¡Œç”Ÿæˆrequirements.txtcd åˆ°æŒ‡å®šç›®å½•pipreqs ./ --encoding=utf8# è¿™æ ·åœ¨æŒ‡å®šç›®å½•å°±ä¼šæœ‰requirements.txtçš„ä¾èµ–æ–‡ä»¶</code></pre><h2 id="10ã€pythonå–mysqlä¸­æ–‡ä¹±ç "><a href="#10ã€pythonå–mysqlä¸­æ–‡ä¹±ç " class="headerlink" title="10ã€pythonå–mysqlä¸­æ–‡ä¹±ç "></a>10ã€pythonå–mysqlä¸­æ–‡ä¹±ç </h2><ol><li>mysqlä»£ç ä¸­å°†ä¸­æ–‡å­—æ®µç”¨<code>hex</code>å‡½æ•°è½¬æ¢</li><li>pythonä»£ç ä¸­ç”¨<code>bytes.fromhex(å–å‡ºçš„å­—æ®µ).decode(&#39;utf-8&#39;)</code>æ¥è½¬æ¢</li></ol><h2 id="11ã€æ›´æ–°æ‰€æœ‰æ¨¡å—"><a href="#11ã€æ›´æ–°æ‰€æœ‰æ¨¡å—" class="headerlink" title="11ã€æ›´æ–°æ‰€æœ‰æ¨¡å—"></a>11ã€æ›´æ–°æ‰€æœ‰æ¨¡å—</h2><ul><li><a href="https://pypi.org/project/pip-review/" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">pip3 install pip-reviewpip-review --interactive<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="12ã€å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹"><a href="#12ã€å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹" class="headerlink" title="12ã€å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹"></a>12ã€å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹</h2><ul><li><a href="https://github.com/jackfrued/Python-100-Days/blob/master/Day01-15/13.%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B.md" target="_blank" rel="noopener">å‚è€ƒ</a></li><li>ä¾‹å­1ï¼šå¤šè¿›ç¨‹</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">    def processTask(self, role_data, index):        print('å¯åŠ¨è®¡ç®—å­è¿›ç¨‹ï¼Œè¿›ç¨‹å·[%d].' % os.getpid())        print(role_data.shape)        # postè¯·æ±‚å‚æ•°        url = ''        headers = {            'game_code': '',  # æ¸¸æˆä»£å·            'secret': '',  # secret keyï¼Œçº¿ä¸‹æä¾›            'Content-Type': 'application/json'        }        # æ¨èç»“æœå†™å…¥ç»“æœæ–‡ä»¶        outputPath = 'g_role_item_test_result_multi_%s.txt' % str(index)        with open(outputPath, mode='w', encoding='utf-8') as f:            role_data.reset_index(drop=True, inplace=True)            for i in range(role_data.shape[0]):                role_id = role_data.role_id[i]                gender = role_data.gender[i]                purchased_items = role_data.item_set[i].replace('[', '').replace(']', '').replace('"', '').split(',')                current_amount = role_data.left_yuanbao[i]                argsData = {                    "role_id": role_id,  # è§’è‰²id                    "gender": int(gender) + 1,  # è§’è‰²æ€§åˆ«ï¼š1-ç”·ï¼Œ2-å¥³                    "purchased_items": purchased_items,  # è§’è‰²å·²è´­ä¹°çš„é“å…·idåˆ—è¡¨, e.g. ["123", "321"],                    "current_amount": int(current_amount)  # è§’è‰²å½“å‰è´¦æˆ·å‰©ä½™å…ƒå®                }                # print(i, argsData)                t1 = time.time()                try:                    result = self.getRecommendResultInit(url, headers, argsData)                except:                    result = []                t_diff = time.time() - t1                # è¾“å‡ºç»“æœ                result1 = {}                for i, x in enumerate(result):                    result1['R' + str(i)] = x                output1 = [role_id, json.dumps(argsData), str(round(t_diff, 5))] + [json.dumps(result1)]                f.write('\t'.join(output1) + '\n')    def getRecommendResultMulti(self):        """        ç»™å®šæ•°æ®ï¼Œä»æ¥å£è·å–æ¨èç»“æœï¼Œå¤šè¿›ç¨‹        :return:        """        # dataå‚æ•°è·å–        inputPath = "g_role_item_test_data.csv"        role_data = pd.read_csv(inputPath, sep=',', encoding='utf-8')        role_data.fillna('[]', inplace=True)        print(role_data.shape)        # å¤šè¿›ç¨‹        print('å¯åŠ¨è®¡ç®—æ¯è¿›ç¨‹ï¼Œè¿›ç¨‹å·[%d].' % os.getpid())        index = 0        processes = []        for _ in range(4):            p = Process(target=self.processTask,                        args=(role_data.loc[index:index+70000], index))            index += 70000            processes.append(p)            p.start()            # å¼€å§‹è®°å½•æ‰€æœ‰è¿›ç¨‹æ‰§è¡Œå®ŒæˆèŠ±è´¹çš„æ—¶é—´        start = time.time()        for p in processes:            p.join()        end = time.time()        print('Execution time: ', (end - start), 's', sep='')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¾‹å­2ï¼šå¤šçº¿ç¨‹</li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">import timeimport tkinterimport tkinter.messageboxfrom threading import Threaddef main():    class DownloadTaskHandler(Thread):        def run(self):            time.sleep(10)            tkinter.messagebox.showinfo('æç¤º', 'ä¸‹è½½å®Œæˆ!')            # å¯ç”¨ä¸‹è½½æŒ‰é’®            button1.config(state=tkinter.NORMAL)    def download():        # ç¦ç”¨ä¸‹è½½æŒ‰é’®        button1.config(state=tkinter.DISABLED)        # é€šè¿‡daemonå‚æ•°å°†çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹(ä¸»ç¨‹åºé€€å‡ºå°±ä¸å†ä¿ç•™æ‰§è¡Œ)        # åœ¨çº¿ç¨‹ä¸­å¤„ç†è€—æ—¶é—´çš„ä¸‹è½½ä»»åŠ¡        DownloadTaskHandler(daemon=True).start()    def show_about():        tkinter.messagebox.showinfo('å…³äº', 'ä½œè€…: éª†æ˜Š(v1.0)')    top = tkinter.Tk()    top.title('å•çº¿ç¨‹')    top.geometry('200x150')    top.wm_attributes('-topmost', 1)    panel = tkinter.Frame(top)    button1 = tkinter.Button(panel, text='ä¸‹è½½', command=download)    button1.pack(side='left')    button2 = tkinter.Button(panel, text='å…³äº', command=show_about)    button2.pack(side='right')    panel.pack(side='bottom')    tkinter.mainloop()if __name__ == '__main__':    main()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="13ã€æ–‡æœ¬ç›¸ä¼¼åº¦"><a href="#13ã€æ–‡æœ¬ç›¸ä¼¼åº¦" class="headerlink" title="13ã€æ–‡æœ¬ç›¸ä¼¼åº¦"></a>13ã€æ–‡æœ¬ç›¸ä¼¼åº¦</h2><ol><li>$similarity=\frac{|A\cap B|}{|A\cup B|}$</li><li>ä¿®æ­£ï¼Œå¯¹é•¿åº¦åšå‡ºæƒ©ç½šï¼š$similarity=\frac{|A\cap B|}{|A\cup B|+\alpha \times abs{(len(A)-len(B)})}$</li></ol><h2 id="14ã€one-hot-ç¼–ç -multiple-values"><a href="#14ã€one-hot-ç¼–ç -multiple-values" class="headerlink" title="14ã€one hot ç¼–ç =multiple values"></a>14ã€one hot ç¼–ç =multiple values</h2><ul><li><a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.str.get_dummies.html#pandas.Series.str.get_dummies" target="_blank" rel="noopener">pandas-Series.str.get_dummiers</a></li></ul><pre class="line-numbers language-lang-python"><code class="language-lang-python">pd.Series(['80001,800002', '150001,150002', '80001,80002,150001,150002']).str.get_dummies(sep=',')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.MultiLabelBinarizer.html#sklearn.preprocessing.MultiLabelBinarizer" target="_blank" rel="noopener">sklearn-MultiLabelBinarizer</a></li><li><a href="https://stackoverflow.com/questions/63544536/convert-pd-get-dummies-result-to-df-str-get-dummies" target="_blank" rel="noopener">one-hotè¿‡åå‹ç¼©çŸ©é˜µï¼ˆç¨€ç–çŸ©é˜µï¼‰</a></li></ul><h2 id="15ã€pandasä½¿ç”¨applyè¿”å›å¤šåˆ—"><a href="#15ã€pandasä½¿ç”¨applyè¿”å›å¤šåˆ—" class="headerlink" title="15ã€pandasä½¿ç”¨applyè¿”å›å¤šåˆ—"></a>15ã€pandasä½¿ç”¨applyè¿”å›å¤šåˆ—</h2><ul><li><a href="https://stackoverflow.com/questions/23586510/return-multiple-columns-from-pandas-apply" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><h2 id="16ã€Python-3-os-walk-file-paths-UnicodeEncodeError-â€˜utf-8â€™-codec-canâ€™t-encode-surrogates-not-allowed"><a href="#16ã€Python-3-os-walk-file-paths-UnicodeEncodeError-â€˜utf-8â€™-codec-canâ€™t-encode-surrogates-not-allowed" class="headerlink" title="16ã€Python 3: os.walk() file paths UnicodeEncodeError: â€˜utf-8â€™ codec canâ€™t encode: surrogates not allowed"></a>16ã€<a href="https://stackoverflow.com/questions/27366479/python-3-os-walk-file-paths-unicodeencodeerror-utf-8-codec-cant-encode-s" target="_blank" rel="noopener">Python 3: os.walk() file paths UnicodeEncodeError: â€˜utf-8â€™ codec canâ€™t encode: surrogates not allowed</a></h2><pre class="line-numbers language-lang-python"><code class="language-lang-python">for p,d,f in os.walk(b'.'):    print(p.decode('utf-8', 'replace'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="16ã€python-å¦‚ä½•å°†æ˜ å°„å‡½æ•°åº”ç”¨äº-tf-Tensor"><a href="#16ã€python-å¦‚ä½•å°†æ˜ å°„å‡½æ•°åº”ç”¨äº-tf-Tensor" class="headerlink" title="16ã€python - å¦‚ä½•å°†æ˜ å°„å‡½æ•°åº”ç”¨äº tf.Tensor"></a>16ã€python - å¦‚ä½•å°†æ˜ å°„å‡½æ•°åº”ç”¨äº tf.Tensor</h2><ul><li>æ‰¹é‡è¯»å–å›¾ç‰‡</li><li><a href="https://www.coder.work/article/7644016" target="_blank" rel="noopener">ç”¨tf.py_function</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–ç¨‹è¯­è¨€ </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹Linux</title>
      <link href="/2019/10/14/shi-yong-gong-ju-zhi-linux/"/>
      <url>/2019/10/14/shi-yong-gong-ju-zhi-linux/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€LinuxåŸºç¡€"><a href="#ä¸€ã€LinuxåŸºç¡€" class="headerlink" title="ä¸€ã€LinuxåŸºç¡€"></a>ä¸€ã€LinuxåŸºç¡€</h1><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><h3 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h3><ul><li><a href="https://man.linuxde.net/rsync" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">rsync [OPTION]... SRC DESTrsync [OPTION]... SRC [USER@]host:DESTrsync [OPTION]... [USER@]HOST:SRC DESTrsync [OPTION]... [USER@]HOST::SRC DESTrsync [OPTION]... SRC [USER@]HOST::DESTrsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”äºä»¥ä¸Šå…­ç§å‘½ä»¤æ ¼å¼ï¼Œrsyncæœ‰å…­ç§ä¸åŒçš„å·¥ä½œæ¨¡å¼ï¼š</p><ol><li>æ‹·è´æœ¬åœ°æ–‡ä»¶ã€‚å½“SRCå’ŒDESè·¯å¾„ä¿¡æ¯éƒ½ä¸åŒ…å«æœ‰å•ä¸ªå†’å·â€:â€åˆ†éš”ç¬¦æ—¶å°±å¯åŠ¨è¿™ç§å·¥ä½œæ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -a /data /backup</code></li><li>ä½¿ç”¨ä¸€ä¸ªè¿œç¨‹shellç¨‹åº(å¦‚<a href="http://man.linuxde.net/rsh" target="_blank" rel="noopener">rsh</a>ã€<a href="http://man.linuxde.net/ssh" target="_blank" rel="noopener">ssh</a>)æ¥å®ç°å°†æœ¬åœ°æœºå™¨çš„å†…å®¹æ‹·è´åˆ°è¿œç¨‹æœºå™¨ã€‚å½“DSTè·¯å¾„åœ°å€åŒ…å«å•ä¸ªå†’å·â€:â€åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -avz *.c foo:src</code></li><li>ä½¿ç”¨ä¸€ä¸ªè¿œç¨‹shellç¨‹åº(å¦‚rshã€ssh)æ¥å®ç°å°†è¿œç¨‹æœºå™¨çš„å†…å®¹æ‹·è´åˆ°æœ¬åœ°æœºå™¨ã€‚å½“SRCåœ°å€è·¯å¾„åŒ…å«å•ä¸ªå†’å·â€:â€åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -avz foo:src/bar /data</code></li><li>ä»è¿œç¨‹rsyncæœåŠ¡å™¨ä¸­æ‹·è´æ–‡ä»¶åˆ°æœ¬åœ°æœºã€‚å½“SRCè·¯å¾„ä¿¡æ¯åŒ…å«â€::â€åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -av root@192.168.78.192::www /databack</code></li><li>ä»æœ¬åœ°æœºå™¨æ‹·è´æ–‡ä»¶åˆ°è¿œç¨‹rsyncæœåŠ¡å™¨ä¸­ã€‚å½“DSTè·¯å¾„ä¿¡æ¯åŒ…å«â€::â€åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -av /databack root@192.168.78.192::www</code></li><li>åˆ—è¿œç¨‹æœºçš„æ–‡ä»¶åˆ—è¡¨ã€‚è¿™ç±»ä¼¼äºrsyncä¼ è¾“ï¼Œä¸è¿‡åªè¦åœ¨å‘½ä»¤ä¸­çœç•¥æ‰æœ¬åœ°æœºä¿¡æ¯å³å¯ã€‚å¦‚ï¼š<code>rsync -v rsync://192.168.78.192/www</code></li></ol><h4 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">-v, --verbose è¯¦ç»†æ¨¡å¼è¾“å‡ºã€‚-q, --quiet ç²¾ç®€è¾“å‡ºæ¨¡å¼ã€‚-c, --checksum æ‰“å¼€æ ¡éªŒå¼€å…³ï¼Œå¼ºåˆ¶å¯¹æ–‡ä»¶ä¼ è¾“è¿›è¡Œæ ¡éªŒã€‚-a, --archive å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¿æŒæ‰€æœ‰æ–‡ä»¶å±æ€§ï¼Œç­‰äº-rlptgoDã€‚-r, --recursive å¯¹å­ç›®å½•ä»¥é€’å½’æ¨¡å¼å¤„ç†ã€‚-R, --relative ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¿¡æ¯ã€‚-b, --backup åˆ›å»ºå¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯å¯¹äºç›®çš„å·²ç»å­˜åœ¨æœ‰åŒæ ·çš„æ–‡ä»¶åæ—¶ï¼Œå°†è€çš„æ–‡ä»¶é‡æ–°å‘½åä¸º~filenameã€‚å¯ä»¥ä½¿ç”¨--suffixé€‰é¡¹æ¥æŒ‡å®šä¸åŒçš„å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚--backup-dir å°†å¤‡ä»½æ–‡ä»¶(å¦‚~filename)å­˜æ”¾åœ¨åœ¨ç›®å½•ä¸‹ã€‚-suffix=SUFFIX å®šä¹‰å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚-u, --update ä»…ä»…è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡æ‰€æœ‰å·²ç»å­˜åœ¨äºDSTï¼Œå¹¶ä¸”æ–‡ä»¶æ—¶é—´æ™šäºè¦å¤‡ä»½çš„æ–‡ä»¶ï¼Œä¸è¦†ç›–æ›´æ–°çš„æ–‡ä»¶ã€‚-l, --links ä¿ç•™è½¯é“¾ç»“ã€‚-L, --copy-links æƒ³å¯¹å¾…å¸¸è§„æ–‡ä»¶ä¸€æ ·å¤„ç†è½¯é“¾ç»“ã€‚--copy-unsafe-links ä»…ä»…æ‹·è´æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“ã€‚--safe-links å¿½ç•¥æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“ã€‚-H, --hard-links ä¿ç•™ç¡¬é“¾ç»“ã€‚-p, --perms ä¿æŒæ–‡ä»¶æƒé™ã€‚-o, --owner ä¿æŒæ–‡ä»¶å±ä¸»ä¿¡æ¯ã€‚-g, --group ä¿æŒæ–‡ä»¶å±ç»„ä¿¡æ¯ã€‚-D, --devices ä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯ã€‚-t, --times ä¿æŒæ–‡ä»¶æ—¶é—´ä¿¡æ¯ã€‚-S, --sparse å¯¹ç¨€ç–æ–‡ä»¶è¿›è¡Œç‰¹æ®Šå¤„ç†ä»¥èŠ‚çœDSTçš„ç©ºé—´ã€‚-n, --dry-runç°å®å“ªäº›æ–‡ä»¶å°†è¢«ä¼ è¾“ã€‚-w, --whole-file æ‹·è´æ–‡ä»¶ï¼Œä¸è¿›è¡Œå¢é‡æ£€æµ‹ã€‚-x, --one-file-system ä¸è¦è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œã€‚-B, --block-size=SIZE æ£€éªŒç®—æ³•ä½¿ç”¨çš„å—å°ºå¯¸ï¼Œé»˜è®¤æ˜¯700å­—èŠ‚ã€‚-e, --rsh=command æŒ‡å®šä½¿ç”¨rshã€sshæ–¹å¼è¿›è¡Œæ•°æ®åŒæ­¥ã€‚--rsync-path=PATH æŒ‡å®šè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„rsyncå‘½ä»¤æ‰€åœ¨è·¯å¾„ä¿¡æ¯ã€‚-C, --cvs-exclude ä½¿ç”¨å’ŒCVSä¸€æ ·çš„æ–¹æ³•è‡ªåŠ¨å¿½ç•¥æ–‡ä»¶ï¼Œç”¨æ¥æ’é™¤é‚£äº›ä¸å¸Œæœ›ä¼ è¾“çš„æ–‡ä»¶ã€‚--existing ä»…ä»…æ›´æ–°é‚£äº›å·²ç»å­˜åœ¨äºDSTçš„æ–‡ä»¶ï¼Œè€Œä¸å¤‡ä»½é‚£äº›æ–°åˆ›å»ºçš„æ–‡ä»¶ã€‚--delete åˆ é™¤é‚£äº›DSTä¸­SRCæ²¡æœ‰çš„æ–‡ä»¶ã€‚--delete-excluded åŒæ ·åˆ é™¤æ¥æ”¶ç«¯é‚£äº›è¢«è¯¥é€‰é¡¹æŒ‡å®šæ’é™¤çš„æ–‡ä»¶ã€‚--delete-after ä¼ è¾“ç»“æŸä»¥åå†åˆ é™¤ã€‚--ignore-errors åŠæ—¶å‡ºç°IOé”™è¯¯ä¹Ÿè¿›è¡Œåˆ é™¤ã€‚--max-delete=NUM æœ€å¤šåˆ é™¤NUMä¸ªæ–‡ä»¶ã€‚--partial ä¿ç•™é‚£äº›å› æ•…æ²¡æœ‰å®Œå…¨ä¼ è¾“çš„æ–‡ä»¶ï¼Œä»¥æ˜¯åŠ å¿«éšåçš„å†æ¬¡ä¼ è¾“ã€‚--force å¼ºåˆ¶åˆ é™¤ç›®å½•ï¼Œå³ä½¿ä¸ä¸ºç©ºã€‚--numeric-ids ä¸å°†æ•°å­—çš„ç”¨æˆ·å’Œç»„idåŒ¹é…ä¸ºç”¨æˆ·åå’Œç»„åã€‚--timeout=time ipè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚-I, --ignore-times ä¸è·³è¿‡é‚£äº›æœ‰åŒæ ·çš„æ—¶é—´å’Œé•¿åº¦çš„æ–‡ä»¶ã€‚--size-only å½“å†³å®šæ˜¯å¦è¦å¤‡ä»½æ–‡ä»¶æ—¶ï¼Œä»…ä»…å¯Ÿçœ‹æ–‡ä»¶å¤§å°è€Œä¸è€ƒè™‘æ–‡ä»¶æ—¶é—´ã€‚--modify-window=NUM å†³å®šæ–‡ä»¶æ˜¯å¦æ—¶é—´ç›¸åŒæ—¶ä½¿ç”¨çš„æ—¶é—´æˆ³çª—å£ï¼Œé»˜è®¤ä¸º0ã€‚-T --temp-dir=DIR åœ¨DIRä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚--compare-dest=DIR åŒæ ·æ¯”è¾ƒDIRä¸­çš„æ–‡ä»¶æ¥å†³å®šæ˜¯å¦éœ€è¦å¤‡ä»½ã€‚-P ç­‰åŒäº --partialã€‚--progress æ˜¾ç¤ºå¤‡ä»½è¿‡ç¨‹ã€‚-z, --compress å¯¹å¤‡ä»½çš„æ–‡ä»¶åœ¨ä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©å¤„ç†ã€‚--exclude=PATTERN æŒ‡å®šæ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼ã€‚--include=PATTERN æŒ‡å®šä¸æ’é™¤è€Œéœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼ã€‚--exclude-from=FILE æ’é™¤FILEä¸­æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶ã€‚--include-from=FILE ä¸æ’é™¤FILEæŒ‡å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶ã€‚--version æ‰“å°ç‰ˆæœ¬ä¿¡æ¯ã€‚--address ç»‘å®šåˆ°ç‰¹å®šçš„åœ°å€ã€‚--config=FILE æŒ‡å®šå…¶ä»–çš„é…ç½®æ–‡ä»¶ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„rsyncd.confæ–‡ä»¶ã€‚--port=PORT æŒ‡å®šå…¶ä»–çš„rsyncæœåŠ¡ç«¯å£ã€‚--blocking-io å¯¹è¿œç¨‹shellä½¿ç”¨é˜»å¡IOã€‚-stats ç»™å‡ºæŸäº›æ–‡ä»¶çš„ä¼ è¾“çŠ¶æ€ã€‚--progress åœ¨ä¼ è¾“æ—¶ç°å®ä¼ è¾“è¿‡ç¨‹ã€‚--log-format=formAT æŒ‡å®šæ—¥å¿—æ–‡ä»¶æ ¼å¼ã€‚--password-file=FILE ä»FILEä¸­å¾—åˆ°å¯†ç ã€‚--bwlimit=KBPS é™åˆ¶I/Oå¸¦å®½ï¼ŒKBytes per secondã€‚-h, --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="äºŒã€Linuxè¿›é˜¶"><a href="#äºŒã€Linuxè¿›é˜¶" class="headerlink" title="äºŒã€Linuxè¿›é˜¶"></a>äºŒã€Linuxè¿›é˜¶</h1><h2 id="linuxé…ç½®condaç¯å¢ƒåŠæ­å»ºæ·±åº¦å­¦ä¹ ç¯å¢ƒ"><a href="#linuxé…ç½®condaç¯å¢ƒåŠæ­å»ºæ·±åº¦å­¦ä¹ ç¯å¢ƒ" class="headerlink" title="linuxé…ç½®condaç¯å¢ƒåŠæ­å»ºæ·±åº¦å­¦ä¹ ç¯å¢ƒ"></a>linuxé…ç½®condaç¯å¢ƒåŠæ­å»ºæ·±åº¦å­¦ä¹ ç¯å¢ƒ</h2><h3 id="å®‰è£…minconda3"><a href="#å®‰è£…minconda3" class="headerlink" title="å®‰è£…minconda3"></a>å®‰è£…minconda3</h3><ul><li><a href="https://docs.anaconda.com/anaconda/install/linux/" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># å®‰è£…miniconda3wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh# æ ¡éªŒhashå€¼sha256sum Miniconda3-latest-Linux-x86_64.sh# æ›´æ”¹æ‰§è¡Œæƒé™chmod +x Miniconda3-latest-Linux-x86_64.sh# å®‰è£…bash Miniconda3-latest-Linux-x86_64.sh# å®‰è£…å®Œæˆåé…ç½®ä»»æ„ä½ç½®å¯åŠ¨condasource <path to conda>/bin/activateconda initconda deactivatesource ~/.bashrcconda config --set auto_activate_base False# éªŒè¯conda --version# è£…å¥½condaä¹‹åï¼Œç¡®å®šä¸€ä¸ªä½ æ”¾è½¯ä»¶çš„åœ°æ–¹mkdir ~/conda_softwareconda create -p ~/conda_software# é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥åŠ åˆ°.bashrcæˆ–è€….zshrcæ–‡ä»¶ï¼Œè¿™æ ·æ¯æ¬¡ç™»å½•ä¸ç”¨å†è®¾ç½®export PATH=$HOME/conda_software/bin${PATH:+:${PATH}}# å®‰è£…è½¯ä»¶conda activate ~/softwares/conda_softwareconda config --add channels conda-forge# ä»¥ä¸‹ä¸¾å‡ ä¸ªä¾‹å­ï¼š# conda install zsh# conda install htop# conda install tmux# conda install openssl# æŸ¥çœ‹å®‰è£…äº†å“ªäº›åŒ…conda list# æŸ¥çœ‹å½“å‰å­˜åœ¨å“ªäº›è™šæ‹Ÿç¯å¢ƒconda env list# conda info -e# æ£€æŸ¥æ›´æ–°conda update conda# åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒconda create -n python38 python=3.8# æ¿€æ´»conda activate python38# å®‰è£…åŒ…# æŒ‡å®šç¯å¢ƒå®‰è£…åŒ…conda install -n python38 numpy# åœ¨ç¯å¢ƒå†…å®‰è£…åŒ…conda install numpy# å…³é—­è™šæ‹Ÿç¯å¢ƒconda deactivate# åˆ é™¤è™šæ‹Ÿç¯å¢ƒconda remove -n python38 --all# åˆ é™¤ç¯å¢ƒä¸­çš„åŒ…conda remove -n python38 numpy# è®¾ç½®å›½å†…é•œåƒconda config --add channels https://mirrors.tuna.tsinghua.edu.cn# è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€conda config --set show_channel_urls yes# æ¢å¤é»˜è®¤é•œåƒconda config --remove-key channels<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é…ç½®æœåŠ¡å™¨jupyterç¯å¢ƒ"><a href="#é…ç½®æœåŠ¡å™¨jupyterç¯å¢ƒ" class="headerlink" title="é…ç½®æœåŠ¡å™¨jupyterç¯å¢ƒ"></a>é…ç½®æœåŠ¡å™¨jupyterç¯å¢ƒ</h3><ul><li><a href="https://blog.lihj.me/post/conda-jupyter-installation.html" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># å®‰è£…jupyter labconda install jupyterlab# jupyter é…ç½®# ç”Ÿæˆé…ç½®æ–‡ä»¶jupyter notebook --generate-configipython# ipythonfrom notebook.auth import passwdpasswd()# å¤åˆ¶ç”Ÿæˆçš„å¯†æ–‡# ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶vim ~/.jupyter/jupyter_notebook_config.py# ä¿®æ”¹ä»¥ä¸‹å†…å®¹c.NotebookApp.allow_remote_access = Truec.NotebookApp.ip = '*'c.NotebookApp.open_browser = Falsec.NotebookApp.password = u'sha1:...åˆšæ‰å¤åˆ¶çš„å¯†æ–‡'c.NotebookApp.port = 8888 # æŒ‡å®šä¸€ä¸ªè®¿é—®ç«¯å£# å¯åŠ¨jupyter# jupyter notebookjupyter lab# è¿œç¨‹è®¿é—®# åœ¨æœ¬åœ°æµè§ˆå™¨è¾“å…¥ address_of_remote:8888 è¿›å…¥jupyter çš„ç™»é™†ç•Œé¢# å®‰è£… jupyter ä½¿ç”¨çš„ python å¯ç›´æ¥è¢« jupyter è°ƒç”¨ï¼Œä¸éœ€é¢å¤–é…ç½®ã€‚# ä¸ºäº†ä½¿ç”¨å…¶ä»–è¯­è¨€æˆ–è€…æ–°ç¯å¢ƒä¸­çš„æŸç§è¯­è¨€ï¼Œéœ€è¦å•ç‹¬å®‰è£…è¯¥è¯­è¨€çš„ jupyter kernel ä¾› jupyter è°ƒç”¨# è¿›å…¥ç¯å¢ƒconda activate python38# å®‰è£…ä¾èµ–åŒ…conda install notebook ipykernel# å®‰è£…python kernelwhich ipython # should show ~/miniconda3/envs/python38/bin/ipythonipython kernel install --user --name "python38" --display-name "Python38"# kernel æ–‡ä»¶ä¿å­˜åœ¨ ~/.local/share/python38/kernels/python37ã€‚# æ­¤æ—¶å®‰è£…çš„æ˜¯æ–°ç¯å¢ƒä¸­ ipython æ‰€å±çš„ python 3.8 (~/miniconda3/envs/python38/bin/python) ä¸º jupyter kernelã€‚# å…¶ä»–ä½ç½®æˆ–ç¯å¢ƒçš„ python å¯ç”¨ç›¸åŒæ–¹æ³•å®‰è£…ä¸º jupyter kernel<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‡çº§cuda"><a href="#å‡çº§cuda" class="headerlink" title="å‡çº§cuda"></a>å‡çº§cuda</h3><ul><li><a href="https://www.nvidia.cn/Download/index.aspx?lang=cn" target="_blank" rel="noopener">å„æ˜¾å¡é©±åŠ¨ä¸‹è½½åœ°å€</a></li><li><a href="https://developer.nvidia.com/zh-cn/cuda-toolkit" target="_blank" rel="noopener">CUDAä¸‹è½½åœ°å€</a></li><li><a href="https://developer.nvidia.com/rdp/cudnn-archive" target="_blank" rel="noopener">cudnnä¸‹è½½åœ°å€</a>ï¼šä¼šè®©ç™»å½•å’Œæ¯”è¾ƒæ…¢ï¼Œè€å¿ƒç­‰å¾…</li><li><a href="https://www.tensorflow.org/install/source#linux" target="_blank" rel="noopener">tensorflowå„ç‰ˆæœ¬å¯¹æ¯”</a></li></ul><h4 id="åˆ é™¤å†å²cudaç‰ˆæœ¬ä¿¡æ¯"><a href="#åˆ é™¤å†å²cudaç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="åˆ é™¤å†å²cudaç‰ˆæœ¬ä¿¡æ¯"></a>åˆ é™¤å†å²cudaç‰ˆæœ¬ä¿¡æ¯</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># sudo rm /etc/apt/sources.list.d/cuda*# sudo apt-get --purge remove "*cublas*" "cuda*" "nsight*" # sudo apt-get --purge remove "*nvidia*"# sudo apt-get autoremove# sudo apt-get autoclean# sudo rm -rf /usr/local/cuda*# å¸è½½æ‰€æœ‰Nå¡é©±åŠ¨sudo apt-get remove --purge nvidia-\*sudo apt-get remove --purge cuda-\*sudo apt-get remove --purge *cudnn*sudo apt autoremovesudo apt-get autoclean# æŸ¥çœ‹å·²å®‰è£…çš„ä¸œè¥¿sudo dpkg --list | grep nvidia*ubuntu1604_1.0.0-1_amd64.deb  # å¯å®‰è£…çš„æ˜¾å¡é©±åŠ¨lspci | grep -i nvidia  # æŸ¥çœ‹æ˜¾å¡nvidia-smi  # æŸ¥çœ‹æ˜¾å¡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Linuxç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹"><a href="#Linuxç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="Linuxç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹"></a><a href="https://blog.csdn.net/weixin_41010198/article/details/109166131" target="_blank" rel="noopener">Linuxç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹</a></h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬cat /proc/versionuname -auname -r# æŸ¥çœ‹linuxç‰ˆæœ¬ä¿¡æ¯lsb_release -acat /etc/issue# æŸ¥çœ‹linuxæ˜¯64ä¸ºè¿˜æ˜¯32ä½getconf LONG_BITfile /bin/ls# ç›´æ¥æŸ¥çœ‹ç³»ç»Ÿçš„æ¶æ„dpkg --print-architecturearchfile /lib/systemd/systemd# æŸ¥çœ‹Mintç³»ç»Ÿå¯¹åº”çš„Ubuntuç³»ç»Ÿcat /etc/os-releasecat /etc/upstream-release/lsb-releasegcc --version  # æŸ¥çœ‹gccç‰ˆæœ¬<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="çŸ¥ä¹æ•™ç¨‹"><a href="#çŸ¥ä¹æ•™ç¨‹" class="headerlink" title="çŸ¥ä¹æ•™ç¨‹"></a><a href="https://zhuanlan.zhihu.com/p/143429249" target="_blank" rel="noopener">çŸ¥ä¹æ•™ç¨‹</a></h4><ul><li>å®‰è£…æ•™ç¨‹æ¥å‡ ä¹æ²¡é—®é¢˜</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># å®‰è£…æ˜¾å¡é©±åŠ¨sudo add-apt-repository ppa:graphics-drivers  #æ·»åŠ NVIDAæ˜¾å¡é©±åŠ¨åº“sudo apt updateubuntu-drivers devices  #æ˜¾ç¤ºå¯å®‰è£…é©±åŠ¨#sudo ubuntu-drivers autoinstall  #è®©Ubuntuè‡ªåŠ¨å¸®ä½ é€‰æ‹©ç‰ˆæœ¬å¹¶å®‰è£…sudo apt install nvidia-driver-450  #å®‰è£…450é©±åŠ¨sudo rebootnvidia-smi  #æŸ¥çœ‹GPUä¿¡æ¯,éœ€å…ˆé‡å¯# å®‰è£…cudawget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-ubuntu1804.pinsudo mv cuda-ubuntu1804.pin /etc/apt/preferences.d/cuda-repository-pin-600sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pubsudo add-apt-repository "deb http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/ /"sudo apt-get updatesudo apt list cuda* # æŸ¥çœ‹æ‰€æœ‰ï¼Œåå­—ä»¥cudaå¼€å¤´çš„ï¼Œå¯ä»¥ç”¨apt installå®‰è£…çš„packagessudo apt install cuda-toolkit-10-2  #åªå®‰è£…CUDA 10.2#sudo apt install cuda-10-2  #å®‰è£…CUDA 10.2ã€‚åŒ…å«é©±åŠ¨ï¼Œç‰ˆæœ¬è‡ªåŠ¨é€‰æ‹©ã€‚# å®‰è£…cudnn# å®˜ç½‘ä¸‹è½½ç¬¦åˆç‰ˆæœ¬çš„ä¸‰ä¸ªdebcd ~/Downloads  #è¿›å…¥ä¸‹è½½å¥½çš„ä¸‰ä¸ªæ–‡ä»¶çš„è·¯å¾„sudo dpkg -i libcudnn*  #åŒæ—¶å®‰è£…#sudo dpkg -i libcudnn7_7.6.5.32-1+cuda10.2_amd64.deb  #é€ä¸ªå®‰è£…#sudo dpkg -i libcudnn7-dev_7.6.5.32-1+cuda10.2_amd64.deb#sudo dpkg -i libcudnn7-doc_7.6.5.32-1+cuda10.2_amd64.deb# æµ‹è¯•cp -r /usr/src/cudnn_samples_v7/ $HOME  #å¤åˆ¶æ ·æœ¬æ–‡ä»¶åˆ°$HOMEæ–‡ä»¶å¤¹ä¸‹cd  $HOME/cudnn_samples_v7/mnistCUDNN  #è¿›å…¥æ ·æœ¬ç›®å½•make clean && make  #ç¼–è¯‘./mnistCUDNN  #æ‰§è¡ŒcuDNNæµ‹è¯•# è¾“å‡ºâ€œTest Passedâ€è¯´æ˜cuDNNå®‰è£…æˆåŠŸã€‚# å®‰è£…tensorflowpip install tensorflow-gpu==2.4.0# æµ‹è¯•import tensorflow as tftf.test.is_gpu_avaiable()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="tensorflowå®˜ç½‘æ•™ç¨‹ï¼šGPUæ”¯æŒ"><a href="#tensorflowå®˜ç½‘æ•™ç¨‹ï¼šGPUæ”¯æŒ" class="headerlink" title="tensorflowå®˜ç½‘æ•™ç¨‹ï¼šGPUæ”¯æŒ"></a><a href="https://www.tensorflow.org/install/gpu" target="_blank" rel="noopener">tensorflowå®˜ç½‘æ•™ç¨‹ï¼šGPUæ”¯æŒ</a></h4><ul><li>Ubuntu 16.04(CUDA 11.0)</li></ul><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># Add NVIDIA package repositories# Add HTTPS support for apt-keysudo apt-get install gnupg-curlwget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-ubuntu1604.pinsudo mv cuda-ubuntu1604.pin /etc/apt/preferences.d/cuda-repository-pin-600sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pub# apt-get install software-properties-commonsudo add-apt-repository "deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/ /"# apt-get install apt-transport-https ca-certificatessudo apt-get updatewget https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.debsudo apt install ./nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.debsudo apt-get updatewget https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/libnvinfer7_7.1.3-1+cuda11.0_amd64.debsudo apt install ./libnvinfer7_7.1.3-1+cuda11.0_amd64.debsudo apt-get update# Install NVIDIA driver# Issue with driver install requires creating /usr/lib/nvidiasudo mkdir /usr/lib/nvidiaubuntu-drivers devices  # æŸ¥çœ‹æ˜¾å¡å’Œæ¨èé©±åŠ¨sudo apt-get install --no-install-recommends nvidia-450# sudo apt-get install --no-install-recommends nvidia-driver-450# Reboot. Check that GPUs are visible using the command: nvidia-smi# Install development and runtime libraries (~4GB)# sudo apt install cuda-toolkit-11-0  #åªå®‰è£…CUDA 10.2# sudo apt install cuda-10-2  #å®‰è£…CUDA 10.2ã€‚åŒ…å«é©±åŠ¨ï¼Œç‰ˆæœ¬è‡ªåŠ¨é€‰æ‹©ã€‚sudo apt-get install --no-install-recommends \    cuda-11-0 \    libcudnn8=8.0.4.30-1+cuda11.0  \    libcudnn8-dev=8.0.4.30-1+cuda11.0# Install TensorRT. Requires that libcudnn7 is installed above.sudo apt-get install -y --no-install-recommends \    libnvinfer7=7.1.3-1+cuda11.0 \    libnvinfer-dev=7.1.3-1+cuda11.0 \    libnvinfer-plugin7=7.1.3-1+cuda11.0 \    libnvinfer-plugin-dev=7.1.3-1+cuda11.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å¯¼å¸ˆæ•™ç¨‹"><a href="#å¯¼å¸ˆæ•™ç¨‹" class="headerlink" title="å¯¼å¸ˆæ•™ç¨‹"></a>å¯¼å¸ˆæ•™ç¨‹</h4><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">1ã€å®‰è£…CUDAåŠcuDNNTENSORFLOWå¯¹CUDAçš„è¦æ±‚ï¼šhttps://www.tensorflow.org/install/install_linux?hl=zh-cnnvdiaçš„å®˜æ–¹æ–‡æ¡£ï¼šhttp://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#handle-uninstallationï¼ˆ1ï¼‰tensorflow1.8çš„ç‰ˆæœ¬è¦æ±‚ä¸ºï¼š* CUDA9.0ï¼Œä¸æ”¯æŒ8.0* cuDNN7.0.xï¼Œä¸æ”¯æŒ7.1.xï¼ˆ2ï¼‰å¸è½½ CUDA 8.0ï¼šå¦‚æœåŸæ¥æ²¡æœ‰å®‰è£…CUDA8.0ï¼Œåˆ™å¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥/usr/local/cuda-X.Y/bin/uninstall_cuda_X.Y.plæ¯”å¦‚ï¼š/usr/local/cuda-8.0/bin/uninstall_cuda_8.0.plã€å¯é€‰ã€‘é©±åŠ¨ä¹Ÿä¸€å¹¶å¸æ‰ï¼Œå› ä¸ºæ–°ç‰ˆ CUDA é€šå¸¸éœ€è¦è£…ä¸€ä¸ªæ–°é©±åŠ¨ã€‚$ sudo /usr/bin/nvidia-uninstallï¼ˆ3ï¼‰ä¸‹è½½CUDA9.0 ä¸ cuDNN7.0ä¸‹è½½ CUDA Toolkit ç°åœ¨éœ€è¦æ³¨å†Œä¸€ä¸ª NVIDIA å®˜æ–¹è´¦å·ã€‚æ³¨å†Œå®Œæˆååœ¨ https://developer.nvidia.com/cuda-release-candidate-download æŒ‰ç…§ç³»ç»Ÿã€ç‰ˆæœ¬é€‰æ‹©è¦ä¸‹è½½çš„åŒ…ã€‚cuDNN çš„å®‰è£…ç±»ä¼¼ï¼Œåœ°å€åœ¨ https://developer.nvidia.com/rdp/cudnn-download ã€‚ä¸è¿‡å®˜æ–¹æ–‡æ¡£è¡¨ç¤º cuDNN çš„å‡çº§ä¸ä¼šå†²çªï¼Œç›´æ¥å®‰è£…å°±å¥½ã€‚ ï¼ˆ4ï¼‰å®‰è£…CUDA9.0sudo dpkg -i cuda-repo-ubuntu1704-9-0-local-rc_9.0.103-1_amd64.debsudo apt-key add /var/cuda-repo-9-0-local-rc/7fa2af80.pubsudo apt-get updatesudo apt-get install cudaåœ¨è£…æ–° CUDA çš„æ—¶å€™ç³»ç»Ÿä¼šå®‰è£…æ–°ç‰ˆé©±åŠ¨ã€‚ï¼ˆ5ï¼‰å®‰è£…å®Œåè¿è¡Œ nvidia-smi è¯•ä¸€ä¸‹ï¼Œå¦‚æœæç¤º mismatch å°±é‡å¯ã€‚ ï¼ˆ6ï¼‰é…ç½®ç¯å¢ƒå˜é‡$ export PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}$ export LD_LIBRARY_PATH=/usr/local/cuda-9.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}ï¼ˆ7ï¼‰å®‰è£…cuDNN7.0.xdpkg -i libcudnn7_7.0.5.15-1+cuda9.0_amd64.debï¼ˆ8ï¼‰å®‰è£…cuda-command-line-toolsapt-get install cuda-command-line-tools2ã€å®‰è£…tensorflowpip3 install tensorflow-gpu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å®‰è£…æ—¶é‡åˆ°çš„é—®é¢˜"><a href="#å®‰è£…æ—¶é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å®‰è£…æ—¶é‡åˆ°çš„é—®é¢˜"></a>å®‰è£…æ—¶é‡åˆ°çš„é—®é¢˜</h4><ol><li><a href="https://blog.csdn.net/missyoudaisy/article/details/104432746" target="_blank" rel="noopener">nvidia-smiæŠ¥é”™ï¼šNVIDIA-SMI has failed because it couldnâ€™t communicate with the NVIDIA driver._missyoudaisyçš„åšå®¢-CSDNåšå®¢</a></li><li><a href="https://blog.csdn.net/wangyezi19930928/article/details/54928201" target="_blank" rel="noopener">apt-get update ï¼Œupgarde å’Œdist-upgrade çš„åŒºåˆ«_wangyezi19930928çš„ä¸“æ -CSDNåšå®¢</a></li><li><a href="https://askubuntu.com/questions/227258/error-could-not-locate-dkms-conf-file" target="_blank" rel="noopener"><code>Error! Could not locate dkms.conf file</code> - Ask Ubuntu</a></li><li><a href="https://blog.csdn.net/xiaoaid01/article/details/41862487" target="_blank" rel="noopener">æ›´æ–°Linuxå†…æ ¸å¤´æ–‡ä»¶(linux headers)_xiaoaide01çš„ä¸“æ -CSDNåšå®¢</a></li><li><a href="https://www.google.com.hk/search?q=Error!+Your+kernel+headers+for+kernel+4.4.0-210-generic+cannot+be+found&amp;rlz=1C1GCEU_zh-CNCN866CN866&amp;oq=Error!+Your+kernel+headers+for+kernel+4.4.0-210-generic+cannot+be+found&amp;aqs=chrome..69i57.681j0j4&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank" rel="noopener">Error! Your kernel headers for kernel 4.4.0-210-generic cannot be found - Google æœç´¢</a></li><li><a href="https://askubuntu.com/questions/951046/unable-to-install-nvidia-drivers-unable-to-locate-package" target="_blank" rel="noopener">17.04 - Unable to install nvidia drivers - unable to locate package - Ask Ubuntu</a></li><li><a href="https://blog.csdn.net/qq_34168515/article/details/107410732" target="_blank" rel="noopener">UbuntuæŠ¥é”™software-properties-common : Depends: python3-software-properties</a></li><li><a href="https://askubuntu.com/questions/361862/nvidia-drivers-synaptic" target="_blank" rel="noopener">ubuntu-drivers: command not found</a></li><li><a href="https://spring-quan.github.io/2019/03/29/nvidia-smi%E8%BF%94%E5%9B%9E%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E2%80%98Failed-to-initialize-NVML-Driver-library-version-mismatch%E2%80%99/" target="_blank" rel="noopener">nvidia-smiè¿”å›é”™è¯¯ä¿¡æ¯â€˜Failed to initialize NVML: Driver/library version mismatchâ€™</a></li></ol><h1 id="ä¸‰ã€å‚è€ƒä¹¦ç±"><a href="#ä¸‰ã€å‚è€ƒä¹¦ç±" class="headerlink" title="ä¸‰ã€å‚è€ƒä¹¦ç±"></a>ä¸‰ã€å‚è€ƒä¹¦ç±</h1><h1 id="å››ã€ç–‘éš¾è§£ç­”"><a href="#å››ã€ç–‘éš¾è§£ç­”" class="headerlink" title="å››ã€ç–‘éš¾è§£ç­”"></a>å››ã€ç–‘éš¾è§£ç­”</h1><h2 id="1ã€ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™"><a href="#1ã€ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™" class="headerlink" title="1ã€ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™"></a>1ã€ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™</h2><p>ï¼ˆ1ï¼‰è¯­æ³•</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">chmod [-cfvR] [--help] [--version] mode file...<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ï¼ˆ2ï¼‰å‚æ•°è¯´æ˜</p><p><strong>mode :</strong> æƒé™è®¾å®šå­—ä¸²ï¼Œæ ¼å¼å¦‚ä¸‹ :</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">[ugoa...][[+-=][rwxX]...][,...]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å…¶ä¸­ï¼š</strong></p><ul><li>u è¡¨ç¤ºè¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…ï¼Œg è¡¨ç¤ºä¸è¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…å±äºåŒä¸€ä¸ªç¾¤ä½“(group)è€…ï¼Œo è¡¨ç¤ºå…¶ä»–ä»¥å¤–çš„äººï¼Œa è¡¨ç¤ºè¿™ä¸‰è€…çš†æ˜¯ã€‚</li><li>+ è¡¨ç¤ºå¢åŠ æƒé™ã€- è¡¨ç¤ºå–æ¶ˆæƒé™ã€= è¡¨ç¤ºå”¯ä¸€è®¾å®šæƒé™ã€‚</li><li>r è¡¨ç¤ºå¯è¯»å–ï¼Œw è¡¨ç¤ºå¯å†™å…¥ï¼Œx è¡¨ç¤ºå¯æ‰§è¡Œï¼ŒX è¡¨ç¤ºåªæœ‰å½“è¯¥æ–‡ä»¶æ˜¯ä¸ªå­ç›®å½•æˆ–è€…è¯¥æ–‡ä»¶å·²ç»è¢«è®¾å®šè¿‡ä¸ºå¯æ‰§è¡Œã€‚</li></ul><p>ï¼ˆ3ï¼‰å…¶ä»–å‚æ•°è¯´æ˜ï¼š</p><ul><li>-c : è‹¥è¯¥æ–‡ä»¶æƒé™ç¡®å®å·²ç»æ›´æ”¹ï¼Œæ‰æ˜¾ç¤ºå…¶æ›´æ”¹åŠ¨ä½œ</li><li>-f : è‹¥è¯¥æ–‡ä»¶æƒé™æ— æ³•è¢«æ›´æ”¹ä¹Ÿä¸è¦æ˜¾ç¤ºé”™è¯¯è®¯æ¯</li><li>-v : æ˜¾ç¤ºæƒé™å˜æ›´çš„è¯¦ç»†èµ„æ–™</li><li>-R : å¯¹ç›®å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•è¿›è¡Œç›¸åŒçš„æƒé™å˜æ›´(å³ä»¥é€’å›çš„æ–¹å¼é€ä¸ªå˜æ›´)</li><li>â€”help : æ˜¾ç¤ºè¾…åŠ©è¯´æ˜</li><li>â€”version : æ˜¾ç¤ºç‰ˆæœ¬</li></ul><p>ï¼ˆ4ï¼‰å®ä¾‹</p><pre class="line-numbers language-lang-shell"><code class="language-lang-shell"># ç»™ä¸ªäººç›®å½•çš„å…¶ä»–ç”¨æˆ·åˆ é™¤å†™æƒé™ hadoop fs -chmod -R o-w /user/name/dir<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="2ã€vim-æ–‡æœ¬æœç´¢"><a href="#2ã€vim-æ–‡æœ¬æœç´¢" class="headerlink" title="2ã€vim æ–‡æœ¬æœç´¢"></a>2ã€vim æ–‡æœ¬æœç´¢</h2><h3 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h3><ul><li>åœ¨Linuxç¯å¢ƒä¸­ï¼Œä¸€ä¸ªå¤§æ–‡æœ¬ä¸­æœç´¢æŒ‡å®šå­—ç¬¦ä¸²åº”è¯¥æ€ä¹ˆæ“ä½œï¼Ÿ</li></ul><h3 id="è§£å†³ï¼š"><a href="#è§£å†³ï¼š" class="headerlink" title="è§£å†³ï¼š"></a>è§£å†³ï¼š</h3><pre class="line-numbers language-lang-linux"><code class="language-lang-linux">vi my.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>é”®ç›˜æŒ‰<code>Esc</code></li><li>è¾“å…¥<code>/search_string</code></li><li>é”®ç›˜æŒ‰<code>n</code>æˆ–è€…<code>N</code>æ¥è¿›è¡Œå‘å‰æˆ–å‘åæœç´¢</li></ul><h2 id="3ã€æ—¥æœŸå¾ªç¯"><a href="#3ã€æ—¥æœŸå¾ªç¯" class="headerlink" title="3ã€æ—¥æœŸå¾ªç¯"></a>3ã€æ—¥æœŸå¾ªç¯</h2><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">#! /bin/bashstart=20200312end=20200322while [ ${start} -le ${end} ]do  echo ${start}  start=`date -d "1 day ${start}" +%Y%m%d`    # æ—¥æœŸè‡ªå¢done<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å‚è€ƒ<a href="https://sjq597.github.io/2015/11/03/Shell-æŒ‰æ—¥æœŸå¾ªç¯æ‰§è¡Œ/" target="_blank" rel="noopener">æ—¥æœŸå¾ªç¯</a></li></ul><h2 id="4ã€å°†ä»£ç è¾“å‡ºé‡å®šå‘åˆ°logæ–‡ä»¶-ä¸è¦†ç›–çš„å½¢å¼"><a href="#4ã€å°†ä»£ç è¾“å‡ºé‡å®šå‘åˆ°logæ–‡ä»¶-ä¸è¦†ç›–çš„å½¢å¼" class="headerlink" title="4ã€å°†ä»£ç è¾“å‡ºé‡å®šå‘åˆ°logæ–‡ä»¶-ä¸è¦†ç›–çš„å½¢å¼"></a>4ã€å°†ä»£ç è¾“å‡ºé‡å®šå‘åˆ°logæ–‡ä»¶-ä¸è¦†ç›–çš„å½¢å¼</h2><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">0 11 * * * /usr/bin/python3 /home/user/adsp_new/orientation.py >> /home/user/adsp_new/logs1_ori.txt 2>&1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="5ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"><a href="#5ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬" class="headerlink" title="5ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"></a>5ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</h2><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">lsb_release -a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="6ã€æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯"><a href="#6ã€æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯" class="headerlink" title="6ã€æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯"></a>6ã€æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯</h2><pre class="line-numbers language-lang-shell"><code class="language-lang-shell">lspci | grep -i nvidia<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹Java</title>
      <link href="/2019/10/13/shi-yong-gong-ju-zhi-java/"/>
      <url>/2019/10/13/shi-yong-gong-ju-zhi-java/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€JavaåŸºç¡€"><a href="#ä¸€ã€JavaåŸºç¡€" class="headerlink" title="ä¸€ã€JavaåŸºç¡€"></a>ä¸€ã€JavaåŸºç¡€</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h3><ul><li><p><code>JDK</code>ï¼šJava Development Kit</p><p>å¦‚æœåªæœ‰Javaæºç ï¼Œè¦ç¼–è¯‘æˆJavaå­—èŠ‚ç ï¼Œå°±éœ€è¦JDKï¼Œå› ä¸ºJDKé™¤äº†åŒ…å«JREï¼Œè¿˜æä¾›äº†ç¼–è¯‘å™¨JavaCã€è°ƒè¯•å™¨JDBç­‰å¼€å‘å·¥å…·</p></li><li><p><code>JRE</code>ï¼šJava Runtime Environment</p><p>JREå°±æ˜¯è¿è¡ŒJavaå­—èŠ‚ç çš„è™šæ‹Ÿæœº</p></li></ul><ul><li><p><code>IDE</code>ï¼šIntegrated Development Environment </p><p>æµè¡Œçš„æœ‰ï¼šEclipseã€IntelliJ Idea</p></li></ul><h3 id="å®‰è£…JDK"><a href="#å®‰è£…JDK" class="headerlink" title="å®‰è£…JDK"></a>å®‰è£…JDK</h3><ul><li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1280507291631649" target="_blank" rel="noopener">å®‰è£…é“¾æ¥</a></li></ul><h3 id="å®‰è£…IDE"><a href="#å®‰è£…IDE" class="headerlink" title="å®‰è£…IDE"></a>å®‰è£…IDE</h3><ul><li><a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener">IntelliJ Idea</a></li></ul><h2 id="ç¨‹åºåŸºç¡€"><a href="#ç¨‹åºåŸºç¡€" class="headerlink" title="ç¨‹åºåŸºç¡€"></a>ç¨‹åºåŸºç¡€</h2><h3 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h3><p>ï¼ˆ1ï¼‰ä¸€ä¸ªå®Œæ•´çš„Javaç¨‹åºã€‚</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">/** * å¯ä»¥ç”¨æ¥è‡ªåŠ¨åˆ›å»ºæ–‡æ¡£çš„æ³¨é‡Š */public class Hello {    public static void main(String[] args) {        // å‘å±å¹•è¾“å‡ºæ–‡æœ¬:        final double PI = 3.14; // PIæ˜¯ä¸€ä¸ªå¸¸é‡        System.out.println("Hello, world!");        /* å¤šè¡Œæ³¨é‡Šå¼€å§‹        æ³¨é‡Šå†…å®¹        æ³¨é‡Šç»“æŸ */    }} // classå®šä¹‰ç»“æŸ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰ç»“æ„è§£é‡Š</p><ul><li>ä¸€ä¸ªç¨‹åºçš„åŸºæœ¬å•ä½æ˜¯<code>class</code>ã€‚ç±»åè¦æ±‚å¿…é¡»ä»¥è‹±æ–‡å­—æ¯å¼€å¤´ï¼Œåæ¥å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿çš„ç»„åˆï¼Œä¹ æƒ¯ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚</li><li><code>public</code>æ˜¯è®¿é—®ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¯¥classæ˜¯å…¬å¼€çš„ã€‚</li><li><code>main</code>æ˜¯æ–¹æ³•åï¼Œè¿”å›å€¼æ˜¯<code>void</code>ã€‚</li><li>æ¯ä¸€è¡Œè¯­å¥åé¢éƒ½è¦åŠ åˆ†å·<code>;</code>ã€‚</li><li>ä¸€ä¸ªæ–‡ä»¶é¡¶å¤šä¸€ä¸ªpublicç±»ï¼Œä¸”ç±»åä¸æ–‡ä»¶åä¸€è‡´ã€‚</li><li><code>final</code>æ˜¯å¸¸é‡ä¿®é¥°ç¬¦ã€‚</li></ul><h3 id="å˜é‡ç±»å‹"><a href="#å˜é‡ç±»å‹" class="headerlink" title="å˜é‡ç±»å‹"></a>å˜é‡ç±»å‹</h3><p>ï¼ˆ1ï¼‰å˜é‡å®šä¹‰ã€èµ‹å€¼ç¤ºä¾‹ç¨‹åºã€‚</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        int n = 100; // å®šä¹‰å˜é‡nï¼ŒåŒæ—¶èµ‹å€¼ä¸º100        System.out.println("n = " + n); // æ‰“å°nçš„å€¼        n = 200; // å˜é‡nèµ‹å€¼ä¸º200        System.out.println("n = " + n); // æ‰“å°nçš„å€¼        int x = n; // å˜é‡xèµ‹å€¼ä¸ºnï¼ˆnçš„å€¼ä¸º200ï¼Œå› æ­¤èµ‹å€¼åxçš„å€¼ä¹Ÿæ˜¯200ï¼‰        System.out.println("x = " + x); // æ‰“å°xçš„å€¼        x = x + 100; // å˜é‡xèµ‹å€¼ä¸ºx+100ï¼ˆxçš„å€¼ä¸º200ï¼Œå› æ­¤èµ‹å€¼åxçš„å€¼æ˜¯200+100=300ï¼‰        System.out.println("x = " + x); // æ‰“å°xçš„å€¼        System.out.println("n = " + n); // å†æ¬¡æ‰“å°nçš„å€¼ï¼Œnåº”è¯¥æ˜¯200è¿˜æ˜¯300ï¼Ÿ200   }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰åŸºæœ¬ç±»å‹ï¼šå˜é‡æ˜¯â€œæŒæœ‰â€æŸä¸ªæ•°å€¼</p><ul><li><p>æ•´æ•°</p><p>byte(8bit)ã€short(16bit)ã€int(32bit)ã€long(64bit)</p></li><li><p>æµ®ç‚¹æ•°</p><p>float(32bit)ã€double(64bit)</p></li><li><p>å­—ç¬¦</p><p>char(16bit)</p></li><li><p>å¸ƒå°”</p></li></ul><p>ï¼ˆ3ï¼‰å¼•ç”¨ç±»å‹ï¼šå˜é‡æ˜¯â€œæŒ‡å‘â€æŸä¸ªå¯¹è±¡</p><ol><li><p>å­—ç¬¦ä¸²</p><p>String</p></li></ol><h3 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h3><p><strong>æ³¨æ„</strong>ï¼šç”±äºå­˜åœ¨èŒƒå›´é™åˆ¶ï¼Œå¦‚æœè®¡ç®—ç»“æœè¶…å‡ºäº†èŒƒå›´ï¼Œå°±ä¼šäº§ç”Ÿæº¢å‡ºï¼Œè€Œæº¢å‡º<em>ä¸ä¼šå‡ºé”™</em>ï¼Œå´ä¼šå¾—åˆ°ä¸€ä¸ªå¥‡æ€ªçš„ç»“æœ</p><p>ï¼ˆ1ï¼‰æ•´æ•°è¿ç®—</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        int i = (100 + 200) * (99 - 88); // 3300        int n = 7 * (5 + (i - 9)); // 23072        n ++;        n --;        System.out.println(i);        System.out.println(n);    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ³¨æ„</strong>ï¼š<code>++n</code>è¡¨ç¤ºå…ˆåŠ 1å†å¼•ç”¨nï¼Œ<code>n++</code>è¡¨ç¤ºå…ˆå¼•ç”¨nå†åŠ 1ã€‚</p><ul><li>æ•´æ•°è¿ç®—çš„ç»“æœæ°¸è¿œæ˜¯ç²¾ç¡®çš„ï¼›</li><li>è¿ç®—ç»“æœä¼šè‡ªåŠ¨æå‡ï¼›ä¾‹å¦‚ï¼Œ<code>short</code>å’Œ<code>int</code>è®¡ç®—ï¼Œç»“æœæ€»æ˜¯<code>int</code>ï¼ŒåŸå› æ˜¯<code>short</code>é¦–å…ˆè‡ªåŠ¨è¢«è½¬å‹ä¸º<code>int</code>ï¼›</li><li>å¯ä»¥å¼ºåˆ¶è½¬å‹ï¼Œä½†è¶…å‡ºèŒƒå›´çš„å¼ºåˆ¶è½¬å‹ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœï¼›ä¾‹å¦‚ï¼Œå°†<code>int</code>å¼ºåˆ¶è½¬å‹ä¸º<code>short</code>ï¼›</li><li><p>åº”è¯¥é€‰æ‹©åˆé€‚èŒƒå›´çš„æ•´å‹ï¼ˆ<code>int</code>æˆ–<code>long</code>ï¼‰ï¼Œæ²¡æœ‰å¿…è¦ä¸ºäº†èŠ‚çœå†…å­˜è€Œä½¿ç”¨<code>byte</code>å’Œ<code>short</code>è¿›è¡Œæ•´æ•°è¿ç®—ã€‚</p></li><li><p>è¿ç®—ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š</p><ul><li><code>()</code></li><li><code>!</code> <code>~</code> <code>++</code> <code>--</code></li><li><code>*</code> <code>/</code> <code>%</code></li><li><code>+</code> <code>-</code></li><li><code>&lt;&lt;</code> <code>&gt;&gt;</code> <code>&gt;&gt;&gt;</code></li><li><code>&amp;</code> ï¼šä¸è¿ç®—ï¼Œæ˜¯ä½è¿ç®—</li><li><code>|</code> ï¼šæˆ–è¿ç®—</li><li><code>+=</code> <code>-=</code> <code>*=</code> <code>/=</code></li></ul></li></ul><p>ï¼ˆ2ï¼‰æµ®ç‚¹æ•°è¿ç®—</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">// æµ®ç‚¹æ•°è¯¯å·®public class Main {    public static void main(String[] args) {        double x = 1.0 / 10;        double y = 1 - 9.0 / 10;        // è§‚å¯Ÿxå’Œyæ˜¯å¦ç›¸ç­‰:        System.out.println(x);        System.out.println(y);    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æµ®ç‚¹æ•°å¸¸å¸¸æ— æ³•ç²¾ç¡®è¡¨ç¤ºï¼Œå¹¶ä¸”æµ®ç‚¹æ•°çš„è¿ç®—ç»“æœå¯èƒ½æœ‰è¯¯å·®ï¼›</li><li>æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°é€šå¸¸æ¯”è¾ƒå®ƒä»¬çš„ç»å¯¹å€¼ä¹‹å·®æ˜¯å¦å°äºä¸€ä¸ªç‰¹å®šå€¼ï¼›</li><li>æ•´å‹å’Œæµ®ç‚¹å‹è¿ç®—æ—¶ï¼Œæ•´å‹ä¼šè‡ªåŠ¨æå‡ä¸ºæµ®ç‚¹å‹ï¼›</li><li>å¯ä»¥å°†æµ®ç‚¹å‹å¼ºåˆ¶è½¬ä¸ºæ•´å‹ï¼Œä½†è¶…å‡ºèŒƒå›´åå°†å§‹ç»ˆè¿”å›æ•´å‹çš„æœ€å¤§å€¼ã€‚</li><li>æµ®ç‚¹æ•°è¿ç®—å’Œæ•´æ•°è¿ç®—ç›¸æ¯”ï¼Œåªèƒ½è¿›è¡ŒåŠ å‡ä¹˜é™¤è¿™äº›æ•°å€¼è®¡ç®—ï¼Œä¸èƒ½åšä½è¿ç®—å’Œç§»ä½è¿ç®—ã€‚</li></ul><p>ï¼ˆ3ï¼‰å¸ƒå°”è¿ç®—</p><ul><li><p>å…³ç³»è¿ç®—ç¬¦ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š</p><ul><li><code>!</code></li><li><code>&gt;</code>ï¼Œ<code>&gt;=</code>ï¼Œ<code>&lt;</code>ï¼Œ<code>&lt;=</code></li><li><code>==</code>ï¼Œ<code>!=</code></li><li><code>&amp;&amp;</code></li><li><code>||</code></li></ul></li><li><p>çŸ­è·¯è¿ç®—ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        boolean b = 5 < 3;        boolean result = b && (5 / 0 > 0);        System.out.println(result);    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å› ä¸º<code>false &amp;&amp; x</code>çš„ç»“æœæ€»æ˜¯<code>false</code>ï¼Œæ— è®º<code>x</code>æ˜¯<code>true</code>è¿˜æ˜¯<code>false</code>ï¼Œå› æ­¤ï¼Œä¸è¿ç®—åœ¨ç¡®å®šç¬¬ä¸€ä¸ªå€¼ä¸º<code>false</code>åï¼Œä¸å†ç»§ç»­è®¡ç®—ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›<code>false</code>ã€‚</li><li>å¦‚æœæ²¡æœ‰çŸ­è·¯è¿ç®—ï¼Œ<code>&amp;&amp;</code>åé¢çš„è¡¨è¾¾å¼ä¼šç”±äºé™¤æ•°ä¸º<code>0</code>è€ŒæŠ¥é”™ï¼Œä½†å®é™…ä¸Šè¯¥è¯­å¥å¹¶æœªæŠ¥é”™ï¼ŒåŸå› åœ¨äºä¸è¿ç®—æ˜¯çŸ­è·¯è¿ç®—ç¬¦ï¼Œæå‰è®¡ç®—å‡ºäº†ç»“æœ<code>false</code>ã€‚</li></ul></li><li><p>ä¸‰å…ƒè¿ç®—ç¬¦</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        int n = -100;        int x = n >= 0 ? n : -n;        System.out.println(x);    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="å­—ç¬¦å’Œå­—ç¬¦ä¸²"><a href="#å­—ç¬¦å’Œå­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦å’Œå­—ç¬¦ä¸²"></a>å­—ç¬¦å’Œå­—ç¬¦ä¸²</h3><ul><li><p>Javaçš„å­—ç¬¦ç±»å‹<code>char</code>æ˜¯åŸºæœ¬ç±»å‹ï¼Œå­—ç¬¦ä¸²ç±»å‹<code>String</code>æ˜¯å¼•ç”¨ç±»å‹ï¼›</p></li><li><p>åŸºæœ¬ç±»å‹çš„å˜é‡æ˜¯â€œæŒæœ‰â€æŸä¸ªæ•°å€¼ï¼Œå¼•ç”¨ç±»å‹çš„å˜é‡æ˜¯â€œæŒ‡å‘â€æŸä¸ªå¯¹è±¡ï¼›</p></li><li><p>å¼•ç”¨ç±»å‹çš„å˜é‡å¯ä»¥æ˜¯ç©ºå€¼<code>null</code>ï¼›</p></li><li><p>è¦åŒºåˆ†ç©ºå€¼<code>null</code>å’Œç©ºå­—ç¬¦ä¸²<code>&quot;&quot;</code>ã€‚</p></li><li><p>å¯ä»¥ä½¿ç”¨<code>+</code>è¿æ¥ä»»æ„å­—ç¬¦ä¸²å’Œå…¶ä»–æ•°æ®ç±»å‹ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        int age = 25;        String s = "age is " + age;        System.out.println(s);    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å­—ç¬¦ä¸²ä¸å¯å˜ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        String s = "hello";        String t = s;        s = "world";        System.out.println(t); // tæ˜¯"hello"è¿˜æ˜¯"world"? "hello"    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="æ•°ç»„ç±»å‹å’Œæ“ä½œ"><a href="#æ•°ç»„ç±»å‹å’Œæ“ä½œ" class="headerlink" title="æ•°ç»„ç±»å‹å’Œæ“ä½œ"></a>æ•°ç»„ç±»å‹å’Œæ“ä½œ</h3><ul><li><p>æ•°ç»„ç±»å‹ï¼Œæ•°ç»„æ˜¯å¼•ç”¨ç±»å‹</p><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œçš„<code>s</code>æŒ‡å‘äº†<code>name[1]</code>ä¹‹åï¼Œå³å°†<code>s</code>æŒ‡å‘äº†<code>&quot;XYZ&quot;</code>ï¼Œè¿™ä¸ªæ˜¯ä¸å˜çš„å­—ç¬¦ä¸²å¸¸é‡</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        String[] names = {"ABC", "XYZ", "zoo"};        String s = names[1];        names[1] = "cat";        System.out.println(s); // sæ˜¯"XYZ"è¿˜æ˜¯"cat"?  "XYZ"     }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ•°ç»„å…ƒç´ å¯ä»¥æ˜¯å€¼ç±»å‹ï¼ˆå¦‚intï¼‰æˆ–å¼•ç”¨ç±»å‹ï¼ˆå¦‚Stringï¼‰ï¼Œä½†æ•°ç»„æœ¬èº«æ˜¯å¼•ç”¨ç±»å‹ï¼›</li><li>æ•°ç»„æ˜¯åŒä¸€æ•°æ®ç±»å‹çš„é›†åˆï¼Œæ•°ç»„ä¸€æ—¦åˆ›å»ºåï¼Œå¤§å°å°±ä¸å¯å˜ï¼›</li><li>å¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®æ•°ç»„å…ƒç´ ï¼Œä½†ç´¢å¼•è¶…å‡ºèŒƒå›´å°†æŠ¥é”™ï¼›</li></ul></li><li><p>æ•°ç»„æ“ä½œ</p><ul><li><p>éå†æ•°ç»„</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">for (int n : ns)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-java"><code class="language-lang-java">for (int i=0; i<ns.length; i++)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-java"><code class="language-lang-java">import Java.util.Arrays;int[] ns = { 1, 1, 2, 3, 5, 8 };System.out.println(Arrays.toString(ns));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>æ•°ç»„æ’åº</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">import Java.util.Arrays;int[] ns = { 28, 12, 89, 73, 65};Arrays.sort(ns); //æ­£åº<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>å¤šç»´æ•°ç»„</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">import Java.util.Arrays;int[][] ns = {            { 1, 2, 3, 4 },            { 5, 6, 7, 8 },            { 9, 10, 11, 12 }        };System.out.println(Arrays.deepToString(ns));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><h3 id="è¾“å…¥ä¸è¾“å‡º"><a href="#è¾“å…¥ä¸è¾“å‡º" class="headerlink" title="è¾“å…¥ä¸è¾“å‡º"></a>è¾“å…¥ä¸è¾“å‡º</h3><ul><li><p>è¾“å‡ºï¼š<code>System.out.println(&quot;END&quot;);</code></p></li><li><p>æ ¼å¼åŒ–è¾“å‡ºï¼š<code>System.out.printf(&quot;%.4f\n&quot;, d);</code></p></li><li><p>å ä½ç¬¦åŠè¯´æ˜</p><p>| å ä½ç¬¦ | è¯´æ˜                             |<br>| :â€”â€”- | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- |<br>| %d     | æ ¼å¼åŒ–è¾“å‡ºæ•´æ•°                   |<br>| %x     | æ ¼å¼åŒ–è¾“å‡ºåå…­è¿›åˆ¶æ•´æ•°           |<br>| %f     | æ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°                 |<br>| %e     | æ ¼å¼åŒ–è¾“å‡ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºçš„æµ®ç‚¹æ•° |<br>| %s     | æ ¼å¼åŒ–å­—ç¬¦ä¸²                     |</p></li><li><p>è¾“å…¥ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">import Java.util.Scanner;public class Main {    public static void main(String[] args) {        Scanner scanner = new Scanner(System.in); // åˆ›å»ºScannerå¯¹è±¡        System.out.print("Input your name: "); // æ‰“å°æç¤º        String name = scanner.nextLine(); // è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–å­—ç¬¦ä¸²        System.out.print("Input your age: "); // æ‰“å°æç¤º        int age = scanner.nextInt(); // è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–æ•´æ•°        System.out.printf("Hi, %s, you are %d\n", name, age); // æ ¼å¼åŒ–è¾“å‡º    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="IFåˆ¤æ–­"><a href="#IFåˆ¤æ–­" class="headerlink" title="IFåˆ¤æ–­"></a>IFåˆ¤æ–­</h3><ul><li><p><code>if</code>åŸºæœ¬è¯­æ³•ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">if (æ¡ä»¶) {    // æ¡ä»¶æ»¡è¶³æ—¶æ‰§è¡Œ} else if (æ¡ä»¶) {    // } else {    //}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åˆ¤æ–­æµ®ç‚¹æ•°ç›¸ç­‰æ—¶åˆ©ç”¨å·®å€¼å°äºæŸä¸ªä¸´ç•Œå€¼æ¥åˆ¤æ–­ï¼š<code>Math.abs(a-b)&lt;0.00001</code></li><li>åˆ¤æ–­å¼•ç”¨ç±»å‹çš„å˜é‡å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œå¿…é¡»ä½¿ç”¨<code>equals()</code>æ–¹æ³•ï¼š<code>s1.equals(s2)</code></li></ul></li></ul><h3 id="SWITCHå¤šé‡é€‰æ‹©"><a href="#SWITCHå¤šé‡é€‰æ‹©" class="headerlink" title="SWITCHå¤šé‡é€‰æ‹©"></a>SWITCHå¤šé‡é€‰æ‹©</h3><ul><li><p><code>switch</code>è¯­å¥å¯ä»¥åšå¤šé‡é€‰æ‹©ï¼Œç„¶åæ‰§è¡ŒåŒ¹é…çš„<code>case</code>è¯­å¥åç»­ä»£ç ï¼›<code>switch</code>çš„è®¡ç®—ç»“æœå¿…é¡»æ˜¯æ•´å‹ã€å­—ç¬¦ä¸²æˆ–æšä¸¾ç±»å‹ï¼›æ³¨æ„åƒä¸‡ä¸è¦æ¼å†™<code>break</code>ï¼Œå»ºè®®æ‰“å¼€<code>fall-through</code>è­¦å‘Šï¼›æ€»æ˜¯å†™ä¸Š<code>default</code>ï¼Œå»ºè®®æ‰“å¼€<code>missing default</code>è­¦å‘Šï¼›<strong>ä»Java 13å¼€å§‹ï¼Œ<code>switch</code>è¯­å¥å‡çº§ä¸ºè¡¨è¾¾å¼ï¼Œä¸å†éœ€è¦<code>break</code>ï¼Œå¹¶ä¸”å…è®¸ä½¿ç”¨<code>yield</code>è¿”å›å€¼ã€‚</strong></p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        int option = 1;        switch (option) {        case 1:            System.out.println("Selected 1");            break;        case 2:            System.out.println("Selected 2");            break;        default:            System.out.println("Selected 3");            break;        }    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="WHILEå¾ªç¯"><a href="#WHILEå¾ªç¯" class="headerlink" title="WHILEå¾ªç¯"></a>WHILEå¾ªç¯</h3><ul><li><p><code>while</code>åŸºæœ¬è¯­æ³•ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">while (æ¡ä»¶è¡¨è¾¾å¼) {    å¾ªç¯è¯­å¥}// ç»§ç»­æ‰§è¡Œåç»­ä»£ç <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>do while</code>åŸºæœ¬è¯­æ³•ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">do {    æ‰§è¡Œå¾ªç¯è¯­å¥} while (æ¡ä»¶è¡¨è¾¾å¼);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="FORå¾ªç¯"><a href="#FORå¾ªç¯" class="headerlink" title="FORå¾ªç¯"></a>FORå¾ªç¯</h3><ul><li><p><code>for</code>å¾ªç¯åŸºæœ¬è¯­æ³•ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">for (åˆå§‹æ¡ä»¶; å¾ªç¯æ£€æµ‹æ¡ä»¶; å¾ªç¯åæ›´æ–°è®¡æ•°å™¨) {    // æ‰§è¡Œè¯­å¥}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="BREAK-AND-CONTINUE"><a href="#BREAK-AND-CONTINUE" class="headerlink" title="BREAK AND CONTINUE"></a>BREAK AND CONTINUE</h3><ul><li><code>break</code>ï¼šåœ¨å¾ªç¯è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>break</code>è¯­å¥è·³å‡ºå½“å‰å¾ªç¯</li><li><code>continue</code>ï¼šå‰ç»“æŸæœ¬æ¬¡å¾ªç¯ï¼Œç›´æ¥ç»§ç»­æ‰§è¡Œä¸‹æ¬¡å¾ªç¯ã€‚</li></ul><h1 id="äºŒã€Javaè¿›é˜¶"><a href="#äºŒã€Javaè¿›é˜¶" class="headerlink" title="äºŒã€Javaè¿›é˜¶"></a>äºŒã€Javaè¿›é˜¶</h1><h2 id="é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€"><a href="#é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€" class="headerlink" title="é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€"></a>é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€</h2><h3 id="ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ</h3><ul><li><p>ç®€å•æ¥è¯´ï¼Œäººå°±æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œå°†äººèº«é«˜ã€å¹´é¾„ç­‰ç‰¹å¾å°è£…åˆ°äººè¿™ä¸ªå¯¹è±¡é‡Œï¼Œå®šä¹‰äººè¿™ä¸ªç±»ã€‚å…·ä½“åˆ°å°æ˜ã€å°èŠ³è¿™äº›äººå°±è¢«ç§°ä¸º<strong>å®ä¾‹</strong>ã€‚</p></li><li><p>å®šä¹‰å¯¹è±¡</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">class Person {    public String name;    public int age;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>åˆ›å»ºå®ä¾‹</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">Person ming = new Person();ming.name = "Xiao Ming";<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>æŒ‡å‘å®ä¾‹çš„å˜é‡<code>ming</code>æ˜¯å¼•ç”¨å˜é‡</li></ul></li></ul><h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><ul><li><p>æ–¹æ³•ï¼ˆ<code>method</code>ï¼‰å¯ä»¥è®©å¤–éƒ¨ä»£ç å®‰å…¨åœ°è®¿é—®å®ä¾‹å­—æ®µï¼ˆ<code>filed</code>ï¼‰ï¼›</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        Person ming = new Person();        ming.setName("Xiao Ming"); // è®¾ç½®name        System.out.println(ming.getName());    }}class Person {    private String name;    public String getName() {        return this.name;    }    public void setName(String name) {        this.name = name;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ–¹æ³•æ˜¯ä¸€ç»„æ‰§è¡Œè¯­å¥ï¼Œå¹¶ä¸”å¯ä»¥æ‰§è¡Œä»»æ„é€»è¾‘ï¼›</p></li><li><p>æ–¹æ³•å†…éƒ¨é‡åˆ°returnæ—¶è¿”å›ï¼Œvoidè¡¨ç¤ºä¸è¿”å›ä»»ä½•å€¼ï¼ˆæ³¨æ„å’Œè¿”å›nullä¸åŒï¼‰ï¼›</p></li><li><p>å¤–éƒ¨ä»£ç é€šè¿‡publicæ–¹æ³•æ“ä½œå®ä¾‹ï¼Œå†…éƒ¨ä»£ç å¯ä»¥è°ƒç”¨privateæ–¹æ³•ï¼›å…¶ä¸­<code>this</code>å˜é‡æ˜¯ä¸€ä¸ªéšå«å˜é‡ï¼Œé€šè¿‡<code>this.field</code>å°±å¯ä»¥è®¿é—®å½“å‰å®ä¾‹çš„å­—æ®µã€‚</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">class Person {    private String name;    private int birth;    public void setBirth(int birth) {        this.birth = birth;    }    public int getAge() {        return calcAge(2019); // è°ƒç”¨privateæ–¹æ³•    }    // privateæ–¹æ³•:    private int calcAge(int currentYear) {        return currentYear - this.birth;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç†è§£æ–¹æ³•çš„å‚æ•°ç»‘å®šã€‚</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">// åŸºæœ¬ç±»å‹å‚æ•°ç»‘å®špublic class Main {    public static void main(String[] args) {        Person p = new Person();        int n = 15; // nçš„å€¼ä¸º15        p.setAge(n); // ä¼ å…¥nçš„å€¼        System.out.println(p.getAge()); // 15        n = 20; // nçš„å€¼æ”¹ä¸º20        System.out.println(p.getAge()); // 15è¿˜æ˜¯20?  15    }}class Person {    private int age;    public int getAge() {        return this.age;    }    public void setAge(int age) {        this.age = age;    }}// å¼•ç”¨ç±»å‹å‚æ•°ç»‘å®špublic class Main {    public static void main(String[] args) {        Person p = new Person();        String[] fullname = new String[] { "Homer", "Simpson" };        p.setName(fullname); // ä¼ å…¥fullnameæ•°ç»„        System.out.println(p.getName()); // "Homer Simpson"        fullname[0] = "Bart"; // fullnameæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¿®æ”¹ä¸º"Bart"        System.out.println(p.getName()); // "Homer Simpson"è¿˜æ˜¯"Bart Simpson"?  Bart Simpson    }}class Person {    private String[] name;    public String getName() {        return this.name[0] + " " + this.name[1];    }    public void setName(String[] name) {        this.name = name;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åŸºæœ¬ç±»å‹å‚æ•°çš„ä¼ é€’ï¼Œæ˜¯è°ƒç”¨æ–¹å€¼çš„å¤åˆ¶ã€‚åŒæ–¹å„è‡ªçš„åç»­ä¿®æ”¹ï¼Œäº’ä¸å½±å“ã€‚</li><li>å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’ï¼Œè°ƒç”¨æ–¹çš„å˜é‡ï¼Œå’Œæ¥æ”¶æ–¹çš„å‚æ•°å˜é‡ï¼ŒæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚åŒæ–¹ä»»æ„ä¸€æ–¹å¯¹è¿™ä¸ªå¯¹è±¡çš„ä¿®æ”¹ï¼Œéƒ½ä¼šå½±å“å¯¹æ–¹ï¼ˆå› ä¸ºæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡å˜›ï¼‰ã€‚</li></ul></li></ul><h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><ul><li><p>ç”±äºæ„é€ æ–¹æ³•æ˜¯å¦‚æ­¤ç‰¹æ®Šï¼Œæ‰€ä»¥æ„é€ æ–¹æ³•çš„åç§°å°±æ˜¯ç±»åã€‚æ„é€ æ–¹æ³•çš„å‚æ•°æ²¡æœ‰é™åˆ¶ï¼Œåœ¨æ–¹æ³•å†…éƒ¨ï¼Œä¹Ÿå¯ä»¥ç¼–å†™ä»»æ„è¯­å¥ã€‚ä½†æ˜¯ï¼Œå’Œæ™®é€šæ–¹æ³•ç›¸æ¯”ï¼Œæ„é€ æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼ˆä¹Ÿæ²¡æœ‰<code>void</code>ï¼‰ï¼Œè°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå¿…é¡»ç”¨<code>new</code>æ“ä½œç¬¦ã€‚</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        Person p = new Person("Xiao Ming", 15);        System.out.println(p.getName());        System.out.println(p.getAge());    }}class Person {    private String name;    private int age;    // æ„é€ æ–¹æ³•    public Person(String name, int age) {        this.name = name;        this.age = age;    }    public String getName() {        return this.name;    }    public int getAge() {        return this.age;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®šä¹‰æ„é€ æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªé»˜è®¤æ„é€ æ–¹æ³•ï¼Œå®ƒæ²¡æœ‰å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰æ‰§è¡Œè¯­å¥</p></li><li><p>å¦‚æœæ—¢è¦èƒ½ä½¿ç”¨å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œåˆæƒ³ä¿ç•™ä¸å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆåªèƒ½æŠŠä¸¤ä¸ªæ„é€ æ–¹æ³•éƒ½å®šä¹‰å‡ºæ¥ï¼š</p></li><li><p>æ—¢å¯¹å­—æ®µè¿›è¡Œåˆå§‹åŒ–ï¼Œåˆåœ¨æ„é€ æ–¹æ³•ä¸­å¯¹å­—æ®µè¿›è¡Œåˆå§‹åŒ–ï¼š</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">class Person {    private String name = "Unamed";    private int age = 10;    public Person(String name, int age) {        this.name = name;        this.age = age;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>å¤šæ„é€ æ–¹æ³•</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">class Person {    private String name;    private int age;    public Person(String name, int age) {        this.name = name;        this.age = age;    }    public Person(String name) {        this.name = name;        this.age = 12;    }    public Person() {    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>åœ¨é€šè¿‡<code>new</code>æ“ä½œç¬¦è°ƒç”¨çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨é€šè¿‡æ„é€ æ–¹æ³•çš„å‚æ•°æ•°é‡ã€ä½ç½®å’Œç±»å‹è‡ªåŠ¨åŒºåˆ†</p></li><li><p>ä¸€ä¸ªæ„é€ æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¾¿äºä»£ç å¤ç”¨ã€‚è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•çš„è¯­æ³•æ˜¯<code>this(â€¦)</code></p><pre class="line-numbers language-lang-java"><code class="language-lang-java">class Person {    private String name;    private int age;    public Person(String name, int age) {        this.name = name;        this.age = age;    }    public Person(String name) {        this(name, 18); // è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String, int)    }    public Person() {        this("Unnamed"); // è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String)    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h3 id="æ–¹æ³•é‡è½½"><a href="#æ–¹æ³•é‡è½½" class="headerlink" title="æ–¹æ³•é‡è½½"></a>æ–¹æ³•é‡è½½</h3><ul><li><p>è¿™ç§æ–¹æ³•åç›¸åŒï¼Œä½†å„è‡ªçš„å‚æ•°ä¸åŒï¼Œç§°ä¸ºæ–¹æ³•é‡è½½ï¼ˆ<code>Overload</code>ï¼‰ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šæ–¹æ³•é‡è½½çš„è¿”å›å€¼ç±»å‹é€šå¸¸éƒ½æ˜¯ç›¸åŒçš„ã€‚</p></li><li><p>é‡è½½æ–¹æ³•åº”è¯¥å®Œæˆç±»ä¼¼çš„åŠŸèƒ½ï¼Œå‚è€ƒ<code>String</code>çš„<code>indexOf()</code>ï¼›</p></li></ul><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><ul><li><p>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­éå¸¸å¼ºå¤§çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒé¦–å…ˆå¯ä»¥å¤ç”¨ä»£ç ã€‚å½“æˆ‘ä»¬è®©<code>Student</code>ä»<code>Person</code>ç»§æ‰¿æ—¶ï¼Œ<code>Student</code>å°±è·å¾—äº†<code>Person</code>çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸º<code>Student</code>ç¼–å†™æ–°å¢çš„åŠŸèƒ½ã€‚</p><p>Javaä½¿ç”¨<code>extends</code>å…³é”®å­—æ¥å®ç°ç»§æ‰¿ï¼š</p><p><strong>æ³¨æ„</strong>ï¼šä¸€å®šè¦åŠ <code>super</code>è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•</p><pre class="line-numbers language-lang-java"><code class="language-lang-java">public class Main {    public static void main(String[] args) {        Student s = new Student("Xiao Ming", 12, 89);    }}class Person {    protected String name;    protected int age;    public Person(String name, int age) {        this.name = name;        this.age = age;    }}// ç»§æ‰¿Personclass Student extends Person {    protected int score;    public Student(String name, int age, int score) {        super(name, age); // è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•Person(String, int)        this.score = score;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="Javaæ ¸å¿ƒç±»"><a href="#Javaæ ¸å¿ƒç±»" class="headerlink" title="Javaæ ¸å¿ƒç±»"></a>Javaæ ¸å¿ƒç±»</h2><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><h2 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h2><h1 id="ä¸‰ã€å‚è€ƒä¹¦ç±"><a href="#ä¸‰ã€å‚è€ƒä¹¦ç±" class="headerlink" title="ä¸‰ã€å‚è€ƒä¹¦ç±"></a>ä¸‰ã€å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744" target="_blank" rel="noopener">å»–å¤§ç¥</a></li></ul><h1 id="å››ã€ç–‘éš¾è§£ç­”"><a href="#å››ã€ç–‘éš¾è§£ç­”" class="headerlink" title="å››ã€ç–‘éš¾è§£ç­”"></a>å››ã€ç–‘éš¾è§£ç­”</h1><h2 id="1ã€ä½¿ç”¨IntelliJ-IDEA-é…ç½®Maven"><a href="#1ã€ä½¿ç”¨IntelliJ-IDEA-é…ç½®Maven" class="headerlink" title="1ã€ä½¿ç”¨IntelliJ IDEA é…ç½®Maven"></a>1ã€ä½¿ç”¨IntelliJ IDEA é…ç½®Maven</h2><ul><li><a href="https://blog.csdn.net/qq_32588349/article/details/51461182" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><h2 id="2ã€Intellij-IDEA-æ‰“åŒ…jarçš„å¤šç§æ–¹å¼"><a href="#2ã€Intellij-IDEA-æ‰“åŒ…jarçš„å¤šç§æ–¹å¼" class="headerlink" title="2ã€Intellij IDEA æ‰“åŒ…jarçš„å¤šç§æ–¹å¼"></a>2ã€Intellij IDEA æ‰“åŒ…jarçš„å¤šç§æ–¹å¼</h2><ul><li><a href="https://blog.csdn.net/Thousa_Ho/article/details/72799871" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><h2 id="3ã€finalå…³é”®å­—è§£é‡Š"><a href="#3ã€finalå…³é”®å­—è§£é‡Š" class="headerlink" title="3ã€finalå…³é”®å­—è§£é‡Š"></a>3ã€finalå…³é”®å­—è§£é‡Š</h2><ul><li><p><a href="https://www.cnblogs.com/dolphin0520/p/3736238.html" target="_blank" rel="noopener">å‚è€ƒ</a></p></li><li><p>ç±»ï¼šå½“ç”¨finalä¿®é¥°ä¸€ä¸ªç±»æ—¶ï¼Œè¡¨æ˜è¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚</p></li><li><p>æ–¹æ³•ï¼šä½¿ç”¨finalæ–¹æ³•çš„åŸå› æœ‰ä¸¤ä¸ªã€‚ç¬¬ä¸€ä¸ªåŸå› æ˜¯æŠŠæ–¹æ³•é”å®šï¼Œä»¥é˜²ä»»ä½•ç»§æ‰¿ç±»ä¿®æ”¹å®ƒçš„å«ä¹‰ï¼›ç¬¬äºŒä¸ªåŸå› æ˜¯æ•ˆç‡ã€‚åœ¨æ—©æœŸçš„Javaå®ç°ç‰ˆæœ¬ä¸­ï¼Œä¼šå°†finalæ–¹æ³•è½¬ä¸ºå†…åµŒè°ƒç”¨ã€‚ä½†æ˜¯å¦‚æœæ–¹æ³•è¿‡äºåºå¤§ï¼Œå¯èƒ½çœ‹ä¸åˆ°å†…åµŒè°ƒç”¨å¸¦æ¥çš„ä»»ä½•æ€§èƒ½æå‡ã€‚åœ¨æœ€è¿‘çš„Javaç‰ˆæœ¬ä¸­ï¼Œä¸éœ€è¦ä½¿ç”¨finalæ–¹æ³•è¿›è¡Œè¿™äº›ä¼˜åŒ–äº†ã€‚</p></li><li><p>å˜é‡ï¼šå¯¹äºä¸€ä¸ªfinalå˜é‡ï¼Œå¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œåˆ™å…¶æ•°å€¼ä¸€æ—¦åœ¨åˆå§‹åŒ–ä¹‹åä¾¿ä¸èƒ½æ›´æ”¹ï¼›å¦‚æœæ˜¯å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œåˆ™åœ¨å¯¹å…¶åˆå§‹åŒ–ä¹‹åä¾¿ä¸èƒ½å†è®©å…¶æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡</p></li></ul><h2 id="4ã€ä¸€è¡Œä»£ç åˆ¤æ–­Stringå­—ç¬¦ä¸²æ˜¯å¦ä¸ºçº¯ç¬¦å·"><a href="#4ã€ä¸€è¡Œä»£ç åˆ¤æ–­Stringå­—ç¬¦ä¸²æ˜¯å¦ä¸ºçº¯ç¬¦å·" class="headerlink" title="4ã€ä¸€è¡Œä»£ç åˆ¤æ–­Stringå­—ç¬¦ä¸²æ˜¯å¦ä¸ºçº¯ç¬¦å·"></a>4ã€ä¸€è¡Œä»£ç åˆ¤æ–­Stringå­—ç¬¦ä¸²æ˜¯å¦ä¸ºçº¯ç¬¦å·</h2><ul><li><a href="https://blog.csdn.net/qq_39731011/article/details/85159476" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><pre class="line-numbers language-lang-java"><code class="language-lang-java">if (term.trim().replaceAll("\\p{P}", "").length() == 0){                    continue;                }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> ç¼–ç¨‹è¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç”¨å·¥å…·ä¹‹hive</title>
      <link href="/2019/10/12/shi-yong-gong-ju-zhi-hive/"/>
      <url>/2019/10/12/shi-yong-gong-ju-zhi-hive/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/10/12/shi-yong-gong-ju-zhi-hive/image-20210621150214191.png" alt="image-20210621150214191"></p><h1 id="ä¸€ã€HiveåŸºç¡€"><a href="#ä¸€ã€HiveåŸºç¡€" class="headerlink" title="ä¸€ã€HiveåŸºç¡€"></a>ä¸€ã€HiveåŸºç¡€</h1><h2 id="1ã€Hiveæ•°æ®ç±»å‹"><a href="#1ã€Hiveæ•°æ®ç±»å‹" class="headerlink" title="1ã€Hiveæ•°æ®ç±»å‹"></a>1ã€Hiveæ•°æ®ç±»å‹</h2><p>ï¼ˆ1ï¼‰åŸå§‹ç±»å‹</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">æè¿°</th><th style="text-align:center">ç¤ºä¾‹</th></tr></thead><tbody><tr><td style="text-align:center"><code>Boolean</code></td><td style="text-align:center"><code>true</code>ã€<code>false</code></td><td style="text-align:center"><code>TRUE</code></td></tr><tr><td style="text-align:center"><code>TINYINT</code></td><td style="text-align:center">-128~127</td><td style="text-align:center"><code>1Y</code></td></tr><tr><td style="text-align:center"><code>SMALLINT</code></td><td style="text-align:center">-32768~32767</td><td style="text-align:center"><code>1S</code></td></tr><tr><td style="text-align:center"><code>INT</code></td><td style="text-align:center">4ä¸ªå­—èŠ‚çš„å¸¦ç¬¦å·æ•´æ•°</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center"><code>BIGINT</code></td><td style="text-align:center">8å­—èŠ‚å¸¦ç¬¦å·æ•´æ•°</td><td style="text-align:center"><code>1L</code></td></tr><tr><td style="text-align:center"><code>FLOAT</code></td><td style="text-align:center">4å­—èŠ‚å•ç²¾åº¦æµ®ç‚¹æ•°</td><td style="text-align:center">1.0</td></tr><tr><td style="text-align:center"><code>DOUBLE</code></td><td style="text-align:center">8å­—èŠ‚åŒç²¾åº¦æµ®ç‚¹æ•°</td><td style="text-align:center">1.0</td></tr><tr><td style="text-align:center"><code>DECIMAL</code></td><td style="text-align:center">ä»»æ„ç²¾åº¦çš„å¸¦ç¬¦å·å°æ•°</td><td style="text-align:center">1.0</td></tr><tr><td style="text-align:center"><code>STRING</code></td><td style="text-align:center">å­—ç¬¦ä¸²</td><td style="text-align:center"><code>â€˜ABCâ€™</code></td></tr><tr><td style="text-align:center"><code>VARCHAR</code></td><td style="text-align:center">é•¿å­—ç¬¦ä¸²</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><code>CHAR</code></td><td style="text-align:center">å›ºå®šé•¿åº¦å­—ç¬¦ä¸²</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><code>BINARY</code></td><td style="text-align:center">å­—èŠ‚æ•°ç»„</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><code>TIMESTAMP</code></td><td style="text-align:center">æ—¶é—´æˆ³ï¼Œçº³ç§’ç²¾åº¦</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><code>DATE</code></td><td style="text-align:center">æ—¥æœŸ</td><td style="text-align:center"><code>2019-10-08</code></td></tr></tbody></table></div><p>ï¼ˆ2ï¼‰å¤æ‚ç±»å‹</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">æè¿°</th><th style="text-align:center">ç¤ºä¾‹</th></tr></thead><tbody><tr><td style="text-align:center"><code>ARRAY</code></td><td style="text-align:center">æœ‰åºçš„çš„åŒç±»å‹çš„é›†åˆ</td><td style="text-align:center"><code>array(1,2)</code></td></tr><tr><td style="text-align:center"><code>MAP</code></td><td style="text-align:center">key-value<br>keyå¿…é¡»ä¸ºåŸå§‹ç±»å‹ï¼Œvalueå¯ä»¥ä»»æ„ç±»å‹</td><td style="text-align:center"><code>map(â€˜aâ€™,1,â€™bâ€™,2)</code></td></tr><tr><td style="text-align:center"><code>UNION</code></td><td style="text-align:center">åœ¨æœ‰é™å–å€¼èŒƒå›´å†…çš„ä¸€ä¸ªå€¼</td><td style="text-align:center"><code>create_union(1,â€™aâ€™,63)</code></td></tr><tr><td style="text-align:center"><code>STRUCT</code></td><td style="text-align:center">å­—æ®µé›†åˆ,ç±»å‹å¯ä»¥ä¸åŒ</td><td style="text-align:center"><code>struct(â€˜1â€™,1,1.0)</code></td></tr></tbody></table></div><h2 id="2ã€Hiveæ•°æ®åº“æ“ä½œ"><a href="#2ã€Hiveæ•°æ®åº“æ“ä½œ" class="headerlink" title="2ã€Hiveæ•°æ®åº“æ“ä½œ"></a>2ã€Hiveæ•°æ®åº“æ“ä½œ</h2><p>ï¼ˆ1ï¼‰åˆ›å»ºæ•°æ®åº“</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤CREATE DATABASE|SCHEMA [IF NOT EXISTS] <database name>;-- ä¾‹å­CREATE DATABASE IF NOT EXISTS database_name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰åˆ é™¤æ•°æ®åº“</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤DROP DATABASE StatementDROP (DATABASE|SCHEMA) [IF EXISTS] database_name [RESTRICT|CASCADE];-- ä¾‹å­DROP DATABASE IF EXISTS userdb;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€Hiveè¡¨æ“ä½œ"><a href="#3ã€Hiveè¡¨æ“ä½œ" class="headerlink" title="3ã€Hiveè¡¨æ“ä½œ"></a>3ã€Hiveè¡¨æ“ä½œ</h2><p>ï¼ˆ1ï¼‰åˆ›å»ºè¡¨</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.] table_name[(col_name data_type [COMMENT col_comment], ...)][COMMENT table_comment][ROW FORMAT row_format][STORED AS file_format]-- ä¾‹å­CREATE TABLE IF NOT EXISTS employee(eid int,  name String, salary String,  destination String)COMMENT â€˜Employee detailsâ€™ROW FORMAT DELIMITEDFIELDS TERMINATED BY â€˜\tâ€™LINES TERMINATED BY â€˜\nâ€™STORED AS TEXTFILE;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰ä¿®æ”¹è¡¨</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- é‡å‘½åè¡¨ALTER TABLE name RENAME TO new_nameALTER TABLE employee RENAME TO emp;-- æ·»åŠ åˆ—ALTER TABLE name ADD COLUMNS (col_spec[, col_spec ...])ALTER TABLE employee ADD COLUMNS (    dept STRING COMMENT 'Department name');-- åˆ é™¤åˆ—ALTER TABLE name DROP [COLUMN] column_name-- æ›´æ”¹åˆ—å±æ€§ALTER TABLE name CHANGE column_name new_name new_typeALTER TABLE employee CHANGE salary salary Double;-- æ›¿æ¢åˆ—ALTER TABLE name REPLACE COLUMNS (col_spec[, col_spec ...])ALTER TABLE employee REPLACE COLUMNS (    eid INT empid Int,    ename STRING name String);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ3ï¼‰åˆ é™¤è¡¨</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">DROP TABLE [IF EXISTS] table_name;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="4ã€Hiveè¡¨æ•°æ®æ“ä½œ"><a href="#4ã€Hiveè¡¨æ•°æ®æ“ä½œ" class="headerlink" title="4ã€Hiveè¡¨æ•°æ®æ“ä½œ"></a>4ã€Hiveè¡¨æ•°æ®æ“ä½œ</h2><p>ï¼ˆ1ï¼‰æ’å…¥æ•°æ®</p><ul><li><code>LOAD DATA</code>ï¼šä»<code>HDFS</code>ä¸­åŠ è½½æ•°æ®ä¼šç›´æ¥<code>move</code>ï¼</li></ul><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">--å‘½ä»¤LOAD DATA [LOCAL] INPATH 'filepath' [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)]--ä¾‹å­LOAD DATA LOCAL INPATH '/home/user/sample.txt' OVERWRITE INTO TABLE employee;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>INSERT INTO</code></li></ul><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">insert into table account select id, age, name from account_tmp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>INSERT OVERWRITE</code></li></ul><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">insert overwrite table account2 select id, age, name from account_tmp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong><em>æ³¨æ„</em></strong>ï¼š</p><p><code>insert overwrite</code>ä¼šè¦†ç›–å·²ç»å­˜åœ¨çš„æ•°æ®ï¼Œå‡å¦‚åŸå§‹è¡¨ä½¿ç”¨<code>overwrite</code>ä¸Šè¿°çš„æ•°æ®ï¼Œå…ˆç°å°†åŸå§‹è¡¨çš„æ•°æ®<code>remove</code>ï¼Œå†æ’å…¥æ–°æ•°æ®ã€‚</p><p><code>insert into</code>åªæ˜¯ç®€å•çš„æ’å…¥ï¼Œä¸è€ƒè™‘åŸå§‹è¡¨çš„æ•°æ®ï¼Œç›´æ¥è¿½åŠ åˆ°è¡¨ä¸­ã€‚</p><p>ï¼ˆ2ï¼‰ä¿®æ”¹æ•°æ®</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">UPDATE tablename SET column = value [, column = value ...] [WHERE expression]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ï¼ˆ3ï¼‰åˆ é™¤æ•°æ®</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">DELETE FROM tablename [WHERE expression]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="5ã€Hiveåˆ†åŒºæ“ä½œ"><a href="#5ã€Hiveåˆ†åŒºæ“ä½œ" class="headerlink" title="5ã€Hiveåˆ†åŒºæ“ä½œ"></a>5ã€Hiveåˆ†åŒºæ“ä½œ</h2><p>ï¼ˆ1ï¼‰æ·»åŠ åˆ†åŒº</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤ALTER TABLE table_name ADD [IF NOT EXISTS] PARTITION (p_column = p_col_value, p_column = p_col_value, ...)[LOCATION 'location1'] (p2_column = p2_col_value, p2_column = p2_col_value, ...) [LOCATION 'location2'] ...;-- ä¾‹å­ALTER TABLE employee ADD PARTITION (year=â€™2013â€™) location '/2012/part2012';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰é‡å‘½ååˆ†åŒº</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤ALTER TABLE table_name PARTITION partition_spec RENAME TO PARTITION partition_spec;-- ä¾‹å­ALTER TABLE employee PARTITION (year=â€™1203â€™) RENAME TO PARTITION (Yoj=â€™1203â€™);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ3ï¼‰åˆ é™¤åˆ†åŒº</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤ALTER TABLE table_name DROP [IF EXISTS] PARTITION partition_spec, PARTITION partition_spec,...;-- ä¾‹å­ALTER TABLE employee DROP [IF EXISTS] PARTITION (year=â€™1203â€™);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6ã€Hiveå†…ç½®è¿ç®—ç¬¦"><a href="#6ã€Hiveå†…ç½®è¿ç®—ç¬¦" class="headerlink" title="6ã€Hiveå†…ç½®è¿ç®—ç¬¦"></a>6ã€Hiveå†…ç½®è¿ç®—ç¬¦</h2><p>ï¼ˆ1ï¼‰å…³ç³»è¿ç®—ç¬¦</p><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æ“ä½œ</th><th>æè¿°</th></tr></thead><tbody><tr><td>A = B</td><td>æ‰€æœ‰åŸºæœ¬ç±»å‹</td><td></td></tr><tr><td>A != B</td><td>æ‰€æœ‰åŸºæœ¬ç±»å‹</td><td></td></tr><tr><td>A &lt; B</td><td>æ‰€æœ‰åŸºæœ¬ç±»å‹</td><td></td></tr><tr><td>A &lt;= B</td><td>æ‰€æœ‰åŸºæœ¬ç±»å‹</td><td></td></tr><tr><td>A &gt; B</td><td>æ‰€æœ‰åŸºæœ¬ç±»å‹</td><td></td></tr><tr><td>A &gt;= B</td><td>æ‰€æœ‰åŸºæœ¬ç±»å‹</td><td></td></tr><tr><td>A IS NULL</td><td>æ‰€æœ‰ç±»å‹</td><td></td></tr><tr><td>A IS NOT NULL</td><td>æ‰€æœ‰ç±»å‹</td><td></td></tr><tr><td>A LIKE B</td><td>å­—ç¬¦ä¸²</td><td>TRUEï¼Œå¦‚æœå­—ç¬¦ä¸²æ¨¡å¼AåŒ¹é…åˆ°Bï¼Œ<br>å¦åˆ™FALSEã€‚</td></tr><tr><td>A RLIKE B</td><td>å­—ç¬¦ä¸²</td><td>TRUEï¼šAä»»ä½•å­å­—ç¬¦ä¸²åŒ¹é…Javaæ­£åˆ™è¡¨è¾¾å¼Bï¼›</td></tr><tr><td>A REGEXP B</td><td>å­—ç¬¦ä¸²</td><td>ç­‰åŒäºRLIKE.</td></tr></tbody></table></div><p>ï¼ˆ2ï¼‰ç®—æœ¯è¿ç®—ç¬¦</p><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æ“ä½œ</th><th>æè¿°</th></tr></thead><tbody><tr><td>A + B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td></td></tr><tr><td>A - B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td></td></tr><tr><td>A * B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td></td></tr><tr><td>A / B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td></td></tr><tr><td>A % B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td></td></tr><tr><td>A &amp; B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td>Aå’ŒBçš„æŒ‰ä½ä¸ç»“æœ</td></tr><tr><td>A \</td><td>B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td>Aå’ŒBçš„æŒ‰ä½æˆ–ç»“æœ</td></tr><tr><td>A ^ B</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td>Aå’ŒBçš„æŒ‰ä½å¼‚æˆ–ç»“æœ</td></tr><tr><td>~ A</td><td>æ‰€æœ‰æ•°å­—ç±»å‹</td><td>AæŒ‰ä½éçš„ç»“æœ</td></tr></tbody></table></div><p>ï¼ˆ3ï¼‰é€»è¾‘è¿ç®—ç¬¦</p><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æ“ä½œ</th><th>æè¿°</th></tr></thead><tbody><tr><td>A AND B</td><td>Boolean</td><td>ä¸</td></tr><tr><td>A &amp;&amp; B</td><td>Boolean</td><td></td></tr><tr><td>A OR B</td><td>Boolean</td><td>æˆ–</td></tr><tr><td>A \</td><td>\</td><td>B</td><td>Boolean</td><td></td></tr><tr><td>NOT A</td><td>Boolean</td><td>é</td></tr><tr><td>! A</td><td>Boolean</td></tr></tbody></table></div><p>ï¼ˆ4ï¼‰å¤æ‚è¿ç®—ç¬¦</p><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æ“ä½œ</th><th>æè¿°</th></tr></thead><tbody><tr><td>A[n]</td><td>Aæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œnæ˜¯ä¸€ä¸ªint</td><td>å®ƒè¿”å›æ•°ç»„Açš„ç¬¬n+1ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•0ã€‚</td></tr><tr><td>M[Key]</td><td>M æ˜¯ä¸€ä¸ª Map<K, v> å¹¶ key çš„ç±»å‹ä¸ºK</K,></td><td>å®ƒè¿”å›å¯¹åº”äºæ˜ å°„ä¸­å…³é”®å­—çš„å€¼ã€‚</td></tr><tr><td>S.x</td><td>S æ˜¯ä¸€ä¸ªç»“æ„</td><td>å®ƒè¿”å›Sçš„så­—æ®µ</td></tr></tbody></table></div><h2 id="7ã€Hiveå†…ç½®å‡½æ•°"><a href="#7ã€Hiveå†…ç½®å‡½æ•°" class="headerlink" title="7ã€Hiveå†…ç½®å‡½æ•°"></a>7ã€Hiveå†…ç½®å‡½æ•°</h2><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- è¿”å›BIGINTæœ€è¿‘çš„doubleå€¼ã€‚round(double a)-- è¿”å›æœ€å¤§BIGINTå€¼ç­‰äºæˆ–å°äºdoubleã€‚floor(double a)-- å®ƒè¿”å›æœ€å°BIGINTå€¼ç­‰äºæˆ–å¤§äºdoubleã€‚ceil(double a)-- å®ƒè¿”å›ä¸€ä¸ªéšæœºæ•°ï¼Œä»è¡Œæ”¹å˜åˆ°è¡Œã€‚rand()rand(int seed)-- å®ƒè¿”å›ä»Aåä¸²è”Bäº§ç”Ÿçš„å­—ç¬¦ä¸²concat(string A, string B, ...)-- å®ƒè¿”å›ä¸€ä¸ªèµ·å§‹ä½ç½®startåˆ°Aç»“æŸçš„å­å­—ç¬¦ä¸²substr(string A, int start)-- è¿”å›ä»ç»™å®šé•¿åº¦lengthçš„ä»èµ·å§‹ä½ç½®startå¼€å§‹çš„å­—ç¬¦ä¸²ã€‚substr(string A, int start, int length)-- å®ƒè¿”å›è½¬æ¢æ‰€æœ‰å­—ç¬¦ä¸ºå¤§å†™çš„å­—ç¬¦ä¸²ã€‚upper(string A)ucase(string A)-- å®ƒè¿”å›è½¬æ¢æ‰€æœ‰å­—ç¬¦ä¸ºå°å†™çš„å­—ç¬¦ä¸²ã€‚lower(string A)lcase(string A)-- å®ƒè¿”å›å­—ç¬¦ä¸²ä»Aä¸¤ç«¯ä¿®å‰ªç©ºæ ¼çš„ç»“æœtrim(string A)-- å®ƒè¿”å›ä»Aå·¦è¾¹å¼€å§‹ä¿®æ•´ç©ºæ ¼äº§ç”Ÿçš„å­—ç¬¦ä¸²(å·¦æ‰‹ä¾§)ltrim(string A)-- å®ƒè¿”å›ä»Aå³è¾¹å¼€å§‹ä¿®æ•´ç©ºæ ¼äº§ç”Ÿçš„å­—ç¬¦ä¸²(å³ä¾§)rtrim(string A)-- å®ƒè¿”å›å°†Aä¸­çš„å­å­—ç¬¦ä¸²Bæ›¿æ¢ä¸ºCçš„å…¨æ–°å­—ç¬¦ä¸²regexp_replace(string A, string B, string C)-- å®ƒè¿”å›åœ¨æ˜ å°„ç±»å‹æˆ–æ•°ç»„ç±»å‹çš„å…ƒç´ çš„æ•°é‡ã€‚size(Map<K.V>)size(Array<T>)-- å°†å­—æ®µexprçš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºtypeã€‚å¦‚æœè½¬æ¢ä¸æˆåŠŸï¼Œè¿”å›çš„æ˜¯NULLã€‚cast(<expr> as <type>)-- å°†10ä½çš„æ—¶é—´æˆ³å€¼unixtimeè½¬ä¸ºæ—¥æœŸå‡½æ•°from_unixtime(int unixtime, 'yyyy-MM-dd HH:mm:ss')-- è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶é—´æˆ³çš„æ—¥æœŸéƒ¨åˆ†ï¼što_date("1970-01-01 00:00:00") = "1970-01-01"to_date(string timestamp, 'yyyy-MM-dd')-- è¿”å›æŒ‡å®šæ—¥æœŸçš„unixæ—¶é—´æˆ³unix_timestamp(string date, 'yyyy-MM-dd HH:mm:ss')  -- dateçš„å½¢å¼å¿…é¡»ä¸ºâ€™yyyy-MM-dd HH:mm:ssâ€™çš„å½¢å¼unix_timestamp()  -- è¿”å›å½“å‰æ—¶é—´çš„unixæ—¶é—´æˆ³-- è¿”å›æ—¶é—´å­—æ®µä¸­çš„å¹´æœˆæ—¥year(string date, 'yyMMdd')  -- å¹´month(string date, 'yyMMdd')  -- æœˆday(string date, 'yyMMdd')  -- æ—¥-- è¿”å›æ—¶é—´å­—æ®µæ˜¯æœ¬å¹´çš„ç¬¬å¤šå°‘å‘¨weekofyear(string date, 'yyMMdd')-- è¿”å›enddateä¸begindateä¹‹é—´çš„æ—¶é—´å·®çš„å¤©æ•°datediff(string enddate,string begindate)select datediff(â€˜2016-06-01â€™,â€™2016-05-01â€™) from Hive_sum limit 1;-- è¿”å›dateå¢åŠ dayså¤©åçš„æ—¥æœŸdate_add(string date,int days)-- è¿”å›dateå‡å°‘dayså¤©åçš„æ—¥æœŸdate_sub(string date,int days)-- æå–ä»åŸºäºæŒ‡å®šçš„JSONè·¯å¾„çš„JSONå­—ç¬¦ä¸²JSONå¯¹è±¡ï¼Œå¹¶è¿”å›æå–çš„JSONå­—ç¬¦ä¸²çš„JSONå¯¹è±¡ã€‚get_json_object(string json_string, string path)-- è¿”å›æ£€ç´¢è¡Œçš„æ€»æ•°ã€‚count(*)count(expr)-- è¿”å›è¯¥ç»„æˆ–è¯¥ç»„ä¸­çš„åˆ—çš„ä¸åŒå€¼çš„åˆ†ç»„å’Œæ‰€æœ‰å…ƒç´ çš„æ€»å’Œã€‚sum(col)sum(DISTINCT col)-- è¿”å›ä¸Šè¿°ç»„æˆ–è¯¥ç»„ä¸­çš„åˆ—çš„ä¸åŒå€¼çš„å…ƒç´ çš„å¹³å‡å€¼ã€‚avg(col)avg(DISTINCT col)-- è¿”å›è¯¥ç»„ä¸­çš„åˆ—çš„æœ€å¤§æœ€å°å€¼ã€‚min(col)max(col)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8ã€Hiveè§†å›¾å’Œç´¢å¼•"><a href="#8ã€Hiveè§†å›¾å’Œç´¢å¼•" class="headerlink" title="8ã€Hiveè§†å›¾å’Œç´¢å¼•"></a>8ã€Hiveè§†å›¾å’Œç´¢å¼•</h2><p>ï¼ˆ1ï¼‰åˆ›å»ºè§†å›¾</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤CREATE VIEW [IF NOT EXISTS] view_name [(column_name [COMMENT column_comment], ...) ][COMMENT table_comment]AS SELECT ...-- ä¾‹å­CREATE VIEW emp_30000 ASSELECT * FROM employeeWHERE salary>30000;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰åˆ é™¤è§†å›¾</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">DROP VIEW view_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ï¼ˆ3ï¼‰åˆ›å»ºç´¢å¼•</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å‘½ä»¤CREATE INDEX index_nameON TABLE base_table_name (col_name, ...)AS 'index.handler.class.name'[WITH DEFERRED REBUILD][IDXPROPERTIES (property_name=property_value, ...)][IN TABLE index_table_name][PARTITIONED BY (col_name, ...)][   [ ROW FORMAT ...] STORED AS ...   | STORED BY ...][LOCATION hdfs_path][TBLPROPERTIES (...)]-- ä¾‹å­ï¼šä½¿ç”¨å­—æ®µ Id, Name, Salary, Designation, å’Œ Deptåˆ›å»ºä¸€ä¸ªåä¸ºindex_salaryçš„ç´¢å¼•ï¼Œå¯¹employee è¡¨çš„salaryåˆ—ç´¢å¼•ã€‚CREATE INDEX inedx_salary ON TABLE employee(salary)AS 'org.apache.hadoop.Hive.ql.index.compact.CompactIndexHandler';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ4ï¼‰åˆ é™¤ç´¢å¼•</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">DROP INDEX <index_name> ON <table_name><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="äºŒã€Hiveè¿›é˜¶"><a href="#äºŒã€Hiveè¿›é˜¶" class="headerlink" title="äºŒã€Hiveè¿›é˜¶"></a>äºŒã€Hiveè¿›é˜¶</h1><h2 id="1ã€Hive-SELECT-æ•°æ®"><a href="#1ã€Hive-SELECT-æ•°æ®" class="headerlink" title="1ã€Hive SELECT æ•°æ®"></a>1ã€Hive SELECT æ•°æ®</h2><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">SELECT [ALL | DISTINCT] select_expr, select_expr, ... FROM table_reference [WHERE where_condition] [GROUP BY col_list] [HAVING having_condition] [CLUSTER BY col_list | [DISTRIBUTE BY col_list] [SORT BY col_list]] [ORDER BY col_list][LIMIT number];<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2ã€å‘½ä»¤æ‰§è¡Œé¡ºåº"><a href="#2ã€å‘½ä»¤æ‰§è¡Œé¡ºåº" class="headerlink" title="2ã€å‘½ä»¤æ‰§è¡Œé¡ºåº"></a>2ã€å‘½ä»¤æ‰§è¡Œé¡ºåº</h2><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å¤§è‡´é¡ºåºfrom... where.... select... group by... having ... order by...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>å¤‡æ³¨ï¼š</strong>Hiveè¯­å¥å’Œmysqléƒ½å¯ä»¥é€šè¿‡explainæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œä½¿ç”¨explain + Hiveè¯­å¥</p><h1 id="ä¸‰ã€HiveåŸç†"><a href="#ä¸‰ã€HiveåŸç†" class="headerlink" title="ä¸‰ã€HiveåŸç†"></a>ä¸‰ã€HiveåŸç†</h1><h2 id="æ•°æ®ä»“åº“æ¦‚å¿µ"><a href="#æ•°æ®ä»“åº“æ¦‚å¿µ" class="headerlink" title="æ•°æ®ä»“åº“æ¦‚å¿µ"></a>æ•°æ®ä»“åº“æ¦‚å¿µ</h2><ul><li>Hiveæ˜¯æ•°æ®ä»“åº“</li><li><strong>æ•°æ®ä»“åº“è·Ÿæ•°æ®åº“çš„åŒºåˆ«ï¼š</strong><ol><li>æ•°æ®åº“ï¼šä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“çš„ä¸»è¦åº”ç”¨ï¼Œä¸»è¦æ˜¯åŸºæœ¬çš„ã€æ—¥å¸¸çš„äº‹åŠ¡å¤„ç†ï¼Œä¾‹å¦‚é“¶è¡Œäº¤æ˜“ã€‚</li><li>æ•°æ®ä»“åº“ï¼šæ•°æ®ä»“åº“ç³»ç»Ÿçš„åº”ç”¨ä¸»è¦æ˜¯OLAPï¼ˆOn-Line Analytical Processingï¼‰ï¼Œæ”¯æŒå¤æ‚çš„åˆ†ææ“ä½œï¼Œä¾§é‡å†³ç­–æ”¯æŒï¼Œå¹¶ä¸”æä¾›ç›´è§‚æ˜“æ‡‚çš„æŸ¥è¯¢ç»“æœã€‚</li></ol></li></ul><p><img src="/2019/10/12/shi-yong-gong-ju-zhi-hive/hive_data_warehouse.png" alt="å›¾ï¼šæ•°æ®ä»“åº“ç»“æ„"></p><h2 id="Hiveç®€ä»‹"><a href="#Hiveç®€ä»‹" class="headerlink" title="Hiveç®€ä»‹"></a>Hiveç®€ä»‹</h2><ul><li>Hadoopé¡¶å±‚çš„æ•°æ®ä»“åº“å·¥å…·</li><li>æ”¯æŒå¤§æ•°æ®å­˜å‚¨ä¸åˆ†æ</li><li>ä¾èµ–HDFSå­˜å‚¨æ•°æ®</li><li>ä¾èµ–MapReduceå¤„ç†æ•°æ®</li><li>æœ‰ç±»ä¼¼SQLçš„æŸ¥è¯¢è¯­è¨€-HiveQL</li><li>ç”¨æˆ·é€šè¿‡HiveQLè¿è¡ŒMapReduceä»»åŠ¡</li><li>Hiveé€‚ç”¨äº<strong>BIæŠ¥è¡¨</strong>ï¼ŒPigé€‚åˆETLè¿‡ç¨‹ï¼ŒHBaseæä¾›æ•°æ®çš„å®æ—¶è®¿é—®</li></ul><h2 id="Hiveä¸ä¼ ç»ŸSqlå¯¹æ¯”"><a href="#Hiveä¸ä¼ ç»ŸSqlå¯¹æ¯”" class="headerlink" title="Hiveä¸ä¼ ç»ŸSqlå¯¹æ¯”"></a>Hiveä¸ä¼ ç»ŸSqlå¯¹æ¯”</h2><div class="table-container"><table><thead><tr><th>å¯¹æ¯”é¡¹ç›®</th><th>Hive</th><th>ä¼ ç»ŸSql</th></tr></thead><tbody><tr><td>æ•°æ®æ’å…¥</td><td>æ”¯æŒæ‰¹é‡å¯¼å…¥</td><td>æ”¯æŒå•æ¡å’Œæ‰¹é‡</td></tr><tr><td>æ•°æ®æ›´æ–°</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>ç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>åˆ†åŒº</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ‰§è¡Œå»¶è¿Ÿ</td><td>é«˜</td><td>ä½</td></tr><tr><td>æ‰©å±•æ€§</td><td>å¥½</td><td>æœ‰é™</td></tr></tbody></table></div><h2 id="Hiveç³»ç»Ÿæ¶æ„"><a href="#Hiveç³»ç»Ÿæ¶æ„" class="headerlink" title="Hiveç³»ç»Ÿæ¶æ„"></a>Hiveç³»ç»Ÿæ¶æ„</h2><h3 id="ç”¨æˆ·æ¥å£æ¨¡å—"><a href="#ç”¨æˆ·æ¥å£æ¨¡å—" class="headerlink" title="ç”¨æˆ·æ¥å£æ¨¡å—"></a>ç”¨æˆ·æ¥å£æ¨¡å—</h3><h4 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a>CLI</h4><ul><li>Shellå‘½ä»¤è¡Œ</li><li>Karmasphere</li></ul><h4 id="HWI"><a href="#HWI" class="headerlink" title="HWI"></a>HWI</h4><ul><li>webæ¥å£</li><li>Hue</li></ul><h4 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h4><ul><li>Qubole</li><li>Hive çš„Javaï¼Œä¸ä½¿ç”¨ä¼ ç»Ÿæ•°æ®åº“JDBCçš„æ–¹å¼ç±»ä¼¼</li></ul><h4 id="ODBC"><a href="#ODBC" class="headerlink" title="ODBC"></a>ODBC</h4><ul><li>Hive çš„Javaï¼Œä¸ä½¿ç”¨ä¼ ç»Ÿæ•°æ®åº“JDBCçš„æ–¹å¼ç±»ä¼¼</li></ul><h4 id="Thrift-Server"><a href="#Thrift-Server" class="headerlink" title="Thrift Server"></a>Thrift Server</h4><ul><li>RPCè°ƒç”¨</li></ul><h3 id="é©±åŠ¨æ¨¡å—"><a href="#é©±åŠ¨æ¨¡å—" class="headerlink" title="é©±åŠ¨æ¨¡å—"></a>é©±åŠ¨æ¨¡å—</h3><ul><li>ç¼–è¯‘å™¨</li><li>ä¼˜åŒ–å™¨</li><li>æ‰§è¡Œå™¨</li><li>è§£é‡Šå™¨ã€ç¼–è¯‘å™¨ã€ä¼˜åŒ–å™¨å®Œæˆ HQL æŸ¥è¯¢è¯­å¥ä»è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€ç¼–è¯‘ã€ä¼˜åŒ–ä»¥åŠæŸ¥è¯¢è®¡åˆ’ï¼ˆplanï¼‰çš„ç”Ÿæˆã€‚</li><li>ç”Ÿæˆçš„æŸ¥è¯¢è®¡åˆ’å­˜å‚¨åœ¨ HDFS ä¸­ï¼Œå¹¶åœ¨éšåæœ‰ MapReduce è°ƒç”¨æ‰§è¡Œ</li></ul><h3 id="å…ƒæ•°æ®å­˜å‚¨"><a href="#å…ƒæ•°æ®å­˜å‚¨" class="headerlink" title="å…ƒæ•°æ®å­˜å‚¨"></a>å…ƒæ•°æ®å­˜å‚¨</h3><ul><li>å…ƒæ•°æ®å­˜å‚¨æ¨¡å—ï¼ˆmetastoreï¼‰æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å…³ç³»å‹æ•°æ®åº“ï¼Œç›®å‰åªæ”¯æŒ mysqlã€derbyã€‚</li><li>Hive ä¸­çš„å…ƒæ•°æ®åŒ…æ‹¬è¡¨çš„åå­—ï¼Œè¡¨çš„åˆ—å’Œåˆ†åŒºåŠå…¶å±æ€§ï¼Œè¡¨çš„å±æ€§ï¼ˆæ˜¯å¦ä¸ºå¤–éƒ¨è¡¨ç­‰ï¼‰ï¼Œè¡¨çš„æ•°æ®æ‰€åœ¨ç›®å½•ç­‰</li></ul><h2 id="Hiveå·¥ä½œåŸç†"><a href="#Hiveå·¥ä½œåŸç†" class="headerlink" title="Hiveå·¥ä½œåŸç†"></a>Hiveå·¥ä½œåŸç†</h2><h3 id="HQLè½¬æ¢æˆMapReduceä½œä¸šçš„è¿‡ç¨‹"><a href="#HQLè½¬æ¢æˆMapReduceä½œä¸šçš„è¿‡ç¨‹" class="headerlink" title="HQLè½¬æ¢æˆMapReduceä½œä¸šçš„è¿‡ç¨‹"></a>HQLè½¬æ¢æˆMapReduceä½œä¸šçš„è¿‡ç¨‹</h3><ul><li><a href="http://www.aboutyun.com/thread-20461-1-1.html" target="_blank" rel="noopener">HQLè§£æåŸç†</a></li></ul><p><img src="/2019/10/12/shi-yong-gong-ju-zhi-hive/hive_to_mapreduce.png" alt="å›¾ï¼šhive_to_mapreduce"></p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>å½“å¯åŠ¨MRç¨‹åºæ—¶ï¼ŒHiveæœ¬èº«ä¸ä¼šç”ŸæˆMRç®—æ³•ç¨‹åºï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªâ€œJobæ‰§è¡Œè®¡åˆ’â€çš„XMLæ–‡ä»¶é©±åŠ¨æ¥æ‰§è¡Œå†…ç½®çš„Mapperå’ŒReduceræ¨¡å—</li><li>Hiveé€šè¿‡å’ŒJobTrackeré€šä¿¡æ¥åˆå§‹åŒ–MRä»»åŠ¡</li></ul><h3 id="Hive-HAåŸºæœ¬åŸç†"><a href="#Hive-HAåŸºæœ¬åŸç†" class="headerlink" title="Hive HAåŸºæœ¬åŸç†"></a>Hive HAåŸºæœ¬åŸç†</h3><p><img src="/2019/10/12/shi-yong-gong-ju-zhi-hive/hiveHA.png" alt="å›¾ï¼šhiveHA"></p><h1 id="å››ã€impala"><a href="#å››ã€impala" class="headerlink" title="å››ã€impala"></a>å››ã€impala</h1><ul><li>impalaæ˜¯ç”±Clouderaå…¬å¸å¼€å‘çš„æ–°å‹æŸ¥è¯¢ç³»ç»Ÿï¼Œæä¾›SQLè¯­ä¹‰ã€‚</li><li>å®ƒçš„è¿è¡Œ<strong>éœ€è¦ä¾èµ–Hiveçš„å…ƒæ•°æ®</strong>ï¼Œèƒ½å¤ŸæŸ¥è¯¢PBçº§æ•°æ®ï¼Œåœ¨æ€§èƒ½ä¸Šæ¯”Hiveé«˜å‡º3~30å€</li><li>impalaä¸éœ€è¦å°†æŸ¥è¯¢è¯­å¥è½¬ä¸ºMRç¨‹åºè¿è¡Œï¼Œ<strong>è€Œæ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„åˆ†å¸ƒå¼æŸ¥è¯¢å¼•æ“ç›´æ¥åˆ°HDFSä¸ŠæŸ¥è¯¢æ•°æ®</strong></li><li>è¯¦æƒ…è¯·è§</li></ul><h1 id="äº”ã€å‚è€ƒä¹¦ç±"><a href="#äº”ã€å‚è€ƒä¹¦ç±" class="headerlink" title="äº”ã€å‚è€ƒä¹¦ç±"></a>äº”ã€å‚è€ƒä¹¦ç±</h1><ul><li><a href="https://www.yiibai.com/Hive/" target="_blank" rel="noopener">æ˜“ç™¾æ•™ç¨‹</a></li><li><a href="https://study.163.com/course/courseMain.htm?courseId=1002887002" target="_blank" rel="noopener">å¤§æ•°æ®æŠ€æœ¯åŸç†ä¸åº”ç”¨</a></li></ul><h1 id="å…­ã€ç–‘éš¾è§£ç­”"><a href="#å…­ã€ç–‘éš¾è§£ç­”" class="headerlink" title="å…­ã€ç–‘éš¾è§£ç­”"></a>å…­ã€ç–‘éš¾è§£ç­”</h1><h2 id="1ã€Hive-åœ¨æŒ‡å®šä½ç½®æ·»åŠ å­—æ®µ"><a href="#1ã€Hive-åœ¨æŒ‡å®šä½ç½®æ·»åŠ å­—æ®µ" class="headerlink" title="1ã€Hive åœ¨æŒ‡å®šä½ç½®æ·»åŠ å­—æ®µ"></a>1ã€Hive åœ¨æŒ‡å®šä½ç½®æ·»åŠ å­—æ®µ</h2><ul><li><p>é¦–å…ˆæ·»åŠ å­—æ®µ</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">alter table table_name add columns (c_time string comment 'å½“å‰æ—¶é—´');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å…¶æ¬¡æ›´æ”¹å­—æ®µçš„é¡ºåº</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">alter table table_name change c_time c_time string after address;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ·»åŠ å­—æ®µåï¼Œé‡å†™è¡¨æ•°æ®åï¼ŒæŸ¥è¯¢æ–°å­—æ®µä¸ºnullçš„æƒ…å†µ</p><ul><li><a href="https://blog.csdn.net/lzxlfly/article/details/116788104" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">alter table table_name drop partition(date_id='20210101')alter table table_name add partition(date_id='20210101')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h2 id="2ã€Hiveåˆ›å»ºè¡¨æ—¶æŒ‡å®šæ–‡ä»¶æ ¼å¼"><a href="#2ã€Hiveåˆ›å»ºè¡¨æ—¶æŒ‡å®šæ–‡ä»¶æ ¼å¼" class="headerlink" title="2ã€Hiveåˆ›å»ºè¡¨æ—¶æŒ‡å®šæ–‡ä»¶æ ¼å¼"></a>2ã€Hiveåˆ›å»ºè¡¨æ—¶æŒ‡å®šæ–‡ä»¶æ ¼å¼</h2><ul><li><p><strong>TEXTFIEL</strong></p><p>é»˜è®¤æ ¼å¼ï¼Œæ•°æ®ä¸åšå‹ç¼©ï¼Œç£ç›˜å¼€é”€å¤§ï¼Œæ•°æ®è§£æå¼€é”€å¤§ã€‚<br>å¯ç»“åˆGzipã€Bzip2ä½¿ç”¨ï¼ˆç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥ï¼Œæ‰§è¡ŒæŸ¥è¯¢æ—¶è‡ªåŠ¨è§£å‹ï¼‰ï¼Œä½†ä½¿ç”¨è¿™ç§æ–¹å¼ï¼ŒHiveä¸ä¼šå¯¹æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œä»è€Œæ— æ³•å¯¹æ•°æ®è¿›è¡Œå¹¶è¡Œæ“ä½œã€‚</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å›ºå®šæ ¼å¼create table test1(str STRING)  STORED AS TEXTFILE;-- è‡ªå®šä¹‰æ ¼å¼create table test1(str STRING)  STORED ASINPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat'OUTPUTFORMAT 'org.apache.hadoop.Hive.ql.io.HiveIgnoreKeyTextOutputFormat'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>SEQUENCEFILE</strong></p><p>SequenceFileæ˜¯Hadoop APIæä¾›çš„ä¸€ç§äºŒè¿›åˆ¶æ–‡ä»¶æ”¯æŒï¼Œå…¶å…·æœ‰ä½¿ç”¨æ–¹ä¾¿ã€å¯åˆ†å‰²ã€å¯å‹ç¼©çš„ç‰¹ç‚¹ã€‚<br>SequenceFileæ”¯æŒä¸‰ç§å‹ç¼©é€‰æ‹©ï¼šNONE, RECORD, BLOCKã€‚ Recordå‹ç¼©ç‡ä½ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨BLOCKå‹ç¼©ã€‚</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å›ºå®šæ ¼å¼create table test1(str STRING)  STORED AS SEQUENCEFILE;-- è‡ªå®šä¹‰æ ¼å¼create table test1(str STRING)  STORED ASINPUTFORMAT 'org.apache.hadoop.mapred.SequenceFileInputFormat'OUTPUTFORMAT 'org.apache.hadoop.Hive.ql.io.HiveSequenceFileOutputFormat'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>RCFILE</strong></p><p>RCFILEæ˜¯ä¸€ç§è¡Œåˆ—å­˜å‚¨ç›¸ç»“åˆçš„å­˜å‚¨æ–¹å¼ã€‚é¦–å…ˆï¼Œå…¶å°†æ•°æ®æŒ‰è¡Œåˆ†å—ï¼Œä¿è¯åŒä¸€ä¸ªrecordåœ¨ä¸€ä¸ªå—ä¸Šï¼Œé¿å…è¯»ä¸€ä¸ªè®°å½•éœ€è¦è¯»å–å¤šä¸ªblockã€‚å…¶æ¬¡ï¼Œå—æ•°æ®åˆ—å¼å­˜å‚¨ï¼Œæœ‰åˆ©äºæ•°æ®å‹ç¼©å’Œå¿«é€Ÿçš„åˆ—å­˜å–ã€‚</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">-- å›ºå®šæ ¼å¼create table test1(str STRING)  STORED AS RCFILE;-- è‡ªå®šä¹‰æ ¼å¼create table test1(str STRING)  STORED ASINPUTFORMAT 'org.apache.hadoop.Hive.ql.io.RCFileInputFormat'OUTPUTFORMAT 'org.apache.hadoop.Hive.ql.io.RCFileOutputFormat'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="3ã€HiveåŒæ—¶æ‹†åˆ†å¤šåˆ—ä¸ºå¤šè¡Œ"><a href="#3ã€HiveåŒæ—¶æ‹†åˆ†å¤šåˆ—ä¸ºå¤šè¡Œ" class="headerlink" title="3ã€HiveåŒæ—¶æ‹†åˆ†å¤šåˆ—ä¸ºå¤šè¡Œ"></a>3ã€HiveåŒæ—¶æ‹†åˆ†å¤šåˆ—ä¸ºå¤šè¡Œ</h2><ul><li><a href="https://stackoverflow.com/questions/37585638/Hive-split-delimited-columns-over-multiple-rows-select-based-on-position?rq=1" target="_blank" rel="noopener">é—®é¢˜é“¾æ¥</a></li></ul><p><strong>é—®é¢˜ï¼š</strong></p><p>Iâ€™m Looking for a way to split the column based on comma delimited data. Below is my dataset</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">id  col1  col21   5,6   7,8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>I want to get the result</p><pre class="line-numbers language-lang-mysql"><code class="language-lang-mysql">id col1 col21  5    71  6    8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ç­”æ¡ˆï¼š</strong></p><p>You can use <code>posexplode()</code> to create position index columns for your split arrays. Then, select only those rows where the position indices are equal.</p><pre><code>SELECT id, col3, col4  FROM test  lateral VIEW posexplode(split(col1,&#39;\002&#39;)) col1 AS pos3, col3  lateral VIEW posexplode(split(col2,&#39;\002&#39;)) col2 AS pos4, col4  WHERE pos3 = pos4;</code></pre><p>Output:</p><pre><code>id col3 col41  5    71  6    8</code></pre><p>==è¡¥å……==</p><ul><li><a href="https://mp.weixin.qq.com/s/pyhKhXYzWMkdd3efyT5XPQ" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><ol><li>å•åˆ—explode</li></ol><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">select class,student_namefromdefault.classinfolateral view explode(split(student,',')) t as student_name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>å•åˆ—posexplode</li></ol><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">select class,student_index + 1 as student_index,student_namefromdefault.classinfolateral view posexplode(split(student,',')) t as student_index,student_name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>å¤šåˆ—explode</li></ol><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">select class,student_name,student_scorefromdefault.classinfolateral view posexplode(split(student,',')) sn as student_index_sn,student_namelateral view posexplode(split(score,',')) sc as student_index_sc,student_scorewhere student_index_sn = student_index_sc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4ã€-Hiveæˆ–sparkä¸­æ‰§è¡Œsqlå­—ç¬¦å¸¸é‡åŒ…å«-æ—¶ä¼šæŠ¥é”™"><a href="#4ã€-Hiveæˆ–sparkä¸­æ‰§è¡Œsqlå­—ç¬¦å¸¸é‡åŒ…å«-æ—¶ä¼šæŠ¥é”™" class="headerlink" title="4ã€ Hiveæˆ–sparkä¸­æ‰§è¡Œsqlå­—ç¬¦å¸¸é‡åŒ…å«;æ—¶ä¼šæŠ¥é”™"></a>4ã€ Hiveæˆ–sparkä¸­æ‰§è¡Œsqlå­—ç¬¦å¸¸é‡åŒ…å«<code>;</code>æ—¶ä¼šæŠ¥é”™</h2><p>æ¯”å¦‚</p><blockquote><p>select instr(â€˜abc;abcâ€™, â€˜;â€™);</p></blockquote><p>æŠ¥é”™</p><blockquote><p>NoViableAltException(-1@[147:1: selectExpression : ( expression | tableAllColumns );])</p></blockquote><p><strong>ä¿®æ”¹ï¼š</strong>éœ€è¦å°†<code>;</code>æ”¹ä¸º<code>ascii</code></p><blockquote><p>select instr(â€˜abc\073abcâ€™, â€˜\073â€™);</p></blockquote><h2 id="5ã€å¦‚ä½•åœ¨-Apache-Hive-ä¸­è§£æ-Json-æ•°ç»„"><a href="#5ã€å¦‚ä½•åœ¨-Apache-Hive-ä¸­è§£æ-Json-æ•°ç»„" class="headerlink" title="5ã€å¦‚ä½•åœ¨ Apache Hive ä¸­è§£æ Json æ•°ç»„"></a>5ã€å¦‚ä½•åœ¨ Apache Hive ä¸­è§£æ Json æ•°ç»„</h2><h3 id="é—®é¢˜1ï¼šä»jsonå­—ç¬¦ä¸²ä¸­è§£æä¸€ä¸ªå­—æ®µ-get-json-object"><a href="#é—®é¢˜1ï¼šä»jsonå­—ç¬¦ä¸²ä¸­è§£æä¸€ä¸ªå­—æ®µ-get-json-object" class="headerlink" title="é—®é¢˜1ï¼šä»jsonå­—ç¬¦ä¸²ä¸­è§£æä¸€ä¸ªå­—æ®µ-get_json_object"></a>é—®é¢˜1ï¼šä»<strong>jsonå­—ç¬¦ä¸²</strong>ä¸­è§£æä¸€ä¸ªå­—æ®µ-get_json_object</h3><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">hive>  SELECT get_json_object('{"website":"www.iteblog.com","name":"è¿‡å¾€è®°å¿†"}', '$.website');OKwww.iteblog.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="é—®é¢˜2ï¼šä»jsonå­—ç¬¦ä¸²ä¸­è§£æå¤šä¸ªå­—æ®µ-json-tuple"><a href="#é—®é¢˜2ï¼šä»jsonå­—ç¬¦ä¸²ä¸­è§£æå¤šä¸ªå­—æ®µ-json-tuple" class="headerlink" title="é—®é¢˜2ï¼šä»jsonå­—ç¬¦ä¸²ä¸­è§£æå¤šä¸ªå­—æ®µ-json_tuple"></a>é—®é¢˜2ï¼šä»<strong>jsonå­—ç¬¦ä¸²</strong>ä¸­è§£æå¤šä¸ªå­—æ®µ-json_tuple</h3><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">hive> SELECT json_tuple('{"website":"www.iteblog.com","name":"è¿‡å¾€è®°å¿†"}', 'website', 'name');OKwww.iteblog.com è¿‡å¾€è®°å¿†<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="é—®é¢˜3ï¼šä»jsonæ•°ç»„ä¸­è§£ææŸä¸€ä¸ªå­—æ®µ-get-json-object"><a href="#é—®é¢˜3ï¼šä»jsonæ•°ç»„ä¸­è§£ææŸä¸€ä¸ªå­—æ®µ-get-json-object" class="headerlink" title="é—®é¢˜3ï¼šä»jsonæ•°ç»„ä¸­è§£ææŸä¸€ä¸ªå­—æ®µ-get_json_object"></a>é—®é¢˜3ï¼šä»<strong>jsonæ•°ç»„</strong>ä¸­è§£ææŸä¸€ä¸ªå­—æ®µ-get_json_object</h3><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">hive> SELECT get_json_object('[{"website":"www.iteblog.com","name":"è¿‡å¾€è®°å¿†"}, {"website":"carbondata.iteblog.com","name":"carbondata ä¸­æ–‡æ–‡æ¡£"}]', '$[0].website');OKwww.iteblog.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>æ³¨æ„ï¼š</strong>è¿™é‡Œä¸å‚è€ƒé“¾æ¥<a href="https://www.iteblog.com/archives/2362.html" target="_blank" rel="noopener">å¦‚ä½•åœ¨ Apache Hive ä¸­è§£æ Json æ•°ç»„</a>ä¸­ä¸åŒçš„æ˜¯ï¼Œå› ä¸ºæˆ‘ç”¨çš„æ˜¯<code>sparkSql</code>ï¼Œæ‰€ä»¥æˆ‘ç”¨çš„æ˜¯<code>$[0].website</code>ï¼Œè€Œå‚è€ƒé“¾æ¥ä½¿ç”¨çš„<code>$.[0].website</code>ï¼Œæˆ‘æŒ‰ç…§<strong>å‚è€ƒé“¾æ¥ç»™çš„æ–¹æ³•åœ¨Hiveä¹Ÿselectä¸å‡ºç­”æ¡ˆï¼ˆå¯èƒ½æ˜¯hiveç‰ˆæœ¬ä¸åŒå§ï¼‰</strong></p><h3 id="é—®é¢˜4ï¼šä»jsonæ•°ç»„ä¸­è§£æå¤šä¸ªå­—æ®µ-å…ˆexplodeå†get-json-objectæˆ–json-tuple"><a href="#é—®é¢˜4ï¼šä»jsonæ•°ç»„ä¸­è§£æå¤šä¸ªå­—æ®µ-å…ˆexplodeå†get-json-objectæˆ–json-tuple" class="headerlink" title="é—®é¢˜4ï¼šä»jsonæ•°ç»„ä¸­è§£æå¤šä¸ªå­—æ®µ-å…ˆexplodeå†get_json_objectæˆ–json_tuple"></a>é—®é¢˜4ï¼šä»<strong>jsonæ•°ç»„</strong>ä¸­è§£æå¤šä¸ªå­—æ®µ-å…ˆexplodeå†get_json_objectæˆ–json_tuple</h3><ul><li>explodeå°†<strong>jsonæ•°ç»„</strong>ç”¨ä¸€è¡Œæ‹†åˆ†æˆå¤šè¡Œ</li><li>ç„¶åå†å¯¹å…¶è¿›è¡Œ<strong>jsonå­—ç¬¦ä¸²</strong>è§£æ</li></ul><p>è¯¦æƒ…è¯·å‚è€ƒ<a href="https://www.iteblog.com/archives/2362.html" target="_blank" rel="noopener">å¦‚ä½•åœ¨ Apache Hive ä¸­è§£æ Json æ•°ç»„</a></p><h2 id="6ã€åˆ é™¤è¡¨ä½†æ˜¯æ²¡åˆ é™¤hdfsæ•°æ®ï¼Œé‡å»ºè¡¨å¹¶å…³è”hdfsæ•°æ®"><a href="#6ã€åˆ é™¤è¡¨ä½†æ˜¯æ²¡åˆ é™¤hdfsæ•°æ®ï¼Œé‡å»ºè¡¨å¹¶å…³è”hdfsæ•°æ®" class="headerlink" title="6ã€åˆ é™¤è¡¨ä½†æ˜¯æ²¡åˆ é™¤hdfsæ•°æ®ï¼Œé‡å»ºè¡¨å¹¶å…³è”hdfsæ•°æ®"></a>6ã€åˆ é™¤è¡¨ä½†æ˜¯æ²¡åˆ é™¤hdfsæ•°æ®ï¼Œé‡å»ºè¡¨å¹¶å…³è”hdfsæ•°æ®</h2><p><a href="https://stackoverflow.com/questions/40043986/hdinsight-hive-msck-repair-table-table-name-throwing-error" target="_blank" rel="noopener">å‚è€ƒ1</a></p><p><a href="https://blog.csdn.net/BabyFish13/article/details/79169496" target="_blank" rel="noopener">å‚è€ƒ2</a></p><h2 id="7ã€HIVEå°†è¡¨åˆ’åˆ†æµ‹è¯•é›†ä¸è®­ç»ƒé›†çš„æ–¹æ³•"><a href="#7ã€HIVEå°†è¡¨åˆ’åˆ†æµ‹è¯•é›†ä¸è®­ç»ƒé›†çš„æ–¹æ³•" class="headerlink" title="7ã€HIVEå°†è¡¨åˆ’åˆ†æµ‹è¯•é›†ä¸è®­ç»ƒé›†çš„æ–¹æ³•"></a>7ã€HIVEå°†è¡¨åˆ’åˆ†æµ‹è¯•é›†ä¸è®­ç»ƒé›†çš„æ–¹æ³•</h2><ul><li><p><a href="https://www.thinbug.com/q/23548892" target="_blank" rel="noopener">å°†Hiveè¡¨æ‹†åˆ†ä¸ºæµ‹è¯•é›†å’Œè®­ç»ƒé›†</a></p></li><li><p><a href="https://www.iteblog.com/archives/1996.html" target="_blank" rel="noopener">https://www.iteblog.com/archives/1996.html</a></p></li></ul><pre class="line-numbers language-lang-hiveql"><code class="language-lang-hiveql">from ( select *, (rand() * 100 <= x) as is_test_set from my_table) tinsert overwrite directory '/test_set' select * where is_test_set = trueinsert overwrite directory '/training_set' select * where is_test_set = false;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8ã€HIVEæ—¥æœŸæ“ä½œ"><a href="#8ã€HIVEæ—¥æœŸæ“ä½œ" class="headerlink" title="8ã€HIVEæ—¥æœŸæ“ä½œ"></a>8ã€HIVEæ—¥æœŸæ“ä½œ</h2><h3 id="è·å–æ—¶é—´æˆ³"><a href="#è·å–æ—¶é—´æˆ³" class="headerlink" title="è·å–æ—¶é—´æˆ³"></a>è·å–æ—¶é—´æˆ³</h3><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">select unix_timestamp('2015-04-30 13:51:20');select unix_timestamp('2015-04-30');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="è½¬æ ¼å¼"><a href="#è½¬æ ¼å¼" class="headerlink" title="è½¬æ ¼å¼"></a>è½¬æ ¼å¼</h3><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">select from_unixtime(1323308943,'yyyyMMdd');select from_unixtime(unix_timestamp('2015-04-30', 'yyyy-MM-dd'), 'yyyyMMdd');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="9ã€HIVEä¸­distinctå’Œgroup-byçš„åŒºåˆ«"><a href="#9ã€HIVEä¸­distinctå’Œgroup-byçš„åŒºåˆ«" class="headerlink" title="9ã€HIVEä¸­distinctå’Œgroup byçš„åŒºåˆ«"></a>9ã€HIVEä¸­<code>distinct</code>å’Œ<code>group by</code>çš„åŒºåˆ«</h2><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">å‰è€…æ˜¯å»é‡ï¼Œåè€…æ˜¯åˆ†ç»„reduceä½œä¸šä¸ªæ•°ä¸åŒï¼Œdistinctä¼šåœ¨ä¸€ä¸ªreduceä¸­å»é‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="10ã€count-å’Œ-count-1-å’Œcount-åˆ—å-åŒºåˆ«"><a href="#10ã€count-å’Œ-count-1-å’Œcount-åˆ—å-åŒºåˆ«" class="headerlink" title="10ã€count(*) å’Œ count(1)å’Œcount(åˆ—å)åŒºåˆ«"></a>10ã€count(*) å’Œ count(1)å’Œcount(åˆ—å)åŒºåˆ«</h2><pre class="line-numbers language-lang-markdown"><code class="language-lang-markdown">* æ‰§è¡Œæ•ˆæœä¸Š ï¼š  count(\*)åŒ…æ‹¬äº†æ‰€æœ‰çš„åˆ—ï¼Œç›¸å½“äºè¡Œæ•°ï¼Œåœ¨ç»Ÿè®¡ç»“æœçš„æ—¶å€™ï¼Œ ä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºNULL  count(1)åŒ…æ‹¬äº†å¿½ç•¥æ‰€æœ‰åˆ—ï¼Œç”¨1ä»£è¡¨ä»£ç è¡Œï¼Œåœ¨ç»Ÿè®¡ç»“æœçš„æ—¶å€™ï¼Œ ä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºNULL  count(åˆ—å)åªåŒ…æ‹¬åˆ—åé‚£ä¸€åˆ—ï¼Œåœ¨ç»Ÿè®¡ç»“æœçš„æ—¶å€™ï¼Œä¼šå¿½ç•¥åˆ—å€¼ä¸ºç©ºï¼ˆè¿™é‡Œçš„ç©ºä¸æ˜¯åªç©ºå­—ç¬¦ä¸²æˆ–è€…0ï¼Œè€Œæ˜¯è¡¨ç¤ºnullï¼‰çš„è®¡æ•°ï¼Œ å³æŸä¸ªå­—æ®µå€¼ä¸ºNULLæ—¶ï¼Œä¸ç»Ÿè®¡ã€‚* æ‰§è¡Œæ•ˆç‡ä¸Šï¼š  åˆ—åä¸ºä¸»é”®ï¼Œcount(åˆ—å)ä¼šæ¯”count(1)å¿«  åˆ—åä¸ä¸ºä¸»é”®ï¼Œcount(1)ä¼šæ¯”count(åˆ—å)å¿«  å¦‚æœè¡¨å¤šä¸ªåˆ—å¹¶ä¸”æ²¡æœ‰ä¸»é”®ï¼Œåˆ™ count(1)çš„æ‰§è¡Œæ•ˆç‡ä¼˜äº count(\*) å¦‚æœæœ‰ä¸»é”®ï¼Œåˆ™ select count(ä¸»é”®)çš„æ‰§è¡Œæ•ˆç‡æ˜¯æœ€ä¼˜çš„  å¦‚æœè¡¨åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œåˆ™ select count(\*) æœ€ä¼˜ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11ã€æ±‚ç´¯è®¡å€¼"><a href="#11ã€æ±‚ç´¯è®¡å€¼" class="headerlink" title="11ã€æ±‚ç´¯è®¡å€¼"></a>11ã€æ±‚ç´¯è®¡å€¼</h2><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><div class="table-container"><table><thead><tr><th>ds</th><th>cash</th><th>ç´¯åŠ å€¼</th></tr></thead><tbody><tr><td>20200101</td><td>10</td><td>10</td></tr><tr><td>20200102</td><td>20</td><td>30</td></tr><tr><td></td><td></td></tr></tbody></table></div><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">SELECTds,sum(cash),sum(sum(cash)) over(distribute by substr(ds, 1, 6) sort by ds rows between UNBOUNDED PRECEDING AND CURRENT ROW) as cumulativefrom table_nameWHERE ds BETWEEN '20200901' AND '20201020'group by dsorder by ds<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="12ã€å››èˆäº”å…¥"><a href="#12ã€å››èˆäº”å…¥" class="headerlink" title="12ã€å››èˆäº”å…¥"></a>12ã€å››èˆäº”å…¥</h2><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">selectround(cast(prob as double)),round(cast(prob as double), 2),floor(cast(prob as double)), --å‘ä¸‹å–æ•´ceil(cast(prob as double)), --å‘ä¸Šå–æ•´<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="13ã€è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§"><a href="#13ã€è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§" class="headerlink" title="13ã€è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§"></a>13ã€è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§</h2><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">SET mapreduce.job.priority=VERY_HIGH;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><a href="https://blog.csdn.net/yisun123456/article/details/82857150" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥ï¼šyarnè®¾ç½®ä¼˜å…ˆçº§</a></li></ul><h2 id="14ã€æ±‚è¿ç»­ç™»å½•å¤©æ•°"><a href="#14ã€æ±‚è¿ç»­ç™»å½•å¤©æ•°" class="headerlink" title="14ã€æ±‚è¿ç»­ç™»å½•å¤©æ•°"></a>14ã€æ±‚è¿ç»­ç™»å½•å¤©æ•°</h2><ul><li><a href="https://blog.csdn.net/theodorewy/article/details/101444607" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">SELECTudid,row2,count(1) as num,count(distinct ds) as dis_numFROM(    SELECT    udid,    ds,    substr(ds, 7, 2) as day_num,    dense_rank() OVER(PARTITION BY udid ORDER BY ds) as row1,    int(substr(ds, 7, 2))-dense_rank() OVER(PARTITION BY udid ORDER BY ds) as row2    FROM table_name    WHERE ds BETWEEN '20211101' AND '20211105') t1GROUP BY udid, row2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="15ã€æ±‚è¿ç»­æ”¯ä»˜æ¬¡æ•°"><a href="#15ã€æ±‚è¿ç»­æ”¯ä»˜æ¬¡æ•°" class="headerlink" title="15ã€æ±‚è¿ç»­æ”¯ä»˜æ¬¡æ•°"></a>15ã€æ±‚è¿ç»­æ”¯ä»˜æ¬¡æ•°</h2><ul><li><a href="https://blog.csdn.net/zhenglit/article/details/88063821" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">SELECTudid,item_name,row2_row1,min(buy_time),count(1) as cntFROM(    select    udid,    item_name,    buy_time,    row_number() OVER(PARTITION BY udid, item_name ORDER BY buy_time) as row1,    row_number() OVER(PARTITION BY udid ORDER BY buy_time) as row2,    row_number() OVER(PARTITION BY udid ORDER BY buy_time) - row_number() OVER(PARTITION BY udid, item_name ORDER BY buy_time) as row2_row1    from table_name) t1GROUP BY udid, item_name, row2_row1ORDER BY udid, item_name, row2_row1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="16ã€é•¿åº¦è¡¨è½¬å®½åº¦è¡¨"><a href="#16ã€é•¿åº¦è¡¨è½¬å®½åº¦è¡¨" class="headerlink" title="16ã€é•¿åº¦è¡¨è½¬å®½åº¦è¡¨"></a>16ã€é•¿åº¦è¡¨è½¬å®½åº¦è¡¨</h2><ul><li><a href="https://cloud.tencent.com/developer/article/1430540" target="_blank" rel="noopener">ä»é•¿æ ¼å¼è¡¨åˆ°å®½æ ¼å¼è¡¨çš„è½¬æ¢</a></li></ul><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">select     user_no,     str_to_map(concat_ws(',',sort_array(collect_set(concat_ws(':', message, detail))))) message1     from user_info     group by user_no     order by user_no<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-lang-hive"><code class="language-lang-hive">select     user_no,    message1['name'] name,    message1['sex'] sex,    message1['age'] age,    message1['education'] education,    message1['regtime'] regtime,    message1['first_buytime'] first_buytimefrom   (select      user_no,      str_to_map(concat_ws(',',collect_set(concat_ws(':', message, detail)))) message1      from user_info      group by user_no      order by user_no   ) a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—å¹¿å‘Šä¹‹ç†è®º2</title>
      <link href="/2019/10/12/ji-suan-guang-gao-zhi-li-lun-2/"/>
      <url>/2019/10/12/ji-suan-guang-gao-zhi-li-lun-2/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/10/12/ji-suan-guang-gao-zhi-li-lun-2/image-20210621155717047.png" alt="image-20210621155717047"></p><h1 id="ä¸€ã€åè¯è§£é‡Š"><a href="#ä¸€ã€åè¯è§£é‡Š" class="headerlink" title="ä¸€ã€åè¯è§£é‡Š"></a>ä¸€ã€åè¯è§£é‡Š</h1><p><img src="/2019/10/12/ji-suan-guang-gao-zhi-li-lun-2/rtb_china.jpg" alt="å›¾ï¼šrtb_china"></p><h2 id="å¹¿å‘Šä¸»"><a href="#å¹¿å‘Šä¸»" class="headerlink" title="å¹¿å‘Šä¸»"></a>å¹¿å‘Šä¸»</h2><p>æœ‰å¹¿å‘Šéœ€æ±‚çš„å®¢æˆ·å…¬å¸ï¼Œä¹Ÿç§°ä¸ºéœ€æ±‚æ–¹</p><h2 id="åª’ä½“"><a href="#åª’ä½“" class="headerlink" title="åª’ä½“"></a>åª’ä½“</h2><p>å¯ä»¥æ˜¯ç½‘ç«™æˆ–è€…<code>app</code>ï¼Œå³æœ‰å¤šä½™çš„å¹¿å‘Šä½å¯ä»¥å‡ºå”®ï¼Œä¹Ÿç§°ä¸ºä¾›ç»™æ–¹</p><h2 id="RTBï¼šï¼ˆReal-Time-Biddingï¼Œå®æ—¶ç«ä»·ï¼‰"><a href="#RTBï¼šï¼ˆReal-Time-Biddingï¼Œå®æ—¶ç«ä»·ï¼‰" class="headerlink" title="RTBï¼šï¼ˆReal Time Biddingï¼Œå®æ—¶ç«ä»·ï¼‰"></a>RTBï¼šï¼ˆ<code>Real Time Bidding</code>ï¼Œå®æ—¶ç«ä»·ï¼‰</h2><p>ç»¼åˆåˆ©ç”¨ç®—æ³•ã€å¤§æ•°æ®æŠ€æœ¯åœ¨ç½‘ç«™æˆ–ç§»åŠ¨åº”ç”¨ä¸Šå¯¹åœ¨çº¿çš„æµé‡å®æ—¶è¯„ä¼°ä»·å€¼ï¼Œç„¶åå‡ºä»·çš„ç«ä»·æŠ€æœ¯</p><h2 id="DSPï¼ˆéœ€æ±‚æ–¹å¹³å°ï¼‰"><a href="#DSPï¼ˆéœ€æ±‚æ–¹å¹³å°ï¼‰" class="headerlink" title="DSPï¼ˆéœ€æ±‚æ–¹å¹³å°ï¼‰"></a>DSPï¼ˆéœ€æ±‚æ–¹å¹³å°ï¼‰</h2><p>ä¸ºå„å¹¿å‘Šä¸»æˆ–è€…ä»£ç†å•†æä¾›å®æ—¶ç«ä»·æŠ•æ”¾å¹³å°ï¼Œå¯ä»¥åœ¨è¯¥å¹³å°ä¸Šç®¡ç†å¹¿å‘Šæ´»åŠ¨åŠå…¶æŠ•æ”¾ç­–ç•¥ï¼Œå¹¶ä¸”é€šè¿‡æŠ€æœ¯å’Œç®—æ³•ä¼˜åŒ–æŠ•æ”¾æ•ˆæœï¼Œä»ä¸­è·å¾—æ”¶ç›Š</p><h2 id="SSPï¼ˆä¾›åº”æ–¹å¹³å°ï¼‰"><a href="#SSPï¼ˆä¾›åº”æ–¹å¹³å°ï¼‰" class="headerlink" title="SSPï¼ˆä¾›åº”æ–¹å¹³å°ï¼‰"></a>SSPï¼ˆä¾›åº”æ–¹å¹³å°ï¼‰</h2><p>ä¸ºå„åª’ä½“æä¾›ä¸€è‡´ã€é›†æˆçš„å¹¿å‘Šä½åº“å­˜ç®¡ç†ç¯å¢ƒ</p><h2 id="DMPï¼ˆæ•°æ®ç®¡ç†å¹³å°ï¼‰"><a href="#DMPï¼ˆæ•°æ®ç®¡ç†å¹³å°ï¼‰" class="headerlink" title="DMPï¼ˆæ•°æ®ç®¡ç†å¹³å°ï¼‰"></a>DMPï¼ˆæ•°æ®ç®¡ç†å¹³å°ï¼‰</h2><p>æ•´åˆå„æ–¹æ•°æ®å¹¶æä¾›æ•°æ®åˆ†æï¼Œæ•°æ®ç®¡ç†ã€æ•°æ®è°ƒç”¨ç­‰ï¼Œç”¨æ¥æŒ‡å¯¼å¹¿å‘Šä¸»è¿›è¡Œå¹¿å‘Šä¼˜åŒ–å’ŒæŠ•æ”¾å†³ç­–</p><h2 id="ADXï¼ˆAd-Exchangeï¼Œå¹¿å‘Šäº¤æ˜“å¹³å°ï¼‰"><a href="#ADXï¼ˆAd-Exchangeï¼Œå¹¿å‘Šäº¤æ˜“å¹³å°ï¼‰" class="headerlink" title="ADXï¼ˆAd Exchangeï¼Œå¹¿å‘Šäº¤æ˜“å¹³å°ï¼‰"></a>ADXï¼ˆAd Exchangeï¼Œå¹¿å‘Šäº¤æ˜“å¹³å°ï¼‰</h2><p>åŒæ—¶æ¥å…¥äº†å¤§é‡çš„<code>DSP</code>å’Œ<code>SSP</code>ï¼Œç»™åŒæ–¹æä¾›ä¸€ä¸ªâ€œäº¤æ˜“åœºæ‰€â€ï¼Œå°†<code>SSP</code>æ–¹çš„å¹¿å‘Šå±•ç¤ºéœ€æ±‚ä»¥æ‹å–çš„æ–¹å¼å–ç»™<code>DSP</code>æ–¹ã€‚å¯ä»¥ç±»æ¯”äºè‚¡ç¥¨äº¤æ˜“ä¸­çš„è¯åˆ¸å¤§å…è§’è‰²</p><h2 id="CTRï¼ˆç‚¹å‡»ç‡ï¼‰"><a href="#CTRï¼ˆç‚¹å‡»ç‡ï¼‰" class="headerlink" title="CTRï¼ˆç‚¹å‡»ç‡ï¼‰"></a>CTRï¼ˆç‚¹å‡»ç‡ï¼‰</h2><p>å¹¿å‘Šç‚¹å‡»ä¸å¹¿å‘Šå±•ç°çš„æ¯”ä¾‹ï¼Œè¿™æ˜¯å¹¿å‘Šä¸»ã€å„å¤§<code>DSP</code>å‚å•†éƒ½éå¸¸é‡è§†çš„ä¸€ä¸ªæ•°å­—ï¼Œä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œè¿™ä¸€æ•°å­—å¯ä»¥å½±å“åˆ°å¹¿å‘Šçš„æ’åºã€å‡ºä»·ç­‰ç¯èŠ‚ï¼Œä»ä¸šåŠ¡æ¥çœ‹ï¼Œè¿™æ˜¯è¿è¥äººå‘˜çš„è€ƒæ ¸æŒ‡æ ‡ä¹‹ä¸€</p><ul><li><strong>CTR=ç‚¹å‡»é‡/å±•ç°é‡ *100%</strong></li></ul><h2 id="CVRï¼ˆè½¬åŒ–ç‡ï¼‰"><a href="#CVRï¼ˆè½¬åŒ–ç‡ï¼‰" class="headerlink" title="CVRï¼ˆè½¬åŒ–ç‡ï¼‰"></a>CVRï¼ˆè½¬åŒ–ç‡ï¼‰</h2><p>è½¬åŒ–ï¼ˆä¸»è¦ç”±å¹¿å‘Šä¸»å®šä¹‰ï¼Œå¯ä»¥æ˜¯ä¸€æ¬¡ä¸‹å•æˆ–æ˜¯ä¸€æ¬¡ä¸‹è½½<code>app</code>ç­‰ï¼‰æ¬¡æ•°ä¸åˆ°è¾¾æ¬¡æ•°çš„æ¯”ä¾‹</p><ul><li><strong>CVR= è½¬åŒ–é‡/ç‚¹å‡»é‡ *100%</strong></li></ul><h2 id="eCPMï¼ˆåƒæ¬¡å±•ç¤ºæœŸæœ›æ”¶å…¥ï¼‰"><a href="#eCPMï¼ˆåƒæ¬¡å±•ç¤ºæœŸæœ›æ”¶å…¥ï¼‰" class="headerlink" title="eCPMï¼ˆåƒæ¬¡å±•ç¤ºæœŸæœ›æ”¶å…¥ï¼‰"></a>eCPMï¼ˆåƒæ¬¡å±•ç¤ºæœŸæœ›æ”¶å…¥ï¼‰</h2><p>ç‚¹å‡»ç‡ * ç‚¹å‡»ä»·å€¼ï¼Œè¿™ä¸ªæ•°å­—åœ¨è®¡ç®—å¹¿å‘Šä¸­æ˜¯æ ¸å¿ƒæŒ‡æ ‡ï¼Œæ¶‰åŠåˆ°å¯¹å¬å›å¹¿å‘Šçš„æ’åºç­–ç•¥ï¼Œä»¥åŠæœ€ç»ˆå‡ºä»·ç­–ç•¥</p><h2 id="CPMï¼ˆCost-per-mileï¼‰"><a href="#CPMï¼ˆCost-per-mileï¼‰" class="headerlink" title="CPMï¼ˆCost per mileï¼‰"></a>CPMï¼ˆCost per mileï¼‰</h2><p>æ¯åƒæ¬¡å±•ç°æ”¶è´¹ï¼Œæœ€å¸¸è§çš„å¹¿å‘Šæ¨¡å¼ï¼Œå³ä¸è€ƒè™‘ç‚¹å‡»æ¬¡æ•°ã€è½¬åŒ–æ¬¡æ•°ï¼Œåªè¦å¹¿å‘Šåœ¨ç½‘ç«™ä¸Šè¢«å±•ç°ç»™ä¸€åƒä¸ªäººçœ‹åˆ°å°±æ”¶è´¹ï¼Œæ˜¯å¤§å‹ç½‘ç«™å˜ç°çš„æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚å¯¹å¹¿å‘Šä¸»æ¥è¯´ï¼Œé€‚åˆäºæ³¨é‡æ¨å¹¿å“ç‰Œçš„å¹¿å‘Šï¼ŒåŠ›æ±‚æœ€å¿«æœ€å¹¿çš„è§¦åŠå¤§ä¼—</p><ul><li><strong>CPM=å¹¿å‘Šè´¹/å±•ç°é‡ *1000</strong></li></ul><h2 id="CPCï¼ˆCost-per-clickï¼‰"><a href="#CPCï¼ˆCost-per-clickï¼‰" class="headerlink" title="CPCï¼ˆCost per clickï¼‰"></a>CPCï¼ˆCost per clickï¼‰</h2><p>æ¯æ¬¡ç‚¹å‡»æ”¶è´¹ï¼Œæ— è®ºå¹¿å‘Šè¢«å±•ç°äº†å¤šå°‘æ¬¡ï¼Œåªè¦æ²¡æœ‰äº§ç”Ÿç‚¹å‡»å°±ä¸æ”¶è´¹ã€‚å¯¹äºå¹¿å‘Šä¸»æ¥è¯´é€‰æ‹© <code>CPC</code> æ¨¡å¼å¯ä»¥æœ‰åŠ©äºæå‡ç‚¹å‡»é‡ã€å‘ç°æ½œåœ¨ç”¨æˆ·ï¼Œè¿›è€Œå¯ä»¥çœŸæ­£åšåˆ°ç²¾å‡†è¥é”€ï¼›å¯¹äºå¹¿å¤§<code>DSP</code>å‚å•†æ¥è¯´ï¼Œè¿™ç§æ”¶è´¹æ¨¡å¼ä¹Ÿæ˜¯è·å–åˆ©æ¶¦çš„æœ€æœ‰æ•ˆæ¥æºä¹‹ä¸€</p><ul><li><strong>CPC=å¹¿å‘Šè´¹/ç‚¹å‡»é‡</strong></li></ul><h2 id="CPAï¼ˆCost-per-actionï¼‰"><a href="#CPAï¼ˆCost-per-actionï¼‰" class="headerlink" title="CPAï¼ˆCost per actionï¼‰"></a>CPAï¼ˆCost per actionï¼‰</h2><p>æ¯æ¬¡åŠ¨ä½œæ”¶è´¹ï¼Œæ­¤å¤„çš„åŠ¨ä½œä¸€èˆ¬å®šä¹‰ä¸ºè½¬åŒ–ï¼Œå¯ä»¥æ˜¯æ³¨å†Œã€å’¨è¯¢ã€äº¤æ˜“ã€ä¸‹è½½ã€ç•™è¨€ç­‰ç­‰ï¼ŒæŒ‰ç…§è½¬åŒ–çš„æ•°é‡æ¥æ”¶è´¹ã€‚å¯¹äºå¹¿å‘Šä¸»æ¥è¯´ï¼Œè¿™æ˜¯æ€§ä»·æ¯”è¾ƒé«˜çš„ä¸€ç§æ”¶è´¹æ–¹å¼ï¼Œä½†æ˜¯å¯¹äºDPSå’Œåª’ä½“æ–¹æ¥è¯´ï¼Œæƒ³è¦æŠŠè¿™ç§æ”¶è´¹åšå¥½ï¼Œå´æ˜¯æœ‰ç›¸å½“çš„éš¾åº¦ã€‚å› æ­¤ï¼Œç›®å‰ä¹Ÿåªæœ‰å¤§å‚æˆ–è€…æŠ€æœ¯å®åŠ›æ·±åšçš„<code>DSP</code>å‚å•†æ‰æœ‰èƒ½åŠ›æ¥è¿™ç§å•å­</p><ul><li><strong>CPA=å¹¿å‘Šè´¹/è½¬åŒ–é‡</strong></li></ul><h2 id="LTVï¼ˆLife-Time-Valueï¼‰"><a href="#LTVï¼ˆLife-Time-Valueï¼‰" class="headerlink" title="LTVï¼ˆLife Time Valueï¼‰"></a>LTVï¼ˆLife Time Valueï¼‰</h2><p>å®¢æˆ·ç»ˆç”Ÿä»·å€¼ã€‚æ˜¯å…¬å¸ä»ç”¨æˆ·æ‰€æœ‰çš„äº’åŠ¨ä¸­æ‰€å¾—åˆ°çš„å…¨éƒ¨ç»æµæ”¶ç›Šçš„æ€»å’Œ</p><ul><li>LTVçš„è®¡ç®—æ¶‰åŠåˆ°é¡¾å®¢ä¿æŒç‡ã€é¡¾å®¢æ¶ˆè´¹ç‡ã€å˜åŠ¨æˆæœ¬ã€è·å¾—æˆæœ¬ã€è´´ç°ç‡ç­‰ä¿¡æ¯çš„æ­£ç¡®å–å¾—ã€‚</li><li>é¡¾å®¢ä¿ç•™ç‡ï¼ˆretention rateï¼ŒRRï¼‰= æœ¬å¹´åº¦çš„é¡¾å®¢æ€»æ•° / ä¸Šå¹´åº¦çš„é¡¾å®¢æ€»æ•°ï¼›</li><li>é¡¾å®¢æ¶ˆè´¹ç‡ï¼ˆspending rateï¼ŒSRï¼‰= é¡¾å®¢æ€»æ¶ˆè´¹é¢ / é¡¾å®¢æ€»æ•°ï¼›</li><li>å˜åŠ¨æˆæœ¬ï¼ˆvariable costï¼ŒVCï¼‰= äº§å“æˆæœ¬ + æœåŠ¡<a href="https://www.52by.com/article_tag/guanli" target="_blank" rel="noopener">ç®¡ç†</a>è´¹ç”¨ + ä¿¡ç”¨å¡æˆæœ¬ç­‰ï¼›</li><li>è·å¾—æˆæœ¬ï¼ˆacquisition costï¼ŒACï¼‰= æœ¬å¹´åº¦å¹¿å‘Šã€<a href="https://www.52by.com/article_tag/cuxiao" target="_blank" rel="noopener">ä¿ƒé”€</a>è´¹ç”¨ / æœ¬å¹´åº¦é¡¾å®¢æ€»æ•°ï¼›</li><li>å‡€åˆ©æ¶¦ï¼ˆgross profitï¼ŒGPï¼‰= æ€»æ”¶å…¥ â€“ æ€»æˆæœ¬ï¼›</li><li>è´´ç°ç‡ï¼ˆdiscount rateï¼ŒDRï¼‰= [1 +ï¼ˆé£é™©ç³»æ•°*é“¶è¡Œåˆ©ç‡ï¼‰]n ï¼›</li><li>åˆ©æ¶¦å‡€ç°å€¼ï¼ˆnet present value profitï¼ŒNPVï¼‰= GP / DR ï¼›</li><li>ç´¯ç§¯NPV = ç‰¹å®šæ—¶é—´å†…æ¯å¹´NPV çš„æ€»å’Œï¼›</li><li><strong>é¡¾å®¢ç»ˆèº«ä»·å€¼ï¼ˆLTVï¼‰= ç´¯ç§¯NPV / é¡¾å®¢æ€»æ•°</strong></li></ul><h2 id="é‡‡è´­äº¤æ˜“å¹³å°-Trading-desk"><a href="#é‡‡è´­äº¤æ˜“å¹³å°-Trading-desk" class="headerlink" title="é‡‡è´­äº¤æ˜“å¹³å°(Trading desk)"></a>é‡‡è´­äº¤æ˜“å¹³å°(Trading desk)</h2><p>ç¨‹åºåŒ–ç‹¬ç«‹åª’ä½“äº¤æ˜“å¹³å°ï¼ŒåŠŸèƒ½ç±»ä¼¼äº DSPï¼Œé€šè¿‡å¯¹æ¥å¤šä¸ª DSPæ¥è¿›è¡Œå¹¿å‘Šçš„ä¼˜åŒ–æŠ•æ”¾ï¼Œå®ƒèƒ½å¤Ÿå°†å„ç±»è´­ä¹°æ–¹å¼ç»Ÿä¸€ç®¡ç†å’Œé¢„ç®—åˆ†é…ï¼Œå¯¹å“ç‰Œå¹¿å‘Šçš„æœ‰æ•ˆç®¡ç†ç”„åˆ«åƒåœ¾åª’ä½“ã€‚</p><h2 id="ç¨‹åºåŒ–åˆ›æ„å¹³å°-programmatic-creative"><a href="#ç¨‹åºåŒ–åˆ›æ„å¹³å°-programmatic-creative" class="headerlink" title="ç¨‹åºåŒ–åˆ›æ„å¹³å°(programmatic creative)"></a>ç¨‹åºåŒ–åˆ›æ„å¹³å°(programmatic creative)</h2><p>åŠ¨æ€å®æ—¶åˆ›æ„ä¼˜åŒ–å¹³å°ï¼Œå®ƒå¸®åŠ©å¹¿å‘Šä¸»è¯„ä¼°å’Œä¼˜åŒ–å¹¿å‘Šåˆ›æ„ï¼Œèƒ½æ›´å¥½çš„åœ¨æå‡åœ¨å®æ—¶ç«ä»·å¹¿å‘ŠæŠ•æ”¾ä¸­çš„æ•ˆæœã€‚</p><h2 id="å¹¿å‘ŠéªŒè¯-ad-verification"><a href="#å¹¿å‘ŠéªŒè¯-ad-verification" class="headerlink" title="å¹¿å‘ŠéªŒè¯(ad verification)"></a>å¹¿å‘ŠéªŒè¯(ad verification)</h2><p>å®‰å…¨æœ‰æ•ˆçš„è´­ä¹°å¹¿å‘Šçš„æ‰‹æ®µï¼Œè¢«è®¸å¤šå¹¿å‘Šä»£ç†è§†ä½œå¹¿å‘Šç­–ç•¥ä¸­å¿…ä¸å¯å°‘çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚</p><h1 id="äºŒã€ç«ä»·æµç¨‹"><a href="#äºŒã€ç«ä»·æµç¨‹" class="headerlink" title="äºŒã€ç«ä»·æµç¨‹"></a>äºŒã€ç«ä»·æµç¨‹</h1><p><img src="/2019/10/12/ji-suan-guang-gao-zhi-li-lun-2/bid_process.jpg" alt="å›¾ï¼šbid_process"></p><p><img src="/2019/10/12/ji-suan-guang-gao-zhi-li-lun-2/bid_process1.png" alt="å›¾ï¼šbid_process-ç®€å•ç‰ˆ"></p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><ol><li>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®ç½‘ç«™</li><li>æµè§ˆå™¨å‘é€å¹¿å‘Šè¯·æ±‚ç»™ç½‘ç«™æœåŠ¡å™¨ï¼Œå³åª’ä½“</li><li>åª’ä½“å°†è¯¥æ›å…‰å±•ç¤ºé€šè¿‡SSPå‘é€ç»™Adx</li><li>Adxç»„ç»‡ä¸€æ¬¡ç«ä»·ï¼Œå°†æœ¬æ¬¡çš„ç«ä»·è¯·æ±‚é€šçŸ¥ç»™ä¸ä¹‹å¯¹æ¥çš„æ‰€æœ‰DSPæ–¹ï¼Œå¹¶ä¼ è¾“ç”¨æˆ·IDã€ç”¨æˆ·IPä»¥åŠå¹¿å‘Šä½ä¿¡æ¯ç­‰ç­‰</li><li>å„å®¶DSPç›‘å¬æœåŠ¡æ”¶åˆ°Adxå‘æ¥çš„ç«ä»·è¯·æ±‚åï¼Œæ ¹æ®å‘é€æ¥çš„å½“å‰ç”¨æˆ·çš„ä¿¡æ¯ã€ä¸Šä¸‹æ–‡ä¿¡æ¯ã€ä»£ç†çš„å¹¿å‘Šä¸»ä¿¡æ¯å¯¹ç…§æŠ•æ”¾éœ€æ±‚ï¼Œå¹¶ä¸è‡ªå®¶çš„DMPæ•°æ®ç®¡ç†å¹³å°æˆ–ç”¨æˆ·æ•°æ®åº“æ¥è¯„ä¼°è¯¥è¯·æ±‚ï¼Œå¹¶é€šè¿‡DSPçš„ç«ä»·å¼•æ“åˆ¤æ–­æ˜¯å¦å‚ä¸ç«ä»·ï¼Œè‹¥å‚ä¸åˆ™ç»™å‡ºç«æ ‡ä»·æ ¼</li><li>Adxæ”¶åˆ°æ‰€æœ‰å‡ºä»·å“åº”æˆ–æˆªæ­¢æ—¶é—´åï¼ˆé€šå¸¸è§„å®šæ˜¯100msï¼‰æ ¹æ®å‡ºä»·æ’åºï¼Œé€šçŸ¥å‡ºä»·æœ€é«˜çš„DSPèƒœå‡ºï¼ŒåŒæ—¶å°†èƒœè€…çš„ç«ä»·ä¿¡æ¯å‘ŠçŸ¥SSP</li><li>èƒœè€…DSPä¼šæ”¶åˆ°Adxå‘é€çš„ç«ä»·æ¶ˆæ¯ï¼ˆWinNoticeï¼‰ï¼Œè¡¨ç¤ºè¯¥æ¬¡å±•ç°å·²ç»ç«ä»·æˆåŠŸã€‚DSPæ­¤æ—¶å°†å¹¿å‘Šç‰©æ–™ä¼ é€è‡³SSPï¼ŒSSP å‘é€å¹¿å‘Šæ›å…‰è¯·æ±‚ç»™å¹¿å‘ŠæœåŠ¡å™¨</li><li>å¹¿å‘ŠæœåŠ¡å™¨å°†å¹¿å‘ŠæŠ•é€åˆ°ç”¨æˆ·æµè§ˆçš„é¡µé¢</li></ol><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>æœ‰ä¸¤ç‚¹éœ€è¦è¯´æ˜ï¼š</p><ol><li>ä»¥ä¸Šæµç¨‹éœ€åœ¨100æ¯«ç§’ä¹‹å†…å®Œæˆï¼Œä¹Ÿå°±æ˜¯ä¸€çœ¨çœ¼çš„åŠŸå¤«éƒ½ä¸åˆ°ï¼Œè¿™æ ·æ‰èƒ½è®©è®¿é—®ç½‘ç«™çš„ç”¨æˆ·é©¬ä¸Šçœ‹åˆ°å¹¿å‘Šã€‚</li><li>è™½ç„¶ç«ä»·æœ€åçš„èƒœè€…æ˜¯å‡ºä»·æœ€é«˜çš„DSPï¼Œä½†å…¶å®é™…æ”¯ä»˜çš„ä»·æ ¼æ˜¯å‡ºä»·ç¬¬äºŒé«˜çš„æŠ¥ä»·å†åŠ ä¸Šä¸€ä¸ªæœ€å°å€¼ï¼Œè¿™å°±æ˜¯è‘—åçš„å¹¿ä¹‰äºŒé˜¶æ‹å–(GSP)ã€‚è¿™ç§å®šä»·æ¨¡å¼çš„å¥½å¤„ä¸»è¦æ˜¯ä¸ºäº†é¿å…å„å®¶DSPåœ¨å¤šæ¬¡ç«ä»·ä¸­ï¼Œä¸‹ä¸€æ¬¡çš„å‡ºä»·åªéœ€æ¯”ä¸Šä¸€æ¬¡çš„èƒœå‡ºä»·æ ¼é«˜ä¸€ç‚¹ç‚¹å³å¯ï¼Œä»è€Œå¯¼è‡´å‡ºä»·è¶Šæ¥è¶Šä½ã€‚åœ¨GSPæ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªèƒœè€…åªéœ€è¦æ”¯ä»˜æ¬¡é«˜å‡ºä»·çš„é‡‘é¢ï¼Œè¿™æ ·å„å®¶DSPä¹Ÿå°±æ²¡æœ‰åŠ¨åŠ›ç›¸äº’å‹ä»·ã€‚GSPæ˜¯ä¸€ç§ç¨³å®šçš„ç«ä»·æ–¹å¼ï¼Œå¯æ“ä½œæ€§å¾ˆå¼ºï¼Œç°é˜¶æ®µå‡ ä¹æ‰€æœ‰çš„äº’è”ç½‘å¹¿å‘Šå¹³å°éƒ½ä½¿ç”¨è¿™ä¸€ç§ç«ä»·æ–¹å¼ã€‚</li></ol><h1 id="ä¸‰ã€æŠ€æœ¯ç»†èŠ‚"><a href="#ä¸‰ã€æŠ€æœ¯ç»†èŠ‚" class="headerlink" title="ä¸‰ã€æŠ€æœ¯ç»†èŠ‚"></a>ä¸‰ã€æŠ€æœ¯ç»†èŠ‚</h1><h2 id="å…¸å‹å¹¿å‘Šç³»ç»Ÿæ¶æ„"><a href="#å…¸å‹å¹¿å‘Šç³»ç»Ÿæ¶æ„" class="headerlink" title="å…¸å‹å¹¿å‘Šç³»ç»Ÿæ¶æ„"></a>å…¸å‹å¹¿å‘Šç³»ç»Ÿæ¶æ„</h2><p><img src="/2019/10/12/ji-suan-guang-gao-zhi-li-lun-2/structure.jpg" alt="å›¾ï¼šstructure"></p><p><strong>ï¼ˆ1ï¼‰å—ä¼—å®šå‘å¹³å°ï¼š</strong>åˆ©ç”¨æ•°æ®æŒ–æ˜ã€æœºå™¨å­¦ä¹ ç­‰æŠ€æœ¯è¿›è¡Œå—ä¼—å®šå‘ã€ç‚¹å‡»ç‡é¢„ä¼°ç­‰å·¥ä½œã€‚å…·ä½“å¯ä»¥ç»†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p><ul><li><strong>ä¼šè¯æ—¥å¿—ç”Ÿæˆï¼ˆSession log generationï¼‰</strong>ï¼šä»å„ä¸ªæ•°æ®å¹³å°æ”¶é›†æ—¥å¿—ï¼Œå¹¶æœ€ç»ˆæ ¹æ®ç”¨æˆ·IDä¸ºä¸»é”®æ±‡é›†æˆä¸€ä»½ç»Ÿä¸€å­˜å‚¨æ ¼å¼çš„æ—¥å¿—ï¼Œä¸ºåç»­çš„æ•°æ®åˆ†æã€ç®—æ³•æ„å»ºæä¾›æ•°æ®æ¥æºã€‚</li><li><strong>è¡Œä¸ºå®šå‘ï¼ˆAudience targetingï¼‰</strong>ï¼šä»ä¼šè¯æ—¥å¿—ä¸­æå–æ•°æ®ï¼Œåˆ©ç”¨æ•°æ®æŒ–æ˜ã€æœºå™¨å­¦ä¹ ç­‰ç®—æ³•å»ºæ¨¡ï¼Œåˆ»ç”»å‡ºç”¨æˆ·çš„è¡Œä¸ºæ¨¡å¼ã€å…´è¶£ç‚¹ç­‰ï¼Œæœ€ç»ˆä¸ºç”¨æˆ·æ‰“ä¸Šç»“æ„åŒ–æ ‡ç­¾ï¼Œä»¥ä¾›å¹¿å‘Šå®šå‘æŠ•æ”¾ä½¿ç”¨ã€‚</li><li><strong>ç‚¹å‡»ç‡å»ºæ¨¡ï¼ˆClick modelingï¼‰</strong>ï¼šä»ä¼šè¯æ—¥å¿—ä¸­æå–é¢„å®šä¹‰çš„ç‰¹å¾ï¼Œè®­ç»ƒç‚¹å‡»ç‡æ¨¡å‹ï¼ŒåŠ è½½åˆ°ç¼“å­˜ä¸­ä¾›çº¿ä¸ŠæŠ•æ”¾ç³»ç»Ÿå†³ç­–æ—¶ä½¿ç”¨ã€‚</li><li><strong>å•†ä¸šæ™ºèƒ½æ¨¡å—ï¼ˆBusiness Intelligenceï¼‰</strong>ï¼šåŒ…æ‹¬ETLï¼ˆExtract-Transform-Loadï¼‰è¿‡ç¨‹ã€Dashboardã€cubeã€‚BIç³»ç»Ÿå¯ä»¥ä¸ºå†³ç­–è€…æä¾›ç›´è§‚ä¸”å³æ—¶çš„æ•°æ®åˆ†æï¼Œè€Œç®—æ³•å¯¹å†³ç­–è€…æ¥è¯´ç›¸å½“äºé»‘ç›’ï¼Œå› æ­¤ï¼Œè®¾è®¡ä¸€ä¸ªè‰¯å¥½çš„BIç³»ç»Ÿå¯ä»¥ä¸ºå†³ç­–æä¾›æœ‰åŠ›çš„å¸®åŠ©ã€‚</li></ul><p><strong>ï¼ˆ2ï¼‰é«˜å¹¶å‘çš„æŠ•é€ç³»ç»Ÿ</strong>ï¼šå³åœ¨çº¿çš„å¹¿å‘ŠæŠ•æ”¾æœºï¼ˆAd serverï¼‰ï¼Œä¸»è¦ä»»åŠ¡æ˜¯ä¸å„æ¨¡å—äº¤äº’ï¼Œå°†å®ƒä»¬ä¸²è”èµ·æ¥å®Œæˆåœ¨çº¿çš„å¹¿å‘ŠæŠ•æ”¾å†³ç­–ã€‚ç‰¹ç‚¹æ˜¯é«˜å¹¶å‘ï¼Œè¦åšåˆ°10 msçº§åˆ«çš„å®æ—¶å†³ç­–ï¼Œç™¾äº¿æ¬¡/å¤©çš„å¹¿å‘ŠæŠ•æ”¾ç³»ç»Ÿã€‚å…·ä½“å¯ç»†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p><ul><li><strong>å¹¿å‘Šæ£€ç´¢ï¼ˆAd retrievalï¼‰</strong>ï¼šä¹Ÿç§°ä¸ºå¹¿å‘Šå¬å›ï¼Œå³æ ¹æ®ç”¨æˆ·å±æ€§ä»¥åŠé¡µé¢ä¸Šä¸‹æ–‡å±æ€§ä»å¹¿å‘Šç´¢å¼•ï¼ˆAd indexï¼‰ä¸­æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„å¹¿å‘Šå€™é€‰ã€‚</li><li><strong>å¹¿å‘Šæ’åºï¼ˆAd rankingï¼‰</strong>ï¼šä¸»è¦åŠŸèƒ½æ˜¯å¯¹å¹¿å‘Šæ£€ç´¢æ¨¡å—é€æ¥çš„å¹¿å‘Šå€™é€‰é›†è®¡ç®—eCPMï¼Œå¹¶æŒ‰ç…§å€¼çš„å¤§å°å€’æ’ã€‚eCPMçš„è®¡ç®—ä¾èµ–äºå—ä¼—å®šå‘å¹³å°ç¦»çº¿è®¡ç®—å¥½çš„ç‚¹å‡»ç‡ã€‚ç”±äºæœ€ç»ˆæŠ•æ”¾å‡ºçš„å¹¿å‘Šéƒ½æ˜¯æ¥è‡ªäºæ’åºçš„ç»“æœï¼Œå› æ­¤è¿™ä¸€æ¨¡å—ä¹Ÿæ˜¯è‡³å…³é‡è¦ï¼Œæˆä¸ºå„ç§ç®—æ³•æ¨¡å‹å’Œç­–ç•¥å¤§å±•èº«æ‰‹çš„åœ°æ–¹ã€‚</li><li><strong>æ”¶ç›Šç®¡ç†ï¼ˆYield managementï¼‰</strong>ï¼šå°†å±€éƒ¨å¹¿å‘Šæ’åºçš„ç»“æœè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä»¥åšåˆ°å…¨å±€æœ€ä¼˜æ”¶ç›Šã€‚</li></ul><p><strong>ï¼ˆ3ï¼‰æ•°æ®é«˜é€Ÿå…¬è·¯ï¼š</strong>è”é€šåœ¨çº¿ä¸ç¦»çº¿ã€‚ä½œç”¨æ˜¯å‡†å®æ—¶åœ°å°†æ—¥å¿—æ¨é€åˆ°å…¶å®ƒå¹³å°ä¸Šï¼Œä¸€æ˜¯å¿«é€Ÿåœ°åé¦ˆåˆ°çº¿ä¸Šç³»ç»Ÿä¸­ï¼ŒäºŒæ˜¯ç»™BIäººå‘˜å¿«é€Ÿçœ‹ç»“æœã€‚å®ƒè¿˜å¯èƒ½æ”¶é›†å…¶å®ƒå¹³å°çš„æ—¥å¿—ï¼Œæ¯”å¦‚æœç´¢å¹¿å‘Šä¼šæ”¶é›†æœç´¢æ—¥å¿—ã€‚</p><p><strong>ï¼ˆ4ï¼‰æµå¼è®¡ç®—å¹³å°ï¼š</strong>ä¸»è¦åŠŸèƒ½æ˜¯å¯¹åœ¨çº¿æ•°æ®çš„å¤„ç†ï¼Œåšåˆ°å‡†å®æ—¶çš„æŒ–æ˜å’Œåé¦ˆï¼Œè§£å†³é‚£äº›ç¦»çº¿è®¡ç®—å¹³å°æ— æ³•å¿«é€Ÿå“åº”çš„è®¡ç®—é—®é¢˜ã€‚å…·ä½“åˆå¯åˆ†ä¸ºï¼š</p><ul><li><strong>å®æ—¶å—ä¼—å®šå‘ï¼ˆReal-time targetingï¼‰</strong>å’Œ<strong>å®æ—¶ç‚¹å‡»åé¦ˆï¼ˆReal-time click feedbackï¼‰</strong>ï¼šå¯¹ç”¨æˆ·çš„å®æ—¶è¡Œä¸ºè¿›è¡Œè®¡ç®—ï¼Œå¦‚å®æ—¶æ›´æ–°ç‚¹å‡»ç‡æ¨¡å‹ã€åŠ¨æ€è°ƒæ•´ç”¨æˆ·æ ‡ç­¾ï¼Œè¿›è€Œæ›´å¥½çš„é€‚åº”çº¿ä¸Šç¯å¢ƒã€‚</li><li><strong>è®¡è´¹ï¼ˆBillingï¼‰</strong>ï¼šè¯¥æ¨¡å—æŒç®¡ç€å¹¿å‘Šç³»ç»Ÿçš„â€œé’±è¢‹å­â€ï¼Œè¿è¡Œçš„å‡†ç¡®æ€§å’Œç¨³å®šæ€§ç›´æ¥å½±å“äº†ç³»ç»Ÿçš„æ”¶ç›Šã€‚åœ¨å¹¿å‘ŠæŠ•æ”¾è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°æŠ•æ”¾é¢„ç®—ç”¨å®Œçš„æƒ…å†µï¼Œè¿™æ—¶è®¡è´¹æ¨¡å—å¿…é¡»åŠæ—¶ååº”ï¼Œé‡‡å–ä¾‹å¦‚é€šçŸ¥ç´¢å¼•ç³»ç»Ÿæš‚æ—¶å°†å¹¿å‘Šä¸‹çº¿çš„åŠæ³•ï¼Œé¿å…å¸¦æ¥æŸå¤±ã€‚</li><li><strong>åä½œå¼Šï¼ˆAnti-spamï¼‰</strong>ï¼šåˆ©ç”¨ç®—æ³•å’Œäººå·¥è§„åˆ™ç­‰å®æ—¶åˆ¤æ–­æµé‡æ¥æºä¸­æ˜¯å¦æœ‰ä½œå¼Šæµé‡ï¼Œå¹¶å°†è¿™éƒ¨åˆ†æµé‡ä»åç»­çš„è®¡ä»·å’Œç»Ÿè®¡ä¸­å»æ‰ï¼Œæ˜¯å¹¿å‘Šä¸šåŠ¡éå¸¸é‡è¦çš„éƒ¨åˆ†ã€‚</li></ul><h2 id="ç¡¬ä»¶"><a href="#ç¡¬ä»¶" class="headerlink" title="ç¡¬ä»¶"></a>ç¡¬ä»¶</h2><p><strong>ï¼ˆ1ï¼‰<code>Hadoop</code>ï¼š</strong>è¯¦æƒ…è¯·è§</p><p><strong>ï¼ˆ2ï¼‰<code>Spark</code>ï¼š</strong>è¯¦æƒ…è¯·è§</p><p><strong>ï¼ˆ3ï¼‰<code>Lucene</code>ï¼š</strong>è¯¦æƒ…è¯·è§</p><p><strong>ï¼ˆ4ï¼‰<code>Storm</code>ï¼š</strong>è¯¦æƒ…è¯·è§</p><p><strong>ï¼ˆ5ï¼‰<code>ZooKeeper</code>ï¼š</strong>è¯¦æƒ…è¯·è§</p><h2 id="æ ¸å¿ƒç®—æ³•"><a href="#æ ¸å¿ƒç®—æ³•" class="headerlink" title="æ ¸å¿ƒç®—æ³•"></a>æ ¸å¿ƒç®—æ³•</h2><p>è¯¦æƒ…è¯·è§<a href="https://zhuanlan.zhihu.com/p/60544294" target="_blank" rel="noopener">å‚è€ƒæ–‡ç« </a>æ ¸å¿ƒç®—æ³•ç¯‡</p><h1 id="å››ã€-å‚è€ƒä¹¦ç±-amp-è®ºæ–‡"><a href="#å››ã€-å‚è€ƒä¹¦ç±-amp-è®ºæ–‡" class="headerlink" title="å››ã€ å‚è€ƒä¹¦ç±&amp;è®ºæ–‡"></a>å››ã€ å‚è€ƒä¹¦ç±&amp;è®ºæ–‡</h1><ul><li>ã€Šè®¡ç®—å¹¿å‘Šã€‹ åˆ˜é¹ / ç‹è¶…</li><li><a href="https://zhuanlan.zhihu.com/p/60544294" target="_blank" rel="noopener">è®¡ç®—å¹¿å‘Šç³»ç»Ÿç®—æ³•ä¸æ¶æ„ç»¼è¿°</a></li><li><a href="https://dolantinlist.github.io/2018/05/21/RTBå¹¿å‘Šç«ä»·ç³»ç»Ÿçš„ç®—æ³•ä»‹ç»/" target="_blank" rel="noopener">RTBå¹¿å‘Šç«ä»·ç³»ç»Ÿçš„ç®—æ³•ä»‹ç»</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—å¹¿å‘Š </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç†è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èµ„æºæ•´åˆä¹‹å­¦ä¹ æ¸…å•</title>
      <link href="/2019/10/10/zi-yuan-zheng-he-zhi-xue-xi-qing-dan/"/>
      <url>/2019/10/10/zi-yuan-zheng-he-zhi-xue-xi-qing-dan/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/10/10/zi-yuan-zheng-he-zhi-xue-xi-qing-dan/image-20210621143735727.png" alt="image-20210621143735727"></p><h1 id="ä¸€ã€å®ç”¨å·¥å…·"><a href="#ä¸€ã€å®ç”¨å·¥å…·" class="headerlink" title="ä¸€ã€å®ç”¨å·¥å…·"></a>ä¸€ã€å®ç”¨å·¥å…·</h1><h2 id="ç¼–ç¨‹è¯­è¨€"><a href="#ç¼–ç¨‹è¯­è¨€" class="headerlink" title="ç¼–ç¨‹è¯­è¨€"></a>ç¼–ç¨‹è¯­è¨€</h2><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><h3 id="C-1"><a href="#C-1" class="headerlink" title="C"></a>C</h3><h3 id="C-2"><a href="#C-2" class="headerlink" title="C ++"></a>C ++</h3><h3 id="JAVA"><a href="#JAVA" class="headerlink" title="JAVA"></a>JAVA</h3><p>ï¼ˆ1ï¼‰æ•™ç¨‹</p><ul><li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744" target="_blank" rel="noopener">å»–å¤§ç¥</a></li></ul><p>ï¼ˆ2ï¼‰ç¬”è®°</p><h3 id="PYTHON"><a href="#PYTHON" class="headerlink" title="PYTHON"></a>PYTHON</h3><h2 id="å¤§æ•°æ®å·¥å…·"><a href="#å¤§æ•°æ®å·¥å…·" class="headerlink" title="å¤§æ•°æ®å·¥å…·"></a>å¤§æ•°æ®å·¥å…·</h2><h3 id="æŸ¥è¯¢å¼•æ“"><a href="#æŸ¥è¯¢å¼•æ“" class="headerlink" title="æŸ¥è¯¢å¼•æ“"></a>æŸ¥è¯¢å¼•æ“</h3><h4 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h4><h4 id="PIG"><a href="#PIG" class="headerlink" title="PIG"></a>PIG</h4><h4 id="HIVE"><a href="#HIVE" class="headerlink" title="HIVE"></a>HIVE</h4><h4 id="PRESTO"><a href="#PRESTO" class="headerlink" title="PRESTO"></a>PRESTO</h4><h4 id="IMPALA"><a href="#IMPALA" class="headerlink" title="IMPALA"></a>IMPALA</h4><h4 id="SPARK-SQL"><a href="#SPARK-SQL" class="headerlink" title="SPARK SQL"></a>SPARK SQL</h4><h3 id="è®¡ç®—å·¥å…·"><a href="#è®¡ç®—å·¥å…·" class="headerlink" title="è®¡ç®—å·¥å…·"></a>è®¡ç®—å·¥å…·</h3><h4 id="æµå¼è®¡ç®—"><a href="#æµå¼è®¡ç®—" class="headerlink" title="æµå¼è®¡ç®—"></a>æµå¼è®¡ç®—</h4><h5 id="APACHE-FLINK"><a href="#APACHE-FLINK" class="headerlink" title="APACHE FLINK"></a>APACHE FLINK</h5><h5 id="TWITTER-STORM"><a href="#TWITTER-STORM" class="headerlink" title="TWITTER STORM"></a>TWITTER STORM</h5><h5 id="SPARK-STREAMING"><a href="#SPARK-STREAMING" class="headerlink" title="SPARK STREAMING"></a>SPARK STREAMING</h5><h4 id="è¿­ä»£è®¡ç®—"><a href="#è¿­ä»£è®¡ç®—" class="headerlink" title="è¿­ä»£è®¡ç®—"></a>è¿­ä»£è®¡ç®—</h4><h5 id="TWISTER"><a href="#TWISTER" class="headerlink" title="TWISTER"></a>TWISTER</h5><h5 id="HALOOP"><a href="#HALOOP" class="headerlink" title="HALOOP"></a>HALOOP</h5><h5 id="APACHE-HAMA"><a href="#APACHE-HAMA" class="headerlink" title="APACHE HAMA"></a>APACHE HAMA</h5><h5 id="SPARK-GRAPHX"><a href="#SPARK-GRAPHX" class="headerlink" title="SPARK GRAPHX"></a>SPARK GRAPHX</h5><h5 id="APACHE-GIRAPH"><a href="#APACHE-GIRAPH" class="headerlink" title="APACHE GIRAPH"></a>APACHE GIRAPH</h5><h4 id="ç¦»çº¿è®¡ç®—"><a href="#ç¦»çº¿è®¡ç®—" class="headerlink" title="ç¦»çº¿è®¡ç®—"></a>ç¦»çº¿è®¡ç®—</h4><h5 id="APACHE-FLINK-1"><a href="#APACHE-FLINK-1" class="headerlink" title="APACHE FLINK"></a>APACHE FLINK</h5><h5 id="BERKELEY-SPARK"><a href="#BERKELEY-SPARK" class="headerlink" title="BERKELEY SPARK"></a>BERKELEY SPARK</h5><h5 id="HADOOP-MAPREDUCE"><a href="#HADOOP-MAPREDUCE" class="headerlink" title="HADOOP MAPREDUCE"></a>HADOOP MAPREDUCE</h5><h3 id="å­˜å‚¨å·¥å…·"><a href="#å­˜å‚¨å·¥å…·" class="headerlink" title="å­˜å‚¨å·¥å…·"></a>å­˜å‚¨å·¥å…·</h3><h4 id="KEY-VALUEå­˜å‚¨"><a href="#KEY-VALUEå­˜å‚¨" class="headerlink" title="KEY-VALUEå­˜å‚¨"></a>KEY-VALUEå­˜å‚¨</h4><h5 id="REDIS"><a href="#REDIS" class="headerlink" title="REDIS"></a>REDIS</h5><h5 id="HBASE"><a href="#HBASE" class="headerlink" title="HBASE"></a>HBASE</h5><h4 id="æ–‡ä»¶å­˜å‚¨"><a href="#æ–‡ä»¶å­˜å‚¨" class="headerlink" title="æ–‡ä»¶å­˜å‚¨"></a>æ–‡ä»¶å­˜å‚¨</h4><h5 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h5><h5 id="MONGODB"><a href="#MONGODB" class="headerlink" title="MONGODB"></a>MONGODB</h5><h3 id="èµ„æºç®¡ç†"><a href="#èµ„æºç®¡ç†" class="headerlink" title="èµ„æºç®¡ç†"></a>èµ„æºç®¡ç†</h3><h4 id="ZOOKEEPER"><a href="#ZOOKEEPER" class="headerlink" title="ZOOKEEPER"></a>ZOOKEEPER</h4><h4 id="HADOOP-YARN"><a href="#HADOOP-YARN" class="headerlink" title="HADOOP YARN"></a>HADOOP YARN</h4><h4 id="TWITTER-MESOS"><a href="#TWITTER-MESOS" class="headerlink" title="TWITTER MESOS"></a>TWITTER MESOS</h4><h3 id="æ—¥å¿—æ”¶é›†ç³»ç»Ÿ"><a href="#æ—¥å¿—æ”¶é›†ç³»ç»Ÿ" class="headerlink" title="æ—¥å¿—æ”¶é›†ç³»ç»Ÿ"></a>æ—¥å¿—æ”¶é›†ç³»ç»Ÿ</h3><h4 id="KIBANA"><a href="#KIBANA" class="headerlink" title="KIBANA"></a>KIBANA</h4><h4 id="LOGSTASH"><a href="#LOGSTASH" class="headerlink" title="LOGSTASH"></a>LOGSTASH</h4><h4 id="ELASTIC-SEARCH"><a href="#ELASTIC-SEARCH" class="headerlink" title="ELASTIC SEARCH"></a>ELASTIC SEARCH</h4><h4 id="CLOUDERA-FLUME"><a href="#CLOUDERA-FLUME" class="headerlink" title="CLOUDERA FLUME"></a>CLOUDERA FLUME</h4><h3 id="æ¶ˆæ¯ç³»ç»Ÿ"><a href="#æ¶ˆæ¯ç³»ç»Ÿ" class="headerlink" title="æ¶ˆæ¯ç³»ç»Ÿ"></a>æ¶ˆæ¯ç³»ç»Ÿ</h3><h4 id="APACHE-KAFKA"><a href="#APACHE-KAFKA" class="headerlink" title="APACHE KAFKA"></a>APACHE KAFKA</h4><h3 id="ç‰ˆæœ¬æ§åˆ¶å·¥å…·"><a href="#ç‰ˆæœ¬æ§åˆ¶å·¥å…·" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶å·¥å…·"></a>ç‰ˆæœ¬æ§åˆ¶å·¥å…·</h3><h4 id="GIT"><a href="#GIT" class="headerlink" title="GIT"></a>GIT</h4><h3 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h3><h4 id="SHELL"><a href="#SHELL" class="headerlink" title="SHELL"></a>SHELL</h4><h1 id="äºŒã€ç®—æ³•å­¦ä¹ "><a href="#äºŒã€ç®—æ³•å­¦ä¹ " class="headerlink" title="äºŒã€ç®—æ³•å­¦ä¹ "></a>äºŒã€ç®—æ³•å­¦ä¹ </h1><h2 id="æ¨èç®—æ³•"><a href="#æ¨èç®—æ³•" class="headerlink" title="æ¨èç®—æ³•"></a>æ¨èç®—æ³•</h2><h3 id="ååŒè¿‡æ»¤"><a href="#ååŒè¿‡æ»¤" class="headerlink" title="ååŒè¿‡æ»¤"></a>ååŒè¿‡æ»¤</h3><h1 id="ä¸‰ã€æ¨èä¹¦ç±"><a href="#ä¸‰ã€æ¨èä¹¦ç±" class="headerlink" title="ä¸‰ã€æ¨èä¹¦ç±"></a>ä¸‰ã€æ¨èä¹¦ç±</h1>]]></content>
      
      
      <categories>
          
          <category> èµ„æºæ•´åˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ æ¸…å• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
